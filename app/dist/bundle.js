var Bv=Object.defineProperty,Lv=Object.defineProperties;var kv=Object.getOwnPropertyDescriptors;var pf=Object.getOwnPropertySymbols;var Vm=Object.prototype.hasOwnProperty,zm=Object.prototype.propertyIsEnumerable;var Gm=(Ui,ji,Or)=>ji in Ui?Bv(Ui,ji,{enumerable:!0,configurable:!0,writable:!0,value:Or}):Ui[ji]=Or,He=(Ui,ji)=>{for(var Or in ji||(ji={}))Vm.call(ji,Or)&&Gm(Ui,Or,ji[Or]);if(pf)for(var Or of pf(ji))zm.call(ji,Or)&&Gm(Ui,Or,ji[Or]);return Ui},gi=(Ui,ji)=>Lv(Ui,kv(ji));var ps=(Ui,ji)=>{var Or={};for(var mn in Ui)Vm.call(Ui,mn)&&ji.indexOf(mn)<0&&(Or[mn]=Ui[mn]);if(Ui!=null&&pf)for(var mn of pf(Ui))ji.indexOf(mn)<0&&zm.call(Ui,mn)&&(Or[mn]=Ui[mn]);return Or};var he=(Ui,ji,Or)=>new Promise((mn,at)=>{var I=D=>{try{b(Or.next(D))}catch(M){at(M)}},w=D=>{try{b(Or.throw(D))}catch(M){at(M)}},b=D=>D.done?mn(D.value):Promise.resolve(D.value).then(I,w);b((Or=Or.apply(Ui,ji)).next())});(function(){var Ui={1924:function(at,I,w){"use strict";var b=w(210),D=w(5559),M=D(b("String.prototype.indexOf"));at.exports=function(C,m){var p=b(C,!!m);return typeof p=="function"&&M(C,".prototype.")>-1?D(p):p}},5559:function(at,I,w){"use strict";var b=w(8612),D=w(210),M=w(2490),O=D("%TypeError%"),C=D("%Function.prototype.apply%"),m=D("%Function.prototype.call%"),p=D("%Reflect.apply%",!0)||b.call(m,C),v=D("%Object.defineProperty%",!0),y=D("%Math.max%");if(v)try{v({},"a",{value:1})}catch(_){v=null}at.exports=function(A){if(typeof A!="function")throw new O("a function is required");var P=p(b,m,arguments);return M(P,1+y(0,A.length-(arguments.length-1)),!0)};var T=function(){return p(b,C,arguments)};v?v(at.exports,"apply",{value:T}):at.exports.apply=T},2296:function(at,I,w){"use strict";var b=w(1044)(),D=w(210),M=b&&D("%Object.defineProperty%",!0);if(M)try{M({},"a",{value:1})}catch(p){M=!1}var O=D("%SyntaxError%"),C=D("%TypeError%"),m=w(7296);at.exports=function(v,y,T){if(!v||typeof v!="object"&&typeof v!="function")throw new C("`obj` must be an object or a function`");if(typeof y!="string"&&typeof y!="symbol")throw new C("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new C("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new C("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new C("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new C("`loose`, if provided, must be a boolean");var _=arguments.length>3?arguments[3]:null,A=arguments.length>4?arguments[4]:null,P=arguments.length>5?arguments[5]:null,x=arguments.length>6?arguments[6]:!1,B=!!m&&m(v,y);if(M)M(v,y,{configurable:P===null&&B?B.configurable:!P,enumerable:_===null&&B?B.enumerable:!_,value:T,writable:A===null&&B?B.writable:!A});else if(x||!_&&!A&&!P)v[y]=T;else throw new O("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}},9187:function(at){"use strict";at.exports=I,at.exports.default=I;function I(J,ot,q){q=q||2;var gt=ot&&ot.length,yt=gt?ot[0]*q:J.length,et=w(J,0,yt,q,!0),ht=[];if(!et||et.next===et.prev)return ht;var Et,kt,Ft,Bt,Gt,Ct,jt;if(gt&&(et=p(J,ot,et,q)),J.length>80*q){Et=Ft=J[0],kt=Bt=J[1];for(var Kt=q;Kt<yt;Kt+=q)Gt=J[Kt],Ct=J[Kt+1],Gt<Et&&(Et=Gt),Ct<kt&&(kt=Ct),Gt>Ft&&(Ft=Gt),Ct>Bt&&(Bt=Ct);jt=Math.max(Ft-Et,Bt-kt),jt=jt!==0?32767/jt:0}return D(et,ht,q,Et,kt,jt,0),ht}function w(J,ot,q,gt,yt){var et,ht;if(yt===At(J,ot,q,gt)>0)for(et=ot;et<q;et+=gt)ht=Lt(et,J[et],J[et+1],ht);else for(et=q-gt;et>=ot;et-=gt)ht=Lt(et,J[et],J[et+1],ht);return ht&&Y(ht,ht.next)&&(ut(ht),ht=ht.next),ht}function b(J,ot){if(!J)return J;ot||(ot=J);var q=J,gt;do if(gt=!1,!q.steiner&&(Y(q,q.next)||X(q.prev,q,q.next)===0)){if(ut(q),q=ot=q.prev,q===q.next)break;gt=!0}else q=q.next;while(gt||q!==ot);return ot}function D(J,ot,q,gt,yt,et,ht){if(J){!ht&&et&&A(J,gt,yt,et);for(var Et=J,kt,Ft;J.prev!==J.next;){if(kt=J.prev,Ft=J.next,et?O(J,gt,yt,et):M(J)){ot.push(kt.i/q|0),ot.push(J.i/q|0),ot.push(Ft.i/q|0),ut(J),J=Ft.next,Et=Ft.next;continue}if(J=Ft,J===Et){ht?ht===1?(J=C(b(J),ot,q),D(J,ot,q,gt,yt,et,2)):ht===2&&m(J,ot,q,gt,yt,et):D(b(J),ot,q,gt,yt,et,1);break}}}}function M(J){var ot=J.prev,q=J,gt=J.next;if(X(ot,q,gt)>=0)return!1;for(var yt=ot.x,et=q.x,ht=gt.x,Et=ot.y,kt=q.y,Ft=gt.y,Bt=yt<et?yt<ht?yt:ht:et<ht?et:ht,Gt=Et<kt?Et<Ft?Et:Ft:kt<Ft?kt:Ft,Ct=yt>et?yt>ht?yt:ht:et>ht?et:ht,jt=Et>kt?Et>Ft?Et:Ft:kt>Ft?kt:Ft,Kt=gt.next;Kt!==ot;){if(Kt.x>=Bt&&Kt.x<=Ct&&Kt.y>=Gt&&Kt.y<=jt&&G(yt,Et,et,kt,ht,Ft,Kt.x,Kt.y)&&X(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.next}return!0}function O(J,ot,q,gt){var yt=J.prev,et=J,ht=J.next;if(X(yt,et,ht)>=0)return!1;for(var Et=yt.x,kt=et.x,Ft=ht.x,Bt=yt.y,Gt=et.y,Ct=ht.y,jt=Et<kt?Et<Ft?Et:Ft:kt<Ft?kt:Ft,Kt=Bt<Gt?Bt<Ct?Bt:Ct:Gt<Ct?Gt:Ct,ne=Et>kt?Et>Ft?Et:Ft:kt>Ft?kt:Ft,me=Bt>Gt?Bt>Ct?Bt:Ct:Gt>Ct?Gt:Ct,ue=x(jt,Kt,ot,q,gt),Oe=x(ne,me,ot,q,gt),de=J.prevZ,oe=J.nextZ;de&&de.z>=ue&&oe&&oe.z<=Oe;){if(de.x>=jt&&de.x<=ne&&de.y>=Kt&&de.y<=me&&de!==yt&&de!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,de.x,de.y)&&X(de.prev,de,de.next)>=0||(de=de.prevZ,oe.x>=jt&&oe.x<=ne&&oe.y>=Kt&&oe.y<=me&&oe!==yt&&oe!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,oe.x,oe.y)&&X(oe.prev,oe,oe.next)>=0))return!1;oe=oe.nextZ}for(;de&&de.z>=ue;){if(de.x>=jt&&de.x<=ne&&de.y>=Kt&&de.y<=me&&de!==yt&&de!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,de.x,de.y)&&X(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;oe&&oe.z<=Oe;){if(oe.x>=jt&&oe.x<=ne&&oe.y>=Kt&&oe.y<=me&&oe!==yt&&oe!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,oe.x,oe.y)&&X(oe.prev,oe,oe.next)>=0)return!1;oe=oe.nextZ}return!0}function C(J,ot,q){var gt=J;do{var yt=gt.prev,et=gt.next.next;!Y(yt,et)&&j(yt,gt,gt.next,et)&&ct(yt,et)&&ct(et,yt)&&(ot.push(yt.i/q|0),ot.push(gt.i/q|0),ot.push(et.i/q|0),ut(gt),ut(gt.next),gt=J=et),gt=gt.next}while(gt!==J);return b(gt)}function m(J,ot,q,gt,yt,et){var ht=J;do{for(var Et=ht.next.next;Et!==ht.prev;){if(ht.i!==Et.i&&k(ht,Et)){var kt=Rt(ht,Et);ht=b(ht,ht.next),kt=b(kt,kt.next),D(ht,ot,q,gt,yt,et,0),D(kt,ot,q,gt,yt,et,0);return}Et=Et.next}ht=ht.next}while(ht!==J)}function p(J,ot,q,gt){var yt=[],et,ht,Et,kt,Ft;for(et=0,ht=ot.length;et<ht;et++)Et=ot[et]*gt,kt=et<ht-1?ot[et+1]*gt:J.length,Ft=w(J,Et,kt,gt,!1),Ft===Ft.next&&(Ft.steiner=!0),yt.push(B(Ft));for(yt.sort(v),et=0;et<yt.length;et++)q=y(yt[et],q);return q}function v(J,ot){return J.x-ot.x}function y(J,ot){var q=T(J,ot);if(!q)return ot;var gt=Rt(q,J);return b(gt,gt.next),b(q,q.next)}function T(J,ot){var q=ot,gt=J.x,yt=J.y,et=-1/0,ht;do{if(yt<=q.y&&yt>=q.next.y&&q.next.y!==q.y){var Et=q.x+(yt-q.y)*(q.next.x-q.x)/(q.next.y-q.y);if(Et<=gt&&Et>et&&(et=Et,ht=q.x<q.next.x?q:q.next,Et===gt))return ht}q=q.next}while(q!==ot);if(!ht)return null;var kt=ht,Ft=ht.x,Bt=ht.y,Gt=1/0,Ct;q=ht;do gt>=q.x&&q.x>=Ft&&gt!==q.x&&G(yt<Bt?gt:et,yt,Ft,Bt,yt<Bt?et:gt,yt,q.x,q.y)&&(Ct=Math.abs(yt-q.y)/(gt-q.x),ct(q,J)&&(Ct<Gt||Ct===Gt&&(q.x>ht.x||q.x===ht.x&&_(ht,q)))&&(ht=q,Gt=Ct)),q=q.next;while(q!==kt);return ht}function _(J,ot){return X(J.prev,J,ot.prev)<0&&X(ot.next,J,J.next)<0}function A(J,ot,q,gt){var yt=J;do yt.z===0&&(yt.z=x(yt.x,yt.y,ot,q,gt)),yt.prevZ=yt.prev,yt.nextZ=yt.next,yt=yt.next;while(yt!==J);yt.prevZ.nextZ=null,yt.prevZ=null,P(yt)}function P(J){var ot,q,gt,yt,et,ht,Et,kt,Ft=1;do{for(q=J,J=null,et=null,ht=0;q;){for(ht++,gt=q,Et=0,ot=0;ot<Ft&&(Et++,gt=gt.nextZ,!!gt);ot++);for(kt=Ft;Et>0||kt>0&&gt;)Et!==0&&(kt===0||!gt||q.z<=gt.z)?(yt=q,q=q.nextZ,Et--):(yt=gt,gt=gt.nextZ,kt--),et?et.nextZ=yt:J=yt,yt.prevZ=et,et=yt;q=gt}et.nextZ=null,Ft*=2}while(ht>1);return J}function x(J,ot,q,gt,yt){return J=(J-q)*yt|0,ot=(ot-gt)*yt|0,J=(J|J<<8)&16711935,J=(J|J<<4)&252645135,J=(J|J<<2)&858993459,J=(J|J<<1)&1431655765,ot=(ot|ot<<8)&16711935,ot=(ot|ot<<4)&252645135,ot=(ot|ot<<2)&858993459,ot=(ot|ot<<1)&1431655765,J|ot<<1}function B(J){var ot=J,q=J;do(ot.x<q.x||ot.x===q.x&&ot.y<q.y)&&(q=ot),ot=ot.next;while(ot!==J);return q}function G(J,ot,q,gt,yt,et,ht,Et){return(yt-ht)*(ot-Et)>=(J-ht)*(et-Et)&&(J-ht)*(gt-Et)>=(q-ht)*(ot-Et)&&(q-ht)*(et-Et)>=(yt-ht)*(gt-Et)}function k(J,ot){return J.next.i!==ot.i&&J.prev.i!==ot.i&&!rt(J,ot)&&(ct(J,ot)&&ct(ot,J)&&pt(J,ot)&&(X(J.prev,J,ot.prev)||X(J,ot.prev,ot))||Y(J,ot)&&X(J.prev,J,J.next)>0&&X(ot.prev,ot,ot.next)>0)}function X(J,ot,q){return(ot.y-J.y)*(q.x-ot.x)-(ot.x-J.x)*(q.y-ot.y)}function Y(J,ot){return J.x===ot.x&&J.y===ot.y}function j(J,ot,q,gt){var yt=tt(X(J,ot,q)),et=tt(X(J,ot,gt)),ht=tt(X(q,gt,J)),Et=tt(X(q,gt,ot));return!!(yt!==et&&ht!==Et||yt===0&&st(J,q,ot)||et===0&&st(J,gt,ot)||ht===0&&st(q,J,gt)||Et===0&&st(q,ot,gt))}function st(J,ot,q){return ot.x<=Math.max(J.x,q.x)&&ot.x>=Math.min(J.x,q.x)&&ot.y<=Math.max(J.y,q.y)&&ot.y>=Math.min(J.y,q.y)}function tt(J){return J>0?1:J<0?-1:0}function rt(J,ot){var q=J;do{if(q.i!==J.i&&q.next.i!==J.i&&q.i!==ot.i&&q.next.i!==ot.i&&j(q,q.next,J,ot))return!0;q=q.next}while(q!==J);return!1}function ct(J,ot){return X(J.prev,J,J.next)<0?X(J,ot,J.next)>=0&&X(J,J.prev,ot)>=0:X(J,ot,J.prev)<0||X(J,J.next,ot)<0}function pt(J,ot){var q=J,gt=!1,yt=(J.x+ot.x)/2,et=(J.y+ot.y)/2;do q.y>et!=q.next.y>et&&q.next.y!==q.y&&yt<(q.next.x-q.x)*(et-q.y)/(q.next.y-q.y)+q.x&&(gt=!gt),q=q.next;while(q!==J);return gt}function Rt(J,ot){var q=new xt(J.i,J.x,J.y),gt=new xt(ot.i,ot.x,ot.y),yt=J.next,et=ot.prev;return J.next=ot,ot.prev=J,q.next=yt,yt.prev=q,gt.next=q,q.prev=gt,et.next=gt,gt.prev=et,gt}function Lt(J,ot,q,gt){var yt=new xt(J,ot,q);return gt?(yt.next=gt.next,yt.prev=gt,gt.next.prev=yt,gt.next=yt):(yt.prev=yt,yt.next=yt),yt}function ut(J){J.next.prev=J.prev,J.prev.next=J.next,J.prevZ&&(J.prevZ.nextZ=J.nextZ),J.nextZ&&(J.nextZ.prevZ=J.prevZ)}function xt(J,ot,q){this.i=J,this.x=ot,this.y=q,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}I.deviation=function(J,ot,q,gt){var yt=ot&&ot.length,et=yt?ot[0]*q:J.length,ht=Math.abs(At(J,0,et,q));if(yt)for(var Et=0,kt=ot.length;Et<kt;Et++){var Ft=ot[Et]*q,Bt=Et<kt-1?ot[Et+1]*q:J.length;ht-=Math.abs(At(J,Ft,Bt,q))}var Gt=0;for(Et=0;Et<gt.length;Et+=3){var Ct=gt[Et]*q,jt=gt[Et+1]*q,Kt=gt[Et+2]*q;Gt+=Math.abs((J[Ct]-J[Kt])*(J[jt+1]-J[Ct+1])-(J[Ct]-J[jt])*(J[Kt+1]-J[Ct+1]))}return ht===0&&Gt===0?0:Math.abs((Gt-ht)/ht)};function At(J,ot,q,gt){for(var yt=0,et=ot,ht=q-gt;et<q;et+=gt)yt+=(J[ht]-J[et])*(J[et+1]+J[ht+1]),ht=et;return yt}I.flatten=function(J){for(var ot=J[0][0].length,q={vertices:[],holes:[],dimensions:ot},gt=0,yt=0;yt<J.length;yt++){for(var et=0;et<J[yt].length;et++)for(var ht=0;ht<ot;ht++)q.vertices.push(J[yt][et][ht]);yt>0&&(gt+=J[yt-1].length,q.holes.push(gt))}return q}},1122:function(at,I){"use strict";var w,b,D,M=Object.defineProperty,O=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,p=(y,T,_)=>T in y?M(y,T,{enumerable:!0,configurable:!0,writable:!0,value:_}):y[T]=_,v=(y,T)=>{for(var _ in T||(T={}))C.call(T,_)&&p(y,_,T[_]);if(O)for(var _ of O(T))m.call(T,_)&&p(y,_,T[_]);return y};(function(y,T){var _=typeof I=="object";if(!0)b=[],w=T,D=typeof w=="function"?w.apply(I,b):w,D!==void 0&&(at.exports=D);else var A,P})(typeof self!="undefined"?self:this,()=>{var y,T={},_={exports:T},A=Object.defineProperty,P=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,B=Object.prototype.hasOwnProperty,G=(V,K)=>{for(var nt in K)A(V,nt,{get:K[nt],enumerable:!0})},k=(V,K,nt,St)=>{if(K&&typeof K=="object"||typeof K=="function")for(let Ot of x(K))!B.call(V,Ot)&&Ot!==nt&&A(V,Ot,{get:()=>K[Ot],enumerable:!(St=P(K,Ot))||St.enumerable});return V},X=V=>k(A({},"__esModule",{value:!0}),V),Y={};G(Y,{E:()=>dr,attribute:()=>wt,attributeStatic:()=>Mt,boost:()=>bi,boostObject:()=>Si,currency:()=>Ar,currencyStatic:()=>Fi,grid:()=>Ke,gridCell:()=>Xe,upgradeStatic:()=>rs}),_.exports=X(Y);var j=class{constructor(V){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=V}get size(){return this.map.size}get(V){const K=this.map.get(V);if(K!==void 0)return K!==this.first&&(K===this.last?(this.last=K.prev,this.last.next=void 0):(K.prev.next=K.next,K.next.prev=K.prev),K.next=this.first,this.first.prev=K,this.first=K),K.value}set(V,K){if(this.maxSize<1)return;if(this.map.has(V))throw new Error("Cannot update existing keys in the cache");const nt=new st(V,K);for(this.first===void 0?(this.first=nt,this.last=nt):(nt.next=this.first,this.first.prev=nt,this.first=nt),this.map.set(V,nt);this.map.size>this.maxSize;){const St=this.last;this.map.delete(St.key),this.last=St.prev,this.last.next=void 0}}},st=class{constructor(V,K){this.next=void 0,this.prev=void 0,this.key=V,this.value=K}},tt=17,rt=9e15,ct=Math.log10(9e15),pt=1/9e15,Rt=308,Lt=-324,ut=5,xt=1024-1,At=!0,J=!1,ot=function(){const V=[];for(let nt=Lt+1;nt<=Rt;nt++)V.push(+("1e"+nt));const K=323;return function(nt){return V[nt+K]}}(),q=[2,Math.E,3,4,5,6,7,8,9,10],gt=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],yt=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],et=function(K,nt){const St=nt+1,Ot=Math.ceil(Math.log10(Math.abs(K))),Xt=Math.round(K*Math.pow(10,St-Ot))*Math.pow(10,Ot-St);return parseFloat(Xt.toFixed(Math.max(St-Ot,0)))},ht=function(V){return Math.sign(V)*Math.log10(Math.abs(V))},Et=function(V){if(!isFinite(V))return V;if(V<-50)return V===Math.trunc(V)?Number.NEGATIVE_INFINITY:0;let K=1;for(;V<10;)K=K*V,++V;V-=1;let nt=.9189385332046727;nt=nt+(V+.5)*Math.log(V),nt=nt-V;const St=V*V;let Ot=V;return nt=nt+1/(12*Ot),Ot=Ot*St,nt=nt+1/(360*Ot),Ot=Ot*St,nt=nt+1/(1260*Ot),Ot=Ot*St,nt=nt+1/(1680*Ot),Ot=Ot*St,nt=nt+1/(1188*Ot),Ot=Ot*St,nt=nt+691/(360360*Ot),Ot=Ot*St,nt=nt+7/(1092*Ot),Ot=Ot*St,nt=nt+3617/(122400*Ot),Math.exp(nt)/K},kt=.36787944117144233,Ft=.5671432904097838,Bt=function(V,K=1e-10){let nt,St;if(!Number.isFinite(V)||V===0)return V;if(V===1)return Ft;V<10?nt=0:nt=Math.log(V)-Math.log(Math.log(V));for(let Ot=0;Ot<100;++Ot){if(St=(V*Math.exp(-nt)+nt*nt)/(nt+1),Math.abs(St-nt)<K*Math.abs(St))return St;nt=St}throw Error(`Iteration failed to converge: ${V.toString()}`)};function Gt(V,K=1e-10){let nt,St,Ot,Xt;if(!Number.isFinite(V.mag)||V.eq(Ct.dZero))return V;if(V.eq(Ct.dOne))return Ct.fromNumber(Ft);nt=Ct.ln(V);for(let se=0;se<100;++se){if(St=nt.neg().exp(),Ot=nt.sub(V.mul(St)),Xt=nt.sub(Ot.div(nt.add(1).sub(nt.add(2).mul(Ot).div(Ct.mul(2,nt).add(2))))),Ct.abs(Xt.sub(nt)).lt(Ct.abs(Xt).mul(K)))return Xt;nt=Xt}throw Error(`Iteration failed to converge: ${V.toString()}`)}var Ct=(y=class{constructor(V){this.sign=0,this.mag=0,this.layer=0,V instanceof y?this.fromDecimal(V):typeof V=="number"?this.fromNumber(V):typeof V=="string"&&this.fromString(V)}get m(){if(this.sign===0)return 0;if(this.layer===0){const V=Math.floor(Math.log10(this.mag));let K;return this.mag===5e-324?K=5:K=this.mag/ot(V),this.sign*K}else if(this.layer===1){const V=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,V)}else return this.sign}set m(V){this.layer<=2?this.fromMantissaExponent(V,this.e):(this.sign=Math.sign(V),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(V){this.fromMantissaExponent(this.m,V)}get s(){return this.sign}set s(V){V===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=V}get mantissa(){return this.m}set mantissa(V){this.m=V}get exponent(){return this.e}set exponent(V){this.e=V}static fromComponents(V,K,nt){return new y().fromComponents(V,K,nt)}static fromComponents_noNormalize(V,K,nt){return new y().fromComponents_noNormalize(V,K,nt)}static fromMantissaExponent(V,K){return new y().fromMantissaExponent(V,K)}static fromMantissaExponent_noNormalize(V,K){return new y().fromMantissaExponent_noNormalize(V,K)}static fromDecimal(V){return new y().fromDecimal(V)}static fromNumber(V){return new y().fromNumber(V)}static fromString(V){return new y().fromString(V)}static fromValue(V){return new y().fromValue(V)}static fromValue_noAlloc(V){if(V instanceof y)return V;if(typeof V=="string"){const K=y.fromStringCache.get(V);return K!==void 0?K:y.fromString(V)}else return typeof V=="number"?y.fromNumber(V):y.dZero}static abs(V){return y.fromValue_noAlloc(V).abs()}static neg(V){return y.fromValue_noAlloc(V).neg()}static negate(V){return y.fromValue_noAlloc(V).neg()}static negated(V){return y.fromValue_noAlloc(V).neg()}static sign(V){return y.fromValue_noAlloc(V).sign}static sgn(V){return y.fromValue_noAlloc(V).sign}static round(V){return y.fromValue_noAlloc(V).round()}static floor(V){return y.fromValue_noAlloc(V).floor()}static ceil(V){return y.fromValue_noAlloc(V).ceil()}static trunc(V){return y.fromValue_noAlloc(V).trunc()}static add(V,K){return y.fromValue_noAlloc(V).add(K)}static plus(V,K){return y.fromValue_noAlloc(V).add(K)}static sub(V,K){return y.fromValue_noAlloc(V).sub(K)}static subtract(V,K){return y.fromValue_noAlloc(V).sub(K)}static minus(V,K){return y.fromValue_noAlloc(V).sub(K)}static mul(V,K){return y.fromValue_noAlloc(V).mul(K)}static multiply(V,K){return y.fromValue_noAlloc(V).mul(K)}static times(V,K){return y.fromValue_noAlloc(V).mul(K)}static div(V,K){return y.fromValue_noAlloc(V).div(K)}static divide(V,K){return y.fromValue_noAlloc(V).div(K)}static recip(V){return y.fromValue_noAlloc(V).recip()}static reciprocal(V){return y.fromValue_noAlloc(V).recip()}static reciprocate(V){return y.fromValue_noAlloc(V).reciprocate()}static mod(V,K){return y.fromValue_noAlloc(V).mod(K)}static modulo(V,K){return y.fromValue_noAlloc(V).modulo(K)}static modular(V,K){return y.fromValue_noAlloc(V).modular(K)}static cmp(V,K){return y.fromValue_noAlloc(V).cmp(K)}static cmpabs(V,K){return y.fromValue_noAlloc(V).cmpabs(K)}static compare(V,K){return y.fromValue_noAlloc(V).cmp(K)}static isNaN(V){return V=y.fromValue_noAlloc(V),isNaN(V.sign)||isNaN(V.layer)||isNaN(V.mag)}static isFinite(V){return V=y.fromValue_noAlloc(V),isFinite(V.sign)&&isFinite(V.layer)&&isFinite(V.mag)}static eq(V,K){return y.fromValue_noAlloc(V).eq(K)}static equals(V,K){return y.fromValue_noAlloc(V).eq(K)}static neq(V,K){return y.fromValue_noAlloc(V).neq(K)}static notEquals(V,K){return y.fromValue_noAlloc(V).notEquals(K)}static lt(V,K){return y.fromValue_noAlloc(V).lt(K)}static lte(V,K){return y.fromValue_noAlloc(V).lte(K)}static gt(V,K){return y.fromValue_noAlloc(V).gt(K)}static gte(V,K){return y.fromValue_noAlloc(V).gte(K)}static max(V,K){return y.fromValue_noAlloc(V).max(K)}static min(V,K){return y.fromValue_noAlloc(V).min(K)}static minabs(V,K){return y.fromValue_noAlloc(V).minabs(K)}static maxabs(V,K){return y.fromValue_noAlloc(V).maxabs(K)}static clamp(V,K,nt){return y.fromValue_noAlloc(V).clamp(K,nt)}static clampMin(V,K){return y.fromValue_noAlloc(V).clampMin(K)}static clampMax(V,K){return y.fromValue_noAlloc(V).clampMax(K)}static cmp_tolerance(V,K,nt){return y.fromValue_noAlloc(V).cmp_tolerance(K,nt)}static compare_tolerance(V,K,nt){return y.fromValue_noAlloc(V).cmp_tolerance(K,nt)}static eq_tolerance(V,K,nt){return y.fromValue_noAlloc(V).eq_tolerance(K,nt)}static equals_tolerance(V,K,nt){return y.fromValue_noAlloc(V).eq_tolerance(K,nt)}static neq_tolerance(V,K,nt){return y.fromValue_noAlloc(V).neq_tolerance(K,nt)}static notEquals_tolerance(V,K,nt){return y.fromValue_noAlloc(V).notEquals_tolerance(K,nt)}static lt_tolerance(V,K,nt){return y.fromValue_noAlloc(V).lt_tolerance(K,nt)}static lte_tolerance(V,K,nt){return y.fromValue_noAlloc(V).lte_tolerance(K,nt)}static gt_tolerance(V,K,nt){return y.fromValue_noAlloc(V).gt_tolerance(K,nt)}static gte_tolerance(V,K,nt){return y.fromValue_noAlloc(V).gte_tolerance(K,nt)}static pLog10(V){return y.fromValue_noAlloc(V).pLog10()}static absLog10(V){return y.fromValue_noAlloc(V).absLog10()}static log10(V){return y.fromValue_noAlloc(V).log10()}static log(V,K){return y.fromValue_noAlloc(V).log(K)}static log2(V){return y.fromValue_noAlloc(V).log2()}static ln(V){return y.fromValue_noAlloc(V).ln()}static logarithm(V,K){return y.fromValue_noAlloc(V).logarithm(K)}static pow(V,K){return y.fromValue_noAlloc(V).pow(K)}static pow10(V){return y.fromValue_noAlloc(V).pow10()}static root(V,K){return y.fromValue_noAlloc(V).root(K)}static factorial(V,K){return y.fromValue_noAlloc(V).factorial()}static gamma(V,K){return y.fromValue_noAlloc(V).gamma()}static lngamma(V,K){return y.fromValue_noAlloc(V).lngamma()}static exp(V){return y.fromValue_noAlloc(V).exp()}static sqr(V){return y.fromValue_noAlloc(V).sqr()}static sqrt(V){return y.fromValue_noAlloc(V).sqrt()}static cube(V){return y.fromValue_noAlloc(V).cube()}static cbrt(V){return y.fromValue_noAlloc(V).cbrt()}static tetrate(V,K=2,nt=y.fromComponents_noNormalize(1,0,1),St=!1){return y.fromValue_noAlloc(V).tetrate(K,nt,St)}static iteratedexp(V,K=2,nt=y.fromComponents_noNormalize(1,0,1),St=!1){return y.fromValue_noAlloc(V).iteratedexp(K,nt,St)}static iteratedlog(V,K=10,nt=1,St=!1){return y.fromValue_noAlloc(V).iteratedlog(K,nt,St)}static layeradd10(V,K,nt=!1){return y.fromValue_noAlloc(V).layeradd10(K,nt)}static layeradd(V,K,nt=10,St=!1){return y.fromValue_noAlloc(V).layeradd(K,nt,St)}static slog(V,K=10,nt=!1){return y.fromValue_noAlloc(V).slog(K,100,nt)}static lambertw(V){return y.fromValue_noAlloc(V).lambertw()}static ssqrt(V){return y.fromValue_noAlloc(V).ssqrt()}static linear_sroot(V,K){return y.fromValue_noAlloc(V).linear_sroot(K)}static pentate(V,K=2,nt=y.fromComponents_noNormalize(1,0,1),St=!1){return y.fromValue_noAlloc(V).pentate(K,nt,St)}static affordGeometricSeries(V,K,nt,St){return this.affordGeometricSeries_core(y.fromValue_noAlloc(V),y.fromValue_noAlloc(K),y.fromValue_noAlloc(nt),St)}static sumGeometricSeries(V,K,nt,St){return this.sumGeometricSeries_core(V,y.fromValue_noAlloc(K),y.fromValue_noAlloc(nt),St)}static affordArithmeticSeries(V,K,nt,St){return this.affordArithmeticSeries_core(y.fromValue_noAlloc(V),y.fromValue_noAlloc(K),y.fromValue_noAlloc(nt),y.fromValue_noAlloc(St))}static sumArithmeticSeries(V,K,nt,St){return this.sumArithmeticSeries_core(y.fromValue_noAlloc(V),y.fromValue_noAlloc(K),y.fromValue_noAlloc(nt),y.fromValue_noAlloc(St))}static efficiencyOfPurchase(V,K,nt){return this.efficiencyOfPurchase_core(y.fromValue_noAlloc(V),y.fromValue_noAlloc(K),y.fromValue_noAlloc(nt))}static randomDecimalForTesting(V){if(Math.random()*20<1)return y.fromComponents_noNormalize(0,0,0);const K=Math.random()>.5?1:-1;if(Math.random()*20<1)return y.fromComponents_noNormalize(K,0,1);const nt=Math.floor(Math.random()*(V+1));let St=nt===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(St=Math.trunc(St));let Ot=Math.pow(10,St);return Math.random()>.9&&(Ot=Math.trunc(Ot)),y.fromComponents(K,nt,Ot)}static affordGeometricSeries_core(V,K,nt,St){const Ot=K.mul(nt.pow(St));return y.floor(V.div(Ot).mul(nt.sub(1)).add(1).log10().div(nt.log10()))}static sumGeometricSeries_core(V,K,nt,St){return K.mul(nt.pow(St)).mul(y.sub(1,nt.pow(V))).div(y.sub(1,nt))}static affordArithmeticSeries_core(V,K,nt,St){const Xt=K.add(St.mul(nt)).sub(nt.div(2)),se=Xt.pow(2);return Xt.neg().add(se.add(nt.mul(V).mul(2)).sqrt()).div(nt).floor()}static sumArithmeticSeries_core(V,K,nt,St){const Ot=K.add(St.mul(nt));return V.div(2).mul(Ot.mul(2).plus(V.sub(1).mul(nt)))}static efficiencyOfPurchase_core(V,K,nt){return V.div(K).add(V.div(nt))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<pt)return this.layer+=1,this.mag=Math.log10(this.mag),this;let V=Math.abs(this.mag),K=Math.sign(this.mag);if(V>=rt)return this.layer+=1,this.mag=K*Math.log10(V),this;for(;V<ct&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=K*Math.pow(10,V),V=Math.abs(this.mag),K=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(V,K,nt){return this.sign=V,this.layer=K,this.mag=nt,this.normalize(),this}fromComponents_noNormalize(V,K,nt){return this.sign=V,this.layer=K,this.mag=nt,this}fromMantissaExponent(V,K){return this.layer=1,this.sign=Math.sign(V),V=Math.abs(V),this.mag=K+Math.log10(V),this.normalize(),this}fromMantissaExponent_noNormalize(V,K){return this.fromMantissaExponent(V,K),this}fromDecimal(V){return this.sign=V.sign,this.layer=V.layer,this.mag=V.mag,this}fromNumber(V){return this.mag=Math.abs(V),this.sign=Math.sign(V),this.layer=0,this.normalize(),this}fromString(V){const K=V,nt=y.fromStringCache.get(K);if(nt!==void 0)return this.fromDecimal(nt);At?V=V.replace(",",""):J&&(V=V.replace(",","."));const St=V.split("^^^");if(St.length===2){const er=parseFloat(St[0]),Er=parseFloat(St[1]),ur=St[1].split(";");let fi=1;if(ur.length===2&&(fi=parseFloat(ur[1]),isFinite(fi)||(fi=1)),isFinite(er)&&isFinite(Er)){const or=y.pentate(er,Er,fi);return this.sign=or.sign,this.layer=or.layer,this.mag=or.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}}const Ot=V.split("^^");if(Ot.length===2){const er=parseFloat(Ot[0]),Er=parseFloat(Ot[1]),ur=Ot[1].split(";");let fi=1;if(ur.length===2&&(fi=parseFloat(ur[1]),isFinite(fi)||(fi=1)),isFinite(er)&&isFinite(Er)){const or=y.tetrate(er,Er,fi);return this.sign=or.sign,this.layer=or.layer,this.mag=or.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}}const Xt=V.split("^");if(Xt.length===2){const er=parseFloat(Xt[0]),Er=parseFloat(Xt[1]);if(isFinite(er)&&isFinite(Er)){const ur=y.pow(er,Er);return this.sign=ur.sign,this.layer=ur.layer,this.mag=ur.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}}V=V.trim().toLowerCase();let se,Se,ge=V.split("pt");if(ge.length===2){se=10,Se=parseFloat(ge[0]),ge[1]=ge[1].replace("(",""),ge[1]=ge[1].replace(")","");let er=parseFloat(ge[1]);if(isFinite(er)||(er=1),isFinite(se)&&isFinite(Se)){const Er=y.tetrate(se,Se,er);return this.sign=Er.sign,this.layer=Er.layer,this.mag=Er.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}}if(ge=V.split("p"),ge.length===2){se=10,Se=parseFloat(ge[0]),ge[1]=ge[1].replace("(",""),ge[1]=ge[1].replace(")","");let er=parseFloat(ge[1]);if(isFinite(er)||(er=1),isFinite(se)&&isFinite(Se)){const Er=y.tetrate(se,Se,er);return this.sign=Er.sign,this.layer=Er.layer,this.mag=Er.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}}if(ge=V.split("f"),ge.length===2){se=10,ge[0]=ge[0].replace("(",""),ge[0]=ge[0].replace(")","");let er=parseFloat(ge[0]);if(ge[1]=ge[1].replace("(",""),ge[1]=ge[1].replace(")",""),Se=parseFloat(ge[1]),isFinite(er)||(er=1),isFinite(se)&&isFinite(Se)){const Er=y.tetrate(se,Se,er);return this.sign=Er.sign,this.layer=Er.layer,this.mag=Er.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}}const Ue=V.split("e"),We=Ue.length-1;if(We===0){const er=parseFloat(V);if(isFinite(er))return this.fromNumber(er),y.fromStringCache.size>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}else if(We===1){const er=parseFloat(V);if(isFinite(er)&&er!==0)return this.fromNumber(er),y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}const ir=V.split("e^");if(ir.length===2){this.sign=1,ir[0].charAt(0)=="-"&&(this.sign=-1);let er="";for(let Er=0;Er<ir[1].length;++Er){const ur=ir[1].charCodeAt(Er);if(ur>=43&&ur<=57||ur===101)er+=ir[1].charAt(Er);else return this.layer=parseFloat(er),this.mag=parseFloat(ir[1].substr(Er+1)),this.normalize(),y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}}if(We<1)return this.sign=0,this.layer=0,this.mag=0,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this;const Ve=parseFloat(Ue[0]);if(Ve===0)return this.sign=0,this.layer=0,this.mag=0,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this;let Nr=parseFloat(Ue[Ue.length-1]);if(We>=2){const er=parseFloat(Ue[Ue.length-2]);isFinite(er)&&(Nr*=Math.sign(er),Nr+=ht(er))}if(!isFinite(Ve))this.sign=Ue[0]==="-"?-1:1,this.layer=We,this.mag=Nr;else if(We===1)this.sign=Math.sign(Ve),this.layer=1,this.mag=Nr+Math.log10(Math.abs(Ve));else if(this.sign=Math.sign(Ve),this.layer=We,We===2){const er=y.mul(y.fromComponents(1,2,Nr),y.fromValue_noAlloc(Ve));return this.sign=er.sign,this.layer=er.layer,this.mag=er.mag,y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}else this.mag=Nr;return this.normalize(),y.fromStringCache.maxSize>=1&&y.fromStringCache.set(K,y.fromDecimal(this)),this}fromValue(V){return V instanceof y?this.fromDecimal(V):typeof V=="number"?this.fromNumber(V):typeof V=="string"?this.fromString(V):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(V){return isNaN(this.m)?Number.NaN:this.m===0?0:et(this.m,V)}magnitudeWithDecimalPlaces(V){return isNaN(this.mag)?Number.NaN:this.mag===0?0:et(this.mag,V)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=ut?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(V){return this.layer===0?(this.sign*this.mag).toExponential(V):this.toStringWithDecimalPlaces(V)}toFixed(V){return this.layer===0?(this.sign*this.mag).toFixed(V):this.toStringWithDecimalPlaces(V)}toPrecision(V){return this.e<=-7?this.toExponential(V-1):V>this.e?this.toFixed(V-this.exponent-1):this.toExponential(V-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(V){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(V):et(this.m,V)+"e"+et(this.e,V):this.layer===1?et(this.m,V)+"e"+et(this.e,V):this.layer<=ut?(this.sign===-1?"-":"")+"e".repeat(this.layer)+et(this.mag,V):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+et(this.mag,V)}abs(){return y.fromComponents_noNormalize(this.sign===0?0:1,this.layer,this.mag)}neg(){return y.fromComponents_noNormalize(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?y.dZero:this.layer===0?y.fromComponents(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?y.dZero:this.layer===0?y.fromComponents(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?y.dZero:this.layer===0?y.fromComponents(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?y.dZero:this.layer===0?y.fromComponents(this.sign,0,Math.trunc(this.mag)):this}add(V){const K=y.fromValue_noAlloc(V);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(K.layer)||this.sign===0)return K;if(K.sign===0)return this;if(this.sign===-K.sign&&this.layer===K.layer&&this.mag===K.mag)return y.fromComponents_noNormalize(0,0,0);let nt,St;if(this.layer>=2||K.layer>=2)return this.maxabs(K);if(y.cmpabs(this,K)>0?(nt=this,St=K):(nt=K,St=this),nt.layer===0&&St.layer===0)return y.fromNumber(nt.sign*nt.mag+St.sign*St.mag);const Ot=nt.layer*Math.sign(nt.mag),Xt=St.layer*Math.sign(St.mag);if(Ot-Xt>=2)return nt;if(Ot===0&&Xt===-1){if(Math.abs(St.mag-Math.log10(nt.mag))>tt)return nt;{const se=Math.pow(10,Math.log10(nt.mag)-St.mag),Se=St.sign+nt.sign*se;return y.fromComponents(Math.sign(Se),1,St.mag+Math.log10(Math.abs(Se)))}}if(Ot===1&&Xt===0){if(Math.abs(nt.mag-Math.log10(St.mag))>tt)return nt;{const se=Math.pow(10,nt.mag-Math.log10(St.mag)),Se=St.sign+nt.sign*se;return y.fromComponents(Math.sign(Se),1,Math.log10(St.mag)+Math.log10(Math.abs(Se)))}}if(Math.abs(nt.mag-St.mag)>tt)return nt;{const se=Math.pow(10,nt.mag-St.mag),Se=St.sign+nt.sign*se;return y.fromComponents(Math.sign(Se),1,St.mag+Math.log10(Math.abs(Se)))}throw Error("Bad arguments to add: "+this+", "+V)}plus(V){return this.add(V)}sub(V){return this.add(y.fromValue_noAlloc(V).neg())}subtract(V){return this.sub(V)}minus(V){return this.sub(V)}mul(V){const K=y.fromValue_noAlloc(V);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(K.layer))return K;if(this.sign===0||K.sign===0)return y.fromComponents_noNormalize(0,0,0);if(this.layer===K.layer&&this.mag===-K.mag)return y.fromComponents_noNormalize(this.sign*K.sign,0,1);let nt,St;if(this.layer>K.layer||this.layer==K.layer&&Math.abs(this.mag)>Math.abs(K.mag)?(nt=this,St=K):(nt=K,St=this),nt.layer===0&&St.layer===0)return y.fromNumber(nt.sign*St.sign*nt.mag*St.mag);if(nt.layer>=3||nt.layer-St.layer>=2)return y.fromComponents(nt.sign*St.sign,nt.layer,nt.mag);if(nt.layer===1&&St.layer===0)return y.fromComponents(nt.sign*St.sign,1,nt.mag+Math.log10(St.mag));if(nt.layer===1&&St.layer===1)return y.fromComponents(nt.sign*St.sign,1,nt.mag+St.mag);if(nt.layer===2&&St.layer===1){const Ot=y.fromComponents(Math.sign(nt.mag),nt.layer-1,Math.abs(nt.mag)).add(y.fromComponents(Math.sign(St.mag),St.layer-1,Math.abs(St.mag)));return y.fromComponents(nt.sign*St.sign,Ot.layer+1,Ot.sign*Ot.mag)}if(nt.layer===2&&St.layer===2){const Ot=y.fromComponents(Math.sign(nt.mag),nt.layer-1,Math.abs(nt.mag)).add(y.fromComponents(Math.sign(St.mag),St.layer-1,Math.abs(St.mag)));return y.fromComponents(nt.sign*St.sign,Ot.layer+1,Ot.sign*Ot.mag)}throw Error("Bad arguments to mul: "+this+", "+V)}multiply(V){return this.mul(V)}times(V){return this.mul(V)}div(V){const K=y.fromValue_noAlloc(V);return this.mul(K.recip())}divide(V){return this.div(V)}divideBy(V){return this.div(V)}dividedBy(V){return this.div(V)}recip(){return this.mag===0?y.dNaN:this.layer===0?y.fromComponents(this.sign,0,1/this.mag):y.fromComponents(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(V){const K=y.fromValue_noAlloc(V);return this.sign>K.sign?1:this.sign<K.sign?-1:this.sign*this.cmpabs(V)}cmpabs(V){const K=y.fromValue_noAlloc(V),nt=this.mag>0?this.layer:-this.layer,St=K.mag>0?K.layer:-K.layer;return nt>St?1:nt<St?-1:this.mag>K.mag?1:this.mag<K.mag?-1:0}compare(V){return this.cmp(V)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(V){const K=y.fromValue_noAlloc(V);return this.sign===K.sign&&this.layer===K.layer&&this.mag===K.mag}equals(V){return this.eq(V)}neq(V){return!this.eq(V)}notEquals(V){return this.neq(V)}lt(V){return this.cmp(V)===-1}lte(V){return!this.gt(V)}gt(V){return this.cmp(V)===1}gte(V){return!this.lt(V)}max(V){const K=y.fromValue_noAlloc(V);return this.lt(K)?K:this}min(V){const K=y.fromValue_noAlloc(V);return this.gt(K)?K:this}maxabs(V){const K=y.fromValue_noAlloc(V);return this.cmpabs(K)<0?K:this}minabs(V){const K=y.fromValue_noAlloc(V);return this.cmpabs(K)>0?K:this}clamp(V,K){return this.max(V).min(K)}clampMin(V){return this.max(V)}clampMax(V){return this.min(V)}cmp_tolerance(V,K){const nt=y.fromValue_noAlloc(V);return this.eq_tolerance(nt,K)?0:this.cmp(nt)}compare_tolerance(V,K){return this.cmp_tolerance(V,K)}eq_tolerance(V,K){const nt=y.fromValue_noAlloc(V);if(K==null&&(K=1e-7),this.sign!==nt.sign||Math.abs(this.layer-nt.layer)>1)return!1;let St=this.mag,Ot=nt.mag;return this.layer>nt.layer&&(Ot=ht(Ot)),this.layer<nt.layer&&(St=ht(St)),Math.abs(St-Ot)<=K*Math.max(Math.abs(St),Math.abs(Ot))}equals_tolerance(V,K){return this.eq_tolerance(V,K)}neq_tolerance(V,K){return!this.eq_tolerance(V,K)}notEquals_tolerance(V,K){return this.neq_tolerance(V,K)}lt_tolerance(V,K){const nt=y.fromValue_noAlloc(V);return!this.eq_tolerance(nt,K)&&this.lt(nt)}lte_tolerance(V,K){const nt=y.fromValue_noAlloc(V);return this.eq_tolerance(nt,K)||this.lt(nt)}gt_tolerance(V,K){const nt=y.fromValue_noAlloc(V);return!this.eq_tolerance(nt,K)&&this.gt(nt)}gte_tolerance(V,K){const nt=y.fromValue_noAlloc(V);return this.eq_tolerance(nt,K)||this.gt(nt)}pLog10(){return this.lt(y.dZero)?y.dZero:this.log10()}absLog10(){return this.sign===0?y.dNaN:this.layer>0?y.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):y.fromComponents(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?y.dNaN:this.layer>0?y.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):y.fromComponents(this.sign,0,Math.log10(this.mag))}log(V){return V=y.fromValue_noAlloc(V),this.sign<=0||V.sign<=0||V.sign===1&&V.layer===0&&V.mag===1?y.dNaN:this.layer===0&&V.layer===0?y.fromComponents(this.sign,0,Math.log(this.mag)/Math.log(V.mag)):y.div(this.log10(),V.log10())}log2(){return this.sign<=0?y.dNaN:this.layer===0?y.fromComponents(this.sign,0,Math.log2(this.mag)):this.layer===1?y.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?y.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):y.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?y.dNaN:this.layer===0?y.fromComponents(this.sign,0,Math.log(this.mag)):this.layer===1?y.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?y.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):y.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(V){return this.log(V)}pow(V){const K=y.fromValue_noAlloc(V),nt=this,St=K;if(nt.sign===0)return St.eq(0)?y.fromComponents_noNormalize(1,0,1):nt;if(nt.sign===1&&nt.layer===0&&nt.mag===1)return nt;if(St.sign===0)return y.fromComponents_noNormalize(1,0,1);if(St.sign===1&&St.layer===0&&St.mag===1)return nt;const Ot=nt.absLog10().mul(St).pow10();return this.sign===-1?Math.abs(St.toNumber()%2)%2===1?Ot.neg():Math.abs(St.toNumber()%2)%2===0?Ot:y.dNaN:Ot}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return y.dNaN;let V=this;if(V.layer===0){const K=Math.pow(10,V.sign*V.mag);if(Number.isFinite(K)&&Math.abs(K)>=.1)return y.fromComponents(1,0,K);if(V.sign===0)return y.dOne;V=y.fromComponents_noNormalize(V.sign,V.layer+1,Math.log10(V.mag))}return V.sign>0&&V.mag>=0?y.fromComponents(V.sign,V.layer+1,V.mag):V.sign<0&&V.mag>=0?y.fromComponents(-V.sign,V.layer+1,-V.mag):y.dOne}pow_base(V){return y.fromValue_noAlloc(V).pow(this)}root(V){const K=y.fromValue_noAlloc(V);return this.pow(K.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?y.exp(y.mul(this,y.ln(this).sub(1))):y.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(y.fromComponents_noNormalize(1,0,24)))return y.fromNumber(Et(this.sign*this.mag));const V=this.mag-1;let K=.9189385332046727;K=K+(V+.5)*Math.log(V),K=K-V;const nt=V*V;let St=V,Ot=12*St,Xt=1/Ot,se=K+Xt;if(se===K||(K=se,St=St*nt,Ot=360*St,Xt=1/Ot,se=K-Xt,se===K))return y.exp(K);K=se,St=St*nt,Ot=1260*St;let Se=1/Ot;return K=K+Se,St=St*nt,Ot=1680*St,Se=1/Ot,K=K-Se,y.exp(K)}else return this.layer===1?y.exp(y.mul(this,y.ln(this).sub(1))):y.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?y.dOne:this.layer===0&&this.mag<=709.7?y.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?y.fromComponents(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?y.fromComponents(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):y.fromComponents(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return y.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return y.fromComponents(1,2,Math.log10(this.mag)-.3010299956639812);{const V=y.div(y.fromComponents_noNormalize(this.sign,this.layer-1,this.mag),y.fromComponents_noNormalize(1,0,2));return V.layer+=1,V.normalize(),V}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(V=2,K=y.fromComponents_noNormalize(1,0,1),nt=!1){if(V===1)return y.pow(this,K);if(V===0)return new y(K);if(this.eq(y.dOne))return y.dOne;if(this.eq(-1))return y.pow(this,K);if(V===Number.POSITIVE_INFINITY){const Xt=this.toNumber();if(Xt<=1.444667861009766&&Xt>=.06598803584531254){if(Xt>1.444667861009099)return y.fromNumber(Math.E);const se=y.ln(this).neg();return se.lambertw().div(se)}else return Xt>1.444667861009766?y.fromNumber(Number.POSITIVE_INFINITY):y.dNaN}if(this.eq(y.dZero)){let Xt=Math.abs((V+1)%2);return Xt>1&&(Xt=2-Xt),y.fromNumber(Xt)}if(V<0)return y.iteratedlog(K,this,-V,nt);K=y.fromValue_noAlloc(K);const St=V;V=Math.trunc(V);const Ot=St-V;if(this.gt(y.dZero)&&this.lte(1.444667861009766)&&(St>1e4||!nt)){V=Math.min(1e4,V);for(let Xt=0;Xt<V;++Xt){const se=K;if(K=this.pow(K),se.eq(K))return K}if(Ot!=0||St>1e4){const Xt=this.pow(K);return St<=1e4||Math.ceil(St)%2==0?K.mul(1-Ot).add(Xt.mul(Ot)):K.mul(Ot).add(Xt.mul(1-Ot))}return K}Ot!==0&&(K.eq(y.dOne)?this.gt(10)||nt?K=this.pow(Ot):(K=y.fromNumber(y.tetrate_critical(this.toNumber(),Ot)),this.lt(2)&&(K=K.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?K=K.layeradd10(Ot,nt):K=K.layeradd(Ot,this,nt));for(let Xt=0;Xt<V;++Xt){if(K=this.pow(K),!isFinite(K.layer)||!isFinite(K.mag))return K.normalize();if(K.layer-this.layer>3)return y.fromComponents_noNormalize(K.sign,K.layer+(V-Xt-1),K.mag);if(Xt>1e4)return K}return K}iteratedexp(V=2,K=y.fromComponents_noNormalize(1,0,1),nt=!1){return this.tetrate(V,K,nt)}iteratedlog(V=10,K=1,nt=!1){if(K<0)return y.tetrate(V,-K,this,nt);V=y.fromValue_noAlloc(V);let St=y.fromDecimal(this);const Ot=K;K=Math.trunc(K);const Xt=Ot-K;if(St.layer-V.layer>3){const se=Math.min(K,St.layer-V.layer-3);K-=se,St.layer-=se}for(let se=0;se<K;++se){if(St=St.log(V),!isFinite(St.layer)||!isFinite(St.mag))return St.normalize();if(se>1e4)return St}return Xt>0&&Xt<1&&(V.eq(10)?St=St.layeradd10(-Xt,nt):St=St.layeradd(-Xt,V,nt)),St}slog(V=10,K=100,nt=!1){let St=.001,Ot=!1,Xt=!1,se=this.slog_internal(V,nt).toNumber();for(let Se=1;Se<K;++Se){const Ue=new y(V).tetrate(se,y.dOne,nt).gt(this);if(Se>1&&Xt!=Ue&&(Ot=!0),Xt=Ue,Ot?St/=2:St*=2,St=Math.abs(St)*(Ue?-1:1),se+=St,St===0)break}return y.fromNumber(se)}slog_internal(V=10,K=!1){if(V=y.fromValue_noAlloc(V),V.lte(y.dZero)||V.eq(y.dOne))return y.dNaN;if(V.lt(y.dOne))return this.eq(y.dOne)?y.dZero:this.eq(y.dZero)?y.dNegOne:y.dNaN;if(this.mag<0||this.eq(y.dZero))return y.dNegOne;let nt=0,St=y.fromDecimal(this);if(St.layer-V.layer>3){const Ot=St.layer-V.layer-3;nt+=Ot,St.layer-=Ot}for(let Ot=0;Ot<100;++Ot)if(St.lt(y.dZero))St=y.pow(V,St),nt-=1;else{if(St.lte(y.dOne))return K?y.fromNumber(nt+St.toNumber()-1):y.fromNumber(nt+y.slog_critical(V.toNumber(),St.toNumber()));nt+=1,St=y.log(St,V)}return y.fromNumber(nt)}static slog_critical(V,K){return V>10?K-1:y.critical_section(V,K,yt)}static tetrate_critical(V,K){return y.critical_section(V,K,gt)}static critical_section(V,K,nt,St=!1){K*=10,K<0&&(K=0),K>10&&(K=10),V<2&&(V=2),V>10&&(V=10);let Ot=0,Xt=0;for(let Se=0;Se<q.length;++Se)if(q[Se]==V){Ot=nt[Se][Math.floor(K)],Xt=nt[Se][Math.ceil(K)];break}else if(q[Se]<V&&q[Se+1]>V){const ge=(V-q[Se])/(q[Se+1]-q[Se]);Ot=nt[Se][Math.floor(K)]*(1-ge)+nt[Se+1][Math.floor(K)]*ge,Xt=nt[Se][Math.ceil(K)]*(1-ge)+nt[Se+1][Math.ceil(K)]*ge;break}const se=K-Math.floor(K);return Ot<=0||Xt<=0?Ot*(1-se)+Xt*se:Math.pow(V,Math.log(Ot)/Math.log(V)*(1-se)+Math.log(Xt)/Math.log(V)*se)}layeradd10(V,K=!1){V=y.fromValue_noAlloc(V).toNumber();const nt=y.fromDecimal(this);if(V>=1){nt.mag<0&&nt.layer>0?(nt.sign=0,nt.mag=0,nt.layer=0):nt.sign===-1&&nt.layer==0&&(nt.sign=1,nt.mag=-nt.mag);const St=Math.trunc(V);V-=St,nt.layer+=St}if(V<=-1){const St=Math.trunc(V);if(V-=St,nt.layer+=St,nt.layer<0)for(let Ot=0;Ot<100;++Ot){if(nt.layer++,nt.mag=Math.log10(nt.mag),!isFinite(nt.mag))return nt.sign===0&&(nt.sign=1),nt.layer<0&&(nt.layer=0),nt.normalize();if(nt.layer>=0)break}}for(;nt.layer<0;)nt.layer++,nt.mag=Math.log10(nt.mag);return nt.sign===0&&(nt.sign=1,nt.mag===0&&nt.layer>=1&&(nt.layer-=1,nt.mag=1)),nt.normalize(),V!==0?nt.layeradd(V,10,K):nt}layeradd(V,K,nt=!1){const Ot=this.slog(K).toNumber()+V;return Ot>=0?y.tetrate(K,Ot,y.dOne,nt):Number.isFinite(Ot)?Ot>=-1?y.log(y.tetrate(K,Ot+1,y.dOne,nt),K):y.log(y.log(y.tetrate(K,Ot+2,y.dOne,nt),K),K):y.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return y.fromNumber(Bt(this.toNumber()));if(this.layer===0)return y.fromNumber(Bt(this.sign*this.mag));if(this.layer===1)return Gt(this);if(this.layer===2)return Gt(this);if(this.layer>=3)return y.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return y.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);const V=this.ln();return V.div(V.lambertw())}linear_sroot(V){if(V==1)return this;if(this.eq(y.dInf))return y.dInf;if(!this.isFinite())return y.dNaN;if(V==2)try{return this.ssqrt()}catch(K){return y.dNaN}if(V>0&&V<1)return this.root(V);if(V>-2&&V<-1)return y.fromNumber(V).add(2).pow(this.recip());if(V<=0)return y.dNaN;if(V==Number.POSITIVE_INFINITY){const K=this.toNumber();return K<Math.E&&K>kt?this.pow(this.recip()):y.dNaN}if(this.eq(1))return y.dOne;if(this.lt(0))return y.dNaN;if(this.lte("1ee-16"))return V%2==1?this:y.dNaN;if(this.gt(1)){let K=y.dTen;this.gte(y.tetrate(10,V,1,!0))&&(K=this.iteratedlog(10,V-1,!0)),V<=1&&(K=this.root(V));let nt=y.dZero;const St=K.layer;let Ot=K.iteratedlog(10,St,!0),Xt=Ot,se=Ot.div(2),Se=!0;for(;Se;)se=nt.add(Ot).div(2),y.iteratedexp(10,St,se,!0).tetrate(V,1,!0).gt(this)?Ot=se:nt=se,se.eq(Xt)?Se=!1:Xt=se;return y.iteratedexp(10,St,se,!0)}else{let K=1,nt=y.fromComponents(1,10,1),St=y.fromComponents(1,10,1),Ot=y.fromComponents(1,10,1),Xt=y.fromComponents(1,1,-16),se=y.dZero,Se=y.fromComponents(1,10,1),ge=Xt.pow10().recip(),Ue=y.dZero,We=ge,ir=ge;const Ve=Math.ceil(V)%2==0;let Nr=0,er=y.fromComponents(1,10,1),Er=!1,ur=y.dZero,fi=!1;for(;K<4;){if(K==2){if(Ve)break;Ot=y.fromComponents(1,10,1),Xt=nt,K=3,Se=y.fromComponents(1,10,1),er=y.fromComponents(1,10,1)}for(Er=!1;Xt.neq(Ot);){if(ur=Xt,Xt.pow10().recip().tetrate(V,1,!0).eq(1)&&Xt.pow10().recip().lt(.4))ge=Xt.pow10().recip(),We=Xt.pow10().recip(),ir=Xt.pow10().recip(),Ue=y.dZero,Nr=-1,K==3&&(er=Xt);else if(Xt.pow10().recip().tetrate(V,1,!0).eq(Xt.pow10().recip())&&!Ve&&Xt.pow10().recip().lt(.4))ge=Xt.pow10().recip(),We=Xt.pow10().recip(),ir=Xt.pow10().recip(),Ue=y.dZero,Nr=0;else if(Xt.pow10().recip().tetrate(V,1,!0).eq(Xt.pow10().recip().mul(2).tetrate(V,1,!0)))ge=Xt.pow10().recip(),We=y.dZero,ir=ge.mul(2),Ue=ge,Ve?Nr=-1:Nr=0;else{for(se=Xt.mul(12e-17),ge=Xt.pow10().recip(),We=Xt.add(se).pow10().recip(),Ue=ge.sub(We),ir=ge.add(Ue);We.tetrate(V,1,!0).eq(ge.tetrate(V,1,!0))||ir.tetrate(V,1,!0).eq(ge.tetrate(V,1,!0))||We.gte(ge)||ir.lte(ge);)se=se.mul(2),We=Xt.add(se).pow10().recip(),Ue=ge.sub(We),ir=ge.add(Ue);if((K==1&&ir.tetrate(V,1,!0).gt(ge.tetrate(V,1,!0))&&We.tetrate(V,1,!0).gt(ge.tetrate(V,1,!0))||K==3&&ir.tetrate(V,1,!0).lt(ge.tetrate(V,1,!0))&&We.tetrate(V,1,!0).lt(ge.tetrate(V,1,!0)))&&(er=Xt),ir.tetrate(V,1,!0).lt(ge.tetrate(V,1,!0)))Nr=-1;else if(Ve)Nr=1;else if(K==3&&Xt.gt_tolerance(nt,1e-8))Nr=0;else{for(;We.tetrate(V,1,!0).eq_tolerance(ge.tetrate(V,1,!0),1e-8)||ir.tetrate(V,1,!0).eq_tolerance(ge.tetrate(V,1,!0),1e-8)||We.gte(ge)||ir.lte(ge);)se=se.mul(2),We=Xt.add(se).pow10().recip(),Ue=ge.sub(We),ir=ge.add(Ue);ir.tetrate(V,1,!0).sub(ge.tetrate(V,1,!0)).lt(ge.tetrate(V,1,!0).sub(We.tetrate(V,1,!0)))?Nr=0:Nr=1}}if(Nr==-1&&(fi=!0),K==1&&Nr==1||K==3&&Nr!=0)if(Ot.eq(y.fromComponents(1,10,1)))Xt=Xt.mul(2);else{let Ai=!1;if(Er&&(Nr==1&&K==1||Nr==-1&&K==3)&&(Ai=!0),Xt=Xt.add(Ot).div(2),Ai)break}else if(Ot.eq(y.fromComponents(1,10,1)))Ot=Xt,Xt=Xt.div(2);else{let Ai=!1;if(Er&&(Nr==1&&K==1||Nr==-1&&K==3)&&(Ai=!0),Ot=Ot.sub(Se),Xt=Xt.sub(Se),Ai)break}if(Ot.sub(Xt).div(2).abs().gt(Se.mul(1.5))&&(Er=!0),Se=Ot.sub(Xt).div(2).abs(),Xt.gt("1e18")||Xt.eq(ur))break}if(Xt.gt("1e18")||!fi||er==y.fromComponents(1,10,1))break;K==1?nt=er:K==3&&(St=er),K++}Ot=nt,Xt=y.fromComponents(1,1,-18);let or=Xt,di=y.dZero,qr=!0;for(;qr;)if(Ot.eq(y.fromComponents(1,10,1))?di=Xt.mul(2):di=Ot.add(Xt).div(2),y.pow(10,di).recip().tetrate(V,1,!0).gt(this)?Xt=di:Ot=di,di.eq(or)?qr=!1:or=di,Xt.gt("1e18"))return y.dNaN;if(di.eq_tolerance(nt,1e-15)){if(St.eq(y.fromComponents(1,10,1)))return y.dNaN;for(Ot=y.fromComponents(1,10,1),Xt=St,or=Xt,di=y.dZero,qr=!0;qr;)if(Ot.eq(y.fromComponents(1,10,1))?di=Xt.mul(2):di=Ot.add(Xt).div(2),y.pow(10,di).recip().tetrate(V,1,!0).gt(this)?Xt=di:Ot=di,di.eq(or)?qr=!1:or=di,Xt.gt("1e18"))return y.dNaN;return di.pow10().recip()}else return di.pow10().recip()}}pentate(V=2,K=y.fromComponents_noNormalize(1,0,1),nt=!1){K=y.fromValue_noAlloc(K);const St=V;V=Math.trunc(V);const Ot=St-V;Ot!==0&&(K.eq(y.dOne)?(++V,K=y.fromNumber(Ot)):this.eq(10)?K=K.layeradd10(Ot,nt):K=K.layeradd(Ot,this,nt));for(let Xt=0;Xt<V;++Xt){if(K=this.tetrate(K.toNumber(),y.dOne,nt),!isFinite(K.layer)||!isFinite(K.mag))return K.normalize();if(Xt>10)return K}return K}sin(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.sin(this.sign*this.mag)):y.fromComponents_noNormalize(0,0,0)}cos(){return this.mag<0?y.dOne:this.layer===0?y.fromNumber(Math.cos(this.sign*this.mag)):y.fromComponents_noNormalize(0,0,0)}tan(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.tan(this.sign*this.mag)):y.fromComponents_noNormalize(0,0,0)}asin(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.asin(this.sign*this.mag)):y.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?y.fromNumber(Math.acos(this.toNumber())):this.layer===0?y.fromNumber(Math.acos(this.sign*this.mag)):y.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?y.fromNumber(Math.atan(this.sign*this.mag)):y.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return y.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return y.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?y.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN):y.ln(this.add(1).div(y.fromNumber(1).sub(this))).div(2)}ascensionPenalty(V){return V===0?this:this.root(y.pow(10,V))}egg(){return this.add(9)}lessThanOrEqualTo(V){return this.cmp(V)<1}lessThan(V){return this.cmp(V)<0}greaterThanOrEqualTo(V){return this.cmp(V)>-1}greaterThan(V){return this.cmp(V)>0}static smoothDamp(V,K,nt,St){return new y(V).add(new y(K).minus(new y(V)).times(new y(nt)).times(new y(St)))}static format(V,K=2,nt=9){return Le(new y(V),K,nt)}clone(){return this}mod(V){const K=y.fromValue_noAlloc(V).abs();if(K.eq(y.dZero))return y.dZero;const nt=this.toNumber(),St=K.toNumber();return isFinite(nt)&&isFinite(St)&&nt!=0&&St!=0?new y(nt%St):this.sub(K).eq(this)?y.dZero:K.sub(this).eq(K)?this:this.sign==-1?this.abs().mod(K).neg():this.sub(this.div(K).floor().mul(K))}modulo(V){return this.mod(V)}modular(V){return this.mod(V)}softcap(V,K,nt){let St=this.clone();return St.gte(V)&&([0,"pow"].includes(nt)&&(St=St.div(V).pow(K).mul(V)),[1,"mul"].includes(nt)&&(St=St.sub(V).div(K).add(V))),St}static softcap(V,K,nt,St){return new y(V).softcap(K,nt,St)}scale(V,K,nt,St=!1){V=new y(V),K=new y(K);let Ot=this.clone();return Ot.gte(V)&&([0,"pow"].includes(nt)&&(Ot=St?Ot.mul(V.pow(K.sub(1))).root(K):Ot.pow(K).div(V.pow(K.sub(1)))),[1,"exp"].includes(nt)&&(Ot=St?Ot.div(V).max(1).log(K).add(V):y.pow(K,Ot.sub(V)).mul(V))),Ot}static scale(V,K,nt,St,Ot=!1){return new y(V).scale(K,nt,St,Ot)}format(V=2,K=9){return Le(this.clone(),V,K)}formatST(V=2,K=9,nt="st"){return Le(this.clone(),V,K,nt)}static formatST(V,K=2,nt=9,St="st"){return Le(new y(V),K,nt,St)}formatGain(V){return Fr(this.clone(),V)}static formatGain(V,K){return Fr(new y(V),K)}toRoman(V){V=V?new y(V):5e3;const K=this.clone();if(K.gte(V))return K;const nt=K.toNumber(),St=String(+nt).split(""),Ot=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let Xt="",se=3;if(typeof St.pop()!="undefined"){for(;se--;)Xt=(Ot[+St.pop()+se*10]||"")+Xt;return Array(+St.join("")+1).join("M")+Xt}else return""}static toRoman(V,K){return new y(V).toRoman(K)}},y.dZero=y.fromComponents_noNormalize(0,0,0),y.dOne=y.fromComponents_noNormalize(1,0,1),y.dNegOne=y.fromComponents_noNormalize(-1,0,1),y.dTwo=y.fromComponents_noNormalize(1,0,2),y.dTen=y.fromComponents_noNormalize(1,0,10),y.dNaN=y.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN),y.dInf=y.fromComponents_noNormalize(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),y.dNegInf=y.fromComponents_noNormalize(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),y.dNumberMax=y.fromComponents(1,0,Number.MAX_VALUE),y.dNumberMin=y.fromComponents(1,0,Number.MIN_VALUE),y.fromStringCache=new j(xt),y),jt=[[["","U","D","T","Qa","Qt","Sx","Sp","Oc","No"],["","Dc","Vg","Tg","Qag","Qtg","Sxg","Spg","Ocg","Nog"],["","Ce","De","Te","Qae","Qte","Sxe","Spe","Oce","Noe"]],[["","Mi","Mc","Na","Pc","Fm","At","Zp","Yc","Xn"],["","Me","Du","Tr","Te","Pe","He","Hp","Ot","En"],["","c","Ic","TCn","TeC","PCn","HCn","HpC","OCn","ECn"],["","Hc","DHe","THt","TeH","PHc","HHe","HpH","OHt","EHc"]]],Kt={omega:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(V){const K=Ct.floor(V.div(1e3)),nt=Ct.floor(K.div(this.config.greek.length));let St=this.config.greek[K.toNumber()%this.config.greek.length]+Oe(V.toNumber()%1e3);(this.config.greek[K.toNumber()%this.config.greek.length]===void 0||K.toNumber()>Number.MAX_SAFE_INTEGER)&&(St="\u03C9");const Xt=Ct.log(V,8e3).toNumber();if(nt.equals(0))return St;if(nt.gt(0)&&nt.lte(3)){const ge=[];for(let Ue=0;Ue<nt.toNumber();Ue++)ge.push("\u03C9");return`${ge.join("^")}^${St}`}else{if(nt.gt(3)&&nt.lt(10))return`\u03C9(${nt.toFixed(0)})^${St}`;if(Xt<3)return`\u03C9(${this.format(nt)})^${St}`;if(Xt<6)return`\u03C9(${this.format(nt)})`}const se=Ct.pow(8e3,Xt%1);return`\u03C9[${Xt<100?Math.floor(Xt).toFixed(0):this.format(Ct.floor(Xt))}](${this.format(se)})`}},omega_short:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(V){const K=Ct.floor(V.div(1e3)),nt=Ct.floor(K.div(this.config.greek.length));let St=this.config.greek[K.toNumber()%this.config.greek.length]+Oe(V.toNumber()%1e3);(this.config.greek[K.toNumber()%this.config.greek.length]===void 0||K.toNumber()>Number.MAX_SAFE_INTEGER)&&(St="\u03C9");const Xt=Ct.log(V,8e3).toNumber();if(nt.equals(0))return St;if(nt.gt(0)&&nt.lte(2)){const ge=[];for(let Ue=0;Ue<nt.toNumber();Ue++)ge.push("\u03C9");return`${ge.join("^")}^${St}`}else if(nt.gt(2)&&nt.lt(10))return`\u03C9(${nt.toFixed(0)})^${St}`;const se=Ct.pow(8e3,Xt%1);return`\u03C9[${Xt<100?Math.floor(Xt).toFixed(0):this.format(Ct.floor(Xt))}](${this.format(se)})`}},elemental:{config:{element_lists:[["H"],["He","Li","Be","B","C","N","O","F"],["Ne","Na","Mg","Al","Si","P","S","Cl"],["Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br"],["Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I"],["Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At"],["Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts"],["Og"]]},getOffset(V){if(V==1)return 1;const K=Math.floor(V/2);let nt=2*K*(K+1)*(2*K+1)/3-2;return V%2==1&&(nt+=2*Math.pow(K+1,2)),nt},getAbbreviation(V,K){const nt=this.abbreviationLength(V),St=Math.floor(nt*K),Ot=St+this.getOffset(V);return Ot>118?this.beyondOg(Ot):this.config.element_lists[V-1][St]},beyondOg(V){const K=Math.floor(Math.log10(V)),nt=["n","u","b","t","q","p","h","s","o","e"];let St="";for(let Ot=K;Ot>=0;Ot--){const Xt=Math.floor(V/Math.pow(10,Ot))%10;St==""?St=nt[Xt].toUpperCase():St+=nt[Xt]}return St},abbreviationLength(V){return V==1?1:Math.pow(Math.floor(V/2)+1,2)*2},getAbbreviationAndValue(V){const K=V.log(118).toNumber(),nt=Math.floor(K)+1,St=this.abbreviationLength(nt),Ot=K-nt+1,Xt=Math.floor(Ot*St),se=this.getAbbreviation(nt,Ot),Se=new Ct(118).pow(nt+Xt/St-1);return[se,Se]},formatElementalPart(V,K){return K.eq(1)?V:`${K} ${V}`},format(V,K){if(V.gt(new Ct(118).pow(new Ct(118).pow(new Ct(118).pow(4)))))return"e"+this.format(V.log10(),K);let nt=V.log(118);const Ot=nt.log(118).log(118).toNumber(),Xt=Math.max(4-Ot*2,1),se=[];for(;nt.gte(1)&&se.length<Xt;){const[ge,Ue]=this.getAbbreviationAndValue(nt),We=nt.div(Ue).floor();nt=nt.sub(We.mul(Ue)),se.unshift([ge,We])}if(se.length>=Xt)return se.map(ge=>this.formatElementalPart(ge[0],ge[1])).join(" + ");const Se=new Ct(118).pow(nt).toFixed(se.length===1?3:K);return se.length===0?Se:se.length===1?`${Se} \xD7 ${this.formatElementalPart(se[0][0],se[0][1])}`:`${Se} \xD7 (${se.map(ge=>this.formatElementalPart(ge[0],ge[1])).join(" + ")})`}},old_sc:{format(V,K){V=new Ct(V);const nt=V.log10().floor();if(nt.lt(9))return nt.lt(3)?V.toFixed(K):V.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(V.gte("eeee10")){const Ot=V.slog();return(Ot.gte(1e9)?"":new Ct(10).pow(Ot.sub(Ot.floor())).toFixed(4))+"F"+this.format(Ot.floor(),0)}const St=V.div(new Ct(10).pow(nt));return(nt.log10().gte(9)?"":St.toFixed(4))+"e"+this.format(nt,0)}}},eng:{format(V,K){V=new Ct(V);const nt=V.log10().floor();if(nt.lt(9))return nt.lt(3)?V.toFixed(K):V.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(V.gte("eeee10")){const Ot=V.slog();return(Ot.gte(1e9)?"":new Ct(10).pow(Ot.sub(Ot.floor())).toFixed(4))+"F"+this.format(Ot.floor(),0)}const St=V.div(new Ct(1e3).pow(nt.div(3).floor()));return(nt.log10().gte(9)?"":St.toFixed(new Ct(4).sub(nt.sub(nt.div(3).floor().mul(3)))))+"e"+this.format(nt.div(3).floor().mul(3),0)}}},mixed_sc:{format(V,K,nt){V=new Ct(V);const St=V.log10().floor();return St.lt(303)&&St.gte(nt)?Le(V,K,nt,"st"):Le(V,K,nt,"sc")}},layer:{layers:["infinity","eternity","reality","equality","affinity","celerity","identity","vitality","immunity","atrocity"],format(V,K,nt){V=new Ct(V);const St=V.max(1).log10().max(1).log(ne.log10()).floor();if(St.lte(0))return Le(V,K,nt,"sc");V=new Ct(10).pow(V.max(1).log10().div(ne.log10().pow(St)).sub(St.gte(1)?1:0));const Ot=St.div(10).floor(),Xt=St.toNumber()%10-1;return Le(V,Math.max(4,K),nt,"sc")+" "+(Ot.gte(1)?"meta"+(Ot.gte(2)?"^"+Le(Ot,0,nt,"sc"):"")+"-":"")+(isNaN(Xt)?"nanity":this.layers[Xt])}},standard:{tier1(V){return jt[0][0][V%10]+jt[0][1][Math.floor(V/10)%10]+jt[0][2][Math.floor(V/100)]},tier2(V){const K=V%10,nt=Math.floor(V/10)%10,St=Math.floor(V/100)%10;let Ot="";return V<10?jt[1][0][V]:(nt==1&&K==0?Ot+="Vec":Ot+=jt[1][1][K]+jt[1][2][nt],Ot+=jt[1][3][St],Ot)}},inf:{format(V,K,nt){V=new Ct(V);let St=0;const Ot=new Ct(Number.MAX_VALUE),Xt=["","\u221E","\u03A9","\u03A8","\u028A"],se=["","","m","mm","mmm"];for(;V.gte(Ot);)V=V.log(Ot),St++;return St==0?Le(V,K,nt,"sc"):V.gte(3)?se[St]+Xt[St]+"\u03C9^"+Le(V.sub(1),K,nt,"sc"):V.gte(2)?se[St]+"\u03C9"+Xt[St]+"-"+Le(Ot.pow(V.sub(2)),K,nt,"sc"):se[St]+Xt[St]+"-"+Le(Ot.pow(V.sub(1)),K,nt,"sc")}}},ne=new Ct(2).pow(1024),me="\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089",ue="\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";function Oe(V){return V.toFixed(0).split("").map(K=>K==="-"?"\u208B":me[parseInt(K,10)]).join("")}function de(V){return V.toFixed(0).split("").map(K=>K==="-"?"\u208B":ue[parseInt(K,10)]).join("")}function oe(V,K=2,nt=9,St="st"){return Le(V,K,nt,St)}function Le(V,K=2,nt=9,St="mixed_sc"){V=new Ct(V);const Ot=V.lt(0)?"-":"";if(V.mag==1/0)return Ot+"Infinity";if(Number.isNaN(V.mag))return Ot+"NaN";if(V.lt(0)&&(V=V.mul(-1)),V.eq(0))return V.toFixed(K);const Xt=V.log10().floor();switch(St){case"sc":if(V.log10().lt(Math.min(-K,0))&&K>1){const se=V.log10().ceil(),Se=V.div(se.eq(-1)?new Ct(.1):new Ct(10).pow(se)),ge=se.mul(-1).max(1).log10().gte(9);return Ot+(ge?"":Se.toFixed(2))+"e"+Le(se,0,nt,"mixed_sc")}else if(Xt.lt(nt)){const se=Math.max(Math.min(K-Xt.toNumber(),K),0);return Ot+(se>0?V.toFixed(se):V.toFixed(se).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}else{if(V.gte("eeee10")){const ge=V.slog();return(ge.gte(1e9)?"":new Ct(10).pow(ge.sub(ge.floor())).toFixed(2))+"F"+Le(ge.floor(),0)}const se=V.div(new Ct(10).pow(Xt)),Se=Xt.log10().gte(9);return Ot+(Se?"":se.toFixed(2))+"e"+Le(Xt,0,nt,"mixed_sc")}case"st":{let se=V.log(1e3).floor();if(se.lt(1))return Ot+V.toFixed(Math.max(Math.min(K-Xt.toNumber(),K),0));{const Se=se.mul(3),ge=se.log10().floor();if(ge.gte(3e3))return"e"+Le(Xt,K,nt,"st");let Ue="";if(se.lt(4))Ue=["","K","M","B"][Math.round(se.toNumber())];else{let ir=Math.floor(se.log(1e3).toNumber());for(ir<100&&(ir=Math.max(ir-1,0)),se=se.sub(1).div(new Ct(10).pow(ir*3));se.gt(0);){const Ve=se.div(1e3).floor(),Nr=se.sub(Ve.mul(1e3)).floor().toNumber();Nr>0&&(Nr==1&&!ir&&(Ue="U"),ir&&(Ue=Kt.standard.tier2(ir)+(Ue?"-"+Ue:"")),Nr>1&&(Ue=Kt.standard.tier1(Nr)+Ue)),se=Ve,ir++}}const We=V.div(new Ct(10).pow(Se));return Ot+(ge.gte(10)?"":We.toFixed(new Ct(2).sub(Xt.sub(Se)).add(1).toNumber())+" ")+Ue}}default:return Ot+Kt[St].format(V,K,nt)}}function Fr(V,K){V=new Ct(V),K=new Ct(K);const nt=V.add(K);let St,Ot=nt.div(V);return Ot.gte(10)&&V.gte(1e100)?(Ot=Ot.log10().mul(20),St="(+"+Le(Ot)+" OoMs/sec)"):St="(+"+Le(K)+"/sec)",St}function kr(V,K=2,nt="s"){return V=new Ct(V),V.gte(86400)?Le(V.div(86400).floor(),0,12,"sc")+":"+kr(V.mod(86400),K,"d"):V.gte(3600)||nt=="d"?(V.div(3600).gte(10)||nt!="d"?"":"0")+Le(V.div(3600).floor(),0,12,"sc")+":"+kr(V.mod(3600),K,"h"):V.gte(60)||nt=="h"?(V.div(60).gte(10)||nt!="h"?"":"0")+Le(V.div(60).floor(),0,12,"sc")+":"+kr(V.mod(60),K,"m"):(V.gte(10)||nt!="m"?"":"0")+Le(V,K,12,"sc")}function ui(V){return V=new Ct(V),Le(new Ct(1).sub(V).mul(100))+"%"}function Ti(V){return V=new Ct(V),Le(V.mul(100))+"%"}function Ei(V,K=2){return V=new Ct(V),V.gte(1)?"\xD7"+V.format(K):"/"+V.pow(-1).format(K)}function Oi(V,K,nt=10){return Ct.gte(V,10)?Ct.pow(nt,Ct.log(V,nt).pow(K)):new Ct(V)}function Fe(V,K){V=new Ct(V);const nt=[{name:"K",altName:"Kilo",value:new Ct("1000")},{name:"M",altName:"Mega",value:new Ct("1e6")},{name:"G",altName:"Giga",value:new Ct("1e9")},{name:"T",altName:"Tera",value:new Ct("1e12")},{name:"P",altName:"Peta",value:new Ct("1e15")},{name:"E",altName:"Exa",value:new Ct("1e18")},{name:"Z",altName:"Zetta",value:new Ct("1e21")},{name:"Y",altName:"Yotta",value:new Ct("1e24")},{name:"R",altName:"Ronna",value:new Ct("1e27")},{name:"Q",altName:"Quetta",value:new Ct("1e30")}];let St;for(let Ot=0;Ot<nt.length;Ot++)if(V.greaterThanOrEqualTo(nt[Ot].value)){if(Ot==nt.length-1)switch(K){case 1:St=nt[Ot].name;break;case 2:St=`${V.divide(nt[Ot].value).format()}`;break;case 3:St=nt[Ot].altName;break;case 0:default:St=`${V.divide(nt[Ot].value).format()} ${nt[Ot].name}`;break}continue}else if(Ot==0)switch(K){case 1:St="";break;case 2:case 0:default:St=V.format();break}else switch(K){case 1:St=nt[Ot-1].name;break;case 2:St=`${V.divide(nt[Ot-1].value).format()}`;break;case 3:St=nt[Ot-1].altName;break;case 0:default:St=`${V.divide(nt[Ot-1].value).format()} ${nt[Ot-1].name}`;break}return St}function Li(V,K=!1){return`${Fe(V,2)} ${Fe(V,1)}eV${K?"/c^2":""}`}var hi=v(v({},Kt),{toSubscript:Oe,toSuperscript:de,formatST:oe,format:Le,formatGain:Fr,formatTime:kr,formatReduction:ui,formatPercent:Ti,formatMult:Ei,expMult:Oi,metric:Fe,ev:Li});Ct.formats=hi;var Xr=Ct,dr=V=>new Xr(V);Object.getOwnPropertyNames(Xr).filter(V=>!Object.getOwnPropertyNames(class{}).includes(V)).forEach(V=>{dr[V]=Xr[V]});var Si=class{constructor(V){var K,nt,St;this.id=V.id,this.name=V.name,this.desc=(K=V.desc)!=null?K:"",this.value=V.value,this.order=(nt=V.order)!=null?nt:99,this.index=(St=V.index)!=null?St:-1}},bi=class{constructor(V,K){this.bGet=this.getBoost,this.bRemove=this.removeBoost,this.bSet=this.setBoost,this.addBoost=this.setBoost,K=K?Array.isArray(K)?K:[K]:void 0,this.baseEffect=dr(V!=null?V:1),this.boostArray=[],K&&K.forEach(nt=>{this.boostArray.push(new Si(nt))})}getBoost(V){let K=null;for(let nt=0;nt<this.boostArray.length;nt++)(V===nt||V==this.boostArray[nt].id)&&(K=this.boostArray[nt],K.index=nt);return K}removeBoost(V){const K=this.bGet(V);K&&delete this.boostArray[K.index]}setBoost(V,K,nt,St,Ot){if(typeof V=="string"){const Xt=V,se=K!=null?K:"",Se=nt!=null?nt:"",ge=St!=null?St:ir=>ir,Ue=Ot,We=this.bGet(Xt);We?this.boostArray[We.index]=new Si({id:Xt,name:se,desc:Se,value:ge,order:Ue,index:this.boostArray.length}):this.boostArray.push(new Si({id:Xt,name:se,desc:Se,value:ge,order:Ue,index:this.boostArray.length}))}else{V=Array.isArray(V)?V:[V];for(let Xt=0;Xt<V.length;Xt++){const se=this.bGet(V[Xt].id);se?this.boostArray[se.index]=new Si(V[Xt]):this.boostArray=this.boostArray.concat(new Si(V[Xt]))}}}bSetArray(V){this.setBoost(V)}bSetAdvanced(...V){this.setBoost(V)}calculate(V=this.baseEffect){let K=dr(V);const nt=this.boostArray;nt.sort((St,Ot)=>St.order-Ot.order);for(let St=0;St<nt.length;St++)K=nt[St].value(K);return K}},ms=class{constructor(V){var K;this.id=(K=V.id)!=null?K:-1,this.level=V.level?dr(V.level):dr(1)}},rs=class{constructor(V,K){const nt=typeof K=="function"?K():K;this.data=nt,this.id=V.id,this.name=V.name,this.costScaling=V.costScaling,this.maxLevel=V.maxLevel,this.effect=V.effect}get level(){return this.data.level}set level(V){this.data.level=dr(V)}},Ar=class{constructor(){this.value=dr(0),this.upgrades=[],this.boost=new bi}},Fi=class{constructor(V=new Ar,K=dr(0),nt=dr(1)){this.defaultVal=dr(K),this.defaultBoost=dr(nt),this.upgrades=[],this.pointer=typeof V=="function"?V():V,this.boost=new bi(nt),this.pointer.value=this.defaultVal}get value(){return this.pointer.value}set value(V){this.pointer.value=V}reset(V=!0,K=!0){V&&(this.value=this.defaultVal),K&&this.upgrades.forEach(nt=>{nt.level=dr(0)})}gain(V=1e3){return this.value=this.value.add(this.boost.calculate().mul(dr(V).div(1e3))),this.value}pointerAddUpgrade(V){const K=new ms(V);return this.pointer.upgrades.push(K),V}getUpgrade(V){let K=null;if(V===void 0)return null;if(typeof V=="number")K=this.upgrades[V];else if(typeof V=="string"){for(let nt=0;nt<this.upgrades.length;nt++)if(this.upgrades[nt].id===V){K=this.upgrades[nt];break}}return K}addUpgrade(V,K=!0){Array.isArray(V)||(V=[V]);const nt=[];for(let St=0;St<V.length;St++){V[St].id||(V[St].id=this.upgrades.length+St),this.pointerAddUpgrade(V[St]);const Ot=new rs(V[St],this.pointer.upgrades[this.pointer.upgrades.length-1]);K&&Ot.effect(Ot.level,Ot),nt.push(Ot)}this.upgrades=this.upgrades.concat(nt)}updateUpgrade(V,K){var nt,St,Ot,Xt;const se=this.getUpgrade(V);se!==null&&(se.name=(nt=K.name)!=null?nt:se.name,se.costScaling=(St=K.costScaling)!=null?St:se.costScaling,se.maxLevel=(Ot=K.maxLevel)!=null?Ot:se.maxLevel,se.effect=(Xt=K.effect)!=null?Xt:se.effect)}calculateUpgrade(V,K,nt=!1){K=dr(K);function St(se,Se){let ge=dr();for(let Ue=dr(0);Ue.lte(Se);Ue=Ue.add(1))ge=ge.add(se(Ue));return ge}function Ot(se,Se,ge=nt){if(ge){let Ue=dr(0),We=K,ir=dr(0);for(;Ue.lessThanOrEqualTo(We);){const Ve=Ue.plus(We).dividedBy(2).floor();se(Ve).lte(Se)?(ir=Ve,Ue=Ve.plus(1)):We=Ve.minus(1)}return[ir,ir.gt(0)?se(ir):dr(0)]}else{let Ue=dr(0),We=dr(1);for(;St(se,We).lt(Se);)We=We.mul(2);for(;Ue.lt(We);){const ir=dr.floor(Ue.add(We).div(2));St(se,ir).lt(Se)?Ue=ir.add(1):We=ir}return[Ue,Ue.gt(0)?St(se,Ue.sub(1)):dr(0)]}}const Xt=this.getUpgrade(V);return Xt===null?[dr(0),dr(0)]:Ot(se=>Xt.costScaling(Xt.level.add(se)),this.value)}buyUpgrade(V,K){const nt=this.getUpgrade(V);if(nt===null)return!1;K=dr(K),K=nt.level.add(K).lte(nt.maxLevel)?K:nt.maxLevel.sub(nt.level);const St=this.calculateUpgrade(V,K);return St[0].lte(0)?!1:(this.value=this.value.sub(St[1]),nt.level=nt.level.add(St[0]),typeof nt.effect=="function"&&nt.effect(nt.level,nt),!0)}},wt=class{constructor(V){this.value=dr(V)}},Mt=class{constructor(V,K=!0,nt=0){this.initial=dr(nt),this.pointer=typeof V=="function"?V():V,this.boost=new bi(this.initial)}get value(){return this.boost&&(this.pointer.value=this.boost.calculate()),this.pointer.value}set value(V){if(this.boost)throw new Error("Cannot set value of attributeStatic when boost is enabled.");this.pointer.value=V}},Xe=class{constructor(V,K,nt){this.x=V,this.y=K,this.properties=nt||{}}setValue(V,K){return this.properties[V]=K,K}getValue(V){return this.properties[V]}},Ke=class{constructor(V,K,nt){this.x_size=V,this.y_size=K,this.cells=[];for(let St=0;St<K;St++){this.cells[St]=[];for(let Ot=0;Ot<V;Ot++)this.cells[St][Ot]=new Xe(Ot,St,nt)}}getAll(){const V=[];for(let K=0;K<this.y_size;K++)for(let nt=0;nt<this.x_size;nt++)V.push(this.cells[K][nt]);return V}all(){return this.getAll()}getAllX(V){const K=[];for(let nt=0;nt<this.y_size;nt++)K.push(this.cells[nt][V]);return K}allX(V){return this.getAllX(V)}getAllY(V){const K=[];for(let nt=0;this.x_size;nt++)K.push(this.cells[V][nt]);return K}allY(V){return this.getAllY(V)}getCell(V,K){return this.cells[K][V]}setCell(V,K,nt){this.cells[K][V]=nt}getAdjacent(V,K){const nt=[];return nt[0]=this.getCell(V,K+1),nt[1]=this.getCell(V+1,K),nt[2]=this.getCell(V,K-1),nt[3]=this.getCell(V-1,K+1),nt}getDiagonal(V,K){const nt=[];return nt[0]=this.getCell(V-1,K+1),nt[1]=this.getCell(V+1,K+1),nt[2]=this.getCell(V+1,K-1),nt[3]=this.getCell(V-1,K-1),nt}getEncircling(V,K){return this.getAdjacent(V,K).concat(this.getDiagonal(V,K))}static getDistance(V,K,nt,St){return Math.abs(Math.sqrt(Math.pow(nt-V,2)+Math.pow(St-K,2)))}},gr={E:dr,classes:{boost:bi,currency:Ar,currencyStatic:Fi,attribute:wt,grid:Ke,gridCell:Xe}};function Ae(){typeof process!="object"&&typeof window!="undefined"&&(window.eMath=gr)}if(Ae(),typeof _.exports=="object"&&typeof T=="object"){var ci=(V,K,nt,St)=>{if(K&&typeof K=="object"||typeof K=="function")for(let Ot of Object.getOwnPropertyNames(K))!Object.prototype.hasOwnProperty.call(V,Ot)&&Ot!==nt&&Object.defineProperty(V,Ot,{get:()=>K[Ot],enumerable:!(St=Object.getOwnPropertyDescriptor(K,Ot))||St.enumerable});return V};_.exports=ci(_.exports,T)}return _.exports})},4309:function(at,I,w){"use strict";var M,b,D,M,O=Object.defineProperty,C=Object.defineProperties,m=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,T=(P,x,B)=>x in P?O(P,x,{enumerable:!0,configurable:!0,writable:!0,value:B}):P[x]=B,_=(P,x)=>{for(var B in x||(x={}))v.call(x,B)&&T(P,B,x[B]);if(p)for(var B of p(x))y.call(x,B)&&T(P,B,x[B]);return P},A=(P,x)=>C(P,m(x));(function(P,x){var B=typeof I=="object";if(!0)D=[w(8101)],b=x,M=typeof b=="function"?b.apply(I,D):b,M!==void 0&&(at.exports=M);else var G,k})(typeof self!="undefined"?self:this,P=>{var x,B,G,k,X,Y={},j={exports:Y},st=Object.create,tt=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,ct=Object.getOwnPropertyNames,pt=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty,Lt=(L,H)=>function(){return H||(0,L[ct(L)[0]])((H={exports:{}}).exports,H),H.exports},ut=(L,H)=>{for(var Z in H)tt(L,Z,{get:H[Z],enumerable:!0})},xt=(L,H,Z,dt)=>{if(H&&typeof H=="object"||typeof H=="function")for(let bt of ct(H))!Rt.call(L,bt)&&bt!==Z&&tt(L,bt,{get:()=>H[bt],enumerable:!(dt=rt(H,bt))||dt.enumerable});return L},At=(L,H,Z)=>(Z=L!=null?st(pt(L)):{},xt(H||!L||!L.__esModule?tt(Z,"default",{value:L,enumerable:!0}):Z,L)),J=L=>xt(tt({},"__esModule",{value:!0}),L),ot=Lt({"node_modules/lz-string/libs/lz-string.js"(L,H){var Z=function(){var dt=String.fromCharCode,bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",Nt={};function Ht($t,Zt){if(!Nt[$t]){Nt[$t]={};for(var zt=0;zt<$t.length;zt++)Nt[$t][$t.charAt(zt)]=zt}return Nt[$t][Zt]}var It={compressToBase64:function($t){if($t==null)return"";var Zt=It._compress($t,6,function(zt){return bt.charAt(zt)});switch(Zt.length%4){default:case 0:return Zt;case 1:return Zt+"===";case 2:return Zt+"==";case 3:return Zt+"="}},decompressFromBase64:function($t){return $t==null?"":$t==""?null:It._decompress($t.length,32,function(Zt){return Ht(bt,$t.charAt(Zt))})},compressToUTF16:function($t){return $t==null?"":It._compress($t,15,function(Zt){return dt(Zt+32)})+" "},decompressFromUTF16:function($t){return $t==null?"":$t==""?null:It._decompress($t.length,16384,function(Zt){return $t.charCodeAt(Zt)-32})},compressToUint8Array:function($t){for(var Zt=It.compress($t),zt=new Uint8Array(Zt.length*2),ee=0,ye=Zt.length;ee<ye;ee++){var Ee=Zt.charCodeAt(ee);zt[ee*2]=Ee>>>8,zt[ee*2+1]=Ee%256}return zt},decompressFromUint8Array:function($t){if($t==null)return It.decompress($t);for(var Zt=new Array($t.length/2),zt=0,ee=Zt.length;zt<ee;zt++)Zt[zt]=$t[zt*2]*256+$t[zt*2+1];var ye=[];return Zt.forEach(function(Ee){ye.push(dt(Ee))}),It.decompress(ye.join(""))},compressToEncodedURIComponent:function($t){return $t==null?"":It._compress($t,6,function(Zt){return Tt.charAt(Zt)})},decompressFromEncodedURIComponent:function($t){return $t==null?"":$t==""?null:($t=$t.replace(/ /g,"+"),It._decompress($t.length,32,function(Zt){return Ht(Tt,$t.charAt(Zt))}))},compress:function($t){return It._compress($t,16,function(Zt){return dt(Zt)})},_compress:function($t,Zt,zt){if($t==null)return"";var ee,ye,Ee={},sr={},Ne="",ar="",Ye="",ze=2,yr=3,ke=2,Ze=[],Ge=0,Pe=0,Gr;for(Gr=0;Gr<$t.length;Gr+=1)if(Ne=$t.charAt(Gr),Object.prototype.hasOwnProperty.call(Ee,Ne)||(Ee[Ne]=yr++,sr[Ne]=!0),ar=Ye+Ne,Object.prototype.hasOwnProperty.call(Ee,ar))Ye=ar;else{if(Object.prototype.hasOwnProperty.call(sr,Ye)){if(Ye.charCodeAt(0)<256){for(ee=0;ee<ke;ee++)Ge=Ge<<1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++;for(ye=Ye.charCodeAt(0),ee=0;ee<8;ee++)Ge=Ge<<1|ye&1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=ye>>1}else{for(ye=1,ee=0;ee<ke;ee++)Ge=Ge<<1|ye,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=0;for(ye=Ye.charCodeAt(0),ee=0;ee<16;ee++)Ge=Ge<<1|ye&1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=ye>>1}ze--,ze==0&&(ze=Math.pow(2,ke),ke++),delete sr[Ye]}else for(ye=Ee[Ye],ee=0;ee<ke;ee++)Ge=Ge<<1|ye&1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=ye>>1;ze--,ze==0&&(ze=Math.pow(2,ke),ke++),Ee[ar]=yr++,Ye=String(Ne)}if(Ye!==""){if(Object.prototype.hasOwnProperty.call(sr,Ye)){if(Ye.charCodeAt(0)<256){for(ee=0;ee<ke;ee++)Ge=Ge<<1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++;for(ye=Ye.charCodeAt(0),ee=0;ee<8;ee++)Ge=Ge<<1|ye&1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=ye>>1}else{for(ye=1,ee=0;ee<ke;ee++)Ge=Ge<<1|ye,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=0;for(ye=Ye.charCodeAt(0),ee=0;ee<16;ee++)Ge=Ge<<1|ye&1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=ye>>1}ze--,ze==0&&(ze=Math.pow(2,ke),ke++),delete sr[Ye]}else for(ye=Ee[Ye],ee=0;ee<ke;ee++)Ge=Ge<<1|ye&1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=ye>>1;ze--,ze==0&&(ze=Math.pow(2,ke),ke++)}for(ye=2,ee=0;ee<ke;ee++)Ge=Ge<<1|ye&1,Pe==Zt-1?(Pe=0,Ze.push(zt(Ge)),Ge=0):Pe++,ye=ye>>1;for(;;)if(Ge=Ge<<1,Pe==Zt-1){Ze.push(zt(Ge));break}else Pe++;return Ze.join("")},decompress:function($t){return $t==null?"":$t==""?null:It._decompress($t.length,32768,function(Zt){return $t.charCodeAt(Zt)})},_decompress:function($t,Zt,zt){var ee=[],ye,Ee=4,sr=4,Ne=3,ar="",Ye=[],ze,yr,ke,Ze,Ge,Pe,Gr,Tr={val:zt(0),position:Zt,index:1};for(ze=0;ze<3;ze+=1)ee[ze]=ze;for(ke=0,Ge=Math.pow(2,2),Pe=1;Pe!=Ge;)Ze=Tr.val&Tr.position,Tr.position>>=1,Tr.position==0&&(Tr.position=Zt,Tr.val=zt(Tr.index++)),ke|=(Ze>0?1:0)*Pe,Pe<<=1;switch(ye=ke){case 0:for(ke=0,Ge=Math.pow(2,8),Pe=1;Pe!=Ge;)Ze=Tr.val&Tr.position,Tr.position>>=1,Tr.position==0&&(Tr.position=Zt,Tr.val=zt(Tr.index++)),ke|=(Ze>0?1:0)*Pe,Pe<<=1;Gr=dt(ke);break;case 1:for(ke=0,Ge=Math.pow(2,16),Pe=1;Pe!=Ge;)Ze=Tr.val&Tr.position,Tr.position>>=1,Tr.position==0&&(Tr.position=Zt,Tr.val=zt(Tr.index++)),ke|=(Ze>0?1:0)*Pe,Pe<<=1;Gr=dt(ke);break;case 2:return""}for(ee[3]=Gr,yr=Gr,Ye.push(Gr);;){if(Tr.index>$t)return"";for(ke=0,Ge=Math.pow(2,Ne),Pe=1;Pe!=Ge;)Ze=Tr.val&Tr.position,Tr.position>>=1,Tr.position==0&&(Tr.position=Zt,Tr.val=zt(Tr.index++)),ke|=(Ze>0?1:0)*Pe,Pe<<=1;switch(Gr=ke){case 0:for(ke=0,Ge=Math.pow(2,8),Pe=1;Pe!=Ge;)Ze=Tr.val&Tr.position,Tr.position>>=1,Tr.position==0&&(Tr.position=Zt,Tr.val=zt(Tr.index++)),ke|=(Ze>0?1:0)*Pe,Pe<<=1;ee[sr++]=dt(ke),Gr=sr-1,Ee--;break;case 1:for(ke=0,Ge=Math.pow(2,16),Pe=1;Pe!=Ge;)Ze=Tr.val&Tr.position,Tr.position>>=1,Tr.position==0&&(Tr.position=Zt,Tr.val=zt(Tr.index++)),ke|=(Ze>0?1:0)*Pe,Pe<<=1;ee[sr++]=dt(ke),Gr=sr-1,Ee--;break;case 2:return Ye.join("")}if(Ee==0&&(Ee=Math.pow(2,Ne),Ne++),ee[Gr])ar=ee[Gr];else if(Gr===sr)ar=yr+yr.charAt(0);else return null;Ye.push(ar),ee[sr++]=yr+ar.charAt(0),Ee--,yr=ar,Ee==0&&(Ee=Math.pow(2,Ne),Ne++)}}};return It}();M=function(){return Z}.call(I,w,I,at),M!==void 0&&(at.exports=M)}}),q=Lt({"node_modules/reflect-metadata/Reflect.js"(){var L;(function(H){(function(Z){var dt=typeof globalThis=="object"?globalThis:typeof w.g=="object"?w.g:typeof self=="object"?self:typeof this=="object"?this:It(),bt=Tt(H);typeof dt.Reflect!="undefined"&&(bt=Tt(dt.Reflect,bt)),Z(bt,dt),typeof dt.Reflect=="undefined"&&(dt.Reflect=H);function Tt($t,Zt){return function(zt,ee){Object.defineProperty($t,zt,{configurable:!0,writable:!0,value:ee}),Zt&&Zt(zt,ee)}}function Nt(){try{return Function("return this;")()}catch($t){}}function Ht(){try{return(0,eval)("(function() { return this; })()")}catch($t){}}function It(){return Nt()||Ht()}})(function(Z,dt){var bt=Object.prototype.hasOwnProperty,Tt=typeof Symbol=="function",Nt=Tt&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",Ht=Tt&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",It=typeof Object.create=="function",$t={__proto__:[]}instanceof Array,Zt=!It&&!$t,zt={create:It?function(){return Da(Object.create(null))}:$t?function(){return Da({__proto__:null})}:function(){return Da({})},has:Zt?function(qt,ae){return bt.call(qt,ae)}:function(qt,ae){return ae in qt},get:Zt?function(qt,ae){return bt.call(qt,ae)?qt[ae]:void 0}:function(qt,ae){return qt[ae]}},ee=Object.getPrototypeOf(Function),ye=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:xo(),Ee=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Na(),sr=typeof WeakMap=="function"?WeakMap:eh(),Ne=Tt?Symbol.for("@reflect-metadata:registry"):void 0,ar=_o(),Ye=th(ar);function ze(qt,ae,fe,Ie){if(Pr(fe)){if(!Rr(qt))throw new TypeError;if(!to(ae))throw new TypeError;return Qn(qt,ae)}else{if(!Rr(qt))throw new TypeError;if(!ri(ae))throw new TypeError;if(!ri(Ie)&&!Pr(Ie)&&!Ki(Ie))throw new TypeError;return Ki(Ie)&&(Ie=void 0),fe=ss(fe),Cr(qt,ae,fe,Ie)}}Z("decorate",ze);function yr(qt,ae){function fe(Ie,vr){if(!ri(Ie))throw new TypeError;if(!Pr(vr)&&!Ni(vr))throw new TypeError;Jn(qt,ae,Ie,vr)}return fe}Z("metadata",yr);function ke(qt,ae,fe,Ie){if(!ri(fe))throw new TypeError;return Pr(Ie)||(Ie=ss(Ie)),Jn(qt,ae,fe,Ie)}Z("defineMetadata",ke);function Ze(qt,ae,fe){if(!ri(ae))throw new TypeError;return Pr(fe)||(fe=ss(fe)),xs(qt,ae,fe)}Z("hasMetadata",Ze);function Ge(qt,ae,fe){if(!ri(ae))throw new TypeError;return Pr(fe)||(fe=ss(fe)),ei(qt,ae,fe)}Z("hasOwnMetadata",Ge);function Pe(qt,ae,fe){if(!ri(ae))throw new TypeError;return Pr(fe)||(fe=ss(fe)),$r(qt,ae,fe)}Z("getMetadata",Pe);function Gr(qt,ae,fe){if(!ri(ae))throw new TypeError;return Pr(fe)||(fe=ss(fe)),qs(qt,ae,fe)}Z("getOwnMetadata",Gr);function Tr(qt,ae){if(!ri(qt))throw new TypeError;return Pr(ae)||(ae=ss(ae)),Nn(qt,ae)}Z("getMetadataKeys",Tr);function gn(qt,ae){if(!ri(qt))throw new TypeError;return Pr(ae)||(ae=ss(ae)),qn(qt,ae)}Z("getOwnMetadataKeys",gn);function yn(qt,ae,fe){if(!ri(ae))throw new TypeError;if(Pr(fe)||(fe=ss(fe)),!ri(ae))throw new TypeError;Pr(fe)||(fe=ss(fe));var Ie=ns(ae,fe,!1);return Pr(Ie)?!1:Ie.OrdinaryDeleteMetadata(qt,ae,fe)}Z("deleteMetadata",yn);function Qn(qt,ae){for(var fe=qt.length-1;fe>=0;--fe){var Ie=qt[fe],vr=Ie(ae);if(!Pr(vr)&&!Ki(vr)){if(!to(vr))throw new TypeError;ae=vr}}return ae}function Cr(qt,ae,fe,Ie){for(var vr=qt.length-1;vr>=0;--vr){var ii=qt[vr],Di=ii(ae,fe,Ie);if(!Pr(Di)&&!Ki(Di)){if(!ri(Di))throw new TypeError;Ie=Di}}return Ie}function xs(qt,ae,fe){var Ie=ei(qt,ae,fe);if(Ie)return!0;var vr=tn(ae);return Ki(vr)?!1:xs(qt,vr,fe)}function ei(qt,ae,fe){var Ie=ns(ae,fe,!1);return Pr(Ie)?!1:Pi(Ie.OrdinaryHasOwnMetadata(qt,ae,fe))}function $r(qt,ae,fe){var Ie=ei(qt,ae,fe);if(Ie)return qs(qt,ae,fe);var vr=tn(ae);if(!Ki(vr))return $r(qt,vr,fe)}function qs(qt,ae,fe){var Ie=ns(ae,fe,!1);if(!Pr(Ie))return Ie.OrdinaryGetOwnMetadata(qt,ae,fe)}function Jn(qt,ae,fe,Ie){var vr=ns(fe,Ie,!0);vr.OrdinaryDefineOwnMetadata(qt,ae,fe,Ie)}function Nn(qt,ae){var fe=qn(qt,ae),Ie=tn(qt);if(Ie===null)return fe;var vr=Nn(Ie,ae);if(vr.length<=0)return fe;if(fe.length<=0)return vr;for(var ii=new Ee,Di=[],Dr=0,je=fe;Dr<je.length;Dr++){var nr=je[Dr],Qe=ii.has(nr);Qe||(ii.add(nr),Di.push(nr))}for(var Je=0,Vr=vr;Je<Vr.length;Je++){var nr=Vr[Je],Qe=ii.has(nr);Qe||(ii.add(nr),Di.push(nr))}return Di}function qn(qt,ae){var fe=ns(qt,ae,!1);return fe?fe.OrdinaryOwnMetadataKeys(qt,ae):[]}function Ll(qt){if(qt===null)return 1;switch(typeof qt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return qt===null?1:6;default:return 6}}function Pr(qt){return qt===void 0}function Ki(qt){return qt===null}function yo(qt){return typeof qt=="symbol"}function ri(qt){return typeof qt=="object"?qt!==null:typeof qt=="function"}function kl(qt,ae){switch(Ll(qt)){case 0:return qt;case 1:return qt;case 2:return qt;case 3:return qt;case 4:return qt;case 5:return qt}var fe=ae===3?"string":ae===5?"number":"default",Ie=Qr(qt,Nt);if(Ie!==void 0){var vr=Ie.call(qt,fe);if(ri(vr))throw new TypeError;return vr}return Ts(qt,fe==="default"?"number":fe)}function Ts(qt,ae){if(ae==="string"){var fe=qt.toString;if(Es(fe)){var Ie=fe.call(qt);if(!ri(Ie))return Ie}var vr=qt.valueOf;if(Es(vr)){var Ie=vr.call(qt);if(!ri(Ie))return Ie}}else{var vr=qt.valueOf;if(Es(vr)){var Ie=vr.call(qt);if(!ri(Ie))return Ie}var ii=qt.toString;if(Es(ii)){var Ie=ii.call(qt);if(!ri(Ie))return Ie}}throw new TypeError}function Pi(qt){return!!qt}function Mr(qt){return""+qt}function ss(qt){var ae=kl(qt,3);return yo(ae)?ae:Mr(ae)}function Rr(qt){return Array.isArray?Array.isArray(qt):qt instanceof Object?qt instanceof Array:Object.prototype.toString.call(qt)==="[object Array]"}function Es(qt){return typeof qt=="function"}function to(qt){return typeof qt=="function"}function Ni(qt){switch(Ll(qt)){case 3:return!0;case 4:return!0;default:return!1}}function Fs(qt,ae){return qt===ae||qt!==qt&&ae!==ae}function Qr(qt,ae){var fe=qt[ae];if(fe!=null){if(!Es(fe))throw new TypeError;return fe}}function Ss(qt){var ae=Qr(qt,Ht);if(!Es(ae))throw new TypeError;var fe=ae.call(qt);if(!ri(fe))throw new TypeError;return fe}function vn(qt){return qt.value}function zs(qt){var ae=qt.next();return ae.done?!1:ae}function Hs(qt){var ae=qt.return;ae&&ae.call(qt)}function tn(qt){var ae=Object.getPrototypeOf(qt);if(typeof qt!="function"||qt===ee||ae!==ee)return ae;var fe=qt.prototype,Ie=fe&&Object.getPrototypeOf(fe);if(Ie==null||Ie===Object.prototype)return ae;var vr=Ie.constructor;return typeof vr!="function"||vr===qt?ae:vr}function vo(){var qt;!Pr(Ne)&&typeof dt.Reflect!="undefined"&&!(Ne in dt.Reflect)&&typeof dt.Reflect.defineMetadata=="function"&&(qt=yi(dt.Reflect));var ae,fe,Ie,vr=new sr,ii={registerProvider:Di,getProvider:je,setProvider:Qe};return ii;function Di(Je){if(!Object.isExtensible(ii))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case qt===Je:break;case Pr(ae):ae=Je;break;case ae===Je:break;case Pr(fe):fe=Je;break;case fe===Je:break;default:Ie===void 0&&(Ie=new Ee),Ie.add(Je);break}}function Dr(Je,Vr){if(!Pr(ae)){if(ae.isProviderFor(Je,Vr))return ae;if(!Pr(fe)){if(fe.isProviderFor(Je,Vr))return ae;if(!Pr(Ie))for(var si=Ss(Ie);;){var vi=zs(si);if(!vi)return;var Ns=vn(vi);if(Ns.isProviderFor(Je,Vr))return Hs(si),Ns}}}if(!Pr(qt)&&qt.isProviderFor(Je,Vr))return qt}function je(Je,Vr){var si=vr.get(Je),vi;return Pr(si)||(vi=si.get(Vr)),Pr(vi)&&(vi=Dr(Je,Vr),Pr(vi)||(Pr(si)&&(si=new ye,vr.set(Je,si)),si.set(Vr,vi))),vi}function nr(Je){if(Pr(Je))throw new TypeError;return ae===Je||fe===Je||!Pr(Ie)&&Ie.has(Je)}function Qe(Je,Vr,si){if(!nr(si))throw new Error("Metadata provider not registered.");var vi=je(Je,Vr);if(vi!==si){if(!Pr(vi))return!1;var Ns=vr.get(Je);Pr(Ns)&&(Ns=new ye,vr.set(Je,Ns)),Ns.set(Vr,si)}return!0}}function _o(){var qt;return!Pr(Ne)&&ri(dt.Reflect)&&Object.isExtensible(dt.Reflect)&&(qt=dt.Reflect[Ne]),Pr(qt)&&(qt=vo()),!Pr(Ne)&&ri(dt.Reflect)&&Object.isExtensible(dt.Reflect)&&Object.defineProperty(dt.Reflect,Ne,{enumerable:!1,configurable:!1,writable:!1,value:qt}),qt}function th(qt){var ae=new sr,fe={isProviderFor:function(nr,Qe){var Je=ae.get(nr);return Pr(Je)?!1:Je.has(Qe)},OrdinaryDefineOwnMetadata:Di,OrdinaryHasOwnMetadata:vr,OrdinaryGetOwnMetadata:ii,OrdinaryOwnMetadataKeys:Dr,OrdinaryDeleteMetadata:je};return ar.registerProvider(fe),fe;function Ie(nr,Qe,Je){var Vr=ae.get(nr),si=!1;if(Pr(Vr)){if(!Je)return;Vr=new ye,ae.set(nr,Vr),si=!0}var vi=Vr.get(Qe);if(Pr(vi)){if(!Je)return;if(vi=new ye,Vr.set(Qe,vi),!qt.setProvider(nr,Qe,fe))throw Vr.delete(Qe),si&&ae.delete(nr),new Error("Wrong provider for target.")}return vi}function vr(nr,Qe,Je){var Vr=Ie(Qe,Je,!1);return Pr(Vr)?!1:Pi(Vr.has(nr))}function ii(nr,Qe,Je){var Vr=Ie(Qe,Je,!1);if(!Pr(Vr))return Vr.get(nr)}function Di(nr,Qe,Je,Vr){var si=Ie(Je,Vr,!0);si.set(nr,Qe)}function Dr(nr,Qe){var Je=[],Vr=Ie(nr,Qe,!1);if(Pr(Vr))return Je;for(var si=Vr.keys(),vi=Ss(si),Ns=0;;){var To=zs(vi);if(!To)return Je.length=Ns,Je;var Ba=vn(To);try{Je[Ns]=Ba}catch(en){try{Hs(vi)}finally{throw en}}Ns++}}function je(nr,Qe,Je){var Vr=Ie(Qe,Je,!1);if(Pr(Vr)||!Vr.delete(nr))return!1;if(Vr.size===0){var si=ae.get(Qe);Pr(si)||(si.delete(Je),si.size===0&&ae.delete(si))}return!0}}function yi(qt){var ae=qt.defineMetadata,fe=qt.hasOwnMetadata,Ie=qt.getOwnMetadata,vr=qt.getOwnMetadataKeys,ii=qt.deleteMetadata,Di=new sr,Dr={isProviderFor:function(je,nr){var Qe=Di.get(je);return Pr(Qe)?vr(je,nr).length?(Pr(Qe)&&(Qe=new Ee,Di.set(je,Qe)),Qe.add(nr),!0):!1:Qe.has(nr)},OrdinaryDefineOwnMetadata:ae,OrdinaryHasOwnMetadata:fe,OrdinaryGetOwnMetadata:Ie,OrdinaryOwnMetadataKeys:vr,OrdinaryDeleteMetadata:ii};return Dr}function ns(qt,ae,fe){var Ie=ar.getProvider(qt,ae);if(!Pr(Ie))return Ie;if(fe){if(ar.setProvider(qt,ae,Ye))return Ye;throw new Error("Illegal state.")}}function xo(){var qt={},ae=[],fe=function(){function Dr(je,nr,Qe){this._index=0,this._keys=je,this._values=nr,this._selector=Qe}return Dr.prototype["@@iterator"]=function(){return this},Dr.prototype[Ht]=function(){return this},Dr.prototype.next=function(){var je=this._index;if(je>=0&&je<this._keys.length){var nr=this._selector(this._keys[je],this._values[je]);return je+1>=this._keys.length?(this._index=-1,this._keys=ae,this._values=ae):this._index++,{value:nr,done:!1}}return{value:void 0,done:!0}},Dr.prototype.throw=function(je){throw this._index>=0&&(this._index=-1,this._keys=ae,this._values=ae),je},Dr.prototype.return=function(je){return this._index>=0&&(this._index=-1,this._keys=ae,this._values=ae),{value:je,done:!0}},Dr}(),Ie=function(){function Dr(){this._keys=[],this._values=[],this._cacheKey=qt,this._cacheIndex=-2}return Object.defineProperty(Dr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Dr.prototype.has=function(je){return this._find(je,!1)>=0},Dr.prototype.get=function(je){var nr=this._find(je,!1);return nr>=0?this._values[nr]:void 0},Dr.prototype.set=function(je,nr){var Qe=this._find(je,!0);return this._values[Qe]=nr,this},Dr.prototype.delete=function(je){var nr=this._find(je,!1);if(nr>=0){for(var Qe=this._keys.length,Je=nr+1;Je<Qe;Je++)this._keys[Je-1]=this._keys[Je],this._values[Je-1]=this._values[Je];return this._keys.length--,this._values.length--,Fs(je,this._cacheKey)&&(this._cacheKey=qt,this._cacheIndex=-2),!0}return!1},Dr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=qt,this._cacheIndex=-2},Dr.prototype.keys=function(){return new fe(this._keys,this._values,vr)},Dr.prototype.values=function(){return new fe(this._keys,this._values,ii)},Dr.prototype.entries=function(){return new fe(this._keys,this._values,Di)},Dr.prototype["@@iterator"]=function(){return this.entries()},Dr.prototype[Ht]=function(){return this.entries()},Dr.prototype._find=function(je,nr){if(!Fs(this._cacheKey,je)){this._cacheIndex=-1;for(var Qe=0;Qe<this._keys.length;Qe++)if(Fs(this._keys[Qe],je)){this._cacheIndex=Qe;break}}return this._cacheIndex<0&&nr&&(this._cacheIndex=this._keys.length,this._keys.push(je),this._values.push(void 0)),this._cacheIndex},Dr}();return Ie;function vr(Dr,je){return Dr}function ii(Dr,je){return je}function Di(Dr,je){return[Dr,je]}}function Na(){var qt=function(){function ae(){this._map=new ye}return Object.defineProperty(ae.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ae.prototype.has=function(fe){return this._map.has(fe)},ae.prototype.add=function(fe){return this._map.set(fe,fe),this},ae.prototype.delete=function(fe){return this._map.delete(fe)},ae.prototype.clear=function(){this._map.clear()},ae.prototype.keys=function(){return this._map.keys()},ae.prototype.values=function(){return this._map.keys()},ae.prototype.entries=function(){return this._map.entries()},ae.prototype["@@iterator"]=function(){return this.keys()},ae.prototype[Ht]=function(){return this.keys()},ae}();return qt}function eh(){var qt=16,ae=zt.create(),fe=Ie();return function(){function je(){this._key=Ie()}return je.prototype.has=function(nr){var Qe=vr(nr,!1);return Qe!==void 0?zt.has(Qe,this._key):!1},je.prototype.get=function(nr){var Qe=vr(nr,!1);return Qe!==void 0?zt.get(Qe,this._key):void 0},je.prototype.set=function(nr,Qe){var Je=vr(nr,!0);return Je[this._key]=Qe,this},je.prototype.delete=function(nr){var Qe=vr(nr,!1);return Qe!==void 0?delete Qe[this._key]:!1},je.prototype.clear=function(){this._key=Ie()},je}();function Ie(){var je;do je="@@WeakMap@@"+Dr();while(zt.has(ae,je));return ae[je]=!0,je}function vr(je,nr){if(!bt.call(je,fe)){if(!nr)return;Object.defineProperty(je,fe,{value:zt.create()})}return je[fe]}function ii(je,nr){for(var Qe=0;Qe<nr;++Qe)je[Qe]=Math.random()*255|0;return je}function Di(je){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(je)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(je)):ii(new Uint8Array(je),je):ii(new Array(je),je)}function Dr(){var je=Di(qt);je[6]=je[6]&79|64,je[8]=je[8]&191|128;for(var nr="",Qe=0;Qe<qt;++Qe){var Je=je[Qe];(Qe===4||Qe===6||Qe===8)&&(nr+="-"),Je<16&&(nr+="0"),nr+=Je.toString(16).toLowerCase()}return nr}}function Da(qt){return qt.__=void 0,delete qt.__,qt}})})(L||(L={}))}}),gt={};ut(gt,{pixiGame:()=>Dc,sprite:()=>Yi}),j.exports=J(gt);function yt(){if(typeof process!="object"&&typeof window!="undefined"&&typeof process!="undefined"){console.error(`eMath.js/pixiGame is not supported in browser environments. 
 This requirement might be removed in the future.`);return}}var et=class{constructor(L){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=L}get size(){return this.map.size}get(L){const H=this.map.get(L);if(H!==void 0)return H!==this.first&&(H===this.last?(this.last=H.prev,this.last.next=void 0):(H.prev.next=H.next,H.next.prev=H.prev),H.next=this.first,this.first.prev=H,this.first=H),H.value}set(L,H){if(this.maxSize<1)return;if(this.map.has(L))throw new Error("Cannot update existing keys in the cache");const Z=new ht(L,H);for(this.first===void 0?(this.first=Z,this.last=Z):(Z.next=this.first,this.first.prev=Z,this.first=Z),this.map.set(L,Z);this.map.size>this.maxSize;){const dt=this.last;this.map.delete(dt.key),this.last=dt.prev,this.last.next=void 0}}},ht=class{constructor(L,H){this.next=void 0,this.prev=void 0,this.key=L,this.value=H}},Et=17,kt=9e15,Ft=Math.log10(9e15),Bt=1/9e15,Gt=308,Ct=-324,jt=5,Kt=1024-1,ne=!0,me=!1,ue=function(){const L=[];for(let Z=Ct+1;Z<=Gt;Z++)L.push(+("1e"+Z));const H=323;return function(Z){return L[Z+H]}}(),Oe=[2,Math.E,3,4,5,6,7,8,9,10],de=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],oe=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],Le=function(H,Z){const dt=Z+1,bt=Math.ceil(Math.log10(Math.abs(H))),Tt=Math.round(H*Math.pow(10,dt-bt))*Math.pow(10,bt-dt);return parseFloat(Tt.toFixed(Math.max(dt-bt,0)))},Fr=function(L){return Math.sign(L)*Math.log10(Math.abs(L))},kr=function(L){if(!isFinite(L))return L;if(L<-50)return L===Math.trunc(L)?Number.NEGATIVE_INFINITY:0;let H=1;for(;L<10;)H=H*L,++L;L-=1;let Z=.9189385332046727;Z=Z+(L+.5)*Math.log(L),Z=Z-L;const dt=L*L;let bt=L;return Z=Z+1/(12*bt),bt=bt*dt,Z=Z+1/(360*bt),bt=bt*dt,Z=Z+1/(1260*bt),bt=bt*dt,Z=Z+1/(1680*bt),bt=bt*dt,Z=Z+1/(1188*bt),bt=bt*dt,Z=Z+691/(360360*bt),bt=bt*dt,Z=Z+7/(1092*bt),bt=bt*dt,Z=Z+3617/(122400*bt),Math.exp(Z)/H},ui=.36787944117144233,Ti=.5671432904097838,Ei=function(L,H=1e-10){let Z,dt;if(!Number.isFinite(L)||L===0)return L;if(L===1)return Ti;L<10?Z=0:Z=Math.log(L)-Math.log(Math.log(L));for(let bt=0;bt<100;++bt){if(dt=(L*Math.exp(-Z)+Z*Z)/(Z+1),Math.abs(dt-Z)<H*Math.abs(dt))return dt;Z=dt}throw Error(`Iteration failed to converge: ${L.toString()}`)};function Oi(L,H=1e-10){let Z,dt,bt,Tt;if(!Number.isFinite(L.mag)||L.eq(Fe.dZero))return L;if(L.eq(Fe.dOne))return Fe.fromNumber(Ti);Z=Fe.ln(L);for(let Nt=0;Nt<100;++Nt){if(dt=Z.neg().exp(),bt=Z.sub(L.mul(dt)),Tt=Z.sub(bt.div(Z.add(1).sub(Z.add(2).mul(bt).div(Fe.mul(2,Z).add(2))))),Fe.abs(Tt.sub(Z)).lt(Fe.abs(Tt).mul(H)))return Tt;Z=Tt}throw Error(`Iteration failed to converge: ${L.toString()}`)}var Fe=(x=class{constructor(L){this.sign=0,this.mag=0,this.layer=0,L instanceof x?this.fromDecimal(L):typeof L=="number"?this.fromNumber(L):typeof L=="string"&&this.fromString(L)}get m(){if(this.sign===0)return 0;if(this.layer===0){const L=Math.floor(Math.log10(this.mag));let H;return this.mag===5e-324?H=5:H=this.mag/ue(L),this.sign*H}else if(this.layer===1){const L=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,L)}else return this.sign}set m(L){this.layer<=2?this.fromMantissaExponent(L,this.e):(this.sign=Math.sign(L),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(L){this.fromMantissaExponent(this.m,L)}get s(){return this.sign}set s(L){L===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=L}get mantissa(){return this.m}set mantissa(L){this.m=L}get exponent(){return this.e}set exponent(L){this.e=L}static fromComponents(L,H,Z){return new x().fromComponents(L,H,Z)}static fromComponents_noNormalize(L,H,Z){return new x().fromComponents_noNormalize(L,H,Z)}static fromMantissaExponent(L,H){return new x().fromMantissaExponent(L,H)}static fromMantissaExponent_noNormalize(L,H){return new x().fromMantissaExponent_noNormalize(L,H)}static fromDecimal(L){return new x().fromDecimal(L)}static fromNumber(L){return new x().fromNumber(L)}static fromString(L){return new x().fromString(L)}static fromValue(L){return new x().fromValue(L)}static fromValue_noAlloc(L){if(L instanceof x)return L;if(typeof L=="string"){const H=x.fromStringCache.get(L);return H!==void 0?H:x.fromString(L)}else return typeof L=="number"?x.fromNumber(L):x.dZero}static abs(L){return x.fromValue_noAlloc(L).abs()}static neg(L){return x.fromValue_noAlloc(L).neg()}static negate(L){return x.fromValue_noAlloc(L).neg()}static negated(L){return x.fromValue_noAlloc(L).neg()}static sign(L){return x.fromValue_noAlloc(L).sign}static sgn(L){return x.fromValue_noAlloc(L).sign}static round(L){return x.fromValue_noAlloc(L).round()}static floor(L){return x.fromValue_noAlloc(L).floor()}static ceil(L){return x.fromValue_noAlloc(L).ceil()}static trunc(L){return x.fromValue_noAlloc(L).trunc()}static add(L,H){return x.fromValue_noAlloc(L).add(H)}static plus(L,H){return x.fromValue_noAlloc(L).add(H)}static sub(L,H){return x.fromValue_noAlloc(L).sub(H)}static subtract(L,H){return x.fromValue_noAlloc(L).sub(H)}static minus(L,H){return x.fromValue_noAlloc(L).sub(H)}static mul(L,H){return x.fromValue_noAlloc(L).mul(H)}static multiply(L,H){return x.fromValue_noAlloc(L).mul(H)}static times(L,H){return x.fromValue_noAlloc(L).mul(H)}static div(L,H){return x.fromValue_noAlloc(L).div(H)}static divide(L,H){return x.fromValue_noAlloc(L).div(H)}static recip(L){return x.fromValue_noAlloc(L).recip()}static reciprocal(L){return x.fromValue_noAlloc(L).recip()}static reciprocate(L){return x.fromValue_noAlloc(L).reciprocate()}static mod(L,H){return x.fromValue_noAlloc(L).mod(H)}static modulo(L,H){return x.fromValue_noAlloc(L).modulo(H)}static modular(L,H){return x.fromValue_noAlloc(L).modular(H)}static cmp(L,H){return x.fromValue_noAlloc(L).cmp(H)}static cmpabs(L,H){return x.fromValue_noAlloc(L).cmpabs(H)}static compare(L,H){return x.fromValue_noAlloc(L).cmp(H)}static isNaN(L){return L=x.fromValue_noAlloc(L),isNaN(L.sign)||isNaN(L.layer)||isNaN(L.mag)}static isFinite(L){return L=x.fromValue_noAlloc(L),isFinite(L.sign)&&isFinite(L.layer)&&isFinite(L.mag)}static eq(L,H){return x.fromValue_noAlloc(L).eq(H)}static equals(L,H){return x.fromValue_noAlloc(L).eq(H)}static neq(L,H){return x.fromValue_noAlloc(L).neq(H)}static notEquals(L,H){return x.fromValue_noAlloc(L).notEquals(H)}static lt(L,H){return x.fromValue_noAlloc(L).lt(H)}static lte(L,H){return x.fromValue_noAlloc(L).lte(H)}static gt(L,H){return x.fromValue_noAlloc(L).gt(H)}static gte(L,H){return x.fromValue_noAlloc(L).gte(H)}static max(L,H){return x.fromValue_noAlloc(L).max(H)}static min(L,H){return x.fromValue_noAlloc(L).min(H)}static minabs(L,H){return x.fromValue_noAlloc(L).minabs(H)}static maxabs(L,H){return x.fromValue_noAlloc(L).maxabs(H)}static clamp(L,H,Z){return x.fromValue_noAlloc(L).clamp(H,Z)}static clampMin(L,H){return x.fromValue_noAlloc(L).clampMin(H)}static clampMax(L,H){return x.fromValue_noAlloc(L).clampMax(H)}static cmp_tolerance(L,H,Z){return x.fromValue_noAlloc(L).cmp_tolerance(H,Z)}static compare_tolerance(L,H,Z){return x.fromValue_noAlloc(L).cmp_tolerance(H,Z)}static eq_tolerance(L,H,Z){return x.fromValue_noAlloc(L).eq_tolerance(H,Z)}static equals_tolerance(L,H,Z){return x.fromValue_noAlloc(L).eq_tolerance(H,Z)}static neq_tolerance(L,H,Z){return x.fromValue_noAlloc(L).neq_tolerance(H,Z)}static notEquals_tolerance(L,H,Z){return x.fromValue_noAlloc(L).notEquals_tolerance(H,Z)}static lt_tolerance(L,H,Z){return x.fromValue_noAlloc(L).lt_tolerance(H,Z)}static lte_tolerance(L,H,Z){return x.fromValue_noAlloc(L).lte_tolerance(H,Z)}static gt_tolerance(L,H,Z){return x.fromValue_noAlloc(L).gt_tolerance(H,Z)}static gte_tolerance(L,H,Z){return x.fromValue_noAlloc(L).gte_tolerance(H,Z)}static pLog10(L){return x.fromValue_noAlloc(L).pLog10()}static absLog10(L){return x.fromValue_noAlloc(L).absLog10()}static log10(L){return x.fromValue_noAlloc(L).log10()}static log(L,H){return x.fromValue_noAlloc(L).log(H)}static log2(L){return x.fromValue_noAlloc(L).log2()}static ln(L){return x.fromValue_noAlloc(L).ln()}static logarithm(L,H){return x.fromValue_noAlloc(L).logarithm(H)}static pow(L,H){return x.fromValue_noAlloc(L).pow(H)}static pow10(L){return x.fromValue_noAlloc(L).pow10()}static root(L,H){return x.fromValue_noAlloc(L).root(H)}static factorial(L,H){return x.fromValue_noAlloc(L).factorial()}static gamma(L,H){return x.fromValue_noAlloc(L).gamma()}static lngamma(L,H){return x.fromValue_noAlloc(L).lngamma()}static exp(L){return x.fromValue_noAlloc(L).exp()}static sqr(L){return x.fromValue_noAlloc(L).sqr()}static sqrt(L){return x.fromValue_noAlloc(L).sqrt()}static cube(L){return x.fromValue_noAlloc(L).cube()}static cbrt(L){return x.fromValue_noAlloc(L).cbrt()}static tetrate(L,H=2,Z=x.fromComponents_noNormalize(1,0,1),dt=!1){return x.fromValue_noAlloc(L).tetrate(H,Z,dt)}static iteratedexp(L,H=2,Z=x.fromComponents_noNormalize(1,0,1),dt=!1){return x.fromValue_noAlloc(L).iteratedexp(H,Z,dt)}static iteratedlog(L,H=10,Z=1,dt=!1){return x.fromValue_noAlloc(L).iteratedlog(H,Z,dt)}static layeradd10(L,H,Z=!1){return x.fromValue_noAlloc(L).layeradd10(H,Z)}static layeradd(L,H,Z=10,dt=!1){return x.fromValue_noAlloc(L).layeradd(H,Z,dt)}static slog(L,H=10,Z=!1){return x.fromValue_noAlloc(L).slog(H,100,Z)}static lambertw(L){return x.fromValue_noAlloc(L).lambertw()}static ssqrt(L){return x.fromValue_noAlloc(L).ssqrt()}static linear_sroot(L,H){return x.fromValue_noAlloc(L).linear_sroot(H)}static pentate(L,H=2,Z=x.fromComponents_noNormalize(1,0,1),dt=!1){return x.fromValue_noAlloc(L).pentate(H,Z,dt)}static affordGeometricSeries(L,H,Z,dt){return this.affordGeometricSeries_core(x.fromValue_noAlloc(L),x.fromValue_noAlloc(H),x.fromValue_noAlloc(Z),dt)}static sumGeometricSeries(L,H,Z,dt){return this.sumGeometricSeries_core(L,x.fromValue_noAlloc(H),x.fromValue_noAlloc(Z),dt)}static affordArithmeticSeries(L,H,Z,dt){return this.affordArithmeticSeries_core(x.fromValue_noAlloc(L),x.fromValue_noAlloc(H),x.fromValue_noAlloc(Z),x.fromValue_noAlloc(dt))}static sumArithmeticSeries(L,H,Z,dt){return this.sumArithmeticSeries_core(x.fromValue_noAlloc(L),x.fromValue_noAlloc(H),x.fromValue_noAlloc(Z),x.fromValue_noAlloc(dt))}static efficiencyOfPurchase(L,H,Z){return this.efficiencyOfPurchase_core(x.fromValue_noAlloc(L),x.fromValue_noAlloc(H),x.fromValue_noAlloc(Z))}static randomDecimalForTesting(L){if(Math.random()*20<1)return x.fromComponents_noNormalize(0,0,0);const H=Math.random()>.5?1:-1;if(Math.random()*20<1)return x.fromComponents_noNormalize(H,0,1);const Z=Math.floor(Math.random()*(L+1));let dt=Z===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(dt=Math.trunc(dt));let bt=Math.pow(10,dt);return Math.random()>.9&&(bt=Math.trunc(bt)),x.fromComponents(H,Z,bt)}static affordGeometricSeries_core(L,H,Z,dt){const bt=H.mul(Z.pow(dt));return x.floor(L.div(bt).mul(Z.sub(1)).add(1).log10().div(Z.log10()))}static sumGeometricSeries_core(L,H,Z,dt){return H.mul(Z.pow(dt)).mul(x.sub(1,Z.pow(L))).div(x.sub(1,Z))}static affordArithmeticSeries_core(L,H,Z,dt){const Tt=H.add(dt.mul(Z)).sub(Z.div(2)),Nt=Tt.pow(2);return Tt.neg().add(Nt.add(Z.mul(L).mul(2)).sqrt()).div(Z).floor()}static sumArithmeticSeries_core(L,H,Z,dt){const bt=H.add(dt.mul(Z));return L.div(2).mul(bt.mul(2).plus(L.sub(1).mul(Z)))}static efficiencyOfPurchase_core(L,H,Z){return L.div(H).add(L.div(Z))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Bt)return this.layer+=1,this.mag=Math.log10(this.mag),this;let L=Math.abs(this.mag),H=Math.sign(this.mag);if(L>=kt)return this.layer+=1,this.mag=H*Math.log10(L),this;for(;L<Ft&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=H*Math.pow(10,L),L=Math.abs(this.mag),H=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(L,H,Z){return this.sign=L,this.layer=H,this.mag=Z,this.normalize(),this}fromComponents_noNormalize(L,H,Z){return this.sign=L,this.layer=H,this.mag=Z,this}fromMantissaExponent(L,H){return this.layer=1,this.sign=Math.sign(L),L=Math.abs(L),this.mag=H+Math.log10(L),this.normalize(),this}fromMantissaExponent_noNormalize(L,H){return this.fromMantissaExponent(L,H),this}fromDecimal(L){return this.sign=L.sign,this.layer=L.layer,this.mag=L.mag,this}fromNumber(L){return this.mag=Math.abs(L),this.sign=Math.sign(L),this.layer=0,this.normalize(),this}fromString(L){const H=L,Z=x.fromStringCache.get(H);if(Z!==void 0)return this.fromDecimal(Z);ne?L=L.replace(",",""):me&&(L=L.replace(",","."));const dt=L.split("^^^");if(dt.length===2){const Ee=parseFloat(dt[0]),sr=parseFloat(dt[1]),Ne=dt[1].split(";");let ar=1;if(Ne.length===2&&(ar=parseFloat(Ne[1]),isFinite(ar)||(ar=1)),isFinite(Ee)&&isFinite(sr)){const Ye=x.pentate(Ee,sr,ar);return this.sign=Ye.sign,this.layer=Ye.layer,this.mag=Ye.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}}const bt=L.split("^^");if(bt.length===2){const Ee=parseFloat(bt[0]),sr=parseFloat(bt[1]),Ne=bt[1].split(";");let ar=1;if(Ne.length===2&&(ar=parseFloat(Ne[1]),isFinite(ar)||(ar=1)),isFinite(Ee)&&isFinite(sr)){const Ye=x.tetrate(Ee,sr,ar);return this.sign=Ye.sign,this.layer=Ye.layer,this.mag=Ye.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}}const Tt=L.split("^");if(Tt.length===2){const Ee=parseFloat(Tt[0]),sr=parseFloat(Tt[1]);if(isFinite(Ee)&&isFinite(sr)){const Ne=x.pow(Ee,sr);return this.sign=Ne.sign,this.layer=Ne.layer,this.mag=Ne.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}}L=L.trim().toLowerCase();let Nt,Ht,It=L.split("pt");if(It.length===2){Nt=10,Ht=parseFloat(It[0]),It[1]=It[1].replace("(",""),It[1]=It[1].replace(")","");let Ee=parseFloat(It[1]);if(isFinite(Ee)||(Ee=1),isFinite(Nt)&&isFinite(Ht)){const sr=x.tetrate(Nt,Ht,Ee);return this.sign=sr.sign,this.layer=sr.layer,this.mag=sr.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}}if(It=L.split("p"),It.length===2){Nt=10,Ht=parseFloat(It[0]),It[1]=It[1].replace("(",""),It[1]=It[1].replace(")","");let Ee=parseFloat(It[1]);if(isFinite(Ee)||(Ee=1),isFinite(Nt)&&isFinite(Ht)){const sr=x.tetrate(Nt,Ht,Ee);return this.sign=sr.sign,this.layer=sr.layer,this.mag=sr.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}}if(It=L.split("f"),It.length===2){Nt=10,It[0]=It[0].replace("(",""),It[0]=It[0].replace(")","");let Ee=parseFloat(It[0]);if(It[1]=It[1].replace("(",""),It[1]=It[1].replace(")",""),Ht=parseFloat(It[1]),isFinite(Ee)||(Ee=1),isFinite(Nt)&&isFinite(Ht)){const sr=x.tetrate(Nt,Ht,Ee);return this.sign=sr.sign,this.layer=sr.layer,this.mag=sr.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}}const $t=L.split("e"),Zt=$t.length-1;if(Zt===0){const Ee=parseFloat(L);if(isFinite(Ee))return this.fromNumber(Ee),x.fromStringCache.size>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}else if(Zt===1){const Ee=parseFloat(L);if(isFinite(Ee)&&Ee!==0)return this.fromNumber(Ee),x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}const zt=L.split("e^");if(zt.length===2){this.sign=1,zt[0].charAt(0)=="-"&&(this.sign=-1);let Ee="";for(let sr=0;sr<zt[1].length;++sr){const Ne=zt[1].charCodeAt(sr);if(Ne>=43&&Ne<=57||Ne===101)Ee+=zt[1].charAt(sr);else return this.layer=parseFloat(Ee),this.mag=parseFloat(zt[1].substr(sr+1)),this.normalize(),x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}}if(Zt<1)return this.sign=0,this.layer=0,this.mag=0,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this;const ee=parseFloat($t[0]);if(ee===0)return this.sign=0,this.layer=0,this.mag=0,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this;let ye=parseFloat($t[$t.length-1]);if(Zt>=2){const Ee=parseFloat($t[$t.length-2]);isFinite(Ee)&&(ye*=Math.sign(Ee),ye+=Fr(Ee))}if(!isFinite(ee))this.sign=$t[0]==="-"?-1:1,this.layer=Zt,this.mag=ye;else if(Zt===1)this.sign=Math.sign(ee),this.layer=1,this.mag=ye+Math.log10(Math.abs(ee));else if(this.sign=Math.sign(ee),this.layer=Zt,Zt===2){const Ee=x.mul(x.fromComponents(1,2,ye),x.fromValue_noAlloc(ee));return this.sign=Ee.sign,this.layer=Ee.layer,this.mag=Ee.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}else this.mag=ye;return this.normalize(),x.fromStringCache.maxSize>=1&&x.fromStringCache.set(H,x.fromDecimal(this)),this}fromValue(L){return L instanceof x?this.fromDecimal(L):typeof L=="number"?this.fromNumber(L):typeof L=="string"?this.fromString(L):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(L){return isNaN(this.m)?Number.NaN:this.m===0?0:Le(this.m,L)}magnitudeWithDecimalPlaces(L){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Le(this.mag,L)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=jt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(L){return this.layer===0?(this.sign*this.mag).toExponential(L):this.toStringWithDecimalPlaces(L)}toFixed(L){return this.layer===0?(this.sign*this.mag).toFixed(L):this.toStringWithDecimalPlaces(L)}toPrecision(L){return this.e<=-7?this.toExponential(L-1):L>this.e?this.toFixed(L-this.exponent-1):this.toExponential(L-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(L){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(L):Le(this.m,L)+"e"+Le(this.e,L):this.layer===1?Le(this.m,L)+"e"+Le(this.e,L):this.layer<=jt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Le(this.mag,L):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Le(this.mag,L)}abs(){return x.fromComponents_noNormalize(this.sign===0?0:1,this.layer,this.mag)}neg(){return x.fromComponents_noNormalize(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.trunc(this.mag)):this}add(L){const H=x.fromValue_noAlloc(L);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(H.layer)||this.sign===0)return H;if(H.sign===0)return this;if(this.sign===-H.sign&&this.layer===H.layer&&this.mag===H.mag)return x.fromComponents_noNormalize(0,0,0);let Z,dt;if(this.layer>=2||H.layer>=2)return this.maxabs(H);if(x.cmpabs(this,H)>0?(Z=this,dt=H):(Z=H,dt=this),Z.layer===0&&dt.layer===0)return x.fromNumber(Z.sign*Z.mag+dt.sign*dt.mag);const bt=Z.layer*Math.sign(Z.mag),Tt=dt.layer*Math.sign(dt.mag);if(bt-Tt>=2)return Z;if(bt===0&&Tt===-1){if(Math.abs(dt.mag-Math.log10(Z.mag))>Et)return Z;{const Nt=Math.pow(10,Math.log10(Z.mag)-dt.mag),Ht=dt.sign+Z.sign*Nt;return x.fromComponents(Math.sign(Ht),1,dt.mag+Math.log10(Math.abs(Ht)))}}if(bt===1&&Tt===0){if(Math.abs(Z.mag-Math.log10(dt.mag))>Et)return Z;{const Nt=Math.pow(10,Z.mag-Math.log10(dt.mag)),Ht=dt.sign+Z.sign*Nt;return x.fromComponents(Math.sign(Ht),1,Math.log10(dt.mag)+Math.log10(Math.abs(Ht)))}}if(Math.abs(Z.mag-dt.mag)>Et)return Z;{const Nt=Math.pow(10,Z.mag-dt.mag),Ht=dt.sign+Z.sign*Nt;return x.fromComponents(Math.sign(Ht),1,dt.mag+Math.log10(Math.abs(Ht)))}throw Error("Bad arguments to add: "+this+", "+L)}plus(L){return this.add(L)}sub(L){return this.add(x.fromValue_noAlloc(L).neg())}subtract(L){return this.sub(L)}minus(L){return this.sub(L)}mul(L){const H=x.fromValue_noAlloc(L);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(H.layer))return H;if(this.sign===0||H.sign===0)return x.fromComponents_noNormalize(0,0,0);if(this.layer===H.layer&&this.mag===-H.mag)return x.fromComponents_noNormalize(this.sign*H.sign,0,1);let Z,dt;if(this.layer>H.layer||this.layer==H.layer&&Math.abs(this.mag)>Math.abs(H.mag)?(Z=this,dt=H):(Z=H,dt=this),Z.layer===0&&dt.layer===0)return x.fromNumber(Z.sign*dt.sign*Z.mag*dt.mag);if(Z.layer>=3||Z.layer-dt.layer>=2)return x.fromComponents(Z.sign*dt.sign,Z.layer,Z.mag);if(Z.layer===1&&dt.layer===0)return x.fromComponents(Z.sign*dt.sign,1,Z.mag+Math.log10(dt.mag));if(Z.layer===1&&dt.layer===1)return x.fromComponents(Z.sign*dt.sign,1,Z.mag+dt.mag);if(Z.layer===2&&dt.layer===1){const bt=x.fromComponents(Math.sign(Z.mag),Z.layer-1,Math.abs(Z.mag)).add(x.fromComponents(Math.sign(dt.mag),dt.layer-1,Math.abs(dt.mag)));return x.fromComponents(Z.sign*dt.sign,bt.layer+1,bt.sign*bt.mag)}if(Z.layer===2&&dt.layer===2){const bt=x.fromComponents(Math.sign(Z.mag),Z.layer-1,Math.abs(Z.mag)).add(x.fromComponents(Math.sign(dt.mag),dt.layer-1,Math.abs(dt.mag)));return x.fromComponents(Z.sign*dt.sign,bt.layer+1,bt.sign*bt.mag)}throw Error("Bad arguments to mul: "+this+", "+L)}multiply(L){return this.mul(L)}times(L){return this.mul(L)}div(L){const H=x.fromValue_noAlloc(L);return this.mul(H.recip())}divide(L){return this.div(L)}divideBy(L){return this.div(L)}dividedBy(L){return this.div(L)}recip(){return this.mag===0?x.dNaN:this.layer===0?x.fromComponents(this.sign,0,1/this.mag):x.fromComponents(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(L){const H=x.fromValue_noAlloc(L);return this.sign>H.sign?1:this.sign<H.sign?-1:this.sign*this.cmpabs(L)}cmpabs(L){const H=x.fromValue_noAlloc(L),Z=this.mag>0?this.layer:-this.layer,dt=H.mag>0?H.layer:-H.layer;return Z>dt?1:Z<dt?-1:this.mag>H.mag?1:this.mag<H.mag?-1:0}compare(L){return this.cmp(L)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(L){const H=x.fromValue_noAlloc(L);return this.sign===H.sign&&this.layer===H.layer&&this.mag===H.mag}equals(L){return this.eq(L)}neq(L){return!this.eq(L)}notEquals(L){return this.neq(L)}lt(L){return this.cmp(L)===-1}lte(L){return!this.gt(L)}gt(L){return this.cmp(L)===1}gte(L){return!this.lt(L)}max(L){const H=x.fromValue_noAlloc(L);return this.lt(H)?H:this}min(L){const H=x.fromValue_noAlloc(L);return this.gt(H)?H:this}maxabs(L){const H=x.fromValue_noAlloc(L);return this.cmpabs(H)<0?H:this}minabs(L){const H=x.fromValue_noAlloc(L);return this.cmpabs(H)>0?H:this}clamp(L,H){return this.max(L).min(H)}clampMin(L){return this.max(L)}clampMax(L){return this.min(L)}cmp_tolerance(L,H){const Z=x.fromValue_noAlloc(L);return this.eq_tolerance(Z,H)?0:this.cmp(Z)}compare_tolerance(L,H){return this.cmp_tolerance(L,H)}eq_tolerance(L,H){const Z=x.fromValue_noAlloc(L);if(H==null&&(H=1e-7),this.sign!==Z.sign||Math.abs(this.layer-Z.layer)>1)return!1;let dt=this.mag,bt=Z.mag;return this.layer>Z.layer&&(bt=Fr(bt)),this.layer<Z.layer&&(dt=Fr(dt)),Math.abs(dt-bt)<=H*Math.max(Math.abs(dt),Math.abs(bt))}equals_tolerance(L,H){return this.eq_tolerance(L,H)}neq_tolerance(L,H){return!this.eq_tolerance(L,H)}notEquals_tolerance(L,H){return this.neq_tolerance(L,H)}lt_tolerance(L,H){const Z=x.fromValue_noAlloc(L);return!this.eq_tolerance(Z,H)&&this.lt(Z)}lte_tolerance(L,H){const Z=x.fromValue_noAlloc(L);return this.eq_tolerance(Z,H)||this.lt(Z)}gt_tolerance(L,H){const Z=x.fromValue_noAlloc(L);return!this.eq_tolerance(Z,H)&&this.gt(Z)}gte_tolerance(L,H){const Z=x.fromValue_noAlloc(L);return this.eq_tolerance(Z,H)||this.gt(Z)}pLog10(){return this.lt(x.dZero)?x.dZero:this.log10()}absLog10(){return this.sign===0?x.dNaN:this.layer>0?x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):x.fromComponents(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?x.dNaN:this.layer>0?x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):x.fromComponents(this.sign,0,Math.log10(this.mag))}log(L){return L=x.fromValue_noAlloc(L),this.sign<=0||L.sign<=0||L.sign===1&&L.layer===0&&L.mag===1?x.dNaN:this.layer===0&&L.layer===0?x.fromComponents(this.sign,0,Math.log(this.mag)/Math.log(L.mag)):x.div(this.log10(),L.log10())}log2(){return this.sign<=0?x.dNaN:this.layer===0?x.fromComponents(this.sign,0,Math.log2(this.mag)):this.layer===1?x.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?x.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?x.dNaN:this.layer===0?x.fromComponents(this.sign,0,Math.log(this.mag)):this.layer===1?x.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?x.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(L){return this.log(L)}pow(L){const H=x.fromValue_noAlloc(L),Z=this,dt=H;if(Z.sign===0)return dt.eq(0)?x.fromComponents_noNormalize(1,0,1):Z;if(Z.sign===1&&Z.layer===0&&Z.mag===1)return Z;if(dt.sign===0)return x.fromComponents_noNormalize(1,0,1);if(dt.sign===1&&dt.layer===0&&dt.mag===1)return Z;const bt=Z.absLog10().mul(dt).pow10();return this.sign===-1?Math.abs(dt.toNumber()%2)%2===1?bt.neg():Math.abs(dt.toNumber()%2)%2===0?bt:x.dNaN:bt}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return x.dNaN;let L=this;if(L.layer===0){const H=Math.pow(10,L.sign*L.mag);if(Number.isFinite(H)&&Math.abs(H)>=.1)return x.fromComponents(1,0,H);if(L.sign===0)return x.dOne;L=x.fromComponents_noNormalize(L.sign,L.layer+1,Math.log10(L.mag))}return L.sign>0&&L.mag>=0?x.fromComponents(L.sign,L.layer+1,L.mag):L.sign<0&&L.mag>=0?x.fromComponents(-L.sign,L.layer+1,-L.mag):x.dOne}pow_base(L){return x.fromValue_noAlloc(L).pow(this)}root(L){const H=x.fromValue_noAlloc(L);return this.pow(H.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?x.exp(x.mul(this,x.ln(this).sub(1))):x.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(x.fromComponents_noNormalize(1,0,24)))return x.fromNumber(kr(this.sign*this.mag));const L=this.mag-1;let H=.9189385332046727;H=H+(L+.5)*Math.log(L),H=H-L;const Z=L*L;let dt=L,bt=12*dt,Tt=1/bt,Nt=H+Tt;if(Nt===H||(H=Nt,dt=dt*Z,bt=360*dt,Tt=1/bt,Nt=H-Tt,Nt===H))return x.exp(H);H=Nt,dt=dt*Z,bt=1260*dt;let Ht=1/bt;return H=H+Ht,dt=dt*Z,bt=1680*dt,Ht=1/bt,H=H-Ht,x.exp(H)}else return this.layer===1?x.exp(x.mul(this,x.ln(this).sub(1))):x.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?x.dOne:this.layer===0&&this.mag<=709.7?x.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?x.fromComponents(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?x.fromComponents(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):x.fromComponents(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return x.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return x.fromComponents(1,2,Math.log10(this.mag)-.3010299956639812);{const L=x.div(x.fromComponents_noNormalize(this.sign,this.layer-1,this.mag),x.fromComponents_noNormalize(1,0,2));return L.layer+=1,L.normalize(),L}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(L=2,H=x.fromComponents_noNormalize(1,0,1),Z=!1){if(L===1)return x.pow(this,H);if(L===0)return new x(H);if(this.eq(x.dOne))return x.dOne;if(this.eq(-1))return x.pow(this,H);if(L===Number.POSITIVE_INFINITY){const Tt=this.toNumber();if(Tt<=1.444667861009766&&Tt>=.06598803584531254){if(Tt>1.444667861009099)return x.fromNumber(Math.E);const Nt=x.ln(this).neg();return Nt.lambertw().div(Nt)}else return Tt>1.444667861009766?x.fromNumber(Number.POSITIVE_INFINITY):x.dNaN}if(this.eq(x.dZero)){let Tt=Math.abs((L+1)%2);return Tt>1&&(Tt=2-Tt),x.fromNumber(Tt)}if(L<0)return x.iteratedlog(H,this,-L,Z);H=x.fromValue_noAlloc(H);const dt=L;L=Math.trunc(L);const bt=dt-L;if(this.gt(x.dZero)&&this.lte(1.444667861009766)&&(dt>1e4||!Z)){L=Math.min(1e4,L);for(let Tt=0;Tt<L;++Tt){const Nt=H;if(H=this.pow(H),Nt.eq(H))return H}if(bt!=0||dt>1e4){const Tt=this.pow(H);return dt<=1e4||Math.ceil(dt)%2==0?H.mul(1-bt).add(Tt.mul(bt)):H.mul(bt).add(Tt.mul(1-bt))}return H}bt!==0&&(H.eq(x.dOne)?this.gt(10)||Z?H=this.pow(bt):(H=x.fromNumber(x.tetrate_critical(this.toNumber(),bt)),this.lt(2)&&(H=H.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?H=H.layeradd10(bt,Z):H=H.layeradd(bt,this,Z));for(let Tt=0;Tt<L;++Tt){if(H=this.pow(H),!isFinite(H.layer)||!isFinite(H.mag))return H.normalize();if(H.layer-this.layer>3)return x.fromComponents_noNormalize(H.sign,H.layer+(L-Tt-1),H.mag);if(Tt>1e4)return H}return H}iteratedexp(L=2,H=x.fromComponents_noNormalize(1,0,1),Z=!1){return this.tetrate(L,H,Z)}iteratedlog(L=10,H=1,Z=!1){if(H<0)return x.tetrate(L,-H,this,Z);L=x.fromValue_noAlloc(L);let dt=x.fromDecimal(this);const bt=H;H=Math.trunc(H);const Tt=bt-H;if(dt.layer-L.layer>3){const Nt=Math.min(H,dt.layer-L.layer-3);H-=Nt,dt.layer-=Nt}for(let Nt=0;Nt<H;++Nt){if(dt=dt.log(L),!isFinite(dt.layer)||!isFinite(dt.mag))return dt.normalize();if(Nt>1e4)return dt}return Tt>0&&Tt<1&&(L.eq(10)?dt=dt.layeradd10(-Tt,Z):dt=dt.layeradd(-Tt,L,Z)),dt}slog(L=10,H=100,Z=!1){let dt=.001,bt=!1,Tt=!1,Nt=this.slog_internal(L,Z).toNumber();for(let Ht=1;Ht<H;++Ht){const $t=new x(L).tetrate(Nt,x.dOne,Z).gt(this);if(Ht>1&&Tt!=$t&&(bt=!0),Tt=$t,bt?dt/=2:dt*=2,dt=Math.abs(dt)*($t?-1:1),Nt+=dt,dt===0)break}return x.fromNumber(Nt)}slog_internal(L=10,H=!1){if(L=x.fromValue_noAlloc(L),L.lte(x.dZero)||L.eq(x.dOne))return x.dNaN;if(L.lt(x.dOne))return this.eq(x.dOne)?x.dZero:this.eq(x.dZero)?x.dNegOne:x.dNaN;if(this.mag<0||this.eq(x.dZero))return x.dNegOne;let Z=0,dt=x.fromDecimal(this);if(dt.layer-L.layer>3){const bt=dt.layer-L.layer-3;Z+=bt,dt.layer-=bt}for(let bt=0;bt<100;++bt)if(dt.lt(x.dZero))dt=x.pow(L,dt),Z-=1;else{if(dt.lte(x.dOne))return H?x.fromNumber(Z+dt.toNumber()-1):x.fromNumber(Z+x.slog_critical(L.toNumber(),dt.toNumber()));Z+=1,dt=x.log(dt,L)}return x.fromNumber(Z)}static slog_critical(L,H){return L>10?H-1:x.critical_section(L,H,oe)}static tetrate_critical(L,H){return x.critical_section(L,H,de)}static critical_section(L,H,Z,dt=!1){H*=10,H<0&&(H=0),H>10&&(H=10),L<2&&(L=2),L>10&&(L=10);let bt=0,Tt=0;for(let Ht=0;Ht<Oe.length;++Ht)if(Oe[Ht]==L){bt=Z[Ht][Math.floor(H)],Tt=Z[Ht][Math.ceil(H)];break}else if(Oe[Ht]<L&&Oe[Ht+1]>L){const It=(L-Oe[Ht])/(Oe[Ht+1]-Oe[Ht]);bt=Z[Ht][Math.floor(H)]*(1-It)+Z[Ht+1][Math.floor(H)]*It,Tt=Z[Ht][Math.ceil(H)]*(1-It)+Z[Ht+1][Math.ceil(H)]*It;break}const Nt=H-Math.floor(H);return bt<=0||Tt<=0?bt*(1-Nt)+Tt*Nt:Math.pow(L,Math.log(bt)/Math.log(L)*(1-Nt)+Math.log(Tt)/Math.log(L)*Nt)}layeradd10(L,H=!1){L=x.fromValue_noAlloc(L).toNumber();const Z=x.fromDecimal(this);if(L>=1){Z.mag<0&&Z.layer>0?(Z.sign=0,Z.mag=0,Z.layer=0):Z.sign===-1&&Z.layer==0&&(Z.sign=1,Z.mag=-Z.mag);const dt=Math.trunc(L);L-=dt,Z.layer+=dt}if(L<=-1){const dt=Math.trunc(L);if(L-=dt,Z.layer+=dt,Z.layer<0)for(let bt=0;bt<100;++bt){if(Z.layer++,Z.mag=Math.log10(Z.mag),!isFinite(Z.mag))return Z.sign===0&&(Z.sign=1),Z.layer<0&&(Z.layer=0),Z.normalize();if(Z.layer>=0)break}}for(;Z.layer<0;)Z.layer++,Z.mag=Math.log10(Z.mag);return Z.sign===0&&(Z.sign=1,Z.mag===0&&Z.layer>=1&&(Z.layer-=1,Z.mag=1)),Z.normalize(),L!==0?Z.layeradd(L,10,H):Z}layeradd(L,H,Z=!1){const bt=this.slog(H).toNumber()+L;return bt>=0?x.tetrate(H,bt,x.dOne,Z):Number.isFinite(bt)?bt>=-1?x.log(x.tetrate(H,bt+1,x.dOne,Z),H):x.log(x.log(x.tetrate(H,bt+2,x.dOne,Z),H),H):x.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return x.fromNumber(Ei(this.toNumber()));if(this.layer===0)return x.fromNumber(Ei(this.sign*this.mag));if(this.layer===1)return Oi(this);if(this.layer===2)return Oi(this);if(this.layer>=3)return x.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return x.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);const L=this.ln();return L.div(L.lambertw())}linear_sroot(L){if(L==1)return this;if(this.eq(x.dInf))return x.dInf;if(!this.isFinite())return x.dNaN;if(L==2)try{return this.ssqrt()}catch(H){return x.dNaN}if(L>0&&L<1)return this.root(L);if(L>-2&&L<-1)return x.fromNumber(L).add(2).pow(this.recip());if(L<=0)return x.dNaN;if(L==Number.POSITIVE_INFINITY){const H=this.toNumber();return H<Math.E&&H>ui?this.pow(this.recip()):x.dNaN}if(this.eq(1))return x.dOne;if(this.lt(0))return x.dNaN;if(this.lte("1ee-16"))return L%2==1?this:x.dNaN;if(this.gt(1)){let H=x.dTen;this.gte(x.tetrate(10,L,1,!0))&&(H=this.iteratedlog(10,L-1,!0)),L<=1&&(H=this.root(L));let Z=x.dZero;const dt=H.layer;let bt=H.iteratedlog(10,dt,!0),Tt=bt,Nt=bt.div(2),Ht=!0;for(;Ht;)Nt=Z.add(bt).div(2),x.iteratedexp(10,dt,Nt,!0).tetrate(L,1,!0).gt(this)?bt=Nt:Z=Nt,Nt.eq(Tt)?Ht=!1:Tt=Nt;return x.iteratedexp(10,dt,Nt,!0)}else{let H=1,Z=x.fromComponents(1,10,1),dt=x.fromComponents(1,10,1),bt=x.fromComponents(1,10,1),Tt=x.fromComponents(1,1,-16),Nt=x.dZero,Ht=x.fromComponents(1,10,1),It=Tt.pow10().recip(),$t=x.dZero,Zt=It,zt=It;const ee=Math.ceil(L)%2==0;let ye=0,Ee=x.fromComponents(1,10,1),sr=!1,Ne=x.dZero,ar=!1;for(;H<4;){if(H==2){if(ee)break;bt=x.fromComponents(1,10,1),Tt=Z,H=3,Ht=x.fromComponents(1,10,1),Ee=x.fromComponents(1,10,1)}for(sr=!1;Tt.neq(bt);){if(Ne=Tt,Tt.pow10().recip().tetrate(L,1,!0).eq(1)&&Tt.pow10().recip().lt(.4))It=Tt.pow10().recip(),Zt=Tt.pow10().recip(),zt=Tt.pow10().recip(),$t=x.dZero,ye=-1,H==3&&(Ee=Tt);else if(Tt.pow10().recip().tetrate(L,1,!0).eq(Tt.pow10().recip())&&!ee&&Tt.pow10().recip().lt(.4))It=Tt.pow10().recip(),Zt=Tt.pow10().recip(),zt=Tt.pow10().recip(),$t=x.dZero,ye=0;else if(Tt.pow10().recip().tetrate(L,1,!0).eq(Tt.pow10().recip().mul(2).tetrate(L,1,!0)))It=Tt.pow10().recip(),Zt=x.dZero,zt=It.mul(2),$t=It,ee?ye=-1:ye=0;else{for(Nt=Tt.mul(12e-17),It=Tt.pow10().recip(),Zt=Tt.add(Nt).pow10().recip(),$t=It.sub(Zt),zt=It.add($t);Zt.tetrate(L,1,!0).eq(It.tetrate(L,1,!0))||zt.tetrate(L,1,!0).eq(It.tetrate(L,1,!0))||Zt.gte(It)||zt.lte(It);)Nt=Nt.mul(2),Zt=Tt.add(Nt).pow10().recip(),$t=It.sub(Zt),zt=It.add($t);if((H==1&&zt.tetrate(L,1,!0).gt(It.tetrate(L,1,!0))&&Zt.tetrate(L,1,!0).gt(It.tetrate(L,1,!0))||H==3&&zt.tetrate(L,1,!0).lt(It.tetrate(L,1,!0))&&Zt.tetrate(L,1,!0).lt(It.tetrate(L,1,!0)))&&(Ee=Tt),zt.tetrate(L,1,!0).lt(It.tetrate(L,1,!0)))ye=-1;else if(ee)ye=1;else if(H==3&&Tt.gt_tolerance(Z,1e-8))ye=0;else{for(;Zt.tetrate(L,1,!0).eq_tolerance(It.tetrate(L,1,!0),1e-8)||zt.tetrate(L,1,!0).eq_tolerance(It.tetrate(L,1,!0),1e-8)||Zt.gte(It)||zt.lte(It);)Nt=Nt.mul(2),Zt=Tt.add(Nt).pow10().recip(),$t=It.sub(Zt),zt=It.add($t);zt.tetrate(L,1,!0).sub(It.tetrate(L,1,!0)).lt(It.tetrate(L,1,!0).sub(Zt.tetrate(L,1,!0)))?ye=0:ye=1}}if(ye==-1&&(ar=!0),H==1&&ye==1||H==3&&ye!=0)if(bt.eq(x.fromComponents(1,10,1)))Tt=Tt.mul(2);else{let ke=!1;if(sr&&(ye==1&&H==1||ye==-1&&H==3)&&(ke=!0),Tt=Tt.add(bt).div(2),ke)break}else if(bt.eq(x.fromComponents(1,10,1)))bt=Tt,Tt=Tt.div(2);else{let ke=!1;if(sr&&(ye==1&&H==1||ye==-1&&H==3)&&(ke=!0),bt=bt.sub(Ht),Tt=Tt.sub(Ht),ke)break}if(bt.sub(Tt).div(2).abs().gt(Ht.mul(1.5))&&(sr=!0),Ht=bt.sub(Tt).div(2).abs(),Tt.gt("1e18")||Tt.eq(Ne))break}if(Tt.gt("1e18")||!ar||Ee==x.fromComponents(1,10,1))break;H==1?Z=Ee:H==3&&(dt=Ee),H++}bt=Z,Tt=x.fromComponents(1,1,-18);let Ye=Tt,ze=x.dZero,yr=!0;for(;yr;)if(bt.eq(x.fromComponents(1,10,1))?ze=Tt.mul(2):ze=bt.add(Tt).div(2),x.pow(10,ze).recip().tetrate(L,1,!0).gt(this)?Tt=ze:bt=ze,ze.eq(Ye)?yr=!1:Ye=ze,Tt.gt("1e18"))return x.dNaN;if(ze.eq_tolerance(Z,1e-15)){if(dt.eq(x.fromComponents(1,10,1)))return x.dNaN;for(bt=x.fromComponents(1,10,1),Tt=dt,Ye=Tt,ze=x.dZero,yr=!0;yr;)if(bt.eq(x.fromComponents(1,10,1))?ze=Tt.mul(2):ze=bt.add(Tt).div(2),x.pow(10,ze).recip().tetrate(L,1,!0).gt(this)?Tt=ze:bt=ze,ze.eq(Ye)?yr=!1:Ye=ze,Tt.gt("1e18"))return x.dNaN;return ze.pow10().recip()}else return ze.pow10().recip()}}pentate(L=2,H=x.fromComponents_noNormalize(1,0,1),Z=!1){H=x.fromValue_noAlloc(H);const dt=L;L=Math.trunc(L);const bt=dt-L;bt!==0&&(H.eq(x.dOne)?(++L,H=x.fromNumber(bt)):this.eq(10)?H=H.layeradd10(bt,Z):H=H.layeradd(bt,this,Z));for(let Tt=0;Tt<L;++Tt){if(H=this.tetrate(H.toNumber(),x.dOne,Z),!isFinite(H.layer)||!isFinite(H.mag))return H.normalize();if(Tt>10)return H}return H}sin(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.sin(this.sign*this.mag)):x.fromComponents_noNormalize(0,0,0)}cos(){return this.mag<0?x.dOne:this.layer===0?x.fromNumber(Math.cos(this.sign*this.mag)):x.fromComponents_noNormalize(0,0,0)}tan(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.tan(this.sign*this.mag)):x.fromComponents_noNormalize(0,0,0)}asin(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.asin(this.sign*this.mag)):x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?x.fromNumber(Math.acos(this.toNumber())):this.layer===0?x.fromNumber(Math.acos(this.sign*this.mag)):x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.atan(this.sign*this.mag)):x.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return x.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return x.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN):x.ln(this.add(1).div(x.fromNumber(1).sub(this))).div(2)}ascensionPenalty(L){return L===0?this:this.root(x.pow(10,L))}egg(){return this.add(9)}lessThanOrEqualTo(L){return this.cmp(L)<1}lessThan(L){return this.cmp(L)<0}greaterThanOrEqualTo(L){return this.cmp(L)>-1}greaterThan(L){return this.cmp(L)>0}static smoothDamp(L,H,Z,dt){return new x(L).add(new x(H).minus(new x(L)).times(new x(Z)).times(new x(dt)))}static format(L,H=2,Z=9){return Ar(new x(L),H,Z)}clone(){return this}mod(L){const H=x.fromValue_noAlloc(L).abs();if(H.eq(x.dZero))return x.dZero;const Z=this.toNumber(),dt=H.toNumber();return isFinite(Z)&&isFinite(dt)&&Z!=0&&dt!=0?new x(Z%dt):this.sub(H).eq(this)?x.dZero:H.sub(this).eq(H)?this:this.sign==-1?this.abs().mod(H).neg():this.sub(this.div(H).floor().mul(H))}modulo(L){return this.mod(L)}modular(L){return this.mod(L)}softcap(L,H,Z){let dt=this.clone();return dt.gte(L)&&([0,"pow"].includes(Z)&&(dt=dt.div(L).pow(H).mul(L)),[1,"mul"].includes(Z)&&(dt=dt.sub(L).div(H).add(L))),dt}static softcap(L,H,Z,dt){return new x(L).softcap(H,Z,dt)}scale(L,H,Z,dt=!1){L=new x(L),H=new x(H);let bt=this.clone();return bt.gte(L)&&([0,"pow"].includes(Z)&&(bt=dt?bt.mul(L.pow(H.sub(1))).root(H):bt.pow(H).div(L.pow(H.sub(1)))),[1,"exp"].includes(Z)&&(bt=dt?bt.div(L).max(1).log(H).add(L):x.pow(H,bt.sub(L)).mul(L))),bt}static scale(L,H,Z,dt,bt=!1){return new x(L).scale(H,Z,dt,bt)}format(L=2,H=9){return Ar(this.clone(),L,H)}formatST(L=2,H=9,Z="st"){return Ar(this.clone(),L,H,Z)}static formatST(L,H=2,Z=9,dt="st"){return Ar(new x(L),H,Z,dt)}formatGain(L){return Fi(this.clone(),L)}static formatGain(L,H){return Fi(new x(L),H)}toRoman(L){L=L?new x(L):5e3;const H=this.clone();if(H.gte(L))return H;const Z=H.toNumber(),dt=String(+Z).split(""),bt=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let Tt="",Nt=3;if(typeof dt.pop()!="undefined"){for(;Nt--;)Tt=(bt[+dt.pop()+Nt*10]||"")+Tt;return Array(+dt.join("")+1).join("M")+Tt}else return""}static toRoman(L,H){return new x(L).toRoman(H)}},x.dZero=x.fromComponents_noNormalize(0,0,0),x.dOne=x.fromComponents_noNormalize(1,0,1),x.dNegOne=x.fromComponents_noNormalize(-1,0,1),x.dTwo=x.fromComponents_noNormalize(1,0,2),x.dTen=x.fromComponents_noNormalize(1,0,10),x.dNaN=x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN),x.dInf=x.fromComponents_noNormalize(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),x.dNegInf=x.fromComponents_noNormalize(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),x.dNumberMax=x.fromComponents(1,0,Number.MAX_VALUE),x.dNumberMin=x.fromComponents(1,0,Number.MIN_VALUE),x.fromStringCache=new et(Kt),x),Li=[[["","U","D","T","Qa","Qt","Sx","Sp","Oc","No"],["","Dc","Vg","Tg","Qag","Qtg","Sxg","Spg","Ocg","Nog"],["","Ce","De","Te","Qae","Qte","Sxe","Spe","Oce","Noe"]],[["","Mi","Mc","Na","Pc","Fm","At","Zp","Yc","Xn"],["","Me","Du","Tr","Te","Pe","He","Hp","Ot","En"],["","c","Ic","TCn","TeC","PCn","HCn","HpC","OCn","ECn"],["","Hc","DHe","THt","TeH","PHc","HHe","HpH","OHt","EHc"]]],hi={omega:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(L){const H=Fe.floor(L.div(1e3)),Z=Fe.floor(H.div(this.config.greek.length));let dt=this.config.greek[H.toNumber()%this.config.greek.length]+bi(L.toNumber()%1e3);(this.config.greek[H.toNumber()%this.config.greek.length]===void 0||H.toNumber()>Number.MAX_SAFE_INTEGER)&&(dt="\u03C9");const Tt=Fe.log(L,8e3).toNumber();if(Z.equals(0))return dt;if(Z.gt(0)&&Z.lte(3)){const It=[];for(let $t=0;$t<Z.toNumber();$t++)It.push("\u03C9");return`${It.join("^")}^${dt}`}else{if(Z.gt(3)&&Z.lt(10))return`\u03C9(${Z.toFixed(0)})^${dt}`;if(Tt<3)return`\u03C9(${this.format(Z)})^${dt}`;if(Tt<6)return`\u03C9(${this.format(Z)})`}const Nt=Fe.pow(8e3,Tt%1);return`\u03C9[${Tt<100?Math.floor(Tt).toFixed(0):this.format(Fe.floor(Tt))}](${this.format(Nt)})`}},omega_short:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(L){const H=Fe.floor(L.div(1e3)),Z=Fe.floor(H.div(this.config.greek.length));let dt=this.config.greek[H.toNumber()%this.config.greek.length]+bi(L.toNumber()%1e3);(this.config.greek[H.toNumber()%this.config.greek.length]===void 0||H.toNumber()>Number.MAX_SAFE_INTEGER)&&(dt="\u03C9");const Tt=Fe.log(L,8e3).toNumber();if(Z.equals(0))return dt;if(Z.gt(0)&&Z.lte(2)){const It=[];for(let $t=0;$t<Z.toNumber();$t++)It.push("\u03C9");return`${It.join("^")}^${dt}`}else if(Z.gt(2)&&Z.lt(10))return`\u03C9(${Z.toFixed(0)})^${dt}`;const Nt=Fe.pow(8e3,Tt%1);return`\u03C9[${Tt<100?Math.floor(Tt).toFixed(0):this.format(Fe.floor(Tt))}](${this.format(Nt)})`}},elemental:{config:{element_lists:[["H"],["He","Li","Be","B","C","N","O","F"],["Ne","Na","Mg","Al","Si","P","S","Cl"],["Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br"],["Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I"],["Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At"],["Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts"],["Og"]]},getOffset(L){if(L==1)return 1;const H=Math.floor(L/2);let Z=2*H*(H+1)*(2*H+1)/3-2;return L%2==1&&(Z+=2*Math.pow(H+1,2)),Z},getAbbreviation(L,H){const Z=this.abbreviationLength(L),dt=Math.floor(Z*H),bt=dt+this.getOffset(L);return bt>118?this.beyondOg(bt):this.config.element_lists[L-1][dt]},beyondOg(L){const H=Math.floor(Math.log10(L)),Z=["n","u","b","t","q","p","h","s","o","e"];let dt="";for(let bt=H;bt>=0;bt--){const Tt=Math.floor(L/Math.pow(10,bt))%10;dt==""?dt=Z[Tt].toUpperCase():dt+=Z[Tt]}return dt},abbreviationLength(L){return L==1?1:Math.pow(Math.floor(L/2)+1,2)*2},getAbbreviationAndValue(L){const H=L.log(118).toNumber(),Z=Math.floor(H)+1,dt=this.abbreviationLength(Z),bt=H-Z+1,Tt=Math.floor(bt*dt),Nt=this.getAbbreviation(Z,bt),Ht=new Fe(118).pow(Z+Tt/dt-1);return[Nt,Ht]},formatElementalPart(L,H){return H.eq(1)?L:`${H} ${L}`},format(L,H){if(L.gt(new Fe(118).pow(new Fe(118).pow(new Fe(118).pow(4)))))return"e"+this.format(L.log10(),H);let Z=L.log(118);const bt=Z.log(118).log(118).toNumber(),Tt=Math.max(4-bt*2,1),Nt=[];for(;Z.gte(1)&&Nt.length<Tt;){const[It,$t]=this.getAbbreviationAndValue(Z),Zt=Z.div($t).floor();Z=Z.sub(Zt.mul($t)),Nt.unshift([It,Zt])}if(Nt.length>=Tt)return Nt.map(It=>this.formatElementalPart(It[0],It[1])).join(" + ");const Ht=new Fe(118).pow(Z).toFixed(Nt.length===1?3:H);return Nt.length===0?Ht:Nt.length===1?`${Ht} \xD7 ${this.formatElementalPart(Nt[0][0],Nt[0][1])}`:`${Ht} \xD7 (${Nt.map(It=>this.formatElementalPart(It[0],It[1])).join(" + ")})`}},old_sc:{format(L,H){L=new Fe(L);const Z=L.log10().floor();if(Z.lt(9))return Z.lt(3)?L.toFixed(H):L.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(L.gte("eeee10")){const bt=L.slog();return(bt.gte(1e9)?"":new Fe(10).pow(bt.sub(bt.floor())).toFixed(4))+"F"+this.format(bt.floor(),0)}const dt=L.div(new Fe(10).pow(Z));return(Z.log10().gte(9)?"":dt.toFixed(4))+"e"+this.format(Z,0)}}},eng:{format(L,H){L=new Fe(L);const Z=L.log10().floor();if(Z.lt(9))return Z.lt(3)?L.toFixed(H):L.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(L.gte("eeee10")){const bt=L.slog();return(bt.gte(1e9)?"":new Fe(10).pow(bt.sub(bt.floor())).toFixed(4))+"F"+this.format(bt.floor(),0)}const dt=L.div(new Fe(1e3).pow(Z.div(3).floor()));return(Z.log10().gte(9)?"":dt.toFixed(new Fe(4).sub(Z.sub(Z.div(3).floor().mul(3)))))+"e"+this.format(Z.div(3).floor().mul(3),0)}}},mixed_sc:{format(L,H,Z){L=new Fe(L);const dt=L.log10().floor();return dt.lt(303)&&dt.gte(Z)?Ar(L,H,Z,"st"):Ar(L,H,Z,"sc")}},layer:{layers:["infinity","eternity","reality","equality","affinity","celerity","identity","vitality","immunity","atrocity"],format(L,H,Z){L=new Fe(L);const dt=L.max(1).log10().max(1).log(Xr.log10()).floor();if(dt.lte(0))return Ar(L,H,Z,"sc");L=new Fe(10).pow(L.max(1).log10().div(Xr.log10().pow(dt)).sub(dt.gte(1)?1:0));const bt=dt.div(10).floor(),Tt=dt.toNumber()%10-1;return Ar(L,Math.max(4,H),Z,"sc")+" "+(bt.gte(1)?"meta"+(bt.gte(2)?"^"+Ar(bt,0,Z,"sc"):"")+"-":"")+(isNaN(Tt)?"nanity":this.layers[Tt])}},standard:{tier1(L){return Li[0][0][L%10]+Li[0][1][Math.floor(L/10)%10]+Li[0][2][Math.floor(L/100)]},tier2(L){const H=L%10,Z=Math.floor(L/10)%10,dt=Math.floor(L/100)%10;let bt="";return L<10?Li[1][0][L]:(Z==1&&H==0?bt+="Vec":bt+=Li[1][1][H]+Li[1][2][Z],bt+=Li[1][3][dt],bt)}},inf:{format(L,H,Z){L=new Fe(L);let dt=0;const bt=new Fe(Number.MAX_VALUE),Tt=["","\u221E","\u03A9","\u03A8","\u028A"],Nt=["","","m","mm","mmm"];for(;L.gte(bt);)L=L.log(bt),dt++;return dt==0?Ar(L,H,Z,"sc"):L.gte(3)?Nt[dt]+Tt[dt]+"\u03C9^"+Ar(L.sub(1),H,Z,"sc"):L.gte(2)?Nt[dt]+"\u03C9"+Tt[dt]+"-"+Ar(bt.pow(L.sub(2)),H,Z,"sc"):Nt[dt]+Tt[dt]+"-"+Ar(bt.pow(L.sub(1)),H,Z,"sc")}}},Xr=new Fe(2).pow(1024),dr="\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089",Si="\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";function bi(L){return L.toFixed(0).split("").map(H=>H==="-"?"\u208B":dr[parseInt(H,10)]).join("")}function ms(L){return L.toFixed(0).split("").map(H=>H==="-"?"\u208B":Si[parseInt(H,10)]).join("")}function rs(L,H=2,Z=9,dt="st"){return Ar(L,H,Z,dt)}function Ar(L,H=2,Z=9,dt="mixed_sc"){L=new Fe(L);const bt=L.lt(0)?"-":"";if(L.mag==1/0)return bt+"Infinity";if(Number.isNaN(L.mag))return bt+"NaN";if(L.lt(0)&&(L=L.mul(-1)),L.eq(0))return L.toFixed(H);const Tt=L.log10().floor();switch(dt){case"sc":if(L.log10().lt(Math.min(-H,0))&&H>1){const Nt=L.log10().ceil(),Ht=L.div(Nt.eq(-1)?new Fe(.1):new Fe(10).pow(Nt)),It=Nt.mul(-1).max(1).log10().gte(9);return bt+(It?"":Ht.toFixed(2))+"e"+Ar(Nt,0,Z,"mixed_sc")}else if(Tt.lt(Z)){const Nt=Math.max(Math.min(H-Tt.toNumber(),H),0);return bt+(Nt>0?L.toFixed(Nt):L.toFixed(Nt).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}else{if(L.gte("eeee10")){const It=L.slog();return(It.gte(1e9)?"":new Fe(10).pow(It.sub(It.floor())).toFixed(2))+"F"+Ar(It.floor(),0)}const Nt=L.div(new Fe(10).pow(Tt)),Ht=Tt.log10().gte(9);return bt+(Ht?"":Nt.toFixed(2))+"e"+Ar(Tt,0,Z,"mixed_sc")}case"st":{let Nt=L.log(1e3).floor();if(Nt.lt(1))return bt+L.toFixed(Math.max(Math.min(H-Tt.toNumber(),H),0));{const Ht=Nt.mul(3),It=Nt.log10().floor();if(It.gte(3e3))return"e"+Ar(Tt,H,Z,"st");let $t="";if(Nt.lt(4))$t=["","K","M","B"][Math.round(Nt.toNumber())];else{let zt=Math.floor(Nt.log(1e3).toNumber());for(zt<100&&(zt=Math.max(zt-1,0)),Nt=Nt.sub(1).div(new Fe(10).pow(zt*3));Nt.gt(0);){const ee=Nt.div(1e3).floor(),ye=Nt.sub(ee.mul(1e3)).floor().toNumber();ye>0&&(ye==1&&!zt&&($t="U"),zt&&($t=hi.standard.tier2(zt)+($t?"-"+$t:"")),ye>1&&($t=hi.standard.tier1(ye)+$t)),Nt=ee,zt++}}const Zt=L.div(new Fe(10).pow(Ht));return bt+(It.gte(10)?"":Zt.toFixed(new Fe(2).sub(Tt.sub(Ht)).add(1).toNumber())+" ")+$t}}default:return bt+hi[dt].format(L,H,Z)}}function Fi(L,H){L=new Fe(L),H=new Fe(H);const Z=L.add(H);let dt,bt=Z.div(L);return bt.gte(10)&&L.gte(1e100)?(bt=bt.log10().mul(20),dt="(+"+Ar(bt)+" OoMs/sec)"):dt="(+"+Ar(H)+"/sec)",dt}function wt(L,H=2,Z="s"){return L=new Fe(L),L.gte(86400)?Ar(L.div(86400).floor(),0,12,"sc")+":"+wt(L.mod(86400),H,"d"):L.gte(3600)||Z=="d"?(L.div(3600).gte(10)||Z!="d"?"":"0")+Ar(L.div(3600).floor(),0,12,"sc")+":"+wt(L.mod(3600),H,"h"):L.gte(60)||Z=="h"?(L.div(60).gte(10)||Z!="h"?"":"0")+Ar(L.div(60).floor(),0,12,"sc")+":"+wt(L.mod(60),H,"m"):(L.gte(10)||Z!="m"?"":"0")+Ar(L,H,12,"sc")}function Mt(L){return L=new Fe(L),Ar(new Fe(1).sub(L).mul(100))+"%"}function Xe(L){return L=new Fe(L),Ar(L.mul(100))+"%"}function Ke(L,H=2){return L=new Fe(L),L.gte(1)?"\xD7"+L.format(H):"/"+L.pow(-1).format(H)}function gr(L,H,Z=10){return Fe.gte(L,10)?Fe.pow(Z,Fe.log(L,Z).pow(H)):new Fe(L)}function Ae(L,H){L=new Fe(L);const Z=[{name:"K",altName:"Kilo",value:new Fe("1000")},{name:"M",altName:"Mega",value:new Fe("1e6")},{name:"G",altName:"Giga",value:new Fe("1e9")},{name:"T",altName:"Tera",value:new Fe("1e12")},{name:"P",altName:"Peta",value:new Fe("1e15")},{name:"E",altName:"Exa",value:new Fe("1e18")},{name:"Z",altName:"Zetta",value:new Fe("1e21")},{name:"Y",altName:"Yotta",value:new Fe("1e24")},{name:"R",altName:"Ronna",value:new Fe("1e27")},{name:"Q",altName:"Quetta",value:new Fe("1e30")}];let dt;for(let bt=0;bt<Z.length;bt++)if(L.greaterThanOrEqualTo(Z[bt].value)){if(bt==Z.length-1)switch(H){case 1:dt=Z[bt].name;break;case 2:dt=`${L.divide(Z[bt].value).format()}`;break;case 3:dt=Z[bt].altName;break;case 0:default:dt=`${L.divide(Z[bt].value).format()} ${Z[bt].name}`;break}continue}else if(bt==0)switch(H){case 1:dt="";break;case 2:case 0:default:dt=L.format();break}else switch(H){case 1:dt=Z[bt-1].name;break;case 2:dt=`${L.divide(Z[bt-1].value).format()}`;break;case 3:dt=Z[bt-1].altName;break;case 0:default:dt=`${L.divide(Z[bt-1].value).format()} ${Z[bt-1].name}`;break}return dt}function ci(L,H=!1){return`${Ae(L,2)} ${Ae(L,1)}eV${H?"/c^2":""}`}var V=_(_({},hi),{toSubscript:bi,toSuperscript:ms,formatST:rs,format:Ar,formatGain:Fi,formatTime:wt,formatReduction:Mt,formatPercent:Xe,formatMult:Ke,expMult:gr,metric:Ae,ev:ci});Fe.formats=V;var K=Fe,nt=L=>new K(L);Object.getOwnPropertyNames(K).filter(L=>!Object.getOwnPropertyNames(class{}).includes(L)).forEach(L=>{nt[L]=K[L]});var St=class{constructor(L){var H,Z,dt;this.id=L.id,this.name=L.name,this.desc=(H=L.desc)!=null?H:"",this.value=L.value,this.order=(Z=L.order)!=null?Z:99,this.index=(dt=L.index)!=null?dt:-1}},Ot=class{constructor(L,H){this.bGet=this.getBoost,this.bRemove=this.removeBoost,this.bSet=this.setBoost,this.addBoost=this.setBoost,H=H?Array.isArray(H)?H:[H]:void 0,this.baseEffect=nt(L!=null?L:1),this.boostArray=[],H&&H.forEach(Z=>{this.boostArray.push(new St(Z))})}getBoost(L){let H=null;for(let Z=0;Z<this.boostArray.length;Z++)(L===Z||L==this.boostArray[Z].id)&&(H=this.boostArray[Z],H.index=Z);return H}removeBoost(L){const H=this.bGet(L);H&&delete this.boostArray[H.index]}setBoost(L,H,Z,dt,bt){if(typeof L=="string"){const Tt=L,Nt=H!=null?H:"",Ht=Z!=null?Z:"",It=dt!=null?dt:zt=>zt,$t=bt,Zt=this.bGet(Tt);Zt?this.boostArray[Zt.index]=new St({id:Tt,name:Nt,desc:Ht,value:It,order:$t,index:this.boostArray.length}):this.boostArray.push(new St({id:Tt,name:Nt,desc:Ht,value:It,order:$t,index:this.boostArray.length}))}else{L=Array.isArray(L)?L:[L];for(let Tt=0;Tt<L.length;Tt++){const Nt=this.bGet(L[Tt].id);Nt?this.boostArray[Nt.index]=new St(L[Tt]):this.boostArray=this.boostArray.concat(new St(L[Tt]))}}}bSetArray(L){this.setBoost(L)}bSetAdvanced(...L){this.setBoost(L)}calculate(L=this.baseEffect){let H=nt(L);const Z=this.boostArray;Z.sort((dt,bt)=>dt.order-bt.order);for(let dt=0;dt<Z.length;dt++)H=Z[dt].value(H);return H}},Xt=class{constructor(L){var H;this.id=(H=L.id)!=null?H:-1,this.level=L.level?nt(L.level):nt(1)}},se=class{constructor(L,H){const Z=typeof H=="function"?H():H;this.data=Z,this.id=L.id,this.name=L.name,this.costScaling=L.costScaling,this.maxLevel=L.maxLevel,this.effect=L.effect}get level(){return this.data.level}set level(L){this.data.level=nt(L)}},Se=class{constructor(){this.value=nt(0),this.upgrades=[],this.boost=new Ot}},ge=class{constructor(L=new Se,H=nt(0),Z=nt(1)){this.defaultVal=nt(H),this.defaultBoost=nt(Z),this.upgrades=[],this.pointer=typeof L=="function"?L():L,this.boost=new Ot(Z),this.pointer.value=this.defaultVal}get value(){return this.pointer.value}set value(L){this.pointer.value=L}reset(L=!0,H=!0){L&&(this.value=this.defaultVal),H&&this.upgrades.forEach(Z=>{Z.level=nt(0)})}gain(L=1e3){return this.value=this.value.add(this.boost.calculate().mul(nt(L).div(1e3))),this.value}pointerAddUpgrade(L){const H=new Xt(L);return this.pointer.upgrades.push(H),L}getUpgrade(L){let H=null;if(L===void 0)return null;if(typeof L=="number")H=this.upgrades[L];else if(typeof L=="string"){for(let Z=0;Z<this.upgrades.length;Z++)if(this.upgrades[Z].id===L){H=this.upgrades[Z];break}}return H}addUpgrade(L,H=!0){Array.isArray(L)||(L=[L]);const Z=[];for(let dt=0;dt<L.length;dt++){L[dt].id||(L[dt].id=this.upgrades.length+dt),this.pointerAddUpgrade(L[dt]);const bt=new se(L[dt],this.pointer.upgrades[this.pointer.upgrades.length-1]);H&&bt.effect(bt.level,bt),Z.push(bt)}this.upgrades=this.upgrades.concat(Z)}updateUpgrade(L,H){var Z,dt,bt,Tt;const Nt=this.getUpgrade(L);Nt!==null&&(Nt.name=(Z=H.name)!=null?Z:Nt.name,Nt.costScaling=(dt=H.costScaling)!=null?dt:Nt.costScaling,Nt.maxLevel=(bt=H.maxLevel)!=null?bt:Nt.maxLevel,Nt.effect=(Tt=H.effect)!=null?Tt:Nt.effect)}calculateUpgrade(L,H,Z=!1){H=nt(H);function dt(Nt,Ht){let It=nt();for(let $t=nt(0);$t.lte(Ht);$t=$t.add(1))It=It.add(Nt($t));return It}function bt(Nt,Ht,It=Z){if(It){let $t=nt(0),Zt=H,zt=nt(0);for(;$t.lessThanOrEqualTo(Zt);){const ee=$t.plus(Zt).dividedBy(2).floor();Nt(ee).lte(Ht)?(zt=ee,$t=ee.plus(1)):Zt=ee.minus(1)}return[zt,zt.gt(0)?Nt(zt):nt(0)]}else{let $t=nt(0),Zt=nt(1);for(;dt(Nt,Zt).lt(Ht);)Zt=Zt.mul(2);for(;$t.lt(Zt);){const zt=nt.floor($t.add(Zt).div(2));dt(Nt,zt).lt(Ht)?$t=zt.add(1):Zt=zt}return[$t,$t.gt(0)?dt(Nt,$t.sub(1)):nt(0)]}}const Tt=this.getUpgrade(L);return Tt===null?[nt(0),nt(0)]:bt(Nt=>Tt.costScaling(Tt.level.add(Nt)),this.value)}buyUpgrade(L,H){const Z=this.getUpgrade(L);if(Z===null)return!1;H=nt(H),H=Z.level.add(H).lte(Z.maxLevel)?H:Z.maxLevel.sub(Z.level);const dt=this.calculateUpgrade(L,H);return dt[0].lte(0)?!1:(this.value=this.value.sub(dt[1]),Z.level=Z.level.add(dt[0]),typeof Z.effect=="function"&&Z.effect(Z.level,Z),!0)}},Ue=class{constructor(L){this.value=nt(L)}},We=class{constructor(L,H=!0,Z=0){this.initial=nt(Z),this.pointer=typeof L=="function"?L():L,this.boost=new Ot(this.initial)}get value(){return this.boost&&(this.pointer.value=this.boost.calculate()),this.pointer.value}set value(L){if(this.boost)throw new Error("Cannot set value of attributeStatic when boost is enabled.");this.pointer.value=L}},ir=class{constructor(L){this.configOptionTemplate=L}parse(L){if(typeof L=="undefined")return this.configOptionTemplate;const H=(Z,dt)=>{for(const bt in dt)typeof Z[bt]=="undefined"?Z[bt]=dt[bt]:typeof Z[bt]=="object"&&typeof dt[bt]=="object"&&(Z[bt]=H(Z[bt],dt[bt]));return Z};return H(L,this.configOptionTemplate)}get options(){return this.configOptionTemplate}},Ve={autoAddInterval:!0,fps:30,pixiApp:void 0},Nr=(B=class{constructor(L){if(this.keysPressed=[],this.binds=[],this.tickers=[],this.config=B.configManager.parse(L),this.config.autoAddInterval)if(this.config.pixiApp)this.config.pixiApp.ticker.add(H=>{for(const Z of this.tickers)Z(H)});else{const H=this.config.fps?this.config.fps:30;setInterval(()=>{for(const Z of this.tickers)Z(1e3/H)},1e3/H)}typeof document!="undefined"&&(document.addEventListener("keydown",H=>this.logKey(H,!0)),document.addEventListener("keyup",H=>this.logKey(H,!1)))}logKey(L,H){const Z=L.key;H&&!this.keysPressed.includes(Z)?this.keysPressed.push(Z):!H&&this.keysPressed.includes(Z)&&this.keysPressed.splice(this.keysPressed.indexOf(Z),1)}isPressing(L){for(let H=0;H<this.binds.length;H++){const Z=this.binds[H];if(Z.name===L)return this.keysPressed.includes(Z.key)}return!1}addKey(L,H,Z){for(let dt=0;dt<this.binds.length;dt++){const bt=this.binds[dt];if(bt.name===L){bt.key=H;return}}this.binds.push({name:L,key:H,fn:Z}),typeof Z=="function"&&this.tickers.push(dt=>{this.isPressing(L)&&Z(dt)})}addKeys(L){for(const H of L)this.addKey(H.name,H.key,H.fn)}},B.configManager=new ir(Ve),B),er={autoAddInterval:!0,fps:30,pixiApp:void 0},Er=(G=class{constructor(L){if(this.config=G.configManager.parse(L),this.events=[],this.config.autoAddInterval)if(this.config.pixiApp)this.config.pixiApp.ticker.add(()=>{this.tickerFunction()});else{const H=this.config.fps?this.config.fps:30;setInterval(()=>{this.tickerFunction()},1e3/H)}}tickerFunction(){const L=Date.now();for(let H=0;H<this.events.length;H++){const Z=this.events[H];Z.type==="interval"?L-Z.intervalLast>=Z.delay&&(Z.callbackFn(),Z.intervalLast=L):Z.type==="timeout"&&L-Z.timeCreated>=Z.delay&&(Z.callbackFn(),this.events.splice(H,1),H--)}}addEvent(L,H,Z,dt){this.events.push((()=>{switch(H){case"interval":return{name:L,type:H,delay:typeof Z=="number"?Z:Z.toNumber(),callbackFn:dt,timeCreated:Date.now(),intervalLast:Date.now()};case"timeout":default:return{name:L,type:H,delay:typeof Z=="number"?Z:Z.toNumber(),callbackFn:dt,timeCreated:Date.now()}}})())}},G.configManager=new ir(er),G),ur=At(ot()),fi=At(q()),or;(function(L){L[L.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",L[L.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",L[L.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(or||(or={}));var di=function(){function L(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return L.prototype.addTypeMetadata=function(H){this._typeMetadatas.has(H.target)||this._typeMetadatas.set(H.target,new Map),this._typeMetadatas.get(H.target).set(H.propertyName,H)},L.prototype.addTransformMetadata=function(H){this._transformMetadatas.has(H.target)||this._transformMetadatas.set(H.target,new Map),this._transformMetadatas.get(H.target).has(H.propertyName)||this._transformMetadatas.get(H.target).set(H.propertyName,[]),this._transformMetadatas.get(H.target).get(H.propertyName).push(H)},L.prototype.addExposeMetadata=function(H){this._exposeMetadatas.has(H.target)||this._exposeMetadatas.set(H.target,new Map),this._exposeMetadatas.get(H.target).set(H.propertyName,H)},L.prototype.addExcludeMetadata=function(H){this._excludeMetadatas.has(H.target)||this._excludeMetadatas.set(H.target,new Map),this._excludeMetadatas.get(H.target).set(H.propertyName,H)},L.prototype.findTransformMetadatas=function(H,Z,dt){return this.findMetadatas(this._transformMetadatas,H,Z).filter(function(bt){return!bt.options||bt.options.toClassOnly===!0&&bt.options.toPlainOnly===!0?!0:bt.options.toClassOnly===!0?dt===or.CLASS_TO_CLASS||dt===or.PLAIN_TO_CLASS:bt.options.toPlainOnly===!0?dt===or.CLASS_TO_PLAIN:!0})},L.prototype.findExcludeMetadata=function(H,Z){return this.findMetadata(this._excludeMetadatas,H,Z)},L.prototype.findExposeMetadata=function(H,Z){return this.findMetadata(this._exposeMetadatas,H,Z)},L.prototype.findExposeMetadataByCustomName=function(H,Z){return this.getExposedMetadatas(H).find(function(dt){return dt.options&&dt.options.name===Z})},L.prototype.findTypeMetadata=function(H,Z){return this.findMetadata(this._typeMetadatas,H,Z)},L.prototype.getStrategy=function(H){var Z=this._excludeMetadatas.get(H),dt=Z&&Z.get(void 0),bt=this._exposeMetadatas.get(H),Tt=bt&&bt.get(void 0);return dt&&Tt||!dt&&!Tt?"none":dt?"excludeAll":"exposeAll"},L.prototype.getExposedMetadatas=function(H){return this.getMetadata(this._exposeMetadatas,H)},L.prototype.getExcludedMetadatas=function(H){return this.getMetadata(this._excludeMetadatas,H)},L.prototype.getExposedProperties=function(H,Z){return this.getExposedMetadatas(H).filter(function(dt){return!dt.options||dt.options.toClassOnly===!0&&dt.options.toPlainOnly===!0?!0:dt.options.toClassOnly===!0?Z===or.CLASS_TO_CLASS||Z===or.PLAIN_TO_CLASS:dt.options.toPlainOnly===!0?Z===or.CLASS_TO_PLAIN:!0}).map(function(dt){return dt.propertyName})},L.prototype.getExcludedProperties=function(H,Z){return this.getExcludedMetadatas(H).filter(function(dt){return!dt.options||dt.options.toClassOnly===!0&&dt.options.toPlainOnly===!0?!0:dt.options.toClassOnly===!0?Z===or.CLASS_TO_CLASS||Z===or.PLAIN_TO_CLASS:dt.options.toPlainOnly===!0?Z===or.CLASS_TO_PLAIN:!0}).map(function(dt){return dt.propertyName})},L.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},L.prototype.getMetadata=function(H,Z){var dt=H.get(Z),bt;dt&&(bt=Array.from(dt.values()).filter(function(zt){return zt.propertyName!==void 0}));for(var Tt=[],Nt=0,Ht=this.getAncestors(Z);Nt<Ht.length;Nt++){var It=Ht[Nt],$t=H.get(It);if($t){var Zt=Array.from($t.values()).filter(function(zt){return zt.propertyName!==void 0});Tt.push.apply(Tt,Zt)}}return Tt.concat(bt||[])},L.prototype.findMetadata=function(H,Z,dt){var bt=H.get(Z);if(bt){var Tt=bt.get(dt);if(Tt)return Tt}for(var Nt=0,Ht=this.getAncestors(Z);Nt<Ht.length;Nt++){var It=Ht[Nt],$t=H.get(It);if($t){var Zt=$t.get(dt);if(Zt)return Zt}}},L.prototype.findMetadatas=function(H,Z,dt){var bt=H.get(Z),Tt;bt&&(Tt=bt.get(dt));for(var Nt=[],Ht=0,It=this.getAncestors(Z);Ht<It.length;Ht++){var $t=It[Ht],Zt=H.get($t);Zt&&Zt.has(dt)&&Nt.push.apply(Nt,Zt.get(dt))}return Nt.slice().reverse().concat((Tt||[]).slice().reverse())},L.prototype.getAncestors=function(H){if(!H)return[];if(!this._ancestorsMap.has(H)){for(var Z=[],dt=Object.getPrototypeOf(H.prototype.constructor);typeof dt.prototype!="undefined";dt=Object.getPrototypeOf(dt.prototype.constructor))Z.push(dt);this._ancestorsMap.set(H,Z)}return this._ancestorsMap.get(H)},L}(),qr=new di;function Ai(){if(typeof globalThis!="undefined")return globalThis;if(typeof w.g!="undefined")return w.g;if(typeof window!="undefined")return window;if(typeof self!="undefined")return self}function Gi(L){return L!==null&&typeof L=="object"&&typeof L.then=="function"}var is=function(L,H,Z){if(Z||arguments.length===2)for(var dt=0,bt=H.length,Tt;dt<bt;dt++)(Tt||!(dt in H))&&(Tt||(Tt=Array.prototype.slice.call(H,0,dt)),Tt[dt]=H[dt]);return L.concat(Tt||Array.prototype.slice.call(H))};function $o(L){var H=new L;return!(H instanceof Set)&&!("push"in H)?[]:H}var gs=function(){function L(H,Z){this.transformationType=H,this.options=Z,this.recursionStack=new Set}return L.prototype.transform=function(H,Z,dt,bt,Tt,Nt){var Ht=this;if(Nt===void 0&&(Nt=0),Array.isArray(Z)||Z instanceof Set){var It=bt&&this.transformationType===or.PLAIN_TO_CLASS?$o(bt):[];return Z.forEach(function(Ne,ar){var Ye=H?H[ar]:void 0;if(!Ht.options.enableCircularCheck||!Ht.isCircular(Ne)){var ze=void 0;if(typeof dt!="function"&&dt&&dt.options&&dt.options.discriminator&&dt.options.discriminator.property&&dt.options.discriminator.subTypes){if(Ht.transformationType===or.PLAIN_TO_CLASS){ze=dt.options.discriminator.subTypes.find(function(Ge){return Ge.name===Ne[dt.options.discriminator.property]});var yr={newObject:It,object:Ne,property:void 0},ke=dt.typeFunction(yr);ze===void 0?ze=ke:ze=ze.value,dt.options.keepDiscriminatorProperty||delete Ne[dt.options.discriminator.property]}Ht.transformationType===or.CLASS_TO_CLASS&&(ze=Ne.constructor),Ht.transformationType===or.CLASS_TO_PLAIN&&(Ne[dt.options.discriminator.property]=dt.options.discriminator.subTypes.find(function(Ge){return Ge.value===Ne.constructor}).name)}else ze=dt;var Ze=Ht.transform(Ye,Ne,ze,void 0,Ne instanceof Map,Nt+1);It instanceof Set?It.add(Ze):It.push(Ze)}else Ht.transformationType===or.CLASS_TO_CLASS&&(It instanceof Set?It.add(Ne):It.push(Ne))}),It}else{if(dt===String&&!Tt)return Z==null?Z:String(Z);if(dt===Number&&!Tt)return Z==null?Z:Number(Z);if(dt===Boolean&&!Tt)return Z==null?Z:!!Z;if((dt===Date||Z instanceof Date)&&!Tt)return Z instanceof Date?new Date(Z.valueOf()):Z==null?Z:new Date(Z);if(Ai().Buffer&&(dt===Buffer||Z instanceof Buffer)&&!Tt)return Z==null?Z:Buffer.from(Z);if(Gi(Z)&&!Tt)return new Promise(function(Ne,ar){Z.then(function(Ye){return Ne(Ht.transform(void 0,Ye,dt,void 0,void 0,Nt+1))},ar)});if(!Tt&&Z!==null&&typeof Z=="object"&&typeof Z.then=="function")return Z;if(typeof Z=="object"&&Z!==null){!dt&&Z.constructor!==Object&&(!Array.isArray(Z)&&Z.constructor===Array||(dt=Z.constructor)),!dt&&H&&(dt=H.constructor),this.options.enableCircularCheck&&this.recursionStack.add(Z);var $t=this.getKeys(dt,Z,Tt),Zt=H||{};!H&&(this.transformationType===or.PLAIN_TO_CLASS||this.transformationType===or.CLASS_TO_CLASS)&&(Tt?Zt=new Map:dt?Zt=new dt:Zt={});for(var zt=function(Ne){if(Ne==="__proto__"||Ne==="constructor")return"continue";var ar=Ne,Ye=Ne,ze=Ne;if(!ee.options.ignoreDecorators&&dt){if(ee.transformationType===or.PLAIN_TO_CLASS){var yr=qr.findExposeMetadataByCustomName(dt,Ne);yr&&(ze=yr.propertyName,Ye=yr.propertyName)}else if(ee.transformationType===or.CLASS_TO_PLAIN||ee.transformationType===or.CLASS_TO_CLASS){var yr=qr.findExposeMetadata(dt,Ne);yr&&yr.options&&yr.options.name&&(Ye=yr.options.name)}}var ke=void 0;ee.transformationType===or.PLAIN_TO_CLASS?ke=Z[ar]:Z instanceof Map?ke=Z.get(ar):Z[ar]instanceof Function?ke=Z[ar]():ke=Z[ar];var Ze=void 0,Ge=ke instanceof Map;if(dt&&Tt)Ze=dt;else if(dt){var Pe=qr.findTypeMetadata(dt,ze);if(Pe){var Gr={newObject:Zt,object:Z,property:ze},Tr=Pe.typeFunction?Pe.typeFunction(Gr):Pe.reflectedType;Pe.options&&Pe.options.discriminator&&Pe.options.discriminator.property&&Pe.options.discriminator.subTypes?Z[ar]instanceof Array?Ze=Pe:(ee.transformationType===or.PLAIN_TO_CLASS&&(Ze=Pe.options.discriminator.subTypes.find(function($r){if(ke&&ke instanceof Object&&Pe.options.discriminator.property in ke)return $r.name===ke[Pe.options.discriminator.property]}),Ze===void 0?Ze=Tr:Ze=Ze.value,Pe.options.keepDiscriminatorProperty||ke&&ke instanceof Object&&Pe.options.discriminator.property in ke&&delete ke[Pe.options.discriminator.property]),ee.transformationType===or.CLASS_TO_CLASS&&(Ze=ke.constructor),ee.transformationType===or.CLASS_TO_PLAIN&&ke&&(ke[Pe.options.discriminator.property]=Pe.options.discriminator.subTypes.find(function($r){return $r.value===ke.constructor}).name)):Ze=Tr,Ge=Ge||Pe.reflectedType===Map}else if(ee.options.targetMaps)ee.options.targetMaps.filter(function($r){return $r.target===dt&&!!$r.properties[ze]}).forEach(function($r){return Ze=$r.properties[ze]});else if(ee.options.enableImplicitConversion&&ee.transformationType===or.PLAIN_TO_CLASS){var gn=Reflect.getMetadata("design:type",dt.prototype,ze);gn&&(Ze=gn)}}var yn=Array.isArray(Z[ar])?ee.getReflectedType(dt,ze):void 0,Qn=H?H[ar]:void 0;if(Zt.constructor.prototype){var Cr=Object.getOwnPropertyDescriptor(Zt.constructor.prototype,Ye);if((ee.transformationType===or.PLAIN_TO_CLASS||ee.transformationType===or.CLASS_TO_CLASS)&&(Cr&&!Cr.set||Zt[Ye]instanceof Function))return"continue"}if(!ee.options.enableCircularCheck||!ee.isCircular(ke)){var xs=ee.transformationType===or.PLAIN_TO_CLASS?Ye:Ne,ei=void 0;ee.transformationType===or.CLASS_TO_PLAIN?(ei=Z[xs],ei=ee.applyCustomTransformations(ei,dt,xs,Z,ee.transformationType),ei=Z[xs]===ei?ke:ei,ei=ee.transform(Qn,ei,Ze,yn,Ge,Nt+1)):ke===void 0&&ee.options.exposeDefaultValues?ei=Zt[Ye]:(ei=ee.transform(Qn,ke,Ze,yn,Ge,Nt+1),ei=ee.applyCustomTransformations(ei,dt,xs,Z,ee.transformationType)),(ei!==void 0||ee.options.exposeUnsetFields)&&(Zt instanceof Map?Zt.set(Ye,ei):Zt[Ye]=ei)}else if(ee.transformationType===or.CLASS_TO_CLASS){var ei=ke;ei=ee.applyCustomTransformations(ei,dt,Ne,Z,ee.transformationType),(ei!==void 0||ee.options.exposeUnsetFields)&&(Zt instanceof Map?Zt.set(Ye,ei):Zt[Ye]=ei)}},ee=this,ye=0,Ee=$t;ye<Ee.length;ye++){var sr=Ee[ye];zt(sr)}return this.options.enableCircularCheck&&this.recursionStack.delete(Z),Zt}else return Z}},L.prototype.applyCustomTransformations=function(H,Z,dt,bt,Tt){var Nt=this,Ht=qr.findTransformMetadatas(Z,dt,this.transformationType);return this.options.version!==void 0&&(Ht=Ht.filter(function(It){return It.options?Nt.checkVersion(It.options.since,It.options.until):!0})),this.options.groups&&this.options.groups.length?Ht=Ht.filter(function(It){return It.options?Nt.checkGroups(It.options.groups):!0}):Ht=Ht.filter(function(It){return!It.options||!It.options.groups||!It.options.groups.length}),Ht.forEach(function(It){H=It.transformFn({value:H,key:dt,obj:bt,type:Tt,options:Nt.options})}),H},L.prototype.isCircular=function(H){return this.recursionStack.has(H)},L.prototype.getReflectedType=function(H,Z){if(H){var dt=qr.findTypeMetadata(H,Z);return dt?dt.reflectedType:void 0}},L.prototype.getKeys=function(H,Z,dt){var bt=this,Tt=qr.getStrategy(H);Tt==="none"&&(Tt=this.options.strategy||"exposeAll");var Nt=[];if((Tt==="exposeAll"||dt)&&(Z instanceof Map?Nt=Array.from(Z.keys()):Nt=Object.keys(Z)),dt)return Nt;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&H){var Ht=qr.getExposedProperties(H,this.transformationType),It=qr.getExcludedProperties(H,this.transformationType);Nt=is(is([],Ht,!0),It,!0)}if(!this.options.ignoreDecorators&&H){var Ht=qr.getExposedProperties(H,this.transformationType);this.transformationType===or.PLAIN_TO_CLASS&&(Ht=Ht.map(function(zt){var ee=qr.findExposeMetadata(H,zt);return ee&&ee.options&&ee.options.name?ee.options.name:zt})),this.options.excludeExtraneousValues?Nt=Ht:Nt=Nt.concat(Ht);var $t=qr.getExcludedProperties(H,this.transformationType);$t.length>0&&(Nt=Nt.filter(function(zt){return!$t.includes(zt)})),this.options.version!==void 0&&(Nt=Nt.filter(function(zt){var ee=qr.findExposeMetadata(H,zt);return!ee||!ee.options?!0:bt.checkVersion(ee.options.since,ee.options.until)})),this.options.groups&&this.options.groups.length?Nt=Nt.filter(function(zt){var ee=qr.findExposeMetadata(H,zt);return!ee||!ee.options?!0:bt.checkGroups(ee.options.groups)}):Nt=Nt.filter(function(zt){var ee=qr.findExposeMetadata(H,zt);return!ee||!ee.options||!ee.options.groups||!ee.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(Nt=Nt.filter(function(Zt){return bt.options.excludePrefixes.every(function(zt){return Zt.substr(0,zt.length)!==zt})})),Nt=Nt.filter(function(Zt,zt,ee){return ee.indexOf(Zt)===zt}),Nt},L.prototype.checkVersion=function(H,Z){var dt=!0;return dt&&H&&(dt=this.options.version>=H),dt&&Z&&(dt=this.options.version<Z),dt},L.prototype.checkGroups=function(H){return H?this.options.groups.some(function(Z){return H.includes(Z)}):!0},L}(),Zn={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},$i=function(){return $i=Object.assign||function(L){for(var H,Z=1,dt=arguments.length;Z<dt;Z++){H=arguments[Z];for(var bt in H)Object.prototype.hasOwnProperty.call(H,bt)&&(L[bt]=H[bt])}return L},$i.apply(this,arguments)},Nl=function(){function L(){}return L.prototype.instanceToPlain=function(H,Z){var dt=new gs(or.CLASS_TO_PLAIN,$i($i({},Zn),Z));return dt.transform(void 0,H,void 0,void 0,void 0,void 0)},L.prototype.classToPlainFromExist=function(H,Z,dt){var bt=new gs(or.CLASS_TO_PLAIN,$i($i({},Zn),dt));return bt.transform(Z,H,void 0,void 0,void 0,void 0)},L.prototype.plainToInstance=function(H,Z,dt){var bt=new gs(or.PLAIN_TO_CLASS,$i($i({},Zn),dt));return bt.transform(void 0,Z,H,void 0,void 0,void 0)},L.prototype.plainToClassFromExist=function(H,Z,dt){var bt=new gs(or.PLAIN_TO_CLASS,$i($i({},Zn),dt));return bt.transform(H,Z,void 0,void 0,void 0,void 0)},L.prototype.instanceToInstance=function(H,Z){var dt=new gs(or.CLASS_TO_CLASS,$i($i({},Zn),Z));return dt.transform(void 0,H,void 0,void 0,void 0,void 0)},L.prototype.classToClassFromExist=function(H,Z,dt){var bt=new gs(or.CLASS_TO_CLASS,$i($i({},Zn),dt));return bt.transform(Z,H,void 0,void 0,void 0,void 0)},L.prototype.serialize=function(H,Z){return JSON.stringify(this.instanceToPlain(H,Z))},L.prototype.deserialize=function(H,Z,dt){var bt=JSON.parse(Z);return this.plainToInstance(H,bt,dt)},L.prototype.deserializeArray=function(H,Z,dt){var bt=JSON.parse(Z);return this.plainToInstance(H,bt,dt)},L}(),Yo=new Nl;function qu(L,H){return Yo.instanceToPlain(L,H)}function Ci(L,H,Z){return Yo.plainToInstance(L,H,Z)}var Ko=class{constructor(L){if(typeof window=="undefined")throw new Error("dataManager cannot be run on serverside");this.gameRef=L,this.normalData=L.data,this.gameData=L.data}compileData(L=this.gameData){return ur.default.compressToBase64(JSON.stringify(qu(L)))}decompileData(L=localStorage.getItem(`${this.gameRef.config.name.id}-data`)){return L?Ci(Os,JSON.parse(ur.default.decompressFromBase64(L))):null}resetData(L=!1){this.gameRef.data=this.normalData,this.saveData(),L&&window.location.reload()}saveData(){localStorage.setItem(`${this.gameRef.config.name.id}-data`,this.compileData())}exportData(){const L=this.compileData();if(prompt("Download save data?:",L)!=null){const H=new Blob([L],{type:"text/plain"}),Z=document.createElement("a");Z.href=URL.createObjectURL(H),Z.download=`${this.gameRef.config.name.id}-data.txt`,Z.textContent=`Download ${this.gameRef.config.name.id}-data.txt file`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)}}loadData(){if(!this.gameData)return;function L(dt){for(const bt in dt)if(typeof dt[bt]=="string")try{const Tt=nt(dt[bt]);dt[bt]=Tt}catch(Tt){console.error(`Error processing value: ${dt[bt]}`)}else typeof dt[bt]=="object"&&dt[bt]!==null&&L(dt[bt]);return dt}let H=this.decompileData();console.log(H),console.log(H=L(H));function Z(dt,bt){for(const Tt in dt)Object.prototype.hasOwnProperty.call(dt,Tt)&&(Object.prototype.hasOwnProperty.call(bt,Tt)?typeof dt[Tt]=="object"&&typeof bt[Tt]=="object"&&Z(dt[Tt],bt[Tt]):bt[Tt]=dt[Tt])}console.log(Z(this.normalData,H))}},Zo=class{constructor(L,H,Z){this.data=typeof L=="function"?L():L,this.static=typeof H=="function"?H():H,this.game=Z}get value(){return this.data.value}},Oa=class{constructor(L,H,Z){this.data=typeof L=="function"?L():L,this.static=typeof H=="function"?H():H,this.game=Z}get value(){return this.static.value}set value(L){this.data.value=L}},Qs=class{constructor(L,H){this.currenciesToReset=Array.isArray(L)?L:[L],this.extender=H}reset(){this.currenciesToReset.forEach(L=>{L.static.reset()}),this.extender&&this.extender.reset()}},Js={mode:"production",name:{title:"",id:""},settings:{framerate:30},initIntervalBasedManagers:!0},Dl=class{constructor(L){this.staticData=L||{}}set(L,H){this.staticData[L]=H}get(L){return this.staticData[L]}},Os=class{constructor(L){this.data=L||{}}set(L,H){this.data[L]=H}get(L){return this.data[L]}},ys=(k=class{constructor(L){this.config=k.configManager.parse(L),this.data=new Os,this.static=new Dl,this.dataManager=new Ko(this),this.keyManager=new Nr({autoAddInterval:this.config.initIntervalBasedManagers,fps:this.config.settings.framerate}),this.eventManager=new Er({autoAddInterval:this.config.initIntervalBasedManagers,fps:this.config.settings.framerate}),this.tickers=[]}addCurrency(L){return this.data.set(L,{currency:new Se}),this.static.set(L,{currency:new ge(this.data.get(L).currency)}),new Zo(this.data.get(L).currency,this.static.get(L).currency,this)}addCurrencyGroup(L,H){this.data.set(L,{}),this.static.set(L,{attributes:{}}),H.forEach(Z=>{this.data.get(L)[Z]=new Se,this.static.get(L)[Z]=new ge(this.data.get(L)[Z])})}addAttribute(L,H=!0,Z=0){return this.data.set(L,new Ue(Z)),this.static.set(L,new We(this.data.get(L),H,Z)),new Oa(this.data.get(L),this.static.get(L),this)}addReset(L,H){return new Qs(L,H)}},k.configManager=new ir(Js),k),Bl=function(){class L{constructor(Tt){this.article=Tt}update(){}AABBs(Tt){const Nt=this.AABB;return!(Tt[2]<Nt[0]||Nt[2]<Tt[0]||Tt[3]<Nt[1]||Nt[3]<Tt[1])}collidesPoint(Tt){const Nt=this.vertices,Ht=Nt.length;let It=!1;for(let $t=0,Zt=Ht-2;$t<Ht;$t+=2)Nt[$t+1]>Tt.y!=Nt[Zt+1]>Tt.y&&Tt.x<(Nt[Zt]-Nt[$t])*(Tt.y-Nt[$t+1])/(Nt[Zt+1]-Nt[$t+1])+Nt[$t]&&(It=!It),Zt=$t;return It}collidesCircle(){}collidesRectangle(){}collidesPolygon(Tt,Nt){const Ht=this.vertices,It=Nt?Tt:Tt.vertices,$t=[Ht,It];let Zt,zt,ee,ye,Ee;for(let sr=0;sr<$t.length;sr++){const Ne=$t[sr];for(let ar=0;ar<Ne.length;ar+=2){const Ye=(ar+2)%Ne.length,ze={x:Ne[Ye+1]-Ne[ar+1],y:Ne[ar]-Ne[Ye]};Zt=zt=null;for(let yr=0;yr<Ht.length;yr+=2)ee=ze.x*Ht[yr]+ze.y*Ht[yr+1],(Zt===null||ee<Zt)&&(Zt=ee),(zt===null||ee>zt)&&(zt=ee);ye=Ee=null;for(let yr=0;yr<It.length;yr+=2)ee=ze.x*It[yr]+ze.y*It[yr+1],(ye===null||ee<ye)&&(ye=ee),(Ee===null||ee>Ee)&&(Ee=ee);if(zt<ye||Ee<Zt)return!1}}return!0}collidesLine(Tt,Nt){const Ht=this.vertices,It=Ht.length;if(this.collidesPoint(Tt))return!0;for(let $t=0;$t<It;$t+=2){const Zt=($t+2)%It;if(L.lineLine(Tt,Nt,{x:Ht[$t],y:Ht[$t+1]},{x:Ht[Zt],y:Ht[Zt+1]}))return!0}return!1}collides(Tt){return this["collides"+Tt.SHAPE](Tt)}static lineLine(Tt,Nt,Ht,It){const $t=Tt.x,Zt=Tt.y,zt=Nt.x,ee=Nt.y,ye=Ht.x,Ee=Ht.y,sr=It.x,Ne=It.y,ar=zt-$t,Ye=ee-Zt,ze=sr-ye,yr=Ne-Ee,ke=(-Ye*($t-ye)+ar*(Zt-Ee))/(-ze*Ye+ar*yr),Ze=(ze*(Zt-Ee)-yr*($t-ye))/(-ze*Ye+ar*yr);return ke>=0&&ke<=1&&Ze>=0&&Ze<=1}}class H extends L{constructor(Tt,Nt){super(Tt),this.SHAPE="Rectangle",Nt=Nt||{},this._vertices=[],this.AABB=[0,0,0,0],this.set(Nt)}set(Tt){this.center=Tt.center||this.article,this.rotation=Tt.rotation?Tt.rotation:Tt.center?Tt.center:this.article,typeof Tt.square!="undefined"?this._width=this._height=Tt.square:(this._width=Tt.width||this.article.width,this._height=Tt.height||this.article.height),this.noRotate=Tt.noRotate,this.hw=this._width/2,this.hh=this._height/2,this.update()}get width(){return this._width}set width(Tt){this._width=Tt,this.hw=Tt/2}get height(){return this._height}set height(Tt){this._height=Tt,this.hh=Tt/2}update(){const Tt=this.AABB,Nt=this.center;if(this.noRotate){const Ht=this.hw,It=this.hh;Tt[0]=Nt.x-Ht,Tt[1]=Nt.y-It,Tt[2]=Nt.x+Ht,Tt[3]=Nt.y+It}else{const Ht=Math.abs(Math.sin(this.rotation.rotation)/2),It=Math.abs(Math.cos(this.rotation.rotation)/2),$t=this._width,Zt=this._height,zt=Zt*Ht+$t*It,ee=Zt*It+$t*Ht;Tt[0]=Nt.x-zt,Tt[1]=Nt.y-ee,Tt[2]=Nt.x+zt,Tt[3]=Nt.y+ee}this.verticesDirty=!0}updateVertices(){const Tt=this._vertices,Nt=this.center,Ht=this.hw,It=this.hh;if(this.noRotate){const $t=this.AABB;Tt[0]=$t[0],Tt[1]=$t[1],Tt[2]=$t[2],Tt[3]=$t[1],Tt[4]=$t[2],Tt[5]=$t[3],Tt[6]=$t[0],Tt[7]=$t[3]}else{const $t=this.rotation.rotation,Zt=Math.sin($t),zt=Math.cos($t);Tt[0]=Nt.x-Ht*zt+It*Zt,Tt[1]=Nt.y-Ht*Zt-It*zt,Tt[2]=Nt.x+Ht*zt+It*Zt,Tt[3]=Nt.y+Ht*Zt-It*zt,Tt[4]=Nt.x+Ht*zt-It*Zt,Tt[5]=Nt.y+Ht*Zt+It*zt,Tt[6]=Nt.x-Ht*zt-It*Zt,Tt[7]=Nt.y-Ht*Zt+It*zt}this.verticesDirty=!1}get vertices(){return this.verticesDirty&&this.updateVertices(),this._vertices}collidesRectangle(Tt){return this.noRotate&&Tt.noRotate?this.AABBs(Tt.AABB):this.collidesPolygon(Tt)}collidesCircle(Tt){return Tt.collidesRectangle(this)}static fromRectangle(Tt,Nt,Ht,It){const $t={x:Tt+Ht/2,y:Nt+It/2};return new H($t,{width:Ht,height:It,noRotate:!0})}}class Z extends L{constructor(Tt,Nt,Ht){super(Tt),this.SHAPE="Polygon",Ht=Ht||{},this.points=Nt,this.vertices=[],this.AABB=[],this.set(Ht)}set(Tt){Tt.point&&(this.points=Tt.points),this.center=Tt.center||this.article,this.rotation=Tt.rotation?Tt.rotation:Tt.center?Tt.center:this.article,this.update()}update(){const Tt=this.rotation.rotation,Nt=Math.sin(Tt),Ht=Math.cos(Tt);let It=1/0,$t=0,Zt=1/0,zt=0;const ee=this.points,ye=ee.length,Ee=this.vertices,sr=this.center;for(let Ne=0;Ne<ye;Ne+=2){const ar=ee[Ne],Ye=ee[Ne+1],ze=Ee[Ne]=sr.x+ar*Ht-Ye*Nt,yr=Ee[Ne+1]=sr.y+ar*Nt+Ye*Ht;It=ze<It?ze:It,$t=ze>$t?ze:$t,Zt=yr<Zt?yr:Zt,zt=yr>zt?yr:zt}this.AABB[0]=It,this.AABB[1]=Zt,this.AABB[2]=$t,this.AABB[3]=zt,this.width=$t-It,this.height=zt-Zt,this.hw=($t-It)/2,this.hh=(zt-Zt)/2}collidesRectangle(Tt){return this.collidesPolygon(Tt)}collidesCircle(Tt){return Tt.collidesPolygon(this)}}class dt extends L{constructor(Tt,Nt){super(Tt),this.SHAPE="Circle",this.AABB=[],Nt=Nt||{},this.set(Nt)}set(Tt){this.radius=Tt.radius||this.article.width/2,this.radiusSquared=this.radius*this.radius,this.center=Tt.positionObject?Tt.positionObject:this.article,this.update()}update(){const Tt=this.AABB,Nt=this.radius,Ht=this.center;Tt[0]=Ht.x-Nt,Tt[1]=Ht.y-Nt,Tt[2]=Ht.x+Nt,Tt[3]=Ht.y+Nt}collidesCircle(Tt){const Nt=this.center,Ht=Tt.center,It=Ht.x-Nt.x,$t=Ht.y-Nt.y,Zt=Tt.radius+this.radius;return It*It+$t*$t<=Zt*Zt}collidesPoint(Tt){const Nt=Tt.x-this.center.x,Ht=Tt.y-this.center.y;return Nt*Nt+Ht*Ht<=this.radiusSquared}collidesLine(Tt,Nt){function Ht(Ne,ar){return Ne[0]*ar[0]+Ne[1]*ar[1]}const It=this.center,$t=[It.x-Tt.x,It.y-Tt.y],Zt=[Nt.x-Tt.x,Nt.y-Tt.y],zt=Ht(Zt,Zt);let ye=Ht($t,Zt)/zt;ye=ye<0?0:ye,ye=ye>1?1:ye;const Ee=[Zt[0]*ye+Tt.x-It.x,Zt[1]*ye+Tt.y-It.y];return Ht(Ee,Ee)<=this.radiusSquared}collidesRectangle(Tt){if(Tt.noRotate){const Nt=Tt.AABB,Ht=(Nt[2]-Nt[0])/2,It=(Nt[3]-Nt[1])/2,$t=this.center,Zt=this.radius,zt=Math.abs($t.x-Nt[0]),ee=Math.abs($t.y-Nt[1]);if(zt>Ht+Zt||ee>It+Zt)return!1;if(zt<=Ht||ee<=It)return!0;const ye=zt-Ht,Ee=ee-It;return ye*ye+Ee*Ee<=this.radiusSquared}else{const Nt=this.center;if(Tt.collidesPoint(Nt))return!0;const Ht=Tt.vertices;return this.collidesLine({x:Ht[0],y:Ht[1]},{x:Ht[2],y:Ht[3]})||this.collidesLine({x:Ht[2],y:Ht[3]},{x:Ht[4],y:Ht[5]})||this.collidesLine({x:Ht[4],y:Ht[5]},{x:Ht[6],y:Ht[7]})||this.collidesLine({x:Ht[6],y:Ht[7]},{x:Ht[0],y:Ht[1]})}}collidesPolygon(Tt){const Nt=this.center;if(Tt.collidesPoint(Nt))return!0;const Ht=Tt.vertices,It=Ht.length;for(let $t=0;$t<It-2;$t+=2)if(this.collidesLine({x:Ht[$t],y:Ht[$t+1]},{x:Ht[$t+2],y:Ht[$t+3]}))return!0;return this.collidesLine({x:Ht[0],y:Ht[1]},{x:Ht[It-2],y:Ht[It-1]})}}return{Shape:L,Rectangle:H,Polygon:Z,Circle:dt}}(),vs=Bl,Yi=class{constructor(L,H,Z="Rectangle"){this.gameRef=L,this.sprite=this.gameRef.PIXI.app.stage.addChild(H),this.x=this.sprite.x,this.y=this.sprite.y,this.collisionShape=Z,this.intersects=new vs[this.collisionShape](this.sprite),this.gameRef.PIXI.app.ticker.add(this.tickerFn,this)}tickerFn(){this.sprite.x=this.x-this.gameRef.PIXI.camera.x,this.sprite.y=this.y-this.gameRef.PIXI.camera.y}collides(L){return this.intersects[`collides${L.collisionShape}`](L.intersects)}remove(L){if(this.x=this.y=1/0,this.sprite.parent.removeChild(this.sprite),Array.isArray(L)){const H=L.indexOf(this);H!==-1&&L.splice(H,1)}else typeof L=="object"&&delete this}static remove(L,H){L.remove(H)}},_s=A(_({},Js),{initIntervalBasedManagers:!1,pixi:{app:null}}),Dc=(X=class extends ys{constructor(L){if(super(L),this.config=X.configManager.parse(L),!this.config.pixi.app)throw new Error(`No PIXI app was provided in config: ${JSON.stringify(this.config)}`);const H=this.config.pixi.app;this.PIXI={app:H,camera:{x:0,y:0}},this.keyManager=new Nr({autoAddInterval:!0,pixiApp:this.PIXI.app}),this.eventManager=new Er({autoAddInterval:!0,pixiApp:this.PIXI.app})}addSprite(L,H="Rectangle"){return new Yi(this,L,H)}},X.configManager=new ir(_s),X);yt();/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/if(typeof j.exports=="object"&&typeof Y=="object"){var Fa=(L,H,Z,dt)=>{if(H&&typeof H=="object"||typeof H=="function")for(let bt of Object.getOwnPropertyNames(H))!Object.prototype.hasOwnProperty.call(L,bt)&&bt!==Z&&Object.defineProperty(L,bt,{get:()=>H[bt],enumerable:!(dt=Object.getOwnPropertyDescriptor(H,bt))||dt.enumerable});return L};j.exports=Fa(j.exports,Y)}return j.exports})},6729:function(at){"use strict";var I=Object.prototype.hasOwnProperty,w="~";function b(){}Object.create&&(b.prototype=Object.create(null),new b().__proto__||(w=!1));function D(m,p,v){this.fn=m,this.context=p,this.once=v||!1}function M(m,p,v,y,T){if(typeof v!="function")throw new TypeError("The listener must be a function");var _=new D(v,y||m,T),A=w?w+p:p;return m._events[A]?m._events[A].fn?m._events[A]=[m._events[A],_]:m._events[A].push(_):(m._events[A]=_,m._eventsCount++),m}function O(m,p){--m._eventsCount===0?m._events=new b:delete m._events[p]}function C(){this._events=new b,this._eventsCount=0}C.prototype.eventNames=function(){var p=[],v,y;if(this._eventsCount===0)return p;for(y in v=this._events)I.call(v,y)&&p.push(w?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(v)):p},C.prototype.listeners=function(p){var v=w?w+p:p,y=this._events[v];if(!y)return[];if(y.fn)return[y.fn];for(var T=0,_=y.length,A=new Array(_);T<_;T++)A[T]=y[T].fn;return A},C.prototype.listenerCount=function(p){var v=w?w+p:p,y=this._events[v];return y?y.fn?1:y.length:0},C.prototype.emit=function(p,v,y,T,_,A){var P=w?w+p:p;if(!this._events[P])return!1;var x=this._events[P],B=arguments.length,G,k;if(x.fn){switch(x.once&&this.removeListener(p,x.fn,void 0,!0),B){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,v),!0;case 3:return x.fn.call(x.context,v,y),!0;case 4:return x.fn.call(x.context,v,y,T),!0;case 5:return x.fn.call(x.context,v,y,T,_),!0;case 6:return x.fn.call(x.context,v,y,T,_,A),!0}for(k=1,G=new Array(B-1);k<B;k++)G[k-1]=arguments[k];x.fn.apply(x.context,G)}else{var X=x.length,Y;for(k=0;k<X;k++)switch(x[k].once&&this.removeListener(p,x[k].fn,void 0,!0),B){case 1:x[k].fn.call(x[k].context);break;case 2:x[k].fn.call(x[k].context,v);break;case 3:x[k].fn.call(x[k].context,v,y);break;case 4:x[k].fn.call(x[k].context,v,y,T);break;default:if(!G)for(Y=1,G=new Array(B-1);Y<B;Y++)G[Y-1]=arguments[Y];x[k].fn.apply(x[k].context,G)}}return!0},C.prototype.on=function(p,v,y){return M(this,p,v,y,!1)},C.prototype.once=function(p,v,y){return M(this,p,v,y,!0)},C.prototype.removeListener=function(p,v,y,T){var _=w?w+p:p;if(!this._events[_])return this;if(!v)return O(this,_),this;var A=this._events[_];if(A.fn)A.fn===v&&(!T||A.once)&&(!y||A.context===y)&&O(this,_);else{for(var P=0,x=[],B=A.length;P<B;P++)(A[P].fn!==v||T&&!A[P].once||y&&A[P].context!==y)&&x.push(A[P]);x.length?this._events[_]=x.length===1?x[0]:x:O(this,_)}return this},C.prototype.removeAllListeners=function(p){var v;return p?(v=w?w+p:p,this._events[v]&&O(this,v)):(this._events=new b,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=w,C.EventEmitter=C,at.exports=C},7648:function(at){"use strict";var I="Function.prototype.bind called on incompatible ",w=Object.prototype.toString,b=Math.max,D="[object Function]",M=function(p,v){for(var y=[],T=0;T<p.length;T+=1)y[T]=p[T];for(var _=0;_<v.length;_+=1)y[_+p.length]=v[_];return y},O=function(p,v){for(var y=[],T=v||0,_=0;T<p.length;T+=1,_+=1)y[_]=p[T];return y},C=function(m,p){for(var v="",y=0;y<m.length;y+=1)v+=m[y],y+1<m.length&&(v+=p);return v};at.exports=function(p){var v=this;if(typeof v!="function"||w.apply(v)!==D)throw new TypeError(I+v);for(var y=O(arguments,1),T,_=function(){if(this instanceof T){var G=v.apply(this,M(y,arguments));return Object(G)===G?G:this}return v.apply(p,M(y,arguments))},A=b(0,v.length-y.length),P=[],x=0;x<A;x++)P[x]="$"+x;if(T=Function("binder","return function ("+C(P,",")+"){ return binder.apply(this,arguments); }")(_),v.prototype){var B=function(){};B.prototype=v.prototype,T.prototype=new B,B.prototype=null}return T}},8612:function(at,I,w){"use strict";var b=w(7648);at.exports=Function.prototype.bind||b},210:function(at,I,w){"use strict";var b,D=SyntaxError,M=Function,O=TypeError,C=function(xt){try{return M('"use strict"; return ('+xt+").constructor;")()}catch(At){}},m=Object.getOwnPropertyDescriptor;if(m)try{m({},"")}catch(xt){m=null}var p=function(){throw new O},v=m?function(){try{return arguments.callee,p}catch(xt){try{return m(arguments,"callee").get}catch(At){return p}}}():p,y=w(1405)(),T=w(8185)(),_=Object.getPrototypeOf||(T?function(xt){return xt.__proto__}:null),A={},P=typeof Uint8Array=="undefined"||!_?b:_(Uint8Array),x={"%AggregateError%":typeof AggregateError=="undefined"?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?b:ArrayBuffer,"%ArrayIteratorPrototype%":y&&_?_([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics=="undefined"?b:Atomics,"%BigInt%":typeof BigInt=="undefined"?b:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?b:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?b:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?b:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?b:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?b:FinalizationRegistry,"%Function%":M,"%GeneratorFunction%":A,"%Int8Array%":typeof Int8Array=="undefined"?b:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?b:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&_?_(_([][Symbol.iterator]())):b,"%JSON%":typeof JSON=="object"?JSON:b,"%Map%":typeof Map=="undefined"?b:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!y||!_?b:_(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?b:Promise,"%Proxy%":typeof Proxy=="undefined"?b:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?b:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?b:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!y||!_?b:_(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&_?_(""[Symbol.iterator]()):b,"%Symbol%":y?Symbol:b,"%SyntaxError%":D,"%ThrowTypeError%":v,"%TypedArray%":P,"%TypeError%":O,"%Uint8Array%":typeof Uint8Array=="undefined"?b:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?b:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?b:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?b:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?b:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?b:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?b:WeakSet};if(_)try{null.error}catch(xt){var B=_(_(xt));x["%Error.prototype%"]=B}var G=function xt(At){var J;if(At==="%AsyncFunction%")J=C("async function () {}");else if(At==="%GeneratorFunction%")J=C("function* () {}");else if(At==="%AsyncGeneratorFunction%")J=C("async function* () {}");else if(At==="%AsyncGenerator%"){var ot=xt("%AsyncGeneratorFunction%");ot&&(J=ot.prototype)}else if(At==="%AsyncIteratorPrototype%"){var q=xt("%AsyncGenerator%");q&&_&&(J=_(q.prototype))}return x[At]=J,J},k={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},X=w(8612),Y=w(8824),j=X.call(Function.call,Array.prototype.concat),st=X.call(Function.apply,Array.prototype.splice),tt=X.call(Function.call,String.prototype.replace),rt=X.call(Function.call,String.prototype.slice),ct=X.call(Function.call,RegExp.prototype.exec),pt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rt=/\\(\\)?/g,Lt=function(At){var J=rt(At,0,1),ot=rt(At,-1);if(J==="%"&&ot!=="%")throw new D("invalid intrinsic syntax, expected closing `%`");if(ot==="%"&&J!=="%")throw new D("invalid intrinsic syntax, expected opening `%`");var q=[];return tt(At,pt,function(gt,yt,et,ht){q[q.length]=et?tt(ht,Rt,"$1"):yt||gt}),q},ut=function(At,J){var ot=At,q;if(Y(k,ot)&&(q=k[ot],ot="%"+q[0]+"%"),Y(x,ot)){var gt=x[ot];if(gt===A&&(gt=G(ot)),typeof gt=="undefined"&&!J)throw new O("intrinsic "+At+" exists, but is not available. Please file an issue!");return{alias:q,name:ot,value:gt}}throw new D("intrinsic "+At+" does not exist!")};at.exports=function(At,J){if(typeof At!="string"||At.length===0)throw new O("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof J!="boolean")throw new O('"allowMissing" argument must be a boolean');if(ct(/^%?[^%]*%?$/,At)===null)throw new D("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ot=Lt(At),q=ot.length>0?ot[0]:"",gt=ut("%"+q+"%",J),yt=gt.name,et=gt.value,ht=!1,Et=gt.alias;Et&&(q=Et[0],st(ot,j([0,1],Et)));for(var kt=1,Ft=!0;kt<ot.length;kt+=1){var Bt=ot[kt],Gt=rt(Bt,0,1),Ct=rt(Bt,-1);if((Gt==='"'||Gt==="'"||Gt==="`"||Ct==='"'||Ct==="'"||Ct==="`")&&Gt!==Ct)throw new D("property names with quotes must have matching quotes");if((Bt==="constructor"||!Ft)&&(ht=!0),q+="."+Bt,yt="%"+q+"%",Y(x,yt))et=x[yt];else if(et!=null){if(!(Bt in et)){if(!J)throw new O("base intrinsic for "+At+" exists, but the property is not available.");return}if(m&&kt+1>=ot.length){var jt=m(et,Bt);Ft=!!jt,Ft&&"get"in jt&&!("originalValue"in jt.get)?et=jt.get:et=et[Bt]}else Ft=Y(et,Bt),et=et[Bt];Ft&&!ht&&(x[yt]=et)}}return et}},7296:function(at,I,w){"use strict";var b=w(210),D=b("%Object.getOwnPropertyDescriptor%",!0);if(D)try{D([],"length")}catch(M){D=null}at.exports=D},1044:function(at,I,w){"use strict";var b=w(210),D=b("%Object.defineProperty%",!0),M=function(){if(D)try{return D({},"a",{value:1}),!0}catch(C){return!1}return!1};M.hasArrayLengthDefineBug=function(){if(!M())return null;try{return D([],"length",{value:1}).length!==1}catch(C){return!0}},at.exports=M},8185:function(at){"use strict";var I={foo:{}},w=Object;at.exports=function(){return{__proto__:I}.foo===I.foo&&!({__proto__:null}instanceof w)}},1405:function(at,I,w){"use strict";var b=typeof Symbol!="undefined"&&Symbol,D=w(5419);at.exports=function(){return typeof b!="function"||typeof Symbol!="function"||typeof b("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:D()}},5419:function(at){"use strict";at.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var w={},b=Symbol("test"),D=Object(b);if(typeof b=="string"||Object.prototype.toString.call(b)!=="[object Symbol]"||Object.prototype.toString.call(D)!=="[object Symbol]")return!1;var M=42;w[b]=M;for(b in w)return!1;if(typeof Object.keys=="function"&&Object.keys(w).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(w).length!==0)return!1;var O=Object.getOwnPropertySymbols(w);if(O.length!==1||O[0]!==b||!Object.prototype.propertyIsEnumerable.call(w,b))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var C=Object.getOwnPropertyDescriptor(w,b);if(C.value!==M||C.enumerable!==!0)return!1}return!0}},8824:function(at,I,w){"use strict";var b=Function.prototype.call,D=Object.prototype.hasOwnProperty,M=w(8612);at.exports=M.call(b,D)},631:function(at,I,w){var b=typeof Map=="function"&&Map.prototype,D=Object.getOwnPropertyDescriptor&&b?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,M=b&&D&&typeof D.get=="function"?D.get:null,O=b&&Map.prototype.forEach,C=typeof Set=="function"&&Set.prototype,m=Object.getOwnPropertyDescriptor&&C?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=C&&m&&typeof m.get=="function"?m.get:null,v=C&&Set.prototype.forEach,y=typeof WeakMap=="function"&&WeakMap.prototype,T=y?WeakMap.prototype.has:null,_=typeof WeakSet=="function"&&WeakSet.prototype,A=_?WeakSet.prototype.has:null,P=typeof WeakRef=="function"&&WeakRef.prototype,x=P?WeakRef.prototype.deref:null,B=Boolean.prototype.valueOf,G=Object.prototype.toString,k=Function.prototype.toString,X=String.prototype.match,Y=String.prototype.slice,j=String.prototype.replace,st=String.prototype.toUpperCase,tt=String.prototype.toLowerCase,rt=RegExp.prototype.test,ct=Array.prototype.concat,pt=Array.prototype.join,Rt=Array.prototype.slice,Lt=Math.floor,ut=typeof BigInt=="function"?BigInt.prototype.valueOf:null,xt=Object.getOwnPropertySymbols,At=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,J=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ot=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===J||"symbol")?Symbol.toStringTag:null,q=Object.prototype.propertyIsEnumerable,gt=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(wt){return wt.__proto__}:null);function yt(wt,Mt){if(wt===1/0||wt===-1/0||wt!==wt||wt&&wt>-1e3&&wt<1e3||rt.call(/e/,Mt))return Mt;var Xe=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof wt=="number"){var Ke=wt<0?-Lt(-wt):Lt(wt);if(Ke!==wt){var gr=String(Ke),Ae=Y.call(Mt,gr.length+1);return j.call(gr,Xe,"$&_")+"."+j.call(j.call(Ae,/([0-9]{3})/g,"$&_"),/_$/,"")}}return j.call(Mt,Xe,"$&_")}var et=w(4654),ht=et.custom,Et=ue(ht)?ht:null;at.exports=function wt(Mt,Xe,Ke,gr){var Ae=Xe||{};if(oe(Ae,"quoteStyle")&&Ae.quoteStyle!=="single"&&Ae.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(oe(Ae,"maxStringLength")&&(typeof Ae.maxStringLength=="number"?Ae.maxStringLength<0&&Ae.maxStringLength!==1/0:Ae.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ci=oe(Ae,"customInspect")?Ae.customInspect:!0;if(typeof ci!="boolean"&&ci!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(oe(Ae,"indent")&&Ae.indent!==null&&Ae.indent!=="	"&&!(parseInt(Ae.indent,10)===Ae.indent&&Ae.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(oe(Ae,"numericSeparator")&&typeof Ae.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var V=Ae.numericSeparator;if(typeof Mt=="undefined")return"undefined";if(Mt===null)return"null";if(typeof Mt=="boolean")return Mt?"true":"false";if(typeof Mt=="string")return hi(Mt,Ae);if(typeof Mt=="number"){if(Mt===0)return 1/0/Mt>0?"0":"-0";var K=String(Mt);return V?yt(Mt,K):K}if(typeof Mt=="bigint"){var nt=String(Mt)+"n";return V?yt(Mt,nt):nt}var St=typeof Ae.depth=="undefined"?5:Ae.depth;if(typeof Ke=="undefined"&&(Ke=0),Ke>=St&&St>0&&typeof Mt=="object")return Bt(Mt)?"[Array]":"[Object]";var Ot=rs(Ae,Ke);if(typeof gr=="undefined")gr=[];else if(kr(gr,Mt)>=0)return"[Circular]";function Xt(Gi,is,$o){if(is&&(gr=Rt.call(gr),gr.push(is)),$o){var gs={depth:Ae.depth};return oe(Ae,"quoteStyle")&&(gs.quoteStyle=Ae.quoteStyle),wt(Gi,gs,Ke+1,gr)}return wt(Gi,Ae,Ke+1,gr)}if(typeof Mt=="function"&&!Ct(Mt)){var se=Fr(Mt),Se=Fi(Mt,Xt);return"[Function"+(se?": "+se:" (anonymous)")+"]"+(Se.length>0?" { "+pt.call(Se,", ")+" }":"")}if(ue(Mt)){var ge=J?j.call(String(Mt),/^(Symbol\(.*\))_[^)]*$/,"$1"):At.call(Mt);return typeof Mt=="object"&&!J?dr(ge):ge}if(Li(Mt)){for(var Ue="<"+tt.call(String(Mt.nodeName)),We=Mt.attributes||[],ir=0;ir<We.length;ir++)Ue+=" "+We[ir].name+"="+kt(Ft(We[ir].value),"double",Ae);return Ue+=">",Mt.childNodes&&Mt.childNodes.length&&(Ue+="..."),Ue+="</"+tt.call(String(Mt.nodeName))+">",Ue}if(Bt(Mt)){if(Mt.length===0)return"[]";var Ve=Fi(Mt,Xt);return Ot&&!ms(Ve)?"["+Ar(Ve,Ot)+"]":"[ "+pt.call(Ve,", ")+" ]"}if(jt(Mt)){var Nr=Fi(Mt,Xt);return!("cause"in Error.prototype)&&"cause"in Mt&&!q.call(Mt,"cause")?"{ ["+String(Mt)+"] "+pt.call(ct.call("[cause]: "+Xt(Mt.cause),Nr),", ")+" }":Nr.length===0?"["+String(Mt)+"]":"{ ["+String(Mt)+"] "+pt.call(Nr,", ")+" }"}if(typeof Mt=="object"&&ci){if(Et&&typeof Mt[Et]=="function"&&et)return et(Mt,{depth:St-Ke});if(ci!=="symbol"&&typeof Mt.inspect=="function")return Mt.inspect()}if(ui(Mt)){var er=[];return O&&O.call(Mt,function(Gi,is){er.push(Xt(is,Mt,!0)+" => "+Xt(Gi,Mt))}),bi("Map",M.call(Mt),er,Ot)}if(Oi(Mt)){var Er=[];return v&&v.call(Mt,function(Gi){Er.push(Xt(Gi,Mt))}),bi("Set",p.call(Mt),Er,Ot)}if(Ti(Mt))return Si("WeakMap");if(Fe(Mt))return Si("WeakSet");if(Ei(Mt))return Si("WeakRef");if(ne(Mt))return dr(Xt(Number(Mt)));if(Oe(Mt))return dr(Xt(ut.call(Mt)));if(me(Mt))return dr(B.call(Mt));if(Kt(Mt))return dr(Xt(String(Mt)));if(typeof window!="undefined"&&Mt===window)return"{ [object Window] }";if(Mt===w.g)return"{ [object globalThis] }";if(!Gt(Mt)&&!Ct(Mt)){var ur=Fi(Mt,Xt),fi=gt?gt(Mt)===Object.prototype:Mt instanceof Object||Mt.constructor===Object,or=Mt instanceof Object?"":"null prototype",di=!fi&&ot&&Object(Mt)===Mt&&ot in Mt?Y.call(Le(Mt),8,-1):or?"Object":"",qr=fi||typeof Mt.constructor!="function"?"":Mt.constructor.name?Mt.constructor.name+" ":"",Ai=qr+(di||or?"["+pt.call(ct.call([],di||[],or||[]),": ")+"] ":"");return ur.length===0?Ai+"{}":Ot?Ai+"{"+Ar(ur,Ot)+"}":Ai+"{ "+pt.call(ur,", ")+" }"}return String(Mt)};function kt(wt,Mt,Xe){var Ke=(Xe.quoteStyle||Mt)==="double"?'"':"'";return Ke+wt+Ke}function Ft(wt){return j.call(String(wt),/"/g,"&quot;")}function Bt(wt){return Le(wt)==="[object Array]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function Gt(wt){return Le(wt)==="[object Date]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function Ct(wt){return Le(wt)==="[object RegExp]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function jt(wt){return Le(wt)==="[object Error]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function Kt(wt){return Le(wt)==="[object String]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function ne(wt){return Le(wt)==="[object Number]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function me(wt){return Le(wt)==="[object Boolean]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function ue(wt){if(J)return wt&&typeof wt=="object"&&wt instanceof Symbol;if(typeof wt=="symbol")return!0;if(!wt||typeof wt!="object"||!At)return!1;try{return At.call(wt),!0}catch(Mt){}return!1}function Oe(wt){if(!wt||typeof wt!="object"||!ut)return!1;try{return ut.call(wt),!0}catch(Mt){}return!1}var de=Object.prototype.hasOwnProperty||function(wt){return wt in this};function oe(wt,Mt){return de.call(wt,Mt)}function Le(wt){return G.call(wt)}function Fr(wt){if(wt.name)return wt.name;var Mt=X.call(k.call(wt),/^function\s*([\w$]+)/);return Mt?Mt[1]:null}function kr(wt,Mt){if(wt.indexOf)return wt.indexOf(Mt);for(var Xe=0,Ke=wt.length;Xe<Ke;Xe++)if(wt[Xe]===Mt)return Xe;return-1}function ui(wt){if(!M||!wt||typeof wt!="object")return!1;try{M.call(wt);try{p.call(wt)}catch(Mt){return!0}return wt instanceof Map}catch(Mt){}return!1}function Ti(wt){if(!T||!wt||typeof wt!="object")return!1;try{T.call(wt,T);try{A.call(wt,A)}catch(Mt){return!0}return wt instanceof WeakMap}catch(Mt){}return!1}function Ei(wt){if(!x||!wt||typeof wt!="object")return!1;try{return x.call(wt),!0}catch(Mt){}return!1}function Oi(wt){if(!p||!wt||typeof wt!="object")return!1;try{p.call(wt);try{M.call(wt)}catch(Mt){return!0}return wt instanceof Set}catch(Mt){}return!1}function Fe(wt){if(!A||!wt||typeof wt!="object")return!1;try{A.call(wt,A);try{T.call(wt,T)}catch(Mt){return!0}return wt instanceof WeakSet}catch(Mt){}return!1}function Li(wt){return!wt||typeof wt!="object"?!1:typeof HTMLElement!="undefined"&&wt instanceof HTMLElement?!0:typeof wt.nodeName=="string"&&typeof wt.getAttribute=="function"}function hi(wt,Mt){if(wt.length>Mt.maxStringLength){var Xe=wt.length-Mt.maxStringLength,Ke="... "+Xe+" more character"+(Xe>1?"s":"");return hi(Y.call(wt,0,Mt.maxStringLength),Mt)+Ke}var gr=j.call(j.call(wt,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Xr);return kt(gr,"single",Mt)}function Xr(wt){var Mt=wt.charCodeAt(0),Xe={8:"b",9:"t",10:"n",12:"f",13:"r"}[Mt];return Xe?"\\"+Xe:"\\x"+(Mt<16?"0":"")+st.call(Mt.toString(16))}function dr(wt){return"Object("+wt+")"}function Si(wt){return wt+" { ? }"}function bi(wt,Mt,Xe,Ke){var gr=Ke?Ar(Xe,Ke):pt.call(Xe,", ");return wt+" ("+Mt+") {"+gr+"}"}function ms(wt){for(var Mt=0;Mt<wt.length;Mt++)if(kr(wt[Mt],`
`)>=0)return!1;return!0}function rs(wt,Mt){var Xe;if(wt.indent==="	")Xe="	";else if(typeof wt.indent=="number"&&wt.indent>0)Xe=pt.call(Array(wt.indent+1)," ");else return null;return{base:Xe,prev:pt.call(Array(Mt+1),Xe)}}function Ar(wt,Mt){if(wt.length===0)return"";var Xe=`
`+Mt.prev+Mt.base;return Xe+pt.call(wt,","+Xe)+`
`+Mt.prev}function Fi(wt,Mt){var Xe=Bt(wt),Ke=[];if(Xe){Ke.length=wt.length;for(var gr=0;gr<wt.length;gr++)Ke[gr]=oe(wt,gr)?Mt(wt[gr],wt):""}var Ae=typeof xt=="function"?xt(wt):[],ci;if(J){ci={};for(var V=0;V<Ae.length;V++)ci["$"+Ae[V]]=Ae[V]}for(var K in wt)oe(wt,K)&&(Xe&&String(Number(K))===K&&K<wt.length||J&&ci["$"+K]instanceof Symbol||(rt.call(/[^\w$]/,K)?Ke.push(Mt(K,wt)+": "+Mt(wt[K],wt)):Ke.push(K+": "+Mt(wt[K],wt))));if(typeof xt=="function")for(var nt=0;nt<Ae.length;nt++)q.call(wt,Ae[nt])&&Ke.push("["+Mt(Ae[nt])+"]: "+Mt(wt[Ae[nt]],wt));return Ke}},2703:function(at,I,w){"use strict";var b=w(414);function D(){}function M(){}M.resetWarningCache=D,at.exports=function(){function O(p,v,y,T,_,A){if(A!==b){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}O.isRequired=O;function C(){return O}var m={array:O,bigint:O,bool:O,func:O,number:O,object:O,string:O,symbol:O,any:O,arrayOf:C,element:O,elementType:O,instanceOf:C,node:O,objectOf:C,oneOf:C,oneOfType:C,shape:C,exact:C,checkPropTypes:M,resetWarningCache:D};return m.PropTypes=m,m}},5697:function(at,I,w){if(!1)var b,D;else at.exports=w(2703)()},414:function(at){"use strict";var I="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";at.exports=I},5798:function(at){"use strict";var I=String.prototype.replace,w=/%20/g,b={RFC1738:"RFC1738",RFC3986:"RFC3986"};at.exports={default:b.RFC3986,formatters:{RFC1738:function(D){return I.call(D,w,"+")},RFC3986:function(D){return String(D)}},RFC1738:b.RFC1738,RFC3986:b.RFC3986}},129:function(at,I,w){"use strict";var b=w(8261),D=w(5235),M=w(5798);at.exports={formats:M,parse:D,stringify:b}},5235:function(at,I,w){"use strict";var b=w(2769),D=Object.prototype.hasOwnProperty,M=Array.isArray,O={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:b.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},C=function(P){return P.replace(/&#(\d+);/g,function(x,B){return String.fromCharCode(parseInt(B,10))})},m=function(P,x){return P&&typeof P=="string"&&x.comma&&P.indexOf(",")>-1?P.split(","):P},p="utf8=%26%2310003%3B",v="utf8=%E2%9C%93",y=function(x,B){var G={__proto__:null},k=B.ignoreQueryPrefix?x.replace(/^\?/,""):x,X=B.parameterLimit===1/0?void 0:B.parameterLimit,Y=k.split(B.delimiter,X),j=-1,st,tt=B.charset;if(B.charsetSentinel)for(st=0;st<Y.length;++st)Y[st].indexOf("utf8=")===0&&(Y[st]===v?tt="utf-8":Y[st]===p&&(tt="iso-8859-1"),j=st,st=Y.length);for(st=0;st<Y.length;++st)if(st!==j){var rt=Y[st],ct=rt.indexOf("]="),pt=ct===-1?rt.indexOf("="):ct+1,Rt,Lt;pt===-1?(Rt=B.decoder(rt,O.decoder,tt,"key"),Lt=B.strictNullHandling?null:""):(Rt=B.decoder(rt.slice(0,pt),O.decoder,tt,"key"),Lt=b.maybeMap(m(rt.slice(pt+1),B),function(ut){return B.decoder(ut,O.decoder,tt,"value")})),Lt&&B.interpretNumericEntities&&tt==="iso-8859-1"&&(Lt=C(Lt)),rt.indexOf("[]=")>-1&&(Lt=M(Lt)?[Lt]:Lt),D.call(G,Rt)?G[Rt]=b.combine(G[Rt],Lt):G[Rt]=Lt}return G},T=function(P,x,B,G){for(var k=G?x:m(x,B),X=P.length-1;X>=0;--X){var Y,j=P[X];if(j==="[]"&&B.parseArrays)Y=[].concat(k);else{Y=B.plainObjects?Object.create(null):{};var st=j.charAt(0)==="["&&j.charAt(j.length-1)==="]"?j.slice(1,-1):j,tt=parseInt(st,10);!B.parseArrays&&st===""?Y={0:k}:!isNaN(tt)&&j!==st&&String(tt)===st&&tt>=0&&B.parseArrays&&tt<=B.arrayLimit?(Y=[],Y[tt]=k):st!=="__proto__"&&(Y[st]=k)}k=Y}return k},_=function(x,B,G,k){if(x){var X=G.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x,Y=/(\[[^[\]]*])/,j=/(\[[^[\]]*])/g,st=G.depth>0&&Y.exec(X),tt=st?X.slice(0,st.index):X,rt=[];if(tt){if(!G.plainObjects&&D.call(Object.prototype,tt)&&!G.allowPrototypes)return;rt.push(tt)}for(var ct=0;G.depth>0&&(st=j.exec(X))!==null&&ct<G.depth;){if(ct+=1,!G.plainObjects&&D.call(Object.prototype,st[1].slice(1,-1))&&!G.allowPrototypes)return;rt.push(st[1])}return st&&rt.push("["+X.slice(st.index)+"]"),T(rt,B,G,k)}},A=function(x){if(!x)return O;if(x.decoder!==null&&x.decoder!==void 0&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset!="undefined"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var B=typeof x.charset=="undefined"?O.charset:x.charset;return{allowDots:typeof x.allowDots=="undefined"?O.allowDots:!!x.allowDots,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:O.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:O.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:O.arrayLimit,charset:B,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:O.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:O.comma,decoder:typeof x.decoder=="function"?x.decoder:O.decoder,delimiter:typeof x.delimiter=="string"||b.isRegExp(x.delimiter)?x.delimiter:O.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:O.depth,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:O.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:O.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:O.plainObjects,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:O.strictNullHandling}};at.exports=function(P,x){var B=A(x);if(P===""||P===null||typeof P=="undefined")return B.plainObjects?Object.create(null):{};for(var G=typeof P=="string"?y(P,B):P,k=B.plainObjects?Object.create(null):{},X=Object.keys(G),Y=0;Y<X.length;++Y){var j=X[Y],st=_(j,G[j],B,typeof P=="string");k=b.merge(k,st,B)}return B.allowSparse===!0?k:b.compact(k)}},8261:function(at,I,w){"use strict";var b=w(7478),D=w(2769),M=w(5798),O=Object.prototype.hasOwnProperty,C={brackets:function(k){return k+"[]"},comma:"comma",indices:function(k,X){return k+"["+X+"]"},repeat:function(k){return k}},m=Array.isArray,p=Array.prototype.push,v=function(G,k){p.apply(G,m(k)?k:[k])},y=Date.prototype.toISOString,T=M.default,_={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:D.encode,encodeValuesOnly:!1,format:T,formatter:M.formatters[T],indices:!1,serializeDate:function(k){return y.call(k)},skipNulls:!1,strictNullHandling:!1},A=function(k){return typeof k=="string"||typeof k=="number"||typeof k=="boolean"||typeof k=="symbol"||typeof k=="bigint"},P={},x=function G(k,X,Y,j,st,tt,rt,ct,pt,Rt,Lt,ut,xt,At,J,ot){for(var q=k,gt=ot,yt=0,et=!1;(gt=gt.get(P))!==void 0&&!et;){var ht=gt.get(k);if(yt+=1,typeof ht!="undefined"){if(ht===yt)throw new RangeError("Cyclic object value");et=!0}typeof gt.get(P)=="undefined"&&(yt=0)}if(typeof ct=="function"?q=ct(X,q):q instanceof Date?q=Lt(q):Y==="comma"&&m(q)&&(q=D.maybeMap(q,function(ue){return ue instanceof Date?Lt(ue):ue})),q===null){if(st)return rt&&!At?rt(X,_.encoder,J,"key",ut):X;q=""}if(A(q)||D.isBuffer(q)){if(rt){var Et=At?X:rt(X,_.encoder,J,"key",ut);return[xt(Et)+"="+xt(rt(q,_.encoder,J,"value",ut))]}return[xt(X)+"="+xt(String(q))]}var kt=[];if(typeof q=="undefined")return kt;var Ft;if(Y==="comma"&&m(q))At&&rt&&(q=D.maybeMap(q,rt)),Ft=[{value:q.length>0?q.join(",")||null:void 0}];else if(m(ct))Ft=ct;else{var Bt=Object.keys(q);Ft=pt?Bt.sort(pt):Bt}for(var Gt=j&&m(q)&&q.length===1?X+"[]":X,Ct=0;Ct<Ft.length;++Ct){var jt=Ft[Ct],Kt=typeof jt=="object"&&typeof jt.value!="undefined"?jt.value:q[jt];if(!(tt&&Kt===null)){var ne=m(q)?typeof Y=="function"?Y(Gt,jt):Gt:Gt+(Rt?"."+jt:"["+jt+"]");ot.set(k,yt);var me=b();me.set(P,ot),v(kt,G(Kt,ne,Y,j,st,tt,Y==="comma"&&At&&m(q)?null:rt,ct,pt,Rt,Lt,ut,xt,At,J,me))}}return kt},B=function(k){if(!k)return _;if(k.encoder!==null&&typeof k.encoder!="undefined"&&typeof k.encoder!="function")throw new TypeError("Encoder has to be a function.");var X=k.charset||_.charset;if(typeof k.charset!="undefined"&&k.charset!=="utf-8"&&k.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Y=M.default;if(typeof k.format!="undefined"){if(!O.call(M.formatters,k.format))throw new TypeError("Unknown format option provided.");Y=k.format}var j=M.formatters[Y],st=_.filter;return(typeof k.filter=="function"||m(k.filter))&&(st=k.filter),{addQueryPrefix:typeof k.addQueryPrefix=="boolean"?k.addQueryPrefix:_.addQueryPrefix,allowDots:typeof k.allowDots=="undefined"?_.allowDots:!!k.allowDots,charset:X,charsetSentinel:typeof k.charsetSentinel=="boolean"?k.charsetSentinel:_.charsetSentinel,delimiter:typeof k.delimiter=="undefined"?_.delimiter:k.delimiter,encode:typeof k.encode=="boolean"?k.encode:_.encode,encoder:typeof k.encoder=="function"?k.encoder:_.encoder,encodeValuesOnly:typeof k.encodeValuesOnly=="boolean"?k.encodeValuesOnly:_.encodeValuesOnly,filter:st,format:Y,formatter:j,serializeDate:typeof k.serializeDate=="function"?k.serializeDate:_.serializeDate,skipNulls:typeof k.skipNulls=="boolean"?k.skipNulls:_.skipNulls,sort:typeof k.sort=="function"?k.sort:null,strictNullHandling:typeof k.strictNullHandling=="boolean"?k.strictNullHandling:_.strictNullHandling}};at.exports=function(G,k){var X=G,Y=B(k),j,st;typeof Y.filter=="function"?(st=Y.filter,X=st("",X)):m(Y.filter)&&(st=Y.filter,j=st);var tt=[];if(typeof X!="object"||X===null)return"";var rt;k&&k.arrayFormat in C?rt=k.arrayFormat:k&&"indices"in k?rt=k.indices?"indices":"repeat":rt="indices";var ct=C[rt];if(k&&"commaRoundTrip"in k&&typeof k.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var pt=ct==="comma"&&k&&k.commaRoundTrip;j||(j=Object.keys(X)),Y.sort&&j.sort(Y.sort);for(var Rt=b(),Lt=0;Lt<j.length;++Lt){var ut=j[Lt];Y.skipNulls&&X[ut]===null||v(tt,x(X[ut],ut,ct,pt,Y.strictNullHandling,Y.skipNulls,Y.encode?Y.encoder:null,Y.filter,Y.sort,Y.allowDots,Y.serializeDate,Y.format,Y.formatter,Y.encodeValuesOnly,Y.charset,Rt))}var xt=tt.join(Y.delimiter),At=Y.addQueryPrefix===!0?"?":"";return Y.charsetSentinel&&(Y.charset==="iso-8859-1"?At+="utf8=%26%2310003%3B&":At+="utf8=%E2%9C%93&"),xt.length>0?At+xt:""}},2769:function(at,I,w){"use strict";var b=w(5798),D=Object.prototype.hasOwnProperty,M=Array.isArray,O=function(){for(var G=[],k=0;k<256;++k)G.push("%"+((k<16?"0":"")+k.toString(16)).toUpperCase());return G}(),C=function(k){for(;k.length>1;){var X=k.pop(),Y=X.obj[X.prop];if(M(Y)){for(var j=[],st=0;st<Y.length;++st)typeof Y[st]!="undefined"&&j.push(Y[st]);X.obj[X.prop]=j}}},m=function(k,X){for(var Y=X&&X.plainObjects?Object.create(null):{},j=0;j<k.length;++j)typeof k[j]!="undefined"&&(Y[j]=k[j]);return Y},p=function G(k,X,Y){if(!X)return k;if(typeof X!="object"){if(M(k))k.push(X);else if(k&&typeof k=="object")(Y&&(Y.plainObjects||Y.allowPrototypes)||!D.call(Object.prototype,X))&&(k[X]=!0);else return[k,X];return k}if(!k||typeof k!="object")return[k].concat(X);var j=k;return M(k)&&!M(X)&&(j=m(k,Y)),M(k)&&M(X)?(X.forEach(function(st,tt){if(D.call(k,tt)){var rt=k[tt];rt&&typeof rt=="object"&&st&&typeof st=="object"?k[tt]=G(rt,st,Y):k.push(st)}else k[tt]=st}),k):Object.keys(X).reduce(function(st,tt){var rt=X[tt];return D.call(st,tt)?st[tt]=G(st[tt],rt,Y):st[tt]=rt,st},j)},v=function(k,X){return Object.keys(X).reduce(function(Y,j){return Y[j]=X[j],Y},k)},y=function(G,k,X){var Y=G.replace(/\+/g," ");if(X==="iso-8859-1")return Y.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Y)}catch(j){return Y}},T=function(k,X,Y,j,st){if(k.length===0)return k;var tt=k;if(typeof k=="symbol"?tt=Symbol.prototype.toString.call(k):typeof k!="string"&&(tt=String(k)),Y==="iso-8859-1")return escape(tt).replace(/%u[0-9a-f]{4}/gi,function(Rt){return"%26%23"+parseInt(Rt.slice(2),16)+"%3B"});for(var rt="",ct=0;ct<tt.length;++ct){var pt=tt.charCodeAt(ct);if(pt===45||pt===46||pt===95||pt===126||pt>=48&&pt<=57||pt>=65&&pt<=90||pt>=97&&pt<=122||st===b.RFC1738&&(pt===40||pt===41)){rt+=tt.charAt(ct);continue}if(pt<128){rt=rt+O[pt];continue}if(pt<2048){rt=rt+(O[192|pt>>6]+O[128|pt&63]);continue}if(pt<55296||pt>=57344){rt=rt+(O[224|pt>>12]+O[128|pt>>6&63]+O[128|pt&63]);continue}ct+=1,pt=65536+((pt&1023)<<10|tt.charCodeAt(ct)&1023),rt+=O[240|pt>>18]+O[128|pt>>12&63]+O[128|pt>>6&63]+O[128|pt&63]}return rt},_=function(k){for(var X=[{obj:{o:k},prop:"o"}],Y=[],j=0;j<X.length;++j)for(var st=X[j],tt=st.obj[st.prop],rt=Object.keys(tt),ct=0;ct<rt.length;++ct){var pt=rt[ct],Rt=tt[pt];typeof Rt=="object"&&Rt!==null&&Y.indexOf(Rt)===-1&&(X.push({obj:tt,prop:pt}),Y.push(Rt))}return C(X),k},A=function(k){return Object.prototype.toString.call(k)==="[object RegExp]"},P=function(k){return!k||typeof k!="object"?!1:!!(k.constructor&&k.constructor.isBuffer&&k.constructor.isBuffer(k))},x=function(k,X){return[].concat(k,X)},B=function(k,X){if(M(k)){for(var Y=[],j=0;j<k.length;j+=1)Y.push(X(k[j]));return Y}return X(k)};at.exports={arrayToObject:m,assign:v,combine:x,compact:_,decode:y,encode:T,isBuffer:P,isRegExp:A,maybeMap:B,merge:p}},4448:function(at,I,w){"use strict";/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=w(7294),D=w(3840);function M(d){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+d,R=1;R<arguments.length;R++)g+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+d+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O=new Set,C={};function m(d,g){p(d,g),p(d+"Capture",g)}function p(d,g){for(C[d]=g,d=0;d<g.length;d++)O.add(g[d])}var v=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),y=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},A={};function P(d){return y.call(A,d)?!0:y.call(_,d)?!1:T.test(d)?A[d]=!0:(_[d]=!0,!1)}function x(d,g,R,z){if(R!==null&&R.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return z?!1:R!==null?!R.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function B(d,g,R,z){if(g===null||typeof g=="undefined"||x(d,g,R,z))return!0;if(z)return!1;if(R!==null)switch(R.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function G(d,g,R,z,$,it,vt){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=z,this.attributeNamespace=$,this.mustUseProperty=R,this.propertyName=d,this.type=g,this.sanitizeURL=it,this.removeEmptyString=vt}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){k[d]=new G(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var g=d[0];k[g]=new G(g,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){k[d]=new G(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){k[d]=new G(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){k[d]=new G(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){k[d]=new G(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){k[d]=new G(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){k[d]=new G(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){k[d]=new G(d,5,!1,d.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function Y(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var g=d.replace(X,Y);k[g]=new G(g,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var g=d.replace(X,Y);k[g]=new G(g,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var g=d.replace(X,Y);k[g]=new G(g,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){k[d]=new G(d,1,!1,d.toLowerCase(),null,!1,!1)}),k.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){k[d]=new G(d,1,!1,d.toLowerCase(),null,!0,!0)});function j(d,g,R,z){var $=k.hasOwnProperty(g)?k[g]:null;($!==null?$.type!==0:z||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(B(g,R,$,z)&&(R=null),z||$===null?P(g)&&(R===null?d.removeAttribute(g):d.setAttribute(g,""+R)):$.mustUseProperty?d[$.propertyName]=R===null?$.type===3?!1:"":R:(g=$.attributeName,z=$.attributeNamespace,R===null?d.removeAttribute(g):($=$.type,R=$===3||$===4&&R===!0?"":""+R,z?d.setAttributeNS(z,g,R):d.setAttribute(g,R))))}var st=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tt=Symbol.for("react.element"),rt=Symbol.for("react.portal"),ct=Symbol.for("react.fragment"),pt=Symbol.for("react.strict_mode"),Rt=Symbol.for("react.profiler"),Lt=Symbol.for("react.provider"),ut=Symbol.for("react.context"),xt=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ot=Symbol.for("react.memo"),q=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var gt=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var yt=Symbol.iterator;function et(d){return d===null||typeof d!="object"?null:(d=yt&&d[yt]||d["@@iterator"],typeof d=="function"?d:null)}var ht=Object.assign,Et;function kt(d){if(Et===void 0)try{throw Error()}catch(R){var g=R.stack.trim().match(/\n( *(at )?)/);Et=g&&g[1]||""}return`
`+Et+d}var Ft=!1;function Bt(d,g){if(!d||Ft)return"";Ft=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Qt){var z=Qt}Reflect.construct(d,[],g)}else{try{g.call()}catch(Qt){z=Qt}d.call(g.prototype)}else{try{throw Error()}catch(Qt){z=Qt}d()}}catch(Qt){if(Qt&&z&&typeof Qt.stack=="string"){for(var $=Qt.stack.split(`
`),it=z.stack.split(`
`),vt=$.length-1,Ut=it.length-1;1<=vt&&0<=Ut&&$[vt]!==it[Ut];)Ut--;for(;1<=vt&&0<=Ut;vt--,Ut--)if($[vt]!==it[Ut]){if(vt!==1||Ut!==1)do if(vt--,Ut--,0>Ut||$[vt]!==it[Ut]){var Vt=`
`+$[vt].replace(" at new "," at ");return d.displayName&&Vt.includes("<anonymous>")&&(Vt=Vt.replace("<anonymous>",d.displayName)),Vt}while(1<=vt&&0<=Ut);break}}}finally{Ft=!1,Error.prepareStackTrace=R}return(d=d?d.displayName||d.name:"")?kt(d):""}function Gt(d){switch(d.tag){case 5:return kt(d.type);case 16:return kt("Lazy");case 13:return kt("Suspense");case 19:return kt("SuspenseList");case 0:case 2:case 15:return d=Bt(d.type,!1),d;case 11:return d=Bt(d.type.render,!1),d;case 1:return d=Bt(d.type,!0),d;default:return""}}function Ct(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case ct:return"Fragment";case rt:return"Portal";case Rt:return"Profiler";case pt:return"StrictMode";case At:return"Suspense";case J:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case ut:return(d.displayName||"Context")+".Consumer";case Lt:return(d._context.displayName||"Context")+".Provider";case xt:var g=d.render;return d=d.displayName,d||(d=g.displayName||g.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case ot:return g=d.displayName||null,g!==null?g:Ct(d.type)||"Memo";case q:g=d._payload,d=d._init;try{return Ct(d(g))}catch(R){}}return null}function jt(d){var g=d.type;switch(d.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=g.render,d=d.displayName||d.name||"",g.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ct(g);case 8:return g===pt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Kt(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function ne(d){var g=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function me(d){var g=ne(d)?"checked":"value",R=Object.getOwnPropertyDescriptor(d.constructor.prototype,g),z=""+d[g];if(!d.hasOwnProperty(g)&&typeof R!="undefined"&&typeof R.get=="function"&&typeof R.set=="function"){var $=R.get,it=R.set;return Object.defineProperty(d,g,{configurable:!0,get:function(){return $.call(this)},set:function(vt){z=""+vt,it.call(this,vt)}}),Object.defineProperty(d,g,{enumerable:R.enumerable}),{getValue:function(){return z},setValue:function(vt){z=""+vt},stopTracking:function(){d._valueTracker=null,delete d[g]}}}}function ue(d){d._valueTracker||(d._valueTracker=me(d))}function Oe(d){if(!d)return!1;var g=d._valueTracker;if(!g)return!0;var R=g.getValue(),z="";return d&&(z=ne(d)?d.checked?"true":"false":d.value),d=z,d!==R?(g.setValue(d),!0):!1}function de(d){if(d=d||(typeof document!="undefined"?document:void 0),typeof d=="undefined")return null;try{return d.activeElement||d.body}catch(g){return d.body}}function oe(d,g){var R=g.checked;return ht({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:R!=null?R:d._wrapperState.initialChecked})}function Le(d,g){var R=g.defaultValue==null?"":g.defaultValue,z=g.checked!=null?g.checked:g.defaultChecked;R=Kt(g.value!=null?g.value:R),d._wrapperState={initialChecked:z,initialValue:R,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function Fr(d,g){g=g.checked,g!=null&&j(d,"checked",g,!1)}function kr(d,g){Fr(d,g);var R=Kt(g.value),z=g.type;if(R!=null)z==="number"?(R===0&&d.value===""||d.value!=R)&&(d.value=""+R):d.value!==""+R&&(d.value=""+R);else if(z==="submit"||z==="reset"){d.removeAttribute("value");return}g.hasOwnProperty("value")?Ti(d,g.type,R):g.hasOwnProperty("defaultValue")&&Ti(d,g.type,Kt(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(d.defaultChecked=!!g.defaultChecked)}function ui(d,g,R){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var z=g.type;if(!(z!=="submit"&&z!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+d._wrapperState.initialValue,R||g===d.value||(d.value=g),d.defaultValue=g}R=d.name,R!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,R!==""&&(d.name=R)}function Ti(d,g,R){(g!=="number"||de(d.ownerDocument)!==d)&&(R==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+R&&(d.defaultValue=""+R))}var Ei=Array.isArray;function Oi(d,g,R,z){if(d=d.options,g){g={};for(var $=0;$<R.length;$++)g["$"+R[$]]=!0;for(R=0;R<d.length;R++)$=g.hasOwnProperty("$"+d[R].value),d[R].selected!==$&&(d[R].selected=$),$&&z&&(d[R].defaultSelected=!0)}else{for(R=""+Kt(R),g=null,$=0;$<d.length;$++){if(d[$].value===R){d[$].selected=!0,z&&(d[$].defaultSelected=!0);return}g!==null||d[$].disabled||(g=d[$])}g!==null&&(g.selected=!0)}}function Fe(d,g){if(g.dangerouslySetInnerHTML!=null)throw Error(M(91));return ht({},g,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Li(d,g){var R=g.value;if(R==null){if(R=g.children,g=g.defaultValue,R!=null){if(g!=null)throw Error(M(92));if(Ei(R)){if(1<R.length)throw Error(M(93));R=R[0]}g=R}g==null&&(g=""),R=g}d._wrapperState={initialValue:Kt(R)}}function hi(d,g){var R=Kt(g.value),z=Kt(g.defaultValue);R!=null&&(R=""+R,R!==d.value&&(d.value=R),g.defaultValue==null&&d.defaultValue!==R&&(d.defaultValue=R)),z!=null&&(d.defaultValue=""+z)}function Xr(d){var g=d.textContent;g===d._wrapperState.initialValue&&g!==""&&g!==null&&(d.value=g)}function dr(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Si(d,g){return d==null||d==="http://www.w3.org/1999/xhtml"?dr(g):d==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var bi,ms=function(d){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(g,R,z,$){MSApp.execUnsafeLocalFunction(function(){return d(g,R,z,$)})}:d}(function(d,g){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=g;else{for(bi=bi||document.createElement("div"),bi.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=bi.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;g.firstChild;)d.appendChild(g.firstChild)}});function rs(d,g){if(g){var R=d.firstChild;if(R&&R===d.lastChild&&R.nodeType===3){R.nodeValue=g;return}}d.textContent=g}var Ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fi=["Webkit","ms","Moz","O"];Object.keys(Ar).forEach(function(d){Fi.forEach(function(g){g=g+d.charAt(0).toUpperCase()+d.substring(1),Ar[g]=Ar[d]})});function wt(d,g,R){return g==null||typeof g=="boolean"||g===""?"":R||typeof g!="number"||g===0||Ar.hasOwnProperty(d)&&Ar[d]?(""+g).trim():g+"px"}function Mt(d,g){d=d.style;for(var R in g)if(g.hasOwnProperty(R)){var z=R.indexOf("--")===0,$=wt(R,g[R],z);R==="float"&&(R="cssFloat"),z?d.setProperty(R,$):d[R]=$}}var Xe=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ke(d,g){if(g){if(Xe[d]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(M(137,d));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(M(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(M(61))}if(g.style!=null&&typeof g.style!="object")throw Error(M(62))}}function gr(d,g){if(d.indexOf("-")===-1)return typeof g.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function ci(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var V=null,K=null,nt=null;function St(d){if(d=Ka(d)){if(typeof V!="function")throw Error(M(280));var g=d.stateNode;g&&(g=Za(g),V(d.stateNode,d.type,g))}}function Ot(d){K?nt?nt.push(d):nt=[d]:K=d}function Xt(){if(K){var d=K,g=nt;if(nt=K=null,St(d),g)for(d=0;d<g.length;d++)St(g[d])}}function se(d,g){return d(g)}function Se(){}var ge=!1;function Ue(d,g,R){if(ge)return d(g,R);ge=!0;try{return se(d,g,R)}finally{ge=!1,(K!==null||nt!==null)&&(Se(),Xt())}}function We(d,g){var R=d.stateNode;if(R===null)return null;var z=Za(R);if(z===null)return null;R=z[g];t:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(d=d.type,z=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!z;break t;default:d=!1}if(d)return null;if(R&&typeof R!="function")throw Error(M(231,g,typeof R));return R}var ir=!1;if(v)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){ir=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(d){ir=!1}function Nr(d,g,R,z,$,it,vt,Ut,Vt){var Qt=Array.prototype.slice.call(arguments,3);try{g.apply(R,Qt)}catch(xe){this.onError(xe)}}var er=!1,Er=null,ur=!1,fi=null,or={onError:function(d){er=!0,Er=d}};function di(d,g,R,z,$,it,vt,Ut,Vt){er=!1,Er=null,Nr.apply(or,arguments)}function qr(d,g,R,z,$,it,vt,Ut,Vt){if(di.apply(this,arguments),er){if(er){var Qt=Er;er=!1,Er=null}else throw Error(M(198));ur||(ur=!0,fi=Qt)}}function Ai(d){var g=d,R=d;if(d.alternate)for(;g.return;)g=g.return;else{d=g;do g=d,g.flags&4098&&(R=g.return),d=g.return;while(d)}return g.tag===3?R:null}function Gi(d){if(d.tag===13){var g=d.memoizedState;if(g===null&&(d=d.alternate,d!==null&&(g=d.memoizedState)),g!==null)return g.dehydrated}return null}function is(d){if(Ai(d)!==d)throw Error(M(188))}function $o(d){var g=d.alternate;if(!g){if(g=Ai(d),g===null)throw Error(M(188));return g!==d?null:d}for(var R=d,z=g;;){var $=R.return;if($===null)break;var it=$.alternate;if(it===null){if(z=$.return,z!==null){R=z;continue}break}if($.child===it.child){for(it=$.child;it;){if(it===R)return is($),d;if(it===z)return is($),g;it=it.sibling}throw Error(M(188))}if(R.return!==z.return)R=$,z=it;else{for(var vt=!1,Ut=$.child;Ut;){if(Ut===R){vt=!0,R=$,z=it;break}if(Ut===z){vt=!0,z=$,R=it;break}Ut=Ut.sibling}if(!vt){for(Ut=it.child;Ut;){if(Ut===R){vt=!0,R=it,z=$;break}if(Ut===z){vt=!0,z=it,R=$;break}Ut=Ut.sibling}if(!vt)throw Error(M(189))}}if(R.alternate!==z)throw Error(M(190))}if(R.tag!==3)throw Error(M(188));return R.stateNode.current===R?d:g}function gs(d){return d=$o(d),d!==null?Zn(d):null}function Zn(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var g=Zn(d);if(g!==null)return g;d=d.sibling}return null}var $i=D.unstable_scheduleCallback,Nl=D.unstable_cancelCallback,Yo=D.unstable_shouldYield,qu=D.unstable_requestPaint,Ci=D.unstable_now,Ko=D.unstable_getCurrentPriorityLevel,Zo=D.unstable_ImmediatePriority,Oa=D.unstable_UserBlockingPriority,Qs=D.unstable_NormalPriority,Js=D.unstable_LowPriority,Dl=D.unstable_IdlePriority,Os=null,ys=null;function Bl(d){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(Os,d,void 0,(d.current.flags&128)===128)}catch(g){}}var vs=Math.clz32?Math.clz32:Dc,Yi=Math.log,_s=Math.LN2;function Dc(d){return d>>>=0,d===0?32:31-(Yi(d)/_s|0)|0}var Fa=64,L=4194304;function H(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Z(d,g){var R=d.pendingLanes;if(R===0)return 0;var z=0,$=d.suspendedLanes,it=d.pingedLanes,vt=R&268435455;if(vt!==0){var Ut=vt&~$;Ut!==0?z=H(Ut):(it&=vt,it!==0&&(z=H(it)))}else vt=R&~$,vt!==0?z=H(vt):it!==0&&(z=H(it));if(z===0)return 0;if(g!==0&&g!==z&&!(g&$)&&($=z&-z,it=g&-g,$>=it||$===16&&(it&4194240)!==0))return g;if(z&4&&(z|=R&16),g=d.entangledLanes,g!==0)for(d=d.entanglements,g&=z;0<g;)R=31-vs(g),$=1<<R,z|=d[R],g&=~$;return z}function dt(d,g){switch(d){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bt(d,g){for(var R=d.suspendedLanes,z=d.pingedLanes,$=d.expirationTimes,it=d.pendingLanes;0<it;){var vt=31-vs(it),Ut=1<<vt,Vt=$[vt];Vt===-1?(!(Ut&R)||Ut&z)&&($[vt]=dt(Ut,g)):Vt<=g&&(d.expiredLanes|=Ut),it&=~Ut}}function Tt(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Nt(){var d=Fa;return Fa<<=1,!(Fa&4194240)&&(Fa=64),d}function Ht(d){for(var g=[],R=0;31>R;R++)g.push(d);return g}function It(d,g,R){d.pendingLanes|=g,g!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,g=31-vs(g),d[g]=R}function $t(d,g){var R=d.pendingLanes&~g;d.pendingLanes=g,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=g,d.mutableReadLanes&=g,d.entangledLanes&=g,g=d.entanglements;var z=d.eventTimes;for(d=d.expirationTimes;0<R;){var $=31-vs(R),it=1<<$;g[$]=0,z[$]=-1,d[$]=-1,R&=~it}}function Zt(d,g){var R=d.entangledLanes|=g;for(d=d.entanglements;R;){var z=31-vs(R),$=1<<z;$&g|d[z]&g&&(d[z]|=g),R&=~$}}var zt=0;function ee(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var ye,Ee,sr,Ne,ar,Ye=!1,ze=[],yr=null,ke=null,Ze=null,Ge=new Map,Pe=new Map,Gr=[],Tr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gn(d,g){switch(d){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":ke=null;break;case"mouseover":case"mouseout":Ze=null;break;case"pointerover":case"pointerout":Ge.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(g.pointerId)}}function yn(d,g,R,z,$,it){return d===null||d.nativeEvent!==it?(d={blockedOn:g,domEventName:R,eventSystemFlags:z,nativeEvent:it,targetContainers:[$]},g!==null&&(g=Ka(g),g!==null&&Ee(g)),d):(d.eventSystemFlags|=z,g=d.targetContainers,$!==null&&g.indexOf($)===-1&&g.push($),d)}function Qn(d,g,R,z,$){switch(g){case"focusin":return yr=yn(yr,d,g,R,z,$),!0;case"dragenter":return ke=yn(ke,d,g,R,z,$),!0;case"mouseover":return Ze=yn(Ze,d,g,R,z,$),!0;case"pointerover":var it=$.pointerId;return Ge.set(it,yn(Ge.get(it)||null,d,g,R,z,$)),!0;case"gotpointercapture":return it=$.pointerId,Pe.set(it,yn(Pe.get(it)||null,d,g,R,z,$)),!0}return!1}function Cr(d){var g=Po(d.target);if(g!==null){var R=Ai(g);if(R!==null){if(g=R.tag,g===13){if(g=Gi(R),g!==null){d.blockedOn=g,ar(d.priority,function(){sr(R)});return}}else if(g===3&&R.stateNode.current.memoizedState.isDehydrated){d.blockedOn=R.tag===3?R.stateNode.containerInfo:null;return}}}d.blockedOn=null}function xs(d){if(d.blockedOn!==null)return!1;for(var g=d.targetContainers;0<g.length;){var R=ri(d.domEventName,d.eventSystemFlags,g[0],d.nativeEvent);if(R===null){R=d.nativeEvent;var z=new R.constructor(R.type,R);Ae=z,R.target.dispatchEvent(z),Ae=null}else return g=Ka(R),g!==null&&Ee(g),d.blockedOn=R,!1;g.shift()}return!0}function ei(d,g,R){xs(d)&&R.delete(g)}function $r(){Ye=!1,yr!==null&&xs(yr)&&(yr=null),ke!==null&&xs(ke)&&(ke=null),Ze!==null&&xs(Ze)&&(Ze=null),Ge.forEach(ei),Pe.forEach(ei)}function qs(d,g){d.blockedOn===g&&(d.blockedOn=null,Ye||(Ye=!0,D.unstable_scheduleCallback(D.unstable_NormalPriority,$r)))}function Jn(d){function g($){return qs($,d)}if(0<ze.length){qs(ze[0],d);for(var R=1;R<ze.length;R++){var z=ze[R];z.blockedOn===d&&(z.blockedOn=null)}}for(yr!==null&&qs(yr,d),ke!==null&&qs(ke,d),Ze!==null&&qs(Ze,d),Ge.forEach(g),Pe.forEach(g),R=0;R<Gr.length;R++)z=Gr[R],z.blockedOn===d&&(z.blockedOn=null);for(;0<Gr.length&&(R=Gr[0],R.blockedOn===null);)Cr(R),R.blockedOn===null&&Gr.shift()}var Nn=st.ReactCurrentBatchConfig,qn=!0;function Ll(d,g,R,z){var $=zt,it=Nn.transition;Nn.transition=null;try{zt=1,Ki(d,g,R,z)}finally{zt=$,Nn.transition=it}}function Pr(d,g,R,z){var $=zt,it=Nn.transition;Nn.transition=null;try{zt=4,Ki(d,g,R,z)}finally{zt=$,Nn.transition=it}}function Ki(d,g,R,z){if(qn){var $=ri(d,g,R,z);if($===null)Kl(d,g,z,yo,R),gn(d,z);else if(Qn($,d,g,R,z))z.stopPropagation();else if(gn(d,z),g&4&&-1<Tr.indexOf(d)){for(;$!==null;){var it=Ka($);if(it!==null&&ye(it),it=ri(d,g,R,z),it===null&&Kl(d,g,z,yo,R),it===$)break;$=it}$!==null&&z.stopPropagation()}else Kl(d,g,z,null,R)}}var yo=null;function ri(d,g,R,z){if(yo=null,d=ci(z),d=Po(d),d!==null)if(g=Ai(d),g===null)d=null;else if(R=g.tag,R===13){if(d=Gi(g),d!==null)return d;d=null}else if(R===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;d=null}else g!==d&&(d=null);return yo=d,null}function kl(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ko()){case Zo:return 1;case Oa:return 4;case Qs:case Js:return 16;case Dl:return 536870912;default:return 16}default:return 16}}var Ts=null,Pi=null,Mr=null;function ss(){if(Mr)return Mr;var d,g=Pi,R=g.length,z,$="value"in Ts?Ts.value:Ts.textContent,it=$.length;for(d=0;d<R&&g[d]===$[d];d++);var vt=R-d;for(z=1;z<=vt&&g[R-z]===$[it-z];z++);return Mr=$.slice(d,1<z?1-z:void 0)}function Rr(d){var g=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&g===13&&(d=13)):d=g,d===10&&(d=13),32<=d||d===13?d:0}function Es(){return!0}function to(){return!1}function Ni(d){function g(R,z,$,it,vt){this._reactName=R,this._targetInst=$,this.type=z,this.nativeEvent=it,this.target=vt,this.currentTarget=null;for(var Ut in d)d.hasOwnProperty(Ut)&&(R=d[Ut],this[Ut]=R?R(it):it[Ut]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?Es:to,this.isPropagationStopped=to,this}return ht(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var R=this.nativeEvent;R&&(R.preventDefault?R.preventDefault():typeof R.returnValue!="unknown"&&(R.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var R=this.nativeEvent;R&&(R.stopPropagation?R.stopPropagation():typeof R.cancelBubble!="unknown"&&(R.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),g}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qr=Ni(Fs),Ss=ht({},Fs,{view:0,detail:0}),vn=Ni(Ss),zs,Hs,tn,vo=ht({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==tn&&(tn&&d.type==="mousemove"?(zs=d.screenX-tn.screenX,Hs=d.screenY-tn.screenY):Hs=zs=0,tn=d),zs)},movementY:function(d){return"movementY"in d?d.movementY:Hs}}),_o=Ni(vo),th=ht({},vo,{dataTransfer:0}),yi=Ni(th),ns=ht({},Ss,{relatedTarget:0}),xo=Ni(ns),Na=ht({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=Ni(Na),Da=ht({},Fs,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),qt=Ni(Da),ae=ht({},Fs,{data:0}),fe=Ni(ae),Ie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Di(d){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(d):(d=ii[d])?!!g[d]:!1}function Dr(){return Di}var je=ht({},Ss,{key:function(d){if(d.key){var g=Ie[d.key]||d.key;if(g!=="Unidentified")return g}return d.type==="keypress"?(d=Rr(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?vr[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(d){return d.type==="keypress"?Rr(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Rr(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),nr=Ni(je),Qe=ht({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Je=Ni(Qe),Vr=ht({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),si=Ni(Vr),vi=ht({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ns=Ni(vi),To=ht({},vo,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Ba=Ni(To),en=[9,13,27,32],rh=v&&"CompositionEvent"in window,us=null;v&&"documentMode"in document&&(us=document.documentMode);var _n=v&&"TextEvent"in window&&!us,Bc=v&&(!rh||us&&8<us&&11>=us),Ul=String.fromCharCode(32),Lc=!1;function kc(d,g){switch(d){case"keyup":return en.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Qo=!1;function Af(d,g){switch(d){case"compositionend":return La(g);case"keypress":return g.which!==32?null:(Lc=!0,Ul);case"textInput":return d=g.data,d===Ul&&Lc?null:d;default:return null}}function ka(d,g){if(Qo)return d==="compositionend"||!rh&&kc(d,g)?(d=ss(),Mr=Pi=Ts=null,Qo=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Bc&&g.locale!=="ko"?null:g.data;default:return null}}var Eo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uc(d){var g=d&&d.nodeName&&d.nodeName.toLowerCase();return g==="input"?!!Eo[d.type]:g==="textarea"}function Gc(d,g,R,z){Ot(z),g=Zl(g,"onChange"),0<g.length&&(R=new Qr("onChange","change",null,R,z),d.push({event:R,listeners:g}))}var So=null,zr=null;function Gl(d){Zc(d,0)}function Ua(d){var g=Mo(d);if(Oe(g))return d}function Vc(d,g){if(d==="change")return g}var Ga=!1;if(v){var Va;if(v){var Vl="oninput"in document;if(!Vl){var Dn=document.createElement("div");Dn.setAttribute("oninput","return;"),Vl=typeof Dn.oninput=="function"}Va=Vl}else Va=!1;Ga=Va&&(!document.documentMode||9<document.documentMode)}function ih(){So&&(So.detachEvent("onpropertychange",zl),zr=So=null)}function zl(d){if(d.propertyName==="value"&&Ua(zr)){var g=[];Gc(g,zr,d,ci(d)),Ue(Gl,g)}}function zc(d,g,R){d==="focusin"?(ih(),So=g,zr=R,So.attachEvent("onpropertychange",zl)):d==="focusout"&&ih()}function Hl(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Ua(zr)}function hr(d,g){if(d==="click")return Ua(g)}function bo(d,g){if(d==="input"||d==="change")return Ua(g)}function Hc(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var rn=typeof Object.is=="function"?Object.is:Hc;function Jo(d,g){if(rn(d,g))return!0;if(typeof d!="object"||d===null||typeof g!="object"||g===null)return!1;var R=Object.keys(d),z=Object.keys(g);if(R.length!==z.length)return!1;for(z=0;z<R.length;z++){var $=R[z];if(!y.call(g,$)||!rn(d[$],g[$]))return!1}return!0}function jc(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function za(d,g){var R=jc(d);d=0;for(var z;R;){if(R.nodeType===3){if(z=d+R.textContent.length,d<=g&&z>=g)return{node:R,offset:g-d};d=z}t:{for(;R;){if(R.nextSibling){R=R.nextSibling;break t}R=R.parentNode}R=void 0}R=jc(R)}}function jl(d,g){return d&&g?d===g?!0:d&&d.nodeType===3?!1:g&&g.nodeType===3?jl(d,g.parentNode):"contains"in d?d.contains(g):d.compareDocumentPosition?!!(d.compareDocumentPosition(g)&16):!1:!1}function sh(){for(var d=window,g=de();g instanceof d.HTMLIFrameElement;){try{var R=typeof g.contentWindow.location.href=="string"}catch(z){R=!1}if(R)d=g.contentWindow;else break;g=de(d.document)}return g}function nh(d){var g=d&&d.nodeName&&d.nodeName.toLowerCase();return g&&(g==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||g==="textarea"||d.contentEditable==="true")}function wf(d){var g=sh(),R=d.focusedElem,z=d.selectionRange;if(g!==R&&R&&R.ownerDocument&&jl(R.ownerDocument.documentElement,R)){if(z!==null&&nh(R)){if(g=z.start,d=z.end,d===void 0&&(d=g),"selectionStart"in R)R.selectionStart=g,R.selectionEnd=Math.min(d,R.value.length);else if(d=(g=R.ownerDocument||document)&&g.defaultView||window,d.getSelection){d=d.getSelection();var $=R.textContent.length,it=Math.min(z.start,$);z=z.end===void 0?it:Math.min(z.end,$),!d.extend&&it>z&&($=z,z=it,it=$),$=za(R,it);var vt=za(R,z);$&&vt&&(d.rangeCount!==1||d.anchorNode!==$.node||d.anchorOffset!==$.offset||d.focusNode!==vt.node||d.focusOffset!==vt.offset)&&(g=g.createRange(),g.setStart($.node,$.offset),d.removeAllRanges(),it>z?(d.addRange(g),d.extend(vt.node,vt.offset)):(g.setEnd(vt.node,vt.offset),d.addRange(g)))}}for(g=[],d=R;d=d.parentNode;)d.nodeType===1&&g.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<g.length;R++)d=g[R],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Xc=v&&"documentMode"in document&&11>=document.documentMode,eo=null,Xl=null,qo=null,Wl=!1;function Wc(d,g,R){var z=R.window===R?R.document:R.nodeType===9?R:R.ownerDocument;Wl||eo==null||eo!==de(z)||(z=eo,"selectionStart"in z&&nh(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),qo&&Jo(qo,z)||(qo=z,z=Zl(Xl,"onSelect"),0<z.length&&(g=new Qr("onSelect","select",null,g,R),d.push({event:g,listeners:z}),g.target=eo)))}function $l(d,g){var R={};return R[d.toLowerCase()]=g.toLowerCase(),R["Webkit"+d]="webkit"+g,R["Moz"+d]="moz"+g,R}var ta={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},oh={},ah={};v&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete ta.animationend.animation,delete ta.animationiteration.animation,delete ta.animationstart.animation),"TransitionEvent"in window||delete ta.transitionend.transition);function Ha(d){if(oh[d])return oh[d];if(!ta[d])return d;var g=ta[d],R;for(R in g)if(g.hasOwnProperty(R)&&R in ah)return oh[d]=g[R];return d}var lh=Ha("animationend"),uh=Ha("animationiteration"),hh=Ha("animationstart"),$c=Ha("transitionend"),ch=new Map,dh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(d,g){ch.set(d,g),m(g,[d])}for(var fh=0;fh<dh.length;fh++){var Yl=dh[fh],Yc=Yl.toLowerCase(),Ao=Yl[0].toUpperCase()+Yl.slice(1);Bn(Yc,"on"+Ao)}Bn(lh,"onAnimationEnd"),Bn(uh,"onAnimationIteration"),Bn(hh,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn($c,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Cf(d,g,R){var z=d.type||"unknown-event";d.currentTarget=R,qr(z,g,void 0,d),d.currentTarget=null}function Zc(d,g){g=(g&4)!==0;for(var R=0;R<d.length;R++){var z=d[R],$=z.event;z=z.listeners;t:{var it=void 0;if(g)for(var vt=z.length-1;0<=vt;vt--){var Ut=z[vt],Vt=Ut.instance,Qt=Ut.currentTarget;if(Ut=Ut.listener,Vt!==it&&$.isPropagationStopped())break t;Cf($,Ut,Qt),it=Vt}else for(vt=0;vt<z.length;vt++){if(Ut=z[vt],Vt=Ut.instance,Qt=Ut.currentTarget,Ut=Ut.listener,Vt!==it&&$.isPropagationStopped())break t;Cf($,Ut,Qt),it=Vt}}}if(ur)throw d=fi,ur=!1,fi=null,d}function pi(d,g){var R=g[wo];R===void 0&&(R=g[wo]=new Set);var z=d+"__bubble";R.has(z)||(Qc(g,d,2,!1),R.add(z))}function ja(d,g,R){var z=0;g&&(z|=4),Qc(R,d,z,g)}var Xa="_reactListening"+Math.random().toString(36).slice(2);function Wa(d){if(!d[Xa]){d[Xa]=!0,O.forEach(function(R){R!=="selectionchange"&&(Kc.has(R)||ja(R,!1,d),ja(R,!0,d))});var g=d.nodeType===9?d:d.ownerDocument;g===null||g[Xa]||(g[Xa]=!0,ja("selectionchange",!1,g))}}function Qc(d,g,R,z){switch(kl(g)){case 1:var $=Ll;break;case 4:$=Pr;break;default:$=Ki}R=$.bind(null,g,R,d),$=void 0,!ir||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||($=!0),z?$!==void 0?d.addEventListener(g,R,{capture:!0,passive:$}):d.addEventListener(g,R,!0):$!==void 0?d.addEventListener(g,R,{passive:$}):d.addEventListener(g,R,!1)}function Kl(d,g,R,z,$){var it=z;if(!(g&1)&&!(g&2)&&z!==null)t:for(;;){if(z===null)return;var vt=z.tag;if(vt===3||vt===4){var Ut=z.stateNode.containerInfo;if(Ut===$||Ut.nodeType===8&&Ut.parentNode===$)break;if(vt===4)for(vt=z.return;vt!==null;){var Vt=vt.tag;if((Vt===3||Vt===4)&&(Vt=vt.stateNode.containerInfo,Vt===$||Vt.nodeType===8&&Vt.parentNode===$))return;vt=vt.return}for(;Ut!==null;){if(vt=Po(Ut),vt===null)return;if(Vt=vt.tag,Vt===5||Vt===6){z=it=vt;continue t}Ut=Ut.parentNode}}z=z.return}Ue(function(){var Qt=it,xe=ci(R),Te=[];t:{var ve=ch.get(d);if(ve!==void 0){var $e=Qr,rr=d;switch(d){case"keypress":if(Rr(R)===0)break t;case"keydown":case"keyup":$e=nr;break;case"focusin":rr="focus",$e=xo;break;case"focusout":rr="blur",$e=xo;break;case"beforeblur":case"afterblur":$e=xo;break;case"click":if(R.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=_o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=yi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=si;break;case lh:case uh:case hh:$e=eh;break;case $c:$e=Ns;break;case"scroll":$e=vn;break;case"wheel":$e=Ba;break;case"copy":case"cut":case"paste":$e=qt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Je}var lr=(g&4)!==0,_i=!lr&&d==="scroll",te=lr?ve!==null?ve+"Capture":null:ve;lr=[];for(var Yt=Qt,ie;Yt!==null;){ie=Yt;var we=ie.stateNode;if(ie.tag===5&&we!==null&&(ie=we,te!==null&&(we=We(Yt,te),we!=null&&lr.push($a(Yt,we,ie)))),_i)break;Yt=Yt.return}0<lr.length&&(ve=new $e(ve,rr,null,R,xe),Te.push({event:ve,listeners:lr}))}}if(!(g&7)){t:{if(ve=d==="mouseover"||d==="pointerover",$e=d==="mouseout"||d==="pointerout",ve&&R!==Ae&&(rr=R.relatedTarget||R.fromElement)&&(Po(rr)||rr[kn]))break t;if(($e||ve)&&(ve=xe.window===xe?xe:(ve=xe.ownerDocument)?ve.defaultView||ve.parentWindow:window,$e?(rr=R.relatedTarget||R.toElement,$e=Qt,rr=rr?Po(rr):null,rr!==null&&(_i=Ai(rr),rr!==_i||rr.tag!==5&&rr.tag!==6)&&(rr=null)):($e=null,rr=Qt),$e!==rr)){if(lr=_o,we="onMouseLeave",te="onMouseEnter",Yt="mouse",(d==="pointerout"||d==="pointerover")&&(lr=Je,we="onPointerLeave",te="onPointerEnter",Yt="pointer"),_i=$e==null?ve:Mo($e),ie=rr==null?ve:Mo(rr),ve=new lr(we,Yt+"leave",$e,R,xe),ve.target=_i,ve.relatedTarget=ie,we=null,Po(xe)===Qt&&(lr=new lr(te,Yt+"enter",rr,R,xe),lr.target=ie,lr.relatedTarget=_i,we=lr),_i=we,$e&&rr)e:{for(lr=$e,te=rr,Yt=0,ie=lr;ie;ie=ea(ie))Yt++;for(ie=0,we=te;we;we=ea(we))ie++;for(;0<Yt-ie;)lr=ea(lr),Yt--;for(;0<ie-Yt;)te=ea(te),ie--;for(;Yt--;){if(lr===te||te!==null&&lr===te.alternate)break e;lr=ea(lr),te=ea(te)}lr=null}else lr=null;$e!==null&&Jc(Te,ve,$e,lr,!1),rr!==null&&_i!==null&&Jc(Te,_i,rr,lr,!0)}}t:{if(ve=Qt?Mo(Qt):window,$e=ve.nodeName&&ve.nodeName.toLowerCase(),$e==="select"||$e==="input"&&ve.type==="file")var cr=Vc;else if(Uc(ve))if(Ga)cr=bo;else{cr=Hl;var Sr=zc}else($e=ve.nodeName)&&$e.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(cr=hr);if(cr&&(cr=cr(d,Qt))){Gc(Te,cr,R,xe);break t}Sr&&Sr(d,ve,Qt),d==="focusout"&&(Sr=ve._wrapperState)&&Sr.controlled&&ve.type==="number"&&Ti(ve,"number",ve.value)}switch(Sr=Qt?Mo(Qt):window,d){case"focusin":(Uc(Sr)||Sr.contentEditable==="true")&&(eo=Sr,Xl=Qt,qo=null);break;case"focusout":qo=Xl=eo=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,Wc(Te,R,xe);break;case"selectionchange":if(Xc)break;case"keydown":case"keyup":Wc(Te,R,xe)}var br;if(rh)t:{switch(d){case"compositionstart":var Ir="onCompositionStart";break t;case"compositionend":Ir="onCompositionEnd";break t;case"compositionupdate":Ir="onCompositionUpdate";break t}Ir=void 0}else Qo?kc(d,R)&&(Ir="onCompositionEnd"):d==="keydown"&&R.keyCode===229&&(Ir="onCompositionStart");Ir&&(Bc&&R.locale!=="ko"&&(Qo||Ir!=="onCompositionStart"?Ir==="onCompositionEnd"&&Qo&&(br=ss()):(Ts=xe,Pi="value"in Ts?Ts.value:Ts.textContent,Qo=!0)),Sr=Zl(Qt,Ir),0<Sr.length&&(Ir=new fe(Ir,d,null,R,xe),Te.push({event:Ir,listeners:Sr}),br?Ir.data=br:(br=La(R),br!==null&&(Ir.data=br)))),(br=_n?Af(d,R):ka(d,R))&&(Qt=Zl(Qt,"onBeforeInput"),0<Qt.length&&(xe=new fe("onBeforeInput","beforeinput",null,R,xe),Te.push({event:xe,listeners:Qt}),xe.data=br))}Zc(Te,g)})}function $a(d,g,R){return{instance:d,listener:g,currentTarget:R}}function Zl(d,g){for(var R=g+"Capture",z=[];d!==null;){var $=d,it=$.stateNode;$.tag===5&&it!==null&&($=it,it=We(d,R),it!=null&&z.unshift($a(d,it,$)),it=We(d,g),it!=null&&z.push($a(d,it,$))),d=d.return}return z}function ea(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Jc(d,g,R,z,$){for(var it=g._reactName,vt=[];R!==null&&R!==z;){var Ut=R,Vt=Ut.alternate,Qt=Ut.stateNode;if(Vt!==null&&Vt===z)break;Ut.tag===5&&Qt!==null&&(Ut=Qt,$?(Vt=We(R,it),Vt!=null&&vt.unshift($a(R,Vt,Ut))):$||(Vt=We(R,it),Vt!=null&&vt.push($a(R,Vt,Ut)))),R=R.return}vt.length!==0&&d.push({event:g,listeners:vt})}var qc=/\r\n?/g,Pf=/\u0000|\uFFFD/g;function td(d){return(typeof d=="string"?d:""+d).replace(qc,`
`).replace(Pf,"")}function Ql(d,g,R){if(g=td(g),td(d)!==g&&R)throw Error(M(425))}function ro(){}var ph=null,mh=null;function ra(d,g){return d==="textarea"||d==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Jl=typeof setTimeout=="function"?setTimeout:void 0,ql=typeof clearTimeout=="function"?clearTimeout:void 0,ed=typeof Promise=="function"?Promise:void 0,Mf=typeof queueMicrotask=="function"?queueMicrotask:typeof ed!="undefined"?function(d){return ed.resolve(null).then(d).catch(Rf)}:Jl;function Rf(d){setTimeout(function(){throw d})}function gh(d,g){var R=g,z=0;do{var $=R.nextSibling;if(d.removeChild(R),$&&$.nodeType===8)if(R=$.data,R==="/$"){if(z===0){d.removeChild($),Jn(g);return}z--}else R!=="$"&&R!=="$?"&&R!=="$!"||z++;R=$}while(R);Jn(g)}function io(d){for(;d!=null;d=d.nextSibling){var g=d.nodeType;if(g===1||g===3)break;if(g===8){if(g=d.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return d}function rd(d){d=d.previousSibling;for(var g=0;d;){if(d.nodeType===8){var R=d.data;if(R==="$"||R==="$!"||R==="$?"){if(g===0)return d;g--}else R==="/$"&&g++}d=d.previousSibling}return null}var ia=Math.random().toString(36).slice(2),sn="__reactFiber$"+ia,Ya="__reactProps$"+ia,kn="__reactContainer$"+ia,wo="__reactEvents$"+ia,Co="__reactListeners$"+ia,yh="__reactHandles$"+ia;function Po(d){var g=d[sn];if(g)return g;for(var R=d.parentNode;R;){if(g=R[kn]||R[sn]){if(R=g.alternate,g.child!==null||R!==null&&R.child!==null)for(d=rd(d);d!==null;){if(R=d[sn])return R;d=rd(d)}return g}d=R,R=d.parentNode}return null}function Ka(d){return d=d[sn]||d[kn],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Mo(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(M(33))}function Za(d){return d[Ya]||null}var sa=[],js=-1;function xn(d){return{current:d}}function mi(d){0>js||(d.current=sa[js],sa[js]=null,js--)}function jr(d,g){js++,sa[js]=d.current,d.current=g}var Un={},Zi=xn(Un),bs=xn(!1),Ro=Un;function na(d,g){var R=d.type.contextTypes;if(!R)return Un;var z=d.stateNode;if(z&&z.__reactInternalMemoizedUnmaskedChildContext===g)return z.__reactInternalMemoizedMaskedChildContext;var $={},it;for(it in R)$[it]=g[it];return z&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=g,d.__reactInternalMemoizedMaskedChildContext=$),$}function As(d){return d=d.childContextTypes,d!=null}function Qa(){mi(bs),mi(Zi)}function vh(d,g,R){if(Zi.current!==Un)throw Error(M(168));jr(Zi,g),jr(bs,R)}function id(d,g,R){var z=d.stateNode;if(g=g.childContextTypes,typeof z.getChildContext!="function")return R;z=z.getChildContext();for(var $ in z)if(!($ in g))throw Error(M(108,jt(d)||"Unknown",$));return ht({},R,z)}function Ja(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Un,Ro=Zi.current,jr(Zi,d),jr(bs,bs.current),!0}function _h(d,g,R){var z=d.stateNode;if(!z)throw Error(M(169));R?(d=id(d,g,Ro),z.__reactInternalMemoizedMergedChildContext=d,mi(bs),mi(Zi),jr(Zi,d)):mi(bs),jr(bs,R)}var Xs=null,oa=!1,tu=!1;function sd(d){Xs===null?Xs=[d]:Xs.push(d)}function If(d){oa=!0,sd(d)}function Gn(){if(!tu&&Xs!==null){tu=!0;var d=0,g=zt;try{var R=Xs;for(zt=1;d<R.length;d++){var z=R[d];do z=z(!0);while(z!==null)}Xs=null,oa=!1}catch($){throw Xs!==null&&(Xs=Xs.slice(d+1)),$i(Zo,Gn),$}finally{zt=g,tu=!1}}return null}var aa=[],nn=0,la=null,ua=0,ws=[],Ds=0,ha=null,so=1,Ws="";function ti(d,g){aa[nn++]=ua,aa[nn++]=la,la=d,ua=g}function nd(d,g,R){ws[Ds++]=so,ws[Ds++]=Ws,ws[Ds++]=ha,ha=d;var z=so;d=Ws;var $=32-vs(z)-1;z&=~(1<<$),R+=1;var it=32-vs(g)+$;if(30<it){var vt=$-$%5;it=(z&(1<<vt)-1).toString(32),z>>=vt,$-=vt,so=1<<32-vs(g)+$|R<<$|z,Ws=it+d}else so=1<<it|R<<$|z,Ws=d}function xh(d){d.return!==null&&(ti(d,1),nd(d,1,0))}function Th(d){for(;d===la;)la=aa[--nn],aa[nn]=null,ua=aa[--nn],aa[nn]=null;for(;d===ha;)ha=ws[--Ds],ws[Ds]=null,Ws=ws[--Ds],ws[Ds]=null,so=ws[--Ds],ws[Ds]=null}var Cs=null,wi=null,ni=!1,on=null;function Io(d,g){var R=Ks(5,null,null,0);R.elementType="DELETED",R.stateNode=g,R.return=d,g=d.deletions,g===null?(d.deletions=[R],d.flags|=16):g.push(R)}function Eh(d,g){switch(d.tag){case 5:var R=d.type;return g=g.nodeType!==1||R.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(d.stateNode=g,Cs=d,wi=io(g.firstChild),!0):!1;case 6:return g=d.pendingProps===""||g.nodeType!==3?null:g,g!==null?(d.stateNode=g,Cs=d,wi=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(R=ha!==null?{id:so,overflow:Ws}:null,d.memoizedState={dehydrated:g,treeContext:R,retryLane:1073741824},R=Ks(18,null,null,0),R.stateNode=g,R.return=d,d.child=R,Cs=d,wi=null,!0):!1;default:return!1}}function Sh(d){return(d.mode&1)!==0&&(d.flags&128)===0}function bh(d){if(ni){var g=wi;if(g){var R=g;if(!Eh(d,g)){if(Sh(d))throw Error(M(418));g=io(R.nextSibling);var z=Cs;g&&Eh(d,g)?Io(z,R):(d.flags=d.flags&-4097|2,ni=!1,Cs=d)}}else{if(Sh(d))throw Error(M(418));d.flags=d.flags&-4097|2,ni=!1,Cs=d}}}function od(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Cs=d}function eu(d){if(d!==Cs)return!1;if(!ni)return od(d),ni=!0,!1;var g;if((g=d.tag!==3)&&!(g=d.tag!==5)&&(g=d.type,g=g!=="head"&&g!=="body"&&!ra(d.type,d.memoizedProps)),g&&(g=wi)){if(Sh(d))throw ad(),Error(M(418));for(;g;)Io(d,g),g=io(g.nextSibling)}if(od(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(M(317));t:{for(d=d.nextSibling,g=0;d;){if(d.nodeType===8){var R=d.data;if(R==="/$"){if(g===0){wi=io(d.nextSibling);break t}g--}else R!=="$"&&R!=="$!"&&R!=="$?"||g++}d=d.nextSibling}wi=null}}else wi=Cs?io(d.stateNode.nextSibling):null;return!0}function ad(){for(var d=wi;d;)d=io(d.nextSibling)}function ca(){wi=Cs=null,ni=!1}function Ah(d){on===null?on=[d]:on.push(d)}var Of=st.ReactCurrentBatchConfig;function Bs(d,g){if(d&&d.defaultProps){g=ht({},g),d=d.defaultProps;for(var R in d)g[R]===void 0&&(g[R]=d[R]);return g}return g}var ru=xn(null),iu=null,no=null,wh=null;function Ch(){wh=no=iu=null}function Ph(d){var g=ru.current;mi(ru),d._currentValue=g}function Mh(d,g,R){for(;d!==null;){var z=d.alternate;if((d.childLanes&g)!==g?(d.childLanes|=g,z!==null&&(z.childLanes|=g)):z!==null&&(z.childLanes&g)!==g&&(z.childLanes|=g),d===R)break;d=d.return}}function da(d,g){iu=d,wh=no=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&g&&(ki=!0),d.firstContext=null)}function $s(d){var g=d._currentValue;if(wh!==d)if(d={context:d,memoizedValue:g,next:null},no===null){if(iu===null)throw Error(M(308));no=d,iu.dependencies={lanes:0,firstContext:d}}else no=no.next=d;return g}var Oo=null;function Rh(d){Oo===null?Oo=[d]:Oo.push(d)}function Ih(d,g,R,z){var $=g.interleaved;return $===null?(R.next=R,Rh(g)):(R.next=$.next,$.next=R),g.interleaved=R,Vn(d,z)}function Vn(d,g){d.lanes|=g;var R=d.alternate;for(R!==null&&(R.lanes|=g),R=d,d=d.return;d!==null;)d.childLanes|=g,R=d.alternate,R!==null&&(R.childLanes|=g),R=d,d=d.return;return R.tag===3?R.stateNode:null}var hs=!1;function Fo(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qa(d,g){d=d.updateQueue,g.updateQueue===d&&(g.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Vi(d,g){return{eventTime:d,lane:g,tag:0,payload:null,callback:null,next:null}}function Ls(d,g,R){var z=d.updateQueue;if(z===null)return null;if(z=z.shared,Yr&2){var $=z.pending;return $===null?g.next=g:(g.next=$.next,$.next=g),z.pending=g,Vn(d,R)}return $=z.interleaved,$===null?(g.next=g,Rh(z)):(g.next=$.next,$.next=g),z.interleaved=g,Vn(d,R)}function su(d,g,R){if(g=g.updateQueue,g!==null&&(g=g.shared,(R&4194240)!==0)){var z=g.lanes;z&=d.pendingLanes,R|=z,g.lanes=R,Zt(d,R)}}function ld(d,g){var R=d.updateQueue,z=d.alternate;if(z!==null&&(z=z.updateQueue,R===z)){var $=null,it=null;if(R=R.firstBaseUpdate,R!==null){do{var vt={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};it===null?$=it=vt:it=it.next=vt,R=R.next}while(R!==null);it===null?$=it=g:it=it.next=g}else $=it=g;R={baseState:z.baseState,firstBaseUpdate:$,lastBaseUpdate:it,shared:z.shared,effects:z.effects},d.updateQueue=R;return}d=R.lastBaseUpdate,d===null?R.firstBaseUpdate=g:d.next=g,R.lastBaseUpdate=g}function fa(d,g,R,z){var $=d.updateQueue;hs=!1;var it=$.firstBaseUpdate,vt=$.lastBaseUpdate,Ut=$.shared.pending;if(Ut!==null){$.shared.pending=null;var Vt=Ut,Qt=Vt.next;Vt.next=null,vt===null?it=Qt:vt.next=Qt,vt=Vt;var xe=d.alternate;xe!==null&&(xe=xe.updateQueue,Ut=xe.lastBaseUpdate,Ut!==vt&&(Ut===null?xe.firstBaseUpdate=Qt:Ut.next=Qt,xe.lastBaseUpdate=Vt))}if(it!==null){var Te=$.baseState;vt=0,xe=Qt=Vt=null,Ut=it;do{var ve=Ut.lane,$e=Ut.eventTime;if((z&ve)===ve){xe!==null&&(xe=xe.next={eventTime:$e,lane:0,tag:Ut.tag,payload:Ut.payload,callback:Ut.callback,next:null});t:{var rr=d,lr=Ut;switch(ve=g,$e=R,lr.tag){case 1:if(rr=lr.payload,typeof rr=="function"){Te=rr.call($e,Te,ve);break t}Te=rr;break t;case 3:rr.flags=rr.flags&-65537|128;case 0:if(rr=lr.payload,ve=typeof rr=="function"?rr.call($e,Te,ve):rr,ve==null)break t;Te=ht({},Te,ve);break t;case 2:hs=!0}}Ut.callback!==null&&Ut.lane!==0&&(d.flags|=64,ve=$.effects,ve===null?$.effects=[Ut]:ve.push(Ut))}else $e={eventTime:$e,lane:ve,tag:Ut.tag,payload:Ut.payload,callback:Ut.callback,next:null},xe===null?(Qt=xe=$e,Vt=Te):xe=xe.next=$e,vt|=ve;if(Ut=Ut.next,Ut===null){if(Ut=$.shared.pending,Ut===null)break;ve=Ut,Ut=ve.next,ve.next=null,$.lastBaseUpdate=ve,$.shared.pending=null}}while(1);if(xe===null&&(Vt=Te),$.baseState=Vt,$.firstBaseUpdate=Qt,$.lastBaseUpdate=xe,g=$.shared.interleaved,g!==null){$=g;do vt|=$.lane,$=$.next;while($!==g)}else it===null&&($.shared.lanes=0);Xn|=vt,d.lanes=vt,d.memoizedState=Te}}function ud(d,g,R){if(d=g.effects,g.effects=null,d!==null)for(g=0;g<d.length;g++){var z=d[g],$=z.callback;if($!==null){if(z.callback=null,z=R,typeof $!="function")throw Error(M(191,$));$.call(z)}}}var hd=new b.Component().refs;function Oh(d,g,R,z){g=d.memoizedState,R=R(z,g),R=R==null?g:ht({},g,R),d.memoizedState=R,d.lanes===0&&(d.updateQueue.baseState=R)}var pa={isMounted:function(d){return(d=d._reactInternals)?Ai(d)===d:!1},enqueueSetState:function(d,g,R){d=d._reactInternals;var z=ds(),$=Wn(d),it=Vi(z,$);it.payload=g,R!=null&&(it.callback=R),g=Ls(d,it,$),g!==null&&(Is(g,d,$,z),su(g,d,$))},enqueueReplaceState:function(d,g,R){d=d._reactInternals;var z=ds(),$=Wn(d),it=Vi(z,$);it.tag=1,it.payload=g,R!=null&&(it.callback=R),g=Ls(d,it,$),g!==null&&(Is(g,d,$,z),su(g,d,$))},enqueueForceUpdate:function(d,g){d=d._reactInternals;var R=ds(),z=Wn(d),$=Vi(R,z);$.tag=2,g!=null&&($.callback=g),g=Ls(d,$,z),g!==null&&(Is(g,d,z,R),su(g,d,z))}};function nu(d,g,R,z,$,it,vt){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(z,it,vt):g.prototype&&g.prototype.isPureReactComponent?!Jo(R,z)||!Jo($,it):!0}function Fh(d,g,R){var z=!1,$=Un,it=g.contextType;return typeof it=="object"&&it!==null?it=$s(it):($=As(g)?Ro:Zi.current,z=g.contextTypes,it=(z=z!=null)?na(d,$):Un),g=new g(R,it),d.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=pa,d.stateNode=g,g._reactInternals=d,z&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=$,d.__reactInternalMemoizedMaskedChildContext=it),g}function cd(d,g,R,z){d=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(R,z),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(R,z),g.state!==d&&pa.enqueueReplaceState(g,g.state,null)}function Nh(d,g,R,z){var $=d.stateNode;$.props=R,$.state=d.memoizedState,$.refs=hd,Fo(d);var it=g.contextType;typeof it=="object"&&it!==null?$.context=$s(it):(it=As(g)?Ro:Zi.current,$.context=na(d,it)),$.state=d.memoizedState,it=g.getDerivedStateFromProps,typeof it=="function"&&(Oh(d,g,it,R),$.state=d.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(g=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),g!==$.state&&pa.enqueueReplaceState($,$.state,null),fa(d,R,$,z),$.state=d.memoizedState),typeof $.componentDidMount=="function"&&(d.flags|=4194308)}function tl(d,g,R){if(d=R.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(M(309));var z=R.stateNode}if(!z)throw Error(M(147,d));var $=z,it=""+d;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===it?g.ref:(g=function(vt){var Ut=$.refs;Ut===hd&&(Ut=$.refs={}),vt===null?delete Ut[it]:Ut[it]=vt},g._stringRef=it,g)}if(typeof d!="string")throw Error(M(284));if(!R._owner)throw Error(M(290,d))}return d}function No(d,g){throw d=Object.prototype.toString.call(g),Error(M(31,d==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":d))}function dd(d){var g=d._init;return g(d._payload)}function fd(d){function g(te,Yt){if(d){var ie=te.deletions;ie===null?(te.deletions=[Yt],te.flags|=16):ie.push(Yt)}}function R(te,Yt){if(!d)return null;for(;Yt!==null;)g(te,Yt),Yt=Yt.sibling;return null}function z(te,Yt){for(te=new Map;Yt!==null;)Yt.key!==null?te.set(Yt.key,Yt):te.set(Yt.index,Yt),Yt=Yt.sibling;return te}function $(te,Yt){return te=ln(te,Yt),te.index=0,te.sibling=null,te}function it(te,Yt,ie){return te.index=ie,d?(ie=te.alternate,ie!==null?(ie=ie.index,ie<Yt?(te.flags|=2,Yt):ie):(te.flags|=2,Yt)):(te.flags|=1048576,Yt)}function vt(te){return d&&te.alternate===null&&(te.flags|=2),te}function Ut(te,Yt,ie,we){return Yt===null||Yt.tag!==6?(Yt=xc(ie,te.mode,we),Yt.return=te,Yt):(Yt=$(Yt,ie),Yt.return=te,Yt)}function Vt(te,Yt,ie,we){var cr=ie.type;return cr===ct?xe(te,Yt,ie.props.children,we,ie.key):Yt!==null&&(Yt.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===q&&dd(cr)===Yt.type)?(we=$(Yt,ie.props),we.ref=tl(te,Yt,ie),we.return=te,we):(we=Sl(ie.type,ie.key,ie.props,null,te.mode,we),we.ref=tl(te,Yt,ie),we.return=te,we)}function Qt(te,Yt,ie,we){return Yt===null||Yt.tag!==4||Yt.stateNode.containerInfo!==ie.containerInfo||Yt.stateNode.implementation!==ie.implementation?(Yt=Pu(ie,te.mode,we),Yt.return=te,Yt):(Yt=$(Yt,ie.children||[]),Yt.return=te,Yt)}function xe(te,Yt,ie,we,cr){return Yt===null||Yt.tag!==7?(Yt=co(ie,te.mode,we,cr),Yt.return=te,Yt):(Yt=$(Yt,ie),Yt.return=te,Yt)}function Te(te,Yt,ie){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Yt=xc(""+Yt,te.mode,ie),Yt.return=te,Yt;if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case tt:return ie=Sl(Yt.type,Yt.key,Yt.props,null,te.mode,ie),ie.ref=tl(te,null,Yt),ie.return=te,ie;case rt:return Yt=Pu(Yt,te.mode,ie),Yt.return=te,Yt;case q:var we=Yt._init;return Te(te,we(Yt._payload),ie)}if(Ei(Yt)||et(Yt))return Yt=co(Yt,te.mode,ie,null),Yt.return=te,Yt;No(te,Yt)}return null}function ve(te,Yt,ie,we){var cr=Yt!==null?Yt.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return cr!==null?null:Ut(te,Yt,""+ie,we);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case tt:return ie.key===cr?Vt(te,Yt,ie,we):null;case rt:return ie.key===cr?Qt(te,Yt,ie,we):null;case q:return cr=ie._init,ve(te,Yt,cr(ie._payload),we)}if(Ei(ie)||et(ie))return cr!==null?null:xe(te,Yt,ie,we,null);No(te,ie)}return null}function $e(te,Yt,ie,we,cr){if(typeof we=="string"&&we!==""||typeof we=="number")return te=te.get(ie)||null,Ut(Yt,te,""+we,cr);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case tt:return te=te.get(we.key===null?ie:we.key)||null,Vt(Yt,te,we,cr);case rt:return te=te.get(we.key===null?ie:we.key)||null,Qt(Yt,te,we,cr);case q:var Sr=we._init;return $e(te,Yt,ie,Sr(we._payload),cr)}if(Ei(we)||et(we))return te=te.get(ie)||null,xe(Yt,te,we,cr,null);No(Yt,we)}return null}function rr(te,Yt,ie,we){for(var cr=null,Sr=null,br=Yt,Ir=Yt=0,es=null;br!==null&&Ir<ie.length;Ir++){br.index>Ir?(es=br,br=null):es=br.sibling;var Kr=ve(te,br,ie[Ir],we);if(Kr===null){br===null&&(br=es);break}d&&br&&Kr.alternate===null&&g(te,br),Yt=it(Kr,Yt,Ir),Sr===null?cr=Kr:Sr.sibling=Kr,Sr=Kr,br=es}if(Ir===ie.length)return R(te,br),ni&&ti(te,Ir),cr;if(br===null){for(;Ir<ie.length;Ir++)br=Te(te,ie[Ir],we),br!==null&&(Yt=it(br,Yt,Ir),Sr===null?cr=br:Sr.sibling=br,Sr=br);return ni&&ti(te,Ir),cr}for(br=z(te,br);Ir<ie.length;Ir++)es=$e(br,te,Ir,ie[Ir],we),es!==null&&(d&&es.alternate!==null&&br.delete(es.key===null?Ir:es.key),Yt=it(es,Yt,Ir),Sr===null?cr=es:Sr.sibling=es,Sr=es);return d&&br.forEach(function(fo){return g(te,fo)}),ni&&ti(te,Ir),cr}function lr(te,Yt,ie,we){var cr=et(ie);if(typeof cr!="function")throw Error(M(150));if(ie=cr.call(ie),ie==null)throw Error(M(151));for(var Sr=cr=null,br=Yt,Ir=Yt=0,es=null,Kr=ie.next();br!==null&&!Kr.done;Ir++,Kr=ie.next()){br.index>Ir?(es=br,br=null):es=br.sibling;var fo=ve(te,br,Kr.value,we);if(fo===null){br===null&&(br=es);break}d&&br&&fo.alternate===null&&g(te,br),Yt=it(fo,Yt,Ir),Sr===null?cr=fo:Sr.sibling=fo,Sr=fo,br=es}if(Kr.done)return R(te,br),ni&&ti(te,Ir),cr;if(br===null){for(;!Kr.done;Ir++,Kr=ie.next())Kr=Te(te,Kr.value,we),Kr!==null&&(Yt=it(Kr,Yt,Ir),Sr===null?cr=Kr:Sr.sibling=Kr,Sr=Kr);return ni&&ti(te,Ir),cr}for(br=z(te,br);!Kr.done;Ir++,Kr=ie.next())Kr=$e(br,te,Ir,Kr.value,we),Kr!==null&&(d&&Kr.alternate!==null&&br.delete(Kr.key===null?Ir:Kr.key),Yt=it(Kr,Yt,Ir),Sr===null?cr=Kr:Sr.sibling=Kr,Sr=Kr);return d&&br.forEach(function(Rp){return g(te,Rp)}),ni&&ti(te,Ir),cr}function _i(te,Yt,ie,we){if(typeof ie=="object"&&ie!==null&&ie.type===ct&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case tt:t:{for(var cr=ie.key,Sr=Yt;Sr!==null;){if(Sr.key===cr){if(cr=ie.type,cr===ct){if(Sr.tag===7){R(te,Sr.sibling),Yt=$(Sr,ie.props.children),Yt.return=te,te=Yt;break t}}else if(Sr.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===q&&dd(cr)===Sr.type){R(te,Sr.sibling),Yt=$(Sr,ie.props),Yt.ref=tl(te,Sr,ie),Yt.return=te,te=Yt;break t}R(te,Sr);break}else g(te,Sr);Sr=Sr.sibling}ie.type===ct?(Yt=co(ie.props.children,te.mode,we,ie.key),Yt.return=te,te=Yt):(we=Sl(ie.type,ie.key,ie.props,null,te.mode,we),we.ref=tl(te,Yt,ie),we.return=te,te=we)}return vt(te);case rt:t:{for(Sr=ie.key;Yt!==null;){if(Yt.key===Sr)if(Yt.tag===4&&Yt.stateNode.containerInfo===ie.containerInfo&&Yt.stateNode.implementation===ie.implementation){R(te,Yt.sibling),Yt=$(Yt,ie.children||[]),Yt.return=te,te=Yt;break t}else{R(te,Yt);break}else g(te,Yt);Yt=Yt.sibling}Yt=Pu(ie,te.mode,we),Yt.return=te,te=Yt}return vt(te);case q:return Sr=ie._init,_i(te,Yt,Sr(ie._payload),we)}if(Ei(ie))return rr(te,Yt,ie,we);if(et(ie))return lr(te,Yt,ie,we);No(te,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,Yt!==null&&Yt.tag===6?(R(te,Yt.sibling),Yt=$(Yt,ie),Yt.return=te,te=Yt):(R(te,Yt),Yt=xc(ie,te.mode,we),Yt.return=te,te=Yt),vt(te)):R(te,Yt)}return _i}var Do=fd(!0),Dh=fd(!1),el={},Tn=xn(el),rl=xn(el),ma=xn(el);function oo(d){if(d===el)throw Error(M(174));return d}function il(d,g){switch(jr(ma,g),jr(rl,d),jr(Tn,el),d=g.nodeType,d){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Si(null,"");break;default:d=d===8?g.parentNode:g,g=d.namespaceURI||null,d=d.tagName,g=Si(g,d)}mi(Tn),jr(Tn,g)}function Bo(){mi(Tn),mi(rl),mi(ma)}function Bh(d){oo(ma.current);var g=oo(Tn.current),R=Si(g,d.type);g!==R&&(jr(rl,d),jr(Tn,R))}function Lh(d){rl.current===d&&(mi(Tn),mi(rl))}var Jr=xn(0);function Ps(d){for(var g=d;g!==null;){if(g.tag===13){var R=g.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||R.data==="$?"||R.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var kh=[];function zn(){for(var d=0;d<kh.length;d++)kh[d]._workInProgressVersionPrimary=null;kh.length=0}var Lo=st.ReactCurrentDispatcher,Uh=st.ReactCurrentBatchConfig,Qi=0,oi=null,zi=null,Xi=null,ou=!1,sl=!1,nl=0,Ff=0;function os(){throw Error(M(321))}function Gh(d,g){if(g===null)return!1;for(var R=0;R<g.length&&R<d.length;R++)if(!rn(d[R],g[R]))return!1;return!0}function Vh(d,g,R,z,$,it){if(Qi=it,oi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Lo.current=d===null||d.memoizedState===null?$h:Df,d=R(z,$),sl){it=0;do{if(sl=!1,nl=0,25<=it)throw Error(M(301));it+=1,Xi=zi=null,g.updateQueue=null,Lo.current=Bf,d=R(z,$)}while(sl)}if(Lo.current=fu,g=zi!==null&&zi.next!==null,Qi=0,Xi=zi=oi=null,ou=!1,g)throw Error(M(300));return d}function zh(){var d=nl!==0;return nl=0,d}function En(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?oi.memoizedState=Xi=d:Xi=Xi.next=d,Xi}function Ys(){if(zi===null){var d=oi.alternate;d=d!==null?d.memoizedState:null}else d=zi.next;var g=Xi===null?oi.memoizedState:Xi.next;if(g!==null)Xi=g,zi=d;else{if(d===null)throw Error(M(310));zi=d,d={memoizedState:zi.memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},Xi===null?oi.memoizedState=Xi=d:Xi=Xi.next=d}return Xi}function ol(d,g){return typeof g=="function"?g(d):g}function Hh(d){var g=Ys(),R=g.queue;if(R===null)throw Error(M(311));R.lastRenderedReducer=d;var z=zi,$=z.baseQueue,it=R.pending;if(it!==null){if($!==null){var vt=$.next;$.next=it.next,it.next=vt}z.baseQueue=$=it,R.pending=null}if($!==null){it=$.next,z=z.baseState;var Ut=vt=null,Vt=null,Qt=it;do{var xe=Qt.lane;if((Qi&xe)===xe)Vt!==null&&(Vt=Vt.next={lane:0,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null}),z=Qt.hasEagerState?Qt.eagerState:d(z,Qt.action);else{var Te={lane:xe,action:Qt.action,hasEagerState:Qt.hasEagerState,eagerState:Qt.eagerState,next:null};Vt===null?(Ut=Vt=Te,vt=z):Vt=Vt.next=Te,oi.lanes|=xe,Xn|=xe}Qt=Qt.next}while(Qt!==null&&Qt!==it);Vt===null?vt=z:Vt.next=Ut,rn(z,g.memoizedState)||(ki=!0),g.memoizedState=z,g.baseState=vt,g.baseQueue=Vt,R.lastRenderedState=z}if(d=R.interleaved,d!==null){$=d;do it=$.lane,oi.lanes|=it,Xn|=it,$=$.next;while($!==d)}else $===null&&(R.lanes=0);return[g.memoizedState,R.dispatch]}function au(d){var g=Ys(),R=g.queue;if(R===null)throw Error(M(311));R.lastRenderedReducer=d;var z=R.dispatch,$=R.pending,it=g.memoizedState;if($!==null){R.pending=null;var vt=$=$.next;do it=d(it,vt.action),vt=vt.next;while(vt!==$);rn(it,g.memoizedState)||(ki=!0),g.memoizedState=it,g.baseQueue===null&&(g.baseState=it),R.lastRenderedState=it}return[it,z]}function lu(){}function pd(d,g){var R=oi,z=Ys(),$=g(),it=!rn(z.memoizedState,$);if(it&&(z.memoizedState=$,ki=!0),z=z.queue,Xh(uu.bind(null,R,z,d),[d]),z.getSnapshot!==g||it||Xi!==null&&Xi.memoizedState.tag&1){if(R.flags|=2048,al(9,gd.bind(null,R,z,$,g),void 0,null),Bi===null)throw Error(M(349));Qi&30||md(R,g,$)}return $}function md(d,g,R){d.flags|=16384,d={getSnapshot:g,value:R},g=oi.updateQueue,g===null?(g={lastEffect:null,stores:null},oi.updateQueue=g,g.stores=[d]):(R=g.stores,R===null?g.stores=[d]:R.push(d))}function gd(d,g,R,z){g.value=R,g.getSnapshot=z,yd(g)&&jh(d)}function uu(d,g,R){return R(function(){yd(g)&&jh(d)})}function yd(d){var g=d.getSnapshot;d=d.value;try{var R=g();return!rn(d,R)}catch(z){return!0}}function jh(d){var g=Vn(d,1);g!==null&&Is(g,d,1,-1)}function ga(d){var g=En();return typeof d=="function"&&(d=d()),g.memoizedState=g.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:d},g.queue=d,d=d.dispatch=Nf.bind(null,oi,d),[g.memoizedState,d]}function al(d,g,R,z){return d={tag:d,create:g,destroy:R,deps:z,next:null},g=oi.updateQueue,g===null?(g={lastEffect:null,stores:null},oi.updateQueue=g,g.lastEffect=d.next=d):(R=g.lastEffect,R===null?g.lastEffect=d.next=d:(z=R.next,R.next=d,d.next=z,g.lastEffect=d)),d}function vd(){return Ys().memoizedState}function hu(d,g,R,z){var $=En();oi.flags|=d,$.memoizedState=al(1|g,R,void 0,z===void 0?null:z)}function ko(d,g,R,z){var $=Ys();z=z===void 0?null:z;var it=void 0;if(zi!==null){var vt=zi.memoizedState;if(it=vt.destroy,z!==null&&Gh(z,vt.deps)){$.memoizedState=al(g,R,it,z);return}}oi.flags|=d,$.memoizedState=al(1|g,R,it,z)}function _d(d,g){return hu(8390656,8,d,g)}function Xh(d,g){return ko(2048,8,d,g)}function xd(d,g){return ko(4,2,d,g)}function Td(d,g){return ko(4,4,d,g)}function Ed(d,g){if(typeof g=="function")return d=d(),g(d),function(){g(null)};if(g!=null)return d=d(),g.current=d,function(){g.current=null}}function Sd(d,g,R){return R=R!=null?R.concat([d]):null,ko(4,4,Ed.bind(null,g,d),R)}function cu(){}function bd(d,g){var R=Ys();g=g===void 0?null:g;var z=R.memoizedState;return z!==null&&g!==null&&Gh(g,z[1])?z[0]:(R.memoizedState=[d,g],d)}function Ad(d,g){var R=Ys();g=g===void 0?null:g;var z=R.memoizedState;return z!==null&&g!==null&&Gh(g,z[1])?z[0]:(d=d(),R.memoizedState=[d,g],d)}function wd(d,g,R){return Qi&21?(rn(R,g)||(R=Nt(),oi.lanes|=R,Xn|=R,d.baseState=!0),g):(d.baseState&&(d.baseState=!1,ki=!0),d.memoizedState=R)}function du(d,g){var R=zt;zt=R!==0&&4>R?R:4,d(!0);var z=Uh.transition;Uh.transition={};try{d(!1),g()}finally{zt=R,Uh.transition=z}}function Cd(){return Ys().memoizedState}function Pd(d,g,R){var z=Wn(d);if(R={lane:z,action:R,hasEagerState:!1,eagerState:null,next:null},Md(d))Wh(g,R);else if(R=Ih(d,g,R,z),R!==null){var $=ds();Is(R,d,z,$),Rd(R,g,z)}}function Nf(d,g,R){var z=Wn(d),$={lane:z,action:R,hasEagerState:!1,eagerState:null,next:null};if(Md(d))Wh(g,$);else{var it=d.alternate;if(d.lanes===0&&(it===null||it.lanes===0)&&(it=g.lastRenderedReducer,it!==null))try{var vt=g.lastRenderedState,Ut=it(vt,R);if($.hasEagerState=!0,$.eagerState=Ut,rn(Ut,vt)){var Vt=g.interleaved;Vt===null?($.next=$,Rh(g)):($.next=Vt.next,Vt.next=$),g.interleaved=$;return}}catch(Qt){}finally{}R=Ih(d,g,$,z),R!==null&&($=ds(),Is(R,d,z,$),Rd(R,g,z))}}function Md(d){var g=d.alternate;return d===oi||g!==null&&g===oi}function Wh(d,g){sl=ou=!0;var R=d.pending;R===null?g.next=g:(g.next=R.next,R.next=g),d.pending=g}function Rd(d,g,R){if(R&4194240){var z=g.lanes;z&=d.pendingLanes,R|=z,g.lanes=R,Zt(d,R)}}var fu={readContext:$s,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useInsertionEffect:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useSyncExternalStore:os,useId:os,unstable_isNewReconciler:!1},$h={readContext:$s,useCallback:function(d,g){return En().memoizedState=[d,g===void 0?null:g],d},useContext:$s,useEffect:_d,useImperativeHandle:function(d,g,R){return R=R!=null?R.concat([d]):null,hu(4194308,4,Ed.bind(null,g,d),R)},useLayoutEffect:function(d,g){return hu(4194308,4,d,g)},useInsertionEffect:function(d,g){return hu(4,2,d,g)},useMemo:function(d,g){var R=En();return g=g===void 0?null:g,d=d(),R.memoizedState=[d,g],d},useReducer:function(d,g,R){var z=En();return g=R!==void 0?R(g):g,z.memoizedState=z.baseState=g,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:g},z.queue=d,d=d.dispatch=Pd.bind(null,oi,d),[z.memoizedState,d]},useRef:function(d){var g=En();return d={current:d},g.memoizedState=d},useState:ga,useDebugValue:cu,useDeferredValue:function(d){return En().memoizedState=d},useTransition:function(){var d=ga(!1),g=d[0];return d=du.bind(null,d[1]),En().memoizedState=d,[g,d]},useMutableSource:function(){},useSyncExternalStore:function(d,g,R){var z=oi,$=En();if(ni){if(R===void 0)throw Error(M(407));R=R()}else{if(R=g(),Bi===null)throw Error(M(349));Qi&30||md(z,g,R)}$.memoizedState=R;var it={value:R,getSnapshot:g};return $.queue=it,_d(uu.bind(null,z,it,d),[d]),z.flags|=2048,al(9,gd.bind(null,z,it,R,g),void 0,null),R},useId:function(){var d=En(),g=Bi.identifierPrefix;if(ni){var R=Ws,z=so;R=(z&~(1<<32-vs(z)-1)).toString(32)+R,g=":"+g+"R"+R,R=nl++,0<R&&(g+="H"+R.toString(32)),g+=":"}else R=Ff++,g=":"+g+"r"+R.toString(32)+":";return d.memoizedState=g},unstable_isNewReconciler:!1},Df={readContext:$s,useCallback:bd,useContext:$s,useEffect:Xh,useImperativeHandle:Sd,useInsertionEffect:xd,useLayoutEffect:Td,useMemo:Ad,useReducer:Hh,useRef:vd,useState:function(){return Hh(ol)},useDebugValue:cu,useDeferredValue:function(d){var g=Ys();return wd(g,zi.memoizedState,d)},useTransition:function(){var d=Hh(ol)[0],g=Ys().memoizedState;return[d,g]},useMutableSource:lu,useSyncExternalStore:pd,useId:Cd,unstable_isNewReconciler:!1},Bf={readContext:$s,useCallback:bd,useContext:$s,useEffect:Xh,useImperativeHandle:Sd,useInsertionEffect:xd,useLayoutEffect:Td,useMemo:Ad,useReducer:au,useRef:vd,useState:function(){return au(ol)},useDebugValue:cu,useDeferredValue:function(d){var g=Ys();return zi===null?g.memoizedState=d:wd(g,zi.memoizedState,d)},useTransition:function(){var d=au(ol)[0],g=Ys().memoizedState;return[d,g]},useMutableSource:lu,useSyncExternalStore:pd,useId:Cd,unstable_isNewReconciler:!1};function ya(d,g){try{var R="",z=g;do R+=Gt(z),z=z.return;while(z);var $=R}catch(it){$=`
Error generating stack: `+it.message+`
`+it.stack}return{value:d,source:g,stack:$,digest:null}}function Yh(d,g,R){return{value:d,source:null,stack:R!=null?R:null,digest:g!=null?g:null}}function ll(d,g){try{console.error(g.value)}catch(R){setTimeout(function(){throw R})}}var ks=typeof WeakMap=="function"?WeakMap:Map;function ul(d,g,R){R=Vi(-1,R),R.tag=3,R.payload={element:null};var z=g.value;return R.callback=function(){uc||(uc=!0,jd=z),ll(d,g)},R}function Sn(d,g,R){R=Vi(-1,R),R.tag=3;var z=d.type.getDerivedStateFromError;if(typeof z=="function"){var $=g.value;R.payload=function(){return z($)},R.callback=function(){ll(d,g)}}var it=d.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(R.callback=function(){ll(d,g),typeof z!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var vt=g.stack;this.componentDidCatch(g.value,{componentStack:vt!==null?vt:""})}),R}function Uo(d,g,R){var z=d.pingCache;if(z===null){z=d.pingCache=new ks;var $=new Set;z.set(g,$)}else $=z.get(g),$===void 0&&($=new Set,z.set(g,$));$.has(R)||($.add(R),d=jf.bind(null,d,g,R),g.then(d,d))}function Kh(d){do{var g;if((g=d.tag===13)&&(g=d.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return d;d=d.return}while(d!==null);return null}function Id(d,g,R,z,$){return d.mode&1?(d.flags|=65536,d.lanes=$,d):(d===g?d.flags|=65536:(d.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(g=Vi(-1,1),g.tag=2,Ls(R,g,1))),R.lanes|=1),d)}var Lf=st.ReactCurrentOwner,ki=!1;function Ji(d,g,R,z){g.child=d===null?Dh(g,null,R,z):Do(g,d.child,R,z)}function hl(d,g,R,z,$){R=R.render;var it=g.ref;return da(g,$),z=Vh(d,g,R,z,it,$),R=zh(),d!==null&&!ki?(g.updateQueue=d.updateQueue,g.flags&=-2053,d.lanes&=~$,Hn(d,g,$)):(ni&&R&&xh(g),g.flags|=1,Ji(d,g,z,$),g.child)}function Od(d,g,R,z,$){if(d===null){var it=R.type;return typeof it=="function"&&!Cu(it)&&it.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(g.tag=15,g.type=it,Zh(d,g,it,z,$)):(d=Sl(R.type,null,z,g,g.mode,$),d.ref=g.ref,d.return=g,g.child=d)}if(it=d.child,!(d.lanes&$)){var vt=it.memoizedProps;if(R=R.compare,R=R!==null?R:Jo,R(vt,z)&&d.ref===g.ref)return Hn(d,g,$)}return g.flags|=1,d=ln(it,z),d.ref=g.ref,d.return=g,g.child=d}function Zh(d,g,R,z,$){if(d!==null){var it=d.memoizedProps;if(Jo(it,z)&&d.ref===g.ref)if(ki=!1,g.pendingProps=z=it,(d.lanes&$)!==0)d.flags&131072&&(ki=!0);else return g.lanes=d.lanes,Hn(d,g,$)}return Qh(d,g,R,z,$)}function Fd(d,g,R){var z=g.pendingProps,$=z.children,it=d!==null?d.memoizedState:null;if(z.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(jn,cs),cs|=R;else{if(!(R&1073741824))return d=it!==null?it.baseLanes|R:R,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:d,cachePool:null,transitions:null},g.updateQueue=null,jr(jn,cs),cs|=d,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},z=it!==null?it.baseLanes:R,jr(jn,cs),cs|=z}else it!==null?(z=it.baseLanes|R,g.memoizedState=null):z=R,jr(jn,cs),cs|=z;return Ji(d,g,$,R),g.child}function cl(d,g){var R=g.ref;(d===null&&R!==null||d!==null&&d.ref!==R)&&(g.flags|=512,g.flags|=2097152)}function Qh(d,g,R,z,$){var it=As(R)?Ro:Zi.current;return it=na(g,it),da(g,$),R=Vh(d,g,R,z,it,$),z=zh(),d!==null&&!ki?(g.updateQueue=d.updateQueue,g.flags&=-2053,d.lanes&=~$,Hn(d,g,$)):(ni&&z&&xh(g),g.flags|=1,Ji(d,g,R,$),g.child)}function dl(d,g,R,z,$){if(As(R)){var it=!0;Ja(g)}else it=!1;if(da(g,$),g.stateNode===null)mu(d,g),Fh(g,R,z),Nh(g,R,z,$),z=!0;else if(d===null){var vt=g.stateNode,Ut=g.memoizedProps;vt.props=Ut;var Vt=vt.context,Qt=R.contextType;typeof Qt=="object"&&Qt!==null?Qt=$s(Qt):(Qt=As(R)?Ro:Zi.current,Qt=na(g,Qt));var xe=R.getDerivedStateFromProps,Te=typeof xe=="function"||typeof vt.getSnapshotBeforeUpdate=="function";Te||typeof vt.UNSAFE_componentWillReceiveProps!="function"&&typeof vt.componentWillReceiveProps!="function"||(Ut!==z||Vt!==Qt)&&cd(g,vt,z,Qt),hs=!1;var ve=g.memoizedState;vt.state=ve,fa(g,z,vt,$),Vt=g.memoizedState,Ut!==z||ve!==Vt||bs.current||hs?(typeof xe=="function"&&(Oh(g,R,xe,z),Vt=g.memoizedState),(Ut=hs||nu(g,R,Ut,z,ve,Vt,Qt))?(Te||typeof vt.UNSAFE_componentWillMount!="function"&&typeof vt.componentWillMount!="function"||(typeof vt.componentWillMount=="function"&&vt.componentWillMount(),typeof vt.UNSAFE_componentWillMount=="function"&&vt.UNSAFE_componentWillMount()),typeof vt.componentDidMount=="function"&&(g.flags|=4194308)):(typeof vt.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=z,g.memoizedState=Vt),vt.props=z,vt.state=Vt,vt.context=Qt,z=Ut):(typeof vt.componentDidMount=="function"&&(g.flags|=4194308),z=!1)}else{vt=g.stateNode,qa(d,g),Ut=g.memoizedProps,Qt=g.type===g.elementType?Ut:Bs(g.type,Ut),vt.props=Qt,Te=g.pendingProps,ve=vt.context,Vt=R.contextType,typeof Vt=="object"&&Vt!==null?Vt=$s(Vt):(Vt=As(R)?Ro:Zi.current,Vt=na(g,Vt));var $e=R.getDerivedStateFromProps;(xe=typeof $e=="function"||typeof vt.getSnapshotBeforeUpdate=="function")||typeof vt.UNSAFE_componentWillReceiveProps!="function"&&typeof vt.componentWillReceiveProps!="function"||(Ut!==Te||ve!==Vt)&&cd(g,vt,z,Vt),hs=!1,ve=g.memoizedState,vt.state=ve,fa(g,z,vt,$);var rr=g.memoizedState;Ut!==Te||ve!==rr||bs.current||hs?(typeof $e=="function"&&(Oh(g,R,$e,z),rr=g.memoizedState),(Qt=hs||nu(g,R,Qt,z,ve,rr,Vt)||!1)?(xe||typeof vt.UNSAFE_componentWillUpdate!="function"&&typeof vt.componentWillUpdate!="function"||(typeof vt.componentWillUpdate=="function"&&vt.componentWillUpdate(z,rr,Vt),typeof vt.UNSAFE_componentWillUpdate=="function"&&vt.UNSAFE_componentWillUpdate(z,rr,Vt)),typeof vt.componentDidUpdate=="function"&&(g.flags|=4),typeof vt.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof vt.componentDidUpdate!="function"||Ut===d.memoizedProps&&ve===d.memoizedState||(g.flags|=4),typeof vt.getSnapshotBeforeUpdate!="function"||Ut===d.memoizedProps&&ve===d.memoizedState||(g.flags|=1024),g.memoizedProps=z,g.memoizedState=rr),vt.props=z,vt.state=rr,vt.context=Vt,z=Qt):(typeof vt.componentDidUpdate!="function"||Ut===d.memoizedProps&&ve===d.memoizedState||(g.flags|=4),typeof vt.getSnapshotBeforeUpdate!="function"||Ut===d.memoizedProps&&ve===d.memoizedState||(g.flags|=1024),z=!1)}return Jh(d,g,R,z,it,$)}function Jh(d,g,R,z,$,it){cl(d,g);var vt=(g.flags&128)!==0;if(!z&&!vt)return $&&_h(g,R,!1),Hn(d,g,it);z=g.stateNode,Lf.current=g;var Ut=vt&&typeof R.getDerivedStateFromError!="function"?null:z.render();return g.flags|=1,d!==null&&vt?(g.child=Do(g,d.child,null,it),g.child=Do(g,null,Ut,it)):Ji(d,g,Ut,it),g.memoizedState=z.state,$&&_h(g,R,!0),g.child}function Nd(d){var g=d.stateNode;g.pendingContext?vh(d,g.pendingContext,g.pendingContext!==g.context):g.context&&vh(d,g.context,!1),il(d,g.containerInfo)}function Dd(d,g,R,z,$){return ca(),Ah($),g.flags|=256,Ji(d,g,R,z),g.child}var qh={dehydrated:null,treeContext:null,retryLane:0};function tc(d){return{baseLanes:d,cachePool:null,transitions:null}}function Bd(d,g,R){var z=g.pendingProps,$=Jr.current,it=!1,vt=(g.flags&128)!==0,Ut;if((Ut=vt)||(Ut=d!==null&&d.memoizedState===null?!1:($&2)!==0),Ut?(it=!0,g.flags&=-129):(d===null||d.memoizedState!==null)&&($|=1),jr(Jr,$&1),d===null)return bh(g),d=g.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(g.mode&1?d.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(vt=z.children,d=z.fallback,it?(z=g.mode,it=g.child,vt={mode:"hidden",children:vt},!(z&1)&&it!==null?(it.childLanes=0,it.pendingProps=vt):it=bl(vt,z,0,null),d=co(d,z,R,null),it.return=g,d.return=g,it.sibling=d,g.child=it,g.child.memoizedState=tc(R),g.memoizedState=qh,d):ec(g,vt));if($=d.memoizedState,$!==null&&(Ut=$.dehydrated,Ut!==null))return kf(d,g,vt,z,Ut,$,R);if(it){it=z.fallback,vt=g.mode,$=d.child,Ut=$.sibling;var Vt={mode:"hidden",children:z.children};return!(vt&1)&&g.child!==$?(z=g.child,z.childLanes=0,z.pendingProps=Vt,g.deletions=null):(z=ln($,Vt),z.subtreeFlags=$.subtreeFlags&14680064),Ut!==null?it=ln(Ut,it):(it=co(it,vt,R,null),it.flags|=2),it.return=g,z.return=g,z.sibling=it,g.child=z,z=it,it=g.child,vt=d.child.memoizedState,vt=vt===null?tc(R):{baseLanes:vt.baseLanes|R,cachePool:null,transitions:vt.transitions},it.memoizedState=vt,it.childLanes=d.childLanes&~R,g.memoizedState=qh,z}return it=d.child,d=it.sibling,z=ln(it,{mode:"visible",children:z.children}),!(g.mode&1)&&(z.lanes=R),z.return=g,z.sibling=null,d!==null&&(R=g.deletions,R===null?(g.deletions=[d],g.flags|=16):R.push(d)),g.child=z,g.memoizedState=null,z}function ec(d,g){return g=bl({mode:"visible",children:g},d.mode,0,null),g.return=d,d.child=g}function pu(d,g,R,z){return z!==null&&Ah(z),Do(g,d.child,null,R),d=ec(g,g.pendingProps.children),d.flags|=2,g.memoizedState=null,d}function kf(d,g,R,z,$,it,vt){if(R)return g.flags&256?(g.flags&=-257,z=Yh(Error(M(422))),pu(d,g,vt,z)):g.memoizedState!==null?(g.child=d.child,g.flags|=128,null):(it=z.fallback,$=g.mode,z=bl({mode:"visible",children:z.children},$,0,null),it=co(it,$,vt,null),it.flags|=2,z.return=g,it.return=g,z.sibling=it,g.child=z,g.mode&1&&Do(g,d.child,null,vt),g.child.memoizedState=tc(vt),g.memoizedState=qh,it);if(!(g.mode&1))return pu(d,g,vt,null);if($.data==="$!"){if(z=$.nextSibling&&$.nextSibling.dataset,z)var Ut=z.dgst;return z=Ut,it=Error(M(419)),z=Yh(it,z,void 0),pu(d,g,vt,z)}if(Ut=(vt&d.childLanes)!==0,ki||Ut){if(z=Bi,z!==null){switch(vt&-vt){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=$&(z.suspendedLanes|vt)?0:$,$!==0&&$!==it.retryLane&&(it.retryLane=$,Vn(d,$),Is(z,d,$,-1))}return mc(),z=Yh(Error(M(421))),pu(d,g,vt,z)}return $.data==="$?"?(g.flags|=128,g.child=d.child,g=vc.bind(null,d),$._reactRetry=g,null):(d=it.treeContext,wi=io($.nextSibling),Cs=g,ni=!0,on=null,d!==null&&(ws[Ds++]=so,ws[Ds++]=Ws,ws[Ds++]=ha,so=d.id,Ws=d.overflow,ha=g),g=ec(g,z.children),g.flags|=4096,g)}function Ld(d,g,R){d.lanes|=g;var z=d.alternate;z!==null&&(z.lanes|=g),Mh(d.return,g,R)}function rc(d,g,R,z,$){var it=d.memoizedState;it===null?d.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:z,tail:R,tailMode:$}:(it.isBackwards=g,it.rendering=null,it.renderingStartTime=0,it.last=z,it.tail=R,it.tailMode=$)}function kd(d,g,R){var z=g.pendingProps,$=z.revealOrder,it=z.tail;if(Ji(d,g,z.children,R),z=Jr.current,z&2)z=z&1|2,g.flags|=128;else{if(d!==null&&d.flags&128)t:for(d=g.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Ld(d,R,g);else if(d.tag===19)Ld(d,R,g);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===g)break t;for(;d.sibling===null;){if(d.return===null||d.return===g)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}z&=1}if(jr(Jr,z),!(g.mode&1))g.memoizedState=null;else switch($){case"forwards":for(R=g.child,$=null;R!==null;)d=R.alternate,d!==null&&Ps(d)===null&&($=R),R=R.sibling;R=$,R===null?($=g.child,g.child=null):($=R.sibling,R.sibling=null),rc(g,!1,$,R,it);break;case"backwards":for(R=null,$=g.child,g.child=null;$!==null;){if(d=$.alternate,d!==null&&Ps(d)===null){g.child=$;break}d=$.sibling,$.sibling=R,R=$,$=d}rc(g,!0,R,null,it);break;case"together":rc(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function mu(d,g){!(g.mode&1)&&d!==null&&(d.alternate=null,g.alternate=null,g.flags|=2)}function Hn(d,g,R){if(d!==null&&(g.dependencies=d.dependencies),Xn|=g.lanes,!(R&g.childLanes))return null;if(d!==null&&g.child!==d.child)throw Error(M(153));if(g.child!==null){for(d=g.child,R=ln(d,d.pendingProps),g.child=R,R.return=g;d.sibling!==null;)d=d.sibling,R=R.sibling=ln(d,d.pendingProps),R.return=g;R.sibling=null}return g.child}function Ud(d,g,R){switch(g.tag){case 3:Nd(g),ca();break;case 5:Bh(g);break;case 1:As(g.type)&&Ja(g);break;case 4:il(g,g.stateNode.containerInfo);break;case 10:var z=g.type._context,$=g.memoizedProps.value;jr(ru,z._currentValue),z._currentValue=$;break;case 13:if(z=g.memoizedState,z!==null)return z.dehydrated!==null?(jr(Jr,Jr.current&1),g.flags|=128,null):R&g.child.childLanes?Bd(d,g,R):(jr(Jr,Jr.current&1),d=Hn(d,g,R),d!==null?d.sibling:null);jr(Jr,Jr.current&1);break;case 19:if(z=(R&g.childLanes)!==0,d.flags&128){if(z)return kd(d,g,R);g.flags|=128}if($=g.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),jr(Jr,Jr.current),z)break;return null;case 22:case 23:return g.lanes=0,Fd(d,g,R)}return Hn(d,g,R)}var Gd,Us,gu,ic;Gd=function(d,g){for(var R=g.child;R!==null;){if(R.tag===5||R.tag===6)d.appendChild(R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===g)break;for(;R.sibling===null;){if(R.return===null||R.return===g)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},Us=function(){},gu=function(d,g,R,z){var $=d.memoizedProps;if($!==z){d=g.stateNode,oo(Tn.current);var it=null;switch(R){case"input":$=oe(d,$),z=oe(d,z),it=[];break;case"select":$=ht({},$,{value:void 0}),z=ht({},z,{value:void 0}),it=[];break;case"textarea":$=Fe(d,$),z=Fe(d,z),it=[];break;default:typeof $.onClick!="function"&&typeof z.onClick=="function"&&(d.onclick=ro)}Ke(R,z);var vt;R=null;for(Qt in $)if(!z.hasOwnProperty(Qt)&&$.hasOwnProperty(Qt)&&$[Qt]!=null)if(Qt==="style"){var Ut=$[Qt];for(vt in Ut)Ut.hasOwnProperty(vt)&&(R||(R={}),R[vt]="")}else Qt!=="dangerouslySetInnerHTML"&&Qt!=="children"&&Qt!=="suppressContentEditableWarning"&&Qt!=="suppressHydrationWarning"&&Qt!=="autoFocus"&&(C.hasOwnProperty(Qt)?it||(it=[]):(it=it||[]).push(Qt,null));for(Qt in z){var Vt=z[Qt];if(Ut=$!=null?$[Qt]:void 0,z.hasOwnProperty(Qt)&&Vt!==Ut&&(Vt!=null||Ut!=null))if(Qt==="style")if(Ut){for(vt in Ut)!Ut.hasOwnProperty(vt)||Vt&&Vt.hasOwnProperty(vt)||(R||(R={}),R[vt]="");for(vt in Vt)Vt.hasOwnProperty(vt)&&Ut[vt]!==Vt[vt]&&(R||(R={}),R[vt]=Vt[vt])}else R||(it||(it=[]),it.push(Qt,R)),R=Vt;else Qt==="dangerouslySetInnerHTML"?(Vt=Vt?Vt.__html:void 0,Ut=Ut?Ut.__html:void 0,Vt!=null&&Ut!==Vt&&(it=it||[]).push(Qt,Vt)):Qt==="children"?typeof Vt!="string"&&typeof Vt!="number"||(it=it||[]).push(Qt,""+Vt):Qt!=="suppressContentEditableWarning"&&Qt!=="suppressHydrationWarning"&&(C.hasOwnProperty(Qt)?(Vt!=null&&Qt==="onScroll"&&pi("scroll",d),it||Ut===Vt||(it=[])):(it=it||[]).push(Qt,Vt))}R&&(it=it||[]).push("style",R);var Qt=it;(g.updateQueue=Qt)&&(g.flags|=4)}},ic=function(d,g,R,z){R!==z&&(g.flags|=4)};function fl(d,g){if(!ni)switch(d.tailMode){case"hidden":g=d.tail;for(var R=null;g!==null;)g.alternate!==null&&(R=g),g=g.sibling;R===null?d.tail=null:R.sibling=null;break;case"collapsed":R=d.tail;for(var z=null;R!==null;)R.alternate!==null&&(z=R),R=R.sibling;z===null?g||d.tail===null?d.tail=null:d.tail.sibling=null:z.sibling=null}}function as(d){var g=d.alternate!==null&&d.alternate.child===d.child,R=0,z=0;if(g)for(var $=d.child;$!==null;)R|=$.lanes|$.childLanes,z|=$.subtreeFlags&14680064,z|=$.flags&14680064,$.return=d,$=$.sibling;else for($=d.child;$!==null;)R|=$.lanes|$.childLanes,z|=$.subtreeFlags,z|=$.flags,$.return=d,$=$.sibling;return d.subtreeFlags|=z,d.childLanes=R,g}function Uf(d,g,R){var z=g.pendingProps;switch(Th(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(g),null;case 1:return As(g.type)&&Qa(),as(g),null;case 3:return z=g.stateNode,Bo(),mi(bs),mi(Zi),zn(),z.pendingContext&&(z.context=z.pendingContext,z.pendingContext=null),(d===null||d.child===null)&&(eu(g)?g.flags|=4:d===null||d.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,on!==null&&(cc(on),on=null))),Us(d,g),as(g),null;case 5:Lh(g);var $=oo(ma.current);if(R=g.type,d!==null&&g.stateNode!=null)gu(d,g,R,z,$),d.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!z){if(g.stateNode===null)throw Error(M(166));return as(g),null}if(d=oo(Tn.current),eu(g)){z=g.stateNode,R=g.type;var it=g.memoizedProps;switch(z[sn]=g,z[Ya]=it,d=(g.mode&1)!==0,R){case"dialog":pi("cancel",z),pi("close",z);break;case"iframe":case"object":case"embed":pi("load",z);break;case"video":case"audio":for($=0;$<Ln.length;$++)pi(Ln[$],z);break;case"source":pi("error",z);break;case"img":case"image":case"link":pi("error",z),pi("load",z);break;case"details":pi("toggle",z);break;case"input":Le(z,it),pi("invalid",z);break;case"select":z._wrapperState={wasMultiple:!!it.multiple},pi("invalid",z);break;case"textarea":Li(z,it),pi("invalid",z)}Ke(R,it),$=null;for(var vt in it)if(it.hasOwnProperty(vt)){var Ut=it[vt];vt==="children"?typeof Ut=="string"?z.textContent!==Ut&&(it.suppressHydrationWarning!==!0&&Ql(z.textContent,Ut,d),$=["children",Ut]):typeof Ut=="number"&&z.textContent!==""+Ut&&(it.suppressHydrationWarning!==!0&&Ql(z.textContent,Ut,d),$=["children",""+Ut]):C.hasOwnProperty(vt)&&Ut!=null&&vt==="onScroll"&&pi("scroll",z)}switch(R){case"input":ue(z),ui(z,it,!0);break;case"textarea":ue(z),Xr(z);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(z.onclick=ro)}z=$,g.updateQueue=z,z!==null&&(g.flags|=4)}else{vt=$.nodeType===9?$:$.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=dr(R)),d==="http://www.w3.org/1999/xhtml"?R==="script"?(d=vt.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof z.is=="string"?d=vt.createElement(R,{is:z.is}):(d=vt.createElement(R),R==="select"&&(vt=d,z.multiple?vt.multiple=!0:z.size&&(vt.size=z.size))):d=vt.createElementNS(d,R),d[sn]=g,d[Ya]=z,Gd(d,g,!1,!1),g.stateNode=d;t:{switch(vt=gr(R,z),R){case"dialog":pi("cancel",d),pi("close",d),$=z;break;case"iframe":case"object":case"embed":pi("load",d),$=z;break;case"video":case"audio":for($=0;$<Ln.length;$++)pi(Ln[$],d);$=z;break;case"source":pi("error",d),$=z;break;case"img":case"image":case"link":pi("error",d),pi("load",d),$=z;break;case"details":pi("toggle",d),$=z;break;case"input":Le(d,z),$=oe(d,z),pi("invalid",d);break;case"option":$=z;break;case"select":d._wrapperState={wasMultiple:!!z.multiple},$=ht({},z,{value:void 0}),pi("invalid",d);break;case"textarea":Li(d,z),$=Fe(d,z),pi("invalid",d);break;default:$=z}Ke(R,$),Ut=$;for(it in Ut)if(Ut.hasOwnProperty(it)){var Vt=Ut[it];it==="style"?Mt(d,Vt):it==="dangerouslySetInnerHTML"?(Vt=Vt?Vt.__html:void 0,Vt!=null&&ms(d,Vt)):it==="children"?typeof Vt=="string"?(R!=="textarea"||Vt!=="")&&rs(d,Vt):typeof Vt=="number"&&rs(d,""+Vt):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(C.hasOwnProperty(it)?Vt!=null&&it==="onScroll"&&pi("scroll",d):Vt!=null&&j(d,it,Vt,vt))}switch(R){case"input":ue(d),ui(d,z,!1);break;case"textarea":ue(d),Xr(d);break;case"option":z.value!=null&&d.setAttribute("value",""+Kt(z.value));break;case"select":d.multiple=!!z.multiple,it=z.value,it!=null?Oi(d,!!z.multiple,it,!1):z.defaultValue!=null&&Oi(d,!!z.multiple,z.defaultValue,!0);break;default:typeof $.onClick=="function"&&(d.onclick=ro)}switch(R){case"button":case"input":case"select":case"textarea":z=!!z.autoFocus;break t;case"img":z=!0;break t;default:z=!1}}z&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return as(g),null;case 6:if(d&&g.stateNode!=null)ic(d,g,d.memoizedProps,z);else{if(typeof z!="string"&&g.stateNode===null)throw Error(M(166));if(R=oo(ma.current),oo(Tn.current),eu(g)){if(z=g.stateNode,R=g.memoizedProps,z[sn]=g,(it=z.nodeValue!==R)&&(d=Cs,d!==null))switch(d.tag){case 3:Ql(z.nodeValue,R,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Ql(z.nodeValue,R,(d.mode&1)!==0)}it&&(g.flags|=4)}else z=(R.nodeType===9?R:R.ownerDocument).createTextNode(z),z[sn]=g,g.stateNode=z}return as(g),null;case 13:if(mi(Jr),z=g.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(ni&&wi!==null&&g.mode&1&&!(g.flags&128))ad(),ca(),g.flags|=98560,it=!1;else if(it=eu(g),z!==null&&z.dehydrated!==null){if(d===null){if(!it)throw Error(M(318));if(it=g.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(M(317));it[sn]=g}else ca(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;as(g),it=!1}else on!==null&&(cc(on),on=null),it=!0;if(!it)return g.flags&65536?g:null}return g.flags&128?(g.lanes=R,g):(z=z!==null,z!==(d!==null&&d.memoizedState!==null)&&z&&(g.child.flags|=8192,g.mode&1&&(d===null||Jr.current&1?Wi===0&&(Wi=3):mc())),g.updateQueue!==null&&(g.flags|=4),as(g),null);case 4:return Bo(),Us(d,g),d===null&&Wa(g.stateNode.containerInfo),as(g),null;case 10:return Ph(g.type._context),as(g),null;case 17:return As(g.type)&&Qa(),as(g),null;case 19:if(mi(Jr),it=g.memoizedState,it===null)return as(g),null;if(z=(g.flags&128)!==0,vt=it.rendering,vt===null)if(z)fl(it,!1);else{if(Wi!==0||d!==null&&d.flags&128)for(d=g.child;d!==null;){if(vt=Ps(d),vt!==null){for(g.flags|=128,fl(it,!1),z=vt.updateQueue,z!==null&&(g.updateQueue=z,g.flags|=4),g.subtreeFlags=0,z=R,R=g.child;R!==null;)it=R,d=z,it.flags&=14680066,vt=it.alternate,vt===null?(it.childLanes=0,it.lanes=d,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=vt.childLanes,it.lanes=vt.lanes,it.child=vt.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=vt.memoizedProps,it.memoizedState=vt.memoizedState,it.updateQueue=vt.updateQueue,it.type=vt.type,d=vt.dependencies,it.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),R=R.sibling;return jr(Jr,Jr.current&1|2),g.child}d=d.sibling}it.tail!==null&&Ci()>Ea&&(g.flags|=128,z=!0,fl(it,!1),g.lanes=4194304)}else{if(!z)if(d=Ps(vt),d!==null){if(g.flags|=128,z=!0,R=d.updateQueue,R!==null&&(g.updateQueue=R,g.flags|=4),fl(it,!0),it.tail===null&&it.tailMode==="hidden"&&!vt.alternate&&!ni)return as(g),null}else 2*Ci()-it.renderingStartTime>Ea&&R!==1073741824&&(g.flags|=128,z=!0,fl(it,!1),g.lanes=4194304);it.isBackwards?(vt.sibling=g.child,g.child=vt):(R=it.last,R!==null?R.sibling=vt:g.child=vt,it.last=vt)}return it.tail!==null?(g=it.tail,it.rendering=g,it.tail=g.sibling,it.renderingStartTime=Ci(),g.sibling=null,R=Jr.current,jr(Jr,z?R&1|2:R&1),g):(as(g),null);case 22:case 23:return fc(),z=g.memoizedState!==null,d!==null&&d.memoizedState!==null!==z&&(g.flags|=8192),z&&g.mode&1?cs&1073741824&&(as(g),g.subtreeFlags&6&&(g.flags|=8192)):as(g),null;case 24:return null;case 25:return null}throw Error(M(156,g.tag))}function Gf(d,g){switch(Th(g),g.tag){case 1:return As(g.type)&&Qa(),d=g.flags,d&65536?(g.flags=d&-65537|128,g):null;case 3:return Bo(),mi(bs),mi(Zi),zn(),d=g.flags,d&65536&&!(d&128)?(g.flags=d&-65537|128,g):null;case 5:return Lh(g),null;case 13:if(mi(Jr),d=g.memoizedState,d!==null&&d.dehydrated!==null){if(g.alternate===null)throw Error(M(340));ca()}return d=g.flags,d&65536?(g.flags=d&-65537|128,g):null;case 19:return mi(Jr),null;case 4:return Bo(),null;case 10:return Ph(g.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var yu=!1,ls=!1,Vf=typeof WeakSet=="function"?WeakSet:Set,qe=null;function va(d,g){var R=d.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(z){Ii(d,g,z)}else R.current=null}function _a(d,g,R){try{R()}catch(z){Ii(d,g,z)}}var Vd=!1;function zd(d,g){if(ph=qn,d=sh(),nh(d)){if("selectionStart"in d)var R={start:d.selectionStart,end:d.selectionEnd};else t:{R=(R=d.ownerDocument)&&R.defaultView||window;var z=R.getSelection&&R.getSelection();if(z&&z.rangeCount!==0){R=z.anchorNode;var $=z.anchorOffset,it=z.focusNode;z=z.focusOffset;try{R.nodeType,it.nodeType}catch(we){R=null;break t}var vt=0,Ut=-1,Vt=-1,Qt=0,xe=0,Te=d,ve=null;e:for(;;){for(var $e;Te!==R||$!==0&&Te.nodeType!==3||(Ut=vt+$),Te!==it||z!==0&&Te.nodeType!==3||(Vt=vt+z),Te.nodeType===3&&(vt+=Te.nodeValue.length),($e=Te.firstChild)!==null;)ve=Te,Te=$e;for(;;){if(Te===d)break e;if(ve===R&&++Qt===$&&(Ut=vt),ve===it&&++xe===z&&(Vt=vt),($e=Te.nextSibling)!==null)break;Te=ve,ve=Te.parentNode}Te=$e}R=Ut===-1||Vt===-1?null:{start:Ut,end:Vt}}else R=null}R=R||{start:0,end:0}}else R=null;for(mh={focusedElem:d,selectionRange:R},qn=!1,qe=g;qe!==null;)if(g=qe,d=g.child,(g.subtreeFlags&1028)!==0&&d!==null)d.return=g,qe=d;else for(;qe!==null;){g=qe;try{var rr=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(rr!==null){var lr=rr.memoizedProps,_i=rr.memoizedState,te=g.stateNode,Yt=te.getSnapshotBeforeUpdate(g.elementType===g.type?lr:Bs(g.type,lr),_i);te.__reactInternalSnapshotBeforeUpdate=Yt}break;case 3:var ie=g.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(we){Ii(g,g.return,we)}if(d=g.sibling,d!==null){d.return=g.return,qe=d;break}qe=g.return}return rr=Vd,Vd=!1,rr}function pl(d,g,R){var z=g.updateQueue;if(z=z!==null?z.lastEffect:null,z!==null){var $=z=z.next;do{if(($.tag&d)===d){var it=$.destroy;$.destroy=void 0,it!==void 0&&_a(g,R,it)}$=$.next}while($!==z)}}function ao(d,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var R=g=g.next;do{if((R.tag&d)===d){var z=R.create;R.destroy=z()}R=R.next}while(R!==g)}}function vu(d){var g=d.ref;if(g!==null){var R=d.stateNode;switch(d.tag){case 5:d=R;break;default:d=R}typeof g=="function"?g(d):g.current=d}}function _u(d){var g=d.alternate;g!==null&&(d.alternate=null,_u(g)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(g=d.stateNode,g!==null&&(delete g[sn],delete g[Ya],delete g[wo],delete g[Co],delete g[yh])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function sc(d){return d.tag===5||d.tag===3||d.tag===4}function nc(d){t:for(;;){for(;d.sibling===null;){if(d.return===null||sc(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue t;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Ms(d,g,R){var z=d.tag;if(z===5||z===6)d=d.stateNode,g?R.nodeType===8?R.parentNode.insertBefore(d,g):R.insertBefore(d,g):(R.nodeType===8?(g=R.parentNode,g.insertBefore(d,R)):(g=R,g.appendChild(d)),R=R._reactRootContainer,R!=null||g.onclick!==null||(g.onclick=ro));else if(z!==4&&(d=d.child,d!==null))for(Ms(d,g,R),d=d.sibling;d!==null;)Ms(d,g,R),d=d.sibling}function bn(d,g,R){var z=d.tag;if(z===5||z===6)d=d.stateNode,g?R.insertBefore(d,g):R.appendChild(d);else if(z!==4&&(d=d.child,d!==null))for(bn(d,g,R),d=d.sibling;d!==null;)bn(d,g,R),d=d.sibling}var Mi=null,An=!1;function wn(d,g,R){for(R=R.child;R!==null;)ml(d,g,R),R=R.sibling}function ml(d,g,R){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(Os,R)}catch(Ut){}switch(R.tag){case 5:ls||va(R,g);case 6:var z=Mi,$=An;Mi=null,wn(d,g,R),Mi=z,An=$,Mi!==null&&(An?(d=Mi,R=R.stateNode,d.nodeType===8?d.parentNode.removeChild(R):d.removeChild(R)):Mi.removeChild(R.stateNode));break;case 18:Mi!==null&&(An?(d=Mi,R=R.stateNode,d.nodeType===8?gh(d.parentNode,R):d.nodeType===1&&gh(d,R),Jn(d)):gh(Mi,R.stateNode));break;case 4:z=Mi,$=An,Mi=R.stateNode.containerInfo,An=!0,wn(d,g,R),Mi=z,An=$;break;case 0:case 11:case 14:case 15:if(!ls&&(z=R.updateQueue,z!==null&&(z=z.lastEffect,z!==null))){$=z=z.next;do{var it=$,vt=it.destroy;it=it.tag,vt!==void 0&&(it&2||it&4)&&_a(R,g,vt),$=$.next}while($!==z)}wn(d,g,R);break;case 1:if(!ls&&(va(R,g),z=R.stateNode,typeof z.componentWillUnmount=="function"))try{z.props=R.memoizedProps,z.state=R.memoizedState,z.componentWillUnmount()}catch(Ut){Ii(R,g,Ut)}wn(d,g,R);break;case 21:wn(d,g,R);break;case 22:R.mode&1?(ls=(z=ls)||R.memoizedState!==null,wn(d,g,R),ls=z):wn(d,g,R);break;default:wn(d,g,R)}}function oc(d){var g=d.updateQueue;if(g!==null){d.updateQueue=null;var R=d.stateNode;R===null&&(R=d.stateNode=new Vf),g.forEach(function(z){var $=El.bind(null,d,z);R.has(z)||(R.add(z),z.then($,$))})}}function qi(d,g){var R=g.deletions;if(R!==null)for(var z=0;z<R.length;z++){var $=R[z];try{var it=d,vt=g,Ut=vt;t:for(;Ut!==null;){switch(Ut.tag){case 5:Mi=Ut.stateNode,An=!1;break t;case 3:Mi=Ut.stateNode.containerInfo,An=!0;break t;case 4:Mi=Ut.stateNode.containerInfo,An=!0;break t}Ut=Ut.return}if(Mi===null)throw Error(M(160));ml(it,vt,$),Mi=null,An=!1;var Vt=$.alternate;Vt!==null&&(Vt.return=null),$.return=null}catch(Qt){Ii($,g,Qt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)Hd(g,d),g=g.sibling}function Hd(d,g){var R=d.alternate,z=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(qi(g,d),Cn(d),z&4){try{pl(3,d,d.return),ao(3,d)}catch(lr){Ii(d,d.return,lr)}try{pl(5,d,d.return)}catch(lr){Ii(d,d.return,lr)}}break;case 1:qi(g,d),Cn(d),z&512&&R!==null&&va(R,R.return);break;case 5:if(qi(g,d),Cn(d),z&512&&R!==null&&va(R,R.return),d.flags&32){var $=d.stateNode;try{rs($,"")}catch(lr){Ii(d,d.return,lr)}}if(z&4&&($=d.stateNode,$!=null)){var it=d.memoizedProps,vt=R!==null?R.memoizedProps:it,Ut=d.type,Vt=d.updateQueue;if(d.updateQueue=null,Vt!==null)try{Ut==="input"&&it.type==="radio"&&it.name!=null&&Fr($,it),gr(Ut,vt);var Qt=gr(Ut,it);for(vt=0;vt<Vt.length;vt+=2){var xe=Vt[vt],Te=Vt[vt+1];xe==="style"?Mt($,Te):xe==="dangerouslySetInnerHTML"?ms($,Te):xe==="children"?rs($,Te):j($,xe,Te,Qt)}switch(Ut){case"input":kr($,it);break;case"textarea":hi($,it);break;case"select":var ve=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!it.multiple;var $e=it.value;$e!=null?Oi($,!!it.multiple,$e,!1):ve!==!!it.multiple&&(it.defaultValue!=null?Oi($,!!it.multiple,it.defaultValue,!0):Oi($,!!it.multiple,it.multiple?[]:"",!1))}$[Ya]=it}catch(lr){Ii(d,d.return,lr)}}break;case 6:if(qi(g,d),Cn(d),z&4){if(d.stateNode===null)throw Error(M(162));$=d.stateNode,it=d.memoizedProps;try{$.nodeValue=it}catch(lr){Ii(d,d.return,lr)}}break;case 3:if(qi(g,d),Cn(d),z&4&&R!==null&&R.memoizedState.isDehydrated)try{Jn(g.containerInfo)}catch(lr){Ii(d,d.return,lr)}break;case 4:qi(g,d),Cn(d);break;case 13:qi(g,d),Cn(d),$=d.child,$.flags&8192&&(it=$.memoizedState!==null,$.stateNode.isHidden=it,!it||$.alternate!==null&&$.alternate.memoizedState!==null||(lc=Ci())),z&4&&oc(d);break;case 22:if(xe=R!==null&&R.memoizedState!==null,d.mode&1?(ls=(Qt=ls)||xe,qi(g,d),ls=Qt):qi(g,d),Cn(d),z&8192){if(Qt=d.memoizedState!==null,(d.stateNode.isHidden=Qt)&&!xe&&d.mode&1)for(qe=d,xe=d.child;xe!==null;){for(Te=qe=xe;qe!==null;){switch(ve=qe,$e=ve.child,ve.tag){case 0:case 11:case 14:case 15:pl(4,ve,ve.return);break;case 1:va(ve,ve.return);var rr=ve.stateNode;if(typeof rr.componentWillUnmount=="function"){z=ve,R=ve.return;try{g=z,rr.props=g.memoizedProps,rr.state=g.memoizedState,rr.componentWillUnmount()}catch(lr){Ii(z,R,lr)}}break;case 5:va(ve,ve.return);break;case 22:if(ve.memoizedState!==null){xu(Te);continue}}$e!==null?($e.return=ve,qe=$e):xu(Te)}xe=xe.sibling}t:for(xe=null,Te=d;;){if(Te.tag===5){if(xe===null){xe=Te;try{$=Te.stateNode,Qt?(it=$.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(Ut=Te.stateNode,Vt=Te.memoizedProps.style,vt=Vt!=null&&Vt.hasOwnProperty("display")?Vt.display:null,Ut.style.display=wt("display",vt))}catch(lr){Ii(d,d.return,lr)}}}else if(Te.tag===6){if(xe===null)try{Te.stateNode.nodeValue=Qt?"":Te.memoizedProps}catch(lr){Ii(d,d.return,lr)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===d)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===d)break t;for(;Te.sibling===null;){if(Te.return===null||Te.return===d)break t;xe===Te&&(xe=null),Te=Te.return}xe===Te&&(xe=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:qi(g,d),Cn(d),z&4&&oc(d);break;case 21:break;default:qi(g,d),Cn(d)}}function Cn(d){var g=d.flags;if(g&2){try{t:{for(var R=d.return;R!==null;){if(sc(R)){var z=R;break t}R=R.return}throw Error(M(160))}switch(z.tag){case 5:var $=z.stateNode;z.flags&32&&(rs($,""),z.flags&=-33);var it=nc(d);bn(d,it,$);break;case 3:case 4:var vt=z.stateNode.containerInfo,Ut=nc(d);Ms(d,Ut,vt);break;default:throw Error(M(161))}}catch(Vt){Ii(d,d.return,Vt)}d.flags&=-3}g&4096&&(d.flags&=-4097)}function ac(d,g,R){qe=d,gl(d,g,R)}function gl(d,g,R){for(var z=(d.mode&1)!==0;qe!==null;){var $=qe,it=$.child;if($.tag===22&&z){var vt=$.memoizedState!==null||yu;if(!vt){var Ut=$.alternate,Vt=Ut!==null&&Ut.memoizedState!==null||ls;Ut=yu;var Qt=ls;if(yu=vt,(ls=Vt)&&!Qt)for(qe=$;qe!==null;)vt=qe,Vt=vt.child,vt.tag===22&&vt.memoizedState!==null?xa($):Vt!==null?(Vt.return=vt,qe=Vt):xa($);for(;it!==null;)qe=it,gl(it,g,R),it=it.sibling;qe=$,yu=Ut,ls=Qt}yl(d,g,R)}else $.subtreeFlags&8772&&it!==null?(it.return=$,qe=it):yl(d,g,R)}}function yl(d){for(;qe!==null;){var g=qe;if(g.flags&8772){var R=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:ls||ao(5,g);break;case 1:var z=g.stateNode;if(g.flags&4&&!ls)if(R===null)z.componentDidMount();else{var $=g.elementType===g.type?R.memoizedProps:Bs(g.type,R.memoizedProps);z.componentDidUpdate($,R.memoizedState,z.__reactInternalSnapshotBeforeUpdate)}var it=g.updateQueue;it!==null&&ud(g,it,z);break;case 3:var vt=g.updateQueue;if(vt!==null){if(R=null,g.child!==null)switch(g.child.tag){case 5:R=g.child.stateNode;break;case 1:R=g.child.stateNode}ud(g,vt,R)}break;case 5:var Ut=g.stateNode;if(R===null&&g.flags&4){R=Ut;var Vt=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":Vt.autoFocus&&R.focus();break;case"img":Vt.src&&(R.src=Vt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Qt=g.alternate;if(Qt!==null){var xe=Qt.memoizedState;if(xe!==null){var Te=xe.dehydrated;Te!==null&&Jn(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}ls||g.flags&512&&vu(g)}catch(ve){Ii(g,g.return,ve)}}if(g===d){qe=null;break}if(R=g.sibling,R!==null){R.return=g.return,qe=R;break}qe=g.return}}function xu(d){for(;qe!==null;){var g=qe;if(g===d){qe=null;break}var R=g.sibling;if(R!==null){R.return=g.return,qe=R;break}qe=g.return}}function xa(d){for(;qe!==null;){var g=qe;try{switch(g.tag){case 0:case 11:case 15:var R=g.return;try{ao(4,g)}catch(Vt){Ii(g,R,Vt)}break;case 1:var z=g.stateNode;if(typeof z.componentDidMount=="function"){var $=g.return;try{z.componentDidMount()}catch(Vt){Ii(g,$,Vt)}}var it=g.return;try{vu(g)}catch(Vt){Ii(g,it,Vt)}break;case 5:var vt=g.return;try{vu(g)}catch(Vt){Ii(g,vt,Vt)}}}catch(Vt){Ii(g,g.return,Vt)}if(g===d){qe=null;break}var Ut=g.sibling;if(Ut!==null){Ut.return=g.return,qe=Ut;break}qe=g.return}}var Tu=Math.ceil,vl=st.ReactCurrentDispatcher,lo=st.ReactCurrentOwner,Gs=st.ReactCurrentBatchConfig,Yr=0,Bi=null,Ri=null,Hi=0,cs=0,jn=xn(0),Wi=0,_l=null,Xn=0,xl=0,Eu=0,Ta=null,Rs=null,lc=0,Ea=1/0,Pn=null,uc=!1,jd=null,Go=null,Vo=!1,zo=null,hc=0,Su=0,Xd=null,Tl=-1,bu=0;function ds(){return Yr&6?Ci():Tl!==-1?Tl:Tl=Ci()}function Wn(d){return d.mode&1?Yr&2&&Hi!==0?Hi&-Hi:Of.transition!==null?(bu===0&&(bu=Nt()),bu):(d=zt,d!==0||(d=window.event,d=d===void 0?16:kl(d.type)),d):1}function Is(d,g,R,z){if(50<Su)throw Su=0,Xd=null,Error(M(185));It(d,R,z),(!(Yr&2)||d!==Bi)&&(d===Bi&&(!(Yr&2)&&(xl|=R),Wi===4&&fs(d,Hi)),ts(d,z),R===1&&Yr===0&&!(g.mode&1)&&(Ea=Ci()+500,oa&&Gn()))}function ts(d,g){var R=d.callbackNode;bt(d,g);var z=Z(d,d===Bi?Hi:0);if(z===0)R!==null&&Nl(R),d.callbackNode=null,d.callbackPriority=0;else if(g=z&-z,d.callbackPriority!==g){if(R!=null&&Nl(R),g===1)d.tag===0?If(Au.bind(null,d)):sd(Au.bind(null,d)),Mf(function(){!(Yr&6)&&Gn()}),R=null;else{switch(ee(z)){case 1:R=Zo;break;case 4:R=Oa;break;case 16:R=Qs;break;case 536870912:R=Dl;break;default:R=Qs}R=Qd(R,an.bind(null,d))}d.callbackPriority=g,d.callbackNode=R}}function an(d,g){if(Tl=-1,bu=0,Yr&6)throw Error(M(327));var R=d.callbackNode;if(ho()&&d.callbackNode!==R)return null;var z=Z(d,d===Bi?Hi:0);if(z===0)return null;if(z&30||z&d.expiredLanes||g)g=wu(d,z);else{g=z;var $=Yr;Yr|=2;var it=$d();(Bi!==d||Hi!==g)&&(Pn=null,Ea=Ci()+500,uo(d,g));do try{Hf();break}catch(Ut){pc(d,Ut)}while(1);Ch(),vl.current=it,Yr=$,Ri!==null?g=0:(Bi=null,Hi=0,g=Wi)}if(g!==0){if(g===2&&($=Tt(d),$!==0&&(z=$,g=Mn(d,$))),g===1)throw R=_l,uo(d,0),fs(d,z),ts(d,Ci()),R;if(g===6)fs(d,z);else{if($=d.current.alternate,!(z&30)&&!Wd($)&&(g=wu(d,z),g===2&&(it=Tt(d),it!==0&&(z=it,g=Mn(d,it))),g===1))throw R=_l,uo(d,0),fs(d,z),ts(d,Ci()),R;switch(d.finishedWork=$,d.finishedLanes=z,g){case 0:case 1:throw Error(M(345));case 2:Ho(d,Rs,Pn);break;case 3:if(fs(d,z),(z&130023424)===z&&(g=lc+500-Ci(),10<g)){if(Z(d,0)!==0)break;if($=d.suspendedLanes,($&z)!==z){ds(),d.pingedLanes|=d.suspendedLanes&$;break}d.timeoutHandle=Jl(Ho.bind(null,d,Rs,Pn),g);break}Ho(d,Rs,Pn);break;case 4:if(fs(d,z),(z&4194240)===z)break;for(g=d.eventTimes,$=-1;0<z;){var vt=31-vs(z);it=1<<vt,vt=g[vt],vt>$&&($=vt),z&=~it}if(z=$,z=Ci()-z,z=(120>z?120:480>z?480:1080>z?1080:1920>z?1920:3e3>z?3e3:4320>z?4320:1960*Tu(z/1960))-z,10<z){d.timeoutHandle=Jl(Ho.bind(null,d,Rs,Pn),z);break}Ho(d,Rs,Pn);break;case 5:Ho(d,Rs,Pn);break;default:throw Error(M(329))}}}return ts(d,Ci()),d.callbackNode===R?an.bind(null,d):null}function Mn(d,g){var R=Ta;return d.current.memoizedState.isDehydrated&&(uo(d,g).flags|=256),d=wu(d,g),d!==2&&(g=Rs,Rs=R,g!==null&&cc(g)),d}function cc(d){Rs===null?Rs=d:Rs.push.apply(Rs,d)}function Wd(d){for(var g=d;;){if(g.flags&16384){var R=g.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var z=0;z<R.length;z++){var $=R[z],it=$.getSnapshot;$=$.value;try{if(!rn(it(),$))return!1}catch(vt){return!1}}}if(R=g.child,g.subtreeFlags&16384&&R!==null)R.return=g,g=R;else{if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function fs(d,g){for(g&=~Eu,g&=~xl,d.suspendedLanes|=g,d.pingedLanes&=~g,d=d.expirationTimes;0<g;){var R=31-vs(g),z=1<<R;d[R]=-1,g&=~z}}function Au(d){if(Yr&6)throw Error(M(327));ho();var g=Z(d,0);if(!(g&1))return ts(d,Ci()),null;var R=wu(d,g);if(d.tag!==0&&R===2){var z=Tt(d);z!==0&&(g=z,R=Mn(d,z))}if(R===1)throw R=_l,uo(d,0),fs(d,g),ts(d,Ci()),R;if(R===6)throw Error(M(345));return d.finishedWork=d.current.alternate,d.finishedLanes=g,Ho(d,Rs,Pn),ts(d,Ci()),null}function dc(d,g){var R=Yr;Yr|=1;try{return d(g)}finally{Yr=R,Yr===0&&(Ea=Ci()+500,oa&&Gn())}}function $n(d){zo!==null&&zo.tag===0&&!(Yr&6)&&ho();var g=Yr;Yr|=1;var R=Gs.transition,z=zt;try{if(Gs.transition=null,zt=1,d)return d()}finally{zt=z,Gs.transition=R,Yr=g,!(Yr&6)&&Gn()}}function fc(){cs=jn.current,mi(jn)}function uo(d,g){d.finishedWork=null,d.finishedLanes=0;var R=d.timeoutHandle;if(R!==-1&&(d.timeoutHandle=-1,ql(R)),Ri!==null)for(R=Ri.return;R!==null;){var z=R;switch(Th(z),z.tag){case 1:z=z.type.childContextTypes,z!=null&&Qa();break;case 3:Bo(),mi(bs),mi(Zi),zn();break;case 5:Lh(z);break;case 4:Bo();break;case 13:mi(Jr);break;case 19:mi(Jr);break;case 10:Ph(z.type._context);break;case 22:case 23:fc()}R=R.return}if(Bi=d,Ri=d=ln(d.current,null),Hi=cs=g,Wi=0,_l=null,Eu=xl=Xn=0,Rs=Ta=null,Oo!==null){for(g=0;g<Oo.length;g++)if(R=Oo[g],z=R.interleaved,z!==null){R.interleaved=null;var $=z.next,it=R.pending;if(it!==null){var vt=it.next;it.next=$,z.next=vt}R.pending=z}Oo=null}return d}function pc(d,g){do{var R=Ri;try{if(Ch(),Lo.current=fu,ou){for(var z=oi.memoizedState;z!==null;){var $=z.queue;$!==null&&($.pending=null),z=z.next}ou=!1}if(Qi=0,Xi=zi=oi=null,sl=!1,nl=0,lo.current=null,R===null||R.return===null){Wi=1,_l=g,Ri=null;break}t:{var it=d,vt=R.return,Ut=R,Vt=g;if(g=Hi,Ut.flags|=32768,Vt!==null&&typeof Vt=="object"&&typeof Vt.then=="function"){var Qt=Vt,xe=Ut,Te=xe.tag;if(!(xe.mode&1)&&(Te===0||Te===11||Te===15)){var ve=xe.alternate;ve?(xe.updateQueue=ve.updateQueue,xe.memoizedState=ve.memoizedState,xe.lanes=ve.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var $e=Kh(vt);if($e!==null){$e.flags&=-257,Id($e,vt,Ut,it,g),$e.mode&1&&Uo(it,Qt,g),g=$e,Vt=Qt;var rr=g.updateQueue;if(rr===null){var lr=new Set;lr.add(Vt),g.updateQueue=lr}else rr.add(Vt);break t}else{if(!(g&1)){Uo(it,Qt,g),mc();break t}Vt=Error(M(426))}}else if(ni&&Ut.mode&1){var _i=Kh(vt);if(_i!==null){!(_i.flags&65536)&&(_i.flags|=256),Id(_i,vt,Ut,it,g),Ah(ya(Vt,Ut));break t}}it=Vt=ya(Vt,Ut),Wi!==4&&(Wi=2),Ta===null?Ta=[it]:Ta.push(it),it=vt;do{switch(it.tag){case 3:it.flags|=65536,g&=-g,it.lanes|=g;var te=ul(it,Vt,g);ld(it,te);break t;case 1:Ut=Vt;var Yt=it.type,ie=it.stateNode;if(!(it.flags&128)&&(typeof Yt.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Go===null||!Go.has(ie)))){it.flags|=65536,g&=-g,it.lanes|=g;var we=Sn(it,Ut,g);ld(it,we);break t}}it=it.return}while(it!==null)}Kd(R)}catch(cr){g=cr,Ri===R&&R!==null&&(Ri=R=R.return);continue}break}while(1)}function $d(){var d=vl.current;return vl.current=fu,d===null?fu:d}function mc(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),Bi===null||!(Xn&268435455)&&!(xl&268435455)||fs(Bi,Hi)}function wu(d,g){var R=Yr;Yr|=2;var z=$d();(Bi!==d||Hi!==g)&&(Pn=null,uo(d,g));do try{zf();break}catch($){pc(d,$)}while(1);if(Ch(),Yr=R,vl.current=z,Ri!==null)throw Error(M(261));return Bi=null,Hi=0,Wi}function zf(){for(;Ri!==null;)Yd(Ri)}function Hf(){for(;Ri!==null&&!Yo();)Yd(Ri)}function Yd(d){var g=_c(d.alternate,d,cs);d.memoizedProps=d.pendingProps,g===null?Kd(d):Ri=g,lo.current=null}function Kd(d){var g=d;do{var R=g.alternate;if(d=g.return,g.flags&32768){if(R=Gf(R,g),R!==null){R.flags&=32767,Ri=R;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Wi=6,Ri=null;return}}else if(R=Uf(R,g,cs),R!==null){Ri=R;return}if(g=g.sibling,g!==null){Ri=g;return}Ri=g=d}while(g!==null);Wi===0&&(Wi=5)}function Ho(d,g,R){var z=zt,$=Gs.transition;try{Gs.transition=null,zt=1,Zd(d,g,R,z)}finally{Gs.transition=$,zt=z}return null}function Zd(d,g,R,z){do ho();while(zo!==null);if(Yr&6)throw Error(M(327));R=d.finishedWork;var $=d.finishedLanes;if(R===null)return null;if(d.finishedWork=null,d.finishedLanes=0,R===d.current)throw Error(M(177));d.callbackNode=null,d.callbackPriority=0;var it=R.lanes|R.childLanes;if($t(d,it),d===Bi&&(Ri=Bi=null,Hi=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||Vo||(Vo=!0,Qd(Qs,function(){return ho(),null})),it=(R.flags&15990)!==0,R.subtreeFlags&15990||it){it=Gs.transition,Gs.transition=null;var vt=zt;zt=1;var Ut=Yr;Yr|=4,lo.current=null,zd(d,R),Hd(R,d),wf(mh),qn=!!ph,mh=ph=null,d.current=R,ac(R,d,$),qu(),Yr=Ut,zt=vt,Gs.transition=it}else d.current=R;if(Vo&&(Vo=!1,zo=d,hc=$),it=d.pendingLanes,it===0&&(Go=null),Bl(R.stateNode,z),ts(d,Ci()),g!==null)for(z=d.onRecoverableError,R=0;R<g.length;R++)$=g[R],z($.value,{componentStack:$.stack,digest:$.digest});if(uc)throw uc=!1,d=jd,jd=null,d;return hc&1&&d.tag!==0&&ho(),it=d.pendingLanes,it&1?d===Xd?Su++:(Su=0,Xd=d):Su=0,Gn(),null}function ho(){if(zo!==null){var d=ee(hc),g=Gs.transition,R=zt;try{if(Gs.transition=null,zt=16>d?16:d,zo===null)var z=!1;else{if(d=zo,zo=null,hc=0,Yr&6)throw Error(M(331));var $=Yr;for(Yr|=4,qe=d.current;qe!==null;){var it=qe,vt=it.child;if(qe.flags&16){var Ut=it.deletions;if(Ut!==null){for(var Vt=0;Vt<Ut.length;Vt++){var Qt=Ut[Vt];for(qe=Qt;qe!==null;){var xe=qe;switch(xe.tag){case 0:case 11:case 15:pl(8,xe,it)}var Te=xe.child;if(Te!==null)Te.return=xe,qe=Te;else for(;qe!==null;){xe=qe;var ve=xe.sibling,$e=xe.return;if(_u(xe),xe===Qt){qe=null;break}if(ve!==null){ve.return=$e,qe=ve;break}qe=$e}}}var rr=it.alternate;if(rr!==null){var lr=rr.child;if(lr!==null){rr.child=null;do{var _i=lr.sibling;lr.sibling=null,lr=_i}while(lr!==null)}}qe=it}}if(it.subtreeFlags&2064&&vt!==null)vt.return=it,qe=vt;else t:for(;qe!==null;){if(it=qe,it.flags&2048)switch(it.tag){case 0:case 11:case 15:pl(9,it,it.return)}var te=it.sibling;if(te!==null){te.return=it.return,qe=te;break t}qe=it.return}}var Yt=d.current;for(qe=Yt;qe!==null;){vt=qe;var ie=vt.child;if(vt.subtreeFlags&2064&&ie!==null)ie.return=vt,qe=ie;else t:for(vt=Yt;qe!==null;){if(Ut=qe,Ut.flags&2048)try{switch(Ut.tag){case 0:case 11:case 15:ao(9,Ut)}}catch(cr){Ii(Ut,Ut.return,cr)}if(Ut===vt){qe=null;break t}var we=Ut.sibling;if(we!==null){we.return=Ut.return,qe=we;break t}qe=Ut.return}}if(Yr=$,Gn(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(Os,d)}catch(cr){}z=!0}return z}finally{zt=R,Gs.transition=g}}return!1}function gc(d,g,R){g=ya(R,g),g=ul(d,g,1),d=Ls(d,g,1),g=ds(),d!==null&&(It(d,1,g),ts(d,g))}function Ii(d,g,R){if(d.tag===3)gc(d,d,R);else for(;g!==null;){if(g.tag===3){gc(g,d,R);break}else if(g.tag===1){var z=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(Go===null||!Go.has(z))){d=ya(R,d),d=Sn(g,d,1),g=Ls(g,d,1),d=ds(),g!==null&&(It(g,1,d),ts(g,d));break}}g=g.return}}function jf(d,g,R){var z=d.pingCache;z!==null&&z.delete(g),g=ds(),d.pingedLanes|=d.suspendedLanes&R,Bi===d&&(Hi&R)===R&&(Wi===4||Wi===3&&(Hi&130023424)===Hi&&500>Ci()-lc?uo(d,0):Eu|=R),ts(d,g)}function yc(d,g){g===0&&(d.mode&1?(g=L,L<<=1,!(L&130023424)&&(L=4194304)):g=1);var R=ds();d=Vn(d,g),d!==null&&(It(d,g,R),ts(d,R))}function vc(d){var g=d.memoizedState,R=0;g!==null&&(R=g.retryLane),yc(d,R)}function El(d,g){var R=0;switch(d.tag){case 13:var z=d.stateNode,$=d.memoizedState;$!==null&&(R=$.retryLane);break;case 19:z=d.stateNode;break;default:throw Error(M(314))}z!==null&&z.delete(g),yc(d,R)}var _c;_c=function(d,g,R){if(d!==null)if(d.memoizedProps!==g.pendingProps||bs.current)ki=!0;else{if(!(d.lanes&R)&&!(g.flags&128))return ki=!1,Ud(d,g,R);ki=!!(d.flags&131072)}else ki=!1,ni&&g.flags&1048576&&nd(g,ua,g.index);switch(g.lanes=0,g.tag){case 2:var z=g.type;mu(d,g),d=g.pendingProps;var $=na(g,Zi.current);da(g,R),$=Vh(null,g,z,d,$,R);var it=zh();return g.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,As(z)?(it=!0,Ja(g)):it=!1,g.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,Fo(g),$.updater=pa,g.stateNode=$,$._reactInternals=g,Nh(g,z,d,R),g=Jh(null,g,z,!0,it,R)):(g.tag=0,ni&&it&&xh(g),Ji(null,g,$,R),g=g.child),g;case 16:z=g.elementType;t:{switch(mu(d,g),d=g.pendingProps,$=z._init,z=$(z._payload),g.type=z,$=g.tag=Wf(z),d=Bs(z,d),$){case 0:g=Qh(null,g,z,d,R);break t;case 1:g=dl(null,g,z,d,R);break t;case 11:g=hl(null,g,z,d,R);break t;case 14:g=Od(null,g,z,Bs(z.type,d),R);break t}throw Error(M(306,z,""))}return g;case 0:return z=g.type,$=g.pendingProps,$=g.elementType===z?$:Bs(z,$),Qh(d,g,z,$,R);case 1:return z=g.type,$=g.pendingProps,$=g.elementType===z?$:Bs(z,$),dl(d,g,z,$,R);case 3:t:{if(Nd(g),d===null)throw Error(M(387));z=g.pendingProps,it=g.memoizedState,$=it.element,qa(d,g),fa(g,z,null,R);var vt=g.memoizedState;if(z=vt.element,it.isDehydrated)if(it={element:z,isDehydrated:!1,cache:vt.cache,pendingSuspenseBoundaries:vt.pendingSuspenseBoundaries,transitions:vt.transitions},g.updateQueue.baseState=it,g.memoizedState=it,g.flags&256){$=ya(Error(M(423)),g),g=Dd(d,g,z,R,$);break t}else if(z!==$){$=ya(Error(M(424)),g),g=Dd(d,g,z,R,$);break t}else for(wi=io(g.stateNode.containerInfo.firstChild),Cs=g,ni=!0,on=null,R=Dh(g,null,z,R),g.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(ca(),z===$){g=Hn(d,g,R);break t}Ji(d,g,z,R)}g=g.child}return g;case 5:return Bh(g),d===null&&bh(g),z=g.type,$=g.pendingProps,it=d!==null?d.memoizedProps:null,vt=$.children,ra(z,$)?vt=null:it!==null&&ra(z,it)&&(g.flags|=32),cl(d,g),Ji(d,g,vt,R),g.child;case 6:return d===null&&bh(g),null;case 13:return Bd(d,g,R);case 4:return il(g,g.stateNode.containerInfo),z=g.pendingProps,d===null?g.child=Do(g,null,z,R):Ji(d,g,z,R),g.child;case 11:return z=g.type,$=g.pendingProps,$=g.elementType===z?$:Bs(z,$),hl(d,g,z,$,R);case 7:return Ji(d,g,g.pendingProps,R),g.child;case 8:return Ji(d,g,g.pendingProps.children,R),g.child;case 12:return Ji(d,g,g.pendingProps.children,R),g.child;case 10:t:{if(z=g.type._context,$=g.pendingProps,it=g.memoizedProps,vt=$.value,jr(ru,z._currentValue),z._currentValue=vt,it!==null)if(rn(it.value,vt)){if(it.children===$.children&&!bs.current){g=Hn(d,g,R);break t}}else for(it=g.child,it!==null&&(it.return=g);it!==null;){var Ut=it.dependencies;if(Ut!==null){vt=it.child;for(var Vt=Ut.firstContext;Vt!==null;){if(Vt.context===z){if(it.tag===1){Vt=Vi(-1,R&-R),Vt.tag=2;var Qt=it.updateQueue;if(Qt!==null){Qt=Qt.shared;var xe=Qt.pending;xe===null?Vt.next=Vt:(Vt.next=xe.next,xe.next=Vt),Qt.pending=Vt}}it.lanes|=R,Vt=it.alternate,Vt!==null&&(Vt.lanes|=R),Mh(it.return,R,g),Ut.lanes|=R;break}Vt=Vt.next}}else if(it.tag===10)vt=it.type===g.type?null:it.child;else if(it.tag===18){if(vt=it.return,vt===null)throw Error(M(341));vt.lanes|=R,Ut=vt.alternate,Ut!==null&&(Ut.lanes|=R),Mh(vt,R,g),vt=it.sibling}else vt=it.child;if(vt!==null)vt.return=it;else for(vt=it;vt!==null;){if(vt===g){vt=null;break}if(it=vt.sibling,it!==null){it.return=vt.return,vt=it;break}vt=vt.return}it=vt}Ji(d,g,$.children,R),g=g.child}return g;case 9:return $=g.type,z=g.pendingProps.children,da(g,R),$=$s($),z=z($),g.flags|=1,Ji(d,g,z,R),g.child;case 14:return z=g.type,$=Bs(z,g.pendingProps),$=Bs(z.type,$),Od(d,g,z,$,R);case 15:return Zh(d,g,g.type,g.pendingProps,R);case 17:return z=g.type,$=g.pendingProps,$=g.elementType===z?$:Bs(z,$),mu(d,g),g.tag=1,As(z)?(d=!0,Ja(g)):d=!1,da(g,R),Fh(g,z,$),Nh(g,z,$,R),Jh(null,g,z,!0,d,R);case 19:return kd(d,g,R);case 22:return Fd(d,g,R)}throw Error(M(156,g.tag))};function Qd(d,g){return $i(d,g)}function Xf(d,g,R,z){this.tag=d,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(d,g,R,z){return new Xf(d,g,R,z)}function Cu(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Wf(d){if(typeof d=="function")return Cu(d)?1:0;if(d!=null){if(d=d.$$typeof,d===xt)return 11;if(d===ot)return 14}return 2}function ln(d,g){var R=d.alternate;return R===null?(R=Ks(d.tag,g,d.key,d.mode),R.elementType=d.elementType,R.type=d.type,R.stateNode=d.stateNode,R.alternate=d,d.alternate=R):(R.pendingProps=g,R.type=d.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=d.flags&14680064,R.childLanes=d.childLanes,R.lanes=d.lanes,R.child=d.child,R.memoizedProps=d.memoizedProps,R.memoizedState=d.memoizedState,R.updateQueue=d.updateQueue,g=d.dependencies,R.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},R.sibling=d.sibling,R.index=d.index,R.ref=d.ref,R}function Sl(d,g,R,z,$,it){var vt=2;if(z=d,typeof d=="function")Cu(d)&&(vt=1);else if(typeof d=="string")vt=5;else t:switch(d){case ct:return co(R.children,$,it,g);case pt:vt=8,$|=8;break;case Rt:return d=Ks(12,R,g,$|2),d.elementType=Rt,d.lanes=it,d;case At:return d=Ks(13,R,g,$),d.elementType=At,d.lanes=it,d;case J:return d=Ks(19,R,g,$),d.elementType=J,d.lanes=it,d;case gt:return bl(R,$,it,g);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case Lt:vt=10;break t;case ut:vt=9;break t;case xt:vt=11;break t;case ot:vt=14;break t;case q:vt=16,z=null;break t}throw Error(M(130,d==null?d:typeof d,""))}return g=Ks(vt,R,g,$),g.elementType=d,g.type=z,g.lanes=it,g}function co(d,g,R,z){return d=Ks(7,d,z,g),d.lanes=R,d}function bl(d,g,R,z){return d=Ks(22,d,z,g),d.elementType=gt,d.lanes=R,d.stateNode={isHidden:!1},d}function xc(d,g,R){return d=Ks(6,d,null,g),d.lanes=R,d}function Pu(d,g,R){return g=Ks(4,d.children!==null?d.children:[],d.key,g),g.lanes=R,g.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},g}function $f(d,g,R,z,$){this.tag=g,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ht(0),this.expirationTimes=Ht(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ht(0),this.identifierPrefix=z,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function Sa(d,g,R,z,$,it,vt,Ut,Vt){return d=new $f(d,g,R,Ut,Vt),g===1?(g=1,it===!0&&(g|=8)):g=0,it=Ks(3,null,null,g),d.current=it,it.stateNode=d,it.memoizedState={element:z,isDehydrated:R,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(it),d}function Mu(d,g,R){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rt,key:z==null?null:""+z,children:d,containerInfo:g,implementation:R}}function Ru(d){if(!d)return Un;d=d._reactInternals;t:{if(Ai(d)!==d||d.tag!==1)throw Error(M(170));var g=d;do{switch(g.tag){case 3:g=g.stateNode.context;break t;case 1:if(As(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break t}}g=g.return}while(g!==null);throw Error(M(171))}if(d.tag===1){var R=d.type;if(As(R))return id(d,R,g)}return g}function Iu(d,g,R,z,$,it,vt,Ut,Vt){return d=Sa(R,z,!0,d,$,it,vt,Ut,Vt),d.context=Ru(null),R=d.current,z=ds(),$=Wn(R),it=Vi(z,$),it.callback=g!=null?g:null,Ls(R,it,$),d.current.lanes=$,It(d,$,z),ts(d,z),d}function ba(d,g,R,z){var $=g.current,it=ds(),vt=Wn($);return R=Ru(R),g.context===null?g.context=R:g.pendingContext=R,g=Vi(it,vt),g.payload={element:d},z=z===void 0?null:z,z!==null&&(g.callback=z),d=Ls($,g,vt),d!==null&&(Is(d,$,vt,it),su(d,$,vt)),vt}function Ou(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function Jd(d,g){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var R=d.retryLane;d.retryLane=R!==0&&R<g?R:g}}function Tc(d,g){Jd(d,g),(d=d.alternate)&&Jd(d,g)}function qd(){return null}var tf=typeof reportError=="function"?reportError:function(d){console.error(d)};function Aa(d){this._internalRoot=d}un.prototype.render=Aa.prototype.render=function(d){var g=this._internalRoot;if(g===null)throw Error(M(409));ba(d,g,null,null)},un.prototype.unmount=Aa.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var g=d.containerInfo;$n(function(){ba(null,d,null,null)}),g[kn]=null}};function un(d){this._internalRoot=d}un.prototype.unstable_scheduleHydration=function(d){if(d){var g=Ne();d={blockedOn:null,target:d,priority:g};for(var R=0;R<Gr.length&&g!==0&&g<Gr[R].priority;R++);Gr.splice(R,0,d),R===0&&Cr(d)}};function Rn(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function Fu(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function ef(){}function rf(d,g,R,z,$){if($){if(typeof z=="function"){var it=z;z=function(){var Qt=Ou(vt);it.call(Qt)}}var vt=Iu(g,z,d,0,null,!1,!1,"",ef);return d._reactRootContainer=vt,d[kn]=vt.current,Wa(d.nodeType===8?d.parentNode:d),$n(),vt}for(;$=d.lastChild;)d.removeChild($);if(typeof z=="function"){var Ut=z;z=function(){var Qt=Ou(Vt);Ut.call(Qt)}}var Vt=Sa(d,0,!1,null,null,!1,!1,"",ef);return d._reactRootContainer=Vt,d[kn]=Vt.current,Wa(d.nodeType===8?d.parentNode:d),$n(function(){ba(g,Vt,R,z)}),Vt}function Al(d,g,R,z,$){var it=R._reactRootContainer;if(it){var vt=it;if(typeof $=="function"){var Ut=$;$=function(){var Vt=Ou(vt);Ut.call(Vt)}}ba(g,vt,d,$)}else vt=rf(R,g,d,$,z);return Ou(vt)}ye=function(d){switch(d.tag){case 3:var g=d.stateNode;if(g.current.memoizedState.isDehydrated){var R=H(g.pendingLanes);R!==0&&(Zt(g,R|1),ts(g,Ci()),!(Yr&6)&&(Ea=Ci()+500,Gn()))}break;case 13:$n(function(){var z=Vn(d,1);if(z!==null){var $=ds();Is(z,d,1,$)}}),Tc(d,1)}},Ee=function(d){if(d.tag===13){var g=Vn(d,134217728);if(g!==null){var R=ds();Is(g,d,134217728,R)}Tc(d,134217728)}},sr=function(d){if(d.tag===13){var g=Wn(d),R=Vn(d,g);if(R!==null){var z=ds();Is(R,d,g,z)}Tc(d,g)}},Ne=function(){return zt},ar=function(d,g){var R=zt;try{return zt=d,g()}finally{zt=R}},V=function(d,g,R){switch(g){case"input":if(kr(d,R),g=R.name,R.type==="radio"&&g!=null){for(R=d;R.parentNode;)R=R.parentNode;for(R=R.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<R.length;g++){var z=R[g];if(z!==d&&z.form===d.form){var $=Za(z);if(!$)throw Error(M(90));Oe(z),kr(z,$)}}}break;case"textarea":hi(d,R);break;case"select":g=R.value,g!=null&&Oi(d,!!R.multiple,g,!1)}},se=dc,Se=$n;var sf={usingClientEntryPoint:!1,Events:[Ka,Mo,Za,Ot,Xt,dc]},wl={findFiberByHostInstance:Po,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Mp={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:st.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=gs(d),d===null?null:d.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||qd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{Os=Nu.inject(Mp),ys=Nu}catch(d){}}I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sf,I.createPortal=function(d,g){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rn(g))throw Error(M(200));return Mu(d,g,null,R)},I.createRoot=function(d,g){if(!Rn(d))throw Error(M(299));var R=!1,z="",$=tf;return g!=null&&(g.unstable_strictMode===!0&&(R=!0),g.identifierPrefix!==void 0&&(z=g.identifierPrefix),g.onRecoverableError!==void 0&&($=g.onRecoverableError)),g=Sa(d,1,!1,null,null,R,!1,z,$),d[kn]=g.current,Wa(d.nodeType===8?d.parentNode:d),new Aa(g)},I.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var g=d._reactInternals;if(g===void 0)throw typeof d.render=="function"?Error(M(188)):(d=Object.keys(d).join(","),Error(M(268,d)));return d=gs(g),d=d===null?null:d.stateNode,d},I.flushSync=function(d){return $n(d)},I.hydrate=function(d,g,R){if(!Fu(g))throw Error(M(200));return Al(null,d,g,!0,R)},I.hydrateRoot=function(d,g,R){if(!Rn(d))throw Error(M(405));var z=R!=null&&R.hydratedSources||null,$=!1,it="",vt=tf;if(R!=null&&(R.unstable_strictMode===!0&&($=!0),R.identifierPrefix!==void 0&&(it=R.identifierPrefix),R.onRecoverableError!==void 0&&(vt=R.onRecoverableError)),g=Iu(g,null,d,1,R!=null?R:null,$,!1,it,vt),d[kn]=g.current,Wa(d),z)for(d=0;d<z.length;d++)R=z[d],$=R._getVersion,$=$(R._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[R,$]:g.mutableSourceEagerHydrationData.push(R,$);return new un(g)},I.render=function(d,g,R){if(!Fu(g))throw Error(M(200));return Al(null,d,g,!1,R)},I.unmountComponentAtNode=function(d){if(!Fu(d))throw Error(M(40));return d._reactRootContainer?($n(function(){Al(null,null,d,!1,function(){d._reactRootContainer=null,d[kn]=null})}),!0):!1},I.unstable_batchedUpdates=dc,I.unstable_renderSubtreeIntoContainer=function(d,g,R,z){if(!Fu(R))throw Error(M(200));if(d==null||d._reactInternals===void 0)throw Error(M(38));return Al(d,g,R,!1,z)},I.version="18.2.0-next-9e3b772b8-20220608"},745:function(at,I,w){"use strict";var b,D=w(3935);if(!0)I.s=D.createRoot,b=D.hydrateRoot;else var M},3935:function(at,I,w){"use strict";function b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(D){console.error(D)}}b(),at.exports=w(4448)},5251:function(at,I,w){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=w(7294),D=Symbol.for("react.element"),M=Symbol.for("react.fragment"),O=Object.prototype.hasOwnProperty,C=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function p(v,y,T){var _,A={},P=null,x=null;T!==void 0&&(P=""+T),y.key!==void 0&&(P=""+y.key),y.ref!==void 0&&(x=y.ref);for(_ in y)O.call(y,_)&&!m.hasOwnProperty(_)&&(A[_]=y[_]);if(v&&v.defaultProps)for(_ in y=v.defaultProps,y)A[_]===void 0&&(A[_]=y[_]);return{$$typeof:D,type:v,key:P,ref:x,props:A,_owner:C.current}}I.Fragment=M,I.jsx=p,I.jsxs=p},2408:function(at,I){"use strict";/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=Symbol.for("react.element"),b=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),_=Symbol.iterator;function A(et){return et===null||typeof et!="object"?null:(et=_&&et[_]||et["@@iterator"],typeof et=="function"?et:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,B={};function G(et,ht,Et){this.props=et,this.context=ht,this.refs=B,this.updater=Et||P}G.prototype.isReactComponent={},G.prototype.setState=function(et,ht){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,ht,"setState")},G.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function k(){}k.prototype=G.prototype;function X(et,ht,Et){this.props=et,this.context=ht,this.refs=B,this.updater=Et||P}var Y=X.prototype=new k;Y.constructor=X,x(Y,G.prototype),Y.isPureReactComponent=!0;var j=Array.isArray,st=Object.prototype.hasOwnProperty,tt={current:null},rt={key:!0,ref:!0,__self:!0,__source:!0};function ct(et,ht,Et){var kt,Ft={},Bt=null,Gt=null;if(ht!=null)for(kt in ht.ref!==void 0&&(Gt=ht.ref),ht.key!==void 0&&(Bt=""+ht.key),ht)st.call(ht,kt)&&!rt.hasOwnProperty(kt)&&(Ft[kt]=ht[kt]);var Ct=arguments.length-2;if(Ct===1)Ft.children=Et;else if(1<Ct){for(var jt=Array(Ct),Kt=0;Kt<Ct;Kt++)jt[Kt]=arguments[Kt+2];Ft.children=jt}if(et&&et.defaultProps)for(kt in Ct=et.defaultProps,Ct)Ft[kt]===void 0&&(Ft[kt]=Ct[kt]);return{$$typeof:w,type:et,key:Bt,ref:Gt,props:Ft,_owner:tt.current}}function pt(et,ht){return{$$typeof:w,type:et.type,key:ht,ref:et.ref,props:et.props,_owner:et._owner}}function Rt(et){return typeof et=="object"&&et!==null&&et.$$typeof===w}function Lt(et){var ht={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(Et){return ht[Et]})}var ut=/\/+/g;function xt(et,ht){return typeof et=="object"&&et!==null&&et.key!=null?Lt(""+et.key):ht.toString(36)}function At(et,ht,Et,kt,Ft){var Bt=typeof et;(Bt==="undefined"||Bt==="boolean")&&(et=null);var Gt=!1;if(et===null)Gt=!0;else switch(Bt){case"string":case"number":Gt=!0;break;case"object":switch(et.$$typeof){case w:case b:Gt=!0}}if(Gt)return Gt=et,Ft=Ft(Gt),et=kt===""?"."+xt(Gt,0):kt,j(Ft)?(Et="",et!=null&&(Et=et.replace(ut,"$&/")+"/"),At(Ft,ht,Et,"",function(Kt){return Kt})):Ft!=null&&(Rt(Ft)&&(Ft=pt(Ft,Et+(!Ft.key||Gt&&Gt.key===Ft.key?"":(""+Ft.key).replace(ut,"$&/")+"/")+et)),ht.push(Ft)),1;if(Gt=0,kt=kt===""?".":kt+":",j(et))for(var Ct=0;Ct<et.length;Ct++){Bt=et[Ct];var jt=kt+xt(Bt,Ct);Gt+=At(Bt,ht,Et,jt,Ft)}else if(jt=A(et),typeof jt=="function")for(et=jt.call(et),Ct=0;!(Bt=et.next()).done;)Bt=Bt.value,jt=kt+xt(Bt,Ct++),Gt+=At(Bt,ht,Et,jt,Ft);else if(Bt==="object")throw ht=String(et),Error("Objects are not valid as a React child (found: "+(ht==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":ht)+"). If you meant to render a collection of children, use an array instead.");return Gt}function J(et,ht,Et){if(et==null)return et;var kt=[],Ft=0;return At(et,kt,"","",function(Bt){return ht.call(Et,Bt,Ft++)}),kt}function ot(et){if(et._status===-1){var ht=et._result;ht=ht(),ht.then(function(Et){(et._status===0||et._status===-1)&&(et._status=1,et._result=Et)},function(Et){(et._status===0||et._status===-1)&&(et._status=2,et._result=Et)}),et._status===-1&&(et._status=0,et._result=ht)}if(et._status===1)return et._result.default;throw et._result}var q={current:null},gt={transition:null},yt={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:gt,ReactCurrentOwner:tt};I.Children={map:J,forEach:function(et,ht,Et){J(et,function(){ht.apply(this,arguments)},Et)},count:function(et){var ht=0;return J(et,function(){ht++}),ht},toArray:function(et){return J(et,function(ht){return ht})||[]},only:function(et){if(!Rt(et))throw Error("React.Children.only expected to receive a single React element child.");return et}},I.Component=G,I.Fragment=D,I.Profiler=O,I.PureComponent=X,I.StrictMode=M,I.Suspense=v,I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yt,I.cloneElement=function(et,ht,Et){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var kt=x({},et.props),Ft=et.key,Bt=et.ref,Gt=et._owner;if(ht!=null){if(ht.ref!==void 0&&(Bt=ht.ref,Gt=tt.current),ht.key!==void 0&&(Ft=""+ht.key),et.type&&et.type.defaultProps)var Ct=et.type.defaultProps;for(jt in ht)st.call(ht,jt)&&!rt.hasOwnProperty(jt)&&(kt[jt]=ht[jt]===void 0&&Ct!==void 0?Ct[jt]:ht[jt])}var jt=arguments.length-2;if(jt===1)kt.children=Et;else if(1<jt){Ct=Array(jt);for(var Kt=0;Kt<jt;Kt++)Ct[Kt]=arguments[Kt+2];kt.children=Ct}return{$$typeof:w,type:et.type,key:Ft,ref:Bt,props:kt,_owner:Gt}},I.createContext=function(et){return et={$$typeof:m,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:C,_context:et},et.Consumer=et},I.createElement=ct,I.createFactory=function(et){var ht=ct.bind(null,et);return ht.type=et,ht},I.createRef=function(){return{current:null}},I.forwardRef=function(et){return{$$typeof:p,render:et}},I.isValidElement=Rt,I.lazy=function(et){return{$$typeof:T,_payload:{_status:-1,_result:et},_init:ot}},I.memo=function(et,ht){return{$$typeof:y,type:et,compare:ht===void 0?null:ht}},I.startTransition=function(et){var ht=gt.transition;gt.transition={};try{et()}finally{gt.transition=ht}},I.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},I.useCallback=function(et,ht){return q.current.useCallback(et,ht)},I.useContext=function(et){return q.current.useContext(et)},I.useDebugValue=function(){},I.useDeferredValue=function(et){return q.current.useDeferredValue(et)},I.useEffect=function(et,ht){return q.current.useEffect(et,ht)},I.useId=function(){return q.current.useId()},I.useImperativeHandle=function(et,ht,Et){return q.current.useImperativeHandle(et,ht,Et)},I.useInsertionEffect=function(et,ht){return q.current.useInsertionEffect(et,ht)},I.useLayoutEffect=function(et,ht){return q.current.useLayoutEffect(et,ht)},I.useMemo=function(et,ht){return q.current.useMemo(et,ht)},I.useReducer=function(et,ht,Et){return q.current.useReducer(et,ht,Et)},I.useRef=function(et){return q.current.useRef(et)},I.useState=function(et){return q.current.useState(et)},I.useSyncExternalStore=function(et,ht,Et){return q.current.useSyncExternalStore(et,ht,Et)},I.useTransition=function(){return q.current.useTransition()},I.version="18.2.0"},7294:function(at,I,w){"use strict";at.exports=w(2408)},5893:function(at,I,w){"use strict";at.exports=w(5251)},53:function(at,I){"use strict";/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function w(q,gt){var yt=q.length;q.push(gt);t:for(;0<yt;){var et=yt-1>>>1,ht=q[et];if(0<M(ht,gt))q[et]=gt,q[yt]=ht,yt=et;else break t}}function b(q){return q.length===0?null:q[0]}function D(q){if(q.length===0)return null;var gt=q[0],yt=q.pop();if(yt!==gt){q[0]=yt;t:for(var et=0,ht=q.length,Et=ht>>>1;et<Et;){var kt=2*(et+1)-1,Ft=q[kt],Bt=kt+1,Gt=q[Bt];if(0>M(Ft,yt))Bt<ht&&0>M(Gt,Ft)?(q[et]=Gt,q[Bt]=yt,et=Bt):(q[et]=Ft,q[kt]=yt,et=kt);else if(Bt<ht&&0>M(Gt,yt))q[et]=Gt,q[Bt]=yt,et=Bt;else break t}}return gt}function M(q,gt){var yt=q.sortIndex-gt.sortIndex;return yt!==0?yt:q.id-gt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var O=performance;I.unstable_now=function(){return O.now()}}else{var C=Date,m=C.now();I.unstable_now=function(){return C.now()-m}}var p=[],v=[],y=1,T=null,_=3,A=!1,P=!1,x=!1,B=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(q){for(var gt=b(v);gt!==null;){if(gt.callback===null)D(v);else if(gt.startTime<=q)D(v),gt.sortIndex=gt.expirationTime,w(p,gt);else break;gt=b(v)}}function Y(q){if(x=!1,X(q),!P)if(b(p)!==null)P=!0,J(j);else{var gt=b(v);gt!==null&&ot(Y,gt.startTime-q)}}function j(q,gt){P=!1,x&&(x=!1,G(rt),rt=-1),A=!0;var yt=_;try{for(X(gt),T=b(p);T!==null&&(!(T.expirationTime>gt)||q&&!Rt());){var et=T.callback;if(typeof et=="function"){T.callback=null,_=T.priorityLevel;var ht=et(T.expirationTime<=gt);gt=I.unstable_now(),typeof ht=="function"?T.callback=ht:T===b(p)&&D(p),X(gt)}else D(p);T=b(p)}if(T!==null)var Et=!0;else{var kt=b(v);kt!==null&&ot(Y,kt.startTime-gt),Et=!1}return Et}finally{T=null,_=yt,A=!1}}var st=!1,tt=null,rt=-1,ct=5,pt=-1;function Rt(){return!(I.unstable_now()-pt<ct)}function Lt(){if(tt!==null){var q=I.unstable_now();pt=q;var gt=!0;try{gt=tt(!0,q)}finally{gt?ut():(st=!1,tt=null)}}else st=!1}var ut;if(typeof k=="function")ut=function(){k(Lt)};else if(typeof MessageChannel!="undefined"){var xt=new MessageChannel,At=xt.port2;xt.port1.onmessage=Lt,ut=function(){At.postMessage(null)}}else ut=function(){B(Lt,0)};function J(q){tt=q,st||(st=!0,ut())}function ot(q,gt){rt=B(function(){q(I.unstable_now())},gt)}I.unstable_IdlePriority=5,I.unstable_ImmediatePriority=1,I.unstable_LowPriority=4,I.unstable_NormalPriority=3,I.unstable_Profiling=null,I.unstable_UserBlockingPriority=2,I.unstable_cancelCallback=function(q){q.callback=null},I.unstable_continueExecution=function(){P||A||(P=!0,J(j))},I.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<q?Math.floor(1e3/q):5},I.unstable_getCurrentPriorityLevel=function(){return _},I.unstable_getFirstCallbackNode=function(){return b(p)},I.unstable_next=function(q){switch(_){case 1:case 2:case 3:var gt=3;break;default:gt=_}var yt=_;_=gt;try{return q()}finally{_=yt}},I.unstable_pauseExecution=function(){},I.unstable_requestPaint=function(){},I.unstable_runWithPriority=function(q,gt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var yt=_;_=q;try{return gt()}finally{_=yt}},I.unstable_scheduleCallback=function(q,gt,yt){var et=I.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?et+yt:et):yt=et,q){case 1:var ht=-1;break;case 2:ht=250;break;case 5:ht=1073741823;break;case 4:ht=1e4;break;default:ht=5e3}return ht=yt+ht,q={id:y++,callback:gt,priorityLevel:q,startTime:yt,expirationTime:ht,sortIndex:-1},yt>et?(q.sortIndex=yt,w(v,q),b(p)===null&&q===b(v)&&(x?(G(rt),rt=-1):x=!0,ot(Y,yt-et))):(q.sortIndex=ht,w(p,q),P||A||(P=!0,J(j))),q},I.unstable_shouldYield=Rt,I.unstable_wrapCallback=function(q){var gt=_;return function(){var yt=_;_=gt;try{return q.apply(this,arguments)}finally{_=yt}}}},3840:function(at,I,w){"use strict";at.exports=w(53)},2490:function(at,I,w){"use strict";var b=w(210),D=w(2296),M=w(1044)(),O=w(7296),C=b("%TypeError%"),m=b("%Math.floor%");at.exports=function(v,y){if(typeof v!="function")throw new C("`fn` is not a function");if(typeof y!="number"||y<0||y>4294967295||m(y)!==y)throw new C("`length` must be a positive 32-bit integer");var T=arguments.length>2&&!!arguments[2],_=!0,A=!0;if("length"in v&&O){var P=O(v,"length");P&&!P.configurable&&(_=!1),P&&!P.writable&&(A=!1)}return(_||A||!T)&&(M?D(v,"length",y,!0,!0):D(v,"length",y)),v}},7478:function(at,I,w){"use strict";var b=w(210),D=w(1924),M=w(631),O=b("%TypeError%"),C=b("%WeakMap%",!0),m=b("%Map%",!0),p=D("WeakMap.prototype.get",!0),v=D("WeakMap.prototype.set",!0),y=D("WeakMap.prototype.has",!0),T=D("Map.prototype.get",!0),_=D("Map.prototype.set",!0),A=D("Map.prototype.has",!0),P=function(k,X){for(var Y=k,j;(j=Y.next)!==null;Y=j)if(j.key===X)return Y.next=j.next,j.next=k.next,k.next=j,j},x=function(k,X){var Y=P(k,X);return Y&&Y.value},B=function(k,X,Y){var j=P(k,X);j?j.value=Y:k.next={key:X,next:k.next,value:Y}},G=function(k,X){return!!P(k,X)};at.exports=function(){var X,Y,j,st={assert:function(tt){if(!st.has(tt))throw new O("Side channel does not contain "+M(tt))},get:function(tt){if(C&&tt&&(typeof tt=="object"||typeof tt=="function")){if(X)return p(X,tt)}else if(m){if(Y)return T(Y,tt)}else if(j)return x(j,tt)},has:function(tt){if(C&&tt&&(typeof tt=="object"||typeof tt=="function")){if(X)return y(X,tt)}else if(m){if(Y)return A(Y,tt)}else if(j)return G(j,tt);return!1},set:function(tt,rt){C&&tt&&(typeof tt=="object"||typeof tt=="function")?(X||(X=new C),v(X,tt,rt)):m?(Y||(Y=new m),_(Y,tt,rt)):(j||(j={key:{},next:null}),B(j,tt,rt))}};return st}},2511:function(at,I,w){at=w.nmd(at);var b;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(D){var M=I&&!I.nodeType&&I,O=at&&!at.nodeType&&at,C=typeof w.g=="object"&&w.g;(C.global===C||C.window===C||C.self===C)&&(D=C);var m,p=2147483647,v=36,y=1,T=26,_=38,A=700,P=72,x=128,B="-",G=/^xn--/,k=/[^\x20-\x7E]/,X=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=v-y,st=Math.floor,tt=String.fromCharCode,rt;function ct(et){throw new RangeError(Y[et])}function pt(et,ht){for(var Et=et.length,kt=[];Et--;)kt[Et]=ht(et[Et]);return kt}function Rt(et,ht){var Et=et.split("@"),kt="";Et.length>1&&(kt=Et[0]+"@",et=Et[1]),et=et.replace(X,".");var Ft=et.split("."),Bt=pt(Ft,ht).join(".");return kt+Bt}function Lt(et){for(var ht=[],Et=0,kt=et.length,Ft,Bt;Et<kt;)Ft=et.charCodeAt(Et++),Ft>=55296&&Ft<=56319&&Et<kt?(Bt=et.charCodeAt(Et++),(Bt&64512)==56320?ht.push(((Ft&1023)<<10)+(Bt&1023)+65536):(ht.push(Ft),Et--)):ht.push(Ft);return ht}function ut(et){return pt(et,function(ht){var Et="";return ht>65535&&(ht-=65536,Et+=tt(ht>>>10&1023|55296),ht=56320|ht&1023),Et+=tt(ht),Et}).join("")}function xt(et){return et-48<10?et-22:et-65<26?et-65:et-97<26?et-97:v}function At(et,ht){return et+22+75*(et<26)-((ht!=0)<<5)}function J(et,ht,Et){var kt=0;for(et=Et?st(et/A):et>>1,et+=st(et/ht);et>j*T>>1;kt+=v)et=st(et/j);return st(kt+(j+1)*et/(et+_))}function ot(et){var ht=[],Et=et.length,kt,Ft=0,Bt=x,Gt=P,Ct,jt,Kt,ne,me,ue,Oe,de,oe;for(Ct=et.lastIndexOf(B),Ct<0&&(Ct=0),jt=0;jt<Ct;++jt)et.charCodeAt(jt)>=128&&ct("not-basic"),ht.push(et.charCodeAt(jt));for(Kt=Ct>0?Ct+1:0;Kt<Et;){for(ne=Ft,me=1,ue=v;Kt>=Et&&ct("invalid-input"),Oe=xt(et.charCodeAt(Kt++)),(Oe>=v||Oe>st((p-Ft)/me))&&ct("overflow"),Ft+=Oe*me,de=ue<=Gt?y:ue>=Gt+T?T:ue-Gt,!(Oe<de);ue+=v)oe=v-de,me>st(p/oe)&&ct("overflow"),me*=oe;kt=ht.length+1,Gt=J(Ft-ne,kt,ne==0),st(Ft/kt)>p-Bt&&ct("overflow"),Bt+=st(Ft/kt),Ft%=kt,ht.splice(Ft++,0,Bt)}return ut(ht)}function q(et){var ht,Et,kt,Ft,Bt,Gt,Ct,jt,Kt,ne,me,ue=[],Oe,de,oe,Le;for(et=Lt(et),Oe=et.length,ht=x,Et=0,Bt=P,Gt=0;Gt<Oe;++Gt)me=et[Gt],me<128&&ue.push(tt(me));for(kt=Ft=ue.length,Ft&&ue.push(B);kt<Oe;){for(Ct=p,Gt=0;Gt<Oe;++Gt)me=et[Gt],me>=ht&&me<Ct&&(Ct=me);for(de=kt+1,Ct-ht>st((p-Et)/de)&&ct("overflow"),Et+=(Ct-ht)*de,ht=Ct,Gt=0;Gt<Oe;++Gt)if(me=et[Gt],me<ht&&++Et>p&&ct("overflow"),me==ht){for(jt=Et,Kt=v;ne=Kt<=Bt?y:Kt>=Bt+T?T:Kt-Bt,!(jt<ne);Kt+=v)Le=jt-ne,oe=v-ne,ue.push(tt(At(ne+Le%oe,0))),jt=st(Le/oe);ue.push(tt(At(jt,0))),Bt=J(Et,de,kt==Ft),Et=0,++kt}++Et,++ht}return ue.join("")}function gt(et){return Rt(et,function(ht){return G.test(ht)?ot(ht.slice(4).toLowerCase()):ht})}function yt(et){return Rt(et,function(ht){return k.test(ht)?"xn--"+q(ht):ht})}m={version:"1.4.1",ucs2:{decode:Lt,encode:ut},decode:ot,encode:q,toASCII:yt,toUnicode:gt},b=function(){return m}.call(I,w,I,at),b!==void 0&&(at.exports=b)})(this)},8575:function(at,I,w){"use strict";var b,D=w(2511);function M(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var O=/^([a-z0-9.+-]+:)/i,C=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r",`
`,"	"],v=["{","}","|","\\","^","`"].concat(p),y=["'"].concat(v),T=["%","/","?",";","#"].concat(y),_=["/","?","#"],A=255,P=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B={javascript:!0,"javascript:":!0},G={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},X=w(129);function Y(rt,ct,pt){if(rt&&typeof rt=="object"&&rt instanceof M)return rt;var Rt=new M;return Rt.parse(rt,ct,pt),Rt}M.prototype.parse=function(rt,ct,pt){if(typeof rt!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof rt);var Rt=rt.indexOf("?"),Lt=Rt!==-1&&Rt<rt.indexOf("#")?"?":"#",ut=rt.split(Lt),xt=/\\/g;ut[0]=ut[0].replace(xt,"/"),rt=ut.join(Lt);var At=rt;if(At=At.trim(),!pt&&rt.split("#").length===1){var J=m.exec(At);if(J)return this.path=At,this.href=At,this.pathname=J[1],J[2]?(this.search=J[2],ct?this.query=X.parse(this.search.substr(1)):this.query=this.search.substr(1)):ct&&(this.search="",this.query={}),this}var ot=O.exec(At);if(ot){ot=ot[0];var q=ot.toLowerCase();this.protocol=q,At=At.substr(ot.length)}if(pt||ot||At.match(/^\/\/[^@/]+@[^@/]+/)){var gt=At.substr(0,2)==="//";gt&&!(ot&&G[ot])&&(At=At.substr(2),this.slashes=!0)}if(!G[ot]&&(gt||ot&&!k[ot])){for(var yt=-1,et=0;et<_.length;et++){var ht=At.indexOf(_[et]);ht!==-1&&(yt===-1||ht<yt)&&(yt=ht)}var Et,kt;yt===-1?kt=At.lastIndexOf("@"):kt=At.lastIndexOf("@",yt),kt!==-1&&(Et=At.slice(0,kt),At=At.slice(kt+1),this.auth=decodeURIComponent(Et)),yt=-1;for(var et=0;et<T.length;et++){var ht=At.indexOf(T[et]);ht!==-1&&(yt===-1||ht<yt)&&(yt=ht)}yt===-1&&(yt=At.length),this.host=At.slice(0,yt),At=At.slice(yt),this.parseHost(),this.hostname=this.hostname||"";var Ft=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Ft)for(var Bt=this.hostname.split(/\./),et=0,Gt=Bt.length;et<Gt;et++){var Ct=Bt[et];if(Ct&&!Ct.match(P)){for(var jt="",Kt=0,ne=Ct.length;Kt<ne;Kt++)Ct.charCodeAt(Kt)>127?jt+="x":jt+=Ct[Kt];if(!jt.match(P)){var me=Bt.slice(0,et),ue=Bt.slice(et+1),Oe=Ct.match(x);Oe&&(me.push(Oe[1]),ue.unshift(Oe[2])),ue.length&&(At="/"+ue.join(".")+At),this.hostname=me.join(".");break}}}this.hostname.length>A?this.hostname="":this.hostname=this.hostname.toLowerCase(),Ft||(this.hostname=D.toASCII(this.hostname));var de=this.port?":"+this.port:"",oe=this.hostname||"";this.host=oe+de,this.href+=this.host,Ft&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),At[0]!=="/"&&(At="/"+At))}if(!B[q])for(var et=0,Gt=y.length;et<Gt;et++){var Le=y[et];if(At.indexOf(Le)!==-1){var Fr=encodeURIComponent(Le);Fr===Le&&(Fr=escape(Le)),At=At.split(Le).join(Fr)}}var kr=At.indexOf("#");kr!==-1&&(this.hash=At.substr(kr),At=At.slice(0,kr));var ui=At.indexOf("?");if(ui!==-1?(this.search=At.substr(ui),this.query=At.substr(ui+1),ct&&(this.query=X.parse(this.query)),At=At.slice(0,ui)):ct&&(this.search="",this.query={}),At&&(this.pathname=At),k[q]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var de=this.pathname||"",Ti=this.search||"";this.path=de+Ti}return this.href=this.format(),this};function j(rt){return typeof rt=="string"&&(rt=Y(rt)),rt instanceof M?rt.format():M.prototype.format.call(rt)}M.prototype.format=function(){var rt=this.auth||"";rt&&(rt=encodeURIComponent(rt),rt=rt.replace(/%3A/i,":"),rt+="@");var ct=this.protocol||"",pt=this.pathname||"",Rt=this.hash||"",Lt=!1,ut="";this.host?Lt=rt+this.host:this.hostname&&(Lt=rt+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Lt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ut=X.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var xt=this.search||ut&&"?"+ut||"";return ct&&ct.substr(-1)!==":"&&(ct+=":"),this.slashes||(!ct||k[ct])&&Lt!==!1?(Lt="//"+(Lt||""),pt&&pt.charAt(0)!=="/"&&(pt="/"+pt)):Lt||(Lt=""),Rt&&Rt.charAt(0)!=="#"&&(Rt="#"+Rt),xt&&xt.charAt(0)!=="?"&&(xt="?"+xt),pt=pt.replace(/[?#]/g,function(At){return encodeURIComponent(At)}),xt=xt.replace("#","%23"),ct+Lt+pt+xt+Rt};function st(rt,ct){return Y(rt,!1,!0).resolve(ct)}M.prototype.resolve=function(rt){return this.resolveObject(Y(rt,!1,!0)).format()};function tt(rt,ct){return rt?Y(rt,!1,!0).resolveObject(ct):ct}M.prototype.resolveObject=function(rt){if(typeof rt=="string"){var ct=new M;ct.parse(rt,!1,!0),rt=ct}for(var pt=new M,Rt=Object.keys(this),Lt=0;Lt<Rt.length;Lt++){var ut=Rt[Lt];pt[ut]=this[ut]}if(pt.hash=rt.hash,rt.href==="")return pt.href=pt.format(),pt;if(rt.slashes&&!rt.protocol){for(var xt=Object.keys(rt),At=0;At<xt.length;At++){var J=xt[At];J!=="protocol"&&(pt[J]=rt[J])}return k[pt.protocol]&&pt.hostname&&!pt.pathname&&(pt.pathname="/",pt.path=pt.pathname),pt.href=pt.format(),pt}if(rt.protocol&&rt.protocol!==pt.protocol){if(!k[rt.protocol]){for(var ot=Object.keys(rt),q=0;q<ot.length;q++){var gt=ot[q];pt[gt]=rt[gt]}return pt.href=pt.format(),pt}if(pt.protocol=rt.protocol,!rt.host&&!G[rt.protocol]){for(var Gt=(rt.pathname||"").split("/");Gt.length&&!(rt.host=Gt.shift()););rt.host||(rt.host=""),rt.hostname||(rt.hostname=""),Gt[0]!==""&&Gt.unshift(""),Gt.length<2&&Gt.unshift(""),pt.pathname=Gt.join("/")}else pt.pathname=rt.pathname;if(pt.search=rt.search,pt.query=rt.query,pt.host=rt.host||"",pt.auth=rt.auth,pt.hostname=rt.hostname||rt.host,pt.port=rt.port,pt.pathname||pt.search){var yt=pt.pathname||"",et=pt.search||"";pt.path=yt+et}return pt.slashes=pt.slashes||rt.slashes,pt.href=pt.format(),pt}var ht=pt.pathname&&pt.pathname.charAt(0)==="/",Et=rt.host||rt.pathname&&rt.pathname.charAt(0)==="/",kt=Et||ht||pt.host&&rt.pathname,Ft=kt,Bt=pt.pathname&&pt.pathname.split("/")||[],Gt=rt.pathname&&rt.pathname.split("/")||[],Ct=pt.protocol&&!k[pt.protocol];if(Ct&&(pt.hostname="",pt.port=null,pt.host&&(Bt[0]===""?Bt[0]=pt.host:Bt.unshift(pt.host)),pt.host="",rt.protocol&&(rt.hostname=null,rt.port=null,rt.host&&(Gt[0]===""?Gt[0]=rt.host:Gt.unshift(rt.host)),rt.host=null),kt=kt&&(Gt[0]===""||Bt[0]==="")),Et)pt.host=rt.host||rt.host===""?rt.host:pt.host,pt.hostname=rt.hostname||rt.hostname===""?rt.hostname:pt.hostname,pt.search=rt.search,pt.query=rt.query,Bt=Gt;else if(Gt.length)Bt||(Bt=[]),Bt.pop(),Bt=Bt.concat(Gt),pt.search=rt.search,pt.query=rt.query;else if(rt.search!=null){if(Ct){pt.host=Bt.shift(),pt.hostname=pt.host;var jt=pt.host&&pt.host.indexOf("@")>0?pt.host.split("@"):!1;jt&&(pt.auth=jt.shift(),pt.hostname=jt.shift(),pt.host=pt.hostname)}return pt.search=rt.search,pt.query=rt.query,(pt.pathname!==null||pt.search!==null)&&(pt.path=(pt.pathname?pt.pathname:"")+(pt.search?pt.search:"")),pt.href=pt.format(),pt}if(!Bt.length)return pt.pathname=null,pt.search?pt.path="/"+pt.search:pt.path=null,pt.href=pt.format(),pt;for(var Kt=Bt.slice(-1)[0],ne=(pt.host||rt.host||Bt.length>1)&&(Kt==="."||Kt==="..")||Kt==="",me=0,ue=Bt.length;ue>=0;ue--)Kt=Bt[ue],Kt==="."?Bt.splice(ue,1):Kt===".."?(Bt.splice(ue,1),me++):me&&(Bt.splice(ue,1),me--);if(!kt&&!Ft)for(;me--;me)Bt.unshift("..");kt&&Bt[0]!==""&&(!Bt[0]||Bt[0].charAt(0)!=="/")&&Bt.unshift(""),ne&&Bt.join("/").substr(-1)!=="/"&&Bt.push("");var Oe=Bt[0]===""||Bt[0]&&Bt[0].charAt(0)==="/";if(Ct){pt.hostname=Oe?"":Bt.length?Bt.shift():"",pt.host=pt.hostname;var jt=pt.host&&pt.host.indexOf("@")>0?pt.host.split("@"):!1;jt&&(pt.auth=jt.shift(),pt.hostname=jt.shift(),pt.host=pt.hostname)}return kt=kt||pt.host&&Bt.length,kt&&!Oe&&Bt.unshift(""),Bt.length>0?pt.pathname=Bt.join("/"):(pt.pathname=null,pt.path=null),(pt.pathname!==null||pt.search!==null)&&(pt.path=(pt.pathname?pt.pathname:"")+(pt.search?pt.search:"")),pt.auth=rt.auth||pt.auth,pt.slashes=pt.slashes||rt.slashes,pt.href=pt.format(),pt},M.prototype.parseHost=function(){var rt=this.host,ct=C.exec(rt);ct&&(ct=ct[0],ct!==":"&&(this.port=ct.substr(1)),rt=rt.substr(0,rt.length-ct.length)),rt&&(this.hostname=rt)},I.Qc=Y,I.DB=st,b=tt,I.WU=j,b=M},4619:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(952),O=w(8135);D.DisplayObject.mixin(O.accessibleTarget);const C=9,m=100,p=0,v=0,y=2,T=1,_=-1e3,A=-1e3,P=2;class x{constructor(G){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(b.utils.isMobile.tablet||b.utils.isMobile.phone)&&this.createTouchHook();const k=document.createElement("div");k.style.width=`${m}px`,k.style.height=`${m}px`,k.style.position="absolute",k.style.top=`${p}px`,k.style.left=`${v}px`,k.style.zIndex=y.toString(),this.div=k,this.renderer=G,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const G=document.createElement("button");G.style.width=`${T}px`,G.style.height=`${T}px`,G.style.position="absolute",G.style.top=`${_}px`,G.style.left=`${A}px`,G.style.zIndex=P.toString(),G.style.backgroundColor="#FF0000",G.title="select to enable accessibility for this content",G.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(G),this._hookDiv=G}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var G;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(G=this.renderer.view.parentNode)==null||G.appendChild(this.div))}deactivate(){var G;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(G=this.div.parentNode)==null||G.removeChild(this.div))}updateAccessibleObjects(G){if(!G.visible||!G.accessibleChildren)return;G.accessible&&G.isInteractive()&&(G._accessibleActive||this.addChild(G),G.renderId=this.renderId);const k=G.children;if(k)for(let X=0;X<k.length;X++)this.updateAccessibleObjects(k[X])}update(){const G=performance.now();if(b.utils.isMobile.android.device&&G<this.androidUpdateCount||(this.androidUpdateCount=G+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:k,y:X,width:Y,height:j}=this.renderer.view.getBoundingClientRect(),{width:st,height:tt,resolution:rt}=this.renderer,ct=Y/st*rt,pt=j/tt*rt;let Rt=this.div;Rt.style.left=`${k}px`,Rt.style.top=`${X}px`,Rt.style.width=`${st}px`,Rt.style.height=`${tt}px`;for(let Lt=0;Lt<this.children.length;Lt++){const ut=this.children[Lt];if(ut.renderId!==this.renderId)ut._accessibleActive=!1,b.utils.removeItems(this.children,Lt,1),this.div.removeChild(ut._accessibleDiv),this.pool.push(ut._accessibleDiv),ut._accessibleDiv=null,Lt--;else{Rt=ut._accessibleDiv;let xt=ut.hitArea;const At=ut.worldTransform;ut.hitArea?(Rt.style.left=`${(At.tx+xt.x*At.a)*ct}px`,Rt.style.top=`${(At.ty+xt.y*At.d)*pt}px`,Rt.style.width=`${xt.width*At.a*ct}px`,Rt.style.height=`${xt.height*At.d*pt}px`):(xt=ut.getBounds(),this.capHitArea(xt),Rt.style.left=`${xt.x*ct}px`,Rt.style.top=`${xt.y*pt}px`,Rt.style.width=`${xt.width*ct}px`,Rt.style.height=`${xt.height*pt}px`,Rt.title!==ut.accessibleTitle&&ut.accessibleTitle!==null&&(Rt.title=ut.accessibleTitle),Rt.getAttribute("aria-label")!==ut.accessibleHint&&ut.accessibleHint!==null&&Rt.setAttribute("aria-label",ut.accessibleHint)),(ut.accessibleTitle!==Rt.title||ut.tabIndex!==Rt.tabIndex)&&(Rt.title=ut.accessibleTitle,Rt.tabIndex=ut.tabIndex,this.debug&&this.updateDebugHTML(Rt))}}this.renderId++}updateDebugHTML(G){G.innerHTML=`type: ${G.type}</br> title : ${G.title}</br> tabIndex: ${G.tabIndex}`}capHitArea(G){G.x<0&&(G.width+=G.x,G.x=0),G.y<0&&(G.height+=G.y,G.y=0);const{width:k,height:X}=this.renderer;G.x+G.width>k&&(G.width=k-G.x),G.y+G.height>X&&(G.height=X-G.y)}addChild(G){let k=this.pool.pop();k||(k=document.createElement("button"),k.style.width=`${m}px`,k.style.height=`${m}px`,k.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",k.style.position="absolute",k.style.zIndex=y.toString(),k.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?k.setAttribute("aria-live","off"):k.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?k.setAttribute("aria-relevant","additions"):k.setAttribute("aria-relevant","text"),k.addEventListener("click",this._onClick.bind(this)),k.addEventListener("focus",this._onFocus.bind(this)),k.addEventListener("focusout",this._onFocusOut.bind(this))),k.style.pointerEvents=G.accessiblePointerEvents,k.type=G.accessibleType,G.accessibleTitle&&G.accessibleTitle!==null?k.title=G.accessibleTitle:(!G.accessibleHint||G.accessibleHint===null)&&(k.title=`displayObject ${G.tabIndex}`),G.accessibleHint&&G.accessibleHint!==null&&k.setAttribute("aria-label",G.accessibleHint),this.debug&&this.updateDebugHTML(k),G._accessibleActive=!0,G._accessibleDiv=k,k.displayObject=G,this.children.push(G),this.div.appendChild(G._accessibleDiv),G._accessibleDiv.tabIndex=G.tabIndex}_dispatchEvent(G,k){const{displayObject:X}=G.target,Y=this.renderer.events.rootBoundary,j=Object.assign(new M.FederatedEvent(Y),{target:X});Y.rootTarget=this.renderer.lastObjectRendered,k.forEach(st=>Y.dispatchEvent(j,st))}_onClick(G){this._dispatchEvent(G,["click","pointertap","tap"])}_onFocus(G){G.target.getAttribute("aria-live")||G.target.setAttribute("aria-live","assertive"),this._dispatchEvent(G,["mouseover"])}_onFocusOut(G){G.target.getAttribute("aria-live")||G.target.setAttribute("aria-live","polite"),this._dispatchEvent(G,["mouseout"])}_onKeyDown(G){G.keyCode===C&&this.activate()}_onMouseMove(G){G.movementX===0&&G.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}x.extension={name:"accessibility",type:[b.ExtensionType.RendererPlugin,b.ExtensionType.CanvasRendererPlugin]},b.extensions.add(x),I.AccessibilityManager=x},8135:function(at,I){"use strict";const w={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};I.accessibleTarget=w},3767:function(at,I,w){"use strict";var b=w(4619),D=w(8135);I.AccessibilityManager=b.AccessibilityManager,I.accessibleTarget=D.accessibleTarget},1331:function(at,I,w){"use strict";var b=w(8405),D=w(4784);const M=class mp{constructor(m){this.stage=new D.Container,m=Object.assign({forceCanvas:!1},m),this.renderer=b.autoDetectRenderer(m),mp._plugins.forEach(p=>{p.init.call(this,m)})}render(){this.renderer.render(this.stage)}get view(){var m;return(m=this.renderer)==null?void 0:m.view}get screen(){var m;return(m=this.renderer)==null?void 0:m.screen}destroy(m,p){const v=mp._plugins.slice(0);v.reverse(),v.forEach(y=>{y.destroy.call(this)}),this.stage.destroy(p),this.stage=null,this.renderer.destroy(m),this.renderer=null}};M._plugins=[];let O=M;b.extensions.handleByList(b.ExtensionType.Application,O._plugins),I.Application=O},5786:function(at,I,w){"use strict";var b=w(8405);class D{static init(O){Object.defineProperty(this,"resizeTo",{set(C){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=C,C&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let C,m;if(this._resizeTo===globalThis.window)C=globalThis.innerWidth,m=globalThis.innerHeight;else{const{clientWidth:p,clientHeight:v}=this._resizeTo;C=p,m=v}this.renderer.resize(C,m),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=O.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}D.extension=b.ExtensionType.Application,b.extensions.add(D),I.ResizePlugin=D},5556:function(at,I,w){"use strict";var b=w(1331),D=w(5786);I.Application=b.Application,I.ResizePlugin=D.ResizePlugin},8674:function(at,I,w){"use strict";var b=w(8405);const D={loader:b.ExtensionType.LoadParser,resolver:b.ExtensionType.ResolveParser,cache:b.ExtensionType.CacheParser,detection:b.ExtensionType.DetectionParser};b.extensions.handle(b.ExtensionType.Asset,M=>{const O=M.ref;Object.entries(D).filter(([C])=>!!O[C]).forEach(([C,m])=>{var p;return b.extensions.add(Object.assign(O[C],{extension:(p=O[C].extension)!=null?p:m}))})},M=>{const O=M.ref;Object.keys(D).filter(C=>!!O[C]).forEach(C=>b.extensions.remove(O[C]))})},9576:function(at,I,w){"use strict";var b=w(8405),D=w(1945),M=w(3575),O=w(600);w(7673);var C=w(7771),m=w(955),p=w(2607),v=w(931);class y{constructor(){this._detections=[],this._initialized=!1,this.resolver=new C.Resolver,this.loader=new O.Loader,this.cache=M.Cache,this._backgroundLoader=new D.BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}init(){return he(this,arguments,function*(A={}){var G,k,X;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,A.defaultSearchParams&&this.resolver.setDefaultSearchParams(A.defaultSearchParams),A.basePath&&(this.resolver.basePath=A.basePath),A.bundleIdentifier&&this.resolver.setBundleIdentifier(A.bundleIdentifier),A.manifest){let Y=A.manifest;typeof Y=="string"&&(Y=yield this.load(Y)),this.resolver.addManifest(Y)}const P=(k=(G=A.texturePreference)==null?void 0:G.resolution)!=null?k:1,x=typeof P=="number"?[P]:P,B=yield this._detectFormats({preferredFormats:(X=A.texturePreference)==null?void 0:X.format,skipDetections:A.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:B,resolution:x}}),A.preferences&&this.setPreferences(A.preferences)})}add(A,P,x,B,G){this.resolver.add(A,P,x,B,G)}load(A,P){return he(this,null,function*(){this._initialized||(yield this.init());const x=p.isSingleItem(A),B=m.convertToList(A).map(X=>{if(typeof X!="string"){const Y=this.resolver.getAlias(X);return Y.some(j=>!this.resolver.hasKey(j))&&this.add(X),Array.isArray(Y)?Y[0]:Y}return this.resolver.hasKey(X)||this.add({alias:X,src:X}),X}),G=this.resolver.resolve(B),k=yield this._mapLoadToResolve(G,P);return x?k[B[0]]:k})}addBundle(A,P){this.resolver.addBundle(A,P)}loadBundle(A,P){return he(this,null,function*(){this._initialized||(yield this.init());let x=!1;typeof A=="string"&&(x=!0,A=[A]);const B=this.resolver.resolveBundle(A),G={},k=Object.keys(B);let X=0,Y=0;const j=()=>{P==null||P(++X/Y)},st=k.map(tt=>{const rt=B[tt];return Y+=Object.keys(rt).length,this._mapLoadToResolve(rt,j).then(ct=>{G[tt]=ct})});return yield Promise.all(st),x?G[A[0]]:G})}backgroundLoad(A){return he(this,null,function*(){this._initialized||(yield this.init()),typeof A=="string"&&(A=[A]);const P=this.resolver.resolve(A);this._backgroundLoader.add(Object.values(P))})}backgroundLoadBundle(A){return he(this,null,function*(){this._initialized||(yield this.init()),typeof A=="string"&&(A=[A]);const P=this.resolver.resolveBundle(A);Object.values(P).forEach(x=>{this._backgroundLoader.add(Object.values(x))})})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(A){if(typeof A=="string")return M.Cache.get(A);const P={};for(let x=0;x<A.length;x++)P[x]=M.Cache.get(A[x]);return P}_mapLoadToResolve(A,P){return he(this,null,function*(){const x=Object.values(A),B=Object.keys(A);this._backgroundLoader.active=!1;const G=yield this.loader.load(x,P);this._backgroundLoader.active=!0;const k={};return x.forEach((X,Y)=>{const j=G[X.src],st=[X.src];X.alias&&st.push(...X.alias),k[B[Y]]=j,M.Cache.set(st,j)}),k})}unload(A){return he(this,null,function*(){this._initialized||(yield this.init());const P=m.convertToList(A).map(B=>typeof B!="string"?B.src:B),x=this.resolver.resolve(P);yield this._unloadFromResolved(x)})}unloadBundle(A){return he(this,null,function*(){this._initialized||(yield this.init()),A=m.convertToList(A);const P=this.resolver.resolveBundle(A),x=Object.keys(P).map(B=>this._unloadFromResolved(P[B]));yield Promise.all(x)})}_unloadFromResolved(A){return he(this,null,function*(){const P=Object.values(A);P.forEach(x=>{M.Cache.remove(x.src)}),yield this.loader.unload(P)})}_detectFormats(A){return he(this,null,function*(){let P=[];A.preferredFormats&&(P=Array.isArray(A.preferredFormats)?A.preferredFormats:[A.preferredFormats]);for(const x of A.detections)A.skipDetections||(yield x.test())?P=yield x.add(P):A.skipDetections||(P=yield x.remove(P));return P=P.filter((x,B)=>P.indexOf(x)===B),P})}get detections(){return this._detections}get preferWorkers(){return v.loadTextures.config.preferWorkers}set preferWorkers(A){b.utils.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:A})}setPreferences(A){this.loader.parsers.forEach(P=>{P.config&&Object.keys(P.config).filter(x=>x in A).forEach(x=>{P.config[x]=A[x]})})}}const T=new y;b.extensions.handleByList(b.ExtensionType.LoadParser,T.loader.parsers).handleByList(b.ExtensionType.ResolveParser,T.resolver.parsers).handleByList(b.ExtensionType.CacheParser,T.cache.parsers).handleByList(b.ExtensionType.DetectionParser,T.detections),I.Assets=T,I.AssetsClass=y},1945:function(at,I){"use strict";class w{constructor(D,M=!1){this._loader=D,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=M}add(D){D.forEach(M=>{this._assetList.push(M)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){return he(this,null,function*(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const D=[],M=Math.min(this._assetList.length,this._maxConcurrent);for(let O=0;O<M;O++)D.push(this._assetList.pop());yield this._loader.load(D),this._isLoading=!1,this._next()}})}get active(){return this._isActive}set active(D){this._isActive!==D&&(this._isActive=D,D&&!this._isLoading&&this._next())}}I.BackgroundLoader=w},3575:function(at,I,w){"use strict";var b=w(8405);w(5237);var D=w(955);class M{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(m){return this._cache.has(m)}get(m){const p=this._cache.get(m);return p||console.warn(`[Assets] Asset id ${m} was not found in the Cache`),p}set(m,p){const v=D.convertToList(m);let y;for(let A=0;A<this.parsers.length;A++){const P=this.parsers[A];if(P.test(p)){y=P.getCacheableAssets(v,p);break}}y||(y={},v.forEach(A=>{y[A]=p}));const T=Object.keys(y),_={cacheKeys:T,keys:v};if(v.forEach(A=>{this._cacheMap.set(A,_)}),T.forEach(A=>{this._cache.has(A)&&this._cache.get(A)!==p&&console.warn("[Cache] already has key:",A),this._cache.set(A,y[A])}),p instanceof b.Texture){const A=p;v.forEach(P=>{A.baseTexture!==b.Texture.EMPTY.baseTexture&&b.BaseTexture.addToCache(A.baseTexture,P),b.Texture.addToCache(A,P)})}}remove(m){if(!this._cacheMap.has(m)){console.warn(`[Assets] Asset id ${m} was not found in the Cache`);return}const p=this._cacheMap.get(m);p.cacheKeys.forEach(v=>{this._cache.delete(v)}),p.keys.forEach(v=>{this._cacheMap.delete(v)})}get parsers(){return this._parsers}}const O=new M;I.Cache=O},1648:function(){"use strict"},1933:function(at,I,w){"use strict";var b=w(3575);w(1648),w(5439),I.Cache=b.Cache},4106:function(at,I,w){"use strict";var b=w(8405);const D={extension:b.ExtensionType.CacheParser,test:M=>Array.isArray(M)&&M.every(O=>O instanceof b.Texture),getCacheableAssets:(M,O)=>{const C={};return M.forEach(m=>{O.forEach((p,v)=>{C[m+(v===0?"":v+1)]=p})}),C}};b.extensions.add(D),I.cacheTextureArray=D},5439:function(at,I,w){"use strict";var b=w(4106);I.cacheTextureArray=b.cacheTextureArray},1113:function(at,I,w){"use strict";w(4761)},5319:function(at,I,w){"use strict";var b=w(8405),D=w(879);const M={extension:{type:b.ExtensionType.DetectionParser,priority:1},test:()=>he(this,null,function*(){return D.testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),add:O=>he(this,null,function*(){return[...O,"avif"]}),remove:O=>he(this,null,function*(){return O.filter(C=>C!=="avif")})};b.extensions.add(M),I.detectAvif=M},4531:function(at,I,w){"use strict";var b=w(8405);const D=["png","jpg","jpeg"],M={extension:{type:b.ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:O=>he(this,null,function*(){return[...O,...D]}),remove:O=>he(this,null,function*(){return O.filter(C=>!D.includes(C))})};b.extensions.add(M),I.detectDefaults=M},4957:function(at,I,w){"use strict";var b=w(8405),D=w(9362);const M={extension:{type:b.ExtensionType.DetectionParser,priority:0},test:()=>he(this,null,function*(){return D.testVideoFormat("video/mp4")}),add:O=>he(this,null,function*(){return[...O,"mp4","m4v"]}),remove:O=>he(this,null,function*(){return O.filter(C=>C!=="mp4"&&C!=="m4v")})};b.extensions.add(M),I.detectMp4=M},9541:function(at,I,w){"use strict";var b=w(8405),D=w(9362);const M={extension:{type:b.ExtensionType.DetectionParser,priority:0},test:()=>he(this,null,function*(){return D.testVideoFormat("video/ogg")}),add:O=>he(this,null,function*(){return[...O,"ogv"]}),remove:O=>he(this,null,function*(){return O.filter(C=>C!=="ogv")})};b.extensions.add(M),I.detectOgv=M},8151:function(at,I,w){"use strict";var b=w(8405),D=w(9362);const M={extension:{type:b.ExtensionType.DetectionParser,priority:0},test:()=>he(this,null,function*(){return D.testVideoFormat("video/webm")}),add:O=>he(this,null,function*(){return[...O,"webm"]}),remove:O=>he(this,null,function*(){return O.filter(C=>C!=="webm")})};b.extensions.add(M),I.detectWebm=M},7619:function(at,I,w){"use strict";var b=w(8405),D=w(879);const M={extension:{type:b.ExtensionType.DetectionParser,priority:0},test:()=>he(this,null,function*(){return D.testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")}),add:O=>he(this,null,function*(){return[...O,"webp"]}),remove:O=>he(this,null,function*(){return O.filter(C=>C!=="webp")})};b.extensions.add(M),I.detectWebp=M},4761:function(at,I,w){"use strict";var b=w(5319),D=w(7619),M=w(4531),O=w(8151),C=w(4957),m=w(9541);I.detectAvif=b.detectAvif,I.detectWebp=D.detectWebp,I.detectDefaults=M.detectDefaults,I.detectWebm=O.detectWebm,I.detectMp4=C.detectMp4,I.detectOgv=m.detectOgv},879:function(at,I){"use strict";function w(b){return he(this,null,function*(){if("Image"in globalThis)return new Promise(D=>{const M=new Image;M.onload=()=>{D(!0)},M.onerror=()=>{D(!1)},M.src=b});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const D=yield(yield fetch(b)).blob();yield createImageBitmap(D)}catch(D){return!1}return!0}return!1})}I.testImageFormat=w},9362:function(at,I){"use strict";const w="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function b(D){return w?!1:document.createElement("video").canPlayType(D)!==""}I.testVideoFormat=b},3520:function(at,I,w){"use strict";w(8674);var b=w(9576);w(1933),w(1113),w(9120),w(3556),w(5383),w(5237);var D=w(3575),M=w(4106),O=w(5319),C=w(7619),m=w(4531),p=w(8151),v=w(4957),y=w(9541),T=w(3619),_=w(4265),A=w(8168),P=w(4025),x=w(2400),B=w(931),G=w(8552),k=w(7858),X=w(4412),Y=w(7280),j=w(7980),st=w(955),tt=w(7697),rt=w(6119),ct=w(2607);I.Assets=b.Assets,I.AssetsClass=b.AssetsClass,I.Cache=D.Cache,I.cacheTextureArray=M.cacheTextureArray,I.detectAvif=O.detectAvif,I.detectWebp=C.detectWebp,I.detectDefaults=m.detectDefaults,I.detectWebm=p.detectWebm,I.detectMp4=v.detectMp4,I.detectOgv=y.detectOgv,I.LoaderParserPriority=T.LoaderParserPriority,I.loadJson=_.loadJson,I.loadTxt=A.loadTxt,I.getFontFamilyName=P.getFontFamilyName,I.loadWebFont=P.loadWebFont,I.loadSVG=x.loadSVG,I.loadImageBitmap=B.loadImageBitmap,I.loadTextures=B.loadTextures,I.loadVideo=G.loadVideo,I.createTexture=k.createTexture,I.resolveTextureUrl=X.resolveTextureUrl,I.checkDataUrl=Y.checkDataUrl,I.checkExtension=j.checkExtension,I.convertToList=st.convertToList,I.copySearchParams=tt.copySearchParams,I.createStringVariations=rt.createStringVariations,I.isSingleItem=ct.isSingleItem},600:function(at,I,w){"use strict";var b=w(8405);w(5237);var D=w(2607),M=w(955);class O{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(m,p,v)=>(this._parsersValidated=!1,m[p]=v,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(m,p){const v={promise:null,parser:null};return v.promise=(()=>he(this,null,function*(){var _,A;let y=null,T=null;if(p.loadParser&&(T=this._parserHash[p.loadParser],T||console.warn(`[Assets] specified load parser "${p.loadParser}" not found while loading ${m}`)),!T){for(let P=0;P<this.parsers.length;P++){const x=this.parsers[P];if(x.load&&((_=x.test)!=null&&_.call(x,m,p,this))){T=x;break}}if(!T)return console.warn(`[Assets] ${m} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}y=yield T.load(m,p,this),v.parser=T;for(let P=0;P<this.parsers.length;P++){const x=this.parsers[P];x.parse&&x.parse&&(yield(A=x.testParse)==null?void 0:A.call(x,y,p,this))&&(y=(yield x.parse(y,p,this))||y,v.parser=x)}return y}))(),v}load(m,p){return he(this,null,function*(){this._parsersValidated||this._validateParsers();let v=0;const y={},T=D.isSingleItem(m),_=M.convertToList(m,x=>({alias:[x],src:x})),A=_.length,P=_.map(x=>he(this,null,function*(){const B=b.utils.path.toAbsolute(x.src);if(!y[x.src])try{this.promiseCache[B]||(this.promiseCache[B]=this._getLoadPromiseAndParser(B,x)),y[x.src]=yield this.promiseCache[B].promise,p&&p(++v/A)}catch(G){throw delete this.promiseCache[B],delete y[x.src],new Error(`[Loader.load] Failed to load ${B}.
${G}`)}}));return yield Promise.all(P),T?y[_[0].src]:y})}unload(m){return he(this,null,function*(){const p=M.convertToList(m,v=>({alias:[v],src:v})).map(v=>he(this,null,function*(){var _,A;const y=b.utils.path.toAbsolute(v.src),T=this.promiseCache[y];if(T){const P=yield T.promise;delete this.promiseCache[y],(A=(_=T.parser)==null?void 0:_.unload)==null||A.call(_,P,v,this)}}));yield Promise.all(p)})}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(m=>m.name).reduce((m,p)=>(m[p.name]&&console.warn(`[Assets] loadParser name conflict "${p.name}"`),gi(He({},m),{[p.name]:p})),{})}}I.Loader=O},9120:function(at,I,w){"use strict";w(7673)},3619:function(at,I){"use strict";var w=(b=>(b[b.Low=0]="Low",b[b.Normal=1]="Normal",b[b.High=2]="High",b))(w||{});I.LoaderParserPriority=w},9097:function(at,I){"use strict";let w=0,b;const D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",M={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${D}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},O={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let C;class m{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(y=>{const T=URL.createObjectURL(new Blob([M.code],{type:"application/javascript"})),_=new Worker(T);_.addEventListener("message",A=>{_.terminate(),URL.revokeObjectURL(T),y(A.data)})}),this._isImageBitmapSupported)}loadImageBitmap(y){return this._run("loadImageBitmap",[y])}_initWorkers(){return he(this,null,function*(){this._initialized||(this._initialized=!0)})}getWorker(){b===void 0&&(b=navigator.hardwareConcurrency||4);let y=this.workerPool.pop();return!y&&this._createdWorkers<b&&(C||(C=URL.createObjectURL(new Blob([O.code],{type:"application/javascript"}))),this._createdWorkers++,y=new Worker(C),y.addEventListener("message",T=>{this.complete(T.data),this.returnWorker(T.target),this.next()})),y}returnWorker(y){this.workerPool.push(y)}complete(y){y.error!==void 0?this.resolveHash[y.uuid].reject(y.error):this.resolveHash[y.uuid].resolve(y.data),this.resolveHash[y.uuid]=null}_run(y,T){return he(this,null,function*(){yield this._initWorkers();const _=new Promise((A,P)=>{this.queue.push({id:y,arguments:T,resolve:A,reject:P})});return this.next(),_})}next(){if(!this.queue.length)return;const y=this.getWorker();if(!y)return;const T=this.queue.pop(),_=T.id;this.resolveHash[w]={resolve:T.resolve,reject:T.reject},y.postMessage({data:T.arguments,uuid:w++,id:_})}}const p=new m;I.WorkerManager=p},7673:function(at,I,w){"use strict";var b=w(3619),D=w(4265),M=w(8168),O=w(4025);w(7082),I.LoaderParserPriority=b.LoaderParserPriority,I.loadJson=D.loadJson,I.loadTxt=M.loadTxt,I.getFontFamilyName=O.getFontFamilyName,I.loadWebFont=O.loadWebFont},4265:function(at,I,w){"use strict";var b=w(8405),D=w(7280),M=w(7980),O=w(3619);const C=".json",m="application/json",p={extension:{type:b.ExtensionType.LoadParser,priority:O.LoaderParserPriority.Low},name:"loadJson",test(y){return D.checkDataUrl(y,m)||M.checkExtension(y,C)},load(y){return he(this,null,function*(){return yield(yield b.settings.ADAPTER.fetch(y)).json()})}};b.extensions.add(p),I.loadJson=p},8168:function(at,I,w){"use strict";var b=w(8405),D=w(7280),M=w(7980),O=w(3619);const C=".txt",m="text/plain",p={name:"loadTxt",extension:{type:b.ExtensionType.LoadParser,priority:O.LoaderParserPriority.Low},test(y){return D.checkDataUrl(y,m)||M.checkExtension(y,C)},load(y){return he(this,null,function*(){return yield(yield b.settings.ADAPTER.fetch(y)).text()})}};b.extensions.add(p),I.loadTxt=p},4025:function(at,I,w){"use strict";var b=w(8405),D=w(7280),M=w(7980),O=w(3619);const C=["normal","bold","100","200","300","400","500","600","700","800","900"],m=[".ttf",".otf",".woff",".woff2"],p=["font/ttf","font/otf","font/woff","font/woff2"],v=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function y(x){const B=b.utils.path.extname(x),G=b.utils.path.basename(x,B).replace(/(-|_)/g," ").toLowerCase().split(" ").map(Y=>Y.charAt(0).toUpperCase()+Y.slice(1));let k=G.length>0;for(const Y of G)if(!Y.match(v)){k=!1;break}let X=G.join(" ");return k||(X=`"${X.replace(/[\\"]/g,"\\$&")}"`),X}const T=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function _(x){return T.test(x)?x:encodeURI(x)}const A={extension:{type:b.ExtensionType.LoadParser,priority:O.LoaderParserPriority.Low},name:"loadWebFont",test(x){return D.checkDataUrl(x,p)||M.checkExtension(x,m)},load(x,B){return he(this,null,function*(){var k,X,Y,j,st,tt;const G=b.settings.ADAPTER.getFontFaceSet();if(G){const rt=[],ct=(X=(k=B.data)==null?void 0:k.family)!=null?X:y(x),pt=(st=(j=(Y=B.data)==null?void 0:Y.weights)==null?void 0:j.filter(Lt=>C.includes(Lt)))!=null?st:["normal"],Rt=(tt=B.data)!=null?tt:{};for(let Lt=0;Lt<pt.length;Lt++){const ut=pt[Lt],xt=new FontFace(ct,`url(${_(x)})`,gi(He({},Rt),{weight:ut}));yield xt.load(),G.add(xt),rt.push(xt)}return rt.length===1?rt[0]:rt}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})},unload(x){(Array.isArray(x)?x:[x]).forEach(B=>b.settings.ADAPTER.getFontFaceSet().delete(B))}};b.extensions.add(A),I.getFontFamilyName=y,I.loadWebFont=A},7082:function(at,I,w){"use strict";var b=w(2400),D=w(931),M=w(8552);w(4449),I.loadSVG=b.loadSVG,I.loadImageBitmap=D.loadImageBitmap,I.loadTextures=D.loadTextures,I.loadVideo=M.loadVideo},2400:function(at,I,w){"use strict";var b=w(8405),D=w(7280),M=w(7980),O=w(3619),C=w(931),m=w(7858);const p=".svg",v="image/svg+xml",y={extension:{type:b.ExtensionType.LoadParser,priority:O.LoaderParserPriority.High},name:"loadSVG",test(_){return D.checkDataUrl(_,v)||M.checkExtension(_,p)},testParse(_){return he(this,null,function*(){return b.SVGResource.test(_)})},parse(_,A,P){return he(this,null,function*(){var G;const x=new b.SVGResource(_,(G=A==null?void 0:A.data)==null?void 0:G.resourceOptions);yield x.load();const B=new b.BaseTexture(x,He({resolution:b.utils.getResolutionOfUrl(_)},A==null?void 0:A.data));return B.resource.src=A.src,m.createTexture(B,P,A.src)})},load(_,A){return he(this,null,function*(){return(yield b.settings.ADAPTER.fetch(_)).text()})},unload:C.loadTextures.unload};b.extensions.add(y),I.loadSVG=y},931:function(at,I,w){"use strict";var b=w(8405),D=w(7280),M=w(7980),O=w(3619),C=w(9097),m=w(7858);const p=[".jpeg",".jpg",".png",".webp",".avif"],v=["image/jpeg","image/png","image/webp","image/avif"];function y(A){return he(this,null,function*(){const P=yield b.settings.ADAPTER.fetch(A);if(!P.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${A}: ${P.status} ${P.statusText}`);const x=yield P.blob();return yield createImageBitmap(x)})}const T={name:"loadTextures",extension:{type:b.ExtensionType.LoadParser,priority:O.LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(A){return D.checkDataUrl(A,v)||M.checkExtension(A,p)},load(A,P,x){return he(this,null,function*(){var Y,j;const B=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let G;B?this.config.preferWorkers&&(yield C.WorkerManager.isImageBitmapSupported())?G=yield C.WorkerManager.loadImageBitmap(A):G=yield y(A):G=yield new Promise((st,tt)=>{const rt=new Image;rt.crossOrigin=this.config.crossOrigin,rt.src=A,rt.complete?st(rt):(rt.onload=()=>st(rt),rt.onerror=ct=>tt(ct))});const k=He({},P.data);(Y=k.resolution)!=null||(k.resolution=b.utils.getResolutionOfUrl(A)),B&&((j=k.resourceOptions)==null?void 0:j.ownsImageBitmap)===void 0&&(k.resourceOptions=He({},k.resourceOptions),k.resourceOptions.ownsImageBitmap=!0);const X=new b.BaseTexture(G,k);return X.resource.src=A,m.createTexture(X,x,A)})},unload(A){A.destroy(!0)}};b.extensions.add(T),I.loadImageBitmap=y,I.loadTextures=T},8552:function(at,I,w){"use strict";var b=w(8405),D=w(7280),M=w(7980),O=w(3619),C=w(7858);const m=[".mp4",".m4v",".webm",".ogv"],p=["video/mp4","video/webm","video/ogg"],v={name:"loadVideo",extension:{type:b.ExtensionType.LoadParser,priority:O.LoaderParserPriority.High},config:{defaultAutoPlay:!0},test(T){return D.checkDataUrl(T,p)||M.checkExtension(T,m)},load(T,_,A){return he(this,null,function*(){var G;let P;const x=yield(yield b.settings.ADAPTER.fetch(T)).blob(),B=URL.createObjectURL(x);try{const k=He({autoPlay:this.config.defaultAutoPlay},(G=_==null?void 0:_.data)==null?void 0:G.resourceOptions),X=new b.VideoResource(B,k);yield X.load();const Y=new b.BaseTexture(X,He({alphaMode:yield b.utils.detectVideoAlphaMode(),resolution:b.utils.getResolutionOfUrl(T)},_==null?void 0:_.data));Y.resource.src=T,P=C.createTexture(Y,A,T),P.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(B)})}catch(k){throw URL.revokeObjectURL(B),k}return P})},unload(T){T.destroy(!0)}};b.extensions.add(v),I.loadVideo=v},7858:function(at,I,w){"use strict";var b=w(8405),D=w(3575);function M(O,C,m){O.resource.internal=!0;const p=new b.Texture(O),v=()=>{delete C.promiseCache[m],D.Cache.has(m)&&D.Cache.remove(m)};return p.baseTexture.once("destroyed",()=>{m in C.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),v())}),p.once("destroyed",()=>{O.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),v())}),p}I.createTexture=M},4449:function(at,I,w){"use strict";var b=w(7858);I.createTexture=b.createTexture},7771:function(at,I,w){"use strict";var b=w(8405),D=w(955),M=w(6119),O=w(2607);class C{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(p,v)=>`${p}${this._bundleIdConnector}${v}`,extractAssetIdFromBundle:(p,v)=>v.replace(`${p}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(p){var v,y,T;if(this._bundleIdConnector=(v=p.connector)!=null?v:this._bundleIdConnector,this._createBundleAssetId=(y=p.createBundleAssetId)!=null?y:this._createBundleAssetId,this._extractAssetIdFromBundle=(T=p.extractAssetIdFromBundle)!=null?T:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...p){p.forEach(v=>{this._preferredOrder.push(v),v.priority||(v.priority=Object.keys(v.params))}),this._resolverHash={}}set basePath(p){this._basePath=p}get basePath(){return this._basePath}set rootPath(p){this._rootPath=p}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(p){if(typeof p=="string")this._defaultSearchParams=p;else{const v=p;this._defaultSearchParams=Object.keys(v).map(y=>`${encodeURIComponent(y)}=${encodeURIComponent(v[y])}`).join("&")}}getAlias(p){const{alias:v,name:y,src:T,srcs:_}=p;return D.convertToList(v||y||T||_,A=>{var P;return typeof A=="string"?A:Array.isArray(A)?A.map(x=>{var B,G;return(G=(B=x==null?void 0:x.src)!=null?B:x==null?void 0:x.srcs)!=null?G:x}):A!=null&&A.src||A!=null&&A.srcs?(P=A.src)!=null?P:A.srcs:A},!0)}addManifest(p){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=p,p.bundles.forEach(v=>{this.addBundle(v.name,v.assets)})}addBundle(p,v){const y=[];Array.isArray(v)?v.forEach(T=>{var x,B;const _=(x=T.src)!=null?x:T.srcs,A=(B=T.alias)!=null?B:T.name;let P;if(typeof A=="string"){const G=this._createBundleAssetId(p,A);y.push(G),P=[A,G]}else{const G=A.map(k=>this._createBundleAssetId(p,k));y.push(...G),P=[...A,...G]}this.add(gi(He({},T),{alias:P,src:_}))}):Object.keys(v).forEach(T=>{var A;const _=[T,this._createBundleAssetId(p,T)];if(typeof v[T]=="string")this.add({alias:_,src:v[T]});else if(Array.isArray(v[T]))this.add({alias:_,src:v[T]});else{const P=v[T],x=(A=P.src)!=null?A:P.srcs;this.add(gi(He({},P),{alias:_,src:Array.isArray(x)?x:[x]}))}y.push(..._)}),this._bundles[p]=y}add(p,v,y,T,_){const A=[];typeof p=="string"||Array.isArray(p)&&typeof p[0]=="string"?(b.utils.deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),A.push({alias:p,src:v,data:y,format:T,loadParser:_})):Array.isArray(p)?A.push(...p):A.push(p);let P;P=x=>{this.hasKey(x)&&console.warn(`[Resolver] already has key: ${x} overwriting`)},D.convertToList(A).forEach(x=>{const{src:B,srcs:G}=x;let{data:k,format:X,loadParser:Y}=x;const j=D.convertToList(B||G).map(rt=>typeof rt=="string"?M.createStringVariations(rt):Array.isArray(rt)?rt:[rt]),st=this.getAlias(x);Array.isArray(st)?st.forEach(P):P(st);const tt=[];j.forEach(rt=>{rt.forEach(ct=>{var Rt,Lt,ut;let pt={};if(typeof ct!="object"){pt.src=ct;for(let xt=0;xt<this._parsers.length;xt++){const At=this._parsers[xt];if(At.test(ct)){pt=At.parse(ct);break}}}else k=(Rt=ct.data)!=null?Rt:k,X=(Lt=ct.format)!=null?Lt:X,Y=(ut=ct.loadParser)!=null?ut:Y,pt=He(He({},pt),ct);if(!st)throw new Error(`[Resolver] alias is undefined for this asset: ${pt.src}`);pt=this.buildResolvedAsset(pt,{aliases:st,data:k,format:X,loadParser:Y}),tt.push(pt)})}),st.forEach(rt=>{this._assetMap[rt]=tt})})}resolveBundle(p){const v=O.isSingleItem(p);p=D.convertToList(p);const y={};return p.forEach(T=>{const _=this._bundles[T];if(_){const A=this.resolve(_),P={};for(const x in A){const B=A[x];P[this._extractAssetIdFromBundle(T,x)]=B}y[T]=P}}),v?y[p[0]]:y}resolveUrl(p){const v=this.resolve(p);if(typeof p!="string"){const y={};for(const T in v)y[T]=v[T].src;return y}return v.src}resolve(p){const v=O.isSingleItem(p);p=D.convertToList(p);const y={};return p.forEach(T=>{var _;if(!this._resolverHash[T])if(this._assetMap[T]){let A=this._assetMap[T];const P=A[0],x=this._getPreferredOrder(A);x==null||x.priority.forEach(B=>{x.params[B].forEach(G=>{const k=A.filter(X=>X[B]?X[B]===G:!1);k.length&&(A=k)})}),this._resolverHash[T]=(_=A[0])!=null?_:P}else this._resolverHash[T]=this.buildResolvedAsset({alias:[T],src:T},{});y[T]=this._resolverHash[T]}),v?y[p[0]]:y}hasKey(p){return!!this._assetMap[p]}hasBundle(p){return!!this._bundles[p]}_getPreferredOrder(p){for(let v=0;v<p.length;v++){const y=p[0],T=this._preferredOrder.find(_=>_.params.format.includes(y.format));if(T)return T}return this._preferredOrder[0]}_appendDefaultSearchParams(p){if(!this._defaultSearchParams)return p;const v=/\?/.test(p)?"&":"?";return`${p}${v}${this._defaultSearchParams}`}buildResolvedAsset(p,v){var P;const{aliases:y,data:T,loadParser:_,format:A}=v;return(this._basePath||this._rootPath)&&(p.src=b.utils.path.toAbsolute(p.src,this._basePath,this._rootPath)),p.alias=(P=y!=null?y:p.alias)!=null?P:[p.src],p.src=this._appendDefaultSearchParams(p.src),p.data=He(He({},T||{}),p.data),p.loadParser=_!=null?_:p.loadParser,p.format=A!=null?A:b.utils.path.extname(p.src).slice(1),p.srcs=p.src,p.name=p.alias,p}}I.Resolver=C},3556:function(at,I,w){"use strict";w(5931),w(3720)},5931:function(at,I,w){"use strict";var b=w(4412);I.resolveTextureUrl=b.resolveTextureUrl},4412:function(at,I,w){"use strict";var b=w(8405);w(9120);var D=w(931);const M={extension:b.ExtensionType.ResolveParser,test:D.loadTextures.test,parse:O=>{var C,m;return{resolution:parseFloat((m=(C=b.settings.RETINA_PREFIX.exec(O))==null?void 0:C[1])!=null?m:"1"),format:b.utils.path.extname(O).slice(1),src:O}}};b.extensions.add(M),I.resolveTextureUrl=M},3720:function(){"use strict"},5383:function(){"use strict"},7280:function(at,I){"use strict";function w(b,D){if(Array.isArray(D)){for(const M of D)if(b.startsWith(`data:${M}`))return!0;return!1}return b.startsWith(`data:${D}`)}I.checkDataUrl=w},7980:function(at,I,w){"use strict";var b=w(8405);function D(M,O){const C=M.split("?")[0],m=b.utils.path.extname(C).toLowerCase();return Array.isArray(O)?O.includes(m):m===O}I.checkExtension=D},955:function(at,I){"use strict";const w=(b,D,M=!1)=>(Array.isArray(b)||(b=[b]),D?b.map(O=>typeof O=="string"||M?D(O):O):b);I.convertToList=w},7697:function(at,I){"use strict";const w=(b,D)=>{const M=D.split("?")[1];return M&&(b+=`?${M}`),b};I.copySearchParams=w},6119:function(at,I){"use strict";function w(D,M,O,C,m){const p=M[O];for(let v=0;v<p.length;v++){const y=p[v];O<M.length-1?w(D.replace(C[O],y),M,O+1,C,m):m.push(D.replace(C[O],y))}}function b(D){const M=/\{(.*?)\}/g,O=D.match(M),C=[];if(O){const m=[];O.forEach(p=>{const v=p.substring(1,p.length-1).split(",");m.push(v)}),w(D,m,0,O,C)}else C.push(D);return C}I.createStringVariations=b},5237:function(at,I,w){"use strict";var b=w(7280),D=w(7980),M=w(955),O=w(7697),C=w(6119),m=w(2607);I.checkDataUrl=b.checkDataUrl,I.checkExtension=D.checkExtension,I.convertToList=M.convertToList,I.copySearchParams=O.copySearchParams,I.createStringVariations=C.createStringVariations,I.isSingleItem=m.isSingleItem},2607:function(at,I){"use strict";const w=b=>!Array.isArray(b);I.isSingleItem=w},7201:function(at,I,w){"use strict";var b=w(9252),D=w(778);b.extend([D]);const M=class mf{constructor(m=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=m}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(m){return this.value=m,this}set value(m){if(m instanceof mf)this._value=this.cloneSource(m._value),this._int=m._int,this._components.set(m._components);else{if(m===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,m))&&(this.normalize(m),this._value=this.cloneSource(m))}}get value(){return this._value}cloneSource(m){return typeof m=="string"||typeof m=="number"||m instanceof Number||m===null?m:Array.isArray(m)||ArrayBuffer.isView(m)?m.slice(0):typeof m=="object"&&m!==null?He({},m):m}isSourceEqual(m,p){const v=typeof m;if(v!==typeof p)return!1;if(v==="number"||v==="string"||m instanceof Number)return m===p;if(Array.isArray(m)&&Array.isArray(p)||ArrayBuffer.isView(m)&&ArrayBuffer.isView(p))return m.length!==p.length?!1:m.every((y,T)=>y===p[T]);if(m!==null&&p!==null){const y=Object.keys(m),T=Object.keys(p);return y.length!==T.length?!1:y.every(_=>m[_]===p[_])}return m===p}toRgba(){const[m,p,v,y]=this._components;return{r:m,g:p,b:v,a:y}}toRgb(){const[m,p,v]=this._components;return{r:m,g:p,b:v}}toRgbaString(){const[m,p,v]=this.toUint8RgbArray();return`rgba(${m},${p},${v},${this.alpha})`}toUint8RgbArray(m){const[p,v,y]=this._components;return m=m!=null?m:[],m[0]=Math.round(p*255),m[1]=Math.round(v*255),m[2]=Math.round(y*255),m}toRgbArray(m){m=m!=null?m:[];const[p,v,y]=this._components;return m[0]=p,m[1]=v,m[2]=y,m}toNumber(){return this._int}toLittleEndianNumber(){const m=this._int;return(m>>16)+(m&65280)+((m&255)<<16)}multiply(m){const[p,v,y,T]=mf.temp.setValue(m)._components;return this._components[0]*=p,this._components[1]*=v,this._components[2]*=y,this._components[3]*=T,this.refreshInt(),this._value=null,this}premultiply(m,p=!0){return p&&(this._components[0]*=m,this._components[1]*=m,this._components[2]*=m),this._components[3]=m,this.refreshInt(),this._value=null,this}toPremultiplied(m,p=!0){if(m===1)return(255<<24)+this._int;if(m===0)return p?0:this._int;let v=this._int>>16&255,y=this._int>>8&255,T=this._int&255;return p&&(v=v*m+.5|0,y=y*m+.5|0,T=T*m+.5|0),(m*255<<24)+(v<<16)+(y<<8)+T}toHex(){const m=this._int.toString(16);return`#${"000000".substring(0,6-m.length)+m}`}toHexa(){const m=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-m.length)+m}setAlpha(m){return this._components[3]=this._clamp(m),this}round(m){const[p,v,y]=this._components;return this._components[0]=Math.round(p*m)/m,this._components[1]=Math.round(v*m)/m,this._components[2]=Math.round(y*m)/m,this.refreshInt(),this._value=null,this}toArray(m){m=m!=null?m:[];const[p,v,y,T]=this._components;return m[0]=p,m[1]=v,m[2]=y,m[3]=T,m}normalize(m){let p,v,y,T;if((typeof m=="number"||m instanceof Number)&&m>=0&&m<=16777215){const _=m;p=(_>>16&255)/255,v=(_>>8&255)/255,y=(_&255)/255,T=1}else if((Array.isArray(m)||m instanceof Float32Array)&&m.length>=3&&m.length<=4)m=this._clamp(m),[p,v,y,T=1]=m;else if((m instanceof Uint8Array||m instanceof Uint8ClampedArray)&&m.length>=3&&m.length<=4)m=this._clamp(m,0,255),[p,v,y,T=255]=m,p/=255,v/=255,y/=255,T/=255;else if(typeof m=="string"||typeof m=="object"){if(typeof m=="string"){const A=mf.HEX_PATTERN.exec(m);A&&(m=`#${A[2]}`)}const _=b.colord(m);_.isValid()&&({r:p,g:v,b:y,a:T}=_.rgba,p/=255,v/=255,y/=255)}if(p!==void 0)this._components[0]=p,this._components[1]=v,this._components[2]=y,this._components[3]=T,this.refreshInt();else throw new Error(`Unable to convert color ${m}`)}refreshInt(){this._clamp(this._components);const[m,p,v]=this._components;this._int=(m*255<<16)+(p*255<<8)+(v*255|0)}_clamp(m,p=0,v=1){return typeof m=="number"?Math.min(Math.max(m,p),v):(m.forEach((y,T)=>{m[T]=Math.min(Math.max(y,p),v)}),m)}};M.shared=new M,M.temp=new M,M.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let O=M;I.Color=O},642:function(at,I,w){"use strict";var b=w(7201);I.Color=b.Color},9252:function(at,I){Object.defineProperty(I,"__esModule",{value:!0});var w={grad:.9,turn:360,rad:360/(2*Math.PI)},b=function(ut){return typeof ut=="string"?ut.length>0:typeof ut=="number"},D=function(ut,xt,At){return xt===void 0&&(xt=0),At===void 0&&(At=Math.pow(10,xt)),Math.round(At*ut)/At+0},M=function(ut,xt,At){return xt===void 0&&(xt=0),At===void 0&&(At=1),ut>At?At:ut>xt?ut:xt},O=function(ut){return(ut=isFinite(ut)?ut%360:0)>0?ut:ut+360},C=function(ut){return{r:M(ut.r,0,255),g:M(ut.g,0,255),b:M(ut.b,0,255),a:M(ut.a)}},m=function(ut){return{r:D(ut.r),g:D(ut.g),b:D(ut.b),a:D(ut.a,3)}},p=/^#([0-9a-f]{3,8})$/i,v=function(ut){var xt=ut.toString(16);return xt.length<2?"0"+xt:xt},y=function(ut){var xt=ut.r,At=ut.g,J=ut.b,ot=ut.a,q=Math.max(xt,At,J),gt=q-Math.min(xt,At,J),yt=gt?q===xt?(At-J)/gt:q===At?2+(J-xt)/gt:4+(xt-At)/gt:0;return{h:60*(yt<0?yt+6:yt),s:q?gt/q*100:0,v:q/255*100,a:ot}},T=function(ut){var xt=ut.h,At=ut.s,J=ut.v,ot=ut.a;xt=xt/360*6,At/=100,J/=100;var q=Math.floor(xt),gt=J*(1-At),yt=J*(1-(xt-q)*At),et=J*(1-(1-xt+q)*At),ht=q%6;return{r:255*[J,yt,gt,gt,et,J][ht],g:255*[et,J,J,yt,gt,gt][ht],b:255*[gt,gt,et,J,J,yt][ht],a:ot}},_=function(ut){return{h:O(ut.h),s:M(ut.s,0,100),l:M(ut.l,0,100),a:M(ut.a)}},A=function(ut){return{h:D(ut.h),s:D(ut.s),l:D(ut.l),a:D(ut.a,3)}},P=function(ut){return T((At=(xt=ut).s,{h:xt.h,s:(At*=((J=xt.l)<50?J:100-J)/100)>0?2*At/(J+At)*100:0,v:J+At,a:xt.a}));var xt,At,J},x=function(ut){return{h:(xt=y(ut)).h,s:(ot=(200-(At=xt.s))*(J=xt.v)/100)>0&&ot<200?At*J/100/(ot<=100?ot:200-ot)*100:0,l:ot/2,a:xt.a};var xt,At,J,ot},B=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,G=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,k=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,X=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Y={string:[[function(ut){var xt=p.exec(ut);return xt?(ut=xt[1]).length<=4?{r:parseInt(ut[0]+ut[0],16),g:parseInt(ut[1]+ut[1],16),b:parseInt(ut[2]+ut[2],16),a:ut.length===4?D(parseInt(ut[3]+ut[3],16)/255,2):1}:ut.length===6||ut.length===8?{r:parseInt(ut.substr(0,2),16),g:parseInt(ut.substr(2,2),16),b:parseInt(ut.substr(4,2),16),a:ut.length===8?D(parseInt(ut.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(ut){var xt=k.exec(ut)||X.exec(ut);return xt?xt[2]!==xt[4]||xt[4]!==xt[6]?null:C({r:Number(xt[1])/(xt[2]?100/255:1),g:Number(xt[3])/(xt[4]?100/255:1),b:Number(xt[5])/(xt[6]?100/255:1),a:xt[7]===void 0?1:Number(xt[7])/(xt[8]?100:1)}):null},"rgb"],[function(ut){var xt=B.exec(ut)||G.exec(ut);if(!xt)return null;var At,J,ot=_({h:(At=xt[1],J=xt[2],J===void 0&&(J="deg"),Number(At)*(w[J]||1)),s:Number(xt[3]),l:Number(xt[4]),a:xt[5]===void 0?1:Number(xt[5])/(xt[6]?100:1)});return P(ot)},"hsl"]],object:[[function(ut){var xt=ut.r,At=ut.g,J=ut.b,ot=ut.a,q=ot===void 0?1:ot;return b(xt)&&b(At)&&b(J)?C({r:Number(xt),g:Number(At),b:Number(J),a:Number(q)}):null},"rgb"],[function(ut){var xt=ut.h,At=ut.s,J=ut.l,ot=ut.a,q=ot===void 0?1:ot;if(!b(xt)||!b(At)||!b(J))return null;var gt=_({h:Number(xt),s:Number(At),l:Number(J),a:Number(q)});return P(gt)},"hsl"],[function(ut){var xt=ut.h,At=ut.s,J=ut.v,ot=ut.a,q=ot===void 0?1:ot;if(!b(xt)||!b(At)||!b(J))return null;var gt=function(yt){return{h:O(yt.h),s:M(yt.s,0,100),v:M(yt.v,0,100),a:M(yt.a)}}({h:Number(xt),s:Number(At),v:Number(J),a:Number(q)});return T(gt)},"hsv"]]},j=function(ut,xt){for(var At=0;At<xt.length;At++){var J=xt[At][0](ut);if(J)return[J,xt[At][1]]}return[null,void 0]},st=function(ut){return typeof ut=="string"?j(ut.trim(),Y.string):typeof ut=="object"&&ut!==null?j(ut,Y.object):[null,void 0]},tt=function(ut,xt){var At=x(ut);return{h:At.h,s:M(At.s+100*xt,0,100),l:At.l,a:At.a}},rt=function(ut){return(299*ut.r+587*ut.g+114*ut.b)/1e3/255},ct=function(ut,xt){var At=x(ut);return{h:At.h,s:At.s,l:M(At.l+100*xt,0,100),a:At.a}},pt=function(){function ut(xt){this.parsed=st(xt)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return ut.prototype.isValid=function(){return this.parsed!==null},ut.prototype.brightness=function(){return D(rt(this.rgba),2)},ut.prototype.isDark=function(){return rt(this.rgba)<.5},ut.prototype.isLight=function(){return rt(this.rgba)>=.5},ut.prototype.toHex=function(){return xt=m(this.rgba),At=xt.r,J=xt.g,ot=xt.b,gt=(q=xt.a)<1?v(D(255*q)):"","#"+v(At)+v(J)+v(ot)+gt;var xt,At,J,ot,q,gt},ut.prototype.toRgb=function(){return m(this.rgba)},ut.prototype.toRgbString=function(){return xt=m(this.rgba),At=xt.r,J=xt.g,ot=xt.b,(q=xt.a)<1?"rgba("+At+", "+J+", "+ot+", "+q+")":"rgb("+At+", "+J+", "+ot+")";var xt,At,J,ot,q},ut.prototype.toHsl=function(){return A(x(this.rgba))},ut.prototype.toHslString=function(){return xt=A(x(this.rgba)),At=xt.h,J=xt.s,ot=xt.l,(q=xt.a)<1?"hsla("+At+", "+J+"%, "+ot+"%, "+q+")":"hsl("+At+", "+J+"%, "+ot+"%)";var xt,At,J,ot,q},ut.prototype.toHsv=function(){return xt=y(this.rgba),{h:D(xt.h),s:D(xt.s),v:D(xt.v),a:D(xt.a,3)};var xt},ut.prototype.invert=function(){return Rt({r:255-(xt=this.rgba).r,g:255-xt.g,b:255-xt.b,a:xt.a});var xt},ut.prototype.saturate=function(xt){return xt===void 0&&(xt=.1),Rt(tt(this.rgba,xt))},ut.prototype.desaturate=function(xt){return xt===void 0&&(xt=.1),Rt(tt(this.rgba,-xt))},ut.prototype.grayscale=function(){return Rt(tt(this.rgba,-1))},ut.prototype.lighten=function(xt){return xt===void 0&&(xt=.1),Rt(ct(this.rgba,xt))},ut.prototype.darken=function(xt){return xt===void 0&&(xt=.1),Rt(ct(this.rgba,-xt))},ut.prototype.rotate=function(xt){return xt===void 0&&(xt=15),this.hue(this.hue()+xt)},ut.prototype.alpha=function(xt){return typeof xt=="number"?Rt({r:(At=this.rgba).r,g:At.g,b:At.b,a:xt}):D(this.rgba.a,3);var At},ut.prototype.hue=function(xt){var At=x(this.rgba);return typeof xt=="number"?Rt({h:xt,s:At.s,l:At.l,a:At.a}):D(At.h)},ut.prototype.isEqual=function(xt){return this.toHex()===Rt(xt).toHex()},ut}(),Rt=function(ut){return ut instanceof pt?ut:new pt(ut)},Lt=[];I.Colord=pt,I.colord=Rt,I.extend=function(ut){ut.forEach(function(xt){Lt.indexOf(xt)<0&&(xt(pt,Y),Lt.push(xt))})},I.getFormat=function(ut){return st(ut)[1]},I.random=function(){return new pt({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},778:function(at){at.exports=function(I,w){var b={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},D={};for(var M in b)D[b[M]]=M;var O={};I.prototype.toName=function(C){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var m,p,v=D[this.toHex()];if(v)return v;if(C!=null&&C.closest){var y=this.toRgb(),T=1/0,_="black";if(!O.length)for(var A in b)O[A]=new I(b[A]).toRgb();for(var P in b){var x=(m=y,p=O[P],Math.pow(m.r-p.r,2)+Math.pow(m.g-p.g,2)+Math.pow(m.b-p.b,2));x<T&&(T=x,_=P)}return _}},w.string.push([function(C){var m=C.toLowerCase(),p=m==="transparent"?"#0000":b[m];return p?new I(p).toRgb():null},"name"])}},4970:function(at,I){"use strict";var w=(D=>(D[D.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",D[D.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",D[D.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",D[D.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",D[D.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",D[D.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",D[D.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",D[D.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",D[D.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",D[D.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",D[D.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",D[D.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",D[D.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",D[D.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",D[D.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",D[D.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",D[D.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",D[D.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",D[D.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",D[D.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",D[D.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",D[D.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",D[D.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",D[D.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",D[D.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",D[D.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",D[D.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",D))(w||{});const b={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};I.INTERNAL_FORMATS=w,I.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=b},9974:function(at,I,w){"use strict";var b=w(4970);w(2634),w(2035),w(2935);var D=w(3606),M=w(2109),O=w(7241),C=w(8415),m=w(8470),p=w(8182),v=w(9674),y=w(6535);I.INTERNAL_FORMATS=b.INTERNAL_FORMATS,I.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=b.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,I.detectCompressedTextures=D.detectCompressedTextures,I.loadDDS=M.loadDDS,I.loadKTX=O.loadKTX,I.resolveCompressedTextureUrl=C.resolveCompressedTextureUrl,I.parseDDS=m.parseDDS,I.FORMATS_TO_COMPONENTS=p.FORMATS_TO_COMPONENTS,I.TYPES_TO_BYTES_PER_COMPONENT=p.TYPES_TO_BYTES_PER_COMPONENT,I.TYPES_TO_BYTES_PER_PIXEL=p.TYPES_TO_BYTES_PER_PIXEL,I.parseKTX=p.parseKTX,I.BlobResource=v.BlobResource,I.CompressedTextureResource=y.CompressedTextureResource},3557:function(){"use strict"},3606:function(at,I,w){"use strict";var b=w(8405);let D,M;function O(){M={s3tc:D.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:D.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:D.getExtension("WEBGL_compressed_texture_etc"),etc1:D.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:D.getExtension("WEBGL_compressed_texture_pvrtc")||D.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:D.getExtension("WEBGL_compressed_texture_atc"),astc:D.getExtension("WEBGL_compressed_texture_astc")}}const C={extension:{type:b.ExtensionType.DetectionParser,priority:2},test:()=>he(this,null,function*(){const m=b.settings.ADAPTER.createCanvas().getContext("webgl");return m?(D=m,!0):(console.warn("WebGL not available for compressed textures."),!1)}),add:m=>he(this,null,function*(){M||O();const p=[];for(const v in M)M[v]&&p.push(v);return[...p,...m]}),remove:m=>he(this,null,function*(){return M||O(),m.filter(p=>!(p in M))})};b.extensions.add(C),I.detectCompressedTextures=C},2634:function(at,I,w){"use strict";w(3557);var b=w(3606),D=w(2109),M=w(7241),O=w(8415);I.detectCompressedTextures=b.detectCompressedTextures,I.loadDDS=D.loadDDS,I.loadKTX=M.loadKTX,I.resolveCompressedTextureUrl=O.resolveCompressedTextureUrl},2109:function(at,I,w){"use strict";var b=w(3520),D=w(8405);w(2035);var M=w(8470);const O={extension:{type:D.ExtensionType.LoadParser,priority:b.LoaderParserPriority.High},name:"loadDDS",test(m){return b.checkExtension(m,".dds")},load(m,p,v){return he(this,null,function*(){const y=yield(yield D.settings.ADAPTER.fetch(m)).arrayBuffer(),T=M.parseDDS(y).map(_=>{const A=new D.BaseTexture(_,He({mipmap:D.MIPMAP_MODES.OFF,alphaMode:D.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:D.utils.getResolutionOfUrl(m)},p.data));return b.createTexture(A,v,m)});return T.length===1?T[0]:T})},unload(m){Array.isArray(m)?m.forEach(p=>p.destroy(!0)):m.destroy(!0)}};D.extensions.add(O),I.loadDDS=O},7241:function(at,I,w){"use strict";var b=w(3520),D=w(8405);w(2035);var M=w(8182);const O={extension:{type:D.ExtensionType.LoadParser,priority:b.LoaderParserPriority.High},name:"loadKTX",test(m){return b.checkExtension(m,".ktx")},load(m,p,v){return he(this,null,function*(){const y=yield(yield D.settings.ADAPTER.fetch(m)).arrayBuffer(),{compressed:T,uncompressed:_,kvData:A}=M.parseKTX(m,y),P=T!=null?T:_,x=He({mipmap:D.MIPMAP_MODES.OFF,alphaMode:D.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:D.utils.getResolutionOfUrl(m)},p.data),B=P.map(G=>{var Y;P===_&&Object.assign(x,{type:G.type,format:G.format});const k=(Y=G.resource)!=null?Y:G,X=new D.BaseTexture(k,x);return X.ktxKeyValueData=A,b.createTexture(X,v,m)});return B.length===1?B[0]:B})},unload(m){Array.isArray(m)?m.forEach(p=>p.destroy(!0)):m.destroy(!0)}};D.extensions.add(O),I.loadKTX=O},8415:function(at,I,w){"use strict";var b=w(8405);const D={extension:b.ExtensionType.ResolveParser,test:M=>{const O=b.utils.path.extname(M).slice(1);return["basis","ktx","dds"].includes(O)},parse:M=>{var C,m,p,v;const O=b.utils.path.extname(M).slice(1);if(O==="ktx"){const y=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(y.some(T=>M.endsWith(T)))return{resolution:parseFloat((m=(C=b.settings.RETINA_PREFIX.exec(M))==null?void 0:C[1])!=null?m:"1"),format:y.find(T=>M.endsWith(T)),src:M}}return{resolution:parseFloat((v=(p=b.settings.RETINA_PREFIX.exec(M))==null?void 0:p[1])!=null?v:"1"),format:O,src:M}}};b.extensions.add(D),I.resolveCompressedTextureUrl=D},2035:function(at,I,w){"use strict";var b=w(8470),D=w(8182);I.parseDDS=b.parseDDS,I.FORMATS_TO_COMPONENTS=D.FORMATS_TO_COMPONENTS,I.TYPES_TO_BYTES_PER_COMPONENT=D.TYPES_TO_BYTES_PER_COMPONENT,I.TYPES_TO_BYTES_PER_PIXEL=D.TYPES_TO_BYTES_PER_PIXEL,I.parseKTX=D.parseKTX},8470:function(at,I,w){"use strict";var b=w(4970);w(2935);var D=w(6535);const M=4,O=124,C=32,m=20,p=542327876,v={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},y={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},T={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},_=1,A=2,P=4,x=64,B=512,G=131072,k=827611204,X=861165636,Y=894720068,j=808540228,st=4,tt={[k]:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[X]:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Y]:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},rt={70:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:b.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:b.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:b.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:b.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function ct(pt){const Rt=new Uint32Array(pt);if(Rt[0]!==p)throw new Error("Invalid DDS file magic word");const Lt=new Uint32Array(pt,0,O/Uint32Array.BYTES_PER_ELEMENT),ut=Lt[v.HEIGHT],xt=Lt[v.WIDTH],At=Lt[v.MIPMAP_COUNT],J=new Uint32Array(pt,v.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,C/Uint32Array.BYTES_PER_ELEMENT),ot=J[_];if(ot&P){const q=J[y.FOURCC];if(q!==j){const Ct=tt[q],jt=M+O,Kt=new Uint8Array(pt,jt);return[new D.CompressedTextureResource(Kt,{format:Ct,width:xt,height:ut,levels:At})]}const gt=M+O,yt=new Uint32Array(Rt.buffer,gt,m/Uint32Array.BYTES_PER_ELEMENT),et=yt[T.DXGI_FORMAT],ht=yt[T.RESOURCE_DIMENSION],Et=yt[T.MISC_FLAG],kt=yt[T.ARRAY_SIZE],Ft=rt[et];if(Ft===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${et}`);if(Et===st)throw new Error("DDSParser does not support cubemap textures");if(ht===6)throw new Error("DDSParser does not supported 3D texture data");const Bt=new Array,Gt=M+O+m;if(kt===1)Bt.push(new Uint8Array(pt,Gt));else{const Ct=b.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[Ft];let jt=0,Kt=xt,ne=ut;for(let ue=0;ue<At;ue++){const Oe=Math.max(1,Kt+3&-4),de=Math.max(1,ne+3&-4),oe=Oe*de*Ct;jt+=oe,Kt=Kt>>>1,ne=ne>>>1}let me=Gt;for(let ue=0;ue<kt;ue++)Bt.push(new Uint8Array(pt,me,jt)),me+=jt}return Bt.map(Ct=>new D.CompressedTextureResource(Ct,{format:Ft,width:xt,height:ut,levels:At}))}throw ot&x?new Error("DDSParser does not support uncompressed texture data."):ot&B?new Error("DDSParser does not supported YUV uncompressed texture data."):ot&G?new Error("DDSParser does not support single-channel (lumninance) texture data!"):ot&A?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}I.parseDDS=ct},8182:function(at,I,w){"use strict";var b=w(8405),D=w(4970);w(2935);var M=w(6535);const O=[171,75,84,88,32,49,49,187,13,10,26,10],C=67305985,m={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},p=64,v={[b.TYPES.UNSIGNED_BYTE]:1,[b.TYPES.UNSIGNED_SHORT]:2,[b.TYPES.INT]:4,[b.TYPES.UNSIGNED_INT]:4,[b.TYPES.FLOAT]:4,[b.TYPES.HALF_FLOAT]:8},y={[b.FORMATS.RGBA]:4,[b.FORMATS.RGB]:3,[b.FORMATS.RG]:2,[b.FORMATS.RED]:1,[b.FORMATS.LUMINANCE]:1,[b.FORMATS.LUMINANCE_ALPHA]:2,[b.FORMATS.ALPHA]:1},T={[b.TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[b.TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[b.TYPES.UNSIGNED_SHORT_5_6_5]:2};function _(B,G,k=!1){const X=new DataView(G);if(!A(B,X))return null;const Y=X.getUint32(m.ENDIANNESS,!0)===C,j=X.getUint32(m.GL_TYPE,Y),st=X.getUint32(m.GL_FORMAT,Y),tt=X.getUint32(m.GL_INTERNAL_FORMAT,Y),rt=X.getUint32(m.PIXEL_WIDTH,Y),ct=X.getUint32(m.PIXEL_HEIGHT,Y)||1,pt=X.getUint32(m.PIXEL_DEPTH,Y)||1,Rt=X.getUint32(m.NUMBER_OF_ARRAY_ELEMENTS,Y)||1,Lt=X.getUint32(m.NUMBER_OF_FACES,Y),ut=X.getUint32(m.NUMBER_OF_MIPMAP_LEVELS,Y),xt=X.getUint32(m.BYTES_OF_KEY_VALUE_DATA,Y);if(ct===0||pt!==1)throw new Error("Only 2D textures are supported");if(Lt!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(Rt!==1)throw new Error("WebGL does not support array textures");const At=4,J=4,ot=rt+3&-4,q=ct+3&-4,gt=new Array(Rt);let yt=rt*ct;j===0&&(yt=ot*q);let et;if(j!==0?v[j]?et=v[j]*y[st]:et=T[j]:et=D.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[tt],et===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const ht=k?x(X,xt,Y):null;let Et=yt*et,kt=rt,Ft=ct,Bt=ot,Gt=q,Ct=p+xt;for(let jt=0;jt<ut;jt++){const Kt=X.getUint32(Ct,Y);let ne=Ct+4;for(let me=0;me<Rt;me++){let ue=gt[me];ue||(ue=gt[me]=new Array(ut)),ue[jt]={levelID:jt,levelWidth:ut>1||j!==0?kt:Bt,levelHeight:ut>1||j!==0?Ft:Gt,levelBuffer:new Uint8Array(G,ne,Et)},ne+=Et}Ct+=Kt+4,Ct=Ct%4!==0?Ct+4-Ct%4:Ct,kt=kt>>1||1,Ft=Ft>>1||1,Bt=kt+At-1&~(At-1),Gt=Ft+J-1&~(J-1),Et=Bt*Gt*et}return j!==0?{uncompressed:gt.map(jt=>{let Kt=jt[0].levelBuffer,ne=!1;return j===b.TYPES.FLOAT?Kt=new Float32Array(jt[0].levelBuffer.buffer,jt[0].levelBuffer.byteOffset,jt[0].levelBuffer.byteLength/4):j===b.TYPES.UNSIGNED_INT?(ne=!0,Kt=new Uint32Array(jt[0].levelBuffer.buffer,jt[0].levelBuffer.byteOffset,jt[0].levelBuffer.byteLength/4)):j===b.TYPES.INT&&(ne=!0,Kt=new Int32Array(jt[0].levelBuffer.buffer,jt[0].levelBuffer.byteOffset,jt[0].levelBuffer.byteLength/4)),{resource:new b.BufferResource(Kt,{width:jt[0].levelWidth,height:jt[0].levelHeight}),type:j,format:ne?P(st):st}}),kvData:ht}:{compressed:gt.map(jt=>new M.CompressedTextureResource(null,{format:tt,width:rt,height:ct,levels:ut,levelBuffers:jt})),kvData:ht}}function A(B,G){for(let k=0;k<O.length;k++)if(G.getUint8(k)!==O[k])return console.error(`${B} is not a valid *.ktx file!`),!1;return!0}function P(B){switch(B){case b.FORMATS.RGBA:return b.FORMATS.RGBA_INTEGER;case b.FORMATS.RGB:return b.FORMATS.RGB_INTEGER;case b.FORMATS.RG:return b.FORMATS.RG_INTEGER;case b.FORMATS.RED:return b.FORMATS.RED_INTEGER;default:return B}}function x(B,G,k){const X=new Map;let Y=0;for(;Y<G;){const j=B.getUint32(p+Y,k),st=p+Y+4,tt=3-(j+3)%4;if(j===0||j>G-Y){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let rt=0;for(;rt<j&&B.getUint8(st+rt)!==0;rt++);if(rt===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const ct=new TextDecoder().decode(new Uint8Array(B.buffer,st,rt)),pt=new DataView(B.buffer,st+rt+1,j-rt-1);X.set(ct,pt),Y+=4+j+tt}return X}I.FORMATS_TO_COMPONENTS=y,I.TYPES_TO_BYTES_PER_COMPONENT=v,I.TYPES_TO_BYTES_PER_PIXEL=T,I.parseKTX=_},9674:function(at,I,w){"use strict";var b=w(8405);class D extends b.BufferResource{constructor(O,C={width:1,height:1,autoLoad:!0}){let m,p;typeof O=="string"?(m=O,p=new Uint8Array):(m=null,p=O),super(p,C),this.origin=m,this.buffer=p?new b.ViewableBuffer(p):null,this._load=null,this.loaded=!1,this.origin!==null&&C.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(O){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(O=>O.blob()).then(O=>O.arrayBuffer()).then(O=>(this.data=new Uint32Array(O),this.buffer=new b.ViewableBuffer(O),this.loaded=!0,this.onBlobLoaded(O),this.update(),this)),this._load)}}I.BlobResource=D},6535:function(at,I,w){"use strict";var b=w(4970),D=w(9674);class M extends D.BlobResource{constructor(C,m){super(C,m),this.format=m.format,this.levels=m.levels||1,this._width=m.width,this._height=m.height,this._extension=M._formatToExtension(this.format),(m.levelBuffers||this.buffer)&&(this._levelBuffers=m.levelBuffers||M._createLevelBuffers(C instanceof Uint8Array?C:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(C,m,p){const v=C.gl;if(!C.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;v.pixelStorei(v.UNPACK_ALIGNMENT,4);for(let y=0,T=this.levels;y<T;y++){const{levelID:_,levelWidth:A,levelHeight:P,levelBuffer:x}=this._levelBuffers[y];v.compressedTexImage2D(v.TEXTURE_2D,_,this.format,A,P,0,x)}return!0}onBlobLoaded(){this._levelBuffers=M._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(C){if(C>=33776&&C<=33779)return"s3tc";if(C>=37488&&C<=37497)return"etc";if(C>=35840&&C<=35843)return"pvrtc";if(C>=36196)return"etc1";if(C>=35986&&C<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(C,m,p,v,y,T,_){const A=new Array(p);let P=C.byteOffset,x=T,B=_,G=x+v-1&~(v-1),k=B+y-1&~(y-1),X=G*k*b.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[m];for(let Y=0;Y<p;Y++)A[Y]={levelID:Y,levelWidth:p>1?x:G,levelHeight:p>1?B:k,levelBuffer:new Uint8Array(C.buffer,P,X)},P+=X,x=x>>1||1,B=B>>1||1,G=x+v-1&~(v-1),k=B+y-1&~(y-1),X=G*k*b.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[m];return A}}I.CompressedTextureResource=M},2935:function(at,I,w){"use strict";var b=w(9674),D=w(6535);I.BlobResource=b.BlobResource,I.CompressedTextureResource=D.CompressedTextureResource},3994:function(at,I){"use strict";var w=(j=>(j[j.WEBGL_LEGACY=0]="WEBGL_LEGACY",j[j.WEBGL=1]="WEBGL",j[j.WEBGL2=2]="WEBGL2",j))(w||{}),b=(j=>(j[j.UNKNOWN=0]="UNKNOWN",j[j.WEBGL=1]="WEBGL",j[j.CANVAS=2]="CANVAS",j))(b||{}),D=(j=>(j[j.COLOR=16384]="COLOR",j[j.DEPTH=256]="DEPTH",j[j.STENCIL=1024]="STENCIL",j))(D||{}),M=(j=>(j[j.NORMAL=0]="NORMAL",j[j.ADD=1]="ADD",j[j.MULTIPLY=2]="MULTIPLY",j[j.SCREEN=3]="SCREEN",j[j.OVERLAY=4]="OVERLAY",j[j.DARKEN=5]="DARKEN",j[j.LIGHTEN=6]="LIGHTEN",j[j.COLOR_DODGE=7]="COLOR_DODGE",j[j.COLOR_BURN=8]="COLOR_BURN",j[j.HARD_LIGHT=9]="HARD_LIGHT",j[j.SOFT_LIGHT=10]="SOFT_LIGHT",j[j.DIFFERENCE=11]="DIFFERENCE",j[j.EXCLUSION=12]="EXCLUSION",j[j.HUE=13]="HUE",j[j.SATURATION=14]="SATURATION",j[j.COLOR=15]="COLOR",j[j.LUMINOSITY=16]="LUMINOSITY",j[j.NORMAL_NPM=17]="NORMAL_NPM",j[j.ADD_NPM=18]="ADD_NPM",j[j.SCREEN_NPM=19]="SCREEN_NPM",j[j.NONE=20]="NONE",j[j.SRC_OVER=0]="SRC_OVER",j[j.SRC_IN=21]="SRC_IN",j[j.SRC_OUT=22]="SRC_OUT",j[j.SRC_ATOP=23]="SRC_ATOP",j[j.DST_OVER=24]="DST_OVER",j[j.DST_IN=25]="DST_IN",j[j.DST_OUT=26]="DST_OUT",j[j.DST_ATOP=27]="DST_ATOP",j[j.ERASE=26]="ERASE",j[j.SUBTRACT=28]="SUBTRACT",j[j.XOR=29]="XOR",j))(M||{}),O=(j=>(j[j.POINTS=0]="POINTS",j[j.LINES=1]="LINES",j[j.LINE_LOOP=2]="LINE_LOOP",j[j.LINE_STRIP=3]="LINE_STRIP",j[j.TRIANGLES=4]="TRIANGLES",j[j.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",j[j.TRIANGLE_FAN=6]="TRIANGLE_FAN",j))(O||{}),C=(j=>(j[j.RGBA=6408]="RGBA",j[j.RGB=6407]="RGB",j[j.RG=33319]="RG",j[j.RED=6403]="RED",j[j.RGBA_INTEGER=36249]="RGBA_INTEGER",j[j.RGB_INTEGER=36248]="RGB_INTEGER",j[j.RG_INTEGER=33320]="RG_INTEGER",j[j.RED_INTEGER=36244]="RED_INTEGER",j[j.ALPHA=6406]="ALPHA",j[j.LUMINANCE=6409]="LUMINANCE",j[j.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",j[j.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",j[j.DEPTH_STENCIL=34041]="DEPTH_STENCIL",j))(C||{}),m=(j=>(j[j.TEXTURE_2D=3553]="TEXTURE_2D",j[j.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",j[j.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",j[j.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",j[j.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",j[j.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",j[j.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",j[j.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",j[j.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",j))(m||{}),p=(j=>(j[j.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",j[j.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",j[j.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",j[j.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",j[j.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",j[j.UNSIGNED_INT=5125]="UNSIGNED_INT",j[j.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",j[j.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",j[j.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",j[j.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",j[j.BYTE=5120]="BYTE",j[j.SHORT=5122]="SHORT",j[j.INT=5124]="INT",j[j.FLOAT=5126]="FLOAT",j[j.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",j[j.HALF_FLOAT=36193]="HALF_FLOAT",j))(p||{}),v=(j=>(j[j.FLOAT=0]="FLOAT",j[j.INT=1]="INT",j[j.UINT=2]="UINT",j))(v||{}),y=(j=>(j[j.NEAREST=0]="NEAREST",j[j.LINEAR=1]="LINEAR",j))(y||{}),T=(j=>(j[j.CLAMP=33071]="CLAMP",j[j.REPEAT=10497]="REPEAT",j[j.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",j))(T||{}),_=(j=>(j[j.OFF=0]="OFF",j[j.POW2=1]="POW2",j[j.ON=2]="ON",j[j.ON_MANUAL=3]="ON_MANUAL",j))(_||{}),A=(j=>(j[j.NPM=0]="NPM",j[j.UNPACK=1]="UNPACK",j[j.PMA=2]="PMA",j[j.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",j[j.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",j[j.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",j))(A||{}),P=(j=>(j[j.NO=0]="NO",j[j.YES=1]="YES",j[j.AUTO=2]="AUTO",j[j.BLEND=0]="BLEND",j[j.CLEAR=1]="CLEAR",j[j.BLIT=2]="BLIT",j))(P||{}),x=(j=>(j[j.AUTO=0]="AUTO",j[j.MANUAL=1]="MANUAL",j))(x||{}),B=(j=>(j.LOW="lowp",j.MEDIUM="mediump",j.HIGH="highp",j))(B||{}),G=(j=>(j[j.NONE=0]="NONE",j[j.SCISSOR=1]="SCISSOR",j[j.STENCIL=2]="STENCIL",j[j.SPRITE=3]="SPRITE",j[j.COLOR=4]="COLOR",j))(G||{}),k=(j=>(j[j.RED=1]="RED",j[j.GREEN=2]="GREEN",j[j.BLUE=4]="BLUE",j[j.ALPHA=8]="ALPHA",j))(k||{}),X=(j=>(j[j.NONE=0]="NONE",j[j.LOW=2]="LOW",j[j.MEDIUM=4]="MEDIUM",j[j.HIGH=8]="HIGH",j))(X||{}),Y=(j=>(j[j.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",j[j.ARRAY_BUFFER=34962]="ARRAY_BUFFER",j[j.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",j))(Y||{});I.ALPHA_MODES=A,I.BLEND_MODES=M,I.BUFFER_BITS=D,I.BUFFER_TYPE=Y,I.CLEAR_MODES=P,I.COLOR_MASK_BITS=k,I.DRAW_MODES=O,I.ENV=w,I.FORMATS=C,I.GC_MODES=x,I.MASK_TYPES=G,I.MIPMAP_MODES=_,I.MSAA_QUALITY=X,I.PRECISION=B,I.RENDERER_TYPE=b,I.SAMPLER_TYPES=v,I.SCALE_MODES=y,I.TARGETS=m,I.TYPES=p,I.WRAP_MODES=T},1737:function(){"use strict"},4379:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(8865),O=w(1524),C=w(2947),m=w(8731),p=w(6830);const v=class gp extends p.SystemManager{constructor(_){super(),this.type=b.RENDERER_TYPE.WEBGL,_=Object.assign({},O.settings.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new m.UniformGroup({projectionMatrix:new M.Matrix},!0);const A={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:gp.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(A),"useContextAlpha"in _&&(C.deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=gp.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:C.isWebGLSupported()}render(_,A){this.objectRenderer.render(_,A)}resize(_,A){this._view.resizeView(_,A)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return C.deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return C.deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return C.deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return C.deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){C.deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return C.deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){C.deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return C.deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,A){return this.textureGenerator.generateTexture(_,A)}};v.extension={type:D.ExtensionType.Renderer,priority:1},v.__plugins={},v.__systems={};let y=v;D.extensions.handleByMap(D.ExtensionType.RendererPlugin,y.__plugins),D.extensions.handleByMap(D.ExtensionType.RendererSystem,y.__systems),D.extensions.add(y),I.Renderer=y},7562:function(at,I,w){"use strict";var b=w(6967);const D=[];b.extensions.handleByList(b.ExtensionType.Renderer,D);function M(O){for(const C of D)if(C.test(O))return new C(O);throw new Error("Unable to auto-detect a suitable renderer.")}I.autoDetectRenderer=M},2491:function(at,I,w){"use strict";var b=w(642),D=w(6967);class M{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new b.Color(0),this.alpha=1}init(C){this.clearBeforeRender=C.clearBeforeRender;const{backgroundColor:m,background:p,backgroundAlpha:v}=C,y=p!=null?p:m;y!==void 0&&(this.color=y),this.alpha=v}get color(){return this._backgroundColor.value}set color(C){this._backgroundColor.setValue(C)}get alpha(){return this._backgroundColor.alpha}set alpha(C){this._backgroundColor.setAlpha(C)}get backgroundColor(){return this._backgroundColor}destroy(){}}M.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},M.extension={type:[D.ExtensionType.RendererSystem,D.ExtensionType.CanvasRendererSystem],name:"background"},D.extensions.add(M),I.BackgroundSystem=M},2289:function(at,I,w){"use strict";var b=w(3994);class D{constructor(){this.texArray=null,this.blend=0,this.type=b.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}I.BatchDrawCall=D},6153:function(at,I,w){"use strict";var b=w(3994),D=w(8630),M=w(6710);class O extends M.Geometry{constructor(m=!1){super(),this._buffer=new D.Buffer(null,m,!1),this._indexBuffer=new D.Buffer(null,m,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,b.TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,b.TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,b.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,b.TYPES.FLOAT).addIndex(this._indexBuffer)}}I.BatchGeometry=O},7675:function(at,I,w){"use strict";var b=w(642),D=w(3994),M=w(6967),O=w(1524),C=w(2947),m=w(2594),p=w(6958),v=w(5637),y=w(1368),T=w(2289),_=w(6153),A=w(8183),P=w(811),x=w(5716),B=w(749),G=w(3788),k=w(690),X=w(3283);const Y=class Yn extends G.ObjectRenderer{constructor(tt){super(tt),this.setShaderGenerator(),this.geometryClass=_.BatchGeometry,this.vertexSize=6,this.state=v.State.for2d(),this.size=Yn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),tt.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){var tt;return this._defaultMaxTextures=(tt=this._defaultMaxTextures)!=null?tt:B.maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(tt){this._defaultMaxTextures=tt}static get canUploadSameBuffer(){var tt;return this._canUploadSameBuffer=(tt=this._canUploadSameBuffer)!=null?tt:x.canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(tt){this._canUploadSameBuffer=tt}get MAX_TEXTURES(){return C.deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return X.default}static get defaultFragmentTemplate(){return k.default}setShaderGenerator({vertex:tt=Yn.defaultVertexSrc,fragment:rt=Yn.defaultFragmentTemplate}={}){this.shaderGenerator=new A.BatchShaderGenerator(tt,rt)}contextChange(){const tt=this.renderer.gl;O.settings.PREFER_ENV===D.ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(tt.getParameter(tt.MAX_TEXTURE_IMAGE_UNITS),Yn.defaultMaxTextures),this.maxTextures=p.checkMaxIfStatementsInShader(this.maxTextures,tt)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let rt=0;rt<this._packedGeometryPoolSize;rt++)this._packedGeometries[rt]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:tt,_textureArrayPool:rt}=Yn,ct=this.size/4,pt=Math.floor(ct/this.maxTextures)+1;for(;tt.length<ct;)tt.push(new T.BatchDrawCall);for(;rt.length<pt;)rt.push(new P.BatchTextureArray);for(let Rt=0;Rt<this.maxTextures;Rt++)this._tempBoundTextures[Rt]=null}onPrerender(){this._flushId=0}render(tt){tt._texture.valid&&(this._vertexCount+tt.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=tt.vertexData.length/2,this._indexCount+=tt.indices.length,this._bufferedTextures[this._bufferSize]=tt._texture.baseTexture,this._bufferedElements[this._bufferSize++]=tt)}buildTexturesAndDrawCalls(){const{_bufferedTextures:tt,maxTextures:rt}=this,ct=Yn._textureArrayPool,pt=this.renderer.batch,Rt=this._tempBoundTextures,Lt=this.renderer.textureGC.count;let ut=++y.BaseTexture._globalBatch,xt=0,At=ct[0],J=0;pt.copyBoundTextures(Rt,rt);for(let ot=0;ot<this._bufferSize;++ot){const q=tt[ot];tt[ot]=null,q._batchEnabled!==ut&&(At.count>=rt&&(pt.boundArray(At,Rt,ut,rt),this.buildDrawCalls(At,J,ot),J=ot,At=ct[++xt],++ut),q._batchEnabled=ut,q.touched=Lt,At.elements[At.count++]=q)}At.count>0&&(pt.boundArray(At,Rt,ut,rt),this.buildDrawCalls(At,J,this._bufferSize),++xt,++ut);for(let ot=0;ot<Rt.length;ot++)Rt[ot]=null;y.BaseTexture._globalBatch=ut}buildDrawCalls(tt,rt,ct){const{_bufferedElements:pt,_attributeBuffer:Rt,_indexBuffer:Lt,vertexSize:ut}=this,xt=Yn._drawCallPool;let At=this._dcIndex,J=this._aIndex,ot=this._iIndex,q=xt[At];q.start=this._iIndex,q.texArray=tt;for(let gt=rt;gt<ct;++gt){const yt=pt[gt],et=yt._texture.baseTexture,ht=C.premultiplyBlendMode[et.alphaMode?1:0][yt.blendMode];pt[gt]=null,rt<gt&&q.blend!==ht&&(q.size=ot-q.start,rt=gt,q=xt[++At],q.texArray=tt,q.start=ot),this.packInterleavedGeometry(yt,Rt,Lt,J,ot),J+=yt.vertexData.length/2*ut,ot+=yt.indices.length,q.blend=ht}rt<ct&&(q.size=ot-q.start,++At),this._dcIndex=At,this._aIndex=J,this._iIndex=ot}bindAndClearTexArray(tt){const rt=this.renderer.texture;for(let ct=0;ct<tt.count;ct++)rt.bind(tt.elements[ct],tt.ids[ct]),tt.elements[ct]=null;tt.count=0}updateGeometry(){const{_packedGeometries:tt,_attributeBuffer:rt,_indexBuffer:ct}=this;Yn.canUploadSameBuffer?(tt[this._flushId]._buffer.update(rt.rawBinaryData),tt[this._flushId]._indexBuffer.update(ct),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,tt[this._flushId]=new this.geometryClass),tt[this._flushId]._buffer.update(rt.rawBinaryData),tt[this._flushId]._indexBuffer.update(ct),this.renderer.geometry.bind(tt[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const tt=this._dcIndex,{gl:rt,state:ct}=this.renderer,pt=Yn._drawCallPool;let Rt=null;for(let Lt=0;Lt<tt;Lt++){const{texArray:ut,type:xt,size:At,start:J,blend:ot}=pt[Lt];Rt!==ut&&(Rt=ut,this.bindAndClearTexArray(ut)),this.state.blendMode=ot,ct.set(this.state),rt.drawElements(xt,At,rt.UNSIGNED_SHORT,J*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Yn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let tt=0;tt<this._packedGeometryPoolSize;tt++)this._packedGeometries[tt]&&this._packedGeometries[tt].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(tt){const rt=C.nextPow2(Math.ceil(tt/8)),ct=C.log2(rt),pt=rt*8;this._aBuffers.length<=ct&&(this._iBuffers.length=ct+1);let Rt=this._aBuffers[pt];return Rt||(this._aBuffers[pt]=Rt=new m.ViewableBuffer(pt*this.vertexSize*4)),Rt}getIndexBuffer(tt){const rt=C.nextPow2(Math.ceil(tt/12)),ct=C.log2(rt),pt=rt*12;this._iBuffers.length<=ct&&(this._iBuffers.length=ct+1);let Rt=this._iBuffers[ct];return Rt||(this._iBuffers[ct]=Rt=new Uint16Array(pt)),Rt}packInterleavedGeometry(tt,rt,ct,pt,Rt){const{uint32View:Lt,float32View:ut}=rt,xt=pt/this.vertexSize,At=tt.uvs,J=tt.indices,ot=tt.vertexData,q=tt._texture.baseTexture._batchLocation,gt=Math.min(tt.worldAlpha,1),yt=b.Color.shared.setValue(tt._tintRGB).toPremultiplied(gt,tt._texture.baseTexture.alphaMode>0);for(let et=0;et<ot.length;et+=2)ut[pt++]=ot[et],ut[pt++]=ot[et+1],ut[pt++]=At[et],ut[pt++]=At[et+1],Lt[pt++]=yt,ut[pt++]=q;for(let et=0;et<J.length;et++)ct[Rt++]=xt+J[et]}};Y.defaultBatchSize=4096,Y.extension={name:"batch",type:M.ExtensionType.RendererPlugin},Y._drawCallPool=[],Y._textureArrayPool=[];let j=Y;M.extensions.add(j),I.BatchRenderer=j},8183:function(at,I,w){"use strict";var b=w(8865),D=w(5831),M=w(7231),O=w(8731);class C{constructor(p,v){if(this.vertexSrc=p,this.fragTemplate=v,this.programCache={},this.defaultGroupCache={},!v.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!v.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(p){if(!this.programCache[p]){const y=new Int32Array(p);for(let _=0;_<p;_++)y[_]=_;this.defaultGroupCache[p]=O.UniformGroup.from({uSamplers:y},!0);let T=this.fragTemplate;T=T.replace(/%count%/gi,`${p}`),T=T.replace(/%forloop%/gi,this.generateSampleSrc(p)),this.programCache[p]=new D.Program(this.vertexSrc,T)}const v={tint:new Float32Array([1,1,1,1]),translationMatrix:new b.Matrix,default:this.defaultGroupCache[p]};return new M.Shader(this.programCache[p],v)}generateSampleSrc(p){let v="";v+=`
`,v+=`
`;for(let y=0;y<p;y++)y>0&&(v+=`
else `),y<p-1&&(v+=`if(vTextureId < ${y}.5)`),v+=`
{`,v+=`
	color = texture2D(uSamplers[${y}], vTextureCoord);`,v+=`
}`;return v+=`
`,v+=`
`,v}}I.BatchShaderGenerator=C},5928:function(at,I,w){"use strict";var b=w(6967),D=w(3788);class M{constructor(C){this.renderer=C,this.emptyRenderer=new D.ObjectRenderer(C),this.currentRenderer=this.emptyRenderer}setObjectRenderer(C){this.currentRenderer!==C&&(this.currentRenderer.stop(),this.currentRenderer=C,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(C,m){const{boundTextures:p}=this.renderer.texture;for(let v=m-1;v>=0;--v)C[v]=p[v]||null,C[v]&&(C[v]._batchLocation=v)}boundArray(C,m,p,v){const{elements:y,ids:T,count:_}=C;let A=0;for(let P=0;P<_;P++){const x=y[P],B=x._batchLocation;if(B>=0&&B<v&&m[B]===x){T[P]=B;continue}for(;A<v;){const G=m[A];if(G&&G._batchEnabled===p&&G._batchLocation===A){A++;continue}T[P]=A,x._batchLocation=A,m[A]=x;break}}}destroy(){this.renderer=null}}M.extension={type:b.ExtensionType.RendererSystem,name:"batch"},b.extensions.add(M),I.BatchSystem=M},811:function(at,I){"use strict";class w{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let D=0;D<this.count;D++)this.elements[D]=null;this.count=0}}I.BatchTextureArray=w},3788:function(at,I){"use strict";class w{constructor(D){this.renderer=D}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(D){}}I.ObjectRenderer=w},5716:function(at,I,w){"use strict";var b=w(1524);function D(){return!b.isMobile.apple.device}I.canUploadSameBuffer=D},749:function(at,I,w){"use strict";var b=w(1524);function D(M){let O=!0;const C=b.settings.ADAPTER.getNavigator();if(b.isMobile.tablet||b.isMobile.phone){if(b.isMobile.apple.device){const m=C.userAgent.match(/OS (\d+)_(\d+)?/);m&&parseInt(m[1],10)<11&&(O=!1)}if(b.isMobile.android.device){const m=C.userAgent.match(/Android\s([0-9.]*)/);m&&parseInt(m[1],10)<7&&(O=!1)}}return O?M:4}I.maxRecommendedTextures=D},690:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`;I.default=w},3283:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;I.default=w},9633:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(1524);let O=0;class C{constructor(p){this.renderer=p,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(p){this.gl=p,this.renderer.gl=p,this.renderer.CONTEXT_UID=O++}init(p){if(p.context)this.initFromContext(p.context);else{const v=this.renderer.background.alpha<1,y=p.premultipliedAlpha;this.preserveDrawingBuffer=p.preserveDrawingBuffer,this.useContextAlpha=p.useContextAlpha,this.powerPreference=p.powerPreference,this.initFromOptions({alpha:v,premultipliedAlpha:y,antialias:p.antialias,stencil:!0,preserveDrawingBuffer:p.preserveDrawingBuffer,powerPreference:p.powerPreference})}}initFromContext(p){this.gl=p,this.validateContext(p),this.renderer.gl=p,this.renderer.CONTEXT_UID=O++,this.renderer.runners.contextChange.emit(p);const v=this.renderer.view;v.addEventListener!==void 0&&(v.addEventListener("webglcontextlost",this.handleContextLost,!1),v.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(p){const v=this.createContext(this.renderer.view,p);this.initFromContext(v)}createContext(p,v){let y;if(M.settings.PREFER_ENV>=b.ENV.WEBGL2&&(y=p.getContext("webgl2",v)),y)this.webGLVersion=2;else if(this.webGLVersion=1,y=p.getContext("webgl",v)||p.getContext("experimental-webgl",v),!y)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=y,this.getExtensions(),this.gl}getExtensions(){const{gl:p}=this,v={loseContext:p.getExtension("WEBGL_lose_context"),anisotropicFiltering:p.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:p.getExtension("OES_texture_float_linear"),s3tc:p.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:p.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:p.getExtension("WEBGL_compressed_texture_etc"),etc1:p.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:p.getExtension("WEBGL_compressed_texture_pvrtc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:p.getExtension("WEBGL_compressed_texture_atc"),astc:p.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,v,{drawBuffers:p.getExtension("WEBGL_draw_buffers"),depthTexture:p.getExtension("WEBGL_depth_texture"),vertexArrayObject:p.getExtension("OES_vertex_array_object")||p.getExtension("MOZ_OES_vertex_array_object")||p.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:p.getExtension("OES_element_index_uint"),floatTexture:p.getExtension("OES_texture_float"),floatTextureLinear:p.getExtension("OES_texture_float_linear"),textureHalfFloat:p.getExtension("OES_texture_half_float"),textureHalfFloatLinear:p.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,v,{colorBufferFloat:p.getExtension("EXT_color_buffer_float")})}handleContextLost(p){p.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const p=this.renderer.view;this.renderer=null,p.removeEventListener!==void 0&&(p.removeEventListener("webglcontextlost",this.handleContextLost),p.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(p){const v=p.getContextAttributes(),y="WebGL2RenderingContext"in globalThis&&p instanceof globalThis.WebGL2RenderingContext;y&&(this.webGLVersion=2),v&&!v.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const T=y||!!p.getExtension("OES_element_index_uint");this.supports.uint32Indices=T,T||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}C.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},C.extension={type:D.ExtensionType.RendererSystem,name:"context"},D.extensions.add(C),I.ContextSystem=C},4866:function(at,I,w){"use strict";var b=w(3994),D=w(5831),M=w(7231),O=w(5637),C=w(9827),m=w(4055);const p=class Ac extends M.Shader{constructor(T,_,A){const P=D.Program.from(T||Ac.defaultVertexSrc,_||Ac.defaultFragmentSrc);super(P,A),this.padding=0,this.resolution=Ac.defaultResolution,this.multisample=Ac.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new O.State}apply(T,_,A,P,x){T.applyFilter(this,_,A,P)}get blendMode(){return this.state.blendMode}set blendMode(T){this.state.blendMode=T}get resolution(){return this._resolution}set resolution(T){this._resolution=T}static get defaultVertexSrc(){return m.default}static get defaultFragmentSrc(){return C.default}};p.defaultResolution=1,p.defaultMultisample=b.MSAA_QUALITY.NONE;let v=p;I.Filter=v},1314:function(at,I,w){"use strict";var b=w(3994),D=w(8865);class M{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=b.MSAA_QUALITY.NONE,this.sourceFrame=new D.Rectangle,this.destinationFrame=new D.Rectangle,this.bindingSourceFrame=new D.Rectangle,this.bindingDestinationFrame=new D.Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}I.FilterState=M},9810:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(8865),O=w(4053),C=w(8731),m=w(4609),p=w(395),v=w(1314);const y=[new M.Point,new M.Point,new M.Point,new M.Point],T=new M.Matrix;class _{constructor(P){this.renderer=P,this.defaultFilterStack=[{}],this.texturePool=new O.RenderTexturePool,this.statePool=[],this.quad=new m.Quad,this.quadUv=new p.QuadUv,this.tempRect=new M.Rectangle,this.activeState={},this.globalUniforms=new C.UniformGroup({outputFrame:new M.Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(P,x){var ut,xt,At,J;const B=this.renderer,G=this.defaultFilterStack,k=this.statePool.pop()||new v.FilterState,X=B.renderTexture;let Y,j;if(X.current){const ot=X.current;Y=ot.resolution,j=ot.multisample}else Y=B.resolution,j=B.multisample;let st=x[0].resolution||Y,tt=(ut=x[0].multisample)!=null?ut:j,rt=x[0].padding,ct=x[0].autoFit,pt=(xt=x[0].legacy)!=null?xt:!0;for(let ot=1;ot<x.length;ot++){const q=x[ot];st=Math.min(st,q.resolution||Y),tt=Math.min(tt,(At=q.multisample)!=null?At:j),rt=this.useMaxPadding?Math.max(rt,q.padding):rt+q.padding,ct=ct&&q.autoFit,pt=pt||((J=q.legacy)!=null?J:!0)}G.length===1&&(this.defaultFilterStack[0].renderTexture=X.current),G.push(k),k.resolution=st,k.multisample=tt,k.legacy=pt,k.target=P,k.sourceFrame.copyFrom(P.filterArea||P.getBounds(!0)),k.sourceFrame.pad(rt);const Rt=this.tempRect.copyFrom(X.sourceFrame);B.projection.transform&&this.transformAABB(T.copyFrom(B.projection.transform).invert(),Rt),ct?(k.sourceFrame.fit(Rt),(k.sourceFrame.width<=0||k.sourceFrame.height<=0)&&(k.sourceFrame.width=0,k.sourceFrame.height=0)):k.sourceFrame.intersects(Rt)||(k.sourceFrame.width=0,k.sourceFrame.height=0),this.roundFrame(k.sourceFrame,X.current?X.current.resolution:B.resolution,X.sourceFrame,X.destinationFrame,B.projection.transform),k.renderTexture=this.getOptimalFilterTexture(k.sourceFrame.width,k.sourceFrame.height,st,tt),k.filters=x,k.destinationFrame.width=k.renderTexture.width,k.destinationFrame.height=k.renderTexture.height;const Lt=this.tempRect;Lt.x=0,Lt.y=0,Lt.width=k.sourceFrame.width,Lt.height=k.sourceFrame.height,k.renderTexture.filterFrame=k.sourceFrame,k.bindingSourceFrame.copyFrom(X.sourceFrame),k.bindingDestinationFrame.copyFrom(X.destinationFrame),k.transform=B.projection.transform,B.projection.transform=null,X.bind(k.renderTexture,k.sourceFrame,Lt),B.framebuffer.clear(0,0,0,0)}pop(){const P=this.defaultFilterStack,x=P.pop(),B=x.filters;this.activeState=x;const G=this.globalUniforms.uniforms;G.outputFrame=x.sourceFrame,G.resolution=x.resolution;const k=G.inputSize,X=G.inputPixel,Y=G.inputClamp;if(k[0]=x.destinationFrame.width,k[1]=x.destinationFrame.height,k[2]=1/k[0],k[3]=1/k[1],X[0]=Math.round(k[0]*x.resolution),X[1]=Math.round(k[1]*x.resolution),X[2]=1/X[0],X[3]=1/X[1],Y[0]=.5*X[2],Y[1]=.5*X[3],Y[2]=x.sourceFrame.width*k[2]-.5*X[2],Y[3]=x.sourceFrame.height*k[3]-.5*X[3],x.legacy){const st=G.filterArea;st[0]=x.destinationFrame.width,st[1]=x.destinationFrame.height,st[2]=x.sourceFrame.x,st[3]=x.sourceFrame.y,G.filterClamp=G.inputClamp}this.globalUniforms.update();const j=P[P.length-1];if(this.renderer.framebuffer.blit(),B.length===1)B[0].apply(this,x.renderTexture,j.renderTexture,b.CLEAR_MODES.BLEND,x),this.returnFilterTexture(x.renderTexture);else{let st=x.renderTexture,tt=this.getOptimalFilterTexture(st.width,st.height,x.resolution);tt.filterFrame=st.filterFrame;let rt=0;for(rt=0;rt<B.length-1;++rt){rt===1&&x.multisample>1&&(tt=this.getOptimalFilterTexture(st.width,st.height,x.resolution),tt.filterFrame=st.filterFrame),B[rt].apply(this,st,tt,b.CLEAR_MODES.CLEAR,x);const ct=st;st=tt,tt=ct}B[rt].apply(this,st,j.renderTexture,b.CLEAR_MODES.BLEND,x),rt>1&&x.multisample>1&&this.returnFilterTexture(x.renderTexture),this.returnFilterTexture(st),this.returnFilterTexture(tt)}x.clear(),this.statePool.push(x)}bindAndClear(P,x=b.CLEAR_MODES.CLEAR){const{renderTexture:B,state:G}=this.renderer;if(P===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,P==null?void 0:P.filterFrame){const X=this.tempRect;X.x=0,X.y=0,X.width=P.filterFrame.width,X.height=P.filterFrame.height,B.bind(P,P.filterFrame,X)}else P!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?B.bind(P):this.renderer.renderTexture.bind(P,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const k=G.stateId&1||this.forceClear;(x===b.CLEAR_MODES.CLEAR||x===b.CLEAR_MODES.BLIT&&k)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(P,x,B,G){const k=this.renderer;k.state.set(P.state),this.bindAndClear(B,G),P.uniforms.uSampler=x,P.uniforms.filterGlobals=this.globalUniforms,k.shader.bind(P),P.legacy=!!P.program.attributeData.aTextureCoord,P.legacy?(this.quadUv.map(x._frame,x.filterFrame),k.geometry.bind(this.quadUv),k.geometry.draw(b.DRAW_MODES.TRIANGLES)):(k.geometry.bind(this.quad),k.geometry.draw(b.DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(P,x){const{sourceFrame:B,destinationFrame:G}=this.activeState,{orig:k}=x._texture,X=P.set(G.width,0,0,G.height,B.x,B.y),Y=x.worldTransform.copyTo(M.Matrix.TEMP_MATRIX);return Y.invert(),X.prepend(Y),X.scale(1/k.width,1/k.height),X.translate(x.anchor.x,x.anchor.y),X}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(P,x,B=1,G=b.MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(P,x,B,G)}getFilterTexture(P,x,B){if(typeof P=="number"){const k=P;P=x,x=k}P=P||this.activeState.renderTexture;const G=this.texturePool.getOptimalTexture(P.width,P.height,x||P.resolution,B||b.MSAA_QUALITY.NONE);return G.filterFrame=P.filterFrame,G}returnFilterTexture(P){this.texturePool.returnTexture(P)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(P,x){const B=y[0],G=y[1],k=y[2],X=y[3];B.set(x.left,x.top),G.set(x.left,x.bottom),k.set(x.right,x.top),X.set(x.right,x.bottom),P.apply(B,B),P.apply(G,G),P.apply(k,k),P.apply(X,X);const Y=Math.min(B.x,G.x,k.x,X.x),j=Math.min(B.y,G.y,k.y,X.y),st=Math.max(B.x,G.x,k.x,X.x),tt=Math.max(B.y,G.y,k.y,X.y);x.x=Y,x.y=j,x.width=st-Y,x.height=tt-j}roundFrame(P,x,B,G,k){if(!(P.width<=0||P.height<=0||B.width<=0||B.height<=0)){if(k){const{a:X,b:Y,c:j,d:st}=k;if((Math.abs(Y)>1e-4||Math.abs(j)>1e-4)&&(Math.abs(X)>1e-4||Math.abs(st)>1e-4))return}k=k?T.copyFrom(k):T.identity(),k.translate(-B.x,-B.y).scale(G.width/B.width,G.height/B.height).translate(G.x,G.y),this.transformAABB(k,P),P.ceil(x),this.transformAABB(k.invert(),P)}}}_.extension={type:D.ExtensionType.RendererSystem,name:"filter"},D.extensions.add(_),I.FilterSystem=_},9243:function(){"use strict"},9827:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`;I.default=w},4055:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;I.default=w},2508:function(at,I,w){"use strict";var b=w(8865),D=w(389),M=w(4866),O=w(204),C=w(3600);class m extends M.Filter{constructor(v,y,T){let _=null;typeof v!="string"&&y===void 0&&T===void 0&&(_=v,v=void 0,y=void 0,T=void 0),super(v||C.default,y||O.default,T),this.maskSprite=_,this.maskMatrix=new b.Matrix}get maskSprite(){return this._maskSprite}set maskSprite(v){this._maskSprite=v,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(v,y,T,_){const A=this._maskSprite,P=A._texture;P.valid&&(P.uvMatrix||(P.uvMatrix=new D.TextureMatrix(P,0)),P.uvMatrix.update(),this.uniforms.npmAlpha=P.baseTexture.alphaMode?0:1,this.uniforms.mask=P,this.uniforms.otherMatrix=v.calculateSpriteMatrix(this.maskMatrix,A).prepend(P.uvMatrix.mapCoord),this.uniforms.alpha=A.worldAlpha,this.uniforms.maskClamp=P.uvMatrix.uClampFrame,v.applyFilter(this,y,T,_))}}I.SpriteMaskFilter=m},204:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`;I.default=w},3600:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;I.default=w},9082:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`;I.default=w},585:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;I.default=w},3334:function(at,I,w){"use strict";var b=w(9082),D=w(585);const M=b.default,O=D.default;I.defaultFilterVertex=O,I.defaultVertex=M},6524:function(at,I,w){"use strict";var b=w(3994),D=w(255),M=w(1368);class O{constructor(m,p){if(this.width=Math.round(m),this.height=Math.round(p),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new D.Runner("disposeFramebuffer"),this.multisample=b.MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(m=0,p){return this.colorTextures[m]=p||new M.BaseTexture(null,{scaleMode:b.SCALE_MODES.NEAREST,resolution:1,mipmap:b.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(m){return this.depthTexture=m||new M.BaseTexture(null,{scaleMode:b.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:b.MIPMAP_MODES.OFF,format:b.FORMATS.DEPTH_COMPONENT,type:b.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(m,p){if(m=Math.round(m),p=Math.round(p),!m||!p)throw new Error("Framebuffer width and height must not be zero");if(!(m===this.width&&p===this.height)){this.width=m,this.height=p,this.dirtyId++,this.dirtySize++;for(let v=0;v<this.colorTextures.length;v++){const y=this.colorTextures[v],T=y.resolution;y.setSize(m/T,p/T)}if(this.depthTexture){const v=this.depthTexture.resolution;this.depthTexture.setSize(m/v,p/v)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}I.Framebuffer=O},6072:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(8865),O=w(1524),C=w(6524),m=w(9099);const p=new M.Rectangle;class v{constructor(T){this.renderer=T,this.managedFramebuffers=[],this.unknownFramebuffer=new C.Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const T=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new M.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let _=this.renderer.context.extensions.drawBuffers,A=this.renderer.context.extensions.depthTexture;O.settings.PREFER_ENV===b.ENV.WEBGL_LEGACY&&(_=null,A=null),_?T.drawBuffers=P=>_.drawBuffersWEBGL(P):(this.hasMRT=!1,T.drawBuffers=()=>{}),A||(this.writeDepthTexture=!1)}else this.msaaSamples=T.getInternalformatParameter(T.RENDERBUFFER,T.RGBA8,T.SAMPLES)}bind(T,_,A=0){const{gl:P}=this;if(T){const x=T.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(T);this.current!==T&&(this.current=T,P.bindFramebuffer(P.FRAMEBUFFER,x.framebuffer)),x.mipLevel!==A&&(T.dirtyId++,T.dirtyFormat++,x.mipLevel=A),x.dirtyId!==T.dirtyId&&(x.dirtyId=T.dirtyId,x.dirtyFormat!==T.dirtyFormat?(x.dirtyFormat=T.dirtyFormat,x.dirtySize=T.dirtySize,this.updateFramebuffer(T,A)):x.dirtySize!==T.dirtySize&&(x.dirtySize=T.dirtySize,this.resizeFramebuffer(T)));for(let B=0;B<T.colorTextures.length;B++){const G=T.colorTextures[B];this.renderer.texture.unbind(G.parentTextureArray||G)}if(T.depthTexture&&this.renderer.texture.unbind(T.depthTexture),_){const B=_.width>>A,G=_.height>>A,k=B/_.width;this.setViewport(_.x*k,_.y*k,B,G)}else{const B=T.width>>A,G=T.height>>A;this.setViewport(0,0,B,G)}}else this.current&&(this.current=null,P.bindFramebuffer(P.FRAMEBUFFER,null)),_?this.setViewport(_.x,_.y,_.width,_.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(T,_,A,P){const x=this.viewport;T=Math.round(T),_=Math.round(_),A=Math.round(A),P=Math.round(P),(x.width!==A||x.height!==P||x.x!==T||x.y!==_)&&(x.x=T,x.y=_,x.width=A,x.height=P,this.gl.viewport(T,_,A,P))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(T,_,A,P,x=b.BUFFER_BITS.COLOR|b.BUFFER_BITS.DEPTH){const{gl:B}=this;B.clearColor(T,_,A,P),B.clear(x)}initFramebuffer(T){const{gl:_}=this,A=new m.GLFramebuffer(_.createFramebuffer());return A.multisample=this.detectSamples(T.multisample),T.glFramebuffers[this.CONTEXT_UID]=A,this.managedFramebuffers.push(T),T.disposeRunner.add(this),A}resizeFramebuffer(T){const{gl:_}=this,A=T.glFramebuffers[this.CONTEXT_UID];if(A.stencil){_.bindRenderbuffer(_.RENDERBUFFER,A.stencil);let B;this.renderer.context.webGLVersion===1?B=_.DEPTH_STENCIL:T.depth&&T.stencil?B=_.DEPTH24_STENCIL8:T.depth?B=_.DEPTH_COMPONENT24:B=_.STENCIL_INDEX8,A.msaaBuffer?_.renderbufferStorageMultisample(_.RENDERBUFFER,A.multisample,B,T.width,T.height):_.renderbufferStorage(_.RENDERBUFFER,B,T.width,T.height)}const P=T.colorTextures;let x=P.length;_.drawBuffers||(x=Math.min(x,1));for(let B=0;B<x;B++){const G=P[B],k=G.parentTextureArray||G;this.renderer.texture.bind(k,0),B===0&&A.msaaBuffer&&(_.bindRenderbuffer(_.RENDERBUFFER,A.msaaBuffer),_.renderbufferStorageMultisample(_.RENDERBUFFER,A.multisample,k._glTextures[this.CONTEXT_UID].internalFormat,T.width,T.height))}T.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(T.depthTexture,0)}updateFramebuffer(T,_){const{gl:A}=this,P=T.glFramebuffers[this.CONTEXT_UID],x=T.colorTextures;let B=x.length;A.drawBuffers||(B=Math.min(B,1)),P.multisample>1&&this.canMultisampleFramebuffer(T)?P.msaaBuffer=P.msaaBuffer||A.createRenderbuffer():P.msaaBuffer&&(A.deleteRenderbuffer(P.msaaBuffer),P.msaaBuffer=null,P.blitFramebuffer&&(P.blitFramebuffer.dispose(),P.blitFramebuffer=null));const G=[];for(let k=0;k<B;k++){const X=x[k],Y=X.parentTextureArray||X;this.renderer.texture.bind(Y,0),k===0&&P.msaaBuffer?(A.bindRenderbuffer(A.RENDERBUFFER,P.msaaBuffer),A.renderbufferStorageMultisample(A.RENDERBUFFER,P.multisample,Y._glTextures[this.CONTEXT_UID].internalFormat,T.width,T.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.RENDERBUFFER,P.msaaBuffer)):(A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+k,X.target,Y._glTextures[this.CONTEXT_UID].texture,_),G.push(A.COLOR_ATTACHMENT0+k))}if(G.length>1&&A.drawBuffers(G),T.depthTexture&&this.writeDepthTexture){const k=T.depthTexture;this.renderer.texture.bind(k,0),A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,k._glTextures[this.CONTEXT_UID].texture,_)}if((T.stencil||T.depth)&&!(T.depthTexture&&this.writeDepthTexture)){P.stencil=P.stencil||A.createRenderbuffer();let k,X;this.renderer.context.webGLVersion===1?(k=A.DEPTH_STENCIL_ATTACHMENT,X=A.DEPTH_STENCIL):T.depth&&T.stencil?(k=A.DEPTH_STENCIL_ATTACHMENT,X=A.DEPTH24_STENCIL8):T.depth?(k=A.DEPTH_ATTACHMENT,X=A.DEPTH_COMPONENT24):(k=A.STENCIL_ATTACHMENT,X=A.STENCIL_INDEX8),A.bindRenderbuffer(A.RENDERBUFFER,P.stencil),P.msaaBuffer?A.renderbufferStorageMultisample(A.RENDERBUFFER,P.multisample,X,T.width,T.height):A.renderbufferStorage(A.RENDERBUFFER,X,T.width,T.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,k,A.RENDERBUFFER,P.stencil)}else P.stencil&&(A.deleteRenderbuffer(P.stencil),P.stencil=null)}canMultisampleFramebuffer(T){return this.renderer.context.webGLVersion!==1&&T.colorTextures.length<=1&&!T.depthTexture}detectSamples(T){const{msaaSamples:_}=this;let A=b.MSAA_QUALITY.NONE;if(T<=1||_===null)return A;for(let P=0;P<_.length;P++)if(_[P]<=T){A=_[P];break}return A===1&&(A=b.MSAA_QUALITY.NONE),A}blit(T,_,A){const{current:P,renderer:x,gl:B,CONTEXT_UID:G}=this;if(x.context.webGLVersion!==2||!P)return;const k=P.glFramebuffers[G];if(!k)return;if(!T){if(!k.msaaBuffer)return;const Y=P.colorTextures[0];if(!Y)return;k.blitFramebuffer||(k.blitFramebuffer=new C.Framebuffer(P.width,P.height),k.blitFramebuffer.addColorTexture(0,Y)),T=k.blitFramebuffer,T.colorTextures[0]!==Y&&(T.colorTextures[0]=Y,T.dirtyId++,T.dirtyFormat++),(T.width!==P.width||T.height!==P.height)&&(T.width=P.width,T.height=P.height,T.dirtyId++,T.dirtySize++)}_||(_=p,_.width=P.width,_.height=P.height),A||(A=_);const X=_.width===A.width&&_.height===A.height;this.bind(T),B.bindFramebuffer(B.READ_FRAMEBUFFER,k.framebuffer),B.blitFramebuffer(_.left,_.top,_.right,_.bottom,A.left,A.top,A.right,A.bottom,B.COLOR_BUFFER_BIT,X?B.NEAREST:B.LINEAR),B.bindFramebuffer(B.READ_FRAMEBUFFER,T.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(T,_){const A=T.glFramebuffers[this.CONTEXT_UID],P=this.gl;if(!A)return;delete T.glFramebuffers[this.CONTEXT_UID];const x=this.managedFramebuffers.indexOf(T);x>=0&&this.managedFramebuffers.splice(x,1),T.disposeRunner.remove(this),_||(P.deleteFramebuffer(A.framebuffer),A.msaaBuffer&&P.deleteRenderbuffer(A.msaaBuffer),A.stencil&&P.deleteRenderbuffer(A.stencil)),A.blitFramebuffer&&this.disposeFramebuffer(A.blitFramebuffer,_)}disposeAll(T){const _=this.managedFramebuffers;this.managedFramebuffers=[];for(let A=0;A<_.length;A++)this.disposeFramebuffer(_[A],T)}forceStencil(){const T=this.current;if(!T)return;const _=T.glFramebuffers[this.CONTEXT_UID];if(!_||_.stencil&&T.stencil)return;T.stencil=!0;const A=T.width,P=T.height,x=this.gl,B=_.stencil=x.createRenderbuffer();x.bindRenderbuffer(x.RENDERBUFFER,B);let G,k;this.renderer.context.webGLVersion===1?(G=x.DEPTH_STENCIL_ATTACHMENT,k=x.DEPTH_STENCIL):T.depth?(G=x.DEPTH_STENCIL_ATTACHMENT,k=x.DEPTH24_STENCIL8):(G=x.STENCIL_ATTACHMENT,k=x.STENCIL_INDEX8),_.msaaBuffer?x.renderbufferStorageMultisample(x.RENDERBUFFER,_.multisample,k,A,P):x.renderbufferStorage(x.RENDERBUFFER,k,A,P),x.framebufferRenderbuffer(x.FRAMEBUFFER,G,x.RENDERBUFFER,B)}reset(){this.current=this.unknownFramebuffer,this.viewport=new M.Rectangle}destroy(){this.renderer=null}}v.extension={type:D.ExtensionType.RendererSystem,name:"framebuffer"},D.extensions.add(v),I.FramebufferSystem=v},9099:function(at,I,w){"use strict";var b=w(3994);class D{constructor(O){this.framebuffer=O,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=b.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}I.GLFramebuffer=D},6560:function(at,I,w){"use strict";var b=w(3994),D=w(6967);class M{constructor(C){this.renderer=C}contextChange(C){let m;if(this.renderer.context.webGLVersion===1){const p=C.getParameter(C.FRAMEBUFFER_BINDING);C.bindFramebuffer(C.FRAMEBUFFER,null),m=C.getParameter(C.SAMPLES),C.bindFramebuffer(C.FRAMEBUFFER,p)}else{const p=C.getParameter(C.DRAW_FRAMEBUFFER_BINDING);C.bindFramebuffer(C.DRAW_FRAMEBUFFER,null),m=C.getParameter(C.SAMPLES),C.bindFramebuffer(C.DRAW_FRAMEBUFFER,p)}m>=b.MSAA_QUALITY.HIGH?this.multisample=b.MSAA_QUALITY.HIGH:m>=b.MSAA_QUALITY.MEDIUM?this.multisample=b.MSAA_QUALITY.MEDIUM:m>=b.MSAA_QUALITY.LOW?this.multisample=b.MSAA_QUALITY.LOW:this.multisample=b.MSAA_QUALITY.NONE}destroy(){}}M.extension={type:D.ExtensionType.RendererSystem,name:"_multisample"},D.extensions.add(M),I.MultisampleSystem=M},7554:function(at,I,w){"use strict";var b=w(3994);class D{constructor(O,C=0,m=!1,p=b.TYPES.FLOAT,v,y,T,_=1){this.buffer=O,this.size=C,this.normalized=m,this.type=p,this.stride=v,this.start=y,this.instance=T,this.divisor=_}destroy(){this.buffer=null}static from(O,C,m,p,v){return new D(O,C,m,p,v)}}I.Attribute=D},8630:function(at,I,w){"use strict";var b=w(3994),D=w(255);let M=0;class O{constructor(m,p=!0,v=!1){this.data=m||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=v,this.static=p,this.id=M++,this.disposeRunner=new D.Runner("disposeBuffer")}update(m){m instanceof Array&&(m=new Float32Array(m)),this.data=m||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(m){this.type=m?b.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:b.BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===b.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(m){return m instanceof Array&&(m=new Float32Array(m)),new O(m)}}I.Buffer=O},9752:function(at,I,w){"use strict";var b=w(6967),D=w(8383);class M{constructor(C){this.renderer=C,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(C){const{gl:m,CONTEXT_UID:p}=this,v=C._glBuffers[p]||this.createGLBuffer(C);m.bindBuffer(C.type,v.buffer)}unbind(C){const{gl:m}=this;m.bindBuffer(C,null)}bindBufferBase(C,m){const{gl:p,CONTEXT_UID:v}=this;if(this.boundBufferBases[m]!==C){const y=C._glBuffers[v]||this.createGLBuffer(C);this.boundBufferBases[m]=C,p.bindBufferBase(p.UNIFORM_BUFFER,m,y.buffer)}}bindBufferRange(C,m,p){const{gl:v,CONTEXT_UID:y}=this;p=p||0;const T=C._glBuffers[y]||this.createGLBuffer(C);v.bindBufferRange(v.UNIFORM_BUFFER,m||0,T.buffer,p*256,256)}update(C){const{gl:m,CONTEXT_UID:p}=this,v=C._glBuffers[p]||this.createGLBuffer(C);if(C._updateID!==v.updateID)if(v.updateID=C._updateID,m.bindBuffer(C.type,v.buffer),v.byteLength>=C.data.byteLength)m.bufferSubData(C.type,0,C.data);else{const y=C.static?m.STATIC_DRAW:m.DYNAMIC_DRAW;v.byteLength=C.data.byteLength,m.bufferData(C.type,C.data,y)}}dispose(C,m){if(!this.managedBuffers[C.id])return;delete this.managedBuffers[C.id];const p=C._glBuffers[this.CONTEXT_UID],v=this.gl;C.disposeRunner.remove(this),p&&(m||v.deleteBuffer(p.buffer),delete C._glBuffers[this.CONTEXT_UID])}disposeAll(C){const m=Object.keys(this.managedBuffers);for(let p=0;p<m.length;p++)this.dispose(this.managedBuffers[m[p]],C)}createGLBuffer(C){const{CONTEXT_UID:m,gl:p}=this;return C._glBuffers[m]=new D.GLBuffer(p.createBuffer()),this.managedBuffers[C.id]=C,C.disposeRunner.add(this),C._glBuffers[m]}}M.extension={type:b.ExtensionType.RendererSystem,name:"buffer"},b.extensions.add(M),I.BufferSystem=M},8383:function(at,I){"use strict";class w{constructor(D){this.buffer=D||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}I.GLBuffer=w},6710:function(at,I,w){"use strict";var b=w(3994),D=w(255),M=w(2947),O=w(7554),C=w(8630),m=w(3554);const p={5126:4,5123:2,5121:1};let v=0;const y={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class T{constructor(A=[],P={}){this.buffers=A,this.indexBuffer=null,this.attributes=P,this.glVertexArrayObjects={},this.id=v++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new D.Runner("disposeGeometry"),this.refCount=0}addAttribute(A,P,x=0,B=!1,G,k,X,Y=!1){if(!P)throw new Error("You must pass a buffer when creating an attribute");P instanceof C.Buffer||(P instanceof Array&&(P=new Float32Array(P)),P=new C.Buffer(P));const j=A.split("|");if(j.length>1){for(let tt=0;tt<j.length;tt++)this.addAttribute(j[tt],P,x,B,G);return this}let st=this.buffers.indexOf(P);return st===-1&&(this.buffers.push(P),st=this.buffers.length-1),this.attributes[A]=new O.Attribute(st,x,B,G,k,X,Y),this.instanced=this.instanced||Y,this}getAttribute(A){return this.attributes[A]}getBuffer(A){return this.buffers[this.getAttribute(A).buffer]}addIndex(A){return A instanceof C.Buffer||(A instanceof Array&&(A=new Uint16Array(A)),A=new C.Buffer(A)),A.type=b.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=A,this.buffers.includes(A)||this.buffers.push(A),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const A=[],P=[],x=new C.Buffer;let B;for(B in this.attributes){const G=this.attributes[B],k=this.buffers[G.buffer];A.push(k.data),P.push(G.size*p[G.type]/4),G.buffer=0}for(x.data=m.interleaveTypedArrays(A,P),B=0;B<this.buffers.length;B++)this.buffers[B]!==this.indexBuffer&&this.buffers[B].destroy();return this.buffers=[x],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const A in this.attributes){const P=this.attributes[A];return this.buffers[P.buffer].data.length/(P.stride/4||P.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const A=new T;for(let P=0;P<this.buffers.length;P++)A.buffers[P]=new C.Buffer(this.buffers[P].data.slice(0));for(const P in this.attributes){const x=this.attributes[P];A.attributes[P]=new O.Attribute(x.buffer,x.size,x.normalized,x.type,x.stride,x.start,x.instance)}return this.indexBuffer&&(A.indexBuffer=A.buffers[this.buffers.indexOf(this.indexBuffer)],A.indexBuffer.type=b.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),A}static merge(A){const P=new T,x=[],B=[],G=[];let k;for(let X=0;X<A.length;X++){k=A[X];for(let Y=0;Y<k.buffers.length;Y++)B[Y]=B[Y]||0,B[Y]+=k.buffers[Y].data.length,G[Y]=0}for(let X=0;X<k.buffers.length;X++)x[X]=new y[M.getBufferType(k.buffers[X].data)](B[X]),P.buffers[X]=new C.Buffer(x[X]);for(let X=0;X<A.length;X++){k=A[X];for(let Y=0;Y<k.buffers.length;Y++)x[Y].set(k.buffers[Y].data,G[Y]),G[Y]+=k.buffers[Y].data.length}if(P.attributes=k.attributes,k.indexBuffer){P.indexBuffer=P.buffers[k.buffers.indexOf(k.indexBuffer)],P.indexBuffer.type=b.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let X=0,Y=0,j=0,st=0;for(let tt=0;tt<k.buffers.length;tt++)if(k.buffers[tt]!==k.indexBuffer){st=tt;break}for(const tt in k.attributes){const rt=k.attributes[tt];(rt.buffer|0)===st&&(Y+=rt.size*p[rt.type]/4)}for(let tt=0;tt<A.length;tt++){const rt=A[tt].indexBuffer.data;for(let ct=0;ct<rt.length;ct++)P.indexBuffer.data[ct+j]+=X;X+=A[tt].buffers[st].data.length/Y,j+=rt.length}}return P}}I.Geometry=T},2943:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(1524);const O={5126:4,5123:2,5121:1};class C{constructor(p){this.renderer=p,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const p=this.gl=this.renderer.gl,v=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,v.webGLVersion!==2){let y=this.renderer.context.extensions.vertexArrayObject;M.settings.PREFER_ENV===b.ENV.WEBGL_LEGACY&&(y=null),y?(p.createVertexArray=()=>y.createVertexArrayOES(),p.bindVertexArray=T=>y.bindVertexArrayOES(T),p.deleteVertexArray=T=>y.deleteVertexArrayOES(T)):(this.hasVao=!1,p.createVertexArray=()=>null,p.bindVertexArray=()=>null,p.deleteVertexArray=()=>null)}if(v.webGLVersion!==2){const y=p.getExtension("ANGLE_instanced_arrays");y?(p.vertexAttribDivisor=(T,_)=>y.vertexAttribDivisorANGLE(T,_),p.drawElementsInstanced=(T,_,A,P,x)=>y.drawElementsInstancedANGLE(T,_,A,P,x),p.drawArraysInstanced=(T,_,A,P)=>y.drawArraysInstancedANGLE(T,_,A,P)):this.hasInstance=!1}this.canUseUInt32ElementIndex=v.webGLVersion===2||!!v.extensions.uint32ElementIndex}bind(p,v){v=v||this.renderer.shader.shader;const{gl:y}=this;let T=p.glVertexArrayObjects[this.CONTEXT_UID],_=!1;T||(this.managedGeometries[p.id]=p,p.disposeRunner.add(this),p.glVertexArrayObjects[this.CONTEXT_UID]=T={},_=!0);const A=T[v.program.id]||this.initGeometryVao(p,v,_);this._activeGeometry=p,this._activeVao!==A&&(this._activeVao=A,this.hasVao?y.bindVertexArray(A):this.activateVao(p,v.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const p=this._activeGeometry,v=this.renderer.buffer;for(let y=0;y<p.buffers.length;y++){const T=p.buffers[y];v.update(T)}}checkCompatibility(p,v){const y=p.attributes,T=v.attributeData;for(const _ in T)if(!y[_])throw new Error(`shader and geometry incompatible, geometry missing the "${_}" attribute`)}getSignature(p,v){const y=p.attributes,T=v.attributeData,_=["g",p.id];for(const A in y)T[A]&&_.push(A,T[A].location);return _.join("-")}initGeometryVao(p,v,y=!0){const T=this.gl,_=this.CONTEXT_UID,A=this.renderer.buffer,P=v.program;P.glPrograms[_]||this.renderer.shader.generateProgram(v),this.checkCompatibility(p,P);const x=this.getSignature(p,P),B=p.glVertexArrayObjects[this.CONTEXT_UID];let G=B[x];if(G)return B[P.id]=G,G;const k=p.buffers,X=p.attributes,Y={},j={};for(const st in k)Y[st]=0,j[st]=0;for(const st in X)!X[st].size&&P.attributeData[st]?X[st].size=P.attributeData[st].size:X[st].size||console.warn(`PIXI Geometry attribute '${st}' size cannot be determined (likely the bound shader does not have the attribute)`),Y[X[st].buffer]+=X[st].size*O[X[st].type];for(const st in X){const tt=X[st],rt=tt.size;tt.stride===void 0&&(Y[tt.buffer]===rt*O[tt.type]?tt.stride=0:tt.stride=Y[tt.buffer]),tt.start===void 0&&(tt.start=j[tt.buffer],j[tt.buffer]+=rt*O[tt.type])}G=T.createVertexArray(),T.bindVertexArray(G);for(let st=0;st<k.length;st++){const tt=k[st];A.bind(tt),y&&tt._glBuffers[_].refCount++}return this.activateVao(p,P),B[P.id]=G,B[x]=G,T.bindVertexArray(null),A.unbind(b.BUFFER_TYPE.ARRAY_BUFFER),G}disposeGeometry(p,v){var P;if(!this.managedGeometries[p.id])return;delete this.managedGeometries[p.id];const y=p.glVertexArrayObjects[this.CONTEXT_UID],T=this.gl,_=p.buffers,A=(P=this.renderer)==null?void 0:P.buffer;if(p.disposeRunner.remove(this),!!y){if(A)for(let x=0;x<_.length;x++){const B=_[x]._glBuffers[this.CONTEXT_UID];B&&(B.refCount--,B.refCount===0&&!v&&A.dispose(_[x],v))}if(!v){for(const x in y)if(x[0]==="g"){const B=y[x];this._activeVao===B&&this.unbind(),T.deleteVertexArray(B)}}delete p.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(p){const v=Object.keys(this.managedGeometries);for(let y=0;y<v.length;y++)this.disposeGeometry(this.managedGeometries[v[y]],p)}activateVao(p,v){const y=this.gl,T=this.CONTEXT_UID,_=this.renderer.buffer,A=p.buffers,P=p.attributes;p.indexBuffer&&_.bind(p.indexBuffer);let x=null;for(const B in P){const G=P[B],k=A[G.buffer],X=k._glBuffers[T];if(v.attributeData[B]){x!==X&&(_.bind(k),x=X);const Y=v.attributeData[B].location;if(y.enableVertexAttribArray(Y),y.vertexAttribPointer(Y,G.size,G.type||y.FLOAT,G.normalized,G.stride,G.start),G.instance)if(this.hasInstance)y.vertexAttribDivisor(Y,G.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(p,v,y,T){const{gl:_}=this,A=this._activeGeometry;if(A.indexBuffer){const P=A.indexBuffer.data.BYTES_PER_ELEMENT,x=P===2?_.UNSIGNED_SHORT:_.UNSIGNED_INT;P===2||P===4&&this.canUseUInt32ElementIndex?A.instanced?_.drawElementsInstanced(p,v||A.indexBuffer.data.length,x,(y||0)*P,T||1):_.drawElements(p,v||A.indexBuffer.data.length,x,(y||0)*P):console.warn("unsupported index buffer type: uint32")}else A.instanced?_.drawArraysInstanced(p,y,v||A.getSize(),T||1):_.drawArrays(p,y,v||A.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}C.extension={type:D.ExtensionType.RendererSystem,name:"geometry"},D.extensions.add(C),I.GeometrySystem=C},2594:function(at,I){"use strict";class w{constructor(D){typeof D=="number"?this.rawBinaryData=new ArrayBuffer(D):D instanceof Uint8Array?this.rawBinaryData=D.buffer:this.rawBinaryData=D,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(D){return this[`${D}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(D){switch(D){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${D} isn't a valid view type`)}}}I.ViewableBuffer=w},3554:function(at,I,w){"use strict";var b=w(2947);const D={Float32Array,Uint32Array,Int32Array,Uint8Array};function M(O,C){let m=0,p=0;const v={};for(let A=0;A<O.length;A++)p+=C[A],m+=O[A].length;const y=new ArrayBuffer(m*4);let T=null,_=0;for(let A=0;A<O.length;A++){const P=C[A],x=O[A],B=b.getBufferType(x);v[B]||(v[B]=new D[B](y)),T=v[B];for(let G=0;G<x.length;G++){const k=(G/P|0)*p+_,X=G%P;T[k+X]=x[G]}_+=P}return new Float32Array(y)}I.interleaveTypedArrays=M},8405:function(at,I,w){"use strict";w(5378);var b=w(642),D=w(3994),M=w(6967),O=w(8865),C=w(255),m=w(1524),p=w(400),v=w(2947),y=w(7562),T=w(2491),_=w(2289),A=w(6153),P=w(7675),x=w(8183),B=w(5928),G=w(811),k=w(3788),X=w(9633),Y=w(4866),j=w(1314),st=w(9810);w(9243);var tt=w(2508),rt=w(3334),ct=w(6524),pt=w(6072),Rt=w(9099),Lt=w(6560),ut=w(7554),xt=w(8630),At=w(9752),J=w(6710),ot=w(2943),q=w(2594);w(1737);var gt=w(3220),yt=w(6331),et=w(8841),ht=w(7784),Et=w(3079),kt=w(2472),Ft=w(3926),Bt=w(4379),Gt=w(869),Ct=w(9461),jt=w(7730),Kt=w(4053),ne=w(5557),me=w(438),ue=w(5831),Oe=w(7231),de=w(465),oe=w(8731),Le=w(6958),Fr=w(8988),kr=w(768),ui=w(2827),Ti=w(1590),Ei=w(5053),Oi=w(4986),Fe=w(5637),Li=w(7981);w(8929),w(4887);var hi=w(1368),Xr=w(3504);w(6985);var dr=w(8671),Si=w(8827),bi=w(389),ms=w(8678),rs=w(4959),Ar=w(6344),Fi=w(6686),wt=w(4609),Mt=w(395),Xe=w(622),Ke=w(6830),gr=w(5587),Ae=w(572),ci=w(9433),V=w(8344),K=w(5044),nt=w(9526),St=w(5138),Ot=w(2116),Xt=w(5468),se=w(4440),Se=w(3759),ge=w(3002);function Ue(Ve){var Nr=Object.create(null);return Ve&&Object.keys(Ve).forEach(function(er){if(er!=="default"){var Er=Object.getOwnPropertyDescriptor(Ve,er);Object.defineProperty(Nr,er,Er.get?Er:{enumerable:!0,get:function(){return Ve[er]}})}}),Nr.default=Ve,Nr}var We=Ue(v);const ir="7.3.2";I.utils=We,I.autoDetectRenderer=y.autoDetectRenderer,I.BackgroundSystem=T.BackgroundSystem,I.BatchDrawCall=_.BatchDrawCall,I.BatchGeometry=A.BatchGeometry,I.BatchRenderer=P.BatchRenderer,I.BatchShaderGenerator=x.BatchShaderGenerator,I.BatchSystem=B.BatchSystem,I.BatchTextureArray=G.BatchTextureArray,I.ObjectRenderer=k.ObjectRenderer,I.ContextSystem=X.ContextSystem,I.Filter=Y.Filter,I.FilterState=j.FilterState,I.FilterSystem=st.FilterSystem,I.SpriteMaskFilter=tt.SpriteMaskFilter,I.defaultFilterVertex=rt.defaultFilterVertex,I.defaultVertex=rt.defaultVertex,I.Framebuffer=ct.Framebuffer,I.FramebufferSystem=pt.FramebufferSystem,I.GLFramebuffer=Rt.GLFramebuffer,I.MultisampleSystem=Lt.MultisampleSystem,I.Attribute=ut.Attribute,I.Buffer=xt.Buffer,I.BufferSystem=At.BufferSystem,I.Geometry=J.Geometry,I.GeometrySystem=ot.GeometrySystem,I.ViewableBuffer=q.ViewableBuffer,I.MaskData=gt.MaskData,I.MaskSystem=yt.MaskSystem,I.ScissorSystem=et.ScissorSystem,I.StencilSystem=ht.StencilSystem,I.PluginSystem=Et.PluginSystem,I.ProjectionSystem=kt.ProjectionSystem,I.ObjectRendererSystem=Ft.ObjectRendererSystem,I.Renderer=Bt.Renderer,I.BaseRenderTexture=Gt.BaseRenderTexture,I.GenerateTextureSystem=Ct.GenerateTextureSystem,I.RenderTexture=jt.RenderTexture,I.RenderTexturePool=Kt.RenderTexturePool,I.RenderTextureSystem=ne.RenderTextureSystem,I.GLProgram=me.GLProgram,I.IGLUniformData=me.IGLUniformData,I.Program=ue.Program,I.Shader=Oe.Shader,I.ShaderSystem=de.ShaderSystem,I.UniformGroup=oe.UniformGroup,I.checkMaxIfStatementsInShader=Le.checkMaxIfStatementsInShader,I.generateProgram=Fr.generateProgram,I.createUBOElements=kr.createUBOElements,I.generateUniformBufferSync=kr.generateUniformBufferSync,I.getUBOData=kr.getUBOData,I.getTestContext=ui.getTestContext,I.uniformParsers=Ti.uniformParsers,I.unsafeEvalSupported=Ei.unsafeEvalSupported,I.StartupSystem=Oi.StartupSystem,I.State=Fe.State,I.StateSystem=Li.StateSystem,I.BaseTexture=hi.BaseTexture,I.GLTexture=Xr.GLTexture,I.Texture=dr.Texture,I.TextureGCSystem=Si.TextureGCSystem,I.TextureMatrix=bi.TextureMatrix,I.TextureSystem=ms.TextureSystem,I.TextureUvs=rs.TextureUvs,I.TransformFeedback=Ar.TransformFeedback,I.TransformFeedbackSystem=Fi.TransformFeedbackSystem,I.Quad=wt.Quad,I.QuadUv=Mt.QuadUv,I.ViewSystem=Xe.ViewSystem,I.SystemManager=Ke.SystemManager,I.BaseImageResource=gr.BaseImageResource,I.Resource=Ae.Resource,I.AbstractMultiResource=ci.AbstractMultiResource,I.ArrayResource=V.ArrayResource,I.INSTALLED=K.INSTALLED,I.autoDetectResource=K.autoDetectResource,I.BufferResource=nt.BufferResource,I.CanvasResource=St.CanvasResource,I.CubeResource=Ot.CubeResource,I.ImageBitmapResource=Xt.ImageBitmapResource,I.ImageResource=se.ImageResource,I.SVGResource=Se.SVGResource,I.VideoResource=ge.VideoResource,I.VERSION=ir,Object.keys(b).forEach(function(Ve){Ve!=="default"&&!Object.prototype.hasOwnProperty.call(I,Ve)&&Object.defineProperty(I,Ve,{enumerable:!0,get:function(){return b[Ve]}})}),Object.keys(D).forEach(function(Ve){Ve!=="default"&&!Object.prototype.hasOwnProperty.call(I,Ve)&&Object.defineProperty(I,Ve,{enumerable:!0,get:function(){return D[Ve]}})}),Object.keys(M).forEach(function(Ve){Ve!=="default"&&!Object.prototype.hasOwnProperty.call(I,Ve)&&Object.defineProperty(I,Ve,{enumerable:!0,get:function(){return M[Ve]}})}),Object.keys(O).forEach(function(Ve){Ve!=="default"&&!Object.prototype.hasOwnProperty.call(I,Ve)&&Object.defineProperty(I,Ve,{enumerable:!0,get:function(){return O[Ve]}})}),Object.keys(C).forEach(function(Ve){Ve!=="default"&&!Object.prototype.hasOwnProperty.call(I,Ve)&&Object.defineProperty(I,Ve,{enumerable:!0,get:function(){return C[Ve]}})}),Object.keys(m).forEach(function(Ve){Ve!=="default"&&!Object.prototype.hasOwnProperty.call(I,Ve)&&Object.defineProperty(I,Ve,{enumerable:!0,get:function(){return m[Ve]}})}),Object.keys(p).forEach(function(Ve){Ve!=="default"&&!Object.prototype.hasOwnProperty.call(I,Ve)&&Object.defineProperty(I,Ve,{enumerable:!0,get:function(){return p[Ve]}})})},9989:function(at,I){"use strict";class w{constructor(D){this.renderer=D,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(D){const{gl:M}=this.renderer,O=this.getStackLength();this.maskStack=D;const C=this.getStackLength();C!==O&&(C===0?M.disable(this.glConst):(M.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}I.AbstractMaskSystem=w},3220:function(at,I,w){"use strict";var b=w(3994),D=w(4866);class M{constructor(C=null){this.type=b.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=C||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=D.Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(C){C?this._filters?this._filters[0]=C:this._filters=[C]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=b.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(C){C?(this._stencilCounter=C._stencilCounter,this._scissorCounter=C._scissorCounter,this._scissorRect=C._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}I.MaskData=M},6331:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(2508),O=w(3220);class C{constructor(p){this.renderer=p,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(p){this.maskStack=p,this.renderer.scissor.setMaskStack(p),this.renderer.stencil.setMaskStack(p)}push(p,v){let y=v;if(!y.isMaskData){const _=this.maskDataPool.pop()||new O.MaskData;_.pooled=!0,_.maskObject=v,y=_}const T=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(y.copyCountersOrReset(T),y._colorMask=T?T._colorMask:15,y.autoDetect&&this.detect(y),y._target=p,y.type!==b.MASK_TYPES.SPRITE&&this.maskStack.push(y),y.enabled)switch(y.type){case b.MASK_TYPES.SCISSOR:this.renderer.scissor.push(y);break;case b.MASK_TYPES.STENCIL:this.renderer.stencil.push(y);break;case b.MASK_TYPES.SPRITE:y.copyCountersOrReset(null),this.pushSpriteMask(y);break;case b.MASK_TYPES.COLOR:this.pushColorMask(y);break;default:break}y.type===b.MASK_TYPES.SPRITE&&this.maskStack.push(y)}pop(p){const v=this.maskStack.pop();if(!(!v||v._target!==p)){if(v.enabled)switch(v.type){case b.MASK_TYPES.SCISSOR:this.renderer.scissor.pop(v);break;case b.MASK_TYPES.STENCIL:this.renderer.stencil.pop(v.maskObject);break;case b.MASK_TYPES.SPRITE:this.popSpriteMask(v);break;case b.MASK_TYPES.COLOR:this.popColorMask(v);break;default:break}if(v.reset(),v.pooled&&this.maskDataPool.push(v),this.maskStack.length!==0){const y=this.maskStack[this.maskStack.length-1];y.type===b.MASK_TYPES.SPRITE&&y._filters&&(y._filters[0].maskSprite=y.maskObject)}}}detect(p){const v=p.maskObject;v?v.isSprite?p.type=b.MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(p)?p.type=b.MASK_TYPES.SCISSOR:p.type=b.MASK_TYPES.STENCIL:p.type=b.MASK_TYPES.COLOR}pushSpriteMask(p){const{maskObject:v}=p,y=p._target;let T=p._filters;T||(T=this.alphaMaskPool[this.alphaMaskIndex],T||(T=this.alphaMaskPool[this.alphaMaskIndex]=[new M.SpriteMaskFilter])),T[0].resolution=p.resolution,T[0].multisample=p.multisample,T[0].maskSprite=v;const _=y.filterArea;y.filterArea=v.getBounds(!0),this.renderer.filter.push(y,T),y.filterArea=_,p._filters||this.alphaMaskIndex++}popSpriteMask(p){this.renderer.filter.pop(),p._filters?p._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(p){const v=p._colorMask,y=p._colorMask=v&p.colorMask;y!==v&&this.renderer.gl.colorMask((y&1)!==0,(y&2)!==0,(y&4)!==0,(y&8)!==0)}popColorMask(p){const v=p._colorMask,y=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;y!==v&&this.renderer.gl.colorMask((y&1)!==0,(y&2)!==0,(y&4)!==0,(y&8)!==0)}destroy(){this.renderer=null}}C.extension={type:D.ExtensionType.RendererSystem,name:"mask"},D.extensions.add(C),I.MaskSystem=C},8841:function(at,I,w){"use strict";var b=w(6967),D=w(8865),M=w(1524),O=w(9989);const C=new D.Matrix,m=[],p=class gf extends O.AbstractMaskSystem{constructor(T){super(T),this.glConst=M.settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const T=this.maskStack[this.maskStack.length-1];return T?T._scissorCounter:0}calcScissorRect(T){var G;if(T._scissorRectLocal)return;const _=T._scissorRect,{maskObject:A}=T,{renderer:P}=this,x=P.renderTexture,B=A.getBounds(!0,(G=m.pop())!=null?G:new D.Rectangle);this.roundFrameToPixels(B,x.current?x.current.resolution:P.resolution,x.sourceFrame,x.destinationFrame,P.projection.transform),_&&B.fit(_),T._scissorRectLocal=B}static isMatrixRotated(T){if(!T)return!1;const{a:_,b:A,c:P,d:x}=T;return(Math.abs(A)>1e-4||Math.abs(P)>1e-4)&&(Math.abs(_)>1e-4||Math.abs(x)>1e-4)}testScissor(T){const{maskObject:_}=T;if(!_.isFastRect||!_.isFastRect()||gf.isMatrixRotated(_.worldTransform)||gf.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(T);const A=T._scissorRectLocal;return A.width>0&&A.height>0}roundFrameToPixels(T,_,A,P,x){gf.isMatrixRotated(x)||(x=x?C.copyFrom(x):C.identity(),x.translate(-A.x,-A.y).scale(P.width/A.width,P.height/A.height).translate(P.x,P.y),this.renderer.filter.transformAABB(x,T),T.fit(P),T.x=Math.round(T.x*_),T.y=Math.round(T.y*_),T.width=Math.round(T.width*_),T.height=Math.round(T.height*_))}push(T){T._scissorRectLocal||this.calcScissorRect(T);const{gl:_}=this.renderer;T._scissorRect||_.enable(_.SCISSOR_TEST),T._scissorCounter++,T._scissorRect=T._scissorRectLocal,this._useCurrent()}pop(T){const{gl:_}=this.renderer;T&&m.push(T._scissorRectLocal),this.getStackLength()>0?this._useCurrent():_.disable(_.SCISSOR_TEST)}_useCurrent(){const T=this.maskStack[this.maskStack.length-1]._scissorRect;let _;this.renderer.renderTexture.current?_=T.y:_=this.renderer.height-T.height-T.y,this.renderer.gl.scissor(T.x,_,T.width,T.height)}};p.extension={type:b.ExtensionType.RendererSystem,name:"scissor"};let v=p;b.extensions.add(v),I.ScissorSystem=v},7784:function(at,I,w){"use strict";var b=w(6967),D=w(1524),M=w(9989);class O extends M.AbstractMaskSystem{constructor(m){super(m),this.glConst=D.settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const m=this.maskStack[this.maskStack.length-1];return m?m._stencilCounter:0}push(m){const p=m.maskObject,{gl:v}=this.renderer,y=m._stencilCounter;y===0&&(this.renderer.framebuffer.forceStencil(),v.clearStencil(0),v.clear(v.STENCIL_BUFFER_BIT),v.enable(v.STENCIL_TEST)),m._stencilCounter++;const T=m._colorMask;T!==0&&(m._colorMask=0,v.colorMask(!1,!1,!1,!1)),v.stencilFunc(v.EQUAL,y,4294967295),v.stencilOp(v.KEEP,v.KEEP,v.INCR),p.renderable=!0,p.render(this.renderer),this.renderer.batch.flush(),p.renderable=!1,T!==0&&(m._colorMask=T,v.colorMask((T&1)!==0,(T&2)!==0,(T&4)!==0,(T&8)!==0)),this._useCurrent()}pop(m){const p=this.renderer.gl;if(this.getStackLength()===0)p.disable(p.STENCIL_TEST);else{const v=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,y=v?v._colorMask:15;y!==0&&(v._colorMask=0,p.colorMask(!1,!1,!1,!1)),p.stencilOp(p.KEEP,p.KEEP,p.DECR),m.renderable=!0,m.render(this.renderer),this.renderer.batch.flush(),m.renderable=!1,y!==0&&(v._colorMask=y,p.colorMask((y&1)!==0,(y&2)!==0,(y&4)!==0,(y&8)!==0)),this._useCurrent()}}_useCurrent(){const m=this.renderer.gl;m.stencilFunc(m.EQUAL,this.getStackLength(),4294967295),m.stencilOp(m.KEEP,m.KEEP,m.KEEP)}}O.extension={type:b.ExtensionType.RendererSystem,name:"stencil"},b.extensions.add(O),I.StencilSystem=O},3079:function(at,I,w){"use strict";var b=w(6967),D=w(2947);class M{constructor(C){this.renderer=C,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return D.deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),C.extract}},prepare:{enumerable:!1,get(){return D.deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),C.prepare}},interaction:{enumerable:!1,get(){return D.deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),C.events}}})}init(){const C=this.rendererPlugins;for(const m in C)this.plugins[m]=new C[m](this.renderer)}destroy(){for(const C in this.plugins)this.plugins[C].destroy(),this.plugins[C]=null}}M.extension={type:[b.ExtensionType.RendererSystem,b.ExtensionType.CanvasRendererSystem],name:"_plugin"},b.extensions.add(M),I.PluginSystem=M},2472:function(at,I,w){"use strict";var b=w(6967),D=w(8865);class M{constructor(C){this.renderer=C,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new D.Matrix,this.transform=null}update(C,m,p,v){this.destinationFrame=C||this.destinationFrame||this.defaultFrame,this.sourceFrame=m||this.sourceFrame||C,this.calculateProjection(this.destinationFrame,this.sourceFrame,p,v),this.transform&&this.projectionMatrix.append(this.transform);const y=this.renderer;y.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,y.globalUniforms.update(),y.shader.shader&&y.shader.syncUniformGroup(y.shader.shader.uniforms.globals)}calculateProjection(C,m,p,v){const y=this.projectionMatrix,T=v?-1:1;y.identity(),y.a=1/m.width*2,y.d=T*(1/m.height*2),y.tx=-1-m.x*y.a,y.ty=-T-m.y*y.d}setTransform(C){}destroy(){this.renderer=null}}M.extension={type:b.ExtensionType.RendererSystem,name:"projection"},b.extensions.add(M),I.ProjectionSystem=M},869:function(at,I,w){"use strict";var b=w(642),D=w(3994),M=w(6524),O=w(1368);class C extends O.BaseTexture{constructor(p={}){var v,y,T;if(typeof p=="number"){const _=arguments[0],A=arguments[1],P=arguments[2],x=arguments[3];p={width:_,height:A,scaleMode:P,resolution:x}}p.width=(v=p.width)!=null?v:100,p.height=(y=p.height)!=null?y:100,(T=p.multisample)!=null||(p.multisample=D.MSAA_QUALITY.NONE),super(null,p),this.mipmap=D.MIPMAP_MODES.OFF,this.valid=!0,this._clear=new b.Color([0,0,0,0]),this.framebuffer=new M.Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=p.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(p){this._clear.setValue(p)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(p){this.framebuffer.multisample=p}resize(p,v){this.framebuffer.resize(p*this.resolution,v*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}I.BaseRenderTexture=C},9461:function(at,I,w){"use strict";var b=w(6967),D=w(8865),M=w(7730);const O=new D.Transform,C=new D.Rectangle;class m{constructor(v){this.renderer=v,this._tempMatrix=new D.Matrix}generateTexture(v,y){var k;const G=y||{},{region:T}=G,_=ps(G,["region"]),A=(T==null?void 0:T.copyTo(C))||v.getLocalBounds(C,!0),P=_.resolution||this.renderer.resolution;A.width=Math.max(A.width,1/P),A.height=Math.max(A.height,1/P),_.width=A.width,_.height=A.height,_.resolution=P,(k=_.multisample)!=null||(_.multisample=this.renderer.multisample);const x=M.RenderTexture.create(_);this._tempMatrix.tx=-A.x,this._tempMatrix.ty=-A.y;const B=v.transform;return v.transform=O,this.renderer.render(v,{renderTexture:x,transform:this._tempMatrix,skipUpdateTransform:!!v.parent,blit:!0}),v.transform=B,x}destroy(){}}m.extension={type:[b.ExtensionType.RendererSystem,b.ExtensionType.CanvasRendererSystem],name:"textureGenerator"},b.extensions.add(m),I.GenerateTextureSystem=m},7730:function(at,I,w){"use strict";var b=w(8671),D=w(869);class M extends b.Texture{constructor(C,m){super(C,m),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(C){this.framebuffer.multisample=C}resize(C,m,p=!0){const v=this.baseTexture.resolution,y=Math.round(C*v)/v,T=Math.round(m*v)/v;this.valid=y>0&&T>0,this._frame.width=this.orig.width=y,this._frame.height=this.orig.height=T,p&&this.baseTexture.resize(y,T),this.updateUvs()}setResolution(C){const{baseTexture:m}=this;m.resolution!==C&&(m.setResolution(C),this.resize(m.width,m.height,!1))}static create(C){return new M(new D.BaseRenderTexture(C))}}I.RenderTexture=M},4053:function(at,I,w){"use strict";var b=w(3994),D=w(2947),M=w(869),O=w(7730);class C{constructor(p){this.texturePool={},this.textureOptions=p||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(p,v,y=b.MSAA_QUALITY.NONE){const T=new M.BaseRenderTexture(Object.assign({width:p,height:v,resolution:1,multisample:y},this.textureOptions));return new O.RenderTexture(T)}getOptimalTexture(p,v,y=1,T=b.MSAA_QUALITY.NONE){let _;p=Math.max(Math.ceil(p*y-1e-6),1),v=Math.max(Math.ceil(v*y-1e-6),1),!this.enableFullScreen||p!==this._pixelsWidth||v!==this._pixelsHeight?(p=D.nextPow2(p),v=D.nextPow2(v),_=((p&65535)<<16|v&65535)>>>0,T>1&&(_+=T*4294967296)):_=T>1?-T:-1,this.texturePool[_]||(this.texturePool[_]=[]);let A=this.texturePool[_].pop();return A||(A=this.createTexture(p,v,T)),A.filterPoolKey=_,A.setResolution(y),A}getFilterTexture(p,v,y){const T=this.getOptimalTexture(p.width,p.height,v||p.resolution,y||b.MSAA_QUALITY.NONE);return T.filterFrame=p.filterFrame,T}returnTexture(p){const v=p.filterPoolKey;p.filterFrame=null,this.texturePool[v].push(p)}returnFilterTexture(p){this.returnTexture(p)}clear(p){if(p=p!==!1,p)for(const v in this.texturePool){const y=this.texturePool[v];if(y)for(let T=0;T<y.length;T++)y[T].destroy(!0)}this.texturePool={}}setScreenSize(p){if(!(p.width===this._pixelsWidth&&p.height===this._pixelsHeight)){this.enableFullScreen=p.width>0&&p.height>0;for(const v in this.texturePool){if(!(Number(v)<0))continue;const y=this.texturePool[v];if(y)for(let T=0;T<y.length;T++)y[T].destroy(!0);this.texturePool[v]=[]}this._pixelsWidth=p.width,this._pixelsHeight=p.height}}}C.SCREEN_KEY=-1,I.RenderTexturePool=C},5557:function(at,I,w){"use strict";var b=w(642),D=w(6967),M=w(8865);const O=new M.Rectangle,C=new M.Rectangle;class m{constructor(v){this.renderer=v,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new M.Rectangle,this.destinationFrame=new M.Rectangle,this.viewportFrame=new M.Rectangle}contextChange(){var y;const v=(y=this.renderer)==null?void 0:y.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(v&&v.alpha&&v.premultipliedAlpha)}bind(v=null,y,T){const _=this.renderer;this.current=v;let A,P,x;v?(A=v.baseTexture,x=A.resolution,y||(O.width=v.frame.width,O.height=v.frame.height,y=O),T||(C.x=v.frame.x,C.y=v.frame.y,C.width=y.width,C.height=y.height,T=C),P=A.framebuffer):(x=_.resolution,y||(O.width=_._view.screen.width,O.height=_._view.screen.height,y=O),T||(T=O,T.width=y.width,T.height=y.height));const B=this.viewportFrame;B.x=T.x*x,B.y=T.y*x,B.width=T.width*x,B.height=T.height*x,v||(B.y=_.view.height-(B.y+B.height)),B.ceil(),this.renderer.framebuffer.bind(P,B),this.renderer.projection.update(T,y,x,!P),v?this.renderer.mask.setMaskStack(A.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(y),this.destinationFrame.copyFrom(T)}clear(v,y){const T=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,_=b.Color.shared.setValue(v||T);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&_.premultiply(_.alpha);const A=this.destinationFrame,P=this.current?this.current.baseTexture:this.renderer._view.screen,x=A.width!==P.width||A.height!==P.height;if(x){let{x:B,y:G,width:k,height:X}=this.viewportFrame;B=Math.round(B),G=Math.round(G),k=Math.round(k),X=Math.round(X),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(B,G,k,X)}this.renderer.framebuffer.clear(_.red,_.green,_.blue,_.alpha,y),x&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}m.extension={type:D.ExtensionType.RendererSystem,name:"renderTexture"},D.extensions.add(m),I.RenderTextureSystem=m},3926:function(at,I,w){"use strict";var b=w(6967);class D{constructor(O){this.renderer=O}render(O,C){const m=this.renderer;let p,v,y,T;if(C&&(p=C.renderTexture,v=C.clear,y=C.transform,T=C.skipUpdateTransform),this.renderingToScreen=!p,m.runners.prerender.emit(),m.emit("prerender"),m.projection.transform=y,!m.context.isLost){if(p||(this.lastObjectRendered=O),!T){const _=O.enableTempParent();O.updateTransform(),O.disableTempParent(_)}m.renderTexture.bind(p),m.batch.currentRenderer.start(),(v!=null?v:m.background.clearBeforeRender)&&m.renderTexture.clear(),O.render(m),m.batch.currentRenderer.flush(),p&&(C.blit&&m.framebuffer.blit(),p.baseTexture.update()),m.runners.postrender.emit(),m.projection.transform=null,m.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}D.extension={type:b.ExtensionType.RendererSystem,name:"objectRenderer"},b.extensions.add(D),I.ObjectRendererSystem=D},5378:function(at,I,w){"use strict";var b=w(3994),D=w(1524),M=w(2947),O=w(7675),C=w(4866),m=w(5831);w(4887);var p=w(1368),v=w(9633),y=w(2491),T=w(622),_=w(4986),A=w(8827);D.settings.PREFER_ENV=b.ENV.WEBGL2,D.settings.STRICT_TEXTURE_CACHE=!1,D.settings.RENDER_OPTIONS=He(He(He(He({},v.ContextSystem.defaultOptions),y.BackgroundSystem.defaultOptions),T.ViewSystem.defaultOptions),_.StartupSystem.defaultOptions),Object.defineProperties(D.settings,{WRAP_MODE:{get(){return p.BaseTexture.defaultOptions.wrapMode},set(P){M.deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),p.BaseTexture.defaultOptions.wrapMode=P}},SCALE_MODE:{get(){return p.BaseTexture.defaultOptions.scaleMode},set(P){M.deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),p.BaseTexture.defaultOptions.scaleMode=P}},MIPMAP_TEXTURES:{get(){return p.BaseTexture.defaultOptions.mipmap},set(P){M.deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),p.BaseTexture.defaultOptions.mipmap=P}},ANISOTROPIC_LEVEL:{get(){return p.BaseTexture.defaultOptions.anisotropicLevel},set(P){M.deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),p.BaseTexture.defaultOptions.anisotropicLevel=P}},FILTER_RESOLUTION:{get(){return M.deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),C.Filter.defaultResolution},set(P){C.Filter.defaultResolution=P}},FILTER_MULTISAMPLE:{get(){return M.deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),C.Filter.defaultMultisample},set(P){C.Filter.defaultMultisample=P}},SPRITE_MAX_TEXTURES:{get(){return O.BatchRenderer.defaultMaxTextures},set(P){M.deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),O.BatchRenderer.defaultMaxTextures=P}},SPRITE_BATCH_SIZE:{get(){return O.BatchRenderer.defaultBatchSize},set(P){M.deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),O.BatchRenderer.defaultBatchSize=P}},CAN_UPLOAD_SAME_BUFFER:{get(){return O.BatchRenderer.canUploadSameBuffer},set(P){M.deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),O.BatchRenderer.canUploadSameBuffer=P}},GC_MODE:{get(){return A.TextureGCSystem.defaultMode},set(P){M.deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),A.TextureGCSystem.defaultMode=P}},GC_MAX_IDLE:{get(){return A.TextureGCSystem.defaultMaxIdle},set(P){M.deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),A.TextureGCSystem.defaultMaxIdle=P}},GC_MAX_CHECK_COUNT:{get(){return A.TextureGCSystem.defaultCheckCountMax},set(P){M.deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),A.TextureGCSystem.defaultCheckCountMax=P}},PRECISION_VERTEX:{get(){return m.Program.defaultVertexPrecision},set(P){M.deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),m.Program.defaultVertexPrecision=P}},PRECISION_FRAGMENT:{get(){return m.Program.defaultFragmentPrecision},set(P){M.deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),m.Program.defaultFragmentPrecision=P}}})},438:function(at,I){"use strict";class w{}class b{constructor(M,O){this.program=M,this.uniformData=O,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}I.GLProgram=b,I.IGLUniformData=w},5831:function(at,I,w){"use strict";var b=w(3994),D=w(2947),M=w(1069),O=w(3848);w(9949);var C=w(1810),m=w(9709);let p=0;const v={},y=class Xu{constructor(A,P,x="pixi-shader",B={}){this.extra={},this.id=p++,this.vertexSrc=A||Xu.defaultVertexSrc,this.fragmentSrc=P||Xu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=B,this.vertexSrc.substring(0,8)!=="#version"&&(x=x.replace(/\s+/g,"-"),v[x]?(v[x]++,x+=`-${v[x]}`):v[x]=1,this.vertexSrc=`#define SHADER_NAME ${x}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${x}
${this.fragmentSrc}`,this.vertexSrc=C.setPrecision(this.vertexSrc,Xu.defaultVertexPrecision,b.PRECISION.HIGH),this.fragmentSrc=C.setPrecision(this.fragmentSrc,Xu.defaultFragmentPrecision,m.getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return O.default}static get defaultFragmentSrc(){return M.default}static from(A,P,x){const B=A+P;let G=D.ProgramCache[B];return G||(D.ProgramCache[B]=G=new Xu(A,P,x)),G}};y.defaultVertexPrecision=b.PRECISION.HIGH,y.defaultFragmentPrecision=D.isMobile.apple.device?b.PRECISION.HIGH:b.PRECISION.MEDIUM;let T=y;I.Program=T},7231:function(at,I,w){"use strict";var b=w(255),D=w(5831),M=w(8731);class O{constructor(m,p){this.uniformBindCount=0,this.program=m,p?p instanceof M.UniformGroup?this.uniformGroup=p:this.uniformGroup=new M.UniformGroup(p):this.uniformGroup=new M.UniformGroup({}),this.disposeRunner=new b.Runner("disposeShader")}checkUniformExists(m,p){if(p.uniforms[m])return!0;for(const v in p.uniforms){const y=p.uniforms[v];if(y.group===!0&&this.checkUniformExists(m,y))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(m,p,v){const y=D.Program.from(m,p);return new O(y,v)}}I.Shader=O},465:function(at,I,w){"use strict";var b=w(6967);w(9949);var D=w(8988),M=w(768),O=w(5053),C=w(715);let m=0;const p={textureCount:0,uboCount:0};class v{constructor(T){this.destroyed=!1,this.renderer=T,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=m++}systemCheck(){if(!O.unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(T){this.gl=T,this.reset()}bind(T,_){T.disposeRunner.add(this),T.uniforms.globals=this.renderer.globalUniforms;const A=T.program,P=A.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(T);return this.shader=T,this.program!==A&&(this.program=A,this.gl.useProgram(P.program)),_||(p.textureCount=0,p.uboCount=0,this.syncUniformGroup(T.uniformGroup,p)),P}setUniforms(T){const _=this.shader.program,A=_.glPrograms[this.renderer.CONTEXT_UID];_.syncUniforms(A.uniformData,T,this.renderer)}syncUniformGroup(T,_){const A=this.getGlProgram();(!T.static||T.dirtyId!==A.uniformDirtyGroups[T.id])&&(A.uniformDirtyGroups[T.id]=T.dirtyId,this.syncUniforms(T,A,_))}syncUniforms(T,_,A){(T.syncUniforms[this.shader.program.id]||this.createSyncGroups(T))(_.uniformData,T.uniforms,this.renderer,A)}createSyncGroups(T){const _=this.getSignature(T,this.shader.program.uniformData,"u");return this.cache[_]||(this.cache[_]=C.generateUniformsSync(T,this.shader.program.uniformData)),T.syncUniforms[this.shader.program.id]=this.cache[_],T.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(T,_){const A=this.getGlProgram();if(!T.static||T.dirtyId!==0||!A.uniformGroups[T.id]){T.dirtyId=0;const P=A.uniformGroups[T.id]||this.createSyncBufferGroup(T,A,_);T.buffer.update(),P(A.uniformData,T.uniforms,this.renderer,p,T.buffer)}this.renderer.buffer.bindBufferBase(T.buffer,A.uniformBufferBindings[_])}createSyncBufferGroup(T,_,A){const{gl:P}=this.renderer;this.renderer.buffer.bind(T.buffer);const x=this.gl.getUniformBlockIndex(_.program,A);_.uniformBufferBindings[A]=this.shader.uniformBindCount,P.uniformBlockBinding(_.program,x,this.shader.uniformBindCount),this.shader.uniformBindCount++;const B=this.getSignature(T,this.shader.program.uniformData,"ubo");let G=this._uboCache[B];if(G||(G=this._uboCache[B]=M.generateUniformBufferSync(T,this.shader.program.uniformData)),T.autoManage){const k=new Float32Array(G.size/4);T.buffer.update(k)}return _.uniformGroups[T.id]=G.syncFunc,_.uniformGroups[T.id]}getSignature(T,_,A){const P=T.uniforms,x=[`${A}-`];for(const B in P)x.push(B),_[B]&&x.push(_[B].type);return x.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(T){const _=this.gl,A=T.program,P=D.generateProgram(_,A);return A.glPrograms[this.renderer.CONTEXT_UID]=P,P}reset(){this.program=null,this.shader=null}disposeShader(T){this.shader===T&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}v.extension={type:b.ExtensionType.RendererSystem,name:"shader"},b.extensions.add(v),I.ShaderSystem=v},8731:function(at,I,w){"use strict";var b=w(3994),D=w(8630);let M=0;class O{constructor(m,p,v){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=M++,this.static=!!p,this.ubo=!!v,m instanceof D.Buffer?(this.buffer=m,this.buffer.type=b.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=m,this.ubo&&(this.buffer=new D.Buffer(new Float32Array(1)),this.buffer.type=b.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(m,p,v){if(!this.ubo)this.uniforms[m]=new O(p,v);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(m,p,v){return new O(m,p,v)}static uboFrom(m,p){return new O(m,p!=null?p:!0,!0)}}I.UniformGroup=O},1069:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`;I.default=w},3848:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;I.default=w},6958:function(at,I){"use strict";const w=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function b(M){let O="";for(let C=0;C<M;++C)C>0&&(O+=`
else `),C<M-1&&(O+=`if(test == ${C}.0){}`);return O}function D(M,O){if(M===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const C=O.createShader(O.FRAGMENT_SHADER);for(;;){const m=w.replace(/%forloop%/gi,b(M));if(O.shaderSource(C,m),O.compileShader(C),!O.getShaderParameter(C,O.COMPILE_STATUS))M=M/2|0;else break}return M}I.checkMaxIfStatementsInShader=D},2351:function(at,I){"use strict";function w(b,D,M){const O=b.createShader(D);return b.shaderSource(O,M),b.compileShader(O),O}I.compileShader=w},8020:function(at,I){"use strict";function w(D){const M=new Array(D);for(let O=0;O<M.length;O++)M[O]=!1;return M}function b(D,M){switch(D){case"float":return 0;case"vec2":return new Float32Array(2*M);case"vec3":return new Float32Array(3*M);case"vec4":return new Float32Array(4*M);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*M);case"ivec3":return new Int32Array(3*M);case"ivec4":return new Int32Array(4*M);case"uvec2":return new Uint32Array(2*M);case"uvec3":return new Uint32Array(3*M);case"uvec4":return new Uint32Array(4*M);case"bool":return!1;case"bvec2":return w(2*M);case"bvec3":return w(3*M);case"bvec4":return w(4*M);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}I.defaultValue=b},8988:function(at,I,w){"use strict";var b=w(438),D=w(2351),M=w(8020),O=w(139),C=w(2712),m=w(6724);function p(v,y){var B;const T=D.compileShader(v,v.VERTEX_SHADER,y.vertexSrc),_=D.compileShader(v,v.FRAGMENT_SHADER,y.fragmentSrc),A=v.createProgram();v.attachShader(A,T),v.attachShader(A,_);const P=(B=y.extra)==null?void 0:B.transformFeedbackVaryings;if(P&&(typeof v.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):v.transformFeedbackVaryings(A,P.names,P.bufferMode==="separate"?v.SEPARATE_ATTRIBS:v.INTERLEAVED_ATTRIBS)),v.linkProgram(A),v.getProgramParameter(A,v.LINK_STATUS)||m.logProgramError(v,A,T,_),y.attributeData=O.getAttributeData(A,v),y.uniformData=C.getUniformData(A,v),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(y.vertexSrc)){const G=Object.keys(y.attributeData);G.sort((k,X)=>k>X?1:-1);for(let k=0;k<G.length;k++)y.attributeData[G[k]].location=k,v.bindAttribLocation(A,k,G[k]);v.linkProgram(A)}v.deleteShader(T),v.deleteShader(_);const x={};for(const G in y.uniformData){const k=y.uniformData[G];x[G]={location:v.getUniformLocation(A,G),value:M.defaultValue(k.type,k.size)}}return new b.GLProgram(A,x)}I.generateProgram=p},768:function(at,I,w){"use strict";w(9949);var b=w(1590),D=w(1238);function M(y,T,_,A,P){_.buffer.update(P)}const O={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},C={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function m(y){const T=y.map(x=>({data:x,offset:0,dataLen:0,dirty:0}));let _=0,A=0,P=0;for(let x=0;x<T.length;x++){const B=T[x];if(_=C[B.data.type],B.data.size>1&&(_=Math.max(_,16)*B.data.size),B.dataLen=_,A%_!==0&&A<16){const G=A%_%16;A+=G,P+=G}A+_>16?(P=Math.ceil(P/16)*16,B.offset=P,P+=_,A=_):(B.offset=P,A+=_,P+=_)}return P=Math.ceil(P/16)*16,{uboElements:T,size:P}}function p(y,T){const _=[];for(const A in y)T[A]&&_.push(T[A]);return _.sort((A,P)=>A.index-P.index),_}function v(y,T){if(!y.autoManage)return{size:0,syncFunc:M};const _=p(y.uniforms,T),{uboElements:A,size:P}=m(_),x=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let B=0;B<A.length;B++){const G=A[B],k=y.uniforms[G.data.name],X=G.data.name;let Y=!1;for(let j=0;j<b.uniformParsers.length;j++){const st=b.uniformParsers[j];if(st.codeUbo&&st.test(G.data,k)){x.push(`offset = ${G.offset/4};`,b.uniformParsers[j].codeUbo(G.data.name,k)),Y=!0;break}}if(!Y)if(G.data.size>1){const j=D.mapSize(G.data.type),st=Math.max(C[G.data.type]/16,1),tt=j/st,rt=(4-tt%4)%4;x.push(`
                cv = ud.${X}.value;
                v = uv.${X};
                offset = ${G.offset/4};

                t = 0;

                for(var i=0; i < ${G.data.size*st}; i++)
                {
                    for(var j = 0; j < ${tt}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${rt};
                }

                `)}else{const j=O[G.data.type];x.push(`
                cv = ud.${X}.value;
                v = uv.${X};
                offset = ${G.offset/4};
                ${j};
                `)}}return x.push(`
       renderer.buffer.update(buffer);
    `),{size:P,syncFunc:new Function("ud","uv","renderer","syncData","buffer",x.join(`
`))}}I.createUBOElements=m,I.generateUniformBufferSync=v,I.getUBOData=p},715:function(at,I,w){"use strict";var b=w(1590);const D={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},M={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function O(C,m){var v;const p=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const y in C.uniforms){const T=m[y];if(!T){((v=C.uniforms[y])==null?void 0:v.group)===!0&&(C.uniforms[y].ubo?p.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${y}, '${y}');
                    `):p.push(`
                        renderer.shader.syncUniformGroup(uv.${y}, syncData);
                    `));continue}const _=C.uniforms[y];let A=!1;for(let P=0;P<b.uniformParsers.length;P++)if(b.uniformParsers[P].test(T,_)){p.push(b.uniformParsers[P].code(y,_)),A=!0;break}if(!A){const P=(T.size===1&&!T.isArray?D:M)[T.type].replace("location",`ud["${y}"].location`);p.push(`
            cu = ud["${y}"];
            cv = cu.value;
            v = uv["${y}"];
            ${P};`)}}return new Function("ud","uv","renderer","syncData",p.join(`
`))}I.generateUniformsSync=O},139:function(at,I,w){"use strict";var b=w(1238),D=w(9129);function M(O,C){const m={},p=C.getProgramParameter(O,C.ACTIVE_ATTRIBUTES);for(let v=0;v<p;v++){const y=C.getActiveAttrib(O,v);if(y.name.startsWith("gl_"))continue;const T=D.mapType(C,y.type),_={type:T,name:y.name,size:b.mapSize(T),location:C.getAttribLocation(O,y.name)};m[y.name]=_}return m}I.getAttributeData=M},9709:function(at,I,w){"use strict";var b=w(3994),D=w(2827);let M;function O(){if(!M){M=b.PRECISION.MEDIUM;const C=D.getTestContext();if(C&&C.getShaderPrecisionFormat){const m=C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.HIGH_FLOAT);m&&(M=m.precision?b.PRECISION.HIGH:b.PRECISION.MEDIUM)}}return M}I.getMaxFragmentPrecision=O},2827:function(at,I,w){"use strict";var b=w(3994),D=w(1524);const M={};let O=M;function C(){if(O===M||O!=null&&O.isContextLost()){const m=D.settings.ADAPTER.createCanvas();let p;D.settings.PREFER_ENV>=b.ENV.WEBGL2&&(p=m.getContext("webgl2",{})),p||(p=m.getContext("webgl",{})||m.getContext("experimental-webgl",{}),p?p.getExtension("WEBGL_draw_buffers"):p=null),O=p}return O}I.getTestContext=C},2712:function(at,I,w){"use strict";var b=w(8020),D=w(9129);function M(O,C){const m={},p=C.getProgramParameter(O,C.ACTIVE_UNIFORMS);for(let v=0;v<p;v++){const y=C.getActiveUniform(O,v),T=y.name.replace(/\[.*?\]$/,""),_=!!y.name.match(/\[.*?\]$/),A=D.mapType(C,y.type);m[T]={name:T,index:v,type:A,size:y.size,isArray:_,value:b.defaultValue(A,y.size)}}return m}I.getUniformData=M},9949:function(at,I,w){"use strict";var b=w(6958),D=w(2351),M=w(8020),O=w(715),C=w(9709),m=w(2827),p=w(6724),v=w(1238),y=w(9129),T=w(1810),_=w(1590),A=w(5053);I.checkMaxIfStatementsInShader=b.checkMaxIfStatementsInShader,I.compileShader=D.compileShader,I.defaultValue=M.defaultValue,I.generateUniformsSync=O.generateUniformsSync,I.getMaxFragmentPrecision=C.getMaxFragmentPrecision,I.getTestContext=m.getTestContext,I.logProgramError=p.logProgramError,I.mapSize=v.mapSize,I.mapType=y.mapType,I.setPrecision=T.setPrecision,I.uniformParsers=_.uniformParsers,I.unsafeEvalSupported=A.unsafeEvalSupported},6724:function(at,I){"use strict";function w(D,M){const O=D.getShaderSource(M).split(`
`).map((_,A)=>`${A}: ${_}`),C=D.getShaderInfoLog(M),m=C.split(`
`),p={},v=m.map(_=>parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(_=>_&&!p[_]?(p[_]=!0,!0):!1),y=[""];v.forEach(_=>{O[_-1]=`%c${O[_-1]}%c`,y.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const T=O.join(`
`);y[0]=T,console.error(C),console.groupCollapsed("click to view full shader code"),console.warn(...y),console.groupEnd()}function b(D,M,O,C){D.getProgramParameter(M,D.LINK_STATUS)||(D.getShaderParameter(O,D.COMPILE_STATUS)||w(D,O),D.getShaderParameter(C,D.COMPILE_STATUS)||w(D,C),console.error("PixiJS Error: Could not initialize shader."),D.getProgramInfoLog(M)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",D.getProgramInfoLog(M)))}I.logProgramError=b},1238:function(at,I){"use strict";const w={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function b(D){return w[D]}I.mapSize=b},9129:function(at,I){"use strict";let w=null;const b={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function D(M,O){if(!w){const C=Object.keys(b);w={};for(let m=0;m<C.length;++m){const p=C[m];w[M[p]]=b[p]}}return w[O]}I.mapType=D},1810:function(at,I,w){"use strict";var b=w(3994);function D(M,O,C){if(M.substring(0,9)!=="precision"){let m=O;return O===b.PRECISION.HIGH&&C!==b.PRECISION.HIGH&&(m=b.PRECISION.MEDIUM),`precision ${m} float;
${M}`}else if(C!==b.PRECISION.HIGH&&M.substring(0,15)==="precision highp")return M.replace("precision highp","precision mediump");return M}I.setPrecision=D},1590:function(at,I){"use strict";const w=[{test:b=>b.type==="float"&&b.size===1&&!b.isArray,code:b=>`
            if(uv["${b}"] !== ud["${b}"].value)
            {
                ud["${b}"].value = uv["${b}"]
                gl.uniform1f(ud["${b}"].location, uv["${b}"])
            }
            `},{test:(b,D)=>(b.type==="sampler2D"||b.type==="samplerCube"||b.type==="sampler2DArray")&&b.size===1&&!b.isArray&&(D==null||D.castToBaseTexture!==void 0),code:b=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${b}"], t);

            if(ud["${b}"].value !== t)
            {
                ud["${b}"].value = t;
                gl.uniform1i(ud["${b}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(b,D)=>b.type==="mat3"&&b.size===1&&!b.isArray&&D.a!==void 0,code:b=>`
            gl.uniformMatrix3fv(ud["${b}"].location, false, uv["${b}"].toArray(true));
            `,codeUbo:b=>`
                var ${b}_matrix = uv.${b}.toArray(true);

                data[offset] = ${b}_matrix[0];
                data[offset+1] = ${b}_matrix[1];
                data[offset+2] = ${b}_matrix[2];
        
                data[offset + 4] = ${b}_matrix[3];
                data[offset + 5] = ${b}_matrix[4];
                data[offset + 6] = ${b}_matrix[5];
        
                data[offset + 8] = ${b}_matrix[6];
                data[offset + 9] = ${b}_matrix[7];
                data[offset + 10] = ${b}_matrix[8];
            `},{test:(b,D)=>b.type==="vec2"&&b.size===1&&!b.isArray&&D.x!==void 0,code:b=>`
                cv = ud["${b}"].value;
                v = uv["${b}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${b}"].location, v.x, v.y);
                }`,codeUbo:b=>`
                v = uv.${b};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:b=>b.type==="vec2"&&b.size===1&&!b.isArray,code:b=>`
                cv = ud["${b}"].value;
                v = uv["${b}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${b}"].location, v[0], v[1]);
                }
            `},{test:(b,D)=>b.type==="vec4"&&b.size===1&&!b.isArray&&D.width!==void 0,code:b=>`
                cv = ud["${b}"].value;
                v = uv["${b}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${b}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:b=>`
                    v = uv.${b};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(b,D)=>b.type==="vec4"&&b.size===1&&!b.isArray&&D.red!==void 0,code:b=>`
                cv = ud["${b}"].value;
                v = uv["${b}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${b}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:b=>`
                    v = uv.${b};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(b,D)=>b.type==="vec3"&&b.size===1&&!b.isArray&&D.red!==void 0,code:b=>`
                cv = ud["${b}"].value;
                v = uv["${b}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${b}"].location, v.red, v.green, v.blue)
                }`,codeUbo:b=>`
                    v = uv.${b};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:b=>b.type==="vec4"&&b.size===1&&!b.isArray,code:b=>`
                cv = ud["${b}"].value;
                v = uv["${b}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${b}"].location, v[0], v[1], v[2], v[3])
                }`}];I.uniformParsers=w},5053:function(at,I){"use strict";let w;function b(){if(typeof w=="boolean")return w;try{w=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch(D){w=!1}return w}I.unsafeEvalSupported=b},4986:function(at,I,w){"use strict";var b=w(6967);class D{constructor(O){this.renderer=O}run(O){const{renderer:C}=this;C.runners.init.emit(C.options),O.hello&&console.log(`PixiJS 7.3.2 - ${C.rendererLogId} - https://pixijs.com`),C.resize(C.screen.width,C.screen.height)}destroy(){}}D.defaultOptions={hello:!1},D.extension={type:[b.ExtensionType.RendererSystem,b.ExtensionType.CanvasRendererSystem],name:"startup"},b.extensions.add(D),I.StartupSystem=D},5637:function(at,I,w){"use strict";var b=w(3994);const D=0,M=1,O=2,C=3,m=4,p=5;class v{constructor(){this.data=0,this.blendMode=b.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<D)}set blend(T){!!(this.data&1<<D)!==T&&(this.data^=1<<D)}get offsets(){return!!(this.data&1<<M)}set offsets(T){!!(this.data&1<<M)!==T&&(this.data^=1<<M)}get culling(){return!!(this.data&1<<O)}set culling(T){!!(this.data&1<<O)!==T&&(this.data^=1<<O)}get depthTest(){return!!(this.data&1<<C)}set depthTest(T){!!(this.data&1<<C)!==T&&(this.data^=1<<C)}get depthMask(){return!!(this.data&1<<p)}set depthMask(T){!!(this.data&1<<p)!==T&&(this.data^=1<<p)}get clockwiseFrontFace(){return!!(this.data&1<<m)}set clockwiseFrontFace(T){!!(this.data&1<<m)!==T&&(this.data^=1<<m)}get blendMode(){return this._blendMode}set blendMode(T){this.blend=T!==b.BLEND_MODES.NONE,this._blendMode=T}get polygonOffset(){return this._polygonOffset}set polygonOffset(T){this.offsets=!!T,this._polygonOffset=T}static for2d(){const T=new v;return T.depthTest=!1,T.blend=!0,T}}v.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`},I.State=v},7981:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(5637),O=w(1504);const C=0,m=1,p=2,v=3,y=4,T=5,_=class yp{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=b.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[C]=this.setBlend,this.map[m]=this.setOffset,this.map[p]=this.setCullFace,this.map[v]=this.setDepthTest,this.map[y]=this.setFrontFace,this.map[T]=this.setDepthMask,this.checks=[],this.defaultState=new M.State,this.defaultState.blend=!0}contextChange(x){this.gl=x,this.blendModes=O.mapWebGLBlendModesToPixi(x),this.set(this.defaultState),this.reset()}set(x){if(x=x||this.defaultState,this.stateId!==x.data){let B=this.stateId^x.data,G=0;for(;B;)B&1&&this.map[G].call(this,!!(x.data&1<<G)),B=B>>1,G++;this.stateId=x.data}for(let B=0;B<this.checks.length;B++)this.checks[B](this,x)}forceState(x){x=x||this.defaultState;for(let B=0;B<this.map.length;B++)this.map[B].call(this,!!(x.data&1<<B));for(let B=0;B<this.checks.length;B++)this.checks[B](this,x);this.stateId=x.data}setBlend(x){this.updateCheck(yp.checkBlendMode,x),this.gl[x?"enable":"disable"](this.gl.BLEND)}setOffset(x){this.updateCheck(yp.checkPolygonOffset,x),this.gl[x?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(x){this.gl[x?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(x){this.gl.depthMask(x)}setCullFace(x){this.gl[x?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(x){this.gl.frontFace(this.gl[x?"CW":"CCW"])}setBlendMode(x){if(x===this.blendMode)return;this.blendMode=x;const B=this.blendModes[x],G=this.gl;B.length===2?G.blendFunc(B[0],B[1]):G.blendFuncSeparate(B[0],B[1],B[2],B[3]),B.length===6?(this._blendEq=!0,G.blendEquationSeparate(B[4],B[5])):this._blendEq&&(this._blendEq=!1,G.blendEquationSeparate(G.FUNC_ADD,G.FUNC_ADD))}setPolygonOffset(x,B){this.gl.polygonOffset(x,B)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(x,B){const G=this.checks.indexOf(x);B&&G===-1?this.checks.push(x):!B&&G!==-1&&this.checks.splice(G,1)}static checkBlendMode(x,B){x.setBlendMode(B.blendMode)}static checkPolygonOffset(x,B){x.setPolygonOffset(1,B.polygonOffset)}destroy(){this.gl=null}};_.extension={type:D.ExtensionType.RendererSystem,name:"state"};let A=_;D.extensions.add(A),I.StateSystem=A},1504:function(at,I,w){"use strict";var b=w(3994);function D(M,O=[]){return O[b.BLEND_MODES.NORMAL]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.ADD]=[M.ONE,M.ONE],O[b.BLEND_MODES.MULTIPLY]=[M.DST_COLOR,M.ONE_MINUS_SRC_ALPHA,M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.SCREEN]=[M.ONE,M.ONE_MINUS_SRC_COLOR,M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.OVERLAY]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.DARKEN]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.LIGHTEN]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.COLOR_DODGE]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.COLOR_BURN]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.HARD_LIGHT]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.SOFT_LIGHT]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.DIFFERENCE]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.EXCLUSION]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.HUE]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.SATURATION]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.COLOR]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.LUMINOSITY]=[M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.NONE]=[0,0],O[b.BLEND_MODES.NORMAL_NPM]=[M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA,M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.ADD_NPM]=[M.SRC_ALPHA,M.ONE,M.ONE,M.ONE],O[b.BLEND_MODES.SCREEN_NPM]=[M.SRC_ALPHA,M.ONE_MINUS_SRC_COLOR,M.ONE,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.SRC_IN]=[M.DST_ALPHA,M.ZERO],O[b.BLEND_MODES.SRC_OUT]=[M.ONE_MINUS_DST_ALPHA,M.ZERO],O[b.BLEND_MODES.SRC_ATOP]=[M.DST_ALPHA,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.DST_OVER]=[M.ONE_MINUS_DST_ALPHA,M.ONE],O[b.BLEND_MODES.DST_IN]=[M.ZERO,M.SRC_ALPHA],O[b.BLEND_MODES.DST_OUT]=[M.ZERO,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.DST_ATOP]=[M.ONE_MINUS_DST_ALPHA,M.SRC_ALPHA],O[b.BLEND_MODES.XOR]=[M.ONE_MINUS_DST_ALPHA,M.ONE_MINUS_SRC_ALPHA],O[b.BLEND_MODES.SUBTRACT]=[M.ONE,M.ONE,M.ONE,M.ONE,M.FUNC_REVERSE_SUBTRACT,M.FUNC_ADD],O}I.mapWebGLBlendModesToPixi=D},8929:function(){"use strict"},6830:function(at,I,w){"use strict";var b=w(255),D=w(2947);class M extends D.EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(C){var v;this.addRunners(...C.runners);const m=((v=C.priority)!=null?v:[]).filter(y=>C.systems[y]),p=[...m,...Object.keys(C.systems).filter(y=>!m.includes(y))];for(const y of p)this.addSystem(C.systems[y],y)}addRunners(...C){C.forEach(m=>{this.runners[m]=new b.Runner(m)})}addSystem(C,m){const p=new C(this);if(this[m])throw new Error(`Whoops! The name "${m}" is already in use`);this[m]=p,this._systemsHash[m]=p;for(const v in this.runners)this.runners[v].add(p);return this}emitWithCustomOptions(C,m){const p=Object.keys(this._systemsHash);C.items.forEach(v=>{const y=p.find(T=>this._systemsHash[T]===v);v[C.name](m[y])})}destroy(){Object.values(this.runners).forEach(C=>{C.destroy()}),this._systemsHash={}}}I.SystemManager=M},4887:function(at,I,w){"use strict";var b=w(2491),D=w(5928),M=w(9633),O=w(9810),C=w(6072),m=w(2943),p=w(6331),v=w(8841),y=w(7784),T=w(3079),_=w(2472),A=w(9461),P=w(5557),x=w(465),B=w(4986),G=w(7981),k=w(6830),X=w(8827),Y=w(8678),j=w(6686),st=w(622);I.BackgroundSystem=b.BackgroundSystem,I.BatchSystem=D.BatchSystem,I.ContextSystem=M.ContextSystem,I.FilterSystem=O.FilterSystem,I.FramebufferSystem=C.FramebufferSystem,I.GeometrySystem=m.GeometrySystem,I.MaskSystem=p.MaskSystem,I.ScissorSystem=v.ScissorSystem,I.StencilSystem=y.StencilSystem,I.PluginSystem=T.PluginSystem,I.ProjectionSystem=_.ProjectionSystem,I.GenerateTextureSystem=A.GenerateTextureSystem,I.RenderTextureSystem=P.RenderTextureSystem,I.ShaderSystem=x.ShaderSystem,I.StartupSystem=B.StartupSystem,I.StateSystem=G.StateSystem,I.SystemManager=k.SystemManager,I.TextureGCSystem=X.TextureGCSystem,I.TextureSystem=Y.TextureSystem,I.TransformFeedbackSystem=j.TransformFeedbackSystem,I.ViewSystem=st.ViewSystem},1368:function(at,I,w){"use strict";var b=w(3994),D=w(1524),M=w(2947),O=w(5044),C=w(9526),m=w(572);const p={scaleMode:b.SCALE_MODES.NEAREST,alphaMode:b.ALPHA_MODES.NPM},v=class Wu extends M.EventEmitter{constructor(_=null,A=null){super(),A=Object.assign({},Wu.defaultOptions,A);const{alphaMode:P,mipmap:x,anisotropicLevel:B,scaleMode:G,width:k,height:X,wrapMode:Y,format:j,type:st,target:tt,resolution:rt,resourceOptions:ct}=A;_&&!(_ instanceof m.Resource)&&(_=O.autoDetectResource(_,ct),_.internal=!0),this.resolution=rt||D.settings.RESOLUTION,this.width=Math.round((k||0)*this.resolution)/this.resolution,this.height=Math.round((X||0)*this.resolution)/this.resolution,this._mipmap=x,this.anisotropicLevel=B,this._wrapMode=Y,this._scaleMode=G,this.format=j,this.type=st,this.target=tt,this.alphaMode=P,this.uid=M.uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=k>0&&X>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,A){let P;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,P=!0),A!==void 0&&A!==this.mipmap&&(this.mipmap=A,P=!0),P&&this.dirtyStyleId++,this}setSize(_,A,P){return P=P||this.resolution,this.setRealSize(_*P,A*P,P)}setRealSize(_,A,P){return this.resolution=P||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(A)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=M.isPow2(this.realWidth)&&M.isPow2(this.realHeight)}setResolution(_){const A=this.resolution;return A===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*A)/_,this.height=Math.round(this.height*A)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete M.BaseTextureCache[this.cacheId],delete M.TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Wu.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,A,P=D.settings.STRICT_TEXTURE_CACHE){const x=typeof _=="string";let B=null;if(x)B=_;else{if(!_._pixiId){const k=(A==null?void 0:A.pixiIdPrefix)||"pixiid";_._pixiId=`${k}_${M.uid()}`}B=_._pixiId}let G=M.BaseTextureCache[B];if(x&&P&&!G)throw new Error(`The cacheId "${B}" does not exist in BaseTextureCache.`);return G||(G=new Wu(_,A),G.cacheId=B,Wu.addToCache(G,B)),G}static fromBuffer(_,A,P,x){_=_||new Float32Array(A*P*4);const B=new C.BufferResource(_,He({width:A,height:P},x==null?void 0:x.resourceOptions));let G,k;return _ instanceof Float32Array?(G=b.FORMATS.RGBA,k=b.TYPES.FLOAT):_ instanceof Int32Array?(G=b.FORMATS.RGBA_INTEGER,k=b.TYPES.INT):_ instanceof Uint32Array?(G=b.FORMATS.RGBA_INTEGER,k=b.TYPES.UNSIGNED_INT):_ instanceof Int16Array?(G=b.FORMATS.RGBA_INTEGER,k=b.TYPES.SHORT):_ instanceof Uint16Array?(G=b.FORMATS.RGBA_INTEGER,k=b.TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(G=b.FORMATS.RGBA,k=b.TYPES.BYTE):(G=b.FORMATS.RGBA,k=b.TYPES.UNSIGNED_BYTE),B.internal=!0,new Wu(B,Object.assign({},p,{type:k,format:G},x))}static addToCache(_,A){A&&(_.textureCacheIds.includes(A)||_.textureCacheIds.push(A),M.BaseTextureCache[A]&&M.BaseTextureCache[A]!==_&&console.warn(`BaseTexture added to the cache with an id [${A}] that already had an entry`),M.BaseTextureCache[A]=_)}static removeFromCache(_){if(typeof _=="string"){const A=M.BaseTextureCache[_];if(A){const P=A.textureCacheIds.indexOf(_);return P>-1&&A.textureCacheIds.splice(P,1),delete M.BaseTextureCache[_],A}}else if(_!=null&&_.textureCacheIds){for(let A=0;A<_.textureCacheIds.length;++A)delete M.BaseTextureCache[_.textureCacheIds[A]];return _.textureCacheIds.length=0,_}return null}};v.defaultOptions={mipmap:b.MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:b.SCALE_MODES.LINEAR,wrapMode:b.WRAP_MODES.CLAMP,alphaMode:b.ALPHA_MODES.UNPACK,target:b.TARGETS.TEXTURE_2D,format:b.FORMATS.RGBA,type:b.TYPES.UNSIGNED_BYTE},v._globalBatch=0;let y=v;I.BaseTexture=y},3504:function(at,I,w){"use strict";var b=w(3994);class D{constructor(O){this.texture=O,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=b.TYPES.UNSIGNED_BYTE,this.internalFormat=b.FORMATS.RGBA,this.samplerType=0}}I.GLTexture=D},8671:function(at,I,w){"use strict";var b=w(8865),D=w(1524),M=w(2947),O=w(1368),C=w(4440),m=w(4959);const p=new m.TextureUvs;function v(T){T.destroy=function(){},T.on=function(){},T.once=function(){},T.emit=function(){}}class y extends M.EventEmitter{constructor(_,A,P,x,B,G,k){if(super(),this.noFrame=!1,A||(this.noFrame=!0,A=new b.Rectangle(0,0,1,1)),_ instanceof y&&(_=_.baseTexture),this.baseTexture=_,this._frame=A,this.trim=x,this.valid=!1,this.destroyed=!1,this._uvs=p,this.uvMatrix=null,this.orig=P||A,this._rotate=Number(B||0),B===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=G?new b.Point(G.x,G.y):new b.Point(0,0),this.defaultBorders=k,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=A:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:A}=this.baseTexture;A!=null&&A.url&&M.TextureCache[A.url]&&y.removeFromCache(A.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,y.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var x;const _=this._frame.clone(),A=this._frame===this.orig?_:this.orig.clone(),P=new y(this.baseTexture,!this.noFrame&&_,A,(x=this.trim)==null?void 0:x.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(P._frame=_),P}updateUvs(){this._uvs===p&&(this._uvs=new m.TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,A={},P=D.settings.STRICT_TEXTURE_CACHE){const x=typeof _=="string";let B=null;if(x)B=_;else if(_ instanceof O.BaseTexture){if(!_.cacheId){const k=(A==null?void 0:A.pixiIdPrefix)||"pixiid";_.cacheId=`${k}-${M.uid()}`,O.BaseTexture.addToCache(_,_.cacheId)}B=_.cacheId}else{if(!_._pixiId){const k=(A==null?void 0:A.pixiIdPrefix)||"pixiid";_._pixiId=`${k}_${M.uid()}`}B=_._pixiId}let G=M.TextureCache[B];if(x&&P&&!G)throw new Error(`The cacheId "${B}" does not exist in TextureCache.`);return!G&&!(_ instanceof O.BaseTexture)?(A.resolution||(A.resolution=M.getResolutionOfUrl(_)),G=new y(new O.BaseTexture(_,A)),G.baseTexture.cacheId=B,O.BaseTexture.addToCache(G.baseTexture,B),y.addToCache(G,B)):!G&&_ instanceof O.BaseTexture&&(G=new y(_),y.addToCache(G,B)),G}static fromURL(_,A){const P=Object.assign({autoLoad:!1},A==null?void 0:A.resourceOptions),x=y.from(_,Object.assign({resourceOptions:P},A),!1),B=x.baseTexture.resource;return x.baseTexture.valid?Promise.resolve(x):B.load().then(()=>Promise.resolve(x))}static fromBuffer(_,A,P,x){return new y(O.BaseTexture.fromBuffer(_,A,P,x))}static fromLoader(_,A,P,x){const B=new O.BaseTexture(_,Object.assign({scaleMode:O.BaseTexture.defaultOptions.scaleMode,resolution:M.getResolutionOfUrl(A)},x)),{resource:G}=B;G instanceof C.ImageResource&&(G.url=A);const k=new y(B);return P||(P=A),O.BaseTexture.addToCache(k.baseTexture,P),y.addToCache(k,P),P!==A&&(O.BaseTexture.addToCache(k.baseTexture,A),y.addToCache(k,A)),k.baseTexture.valid?Promise.resolve(k):new Promise(X=>{k.baseTexture.once("loaded",()=>X(k))})}static addToCache(_,A){A&&(_.textureCacheIds.includes(A)||_.textureCacheIds.push(A),M.TextureCache[A]&&M.TextureCache[A]!==_&&console.warn(`Texture added to the cache with an id [${A}] that already had an entry`),M.TextureCache[A]=_)}static removeFromCache(_){if(typeof _=="string"){const A=M.TextureCache[_];if(A){const P=A.textureCacheIds.indexOf(_);return P>-1&&A.textureCacheIds.splice(P,1),delete M.TextureCache[_],A}}else if(_!=null&&_.textureCacheIds){for(let A=0;A<_.textureCacheIds.length;++A)M.TextureCache[_.textureCacheIds[A]]===_&&delete M.TextureCache[_.textureCacheIds[A]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:A,y:P,width:x,height:B}=_,G=A+x>this.baseTexture.width,k=P+B>this.baseTexture.height;if(G||k){const X=G&&k?"and":"or",Y=`X: ${A} + ${x} = ${A+x} > ${this.baseTexture.width}`,j=`Y: ${P} + ${B} = ${P+B} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${Y} ${X} ${j}`)}this.valid=x&&B&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return y._EMPTY||(y._EMPTY=new y(new O.BaseTexture),v(y._EMPTY),v(y._EMPTY.baseTexture)),y._EMPTY}static get WHITE(){if(!y._WHITE){const _=D.settings.ADAPTER.createCanvas(16,16),A=_.getContext("2d");_.width=16,_.height=16,A.fillStyle="white",A.fillRect(0,0,16,16),y._WHITE=new y(O.BaseTexture.from(_)),v(y._WHITE),v(y._WHITE.baseTexture)}return y._WHITE}}I.Texture=y},8827:function(at,I,w){"use strict";var b=w(3994),D=w(6967);const M=class yf{constructor(m){this.renderer=m,this.count=0,this.checkCount=0,this.maxIdle=yf.defaultMaxIdle,this.checkCountMax=yf.defaultCheckCountMax,this.mode=yf.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==b.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const m=this.renderer.texture,p=m.managedTextures;let v=!1;for(let y=0;y<p.length;y++){const T=p[y];T.resource&&this.count-T.touched>this.maxIdle&&(m.destroyTexture(T,!0),p[y]=null,v=!0)}if(v){let y=0;for(let T=0;T<p.length;T++)p[T]!==null&&(p[y++]=p[T]);p.length=y}}unload(m){const p=this.renderer.texture,v=m._texture;v&&!v.framebuffer&&p.destroyTexture(v);for(let y=m.children.length-1;y>=0;y--)this.unload(m.children[y])}destroy(){this.renderer=null}};M.defaultMode=b.GC_MODES.AUTO,M.defaultMaxIdle=3600,M.defaultCheckCountMax=600,M.extension={type:D.ExtensionType.RendererSystem,name:"textureGC"};let O=M;D.extensions.add(O),I.TextureGCSystem=O},389:function(at,I,w){"use strict";var b=w(8865);const D=new b.Matrix;class M{constructor(C,m){this._texture=C,this.mapCoord=new b.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof m>"u"?.5:m,this.isSimple=!1}get texture(){return this._texture}set texture(C){this._texture=C,this._textureID=-1}multiplyUvs(C,m){m===void 0&&(m=C);const p=this.mapCoord;for(let v=0;v<C.length;v+=2){const y=C[v],T=C[v+1];m[v]=y*p.a+T*p.c+p.tx,m[v+1]=y*p.b+T*p.d+p.ty}return m}update(C){const m=this._texture;if(!m||!m.valid||!C&&this._textureID===m._updateID)return!1;this._textureID=m._updateID,this._updateID++;const p=m._uvs;this.mapCoord.set(p.x1-p.x0,p.y1-p.y0,p.x3-p.x0,p.y3-p.y0,p.x0,p.y0);const v=m.orig,y=m.trim;y&&(D.set(v.width/y.width,0,0,v.height/y.height,-y.x/y.width,-y.y/y.height),this.mapCoord.append(D));const T=m.baseTexture,_=this.uClampFrame,A=this.clampMargin/T.resolution,P=this.clampOffset;return _[0]=(m._frame.x+A+P)/T.width,_[1]=(m._frame.y+A+P)/T.height,_[2]=(m._frame.x+m._frame.width-A+P)/T.width,_[3]=(m._frame.y+m._frame.height-A+P)/T.height,this.uClampOffset[0]=P/T.realWidth,this.uClampOffset[1]=P/T.realHeight,this.isSimple=m._frame.width===T.width&&m._frame.height===T.height&&m.rotate===0,!0}}I.TextureMatrix=M},8678:function(at,I,w){"use strict";var b=w(3994),D=w(6967),M=w(2947),O=w(1368),C=w(3504),m=w(2171),p=w(6267);class v{constructor(T){this.renderer=T,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new O.BaseTexture,this.hasIntegerTextures=!1}contextChange(){const T=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=p.mapTypeAndFormatToInternalFormat(T),this.samplerTypes=m.mapInternalFormatToSamplerType(T);const _=T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=_;for(let P=0;P<_;P++)this.boundTextures[P]=null;this.emptyTextures={};const A=new C.GLTexture(T.createTexture());T.bindTexture(T.TEXTURE_2D,A.texture),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[T.TEXTURE_2D]=A,this.emptyTextures[T.TEXTURE_CUBE_MAP]=new C.GLTexture(T.createTexture()),T.bindTexture(T.TEXTURE_CUBE_MAP,this.emptyTextures[T.TEXTURE_CUBE_MAP].texture);for(let P=0;P<6;P++)T.texImage2D(T.TEXTURE_CUBE_MAP_POSITIVE_X+P,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,null);T.texParameteri(T.TEXTURE_CUBE_MAP,T.TEXTURE_MAG_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_CUBE_MAP,T.TEXTURE_MIN_FILTER,T.LINEAR);for(let P=0;P<this.boundTextures.length;P++)this.bind(null,P)}bind(T,_=0){const{gl:A}=this;if(T=T==null?void 0:T.castToBaseTexture(),(T==null?void 0:T.valid)&&!T.parentTextureArray){T.touched=this.renderer.textureGC.count;const P=T._glTextures[this.CONTEXT_UID]||this.initTexture(T);this.boundTextures[_]!==T&&(this.currentLocation!==_&&(this.currentLocation=_,A.activeTexture(A.TEXTURE0+_)),A.bindTexture(T.target,P.texture)),P.dirtyId!==T.dirtyId?(this.currentLocation!==_&&(this.currentLocation=_,A.activeTexture(A.TEXTURE0+_)),this.updateTexture(T)):P.dirtyStyleId!==T.dirtyStyleId&&this.updateTextureStyle(T),this.boundTextures[_]=T}else this.currentLocation!==_&&(this.currentLocation=_,A.activeTexture(A.TEXTURE0+_)),A.bindTexture(A.TEXTURE_2D,this.emptyTextures[A.TEXTURE_2D].texture),this.boundTextures[_]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let T=0;T<this.boundTextures.length;T++)this.boundTextures[T]=this.unknownTexture}unbind(T){const{gl:_,boundTextures:A}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let P=0;P<A.length;P++)A[P]===this.unknownTexture&&this.bind(null,P)}for(let P=0;P<A.length;P++)A[P]===T&&(this.currentLocation!==P&&(_.activeTexture(_.TEXTURE0+P),this.currentLocation=P),_.bindTexture(T.target,this.emptyTextures[T.target].texture),A[P]=null)}ensureSamplerType(T){const{boundTextures:_,hasIntegerTextures:A,CONTEXT_UID:P}=this;if(A)for(let x=T-1;x>=0;--x){const B=_[x];B&&B._glTextures[P].samplerType!==b.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(B)}}initTexture(T){const _=new C.GLTexture(this.gl.createTexture());return _.dirtyId=-1,T._glTextures[this.CONTEXT_UID]=_,this.managedTextures.push(T),T.on("dispose",this.destroyTexture,this),_}initTextureType(T,_){var A,P,x;_.internalFormat=(P=(A=this.internalFormats[T.type])==null?void 0:A[T.format])!=null?P:T.format,_.samplerType=(x=this.samplerTypes[_.internalFormat])!=null?x:b.SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&T.type===b.TYPES.HALF_FLOAT?_.type=this.gl.HALF_FLOAT:_.type=T.type}updateTexture(T){var P;const _=T._glTextures[this.CONTEXT_UID];if(!_)return;const A=this.renderer;if(this.initTextureType(T,_),(P=T.resource)==null?void 0:P.upload(A,T,_))_.samplerType!==b.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const x=T.realWidth,B=T.realHeight,G=A.gl;(_.width!==x||_.height!==B||_.dirtyId<0)&&(_.width=x,_.height=B,G.texImage2D(T.target,0,_.internalFormat,x,B,0,T.format,_.type,null))}T.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(T),_.dirtyId=T.dirtyId}destroyTexture(T,_){const{gl:A}=this;if(T=T.castToBaseTexture(),T._glTextures[this.CONTEXT_UID]&&(this.unbind(T),A.deleteTexture(T._glTextures[this.CONTEXT_UID].texture),T.off("dispose",this.destroyTexture,this),delete T._glTextures[this.CONTEXT_UID],!_)){const P=this.managedTextures.indexOf(T);P!==-1&&M.removeItems(this.managedTextures,P,1)}}updateTextureStyle(T){var A;const _=T._glTextures[this.CONTEXT_UID];_&&((T.mipmap===b.MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!T.isPowerOfTwo?_.mipmap=!1:_.mipmap=T.mipmap>=1,this.webGLVersion!==2&&!T.isPowerOfTwo?_.wrapMode=b.WRAP_MODES.CLAMP:_.wrapMode=T.wrapMode,(A=T.resource)!=null&&A.style(this.renderer,T,_)||this.setStyle(T,_),_.dirtyStyleId=T.dirtyStyleId)}setStyle(T,_){const A=this.gl;if(_.mipmap&&T.mipmap!==b.MIPMAP_MODES.ON_MANUAL&&A.generateMipmap(T.target),A.texParameteri(T.target,A.TEXTURE_WRAP_S,_.wrapMode),A.texParameteri(T.target,A.TEXTURE_WRAP_T,_.wrapMode),_.mipmap){A.texParameteri(T.target,A.TEXTURE_MIN_FILTER,T.scaleMode===b.SCALE_MODES.LINEAR?A.LINEAR_MIPMAP_LINEAR:A.NEAREST_MIPMAP_NEAREST);const P=this.renderer.context.extensions.anisotropicFiltering;if(P&&T.anisotropicLevel>0&&T.scaleMode===b.SCALE_MODES.LINEAR){const x=Math.min(T.anisotropicLevel,A.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT));A.texParameterf(T.target,P.TEXTURE_MAX_ANISOTROPY_EXT,x)}}else A.texParameteri(T.target,A.TEXTURE_MIN_FILTER,T.scaleMode===b.SCALE_MODES.LINEAR?A.LINEAR:A.NEAREST);A.texParameteri(T.target,A.TEXTURE_MAG_FILTER,T.scaleMode===b.SCALE_MODES.LINEAR?A.LINEAR:A.NEAREST)}destroy(){this.renderer=null}}v.extension={type:D.ExtensionType.RendererSystem,name:"texture"},D.extensions.add(v),I.TextureSystem=v},4959:function(at,I,w){"use strict";var b=w(8865);class D{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(O,C,m){const p=C.width,v=C.height;if(m){const y=O.width/2/p,T=O.height/2/v,_=O.x/p+y,A=O.y/v+T;m=b.groupD8.add(m,b.groupD8.NW),this.x0=_+y*b.groupD8.uX(m),this.y0=A+T*b.groupD8.uY(m),m=b.groupD8.add(m,2),this.x1=_+y*b.groupD8.uX(m),this.y1=A+T*b.groupD8.uY(m),m=b.groupD8.add(m,2),this.x2=_+y*b.groupD8.uX(m),this.y2=A+T*b.groupD8.uY(m),m=b.groupD8.add(m,2),this.x3=_+y*b.groupD8.uX(m),this.y3=A+T*b.groupD8.uY(m)}else this.x0=O.x/p,this.y0=O.y/v,this.x1=(O.x+O.width)/p,this.y1=O.y/v,this.x2=(O.x+O.width)/p,this.y2=(O.y+O.height)/v,this.x3=O.x/p,this.y3=(O.y+O.height)/v;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}D.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`},I.TextureUvs=D},9433:function(at,I,w){"use strict";var b=w(1368),D=w(5044),M=w(572);class O extends M.Resource{constructor(m,p){const{width:v,height:y}=p||{};super(v,y),this.items=[],this.itemDirtyIds=[];for(let T=0;T<m;T++){const _=new b.BaseTexture;this.items.push(_),this.itemDirtyIds.push(-2)}this.length=m,this._load=null,this.baseTexture=null}initFromArray(m,p){for(let v=0;v<this.length;v++)m[v]&&(m[v].castToBaseTexture?this.addBaseTextureAt(m[v].castToBaseTexture(),v):m[v]instanceof M.Resource?this.addResourceAt(m[v],v):this.addResourceAt(D.autoDetectResource(m[v],p),v))}dispose(){for(let m=0,p=this.length;m<p;m++)this.items[m].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(m,p){if(!this.items[p])throw new Error(`Index ${p} is out of bounds`);return m.valid&&!this.valid&&this.resize(m.width,m.height),this.items[p].setResource(m),this}bind(m){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(m);for(let p=0;p<this.length;p++)this.items[p].parentTextureArray=m,this.items[p].on("update",m.update,m)}unbind(m){super.unbind(m);for(let p=0;p<this.length;p++)this.items[p].parentTextureArray=null,this.items[p].off("update",m.update,m)}load(){if(this._load)return this._load;const m=this.items.map(p=>p.resource).filter(p=>p).map(p=>p.load());return this._load=Promise.all(m).then(()=>{const{realWidth:p,realHeight:v}=this.items[0];return this.resize(p,v),this.update(),Promise.resolve(this)}),this._load}}I.AbstractMultiResource=O},8344:function(at,I,w){"use strict";var b=w(3994),D=w(9433);class M extends D.AbstractMultiResource{constructor(C,m){const{width:p,height:v}=m||{};let y,T;Array.isArray(C)?(y=C,T=C.length):T=C,super(T,{width:p,height:v}),y&&this.initFromArray(y,m)}addBaseTextureAt(C,m){if(C.resource)this.addResourceAt(C.resource,m);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(C){super.bind(C),C.target=b.TARGETS.TEXTURE_2D_ARRAY}upload(C,m,p){const{length:v,itemDirtyIds:y,items:T}=this,{gl:_}=C;p.dirtyId<0&&_.texImage3D(_.TEXTURE_2D_ARRAY,0,p.internalFormat,this._width,this._height,v,0,m.format,p.type,null);for(let A=0;A<v;A++){const P=T[A];y[A]<P.dirtyId&&(y[A]=P.dirtyId,P.valid&&_.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,A,P.resource.width,P.resource.height,1,m.format,p.type,P.resource.source))}return!0}}I.ArrayResource=M},5587:function(at,I,w){"use strict";var b=w(3994),D=w(2947),M=w(572);class O extends M.Resource{constructor(m){const p=m,v=p.naturalWidth||p.videoWidth||p.width,y=p.naturalHeight||p.videoHeight||p.height;super(v,y),this.source=m,this.noSubImage=!1}static crossOrigin(m,p,v){v===void 0&&!p.startsWith("data:")?m.crossOrigin=D.determineCrossOrigin(p):v!==!1&&(m.crossOrigin=typeof v=="string"?v:"anonymous")}upload(m,p,v,y){const T=m.gl,_=p.realWidth,A=p.realHeight;if(y=y||this.source,typeof HTMLImageElement<"u"&&y instanceof HTMLImageElement){if(!y.complete||y.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&y instanceof HTMLVideoElement&&y.readyState<=1)return!1;return T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.alphaMode===b.ALPHA_MODES.UNPACK),!this.noSubImage&&p.target===T.TEXTURE_2D&&v.width===_&&v.height===A?T.texSubImage2D(T.TEXTURE_2D,0,0,0,p.format,v.type,y):(v.width=_,v.height=A,T.texImage2D(p.target,0,v.internalFormat,p.format,v.type,y)),!0}update(){if(this.destroyed)return;const m=this.source,p=m.naturalWidth||m.videoWidth||m.width,v=m.naturalHeight||m.videoHeight||m.height;this.resize(p,v),super.update()}dispose(){this.source=null}}I.BaseImageResource=O},9526:function(at,I,w){"use strict";var b=w(3994),D=w(572);class M extends D.Resource{constructor(C,m){var y;const{width:p,height:v}=m||{};if(!p||!v)throw new Error("BufferResource width or height invalid");super(p,v),this.data=C,this.unpackAlignment=(y=m.unpackAlignment)!=null?y:4}upload(C,m,p){const v=C.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,this.unpackAlignment),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m.alphaMode===b.ALPHA_MODES.UNPACK);const y=m.realWidth,T=m.realHeight;return p.width===y&&p.height===T?v.texSubImage2D(m.target,0,0,0,y,T,m.format,p.type,this.data):(p.width=y,p.height=T,v.texImage2D(m.target,0,p.internalFormat,y,T,0,m.format,p.type,this.data)),!0}dispose(){this.data=null}static test(C){return C===null||C instanceof Int8Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array}}I.BufferResource=M},5138:function(at,I,w){"use strict";var b=w(5587);class D extends b.BaseImageResource{constructor(O){super(O)}static test(O){const{OffscreenCanvas:C}=globalThis;return C&&O instanceof C?!0:globalThis.HTMLCanvasElement&&O instanceof HTMLCanvasElement}}I.CanvasResource=D},2116:function(at,I,w){"use strict";var b=w(3994),D=w(9433);const M=class wc extends D.AbstractMultiResource{constructor(m,p){const{width:v,height:y,autoLoad:T,linkBaseTexture:_}=p||{};if(m&&m.length!==wc.SIDES)throw new Error(`Invalid length. Got ${m.length}, expected 6`);super(6,{width:v,height:y});for(let A=0;A<wc.SIDES;A++)this.items[A].target=b.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+A;this.linkBaseTexture=_!==!1,m&&this.initFromArray(m,p),T!==!1&&this.load()}bind(m){super.bind(m),m.target=b.TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(m,p,v){if(v===void 0&&(v=this.linkBaseTexture),!this.items[p])throw new Error(`Index ${p} is out of bounds`);if(!this.linkBaseTexture||m.parentTextureArray||Object.keys(m._glTextures).length>0)if(m.resource)this.addResourceAt(m.resource,p);else throw new Error("CubeResource does not support copying of renderTexture.");else m.target=b.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+p,m.parentTextureArray=this.baseTexture,this.items[p]=m;return m.valid&&!this.valid&&this.resize(m.realWidth,m.realHeight),this.items[p]=m,this}upload(m,p,v){const y=this.itemDirtyIds;for(let T=0;T<wc.SIDES;T++){const _=this.items[T];(y[T]<_.dirtyId||v.dirtyId<p.dirtyId)&&(_.valid&&_.resource?(_.resource.upload(m,_,v),y[T]=_.dirtyId):y[T]<-1&&(m.gl.texImage2D(_.target,0,v.internalFormat,p.realWidth,p.realHeight,0,p.format,v.type,null),y[T]=-1))}return!0}static test(m){return Array.isArray(m)&&m.length===wc.SIDES}};M.SIDES=6;let O=M;I.CubeResource=O},5468:function(at,I,w){"use strict";var b=w(3994),D=w(1524),M=w(5587);class O extends M.BaseImageResource{constructor(m,p){var _,A;p=p||{};let v,y,T;typeof m=="string"?(v=O.EMPTY,y=m,T=!0):(v=m,y=null,T=!1),super(v),this.url=y,this.crossOrigin=(_=p.crossOrigin)!=null?_:!0,this.alphaMode=typeof p.alphaMode=="number"?p.alphaMode:null,this.ownsImageBitmap=(A=p.ownsImageBitmap)!=null?A:T,this._load=null,p.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise((m,p)=>he(this,null,function*(){if(this.url===null){m(this);return}try{const v=yield D.settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const y=yield v.blob();if(this.destroyed)return;const T=yield createImageBitmap(y,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===b.ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){T.close();return}this.source=T,this.update(),m(this)}catch(v){if(this.destroyed)return;p(v),this.onError.emit(v)}})),this._load)}upload(m,p,v){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(p.alphaMode=this.alphaMode),super.upload(m,p,v)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(m){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof m=="string"||m instanceof ImageBitmap)}static get EMPTY(){var m;return O._EMPTY=(m=O._EMPTY)!=null?m:D.settings.ADAPTER.createCanvas(0,0),O._EMPTY}}I.ImageBitmapResource=O},4440:function(at,I,w){"use strict";var b=w(3994),D=w(1524),M=w(5587);class O extends M.BaseImageResource{constructor(m,p){var v;if(p=p||{},typeof m=="string"){const y=new Image;M.BaseImageResource.crossOrigin(y,m,p.crossorigin),y.src=m,m=y}super(m),!m.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=m.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=((v=p.createBitmap)!=null?v:D.settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof p.alphaMode=="number"?p.alphaMode:null,this.bitmap=null,this._load=null,p.autoLoad!==!1&&this.load()}load(m){return this._load?this._load:(m!==void 0&&(this.createBitmap=m),this._load=new Promise((p,v)=>{const y=this.source;this.url=y.src;const T=()=>{this.destroyed||(y.onload=null,y.onerror=null,this.update(),this._load=null,this.createBitmap?p(this.process()):p(this))};y.complete&&y.src?T():(y.onload=T,y.onerror=_=>{v(_),this.onError.emit(_)})}),this._load)}process(){const m=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const p=globalThis.createImageBitmap,v=!m.crossOrigin||m.crossOrigin==="anonymous";return this._process=fetch(m.src,{mode:v?"cors":"no-cors"}).then(y=>y.blob()).then(y=>p(y,0,0,m.width,m.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===b.ALPHA_MODES.UNPACK?"premultiply":"none"})).then(y=>this.destroyed?Promise.reject():(this.bitmap=y,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(m,p,v){if(typeof this.alphaMode=="number"&&(p.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(m,p,v);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(m,p,v,this.bitmap),!this.preserveBitmap){let y=!0;const T=p._glTextures;for(const _ in T){const A=T[_];if(A!==v&&A.dirtyId!==p.dirtyId){y=!1;break}}y&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(m){return typeof HTMLImageElement<"u"&&(typeof m=="string"||m instanceof HTMLImageElement)}}I.ImageResource=O},572:function(at,I,w){"use strict";var b=w(255);class D{constructor(O=0,C=0){this._width=O,this._height=C,this.destroyed=!1,this.internal=!1,this.onResize=new b.Runner("setRealSize"),this.onUpdate=new b.Runner("update"),this.onError=new b.Runner("onError")}bind(O){this.onResize.add(O),this.onUpdate.add(O),this.onError.add(O),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(O){this.onResize.remove(O),this.onUpdate.remove(O),this.onError.remove(O)}resize(O,C){(O!==this._width||C!==this._height)&&(this._width=O,this._height=C,this.onResize.emit(O,C))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(O,C,m){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(O,C){return!1}}I.Resource=D},3759:function(at,I,w){"use strict";var b=w(1524),D=w(2947),M=w(5587);const O=class vf extends M.BaseImageResource{constructor(p,v){v=v||{},super(b.settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=p,this.scale=v.scale||1,this._overrideWidth=v.width,this._overrideHeight=v.height,this._resolve=null,this._crossorigin=v.crossorigin,this._load=null,v.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(p=>{if(this._resolve=()=>{this.update(),p(this)},vf.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const p=new Image;M.BaseImageResource.crossOrigin(p,this.svg,this._crossorigin),p.src=this.svg,p.onerror=v=>{this._resolve&&(p.onerror=null,this.onError.emit(v))},p.onload=()=>{if(!this._resolve)return;const v=p.width,y=p.height;if(!v||!y)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let T=v*this.scale,_=y*this.scale;(this._overrideWidth||this._overrideHeight)&&(T=this._overrideWidth||this._overrideHeight/y*v,_=this._overrideHeight||this._overrideWidth/v*y),T=Math.round(T),_=Math.round(_);const A=this.source;A.width=T,A.height=_,A._pixiId=`canvas_${D.uid()}`,A.getContext("2d").drawImage(p,0,0,v,y,0,0,T,_),this._resolve(),this._resolve=null}}static getSize(p){const v=vf.SVG_SIZE.exec(p),y={};return v&&(y[v[1]]=Math.round(parseFloat(v[3])),y[v[5]]=Math.round(parseFloat(v[7]))),y}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(p,v){return v==="svg"||typeof p=="string"&&p.startsWith("data:image/svg+xml")||typeof p=="string"&&vf.SVG_XML.test(p)}};O.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,O.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let C=O;I.SVGResource=C},3002:function(at,I,w){"use strict";var b=w(400),D=w(5587);const M=class vp extends D.BaseImageResource{constructor(m,p){if(p=p||{},!(m instanceof HTMLVideoElement)){const v=document.createElement("video");p.autoLoad!==!1&&v.setAttribute("preload","auto"),p.playsinline!==!1&&(v.setAttribute("webkit-playsinline",""),v.setAttribute("playsinline","")),p.muted===!0&&(v.setAttribute("muted",""),v.muted=!0),p.loop===!0&&v.setAttribute("loop",""),p.autoPlay!==!1&&v.setAttribute("autoplay",""),typeof m=="string"&&(m=[m]);const y=m[0].src||m[0];D.BaseImageResource.crossOrigin(v,y,p.crossorigin);for(let T=0;T<m.length;++T){const _=document.createElement("source");let{src:A,mime:P}=m[T];if(A=A||m[T],A.startsWith("data:"))P=A.slice(5,A.indexOf(";"));else if(!A.startsWith("blob:")){const x=A.split("?").shift().toLowerCase(),B=x.slice(x.lastIndexOf(".")+1);P=P||vp.MIME_TYPES[B]||`video/${B}`}_.src=A,P&&(_.type=P),v.appendChild(_)}m=v}super(m),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=p.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=p.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),p.autoLoad!==!1&&this.load()}update(m=0){if(!this.destroyed){if(this._updateFPS){const p=b.Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-p)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const m=this.source;return(m.readyState===m.HAVE_ENOUGH_DATA||m.readyState===m.HAVE_FUTURE_DATA)&&m.width&&m.height&&(m.complete=!0),m.addEventListener("play",this._onPlayStart),m.addEventListener("pause",this._onPlayStop),m.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(m.addEventListener("canplay",this._onCanPlay),m.addEventListener("canplaythrough",this._onCanPlay),m.addEventListener("error",this._onError,!0)),this._load=new Promise((p,v)=>{this.valid?p(this):(this._resolve=p,this._reject=v,m.load())}),this._load}_onError(m){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(m),this._reject&&(this._reject(m),this._reject=null,this._resolve=null)}_isSourcePlaying(){const m=this.source;return!m.paused&&!m.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const m=this.source;m.removeEventListener("canplay",this._onCanPlay),m.removeEventListener("canplaythrough",this._onCanPlay);const p=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!p&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&m.play()}dispose(){this._configureAutoUpdate();const m=this.source;m&&(m.removeEventListener("play",this._onPlayStart),m.removeEventListener("pause",this._onPlayStop),m.removeEventListener("seeked",this._onSeeked),m.removeEventListener("canplay",this._onCanPlay),m.removeEventListener("canplaythrough",this._onCanPlay),m.removeEventListener("error",this._onError,!0),m.pause(),m.src="",m.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(m){m!==this._autoUpdate&&(this._autoUpdate=m,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(m){m!==this._updateFPS&&(this._updateFPS=m,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(b.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(b.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(b.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(m,p){return globalThis.HTMLVideoElement&&m instanceof HTMLVideoElement||vp.TYPES.includes(p)}};M.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],M.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let O=M;I.VideoResource=O},5044:function(at,I){"use strict";const w=[];function b(D,M){if(!D)return null;let O="";if(typeof D=="string"){const C=/\.(\w{3,4})(?:$|\?|#)/i.exec(D);C&&(O=C[1].toLowerCase())}for(let C=w.length-1;C>=0;--C){const m=w[C];if(m.test&&m.test(D,O))return new m(D,M)}throw new Error("Unrecognized source type to auto-detect Resource")}I.INSTALLED=w,I.autoDetectResource=b},6985:function(at,I,w){"use strict";var b=w(8344),D=w(5044),M=w(9526),O=w(5138),C=w(2116),m=w(5468),p=w(4440),v=w(3759),y=w(3002),T=w(5587),_=w(572),A=w(9433);D.INSTALLED.push(m.ImageBitmapResource,p.ImageResource,O.CanvasResource,y.VideoResource,v.SVGResource,M.BufferResource,C.CubeResource,b.ArrayResource),I.ArrayResource=b.ArrayResource,I.INSTALLED=D.INSTALLED,I.autoDetectResource=D.autoDetectResource,I.BufferResource=M.BufferResource,I.CanvasResource=O.CanvasResource,I.CubeResource=C.CubeResource,I.ImageBitmapResource=m.ImageBitmapResource,I.ImageResource=p.ImageResource,I.SVGResource=v.SVGResource,I.VideoResource=y.VideoResource,I.BaseImageResource=T.BaseImageResource,I.Resource=_.Resource,I.AbstractMultiResource=A.AbstractMultiResource},2171:function(at,I,w){"use strict";var b=w(3994);function D(M){let O;return"WebGL2RenderingContext"in globalThis&&M instanceof globalThis.WebGL2RenderingContext?O={[M.RGB]:b.SAMPLER_TYPES.FLOAT,[M.RGBA]:b.SAMPLER_TYPES.FLOAT,[M.ALPHA]:b.SAMPLER_TYPES.FLOAT,[M.LUMINANCE]:b.SAMPLER_TYPES.FLOAT,[M.LUMINANCE_ALPHA]:b.SAMPLER_TYPES.FLOAT,[M.R8]:b.SAMPLER_TYPES.FLOAT,[M.R8_SNORM]:b.SAMPLER_TYPES.FLOAT,[M.RG8]:b.SAMPLER_TYPES.FLOAT,[M.RG8_SNORM]:b.SAMPLER_TYPES.FLOAT,[M.RGB8]:b.SAMPLER_TYPES.FLOAT,[M.RGB8_SNORM]:b.SAMPLER_TYPES.FLOAT,[M.RGB565]:b.SAMPLER_TYPES.FLOAT,[M.RGBA4]:b.SAMPLER_TYPES.FLOAT,[M.RGB5_A1]:b.SAMPLER_TYPES.FLOAT,[M.RGBA8]:b.SAMPLER_TYPES.FLOAT,[M.RGBA8_SNORM]:b.SAMPLER_TYPES.FLOAT,[M.RGB10_A2]:b.SAMPLER_TYPES.FLOAT,[M.RGB10_A2UI]:b.SAMPLER_TYPES.FLOAT,[M.SRGB8]:b.SAMPLER_TYPES.FLOAT,[M.SRGB8_ALPHA8]:b.SAMPLER_TYPES.FLOAT,[M.R16F]:b.SAMPLER_TYPES.FLOAT,[M.RG16F]:b.SAMPLER_TYPES.FLOAT,[M.RGB16F]:b.SAMPLER_TYPES.FLOAT,[M.RGBA16F]:b.SAMPLER_TYPES.FLOAT,[M.R32F]:b.SAMPLER_TYPES.FLOAT,[M.RG32F]:b.SAMPLER_TYPES.FLOAT,[M.RGB32F]:b.SAMPLER_TYPES.FLOAT,[M.RGBA32F]:b.SAMPLER_TYPES.FLOAT,[M.R11F_G11F_B10F]:b.SAMPLER_TYPES.FLOAT,[M.RGB9_E5]:b.SAMPLER_TYPES.FLOAT,[M.R8I]:b.SAMPLER_TYPES.INT,[M.R8UI]:b.SAMPLER_TYPES.UINT,[M.R16I]:b.SAMPLER_TYPES.INT,[M.R16UI]:b.SAMPLER_TYPES.UINT,[M.R32I]:b.SAMPLER_TYPES.INT,[M.R32UI]:b.SAMPLER_TYPES.UINT,[M.RG8I]:b.SAMPLER_TYPES.INT,[M.RG8UI]:b.SAMPLER_TYPES.UINT,[M.RG16I]:b.SAMPLER_TYPES.INT,[M.RG16UI]:b.SAMPLER_TYPES.UINT,[M.RG32I]:b.SAMPLER_TYPES.INT,[M.RG32UI]:b.SAMPLER_TYPES.UINT,[M.RGB8I]:b.SAMPLER_TYPES.INT,[M.RGB8UI]:b.SAMPLER_TYPES.UINT,[M.RGB16I]:b.SAMPLER_TYPES.INT,[M.RGB16UI]:b.SAMPLER_TYPES.UINT,[M.RGB32I]:b.SAMPLER_TYPES.INT,[M.RGB32UI]:b.SAMPLER_TYPES.UINT,[M.RGBA8I]:b.SAMPLER_TYPES.INT,[M.RGBA8UI]:b.SAMPLER_TYPES.UINT,[M.RGBA16I]:b.SAMPLER_TYPES.INT,[M.RGBA16UI]:b.SAMPLER_TYPES.UINT,[M.RGBA32I]:b.SAMPLER_TYPES.INT,[M.RGBA32UI]:b.SAMPLER_TYPES.UINT,[M.DEPTH_COMPONENT16]:b.SAMPLER_TYPES.FLOAT,[M.DEPTH_COMPONENT24]:b.SAMPLER_TYPES.FLOAT,[M.DEPTH_COMPONENT32F]:b.SAMPLER_TYPES.FLOAT,[M.DEPTH_STENCIL]:b.SAMPLER_TYPES.FLOAT,[M.DEPTH24_STENCIL8]:b.SAMPLER_TYPES.FLOAT,[M.DEPTH32F_STENCIL8]:b.SAMPLER_TYPES.FLOAT}:O={[M.RGB]:b.SAMPLER_TYPES.FLOAT,[M.RGBA]:b.SAMPLER_TYPES.FLOAT,[M.ALPHA]:b.SAMPLER_TYPES.FLOAT,[M.LUMINANCE]:b.SAMPLER_TYPES.FLOAT,[M.LUMINANCE_ALPHA]:b.SAMPLER_TYPES.FLOAT,[M.DEPTH_STENCIL]:b.SAMPLER_TYPES.FLOAT},O}I.mapInternalFormatToSamplerType=D},6267:function(at,I,w){"use strict";var b=w(3994);function D(M){let O;return"WebGL2RenderingContext"in globalThis&&M instanceof globalThis.WebGL2RenderingContext?O={[b.TYPES.UNSIGNED_BYTE]:{[b.FORMATS.RGBA]:M.RGBA8,[b.FORMATS.RGB]:M.RGB8,[b.FORMATS.RG]:M.RG8,[b.FORMATS.RED]:M.R8,[b.FORMATS.RGBA_INTEGER]:M.RGBA8UI,[b.FORMATS.RGB_INTEGER]:M.RGB8UI,[b.FORMATS.RG_INTEGER]:M.RG8UI,[b.FORMATS.RED_INTEGER]:M.R8UI,[b.FORMATS.ALPHA]:M.ALPHA,[b.FORMATS.LUMINANCE]:M.LUMINANCE,[b.FORMATS.LUMINANCE_ALPHA]:M.LUMINANCE_ALPHA},[b.TYPES.BYTE]:{[b.FORMATS.RGBA]:M.RGBA8_SNORM,[b.FORMATS.RGB]:M.RGB8_SNORM,[b.FORMATS.RG]:M.RG8_SNORM,[b.FORMATS.RED]:M.R8_SNORM,[b.FORMATS.RGBA_INTEGER]:M.RGBA8I,[b.FORMATS.RGB_INTEGER]:M.RGB8I,[b.FORMATS.RG_INTEGER]:M.RG8I,[b.FORMATS.RED_INTEGER]:M.R8I},[b.TYPES.UNSIGNED_SHORT]:{[b.FORMATS.RGBA_INTEGER]:M.RGBA16UI,[b.FORMATS.RGB_INTEGER]:M.RGB16UI,[b.FORMATS.RG_INTEGER]:M.RG16UI,[b.FORMATS.RED_INTEGER]:M.R16UI,[b.FORMATS.DEPTH_COMPONENT]:M.DEPTH_COMPONENT16},[b.TYPES.SHORT]:{[b.FORMATS.RGBA_INTEGER]:M.RGBA16I,[b.FORMATS.RGB_INTEGER]:M.RGB16I,[b.FORMATS.RG_INTEGER]:M.RG16I,[b.FORMATS.RED_INTEGER]:M.R16I},[b.TYPES.UNSIGNED_INT]:{[b.FORMATS.RGBA_INTEGER]:M.RGBA32UI,[b.FORMATS.RGB_INTEGER]:M.RGB32UI,[b.FORMATS.RG_INTEGER]:M.RG32UI,[b.FORMATS.RED_INTEGER]:M.R32UI,[b.FORMATS.DEPTH_COMPONENT]:M.DEPTH_COMPONENT24},[b.TYPES.INT]:{[b.FORMATS.RGBA_INTEGER]:M.RGBA32I,[b.FORMATS.RGB_INTEGER]:M.RGB32I,[b.FORMATS.RG_INTEGER]:M.RG32I,[b.FORMATS.RED_INTEGER]:M.R32I},[b.TYPES.FLOAT]:{[b.FORMATS.RGBA]:M.RGBA32F,[b.FORMATS.RGB]:M.RGB32F,[b.FORMATS.RG]:M.RG32F,[b.FORMATS.RED]:M.R32F,[b.FORMATS.DEPTH_COMPONENT]:M.DEPTH_COMPONENT32F},[b.TYPES.HALF_FLOAT]:{[b.FORMATS.RGBA]:M.RGBA16F,[b.FORMATS.RGB]:M.RGB16F,[b.FORMATS.RG]:M.RG16F,[b.FORMATS.RED]:M.R16F},[b.TYPES.UNSIGNED_SHORT_5_6_5]:{[b.FORMATS.RGB]:M.RGB565},[b.TYPES.UNSIGNED_SHORT_4_4_4_4]:{[b.FORMATS.RGBA]:M.RGBA4},[b.TYPES.UNSIGNED_SHORT_5_5_5_1]:{[b.FORMATS.RGBA]:M.RGB5_A1},[b.TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[b.FORMATS.RGBA]:M.RGB10_A2,[b.FORMATS.RGBA_INTEGER]:M.RGB10_A2UI},[b.TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[b.FORMATS.RGB]:M.R11F_G11F_B10F},[b.TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[b.FORMATS.RGB]:M.RGB9_E5},[b.TYPES.UNSIGNED_INT_24_8]:{[b.FORMATS.DEPTH_STENCIL]:M.DEPTH24_STENCIL8},[b.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[b.FORMATS.DEPTH_STENCIL]:M.DEPTH32F_STENCIL8}}:O={[b.TYPES.UNSIGNED_BYTE]:{[b.FORMATS.RGBA]:M.RGBA,[b.FORMATS.RGB]:M.RGB,[b.FORMATS.ALPHA]:M.ALPHA,[b.FORMATS.LUMINANCE]:M.LUMINANCE,[b.FORMATS.LUMINANCE_ALPHA]:M.LUMINANCE_ALPHA},[b.TYPES.UNSIGNED_SHORT_5_6_5]:{[b.FORMATS.RGB]:M.RGB},[b.TYPES.UNSIGNED_SHORT_4_4_4_4]:{[b.FORMATS.RGBA]:M.RGBA},[b.TYPES.UNSIGNED_SHORT_5_5_5_1]:{[b.FORMATS.RGBA]:M.RGBA}},O}I.mapTypeAndFormatToInternalFormat=D},6344:function(at,I,w){"use strict";var b=w(255);class D{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new b.Runner("disposeTransformFeedback")}bindBuffer(O,C){this.buffers[O]=C}destroy(){this.disposeRunner.emit(this,!1)}}I.TransformFeedback=D},6686:function(at,I,w){"use strict";var b=w(6967);class D{constructor(O){this.renderer=O}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(O){const{gl:C,CONTEXT_UID:m}=this,p=O._glTransformFeedbacks[m]||this.createGLTransformFeedback(O);C.bindTransformFeedback(C.TRANSFORM_FEEDBACK,p)}unbind(){const{gl:O}=this;O.bindTransformFeedback(O.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(O,C){const{gl:m,renderer:p}=this;C&&p.shader.bind(C),m.beginTransformFeedback(O)}endTransformFeedback(){const{gl:O}=this;O.endTransformFeedback()}createGLTransformFeedback(O){const{gl:C,renderer:m,CONTEXT_UID:p}=this,v=C.createTransformFeedback();O._glTransformFeedbacks[p]=v,C.bindTransformFeedback(C.TRANSFORM_FEEDBACK,v);for(let y=0;y<O.buffers.length;y++){const T=O.buffers[y];T&&(m.buffer.update(T),T._glBuffers[p].refCount++,C.bindBufferBase(C.TRANSFORM_FEEDBACK_BUFFER,y,T._glBuffers[p].buffer||null))}return C.bindTransformFeedback(C.TRANSFORM_FEEDBACK,null),O.disposeRunner.add(this),v}disposeTransformFeedback(O,C){const m=O._glTransformFeedbacks[this.CONTEXT_UID],p=this.gl;O.disposeRunner.remove(this);const v=this.renderer.buffer;if(v)for(let y=0;y<O.buffers.length;y++){const T=O.buffers[y];if(!T)continue;const _=T._glBuffers[this.CONTEXT_UID];_&&(_.refCount--,_.refCount===0&&!C&&v.dispose(T,C))}m&&(C||p.deleteTransformFeedback(m),delete O._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}D.extension={type:b.ExtensionType.RendererSystem,name:"transformFeedback"},b.extensions.add(D),I.TransformFeedbackSystem=D},4609:function(at,I,w){"use strict";var b=w(6710);class D extends b.Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}I.Quad=D},395:function(at,I,w){"use strict";var b=w(8630),D=w(6710);class M extends D.Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new b.Buffer(this.vertices),this.uvBuffer=new b.Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(C,m){let p=0,v=0;return this.uvs[0]=p,this.uvs[1]=v,this.uvs[2]=p+m.width/C.width,this.uvs[3]=v,this.uvs[4]=p+m.width/C.width,this.uvs[5]=v+m.height/C.height,this.uvs[6]=p,this.uvs[7]=v+m.height/C.height,p=m.x,v=m.y,this.vertices[0]=p,this.vertices[1]=v,this.vertices[2]=p+m.width,this.vertices[3]=v,this.vertices[4]=p+m.width,this.vertices[5]=v+m.height,this.vertices[6]=p,this.vertices[7]=v+m.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}I.QuadUv=M},622:function(at,I,w){"use strict";var b=w(6967),D=w(8865),M=w(1524);class O{constructor(m){this.renderer=m}init(m){this.screen=new D.Rectangle(0,0,m.width,m.height),this.element=m.view||M.settings.ADAPTER.createCanvas(),this.resolution=m.resolution||M.settings.RESOLUTION,this.autoDensity=!!m.autoDensity}resizeView(m,p){this.element.width=Math.round(m*this.resolution),this.element.height=Math.round(p*this.resolution);const v=this.element.width/this.resolution,y=this.element.height/this.resolution;this.screen.width=v,this.screen.height=y,this.autoDensity&&(this.element.style.width=`${v}px`,this.element.style.height=`${y}px`),this.renderer.emit("resize",v,y),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(m){var p;m&&((p=this.element.parentNode)==null||p.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}O.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},O.extension={type:[b.ExtensionType.RendererSystem,b.ExtensionType.CanvasRendererSystem],name:"_view"},b.extensions.add(O),I.ViewSystem=O},7568:function(at,I,w){"use strict";var b=w(8405);class D{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(O){return this.minX>this.maxX||this.minY>this.maxY?b.Rectangle.EMPTY:(O=O||new b.Rectangle(0,0,1,1),O.x=this.minX,O.y=this.minY,O.width=this.maxX-this.minX,O.height=this.maxY-this.minY,O)}addPoint(O){this.minX=Math.min(this.minX,O.x),this.maxX=Math.max(this.maxX,O.x),this.minY=Math.min(this.minY,O.y),this.maxY=Math.max(this.maxY,O.y)}addPointMatrix(O,C){const{a:m,b:p,c:v,d:y,tx:T,ty:_}=O,A=m*C.x+v*C.y+T,P=p*C.x+y*C.y+_;this.minX=Math.min(this.minX,A),this.maxX=Math.max(this.maxX,A),this.minY=Math.min(this.minY,P),this.maxY=Math.max(this.maxY,P)}addQuad(O){let C=this.minX,m=this.minY,p=this.maxX,v=this.maxY,y=O[0],T=O[1];C=y<C?y:C,m=T<m?T:m,p=y>p?y:p,v=T>v?T:v,y=O[2],T=O[3],C=y<C?y:C,m=T<m?T:m,p=y>p?y:p,v=T>v?T:v,y=O[4],T=O[5],C=y<C?y:C,m=T<m?T:m,p=y>p?y:p,v=T>v?T:v,y=O[6],T=O[7],C=y<C?y:C,m=T<m?T:m,p=y>p?y:p,v=T>v?T:v,this.minX=C,this.minY=m,this.maxX=p,this.maxY=v}addFrame(O,C,m,p,v){this.addFrameMatrix(O.worldTransform,C,m,p,v)}addFrameMatrix(O,C,m,p,v){const y=O.a,T=O.b,_=O.c,A=O.d,P=O.tx,x=O.ty;let B=this.minX,G=this.minY,k=this.maxX,X=this.maxY,Y=y*C+_*m+P,j=T*C+A*m+x;B=Y<B?Y:B,G=j<G?j:G,k=Y>k?Y:k,X=j>X?j:X,Y=y*p+_*m+P,j=T*p+A*m+x,B=Y<B?Y:B,G=j<G?j:G,k=Y>k?Y:k,X=j>X?j:X,Y=y*C+_*v+P,j=T*C+A*v+x,B=Y<B?Y:B,G=j<G?j:G,k=Y>k?Y:k,X=j>X?j:X,Y=y*p+_*v+P,j=T*p+A*v+x,B=Y<B?Y:B,G=j<G?j:G,k=Y>k?Y:k,X=j>X?j:X,this.minX=B,this.minY=G,this.maxX=k,this.maxY=X}addVertexData(O,C,m){let p=this.minX,v=this.minY,y=this.maxX,T=this.maxY;for(let _=C;_<m;_+=2){const A=O[_],P=O[_+1];p=A<p?A:p,v=P<v?P:v,y=A>y?A:y,T=P>T?P:T}this.minX=p,this.minY=v,this.maxX=y,this.maxY=T}addVertices(O,C,m,p){this.addVerticesMatrix(O.worldTransform,C,m,p)}addVerticesMatrix(O,C,m,p,v=0,y=v){const T=O.a,_=O.b,A=O.c,P=O.d,x=O.tx,B=O.ty;let G=this.minX,k=this.minY,X=this.maxX,Y=this.maxY;for(let j=m;j<p;j+=2){const st=C[j],tt=C[j+1],rt=T*st+A*tt+x,ct=P*tt+_*st+B;G=Math.min(G,rt-v),X=Math.max(X,rt+v),k=Math.min(k,ct-y),Y=Math.max(Y,ct+y)}this.minX=G,this.minY=k,this.maxX=X,this.maxY=Y}addBounds(O){const C=this.minX,m=this.minY,p=this.maxX,v=this.maxY;this.minX=O.minX<C?O.minX:C,this.minY=O.minY<m?O.minY:m,this.maxX=O.maxX>p?O.maxX:p,this.maxY=O.maxY>v?O.maxY:v}addBoundsMask(O,C){const m=O.minX>C.minX?O.minX:C.minX,p=O.minY>C.minY?O.minY:C.minY,v=O.maxX<C.maxX?O.maxX:C.maxX,y=O.maxY<C.maxY?O.maxY:C.maxY;if(m<=v&&p<=y){const T=this.minX,_=this.minY,A=this.maxX,P=this.maxY;this.minX=m<T?m:T,this.minY=p<_?p:_,this.maxX=v>A?v:A,this.maxY=y>P?y:P}}addBoundsMatrix(O,C){this.addFrameMatrix(C,O.minX,O.minY,O.maxX,O.maxY)}addBoundsArea(O,C){const m=O.minX>C.x?O.minX:C.x,p=O.minY>C.y?O.minY:C.y,v=O.maxX<C.x+C.width?O.maxX:C.x+C.width,y=O.maxY<C.y+C.height?O.maxY:C.y+C.height;if(m<=v&&p<=y){const T=this.minX,_=this.minY,A=this.maxX,P=this.maxY;this.minX=m<T?m:T,this.minY=p<_?p:_,this.maxX=v>A?v:A,this.maxY=y>P?y:P}}pad(O=0,C=O){this.isEmpty()||(this.minX-=O,this.maxX+=O,this.minY-=C,this.maxY+=C)}addFramePad(O,C,m,p,v,y){O-=v,C-=y,m+=v,p+=y,this.minX=this.minX<O?this.minX:O,this.maxX=this.maxX>m?this.maxX:m,this.minY=this.minY<C?this.minY:C,this.maxY=this.maxY>p?this.maxY:p}}I.Bounds=D},8430:function(at,I,w){"use strict";var b=w(8405),D=w(794);const M=new b.Matrix;function O(p,v){return p.zIndex===v.zIndex?p._lastSortedIndex-v._lastSortedIndex:p.zIndex-v.zIndex}const C=class _p extends D.DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=_p.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(v){}addChild(...v){if(v.length>1)for(let y=0;y<v.length;y++)this.addChild(v[y]);else{const y=v[0];y.parent&&y.parent.removeChild(y),y.parent=this,this.sortDirty=!0,y.transform._parentID=-1,this.children.push(y),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",y,this,this.children.length-1),y.emit("added",this)}return v[0]}addChildAt(v,y){if(y<0||y>this.children.length)throw new Error(`${v}addChildAt: The index ${y} supplied is out of bounds ${this.children.length}`);return v.parent&&v.parent.removeChild(v),v.parent=this,this.sortDirty=!0,v.transform._parentID=-1,this.children.splice(y,0,v),this._boundsID++,this.onChildrenChange(y),v.emit("added",this),this.emit("childAdded",v,this,y),v}swapChildren(v,y){if(v===y)return;const T=this.getChildIndex(v),_=this.getChildIndex(y);this.children[T]=y,this.children[_]=v,this.onChildrenChange(T<_?T:_)}getChildIndex(v){const y=this.children.indexOf(v);if(y===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return y}setChildIndex(v,y){if(y<0||y>=this.children.length)throw new Error(`The index ${y} supplied is out of bounds ${this.children.length}`);const T=this.getChildIndex(v);b.utils.removeItems(this.children,T,1),this.children.splice(y,0,v),this.onChildrenChange(y)}getChildAt(v){if(v<0||v>=this.children.length)throw new Error(`getChildAt: Index (${v}) does not exist.`);return this.children[v]}removeChild(...v){if(v.length>1)for(let y=0;y<v.length;y++)this.removeChild(v[y]);else{const y=v[0],T=this.children.indexOf(y);if(T===-1)return null;y.parent=null,y.transform._parentID=-1,b.utils.removeItems(this.children,T,1),this._boundsID++,this.onChildrenChange(T),y.emit("removed",this),this.emit("childRemoved",y,this,T)}return v[0]}removeChildAt(v){const y=this.getChildAt(v);return y.parent=null,y.transform._parentID=-1,b.utils.removeItems(this.children,v,1),this._boundsID++,this.onChildrenChange(v),y.emit("removed",this),this.emit("childRemoved",y,this,v),y}removeChildren(v=0,y=this.children.length){const T=v,_=y,A=_-T;let P;if(A>0&&A<=_){P=this.children.splice(T,A);for(let x=0;x<P.length;++x)P[x].parent=null,P[x].transform&&(P[x].transform._parentID=-1);this._boundsID++,this.onChildrenChange(v);for(let x=0;x<P.length;++x)P[x].emit("removed",this),this.emit("childRemoved",P[x],this,x);return P}else if(A===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let v=!1;for(let y=0,T=this.children.length;y<T;++y){const _=this.children[y];_._lastSortedIndex=y,!v&&_.zIndex!==0&&(v=!0)}v&&this.children.length>1&&this.children.sort(O),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let v=0,y=this.children.length;v<y;++v){const T=this.children[v];T.visible&&T.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let v=0;v<this.children.length;v++){const y=this.children[v];if(!(!y.visible||!y.renderable))if(y.calculateBounds(),y._mask){const T=y._mask.isMaskData?y._mask.maskObject:y._mask;T?(T.calculateBounds(),this._bounds.addBoundsMask(y._bounds,T._bounds)):this._bounds.addBounds(y._bounds)}else y.filterArea?this._bounds.addBoundsArea(y._bounds,y.filterArea):this._bounds.addBounds(y._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(v,y=!1){const T=super.getLocalBounds(v);if(!y)for(let _=0,A=this.children.length;_<A;++_){const P=this.children[_];P.visible&&P.updateTransform()}return T}_calculateBounds(){}_renderWithCulling(v){const y=v.renderTexture.sourceFrame;if(!(y.width>0&&y.height>0))return;let T,_;this.cullArea?(T=this.cullArea,_=this.worldTransform):this._render!==_p.prototype._render&&(T=this.getBounds(!0));const A=v.projection.transform;if(A&&(_?(_=M.copyFrom(_),_.prepend(A)):_=A),T&&y.intersects(T,_))this._render(v);else if(this.cullArea)return;for(let P=0,x=this.children.length;P<x;++P){const B=this.children[P],G=B.cullable;B.cullable=G||!this.cullArea,B.render(v),B.cullable=G}}render(v){var y;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(y=this.filters)!=null&&y.length)this.renderAdvanced(v);else if(this.cullable)this._renderWithCulling(v);else{this._render(v);for(let T=0,_=this.children.length;T<_;++T)this.children[T].render(v)}}renderAdvanced(v){var A,P,x;const y=this.filters,T=this._mask;if(y){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let B=0;B<y.length;B++)y[B].enabled&&this._enabledFilters.push(y[B])}const _=y&&((A=this._enabledFilters)==null?void 0:A.length)||T&&(!T.isMaskData||T.enabled&&(T.autoDetect||T.type!==b.MASK_TYPES.NONE));if(_&&v.batch.flush(),y&&((P=this._enabledFilters)!=null&&P.length)&&v.filter.push(this,this._enabledFilters),T&&v.mask.push(this,this._mask),this.cullable)this._renderWithCulling(v);else{this._render(v);for(let B=0,G=this.children.length;B<G;++B)this.children[B].render(v)}_&&v.batch.flush(),T&&v.mask.pop(this),y&&((x=this._enabledFilters)!=null&&x.length)&&v.filter.pop()}_render(v){}destroy(v){super.destroy(),this.sortDirty=!1;const y=typeof v=="boolean"?v:v==null?void 0:v.children,T=this.removeChildren(0,this.children.length);if(y)for(let _=0;_<T.length;++_)T[_].destroy(v)}get width(){return this.scale.x*this.getLocalBounds().width}set width(v){const y=this.getLocalBounds().width;y!==0?this.scale.x=v/y:this.scale.x=1,this._width=v}get height(){return this.scale.y*this.getLocalBounds().height}set height(v){const y=this.getLocalBounds().height;y!==0?this.scale.y=v/y:this.scale.y=1,this._height=v}};C.defaultSortableChildren=!1;let m=C;m.prototype.containerUpdateTransform=m.prototype.updateTransform,I.Container=m},794:function(at,I,w){"use strict";var b=w(8405),D=w(7568);class M extends b.utils.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new b.Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new D.Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(m){const p=Object.keys(m);for(let v=0;v<p.length;++v){const y=p[v];Object.defineProperty(M.prototype,y,Object.getOwnPropertyDescriptor(m,y))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(m,p){return m||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),p||(this._boundsRect||(this._boundsRect=new b.Rectangle),p=this._boundsRect),this._bounds.getRectangle(p)}getLocalBounds(m){var A;m||(this._localBoundsRect||(this._localBoundsRect=new b.Rectangle),m=this._localBoundsRect),this._localBounds||(this._localBounds=new D.Bounds);const p=this.transform,v=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(A=v==null?void 0:v.worldAlpha)!=null?A:1,this.transform=this._tempDisplayObjectParent.transform;const y=this._bounds,T=this._boundsID;this._bounds=this._localBounds;const _=this.getBounds(!1,m);return this.parent=v,this.transform=p,this._bounds=y,this._bounds.updateID+=this._boundsID-T,_}toGlobal(m,p,v=!1){return v||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(m,p)}toLocal(m,p,v,y){return p&&(m=p.toGlobal(m,v,y)),y||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(m,v)}setParent(m){if(!m||!m.addChild)throw new Error("setParent: Argument must be a Container");return m.addChild(this),m}removeFromParent(){var m;(m=this.parent)==null||m.removeChild(this)}setTransform(m=0,p=0,v=1,y=1,T=0,_=0,A=0,P=0,x=0){return this.position.x=m,this.position.y=p,this.scale.x=v||1,this.scale.y=y||1,this.rotation=T,this.skew.x=_,this.skew.y=A,this.pivot.x=P,this.pivot.y=x,this}destroy(m){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new O),this.tempDisplayObjectParent}enableTempParent(){const m=this.parent;return this.parent=this._tempDisplayObjectParent,m}disableTempParent(m){this.parent=m}get x(){return this.position.x}set x(m){this.transform.position.x=m}get y(){return this.position.y}set y(m){this.transform.position.y=m}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(m){this.transform.position.copyFrom(m)}get scale(){return this.transform.scale}set scale(m){this.transform.scale.copyFrom(m)}get pivot(){return this.transform.pivot}set pivot(m){this.transform.pivot.copyFrom(m)}get skew(){return this.transform.skew}set skew(m){this.transform.skew.copyFrom(m)}get rotation(){return this.transform.rotation}set rotation(m){this.transform.rotation=m}get angle(){return this.transform.rotation*b.RAD_TO_DEG}set angle(m){this.transform.rotation=m*b.DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(m){this._zIndex=m,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let m=this;do{if(!m.visible)return!1;m=m.parent}while(m);return!0}get mask(){return this._mask}set mask(m){if(this._mask!==m){if(this._mask){const p=this._mask.isMaskData?this._mask.maskObject:this._mask;p&&(p._maskRefCount--,p._maskRefCount===0&&(p.renderable=!0,p.isMask=!1))}if(this._mask=m,this._mask){const p=this._mask.isMaskData?this._mask.maskObject:this._mask;p&&(p._maskRefCount===0&&(p.renderable=!1,p.isMask=!0),p._maskRefCount++)}}}}class O extends M{constructor(){super(...arguments),this.sortDirty=null}}M.prototype.displayObjectUpdateTransform=M.prototype.updateTransform,I.DisplayObject=M,I.TemporaryDisplayObject=O},4784:function(at,I,w){"use strict";w(7696);var b=w(7568),D=w(8430),M=w(794);I.Bounds=b.Bounds,I.Container=D.Container,I.DisplayObject=M.DisplayObject,I.TemporaryDisplayObject=M.TemporaryDisplayObject},7696:function(at,I,w){"use strict";var b=w(8405),D=w(8430);Object.defineProperties(b.settings,{SORTABLE_CHILDREN:{get(){return D.Container.defaultSortableChildren},set(M){b.utils.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),D.Container.defaultSortableChildren=M}}}),Object.defineProperty(I,"settings",{enumerable:!0,get:function(){return b.settings}})},3787:function(at,I,w){"use strict";var b=w(8405),D=w(6563),M=w(9888),O=w(984),C=w(4108);const m=2048,p=new b.Point,v=new b.Point;class y{constructor(_){this.dispatch=new b.utils.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=_,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(_,A){this.mappingTable[_]||(this.mappingTable[_]=[]),this.mappingTable[_].push({fn:A,priority:0}),this.mappingTable[_].sort((P,x)=>P.priority-x.priority)}dispatchEvent(_,A){_.propagationStopped=!1,_.propagationImmediatelyStopped=!1,this.propagate(_,A),this.dispatch.emit(A||_.type,_)}mapEvent(_){if(!this.rootTarget)return;const A=this.mappingTable[_.type];if(A)for(let P=0,x=A.length;P<x;P++)A[P].fn(_);else console.warn(`[EventBoundary]: Event mapping not defined for ${_.type}`)}hitTest(_,A){D.EventsTicker.pauseUpdate=!0;const P=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",x=this[P](this.rootTarget,this.rootTarget.eventMode,p.set(_,A),this.hitTestFn,this.hitPruneFn);return x&&x[0]}propagate(_,A){if(!_.target)return;const P=_.composedPath();_.eventPhase=_.CAPTURING_PHASE;for(let x=0,B=P.length-1;x<B;x++)if(_.currentTarget=P[x],this.notifyTarget(_,A),_.propagationStopped||_.propagationImmediatelyStopped)return;if(_.eventPhase=_.AT_TARGET,_.currentTarget=_.target,this.notifyTarget(_,A),!(_.propagationStopped||_.propagationImmediatelyStopped)){_.eventPhase=_.BUBBLING_PHASE;for(let x=P.length-2;x>=0;x--)if(_.currentTarget=P[x],this.notifyTarget(_,A),_.propagationStopped||_.propagationImmediatelyStopped)return}}all(_,A,P=this._allInteractiveElements){if(P.length===0)return;_.eventPhase=_.BUBBLING_PHASE;const x=Array.isArray(A)?A:[A];for(let B=P.length-1;B>=0;B--)x.forEach(G=>{_.currentTarget=P[B],this.notifyTarget(_,G)})}propagationPath(_){const A=[_];for(let P=0;P<m&&_!==this.rootTarget;P++){if(!_.parent)throw new Error("Cannot find propagation path to disconnected target");A.push(_.parent),_=_.parent}return A.reverse(),A}hitTestMoveRecursive(_,A,P,x,B,G=!1){let k=!1;if(this._interactivePrune(_))return null;if((_.eventMode==="dynamic"||A==="dynamic")&&(D.EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const j=_.children;for(let st=j.length-1;st>=0;st--){const tt=j[st],rt=this.hitTestMoveRecursive(tt,this._isInteractive(A)?A:tt.eventMode,P,x,B,G||B(_,P));if(rt){if(rt.length>0&&!rt[rt.length-1].parent)continue;const ct=_.isInteractive();(rt.length>0||ct)&&(ct&&this._allInteractiveElements.push(_),rt.push(_)),this._hitElements.length===0&&(this._hitElements=rt),k=!0}}}const X=this._isInteractive(A),Y=_.isInteractive();return X&&Y&&this._allInteractiveElements.push(_),G||this._hitElements.length>0?null:k?this._hitElements:X&&!B(_,P)&&x(_,P)?Y?[_]:[]:null}hitTestRecursive(_,A,P,x,B){if(this._interactivePrune(_)||B(_,P))return null;if((_.eventMode==="dynamic"||A==="dynamic")&&(D.EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const X=_.children;for(let Y=X.length-1;Y>=0;Y--){const j=X[Y],st=this.hitTestRecursive(j,this._isInteractive(A)?A:j.eventMode,P,x,B);if(st){if(st.length>0&&!st[st.length-1].parent)continue;const tt=_.isInteractive();return(st.length>0||tt)&&st.push(_),st}}}const G=this._isInteractive(A),k=_.isInteractive();return G&&x(_,P)?k?[_]:[]:null}_isInteractive(_){return _==="static"||_==="dynamic"}_interactivePrune(_){return!!(!_||_.isMask||!_.visible||!_.renderable||_.eventMode==="none"||_.eventMode==="passive"&&!_.interactiveChildren||_.isMask)}hitPruneFn(_,A){var P;if(_.hitArea&&(_.worldTransform.applyInverse(A,v),!_.hitArea.contains(v.x,v.y)))return!0;if(_._mask){const x=_._mask.isMaskData?_._mask.maskObject:_._mask;if(x&&!((P=x.containsPoint)!=null&&P.call(x,A)))return!0}return!1}hitTestFn(_,A){return _.eventMode==="passive"?!1:_.hitArea?!0:_.containsPoint?_.containsPoint(A):!1}notifyTarget(_,A){var B,G;A=A!=null?A:_.type;const P=`on${A}`;(G=(B=_.currentTarget)[P])==null||G.call(B,_);const x=_.eventPhase===_.CAPTURING_PHASE||_.eventPhase===_.AT_TARGET?`${A}capture`:A;this.notifyListeners(_,x),_.eventPhase===_.AT_TARGET&&this.notifyListeners(_,A)}mapPointerDown(_){if(!(_ instanceof O.FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.createPointerEvent(_);if(this.dispatchEvent(A,"pointerdown"),A.pointerType==="touch")this.dispatchEvent(A,"touchstart");else if(A.pointerType==="mouse"||A.pointerType==="pen"){const x=A.button===2;this.dispatchEvent(A,x?"rightdown":"mousedown")}const P=this.trackingData(_.pointerId);P.pressTargetsByButton[_.button]=A.composedPath(),this.freeEvent(A)}mapPointerMove(_){var X,Y,j;if(!(_ instanceof O.FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const A=this.createPointerEvent(_);this._isPointerMoveEvent=!1;const P=A.pointerType==="mouse"||A.pointerType==="pen",x=this.trackingData(_.pointerId),B=this.findMountedTarget(x.overTargets);if(((X=x.overTargets)==null?void 0:X.length)>0&&B!==A.target){const st=_.type==="mousemove"?"mouseout":"pointerout",tt=this.createPointerEvent(_,st,B);if(this.dispatchEvent(tt,"pointerout"),P&&this.dispatchEvent(tt,"mouseout"),!A.composedPath().includes(B)){const rt=this.createPointerEvent(_,"pointerleave",B);for(rt.eventPhase=rt.AT_TARGET;rt.target&&!A.composedPath().includes(rt.target);)rt.currentTarget=rt.target,this.notifyTarget(rt),P&&this.notifyTarget(rt,"mouseleave"),rt.target=rt.target.parent;this.freeEvent(rt)}this.freeEvent(tt)}if(B!==A.target){const st=_.type==="mousemove"?"mouseover":"pointerover",tt=this.clonePointerEvent(A,st);this.dispatchEvent(tt,"pointerover"),P&&this.dispatchEvent(tt,"mouseover");let rt=B==null?void 0:B.parent;for(;rt&&rt!==this.rootTarget.parent&&rt!==A.target;)rt=rt.parent;if(!rt||rt===this.rootTarget.parent){const ct=this.clonePointerEvent(A,"pointerenter");for(ct.eventPhase=ct.AT_TARGET;ct.target&&ct.target!==B&&ct.target!==this.rootTarget.parent;)ct.currentTarget=ct.target,this.notifyTarget(ct),P&&this.notifyTarget(ct,"mouseenter"),ct.target=ct.target.parent;this.freeEvent(ct)}this.freeEvent(tt)}const G=[],k=(Y=this.enableGlobalMoveEvents)!=null?Y:!0;this.moveOnAll?G.push("pointermove"):this.dispatchEvent(A,"pointermove"),k&&G.push("globalpointermove"),A.pointerType==="touch"&&(this.moveOnAll?G.splice(1,0,"touchmove"):this.dispatchEvent(A,"touchmove"),k&&G.push("globaltouchmove")),P&&(this.moveOnAll?G.splice(1,0,"mousemove"):this.dispatchEvent(A,"mousemove"),k&&G.push("globalmousemove"),this.cursor=(j=A.target)==null?void 0:j.cursor),G.length>0&&this.all(A,G),this._allInteractiveElements.length=0,this._hitElements.length=0,x.overTargets=A.composedPath(),this.freeEvent(A)}mapPointerOver(_){var G;if(!(_ instanceof O.FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.trackingData(_.pointerId),P=this.createPointerEvent(_),x=P.pointerType==="mouse"||P.pointerType==="pen";this.dispatchEvent(P,"pointerover"),x&&this.dispatchEvent(P,"mouseover"),P.pointerType==="mouse"&&(this.cursor=(G=P.target)==null?void 0:G.cursor);const B=this.clonePointerEvent(P,"pointerenter");for(B.eventPhase=B.AT_TARGET;B.target&&B.target!==this.rootTarget.parent;)B.currentTarget=B.target,this.notifyTarget(B),x&&this.notifyTarget(B,"mouseenter"),B.target=B.target.parent;A.overTargets=P.composedPath(),this.freeEvent(P),this.freeEvent(B)}mapPointerOut(_){if(!(_ instanceof O.FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.trackingData(_.pointerId);if(A.overTargets){const P=_.pointerType==="mouse"||_.pointerType==="pen",x=this.findMountedTarget(A.overTargets),B=this.createPointerEvent(_,"pointerout",x);this.dispatchEvent(B),P&&this.dispatchEvent(B,"mouseout");const G=this.createPointerEvent(_,"pointerleave",x);for(G.eventPhase=G.AT_TARGET;G.target&&G.target!==this.rootTarget.parent;)G.currentTarget=G.target,this.notifyTarget(G),P&&this.notifyTarget(G,"mouseleave"),G.target=G.target.parent;A.overTargets=null,this.freeEvent(B),this.freeEvent(G)}this.cursor=null}mapPointerUp(_){if(!(_ instanceof O.FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=performance.now(),P=this.createPointerEvent(_);if(this.dispatchEvent(P,"pointerup"),P.pointerType==="touch")this.dispatchEvent(P,"touchend");else if(P.pointerType==="mouse"||P.pointerType==="pen"){const k=P.button===2;this.dispatchEvent(P,k?"rightup":"mouseup")}const x=this.trackingData(_.pointerId),B=this.findMountedTarget(x.pressTargetsByButton[_.button]);let G=B;if(B&&!P.composedPath().includes(B)){let k=B;for(;k&&!P.composedPath().includes(k);){if(P.currentTarget=k,this.notifyTarget(P,"pointerupoutside"),P.pointerType==="touch")this.notifyTarget(P,"touchendoutside");else if(P.pointerType==="mouse"||P.pointerType==="pen"){const X=P.button===2;this.notifyTarget(P,X?"rightupoutside":"mouseupoutside")}k=k.parent}delete x.pressTargetsByButton[_.button],G=k}if(G){const k=this.clonePointerEvent(P,"click");k.target=G,k.path=null,x.clicksByButton[_.button]||(x.clicksByButton[_.button]={clickCount:0,target:k.target,timeStamp:A});const X=x.clicksByButton[_.button];if(X.target===k.target&&A-X.timeStamp<200?++X.clickCount:X.clickCount=1,X.target=k.target,X.timeStamp=A,k.detail=X.clickCount,k.pointerType==="mouse"){const Y=k.button===2;this.dispatchEvent(k,Y?"rightclick":"click")}else k.pointerType==="touch"&&this.dispatchEvent(k,"tap");this.dispatchEvent(k,"pointertap"),this.freeEvent(k)}this.freeEvent(P)}mapPointerUpOutside(_){if(!(_ instanceof O.FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.trackingData(_.pointerId),P=this.findMountedTarget(A.pressTargetsByButton[_.button]),x=this.createPointerEvent(_);if(P){let B=P;for(;B;)x.currentTarget=B,this.notifyTarget(x,"pointerupoutside"),x.pointerType==="touch"?this.notifyTarget(x,"touchendoutside"):(x.pointerType==="mouse"||x.pointerType==="pen")&&this.notifyTarget(x,x.button===2?"rightupoutside":"mouseupoutside"),B=B.parent;delete A.pressTargetsByButton[_.button]}this.freeEvent(x)}mapWheel(_){if(!(_ instanceof C.FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const A=this.createWheelEvent(_);this.dispatchEvent(A),this.freeEvent(A)}findMountedTarget(_){if(!_)return null;let A=_[0];for(let P=1;P<_.length&&_[P].parent===A;P++)A=_[P];return A}createPointerEvent(_,A,P){var B;const x=this.allocateEvent(O.FederatedPointerEvent);return this.copyPointerData(_,x),this.copyMouseData(_,x),this.copyData(_,x),x.nativeEvent=_.nativeEvent,x.originalEvent=_,x.target=(B=P!=null?P:this.hitTest(x.global.x,x.global.y))!=null?B:this._hitElements[0],typeof A=="string"&&(x.type=A),x}createWheelEvent(_){const A=this.allocateEvent(C.FederatedWheelEvent);return this.copyWheelData(_,A),this.copyMouseData(_,A),this.copyData(_,A),A.nativeEvent=_.nativeEvent,A.originalEvent=_,A.target=this.hitTest(A.global.x,A.global.y),A}clonePointerEvent(_,A){const P=this.allocateEvent(O.FederatedPointerEvent);return P.nativeEvent=_.nativeEvent,P.originalEvent=_.originalEvent,this.copyPointerData(_,P),this.copyMouseData(_,P),this.copyData(_,P),P.target=_.target,P.path=_.composedPath().slice(),P.type=A!=null?A:P.type,P}copyWheelData(_,A){A.deltaMode=_.deltaMode,A.deltaX=_.deltaX,A.deltaY=_.deltaY,A.deltaZ=_.deltaZ}copyPointerData(_,A){_ instanceof O.FederatedPointerEvent&&A instanceof O.FederatedPointerEvent&&(A.pointerId=_.pointerId,A.width=_.width,A.height=_.height,A.isPrimary=_.isPrimary,A.pointerType=_.pointerType,A.pressure=_.pressure,A.tangentialPressure=_.tangentialPressure,A.tiltX=_.tiltX,A.tiltY=_.tiltY,A.twist=_.twist)}copyMouseData(_,A){_ instanceof M.FederatedMouseEvent&&A instanceof M.FederatedMouseEvent&&(A.altKey=_.altKey,A.button=_.button,A.buttons=_.buttons,A.client.copyFrom(_.client),A.ctrlKey=_.ctrlKey,A.metaKey=_.metaKey,A.movement.copyFrom(_.movement),A.screen.copyFrom(_.screen),A.shiftKey=_.shiftKey,A.global.copyFrom(_.global))}copyData(_,A){A.isTrusted=_.isTrusted,A.srcElement=_.srcElement,A.timeStamp=performance.now(),A.type=_.type,A.detail=_.detail,A.view=_.view,A.which=_.which,A.layer.copyFrom(_.layer),A.page.copyFrom(_.page)}trackingData(_){return this.mappingState.trackingData[_]||(this.mappingState.trackingData[_]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[_]}allocateEvent(_){this.eventPool.has(_)||this.eventPool.set(_,[]);const A=this.eventPool.get(_).pop()||new _(this);return A.eventPhase=A.NONE,A.currentTarget=null,A.path=null,A.target=null,A}freeEvent(_){if(_.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const A=_.constructor;this.eventPool.has(A)||this.eventPool.set(A,[]),this.eventPool.get(A).push(_)}notifyListeners(_,A){const P=_.currentTarget._events[A];if(P&&_.currentTarget.isInteractive())if("fn"in P)P.once&&_.currentTarget.removeListener(A,P.fn,void 0,!0),P.fn.call(P.context,_);else for(let x=0,B=P.length;x<B&&!_.propagationImmediatelyStopped;x++)P[x].once&&_.currentTarget.removeListener(A,P[x].fn,void 0,!0),P[x].fn.call(P[x].context,_)}}I.EventBoundary=y},7251:function(at,I,w){"use strict";var b=w(8405),D=w(3787),M=w(6563),O=w(984),C=w(4108);const m=1,p={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},v=class xp{constructor(_){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=_,this.rootBoundary=new D.EventBoundary(null),M.EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new O.FederatedPointerEvent(null),this.rootWheelEvent=new C.FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(He({},xp.defaultEventFeatures),{set:(A,P,x)=>(P==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=x),A[P]=x,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(_){var x,B;const{view:A,resolution:P}=this.renderer;this.setTargetElement(A),this.resolution=P,xp._defaultEventMode=(x=_.eventMode)!=null?x:"auto",Object.assign(this.features,(B=_.eventFeatures)!=null?B:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(_){this.resolution=_}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(_){_=_||"default";let A=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(A=!1),this.currentCursor===_)return;this.currentCursor=_;const P=this.cursorStyles[_];if(P)switch(typeof P){case"string":A&&(this.domElement.style.cursor=P);break;case"function":P(_);break;case"object":A&&Object.assign(this.domElement.style,P);break}else A&&typeof _=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_)&&(this.domElement.style.cursor=_)}get pointer(){return this.rootPointerEvent}onPointerDown(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const A=this.normalizeToPointerData(_);this.autoPreventDefault&&A[0].isNormalized&&(_.cancelable||!("cancelable"in _))&&_.preventDefault();for(let P=0,x=A.length;P<x;P++){const B=A[P],G=this.bootstrapEvent(this.rootPointerEvent,B);this.rootBoundary.mapEvent(G)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(_){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,M.EventsTicker.pointerMoved();const A=this.normalizeToPointerData(_);for(let P=0,x=A.length;P<x;P++){const B=this.bootstrapEvent(this.rootPointerEvent,A[P]);this.rootBoundary.mapEvent(B)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let A=_.target;_.composedPath&&_.composedPath().length>0&&(A=_.composedPath()[0]);const P=A!==this.domElement?"outside":"",x=this.normalizeToPointerData(_);for(let B=0,G=x.length;B<G;B++){const k=this.bootstrapEvent(this.rootPointerEvent,x[B]);k.type+=P,this.rootBoundary.mapEvent(k)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const A=this.normalizeToPointerData(_);for(let P=0,x=A.length;P<x;P++){const B=this.bootstrapEvent(this.rootPointerEvent,A[P]);this.rootBoundary.mapEvent(B)}this.setCursor(this.rootBoundary.cursor)}onWheel(_){if(!this.features.wheel)return;const A=this.normalizeWheelEvent(_);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(A)}setTargetElement(_){this.removeEvents(),this.domElement=_,M.EventsTicker.domElement=_,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;M.EventsTicker.addTickerListener();const _=this.domElement.style;_&&(globalThis.navigator.msPointerEnabled?(_.msContentZooming="none",_.msTouchAction="none"):this.supportsPointerEvents&&(_.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;M.EventsTicker.removeTickerListener();const _=this.domElement.style;globalThis.navigator.msPointerEnabled?(_.msContentZooming="",_.msTouchAction=""):this.supportsPointerEvents&&(_.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(_,A,P){const x=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},B=1/this.resolution;_.x=(A-x.left)*(this.domElement.width/x.width)*B,_.y=(P-x.top)*(this.domElement.height/x.height)*B}normalizeToPointerData(_){const A=[];if(this.supportsTouchEvents&&_ instanceof TouchEvent)for(let P=0,x=_.changedTouches.length;P<x;P++){const B=_.changedTouches[P];typeof B.button>"u"&&(B.button=0),typeof B.buttons>"u"&&(B.buttons=1),typeof B.isPrimary>"u"&&(B.isPrimary=_.touches.length===1&&_.type==="touchstart"),typeof B.width>"u"&&(B.width=B.radiusX||1),typeof B.height>"u"&&(B.height=B.radiusY||1),typeof B.tiltX>"u"&&(B.tiltX=0),typeof B.tiltY>"u"&&(B.tiltY=0),typeof B.pointerType>"u"&&(B.pointerType="touch"),typeof B.pointerId>"u"&&(B.pointerId=B.identifier||0),typeof B.pressure>"u"&&(B.pressure=B.force||.5),typeof B.twist>"u"&&(B.twist=0),typeof B.tangentialPressure>"u"&&(B.tangentialPressure=0),typeof B.layerX>"u"&&(B.layerX=B.offsetX=B.clientX),typeof B.layerY>"u"&&(B.layerY=B.offsetY=B.clientY),B.isNormalized=!0,B.type=_.type,A.push(B)}else if(!globalThis.MouseEvent||_ instanceof MouseEvent&&(!this.supportsPointerEvents||!(_ instanceof globalThis.PointerEvent))){const P=_;typeof P.isPrimary>"u"&&(P.isPrimary=!0),typeof P.width>"u"&&(P.width=1),typeof P.height>"u"&&(P.height=1),typeof P.tiltX>"u"&&(P.tiltX=0),typeof P.tiltY>"u"&&(P.tiltY=0),typeof P.pointerType>"u"&&(P.pointerType="mouse"),typeof P.pointerId>"u"&&(P.pointerId=m),typeof P.pressure>"u"&&(P.pressure=.5),typeof P.twist>"u"&&(P.twist=0),typeof P.tangentialPressure>"u"&&(P.tangentialPressure=0),P.isNormalized=!0,A.push(P)}else A.push(_);return A}normalizeWheelEvent(_){const A=this.rootWheelEvent;return this.transferMouseData(A,_),A.deltaX=_.deltaX,A.deltaY=_.deltaY,A.deltaZ=_.deltaZ,A.deltaMode=_.deltaMode,this.mapPositionToPoint(A.screen,_.clientX,_.clientY),A.global.copyFrom(A.screen),A.offset.copyFrom(A.screen),A.nativeEvent=_,A.type=_.type,A}bootstrapEvent(_,A){return _.originalEvent=null,_.nativeEvent=A,_.pointerId=A.pointerId,_.width=A.width,_.height=A.height,_.isPrimary=A.isPrimary,_.pointerType=A.pointerType,_.pressure=A.pressure,_.tangentialPressure=A.tangentialPressure,_.tiltX=A.tiltX,_.tiltY=A.tiltY,_.twist=A.twist,this.transferMouseData(_,A),this.mapPositionToPoint(_.screen,A.clientX,A.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.isTrusted=A.isTrusted,_.type==="pointerleave"&&(_.type="pointerout"),_.type.startsWith("mouse")&&(_.type=_.type.replace("mouse","pointer")),_.type.startsWith("touch")&&(_.type=p[_.type]||_.type),_}transferMouseData(_,A){_.isTrusted=A.isTrusted,_.srcElement=A.srcElement,_.timeStamp=performance.now(),_.type=A.type,_.altKey=A.altKey,_.button=A.button,_.buttons=A.buttons,_.client.x=A.clientX,_.client.y=A.clientY,_.ctrlKey=A.ctrlKey,_.metaKey=A.metaKey,_.movement.x=A.movementX,_.movement.y=A.movementY,_.page.x=A.pageX,_.page.y=A.pageY,_.relatedTarget=null,_.shiftKey=A.shiftKey}};v.extension={name:"events",type:[b.ExtensionType.RendererSystem,b.ExtensionType.CanvasRendererSystem]},v.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let y=v;b.extensions.add(y),I.EventSystem=y},6563:function(at,I,w){"use strict";var b=w(8405);class D{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(C){this.removeTickerListener(),this.events=C,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(C){this._pauseUpdate=C}addTickerListener(){this.tickerAdded||!this.domElement||(b.Ticker.system.add(this.tickerUpdate,this,b.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(b.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const C=this.events.rootPointerEvent;this.events.supportsTouchEvents&&C.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:C.clientX,clientY:C.clientY}))}tickerUpdate(C){this._deltaTime+=C,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const M=new D;I.EventsTicker=M},9727:function(at,I,w){"use strict";var b=w(8405);class D{constructor(O){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=D.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new b.Point,this.page=new b.Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=O}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(O,C,m){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(O,C,m,p,v){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}I.FederatedEvent=D},1606:function(){"use strict"},1785:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(7251),O=w(9727);function C(p){return p==="dynamic"||p==="static"}const m={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var p;return(p=this._internalInteractive)!=null?p:C(M.EventSystem.defaultEventMode)},set interactive(p){b.utils.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=p,this.eventMode=p?"static":"auto"},_internalEventMode:void 0,get eventMode(){var p;return(p=this._internalEventMode)!=null?p:M.EventSystem.defaultEventMode},set eventMode(p){this._internalInteractive=C(p),this._internalEventMode=p},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(p,v,y){const T=typeof y=="boolean"&&y||typeof y=="object"&&y.capture,_=typeof v=="function"?void 0:v;p=T?`${p}capture`:p,v=typeof v=="function"?v:v.handleEvent,this.on(p,v,_)},removeEventListener(p,v,y){const T=typeof y=="boolean"&&y||typeof y=="object"&&y.capture,_=typeof v=="function"?void 0:v;p=T?`${p}capture`:p,v=typeof v=="function"?v:v.handleEvent,this.off(p,v,_)},dispatchEvent(p){if(!(p instanceof O.FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return p.defaultPrevented=!1,p.path=null,p.target=this,p.manager.dispatchEvent(p),!p.defaultPrevented}};D.DisplayObject.mixin(m),I.FederatedDisplayObject=m},9888:function(at,I,w){"use strict";var b=w(8405),D=w(9727);class M extends D.FederatedEvent{constructor(){super(...arguments),this.client=new b.Point,this.movement=new b.Point,this.offset=new b.Point,this.global=new b.Point,this.screen=new b.Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(C,m,p){return C.worldTransform.applyInverse(p||this.global,m)}getModifierState(C){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(C)}initMouseEvent(C,m,p,v,y,T,_,A,P,x,B,G,k,X,Y){throw new Error("Method not implemented.")}}I.FederatedMouseEvent=M},984:function(at,I,w){"use strict";var b=w(9888);class D extends b.FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}I.FederatedPointerEvent=D},4108:function(at,I,w){"use strict";var b=w(9888);class D extends b.FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}D.DOM_DELTA_PIXEL=0,D.DOM_DELTA_LINE=1,D.DOM_DELTA_PAGE=2,I.FederatedWheelEvent=D},952:function(at,I,w){"use strict";var b=w(3787),D=w(7251),M=w(9727);w(1606);var O=w(1785),C=w(9888),m=w(984),p=w(4108);I.EventBoundary=b.EventBoundary,I.EventSystem=D.EventSystem,I.FederatedEvent=M.FederatedEvent,I.FederatedDisplayObject=O.FederatedDisplayObject,I.FederatedMouseEvent=C.FederatedMouseEvent,I.FederatedPointerEvent=m.FederatedPointerEvent,I.FederatedWheelEvent=p.FederatedWheelEvent},6967:function(at,I){"use strict";var w=(O=>(O.Renderer="renderer",O.Application="application",O.RendererSystem="renderer-webgl-system",O.RendererPlugin="renderer-webgl-plugin",O.CanvasRendererSystem="renderer-canvas-system",O.CanvasRendererPlugin="renderer-canvas-plugin",O.Asset="asset",O.LoadParser="load-parser",O.ResolveParser="resolve-parser",O.CacheParser="cache-parser",O.DetectionParser="detection-parser",O))(w||{});const b=O=>{if(typeof O=="function"||typeof O=="object"&&O.extension){if(!O.extension)throw new Error("Extension class must have an extension object");O=gi(He({},typeof O.extension!="object"?{type:O.extension}:O.extension),{ref:O})}if(typeof O=="object")O=He({},O);else throw new Error("Invalid extension type");return typeof O.type=="string"&&(O.type=[O.type]),O},D=(O,C)=>{var m;return(m=b(O).priority)!=null?m:C},M={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...O){return O.map(b).forEach(C=>{C.type.forEach(m=>{var p,v;return(v=(p=this._removeHandlers)[m])==null?void 0:v.call(p,C)})}),this},add(...O){return O.map(b).forEach(C=>{C.type.forEach(m=>{const p=this._addHandlers,v=this._queue;p[m]?p[m](C):(v[m]=v[m]||[],v[m].push(C))})}),this},handle(O,C,m){const p=this._addHandlers,v=this._removeHandlers;if(p[O]||v[O])throw new Error(`Extension type ${O} already has a handler`);p[O]=C,v[O]=m;const y=this._queue;return y[O]&&(y[O].forEach(T=>C(T)),delete y[O]),this},handleByMap(O,C){return this.handle(O,m=>{C[m.name]=m.ref},m=>{delete C[m.name]})},handleByList(O,C,m=-1){return this.handle(O,p=>{C.includes(p.ref)||(C.push(p.ref),C.sort((v,y)=>D(y,m)-D(v,m)))},p=>{const v=C.indexOf(p.ref);v!==-1&&C.splice(v,1)})}};I.ExtensionType=w,I.extensions=M},3529:function(at,I,w){"use strict";var b=w(8405);const D=new b.Rectangle,M=4,O=class Cc{constructor(p){this.renderer=p,this._rendererPremultipliedAlpha=!1}contextChange(){var v;const p=(v=this.renderer)==null?void 0:v.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(p&&p.alpha&&p.premultipliedAlpha)}image(p,v,y,T){return he(this,null,function*(){const _=new Image;return _.src=yield this.base64(p,v,y,T),_})}base64(p,v,y,T){return he(this,null,function*(){const _=this.canvas(p,T);if(_.toBlob!==void 0)return new Promise((A,P)=>{_.toBlob(x=>{if(!x){P(new Error("ICanvas.toBlob failed!"));return}const B=new FileReader;B.onload=()=>A(B.result),B.onerror=P,B.readAsDataURL(x)},v,y)});if(_.toDataURL!==void 0)return _.toDataURL(v,y);if(_.convertToBlob!==void 0){const A=yield _.convertToBlob({type:v,quality:y});return new Promise((P,x)=>{const B=new FileReader;B.onload=()=>P(B.result),B.onerror=x,B.readAsDataURL(A)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})}canvas(p,v){const{pixels:y,width:T,height:_,flipY:A,premultipliedAlpha:P}=this._rawPixels(p,v);A&&Cc._flipY(y,T,_),P&&Cc._unpremultiplyAlpha(y);const x=new b.utils.CanvasRenderTarget(T,_,1),B=new ImageData(new Uint8ClampedArray(y.buffer),T,_);return x.context.putImageData(B,0,0),x.canvas}pixels(p,v){const{pixels:y,width:T,height:_,flipY:A,premultipliedAlpha:P}=this._rawPixels(p,v);return A&&Cc._flipY(y,T,_),P&&Cc._unpremultiplyAlpha(y),y}_rawPixels(p,v){const y=this.renderer;if(!y)throw new Error("The Extract has already been destroyed");let T,_=!1,A=!1,P,x=!1;p&&(p instanceof b.RenderTexture?P=p:(P=y.generateTexture(p,{region:v,resolution:y.resolution,multisample:y.multisample}),x=!0,v&&(D.width=v.width,D.height=v.height,v=D)));const B=y.gl;if(P){if(T=P.baseTexture.resolution,v=v!=null?v:P.frame,_=!1,A=P.baseTexture.alphaMode>0&&P.baseTexture.format===b.FORMATS.RGBA,!x){y.renderTexture.bind(P);const Y=P.framebuffer.glFramebuffers[y.CONTEXT_UID];Y.blitFramebuffer&&y.framebuffer.bind(Y.blitFramebuffer)}}else T=y.resolution,v||(v=D,v.width=y.width/T,v.height=y.height/T),_=!0,A=this._rendererPremultipliedAlpha,y.renderTexture.bind();const G=Math.max(Math.round(v.width*T),1),k=Math.max(Math.round(v.height*T),1),X=new Uint8Array(M*G*k);return B.readPixels(Math.round(v.x*T),Math.round(v.y*T),G,k,B.RGBA,B.UNSIGNED_BYTE,X),x&&(P==null||P.destroy(!0)),{pixels:X,width:G,height:k,flipY:_,premultipliedAlpha:A}}destroy(){this.renderer=null}static _flipY(p,v,y){const T=v<<2,_=y>>1,A=new Uint8Array(T);for(let P=0;P<_;P++){const x=P*T,B=(y-P-1)*T;A.set(p.subarray(x,x+T)),p.copyWithin(x,B,B+T),p.set(A,B)}}static _unpremultiplyAlpha(p){p instanceof Uint8ClampedArray&&(p=new Uint8Array(p.buffer));const v=p.length;for(let y=0;y<v;y+=4){const T=p[y+3];if(T!==0){const _=255.001/T;p[y]=p[y]*_+.5,p[y+1]=p[y+1]*_+.5,p[y+2]=p[y+2]*_+.5}}}};O.extension={name:"extract",type:b.ExtensionType.RendererSystem};let C=O;b.extensions.add(C),I.Extract=C},3629:function(at,I,w){"use strict";var b=w(3529);I.Extract=b.Extract},9632:function(at,I,w){"use strict";var b=w(8405),D=w(2658);class M extends b.Filter{constructor(C=1){super(b.defaultVertex,D.default,{uAlpha:1}),this.alpha=C}get alpha(){return this.uniforms.uAlpha}set alpha(C){this.uniforms.uAlpha=C}}I.AlphaFilter=M},2658:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;I.default=w},8781:function(at,I,w){"use strict";var b=w(9632);I.AlphaFilter=b.AlphaFilter},4551:function(at,I,w){"use strict";var b=w(8405),D=w(9793);class M extends b.Filter{constructor(C=8,m=4,p=b.Filter.defaultResolution,v=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new D.BlurFilterPass(!0,C,m,p,v),this.blurYFilter=new D.BlurFilterPass(!1,C,m,p,v),this.resolution=p,this.quality=m,this.blur=C,this.repeatEdgePixels=!1}apply(C,m,p,v){const y=Math.abs(this.blurXFilter.strength),T=Math.abs(this.blurYFilter.strength);if(y&&T){const _=C.getFilterTexture();this.blurXFilter.apply(C,m,_,b.CLEAR_MODES.CLEAR),this.blurYFilter.apply(C,_,p,v),C.returnFilterTexture(_)}else T?this.blurYFilter.apply(C,m,p,v):this.blurXFilter.apply(C,m,p,v)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(C){this.blurXFilter.blur=this.blurYFilter.blur=C,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(C){this.blurXFilter.quality=this.blurYFilter.quality=C}get blurX(){return this.blurXFilter.blur}set blurX(C){this.blurXFilter.blur=C,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(C){this.blurYFilter.blur=C,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(C){this.blurYFilter.blendMode=C}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(C){this._repeatEdgePixels=C,this.updatePadding()}}I.BlurFilter=M},9793:function(at,I,w){"use strict";var b=w(8405),D=w(7655),M=w(4318);class O extends b.Filter{constructor(m,p=8,v=4,y=b.Filter.defaultResolution,T=5){const _=M.generateBlurVertSource(T,m),A=D.generateBlurFragSource(T);super(_,A),this.horizontal=m,this.resolution=y,this._quality=0,this.quality=v,this.blur=p}apply(m,p,v,y){if(v?this.horizontal?this.uniforms.strength=1/v.width*(v.width/p.width):this.uniforms.strength=1/v.height*(v.height/p.height):this.horizontal?this.uniforms.strength=1/m.renderer.width*(m.renderer.width/p.width):this.uniforms.strength=1/m.renderer.height*(m.renderer.height/p.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)m.applyFilter(this,p,v,y);else{const T=m.getFilterTexture(),_=m.renderer;let A=p,P=T;this.state.blend=!1,m.applyFilter(this,A,P,b.CLEAR_MODES.CLEAR);for(let x=1;x<this.passes-1;x++){m.bindAndClear(A,b.CLEAR_MODES.BLIT),this.uniforms.uSampler=P;const B=P;P=A,A=B,_.shader.bind(this),_.geometry.draw(5)}this.state.blend=!0,m.applyFilter(this,P,v,y),m.returnFilterTexture(T)}}get blur(){return this.strength}set blur(m){this.padding=1+Math.abs(m)*2,this.strength=m}get quality(){return this._quality}set quality(m){this._quality=m,this.passes=m}}I.BlurFilterPass=O},7655:function(at,I){"use strict";const w={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},b=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function D(M){const O=w[M],C=O.length;let m=b,p="";const v="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let y;for(let T=0;T<M;T++){let _=v.replace("%index%",T.toString());y=T,T>=C&&(y=M-T-1),_=_.replace("%value%",O[y].toString()),p+=_,p+=`
`}return m=m.replace("%blur%",p),m=m.replace("%size%",M.toString()),m}I.generateBlurFragSource=D},4318:function(at,I){"use strict";const w=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function b(D,M){const O=Math.ceil(D/2);let C=w,m="",p;M?p="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":p="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let v=0;v<D;v++){let y=p.replace("%index%",v.toString());y=y.replace("%sampleIndex%",`${v-(O-1)}.0`),m+=y,m+=`
`}return C=C.replace("%blur%",m),C=C.replace("%size%",D.toString()),C}I.generateBlurVertSource=b},5719:function(at,I,w){"use strict";var b=w(4551),D=w(9793);I.BlurFilter=b.BlurFilter,I.BlurFilterPass=D.BlurFilterPass},110:function(at,I,w){"use strict";var b=w(8405),D=w(2332);class M extends b.Filter{constructor(){const C={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(b.defaultFilterVertex,D.default,C),this.alpha=1}_loadMatrix(C,m=!1){let p=C;m&&(this._multiply(p,this.uniforms.m,C),p=this._colorMatrix(p)),this.uniforms.m=p}_multiply(C,m,p){return C[0]=m[0]*p[0]+m[1]*p[5]+m[2]*p[10]+m[3]*p[15],C[1]=m[0]*p[1]+m[1]*p[6]+m[2]*p[11]+m[3]*p[16],C[2]=m[0]*p[2]+m[1]*p[7]+m[2]*p[12]+m[3]*p[17],C[3]=m[0]*p[3]+m[1]*p[8]+m[2]*p[13]+m[3]*p[18],C[4]=m[0]*p[4]+m[1]*p[9]+m[2]*p[14]+m[3]*p[19]+m[4],C[5]=m[5]*p[0]+m[6]*p[5]+m[7]*p[10]+m[8]*p[15],C[6]=m[5]*p[1]+m[6]*p[6]+m[7]*p[11]+m[8]*p[16],C[7]=m[5]*p[2]+m[6]*p[7]+m[7]*p[12]+m[8]*p[17],C[8]=m[5]*p[3]+m[6]*p[8]+m[7]*p[13]+m[8]*p[18],C[9]=m[5]*p[4]+m[6]*p[9]+m[7]*p[14]+m[8]*p[19]+m[9],C[10]=m[10]*p[0]+m[11]*p[5]+m[12]*p[10]+m[13]*p[15],C[11]=m[10]*p[1]+m[11]*p[6]+m[12]*p[11]+m[13]*p[16],C[12]=m[10]*p[2]+m[11]*p[7]+m[12]*p[12]+m[13]*p[17],C[13]=m[10]*p[3]+m[11]*p[8]+m[12]*p[13]+m[13]*p[18],C[14]=m[10]*p[4]+m[11]*p[9]+m[12]*p[14]+m[13]*p[19]+m[14],C[15]=m[15]*p[0]+m[16]*p[5]+m[17]*p[10]+m[18]*p[15],C[16]=m[15]*p[1]+m[16]*p[6]+m[17]*p[11]+m[18]*p[16],C[17]=m[15]*p[2]+m[16]*p[7]+m[17]*p[12]+m[18]*p[17],C[18]=m[15]*p[3]+m[16]*p[8]+m[17]*p[13]+m[18]*p[18],C[19]=m[15]*p[4]+m[16]*p[9]+m[17]*p[14]+m[18]*p[19]+m[19],C}_colorMatrix(C){const m=new Float32Array(C);return m[4]/=255,m[9]/=255,m[14]/=255,m[19]/=255,m}brightness(C,m){const p=[C,0,0,0,0,0,C,0,0,0,0,0,C,0,0,0,0,0,1,0];this._loadMatrix(p,m)}tint(C,m){const[p,v,y]=b.Color.shared.setValue(C).toArray(),T=[p,0,0,0,0,0,v,0,0,0,0,0,y,0,0,0,0,0,1,0];this._loadMatrix(T,m)}greyscale(C,m){const p=[C,C,C,0,0,C,C,C,0,0,C,C,C,0,0,0,0,0,1,0];this._loadMatrix(p,m)}blackAndWhite(C){const m=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(m,C)}hue(C,m){C=(C||0)/180*Math.PI;const p=Math.cos(C),v=Math.sin(C),y=Math.sqrt,T=1/3,_=y(T),A=p+(1-p)*T,P=T*(1-p)-_*v,x=T*(1-p)+_*v,B=T*(1-p)+_*v,G=p+T*(1-p),k=T*(1-p)-_*v,X=T*(1-p)-_*v,Y=T*(1-p)+_*v,j=p+T*(1-p),st=[A,P,x,0,0,B,G,k,0,0,X,Y,j,0,0,0,0,0,1,0];this._loadMatrix(st,m)}contrast(C,m){const p=(C||0)+1,v=-.5*(p-1),y=[p,0,0,0,v,0,p,0,0,v,0,0,p,0,v,0,0,0,1,0];this._loadMatrix(y,m)}saturate(C=0,m){const p=C*2/3+1,v=(p-1)*-.5,y=[p,v,v,0,0,v,p,v,0,0,v,v,p,0,0,0,0,0,1,0];this._loadMatrix(y,m)}desaturate(){this.saturate(-1)}negative(C){const m=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(m,C)}sepia(C){const m=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(m,C)}technicolor(C){const m=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(m,C)}polaroid(C){const m=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(m,C)}toBGR(C){const m=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(m,C)}kodachrome(C){const m=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(m,C)}browni(C){const m=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(m,C)}vintage(C){const m=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(m,C)}colorTone(C,m,p,v,y){C=C||.2,m=m||.15,p=p||16770432,v=v||3375104;const T=b.Color.shared,[_,A,P]=T.setValue(p).toArray(),[x,B,G]=T.setValue(v).toArray(),k=[.3,.59,.11,0,0,_,A,P,C,0,x,B,G,m,0,_-x,A-B,P-G,0,0];this._loadMatrix(k,y)}night(C,m){C=C||.1;const p=[C*-2,-C,0,0,0,-C,0,C,0,0,0,C,C*2,0,0,0,0,0,1,0];this._loadMatrix(p,m)}predator(C,m){const p=[11.224130630493164*C,-4.794486999511719*C,-2.8746118545532227*C,0*C,.40342438220977783*C,-3.6330697536468506*C,9.193157196044922*C,-2.951810836791992*C,0*C,-1.316135048866272*C,-3.2184197902679443*C,-4.2375030517578125*C,7.476448059082031*C,0*C,.8044459223747253*C,0,0,0,1,0];this._loadMatrix(p,m)}lsd(C){const m=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(m,C)}reset(){const C=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(C,!1)}get matrix(){return this.uniforms.m}set matrix(C){this.uniforms.m=C}get alpha(){return this.uniforms.uAlpha}set alpha(C){this.uniforms.uAlpha=C}}M.prototype.grayscale=M.prototype.greyscale,I.ColorMatrixFilter=M},2332:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;I.default=w},3661:function(at,I,w){"use strict";var b=w(110);I.ColorMatrixFilter=b.ColorMatrixFilter},7007:function(at,I,w){"use strict";var b=w(8405),D=w(4668),M=w(4758);class O extends b.Filter{constructor(m,p){const v=new b.Matrix;m.renderable=!1,super(M.default,D.default,{mapSampler:m._texture,filterMatrix:v,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=m,this.maskMatrix=v,p==null&&(p=20),this.scale=new b.Point(p,p)}apply(m,p,v,y){this.uniforms.filterMatrix=m.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const T=this.maskSprite.worldTransform,_=Math.sqrt(T.a*T.a+T.b*T.b),A=Math.sqrt(T.c*T.c+T.d*T.d);_!==0&&A!==0&&(this.uniforms.rotation[0]=T.a/_,this.uniforms.rotation[1]=T.b/_,this.uniforms.rotation[2]=T.c/A,this.uniforms.rotation[3]=T.d/A),m.applyFilter(this,p,v,y)}get map(){return this.uniforms.mapSampler}set map(m){this.uniforms.mapSampler=m}}I.DisplacementFilter=O},4668:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`;I.default=w},4758:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;I.default=w},64:function(at,I,w){"use strict";var b=w(7007);I.DisplacementFilter=b.DisplacementFilter},4493:function(at,I,w){"use strict";var b=w(8405),D=w(6280),M=w(5900);class O extends b.Filter{constructor(){super(M.default,D.default)}}I.FXAAFilter=O},6280:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;I.default=w},5900:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;I.default=w},93:function(at,I,w){"use strict";var b=w(4493);I.FXAAFilter=b.FXAAFilter},4310:function(at,I,w){"use strict";var b=w(8405),D=w(8642);class M extends b.Filter{constructor(C=.5,m=Math.random()){super(b.defaultFilterVertex,D.default,{uNoise:0,uSeed:0}),this.noise=C,this.seed=m}get noise(){return this.uniforms.uNoise}set noise(C){this.uniforms.uNoise=C}get seed(){return this.uniforms.uSeed}set seed(C){this.uniforms.uSeed=C}}I.NoiseFilter=M},5018:function(at,I,w){"use strict";var b=w(4310);I.NoiseFilter=b.NoiseFilter},8642:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;I.default=w},7494:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(6134),O=w(1282),C=w(2182),m=w(4280);w(539);var p=w(4147),v=w(3320),y=w(9037);const T={},_=class _f extends D.Container{constructor(x=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new C.FillStyle,this._lineStyle=new m.LineStyle,this._matrix=null,this._holeMode=!1,this.state=b.State.for2d(),this._geometry=x||new O.GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new b.Color(16777215),this.blendMode=b.BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new _f(this._geometry)}set blendMode(x){this.state.blendMode=x}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(x){this._tintColor.setValue(x)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(x=null,B=0,G,k=.5,X=!1){return typeof x=="number"&&(x={width:x,color:B,alpha:G,alignment:k,native:X}),this.lineTextureStyle(x)}lineTextureStyle(x){const B={width:0,texture:b.Texture.WHITE,color:x!=null&&x.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:M.LINE_CAP.BUTT,join:M.LINE_JOIN.MITER,miterLimit:10};x=Object.assign(B,x),this.normalizeColor(x),this.currentPath&&this.startPoly();const G=x.width>0&&x.alpha>0;return G?(x.matrix&&(x.matrix=x.matrix.clone(),x.matrix.invert()),Object.assign(this._lineStyle,{visible:G},x)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const x=this.currentPath.points,B=this.currentPath.points.length;B>2&&(this.drawShape(this.currentPath),this.currentPath=new b.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(x[B-2],x[B-1]))}else this.currentPath=new b.Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(x,B){return this.startPoly(),this.currentPath.points[0]=x,this.currentPath.points[1]=B,this}lineTo(x,B){this.currentPath||this.moveTo(0,0);const G=this.currentPath.points,k=G[G.length-2],X=G[G.length-1];return(k!==x||X!==B)&&G.push(x,B),this}_initCurve(x=0,B=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[x,B]):this.moveTo(x,B)}quadraticCurveTo(x,B,G,k){this._initCurve();const X=this.currentPath.points;return X.length===0&&this.moveTo(0,0),p.QuadraticUtils.curveTo(x,B,G,k,X),this}bezierCurveTo(x,B,G,k,X,Y){return this._initCurve(),v.BezierUtils.curveTo(x,B,G,k,X,Y,this.currentPath.points),this}arcTo(x,B,G,k,X){this._initCurve(x,B);const Y=this.currentPath.points,j=y.ArcUtils.curveTo(x,B,G,k,X,Y);if(j){const{cx:st,cy:tt,radius:rt,startAngle:ct,endAngle:pt,anticlockwise:Rt}=j;this.arc(st,tt,rt,ct,pt,Rt)}return this}arc(x,B,G,k,X,Y=!1){if(k===X)return this;if(!Y&&X<=k?X+=b.PI_2:Y&&k<=X&&(k+=b.PI_2),X-k===0)return this;const j=x+Math.cos(k)*G,st=B+Math.sin(k)*G,tt=this._geometry.closePointEps;let rt=this.currentPath?this.currentPath.points:null;if(rt){const ct=Math.abs(rt[rt.length-2]-j),pt=Math.abs(rt[rt.length-1]-st);ct<tt&&pt<tt||rt.push(j,st)}else this.moveTo(j,st),rt=this.currentPath.points;return y.ArcUtils.arc(j,st,x,B,G,k,X,Y,rt),this}beginFill(x=0,B){return this.beginTextureFill({texture:b.Texture.WHITE,color:x,alpha:B})}normalizeColor(x){var G,k;const B=b.Color.shared.setValue((G=x.color)!=null?G:0);x.color=B.toNumber(),(k=x.alpha)!=null||(x.alpha=B.alpha)}beginTextureFill(x){const B={texture:b.Texture.WHITE,color:16777215,matrix:null};x=Object.assign(B,x),this.normalizeColor(x),this.currentPath&&this.startPoly();const G=x.alpha>0;return G?(x.matrix&&(x.matrix=x.matrix.clone(),x.matrix.invert()),Object.assign(this._fillStyle,{visible:G},x)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(x,B,G,k){return this.drawShape(new b.Rectangle(x,B,G,k))}drawRoundedRect(x,B,G,k,X){return this.drawShape(new b.RoundedRectangle(x,B,G,k,X))}drawCircle(x,B,G){return this.drawShape(new b.Circle(x,B,G))}drawEllipse(x,B,G,k){return this.drawShape(new b.Ellipse(x,B,G,k))}drawPolygon(...x){let B,G=!0;const k=x[0];k.points?(G=k.closeStroke,B=k.points):Array.isArray(x[0])?B=x[0]:B=x;const X=new b.Polygon(B);return X.closeStroke=G,this.drawShape(X),this}drawShape(x){return this._holeMode?this._geometry.drawHole(x,this._matrix):this._geometry.drawShape(x,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const x=this._geometry.graphicsData;return x.length===1&&x[0].shape.type===b.SHAPES.RECT&&!x[0].matrix&&!x[0].holes.length&&!(x[0].lineStyle.visible&&x[0].lineStyle.width)}_render(x){this.finishPoly();const B=this._geometry;B.updateBatches(),B.batchable?(this.batchDirty!==B.batchDirty&&this._populateBatches(),this._renderBatched(x)):(x.batch.flush(),this._renderDirect(x))}_populateBatches(){const x=this._geometry,B=this.blendMode,G=x.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=x.batchDirty,this.batches.length=G,this.vertexData=new Float32Array(x.points);for(let k=0;k<G;k++){const X=x.batches[k],Y=X.style.color,j=new Float32Array(this.vertexData.buffer,X.attribStart*4*2,X.attribSize*2),st=new Float32Array(x.uvsFloat32.buffer,X.attribStart*4*2,X.attribSize*2),tt=new Uint16Array(x.indicesUint16.buffer,X.start*2,X.size),rt={vertexData:j,blendMode:B,indices:tt,uvs:st,_batchRGB:b.Color.shared.setValue(Y).toRgbArray(),_tintRGB:Y,_texture:X.style.texture,alpha:X.style.alpha,worldAlpha:1};this.batches[k]=rt}}_renderBatched(x){if(this.batches.length){x.batch.setObjectRenderer(x.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let B=0,G=this.batches.length;B<G;B++){const k=this.batches[B];k.worldAlpha=this.worldAlpha*k.alpha,x.plugins[this.pluginName].render(k)}}}_renderDirect(x){const B=this._resolveDirectShader(x),G=this._geometry,k=this.worldAlpha,X=B.uniforms,Y=G.drawCalls;X.translationMatrix=this.transform.worldTransform,b.Color.shared.setValue(this._tintColor).premultiply(k).toArray(X.tint),x.shader.bind(B),x.geometry.bind(G,B),x.state.set(this.state);for(let j=0,st=Y.length;j<st;j++)this._renderDrawCallDirect(x,G.drawCalls[j])}_renderDrawCallDirect(x,B){const{texArray:G,type:k,size:X,start:Y}=B,j=G.count;for(let st=0;st<j;st++)x.texture.bind(G.elements[st],st);x.geometry.draw(k,X,Y)}_resolveDirectShader(x){let B=this.shader;const G=this.pluginName;if(!B){if(!T[G]){const{maxTextures:k}=x.plugins[G],X=new Int32Array(k);for(let st=0;st<k;st++)X[st]=st;const Y={tint:new Float32Array([1,1,1,1]),translationMatrix:new b.Matrix,default:b.UniformGroup.from({uSamplers:X},!0)},j=x.plugins[G]._shader.program;T[G]=new b.Shader(j,Y)}B=T[G]}return B}_calculateBounds(){this.finishPoly();const x=this._geometry;if(!x.graphicsData.length)return;const{minX:B,minY:G,maxX:k,maxY:X}=x.bounds;this._bounds.addFrame(this.transform,B,G,k,X)}containsPoint(x){return this.worldTransform.applyInverse(x,_f._TEMP_POINT),this._geometry.containsPoint(_f._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let x=0;x<this.batches.length;x++){const B=this.batches[x];B._tintRGB=b.Color.shared.setValue(this._tintColor).multiply(B._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const x=this.transform._worldID;if(this._transformID===x)return;this._transformID=x;const B=this.transform.worldTransform,G=B.a,k=B.b,X=B.c,Y=B.d,j=B.tx,st=B.ty,tt=this._geometry.points,rt=this.vertexData;let ct=0;for(let pt=0;pt<tt.length;pt+=2){const Rt=tt[pt],Lt=tt[pt+1];rt[ct++]=G*Rt+X*Lt+j,rt[ct++]=Y*Lt+k*Rt+st}}closePath(){const x=this.currentPath;return x&&(x.closeStroke=!0,this.finishPoly()),this}setMatrix(x){return this._matrix=x,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(x){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(x)}};_.curves=M.curves,_._TEMP_POINT=new b.Point;let A=_;I.Graphics=A},9688:function(at,I){"use strict";class w{constructor(D,M=null,O=null,C=null){this.points=[],this.holes=[],this.shape=D,this.lineStyle=O,this.fillStyle=M,this.matrix=C,this.type=D.type}clone(){return new w(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}I.GraphicsData=w},1282:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(9688),O=w(539),C=w(5338),m=w(6898),p=w(5041);const v=new b.Point,y=class Hm extends b.BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new D.Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let A=0;A<this.drawCalls.length;A++)this.drawCalls[A].texArray.clear(),O.DRAW_CALL_POOL.push(this.drawCalls[A]);this.drawCalls.length=0;for(let A=0;A<this.batches.length;A++){const P=this.batches[A];P.reset(),O.BATCH_POOL.push(P)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(A,P=null,x=null,B=null){const G=new M.GraphicsData(A,P,x,B);return this.graphicsData.push(G),this.dirty++,this}drawHole(A,P=null){if(!this.graphicsData.length)return null;const x=new M.GraphicsData(A,null,null,P),B=this.graphicsData[this.graphicsData.length-1];return x.lineStyle=B.lineStyle,B.holes.push(x),this.dirty++,this}destroy(){super.destroy();for(let A=0;A<this.graphicsData.length;++A)this.graphicsData[A].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(A){const P=this.graphicsData;for(let x=0;x<P.length;++x){const B=P[x];if(B.fillStyle.visible&&B.shape&&(B.matrix?B.matrix.applyInverse(A,v):v.copyFrom(A),B.shape.contains(v.x,v.y))){let G=!1;if(B.holes){for(let k=0;k<B.holes.length;k++)if(B.holes[k].shape.contains(v.x,v.y)){G=!0;break}}if(!G)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const A=this.uvs,P=this.graphicsData;let x=null,B=null;this.batches.length>0&&(x=this.batches[this.batches.length-1],B=x.style);for(let Y=this.shapeIndex;Y<P.length;Y++){this.shapeIndex++;const j=P[Y],st=j.fillStyle,tt=j.lineStyle;O.FILL_COMMANDS[j.type].build(j),j.matrix&&this.transformPoints(j.points,j.matrix),(st.visible||tt.visible)&&this.processHoles(j.holes);for(let rt=0;rt<2;rt++){const ct=rt===0?st:tt;if(!ct.visible)continue;const pt=ct.texture.baseTexture,Rt=this.indices.length,Lt=this.points.length/2;pt.wrapMode=b.WRAP_MODES.REPEAT,rt===0?this.processFill(j):this.processLine(j);const ut=this.points.length/2-Lt;ut!==0&&(x&&!this._compareStyles(B,ct)&&(x.end(Rt,Lt),x=null),x||(x=O.BATCH_POOL.pop()||new C.BatchPart,x.begin(ct,Rt,Lt),this.batches.push(x),B=ct),this.addUvs(this.points,A,ct.texture,Lt,ut,ct.matrix))}}const G=this.indices.length,k=this.points.length/2;if(x&&x.end(G,k),this.batches.length===0){this.batchable=!0;return}const X=k>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&X===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=X?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(A,P){return!(!A||!P||A.texture.baseTexture!==P.texture.baseTexture||A.color+A.alpha!==P.color+P.alpha||!!A.native!=!!P.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let A=0,P=this.graphicsData.length;A<P;A++){const x=this.graphicsData[A],B=x.fillStyle,G=x.lineStyle;if(B&&!B.texture.baseTexture.valid||G&&!G.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const A=this.batches;for(let P=0,x=A.length;P<x;P++){const B=A[P];for(let G=0;G<B.size;G++){const k=B.start+G;this.indicesUint16[k]=this.indicesUint16[k]-B.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const A=this.batches;for(let P=0;P<A.length;P++)if(A[P].style.native)return!1;return this.points.length<Hm.BATCHABLE_SIZE*2}buildDrawCalls(){let A=++b.BaseTexture._globalBatch;for(let tt=0;tt<this.drawCalls.length;tt++)this.drawCalls[tt].texArray.clear(),O.DRAW_CALL_POOL.push(this.drawCalls[tt]);this.drawCalls.length=0;const P=this.colors,x=this.textureIds;let B=O.DRAW_CALL_POOL.pop();B||(B=new b.BatchDrawCall,B.texArray=new b.BatchTextureArray),B.texArray.count=0,B.start=0,B.size=0,B.type=b.DRAW_MODES.TRIANGLES;let G=0,k=null,X=0,Y=!1,j=b.DRAW_MODES.TRIANGLES,st=0;this.drawCalls.push(B);for(let tt=0;tt<this.batches.length;tt++){const rt=this.batches[tt],ct=8,pt=rt.style,Rt=pt.texture.baseTexture;Y!==!!pt.native&&(Y=!!pt.native,j=Y?b.DRAW_MODES.LINES:b.DRAW_MODES.TRIANGLES,k=null,G=ct,A++),k!==Rt&&(k=Rt,Rt._batchEnabled!==A&&(G===ct&&(A++,G=0,B.size>0&&(B=O.DRAW_CALL_POOL.pop(),B||(B=new b.BatchDrawCall,B.texArray=new b.BatchTextureArray),this.drawCalls.push(B)),B.start=st,B.size=0,B.texArray.count=0,B.type=j),Rt.touched=1,Rt._batchEnabled=A,Rt._batchLocation=G,Rt.wrapMode=b.WRAP_MODES.REPEAT,B.texArray.elements[B.texArray.count++]=Rt,G++)),B.size+=rt.size,st+=rt.size,X=Rt._batchLocation,this.addColors(P,pt.color,pt.alpha,rt.attribSize,rt.attribStart),this.addTextureIds(x,X,rt.attribSize,rt.attribStart)}b.BaseTexture._globalBatch=A,this.packAttributes()}packAttributes(){const A=this.points,P=this.uvs,x=this.colors,B=this.textureIds,G=new ArrayBuffer(A.length*3*4),k=new Float32Array(G),X=new Uint32Array(G);let Y=0;for(let j=0;j<A.length/2;j++)k[Y++]=A[j*2],k[Y++]=A[j*2+1],k[Y++]=P[j*2],k[Y++]=P[j*2+1],X[Y++]=x[j],k[Y++]=B[j];this._buffer.update(G),this._indexBuffer.update(this.indicesUint16)}processFill(A){A.holes.length?m.buildPoly.triangulate(A,this):O.FILL_COMMANDS[A.type].triangulate(A,this)}processLine(A){p.buildLine(A,this);for(let P=0;P<A.holes.length;P++)p.buildLine(A.holes[P],this)}processHoles(A){for(let P=0;P<A.length;P++){const x=A[P];O.FILL_COMMANDS[x.type].build(x),x.matrix&&this.transformPoints(x.points,x.matrix)}}calculateBounds(){const A=this._bounds;A.clear(),A.addVertexData(this.points,0,this.points.length),A.pad(this.boundsPadding,this.boundsPadding)}transformPoints(A,P){for(let x=0;x<A.length/2;x++){const B=A[x*2],G=A[x*2+1];A[x*2]=P.a*B+P.c*G+P.tx,A[x*2+1]=P.b*B+P.d*G+P.ty}}addColors(A,P,x,B,G=0){const k=b.Color.shared.setValue(P).toLittleEndianNumber(),X=b.Color.shared.setValue(k).toPremultiplied(x);A.length=Math.max(A.length,G+B);for(let Y=0;Y<B;Y++)A[G+Y]=X}addTextureIds(A,P,x,B=0){A.length=Math.max(A.length,B+x);for(let G=0;G<x;G++)A[B+G]=P}addUvs(A,P,x,B,G,k=null){let X=0;const Y=P.length,j=x.frame;for(;X<G;){let tt=A[(B+X)*2],rt=A[(B+X)*2+1];if(k){const ct=k.a*tt+k.c*rt+k.tx;rt=k.b*tt+k.d*rt+k.ty,tt=ct}X++,P.push(tt/j.width,rt/j.height)}const st=x.baseTexture;(j.width<st.width||j.height<st.height)&&this.adjustUvs(P,x,Y,G)}adjustUvs(A,P,x,B){const G=P.baseTexture,k=1e-6,X=x+B*2,Y=P.frame,j=Y.width/G.width,st=Y.height/G.height;let tt=Y.x/Y.width,rt=Y.y/Y.height,ct=Math.floor(A[x]+k),pt=Math.floor(A[x+1]+k);for(let Rt=x+2;Rt<X;Rt+=2)ct=Math.min(ct,Math.floor(A[Rt]+k)),pt=Math.min(pt,Math.floor(A[Rt+1]+k));tt-=ct,rt-=pt;for(let Rt=x;Rt<X;Rt+=2)A[Rt]=(A[Rt]+tt)*j,A[Rt+1]=(A[Rt+1]+rt)*st}};y.BATCHABLE_SIZE=100;let T=y;I.GraphicsGeometry=T},6134:function(at,I){"use strict";var w=(O=>(O.MITER="miter",O.BEVEL="bevel",O.ROUND="round",O))(w||{}),b=(O=>(O.BUTT="butt",O.ROUND="round",O.SQUARE="square",O))(b||{});const D={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(O,C=20){if(!this.adaptive||!O||isNaN(O))return C;let m=Math.ceil(O/this.maxLength);return m<this.minSegments?m=this.minSegments:m>this.maxSegments&&(m=this.maxSegments),m}},M=D;I.GRAPHICS_CURVES=M,I.LINE_CAP=b,I.LINE_JOIN=w,I.curves=D},6325:function(at,I,w){"use strict";var b=w(539),D=w(6134),M=w(7494),O=w(9688),C=w(1282),m=w(2182),p=w(4280),v=w(6898),y=w(3461),T=w(263),_=w(6765),A=w(5041),P=w(9037),x=w(3320),B=w(4147),G=w(5338);const k={buildPoly:v.buildPoly,buildCircle:y.buildCircle,buildRectangle:T.buildRectangle,buildRoundedRectangle:_.buildRoundedRectangle,buildLine:A.buildLine,ArcUtils:P.ArcUtils,BezierUtils:x.BezierUtils,QuadraticUtils:B.QuadraticUtils,BatchPart:G.BatchPart,FILL_COMMANDS:b.FILL_COMMANDS,BATCH_POOL:b.BATCH_POOL,DRAW_CALL_POOL:b.DRAW_CALL_POOL};I.GRAPHICS_CURVES=D.GRAPHICS_CURVES,I.LINE_CAP=D.LINE_CAP,I.LINE_JOIN=D.LINE_JOIN,I.curves=D.curves,I.Graphics=M.Graphics,I.GraphicsData=O.GraphicsData,I.GraphicsGeometry=C.GraphicsGeometry,I.FillStyle=m.FillStyle,I.LineStyle=p.LineStyle,I.graphicsUtils=k},2182:function(at,I,w){"use strict";var b=w(8405);class D{constructor(){this.color=16777215,this.alpha=1,this.texture=b.Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const O=new D;return O.color=this.color,O.alpha=this.alpha,O.texture=this.texture,O.matrix=this.matrix,O.visible=this.visible,O}reset(){this.color=16777215,this.alpha=1,this.texture=b.Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}I.FillStyle=D},4280:function(at,I,w){"use strict";var b=w(6134),D=w(2182);class M extends D.FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=b.LINE_CAP.BUTT,this.join=b.LINE_JOIN.MITER,this.miterLimit=10}clone(){const C=new M;return C.color=this.color,C.alpha=this.alpha,C.texture=this.texture,C.matrix=this.matrix,C.visible=this.visible,C.width=this.width,C.alignment=this.alignment,C.native=this.native,C.cap=this.cap,C.join=this.join,C.miterLimit=this.miterLimit,C}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=b.LINE_CAP.BUTT,this.join=b.LINE_JOIN.MITER,this.miterLimit=10}}I.LineStyle=M},9037:function(at,I,w){"use strict";var b=w(8405),D=w(6134);class M{static curveTo(C,m,p,v,y,T){const _=T[T.length-2],A=T[T.length-1]-m,P=_-C,x=v-m,B=p-C,G=Math.abs(A*B-P*x);if(G<1e-8||y===0)return(T[T.length-2]!==C||T[T.length-1]!==m)&&T.push(C,m),null;const k=A*A+P*P,X=x*x+B*B,Y=A*x+P*B,j=y*Math.sqrt(k)/G,st=y*Math.sqrt(X)/G,tt=j*Y/k,rt=st*Y/X,ct=j*B+st*P,pt=j*x+st*A,Rt=P*(st+tt),Lt=A*(st+tt),ut=B*(j+rt),xt=x*(j+rt),At=Math.atan2(Lt-pt,Rt-ct),J=Math.atan2(xt-pt,ut-ct);return{cx:ct+C,cy:pt+m,radius:y,startAngle:At,endAngle:J,anticlockwise:P*x>B*A}}static arc(C,m,p,v,y,T,_,A,P){const x=_-T,B=D.curves._segmentsCount(Math.abs(x)*y,Math.ceil(Math.abs(x)/b.PI_2)*40),G=x/(B*2),k=G*2,X=Math.cos(G),Y=Math.sin(G),j=B-1,st=j%1/j;for(let tt=0;tt<=j;++tt){const rt=tt+st*tt,ct=G+T+k*rt,pt=Math.cos(ct),Rt=-Math.sin(ct);P.push((X*pt+Y*Rt)*y+p,(X*-Rt+Y*pt)*y+v)}}}I.ArcUtils=M},5338:function(at,I){"use strict";class w{constructor(){this.reset()}begin(D,M,O){this.reset(),this.style=D,this.start=M,this.attribStart=O}end(D,M){this.attribSize=M-this.attribStart,this.size=D-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}I.BatchPart=w},3320:function(at,I,w){"use strict";var b=w(6134);class D{static curveLength(O,C,m,p,v,y,T,_){let A=0,P=0,x=0,B=0,G=0,k=0,X=0,Y=0,j=0,st=0,tt=0,rt=O,ct=C;for(let pt=1;pt<=10;++pt)P=pt/10,x=P*P,B=x*P,G=1-P,k=G*G,X=k*G,Y=X*O+3*k*P*m+3*G*x*v+B*T,j=X*C+3*k*P*p+3*G*x*y+B*_,st=rt-Y,tt=ct-j,rt=Y,ct=j,A+=Math.sqrt(st*st+tt*tt);return A}static curveTo(O,C,m,p,v,y,T){const _=T[T.length-2],A=T[T.length-1];T.length-=2;const P=b.curves._segmentsCount(D.curveLength(_,A,O,C,m,p,v,y));let x=0,B=0,G=0,k=0,X=0;T.push(_,A);for(let Y=1,j=0;Y<=P;++Y)j=Y/P,x=1-j,B=x*x,G=B*x,k=j*j,X=k*j,T.push(G*_+3*B*j*O+3*x*k*m+X*v,G*A+3*B*j*C+3*x*k*p+X*y)}}I.BezierUtils=D},4147:function(at,I,w){"use strict";var b=w(6134);class D{static curveLength(O,C,m,p,v,y){const T=O-2*m+v,_=C-2*p+y,A=2*m-2*O,P=2*p-2*C,x=4*(T*T+_*_),B=4*(T*A+_*P),G=A*A+P*P,k=2*Math.sqrt(x+B+G),X=Math.sqrt(x),Y=2*x*X,j=2*Math.sqrt(G),st=B/X;return(Y*k+X*B*(k-j)+(4*G*x-B*B)*Math.log((2*X+st+k)/(st+j)))/(4*Y)}static curveTo(O,C,m,p,v){const y=v[v.length-2],T=v[v.length-1],_=b.curves._segmentsCount(D.curveLength(y,T,O,C,m,p));let A=0,P=0;for(let x=1;x<=_;++x){const B=x/_;A=y+(O-y)*B,P=T+(C-T)*B,v.push(A+(O+(m-O)*B-A)*B,P+(C+(p-C)*B-P)*B)}}}I.QuadraticUtils=D},3461:function(at,I,w){"use strict";var b=w(8405);const D={build(M){const O=M.points;let C,m,p,v,y,T;if(M.type===b.SHAPES.CIRC){const k=M.shape;C=k.x,m=k.y,y=T=k.radius,p=v=0}else if(M.type===b.SHAPES.ELIP){const k=M.shape;C=k.x,m=k.y,y=k.width,T=k.height,p=v=0}else{const k=M.shape,X=k.width/2,Y=k.height/2;C=k.x+X,m=k.y+Y,y=T=Math.max(0,Math.min(k.radius,Math.min(X,Y))),p=X-y,v=Y-T}if(!(y>=0&&T>=0&&p>=0&&v>=0)){O.length=0;return}const _=Math.ceil(2.3*Math.sqrt(y+T)),A=_*8+(p?4:0)+(v?4:0);if(O.length=A,A===0)return;if(_===0){O.length=8,O[0]=O[6]=C+p,O[1]=O[3]=m+v,O[2]=O[4]=C-p,O[5]=O[7]=m-v;return}let P=0,x=_*4+(p?2:0)+2,B=x,G=A;{const k=p+y,X=v,Y=C+k,j=C-k,st=m+X;if(O[P++]=Y,O[P++]=st,O[--x]=st,O[--x]=j,v){const tt=m-X;O[B++]=j,O[B++]=tt,O[--G]=tt,O[--G]=Y}}for(let k=1;k<_;k++){const X=Math.PI/2*(k/_),Y=p+Math.cos(X)*y,j=v+Math.sin(X)*T,st=C+Y,tt=C-Y,rt=m+j,ct=m-j;O[P++]=st,O[P++]=rt,O[--x]=rt,O[--x]=tt,O[B++]=tt,O[B++]=ct,O[--G]=ct,O[--G]=st}{const k=p,X=v+T,Y=C+k,j=C-k,st=m+X,tt=m-X;O[P++]=Y,O[P++]=st,O[--G]=tt,O[--G]=Y,p&&(O[P++]=j,O[P++]=st,O[--G]=tt,O[--G]=j)}},triangulate(M,O){const C=M.points,m=O.points,p=O.indices;if(C.length===0)return;let v=m.length/2;const y=v;let T,_;if(M.type!==b.SHAPES.RREC){const P=M.shape;T=P.x,_=P.y}else{const P=M.shape;T=P.x+P.width/2,_=P.y+P.height/2}const A=M.matrix;m.push(M.matrix?A.a*T+A.c*_+A.tx:T,M.matrix?A.b*T+A.d*_+A.ty:_),v++,m.push(C[0],C[1]);for(let P=2;P<C.length;P+=2)m.push(C[P],C[P+1]),p.push(v++,y,v);p.push(y+1,y,v)}};I.buildCircle=D},5041:function(at,I,w){"use strict";var b=w(8405),D=w(6134);function M(v,y,T,_,A,P,x,B){const G=v-T*A,k=y-_*A,X=v+T*P,Y=y+_*P;let j,st;x?(j=_,st=-T):(j=-_,st=T);const tt=G+j,rt=k+st,ct=X+j,pt=Y+st;return B.push(tt,rt,ct,pt),2}function O(v,y,T,_,A,P,x,B){const G=T-v,k=_-y;let X=Math.atan2(G,k),Y=Math.atan2(A-v,P-y);B&&X<Y?X+=Math.PI*2:!B&&X>Y&&(Y+=Math.PI*2);let j=X;const st=Y-X,tt=Math.abs(st),rt=Math.sqrt(G*G+k*k),ct=(15*tt*Math.sqrt(rt)/Math.PI>>0)+1,pt=st/ct;if(j+=pt,B){x.push(v,y,T,_);for(let Rt=1,Lt=j;Rt<ct;Rt++,Lt+=pt)x.push(v,y,v+Math.sin(Lt)*rt,y+Math.cos(Lt)*rt);x.push(v,y,A,P)}else{x.push(T,_,v,y);for(let Rt=1,Lt=j;Rt<ct;Rt++,Lt+=pt)x.push(v+Math.sin(Lt)*rt,y+Math.cos(Lt)*rt,v,y);x.push(A,P,v,y)}return ct*2}function C(v,y){const T=v.shape;let _=v.points||T.points.slice();const A=y.closePointEps;if(_.length===0)return;const P=v.lineStyle,x=new b.Point(_[0],_[1]),B=new b.Point(_[_.length-2],_[_.length-1]),G=T.type!==b.SHAPES.POLY||T.closeStroke,k=Math.abs(x.x-B.x)<A&&Math.abs(x.y-B.y)<A;if(G){_=_.slice(),k&&(_.pop(),_.pop(),B.set(_[_.length-2],_[_.length-1]));const Bt=(x.x+B.x)*.5,Gt=(B.y+x.y)*.5;_.unshift(Bt,Gt),_.push(Bt,Gt)}const X=y.points,Y=_.length/2;let j=_.length;const st=X.length/2,tt=P.width/2,rt=tt*tt,ct=P.miterLimit*P.miterLimit;let pt=_[0],Rt=_[1],Lt=_[2],ut=_[3],xt=0,At=0,J=-(Rt-ut),ot=pt-Lt,q=0,gt=0,yt=Math.sqrt(J*J+ot*ot);J/=yt,ot/=yt,J*=tt,ot*=tt;const et=P.alignment,ht=(1-et)*2,Et=et*2;G||(P.cap===D.LINE_CAP.ROUND?j+=O(pt-J*(ht-Et)*.5,Rt-ot*(ht-Et)*.5,pt-J*ht,Rt-ot*ht,pt+J*Et,Rt+ot*Et,X,!0)+2:P.cap===D.LINE_CAP.SQUARE&&(j+=M(pt,Rt,J,ot,ht,Et,!0,X))),X.push(pt-J*ht,Rt-ot*ht,pt+J*Et,Rt+ot*Et);for(let Bt=1;Bt<Y-1;++Bt){pt=_[(Bt-1)*2],Rt=_[(Bt-1)*2+1],Lt=_[Bt*2],ut=_[Bt*2+1],xt=_[(Bt+1)*2],At=_[(Bt+1)*2+1],J=-(Rt-ut),ot=pt-Lt,yt=Math.sqrt(J*J+ot*ot),J/=yt,ot/=yt,J*=tt,ot*=tt,q=-(ut-At),gt=Lt-xt,yt=Math.sqrt(q*q+gt*gt),q/=yt,gt/=yt,q*=tt,gt*=tt;const Gt=Lt-pt,Ct=Rt-ut,jt=Lt-xt,Kt=At-ut,ne=Gt*jt+Ct*Kt,me=Ct*jt-Kt*Gt,ue=me<0;if(Math.abs(me)<.001*Math.abs(ne)){X.push(Lt-J*ht,ut-ot*ht,Lt+J*Et,ut+ot*Et),ne>=0&&(P.join===D.LINE_JOIN.ROUND?j+=O(Lt,ut,Lt-J*ht,ut-ot*ht,Lt-q*ht,ut-gt*ht,X,!1)+4:j+=2,X.push(Lt-q*Et,ut-gt*Et,Lt+q*ht,ut+gt*ht));continue}const Oe=(-J+pt)*(-ot+ut)-(-J+Lt)*(-ot+Rt),de=(-q+xt)*(-gt+ut)-(-q+Lt)*(-gt+At),oe=(Gt*de-jt*Oe)/me,Le=(Kt*Oe-Ct*de)/me,Fr=(oe-Lt)*(oe-Lt)+(Le-ut)*(Le-ut),kr=Lt+(oe-Lt)*ht,ui=ut+(Le-ut)*ht,Ti=Lt-(oe-Lt)*Et,Ei=ut-(Le-ut)*Et,Oi=Math.min(Gt*Gt+Ct*Ct,jt*jt+Kt*Kt),Fe=ue?ht:Et,Li=Oi+Fe*Fe*rt,hi=Fr<=Li;let Xr=P.join;if(Xr===D.LINE_JOIN.MITER&&Fr/rt>ct&&(Xr=D.LINE_JOIN.BEVEL),hi)switch(Xr){case D.LINE_JOIN.MITER:{X.push(kr,ui,Ti,Ei);break}case D.LINE_JOIN.BEVEL:{ue?X.push(kr,ui,Lt+J*Et,ut+ot*Et,kr,ui,Lt+q*Et,ut+gt*Et):X.push(Lt-J*ht,ut-ot*ht,Ti,Ei,Lt-q*ht,ut-gt*ht,Ti,Ei),j+=2;break}case D.LINE_JOIN.ROUND:{ue?(X.push(kr,ui,Lt+J*Et,ut+ot*Et),j+=O(Lt,ut,Lt+J*Et,ut+ot*Et,Lt+q*Et,ut+gt*Et,X,!0)+4,X.push(kr,ui,Lt+q*Et,ut+gt*Et)):(X.push(Lt-J*ht,ut-ot*ht,Ti,Ei),j+=O(Lt,ut,Lt-J*ht,ut-ot*ht,Lt-q*ht,ut-gt*ht,X,!1)+4,X.push(Lt-q*ht,ut-gt*ht,Ti,Ei));break}}else{switch(X.push(Lt-J*ht,ut-ot*ht,Lt+J*Et,ut+ot*Et),Xr){case D.LINE_JOIN.MITER:{ue?X.push(Ti,Ei,Ti,Ei):X.push(kr,ui,kr,ui),j+=2;break}case D.LINE_JOIN.ROUND:{ue?j+=O(Lt,ut,Lt+J*Et,ut+ot*Et,Lt+q*Et,ut+gt*Et,X,!0)+2:j+=O(Lt,ut,Lt-J*ht,ut-ot*ht,Lt-q*ht,ut-gt*ht,X,!1)+2;break}}X.push(Lt-q*ht,ut-gt*ht,Lt+q*Et,ut+gt*Et),j+=2}}pt=_[(Y-2)*2],Rt=_[(Y-2)*2+1],Lt=_[(Y-1)*2],ut=_[(Y-1)*2+1],J=-(Rt-ut),ot=pt-Lt,yt=Math.sqrt(J*J+ot*ot),J/=yt,ot/=yt,J*=tt,ot*=tt,X.push(Lt-J*ht,ut-ot*ht,Lt+J*Et,ut+ot*Et),G||(P.cap===D.LINE_CAP.ROUND?j+=O(Lt-J*(ht-Et)*.5,ut-ot*(ht-Et)*.5,Lt-J*ht,ut-ot*ht,Lt+J*Et,ut+ot*Et,X,!1)+2:P.cap===D.LINE_CAP.SQUARE&&(j+=M(Lt,ut,J,ot,ht,Et,!1,X)));const kt=y.indices,Ft=D.curves.epsilon*D.curves.epsilon;for(let Bt=st;Bt<j+st-2;++Bt)pt=X[Bt*2],Rt=X[Bt*2+1],Lt=X[(Bt+1)*2],ut=X[(Bt+1)*2+1],xt=X[(Bt+2)*2],At=X[(Bt+2)*2+1],!(Math.abs(pt*(ut-At)+Lt*(At-Rt)+xt*(Rt-ut))<Ft)&&kt.push(Bt,Bt+1,Bt+2)}function m(v,y){let T=0;const _=v.shape,A=v.points||_.points,P=_.type!==b.SHAPES.POLY||_.closeStroke;if(A.length===0)return;const x=y.points,B=y.indices,G=A.length/2,k=x.length/2;let X=k;for(x.push(A[0],A[1]),T=1;T<G;T++)x.push(A[T*2],A[T*2+1]),B.push(X,X+1),X++;P&&B.push(X,k)}function p(v,y){v.lineStyle.native?m(v,y):C(v,y)}I.buildLine=p},6898:function(at,I,w){"use strict";var b=w(8405);function D(O,C=!1){const m=O.length;if(m<6)return;let p=0;for(let v=0,y=O[m-2],T=O[m-1];v<m;v+=2){const _=O[v],A=O[v+1];p+=(_-y)*(A+T),y=_,T=A}if(!C&&p>0||C&&p<=0){const v=m/2;for(let y=v+v%2;y<m;y+=2){const T=m-y-2,_=m-y-1,A=y,P=y+1;[O[T],O[A]]=[O[A],O[T]],[O[_],O[P]]=[O[P],O[_]]}}}const M={build(O){O.points=O.shape.points.slice()},triangulate(O,C){let m=O.points;const p=O.holes,v=C.points,y=C.indices;if(m.length>=6){D(m,!1);const T=[];for(let P=0;P<p.length;P++){const x=p[P];D(x.points,!0),T.push(m.length/2),m=m.concat(x.points)}const _=b.utils.earcut(m,T,2);if(!_)return;const A=v.length/2;for(let P=0;P<_.length;P+=3)y.push(_[P]+A),y.push(_[P+1]+A),y.push(_[P+2]+A);for(let P=0;P<m.length;P++)v.push(m[P])}}};I.buildPoly=M},263:function(at,I){"use strict";const w={build(b){const D=b.shape,M=D.x,O=D.y,C=D.width,m=D.height,p=b.points;p.length=0,C>=0&&m>=0&&p.push(M,O,M+C,O,M+C,O+m,M,O+m)},triangulate(b,D){const M=b.points,O=D.points;if(M.length===0)return;const C=O.length/2;O.push(M[0],M[1],M[2],M[3],M[6],M[7],M[4],M[5]),D.indices.push(C,C+1,C+2,C+1,C+2,C+3)}};I.buildRectangle=w},6765:function(at,I,w){"use strict";var b=w(3461);const D={build(M){b.buildCircle.build(M)},triangulate(M,O){b.buildCircle.triangulate(M,O)}};I.buildRoundedRectangle=D},539:function(at,I,w){"use strict";var b=w(8405),D=w(3461),M=w(6898),O=w(263),C=w(6765),m=w(9037),p=w(5338),v=w(3320),y=w(5041),T=w(4147);const _={[b.SHAPES.POLY]:M.buildPoly,[b.SHAPES.CIRC]:D.buildCircle,[b.SHAPES.ELIP]:D.buildCircle,[b.SHAPES.RECT]:O.buildRectangle,[b.SHAPES.RREC]:C.buildRoundedRectangle},A=[],P=[];I.buildCircle=D.buildCircle,I.buildPoly=M.buildPoly,I.buildRectangle=O.buildRectangle,I.buildRoundedRectangle=C.buildRoundedRectangle,I.ArcUtils=m.ArcUtils,I.BatchPart=p.BatchPart,I.BezierUtils=v.BezierUtils,I.buildLine=y.buildLine,I.QuadraticUtils=T.QuadraticUtils,I.BATCH_POOL=A,I.DRAW_CALL_POOL=P,I.FILL_COMMANDS=_},2454:function(){"use strict"},2427:function(){"use strict"},2486:function(at,I,w){"use strict";var b=w(7993),D=w(5520);class M{constructor(C=1,m=0,p=0,v=1,y=0,T=0){this.array=null,this.a=C,this.b=m,this.c=p,this.d=v,this.tx=y,this.ty=T}fromArray(C){this.a=C[0],this.b=C[1],this.c=C[3],this.d=C[4],this.tx=C[2],this.ty=C[5]}set(C,m,p,v,y,T){return this.a=C,this.b=m,this.c=p,this.d=v,this.tx=y,this.ty=T,this}toArray(C,m){this.array||(this.array=new Float32Array(9));const p=m||this.array;return C?(p[0]=this.a,p[1]=this.b,p[2]=0,p[3]=this.c,p[4]=this.d,p[5]=0,p[6]=this.tx,p[7]=this.ty,p[8]=1):(p[0]=this.a,p[1]=this.c,p[2]=this.tx,p[3]=this.b,p[4]=this.d,p[5]=this.ty,p[6]=0,p[7]=0,p[8]=1),p}apply(C,m){m=m||new D.Point;const p=C.x,v=C.y;return m.x=this.a*p+this.c*v+this.tx,m.y=this.b*p+this.d*v+this.ty,m}applyInverse(C,m){m=m||new D.Point;const p=1/(this.a*this.d+this.c*-this.b),v=C.x,y=C.y;return m.x=this.d*p*v+-this.c*p*y+(this.ty*this.c-this.tx*this.d)*p,m.y=this.a*p*y+-this.b*p*v+(-this.ty*this.a+this.tx*this.b)*p,m}translate(C,m){return this.tx+=C,this.ty+=m,this}scale(C,m){return this.a*=C,this.d*=m,this.c*=C,this.b*=m,this.tx*=C,this.ty*=m,this}rotate(C){const m=Math.cos(C),p=Math.sin(C),v=this.a,y=this.c,T=this.tx;return this.a=v*m-this.b*p,this.b=v*p+this.b*m,this.c=y*m-this.d*p,this.d=y*p+this.d*m,this.tx=T*m-this.ty*p,this.ty=T*p+this.ty*m,this}append(C){const m=this.a,p=this.b,v=this.c,y=this.d;return this.a=C.a*m+C.b*v,this.b=C.a*p+C.b*y,this.c=C.c*m+C.d*v,this.d=C.c*p+C.d*y,this.tx=C.tx*m+C.ty*v+this.tx,this.ty=C.tx*p+C.ty*y+this.ty,this}setTransform(C,m,p,v,y,T,_,A,P){return this.a=Math.cos(_+P)*y,this.b=Math.sin(_+P)*y,this.c=-Math.sin(_-A)*T,this.d=Math.cos(_-A)*T,this.tx=C-(p*this.a+v*this.c),this.ty=m-(p*this.b+v*this.d),this}prepend(C){const m=this.tx;if(C.a!==1||C.b!==0||C.c!==0||C.d!==1){const p=this.a,v=this.c;this.a=p*C.a+this.b*C.c,this.b=p*C.b+this.b*C.d,this.c=v*C.a+this.d*C.c,this.d=v*C.b+this.d*C.d}return this.tx=m*C.a+this.ty*C.c+C.tx,this.ty=m*C.b+this.ty*C.d+C.ty,this}decompose(C){const m=this.a,p=this.b,v=this.c,y=this.d,T=C.pivot,_=-Math.atan2(-v,y),A=Math.atan2(p,m),P=Math.abs(_+A);return P<1e-5||Math.abs(b.PI_2-P)<1e-5?(C.rotation=A,C.skew.x=C.skew.y=0):(C.rotation=0,C.skew.x=_,C.skew.y=A),C.scale.x=Math.sqrt(m*m+p*p),C.scale.y=Math.sqrt(v*v+y*y),C.position.x=this.tx+(T.x*m+T.y*v),C.position.y=this.ty+(T.x*p+T.y*y),C}invert(){const C=this.a,m=this.b,p=this.c,v=this.d,y=this.tx,T=C*v-m*p;return this.a=v/T,this.b=-m/T,this.c=-p/T,this.d=C/T,this.tx=(p*this.ty-v*y)/T,this.ty=-(C*this.ty-m*y)/T,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const C=new M;return C.a=this.a,C.b=this.b,C.c=this.c,C.d=this.d,C.tx=this.tx,C.ty=this.ty,C}copyTo(C){return C.a=this.a,C.b=this.b,C.c=this.c,C.d=this.d,C.tx=this.tx,C.ty=this.ty,C}copyFrom(C){return this.a=C.a,this.b=C.b,this.c=C.c,this.d=C.d,this.tx=C.tx,this.ty=C.ty,this}static get IDENTITY(){return new M}static get TEMP_MATRIX(){return new M}}M.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`},I.Matrix=M},1142:function(at,I){"use strict";class w{constructor(D,M,O=0,C=0){this._x=O,this._y=C,this.cb=D,this.scope=M}clone(D=this.cb,M=this.scope){return new w(D,M,this._x,this._y)}set(D=0,M=D){return(this._x!==D||this._y!==M)&&(this._x=D,this._y=M,this.cb.call(this.scope)),this}copyFrom(D){return(this._x!==D.x||this._y!==D.y)&&(this._x=D.x,this._y=D.y,this.cb.call(this.scope)),this}copyTo(D){return D.set(this._x,this._y),D}equals(D){return D.x===this._x&&D.y===this._y}get x(){return this._x}set x(D){this._x!==D&&(this._x=D,this.cb.call(this.scope))}get y(){return this._y}set y(D){this._y!==D&&(this._y=D,this.cb.call(this.scope))}}w.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`},I.ObservablePoint=w},5520:function(at,I){"use strict";class w{constructor(D=0,M=0){this.x=0,this.y=0,this.x=D,this.y=M}clone(){return new w(this.x,this.y)}copyFrom(D){return this.set(D.x,D.y),this}copyTo(D){return D.set(this.x,this.y),D}equals(D){return D.x===this.x&&D.y===this.y}set(D=0,M=D){return this.x=D,this.y=M,this}}w.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`},I.Point=w},5997:function(at,I,w){"use strict";var b=w(2486),D=w(1142);const M=class{constructor(){this.worldTransform=new b.Matrix,this.localTransform=new b.Matrix,this.position=new D.ObservablePoint(this.onChange,this,0,0),this.scale=new D.ObservablePoint(this.onChange,this,1,1),this.pivot=new D.ObservablePoint(this.onChange,this,0,0),this.skew=new D.ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const C=this.localTransform;this._localID!==this._currentLocalID&&(C.a=this._cx*this.scale.x,C.b=this._sx*this.scale.x,C.c=this._cy*this.scale.y,C.d=this._sy*this.scale.y,C.tx=this.position.x-(this.pivot.x*C.a+this.pivot.y*C.c),C.ty=this.position.y-(this.pivot.x*C.b+this.pivot.y*C.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(C){const m=this.localTransform;if(this._localID!==this._currentLocalID&&(m.a=this._cx*this.scale.x,m.b=this._sx*this.scale.x,m.c=this._cy*this.scale.y,m.d=this._sy*this.scale.y,m.tx=this.position.x-(this.pivot.x*m.a+this.pivot.y*m.c),m.ty=this.position.y-(this.pivot.x*m.b+this.pivot.y*m.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==C._worldID){const p=C.worldTransform,v=this.worldTransform;v.a=m.a*p.a+m.b*p.c,v.b=m.a*p.b+m.b*p.d,v.c=m.c*p.a+m.d*p.c,v.d=m.c*p.b+m.d*p.d,v.tx=m.tx*p.a+m.ty*p.c+p.tx,v.ty=m.tx*p.b+m.ty*p.d+p.ty,this._parentID=C._worldID,this._worldID++}}setFromMatrix(C){C.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(C){this._rotation!==C&&(this._rotation=C,this.updateSkew())}};M.IDENTITY=new M;let O=M;O.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`},I.Transform=O},7993:function(at,I){"use strict";const w=Math.PI*2,b=180/Math.PI,D=Math.PI/180;var M=(O=>(O[O.POLY=0]="POLY",O[O.RECT=1]="RECT",O[O.CIRC=2]="CIRC",O[O.ELIP=3]="ELIP",O[O.RREC=4]="RREC",O))(M||{});I.DEG_TO_RAD=D,I.PI_2=w,I.RAD_TO_DEG=b,I.SHAPES=M},6514:function(at,I,w){"use strict";var b=w(2486);const D=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],M=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],O=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],C=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],m=[],p=[],v=Math.sign;function y(){for(let _=0;_<16;_++){const A=[];m.push(A);for(let P=0;P<16;P++){const x=v(D[_]*D[P]+O[_]*M[P]),B=v(M[_]*D[P]+C[_]*M[P]),G=v(D[_]*O[P]+O[_]*C[P]),k=v(M[_]*O[P]+C[_]*C[P]);for(let X=0;X<16;X++)if(D[X]===x&&M[X]===B&&O[X]===G&&C[X]===k){A.push(X);break}}}for(let _=0;_<16;_++){const A=new b.Matrix;A.set(D[_],M[_],O[_],C[_],0,0),p.push(A)}}y();const T={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:_=>D[_],uY:_=>M[_],vX:_=>O[_],vY:_=>C[_],inv:_=>_&8?_&15:-_&7,add:(_,A)=>m[_][A],sub:(_,A)=>m[_][T.inv(A)],rotate180:_=>_^4,isVertical:_=>(_&3)===2,byDirection:(_,A)=>Math.abs(_)*2<=Math.abs(A)?A>=0?T.S:T.N:Math.abs(A)*2<=Math.abs(_)?_>0?T.E:T.W:A>0?_>0?T.SE:T.SW:_>0?T.NE:T.NW,matrixAppendRotationInv:(_,A,P=0,x=0)=>{const B=p[T.inv(A)];B.tx=P,B.ty=x,_.append(B)}};I.groupD8=T},8865:function(at,I,w){"use strict";var b=w(617),D=w(2894),M=w(2204),O=w(7445),C=w(76),m=w(6514);w(2454),w(2427);var p=w(2486),v=w(1142),y=w(5520),T=w(5997),_=w(7993);I.Circle=b.Circle,I.Ellipse=D.Ellipse,I.Polygon=M.Polygon,I.Rectangle=O.Rectangle,I.RoundedRectangle=C.RoundedRectangle,I.groupD8=m.groupD8,I.Matrix=p.Matrix,I.ObservablePoint=v.ObservablePoint,I.Point=y.Point,I.Transform=T.Transform,I.DEG_TO_RAD=_.DEG_TO_RAD,I.PI_2=_.PI_2,I.RAD_TO_DEG=_.RAD_TO_DEG,I.SHAPES=_.SHAPES},617:function(at,I,w){"use strict";var b=w(7993),D=w(7445);class M{constructor(C=0,m=0,p=0){this.x=C,this.y=m,this.radius=p,this.type=b.SHAPES.CIRC}clone(){return new M(this.x,this.y,this.radius)}contains(C,m){if(this.radius<=0)return!1;const p=this.radius*this.radius;let v=this.x-C,y=this.y-m;return v*=v,y*=y,v+y<=p}getBounds(){return new D.Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}M.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`},I.Circle=M},2894:function(at,I,w){"use strict";var b=w(7993),D=w(7445);class M{constructor(C=0,m=0,p=0,v=0){this.x=C,this.y=m,this.width=p,this.height=v,this.type=b.SHAPES.ELIP}clone(){return new M(this.x,this.y,this.width,this.height)}contains(C,m){if(this.width<=0||this.height<=0)return!1;let p=(C-this.x)/this.width,v=(m-this.y)/this.height;return p*=p,v*=v,p+v<=1}getBounds(){return new D.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}M.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`},I.Ellipse=M},2204:function(at,I,w){"use strict";var b=w(7993);class D{constructor(...O){let C=Array.isArray(O[0])?O[0]:O;if(typeof C[0]!="number"){const m=[];for(let p=0,v=C.length;p<v;p++)m.push(C[p].x,C[p].y);C=m}this.points=C,this.type=b.SHAPES.POLY,this.closeStroke=!0}clone(){const O=this.points.slice(),C=new D(O);return C.closeStroke=this.closeStroke,C}contains(O,C){let m=!1;const p=this.points.length/2;for(let v=0,y=p-1;v<p;y=v++){const T=this.points[v*2],_=this.points[v*2+1],A=this.points[y*2],P=this.points[y*2+1];_>C!=P>C&&O<(A-T)*((C-_)/(P-_))+T&&(m=!m)}return m}}D.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((M,O)=>`${M}, ${O}`,"")}]`},I.Polygon=D},7445:function(at,I,w){"use strict";var b=w(7993),D=w(5520);const M=[new D.Point,new D.Point,new D.Point,new D.Point];class O{constructor(m=0,p=0,v=0,y=0){this.x=Number(m),this.y=Number(p),this.width=Number(v),this.height=Number(y),this.type=b.SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new O(0,0,0,0)}clone(){return new O(this.x,this.y,this.width,this.height)}copyFrom(m){return this.x=m.x,this.y=m.y,this.width=m.width,this.height=m.height,this}copyTo(m){return m.x=this.x,m.y=this.y,m.width=this.width,m.height=this.height,m}contains(m,p){return this.width<=0||this.height<=0?!1:m>=this.x&&m<this.x+this.width&&p>=this.y&&p<this.y+this.height}intersects(m,p){if(!p){const xt=this.x<m.x?m.x:this.x;if((this.right>m.right?m.right:this.right)<=xt)return!1;const At=this.y<m.y?m.y:this.y;return(this.bottom>m.bottom?m.bottom:this.bottom)>At}const v=this.left,y=this.right,T=this.top,_=this.bottom;if(y<=v||_<=T)return!1;const A=M[0].set(m.left,m.top),P=M[1].set(m.left,m.bottom),x=M[2].set(m.right,m.top),B=M[3].set(m.right,m.bottom);if(x.x<=A.x||P.y<=A.y)return!1;const G=Math.sign(p.a*p.d-p.b*p.c);if(G===0||(p.apply(A,A),p.apply(P,P),p.apply(x,x),p.apply(B,B),Math.max(A.x,P.x,x.x,B.x)<=v||Math.min(A.x,P.x,x.x,B.x)>=y||Math.max(A.y,P.y,x.y,B.y)<=T||Math.min(A.y,P.y,x.y,B.y)>=_))return!1;const k=G*(P.y-A.y),X=G*(A.x-P.x),Y=k*v+X*T,j=k*y+X*T,st=k*v+X*_,tt=k*y+X*_;if(Math.max(Y,j,st,tt)<=k*A.x+X*A.y||Math.min(Y,j,st,tt)>=k*B.x+X*B.y)return!1;const rt=G*(A.y-x.y),ct=G*(x.x-A.x),pt=rt*v+ct*T,Rt=rt*y+ct*T,Lt=rt*v+ct*_,ut=rt*y+ct*_;return!(Math.max(pt,Rt,Lt,ut)<=rt*A.x+ct*A.y||Math.min(pt,Rt,Lt,ut)>=rt*B.x+ct*B.y)}pad(m=0,p=m){return this.x-=m,this.y-=p,this.width+=m*2,this.height+=p*2,this}fit(m){const p=Math.max(this.x,m.x),v=Math.min(this.x+this.width,m.x+m.width),y=Math.max(this.y,m.y),T=Math.min(this.y+this.height,m.y+m.height);return this.x=p,this.width=Math.max(v-p,0),this.y=y,this.height=Math.max(T-y,0),this}ceil(m=1,p=.001){const v=Math.ceil((this.x+this.width-p)*m)/m,y=Math.ceil((this.y+this.height-p)*m)/m;return this.x=Math.floor((this.x+p)*m)/m,this.y=Math.floor((this.y+p)*m)/m,this.width=v-this.x,this.height=y-this.y,this}enlarge(m){const p=Math.min(this.x,m.x),v=Math.max(this.x+this.width,m.x+m.width),y=Math.min(this.y,m.y),T=Math.max(this.y+this.height,m.y+m.height);return this.x=p,this.width=v-p,this.y=y,this.height=T-y,this}}O.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`},I.Rectangle=O},76:function(at,I,w){"use strict";var b=w(7993);class D{constructor(O=0,C=0,m=0,p=0,v=20){this.x=O,this.y=C,this.width=m,this.height=p,this.radius=v,this.type=b.SHAPES.RREC}clone(){return new D(this.x,this.y,this.width,this.height,this.radius)}contains(O,C){if(this.width<=0||this.height<=0)return!1;if(O>=this.x&&O<=this.x+this.width&&C>=this.y&&C<=this.y+this.height){const m=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(C>=this.y+m&&C<=this.y+this.height-m||O>=this.x+m&&O<=this.x+this.width-m)return!0;let p=O-(this.x+m),v=C-(this.y+m);const y=m*m;if(p*p+v*v<=y||(p=O-(this.x+this.width-m),p*p+v*v<=y)||(v=C-(this.y+this.height-m),p*p+v*v<=y)||(p=O-(this.x+m),p*p+v*v<=y))return!0}return!1}}D.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`},I.RoundedRectangle=D},704:function(at,I,w){"use strict";var b=w(8405),D=w(4021);const M=10;class O extends D.SimplePlane{constructor(m,p,v,y,T){var _,A,P,x,B,G,k,X;super(b.Texture.WHITE,4,4),this._origWidth=m.orig.width,this._origHeight=m.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=(A=p!=null?p:(_=m.defaultBorders)==null?void 0:_.left)!=null?A:M,this._rightWidth=(x=y!=null?y:(P=m.defaultBorders)==null?void 0:P.right)!=null?x:M,this._topHeight=(G=v!=null?v:(B=m.defaultBorders)==null?void 0:B.top)!=null?G:M,this._bottomHeight=(X=T!=null?T:(k=m.defaultBorders)==null?void 0:k.bottom)!=null?X:M,this.texture=m}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(m){this.geometry.getBuffer("aVertexPosition").data=m}updateHorizontalVertices(){const m=this.vertices,p=this._getMinScale();m[9]=m[11]=m[13]=m[15]=this._topHeight*p,m[17]=m[19]=m[21]=m[23]=this._height-this._bottomHeight*p,m[25]=m[27]=m[29]=m[31]=this._height}updateVerticalVertices(){const m=this.vertices,p=this._getMinScale();m[2]=m[10]=m[18]=m[26]=this._leftWidth*p,m[4]=m[12]=m[20]=m[28]=this._width-this._rightWidth*p,m[6]=m[14]=m[22]=m[30]=this._width}_getMinScale(){const m=this._leftWidth+this._rightWidth,p=this._width>m?1:this._width/m,v=this._topHeight+this._bottomHeight,y=this._height>v?1:this._height/v;return Math.min(p,y)}get width(){return this._width}set width(m){this._width=m,this._refresh()}get height(){return this._height}set height(m){this._height=m,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(m){this._leftWidth=m,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(m){this._rightWidth=m,this._refresh()}get topHeight(){return this._topHeight}set topHeight(m){this._topHeight=m,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(m){this._bottomHeight=m,this._refresh()}_refresh(){const m=this.texture,p=this.geometry.buffers[1].data;this._origWidth=m.orig.width,this._origHeight=m.orig.height;const v=1/this._origWidth,y=1/this._origHeight;p[0]=p[8]=p[16]=p[24]=0,p[1]=p[3]=p[5]=p[7]=0,p[6]=p[14]=p[22]=p[30]=1,p[25]=p[27]=p[29]=p[31]=1,p[2]=p[10]=p[18]=p[26]=v*this._leftWidth,p[4]=p[12]=p[20]=p[28]=1-v*this._rightWidth,p[9]=p[11]=p[13]=p[15]=y*this._topHeight,p[17]=p[19]=p[21]=p[23]=1-y*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}I.NineSlicePlane=O},3814:function(at,I,w){"use strict";var b=w(8405),D=w(3613);class M extends D.Mesh{constructor(C=b.Texture.EMPTY,m,p,v,y){const T=new D.MeshGeometry(m,p,v);T.getBuffer("aVertexPosition").static=!1;const _=new D.MeshMaterial(C);super(T,_,null,y),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(C){this.geometry.getBuffer("aVertexPosition").data=C}_render(C){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(C)}}I.SimpleMesh=M},4021:function(at,I,w){"use strict";var b=w(8405),D=w(3613),M=w(1232);class O extends D.Mesh{constructor(m,p,v){const y=new M.PlaneGeometry(m.width,m.height,p,v),T=new D.MeshMaterial(b.Texture.WHITE);super(y,T),this.texture=m,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const m=this.geometry,{width:p,height:v}=this.shader.texture;this.autoResize&&(m.width!==p||m.height!==v)&&(m.width=this.shader.texture.width,m.height=this.shader.texture.height,m.build())}set texture(m){this.shader.texture!==m&&(this.shader.texture=m,this._textureID=-1,m.baseTexture.valid?this.textureUpdated():m.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(m){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(m)}destroy(m){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(m)}}I.SimplePlane=O},9100:function(at,I,w){"use strict";var b=w(8405),D=w(3613),M=w(1108);class O extends D.Mesh{constructor(m,p,v=0){const y=new M.RopeGeometry(m.height,p,v),T=new D.MeshMaterial(m);v>0&&(m.baseTexture.wrapMode=b.WRAP_MODES.REPEAT),super(y,T),this.autoUpdate=!0}_render(m){const p=this.geometry;(this.autoUpdate||p._width!==this.shader.texture.height)&&(p._width=this.shader.texture.height,p.update()),super._render(m)}}I.SimpleRope=O},1232:function(at,I,w){"use strict";var b=w(3613);class D extends b.MeshGeometry{constructor(O=100,C=100,m=10,p=10){super(),this.segWidth=m,this.segHeight=p,this.width=O,this.height=C,this.build()}build(){const O=this.segWidth*this.segHeight,C=[],m=[],p=[],v=this.segWidth-1,y=this.segHeight-1,T=this.width/v,_=this.height/y;for(let P=0;P<O;P++){const x=P%this.segWidth,B=P/this.segWidth|0;C.push(x*T,B*_),m.push(x/v,B/y)}const A=v*y;for(let P=0;P<A;P++){const x=P%v,B=P/v|0,G=B*this.segWidth+x,k=B*this.segWidth+x+1,X=(B+1)*this.segWidth+x,Y=(B+1)*this.segWidth+x+1;p.push(G,k,X,k,Y,X)}this.buffers[0].data=new Float32Array(C),this.buffers[1].data=new Float32Array(m),this.indexBuffer.data=new Uint16Array(p),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}I.PlaneGeometry=D},1108:function(at,I,w){"use strict";var b=w(3613);class D extends b.MeshGeometry{constructor(O=200,C,m=0){super(new Float32Array(C.length*4),new Float32Array(C.length*4),new Uint16Array((C.length-1)*6)),this.points=C,this._width=O,this.textureScale=m,this.build()}get width(){return this._width}build(){const O=this.points;if(!O)return;const C=this.getBuffer("aVertexPosition"),m=this.getBuffer("aTextureCoord"),p=this.getIndex();if(O.length<1)return;C.data.length/4!==O.length&&(C.data=new Float32Array(O.length*4),m.data=new Float32Array(O.length*4),p.data=new Uint16Array((O.length-1)*6));const v=m.data,y=p.data;v[0]=0,v[1]=0,v[2]=0,v[3]=1;let T=0,_=O[0];const A=this._width*this.textureScale,P=O.length;for(let B=0;B<P;B++){const G=B*4;if(this.textureScale>0){const k=_.x-O[B].x,X=_.y-O[B].y,Y=Math.sqrt(k*k+X*X);_=O[B],T+=Y/A}else T=B/(P-1);v[G]=T,v[G+1]=0,v[G+2]=T,v[G+3]=1}let x=0;for(let B=0;B<P-1;B++){const G=B*2;y[x++]=G,y[x++]=G+1,y[x++]=G+2,y[x++]=G+2,y[x++]=G+1,y[x++]=G+3}m.update(),p.update(),this.updateVertices()}updateVertices(){const O=this.points;if(O.length<1)return;let C=O[0],m,p=0,v=0;const y=this.buffers[0].data,T=O.length,_=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let A=0;A<T;A++){const P=O[A],x=A*4;A<O.length-1?m=O[A+1]:m=P,v=-(m.x-C.x),p=m.y-C.y;let B=(1-A/(T-1))*10;B>1&&(B=1);const G=Math.sqrt(p*p+v*v);G<1e-6?(p=0,v=0):(p/=G,v/=G,p*=_,v*=_),y[x]=P.x+p,y[x+1]=P.y+v,y[x+2]=P.x-p,y[x+3]=P.y-v,C=P}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}I.RopeGeometry=D},1427:function(at,I,w){"use strict";var b=w(1232),D=w(1108),M=w(704),O=w(3814),C=w(4021),m=w(9100);I.PlaneGeometry=b.PlaneGeometry,I.RopeGeometry=D.RopeGeometry,I.NineSlicePlane=M.NineSlicePlane,I.SimpleMesh=O.SimpleMesh,I.SimplePlane=C.SimplePlane,I.SimpleRope=m.SimpleRope},7299:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(4797);const O=new b.Point,C=new b.Polygon,m=class jm extends D.Container{constructor(y,T,_,A=b.DRAW_MODES.TRIANGLES){super(),this.geometry=y,this.shader=T,this.state=_||b.State.for2d(),this.drawMode=A,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=b.settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(y){this._geometry!==y&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=y,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(y){this.shader=y}get material(){return this.shader}set blendMode(y){this.state.blendMode=y}get blendMode(){return this.state.blendMode}set roundPixels(y){this._roundPixels!==y&&(this._transformID=-1),this._roundPixels=y}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(y){this.shader.tint=y}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(y){this.shader.texture=y}_render(y){const T=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===b.DRAW_MODES.TRIANGLES&&T.length<jm.BATCHABLE_SIZE*2?this._renderToBatch(y):this._renderDefault(y)}_renderDefault(y){const T=this.shader;T.alpha=this.worldAlpha,T.update&&T.update(),y.batch.flush(),T.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),y.shader.bind(T),y.state.set(this.state),y.geometry.bind(this.geometry,T),y.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(y){const T=this.geometry,_=this.shader;_.uvMatrix&&(_.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=T.indexBuffer.data,this._tintRGB=_._tintRGB,this._texture=_.texture;const A=this.material.pluginName;y.batch.setObjectRenderer(y.plugins[A]),y.plugins[A].render(this)}calculateVertices(){const y=this.geometry.buffers[0],T=y.data,_=y._updateID;if(_===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==T.length&&(this.vertexData=new Float32Array(T.length));const A=this.transform.worldTransform,P=A.a,x=A.b,B=A.c,G=A.d,k=A.tx,X=A.ty,Y=this.vertexData;for(let j=0;j<Y.length/2;j++){const st=T[j*2],tt=T[j*2+1];Y[j*2]=P*st+B*tt+k,Y[j*2+1]=x*st+G*tt+X}if(this._roundPixels){const j=b.settings.RESOLUTION;for(let st=0;st<Y.length;++st)Y[st]=Math.round(Y[st]*j)/j}this.vertexDirty=_}calculateUvs(){const y=this.geometry.buffers[1],T=this.shader;T.uvMatrix.isSimple?this.uvs=y.data:(this.batchUvs||(this.batchUvs=new M.MeshBatchUvs(y,T.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(y){if(!this.getBounds().contains(y.x,y.y))return!1;this.worldTransform.applyInverse(y,O);const T=this.geometry.getBuffer("aVertexPosition").data,_=C.points,A=this.geometry.getIndex().data,P=A.length,x=this.drawMode===4?3:1;for(let B=0;B+2<P;B+=x){const G=A[B]*2,k=A[B+1]*2,X=A[B+2]*2;if(_[0]=T[G],_[1]=T[G+1],_[2]=T[k],_[3]=T[k+1],_[4]=T[X],_[5]=T[X+1],C.contains(O.x,O.y))return!0}return!1}destroy(y){super.destroy(y),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};m.BATCHABLE_SIZE=100;let p=m;I.Mesh=p},4797:function(at,I){"use strict";class w{constructor(D,M){this.uvBuffer=D,this.uvMatrix=M,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(D){if(!D&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const M=this.uvBuffer.data;(!this.data||this.data.length!==M.length)&&(this.data=new Float32Array(M.length)),this.uvMatrix.multiplyUvs(M,this.data),this._updateID++}}I.MeshBatchUvs=w},9631:function(at,I,w){"use strict";var b=w(8405);class D extends b.Geometry{constructor(O,C,m){super();const p=new b.Buffer(O),v=new b.Buffer(C,!0),y=new b.Buffer(m,!0,!0);this.addAttribute("aVertexPosition",p,2,!1,b.TYPES.FLOAT).addAttribute("aTextureCoord",v,2,!1,b.TYPES.FLOAT).addIndex(y),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}I.MeshGeometry=D},7512:function(at,I,w){"use strict";var b=w(8405),D=w(2567),M=w(6443);class O extends b.Shader{constructor(m,p){const v={uSampler:m,alpha:1,uTextureMatrix:b.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};p=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},p),p.uniforms&&Object.assign(v,p.uniforms),super(p.program||b.Program.from(M.default,D.default),v),this._colorDirty=!1,this.uvMatrix=new b.TextureMatrix(m),this.batchable=p.program===void 0,this.pluginName=p.pluginName,this._tintColor=new b.Color(p.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=p.alpha}get texture(){return this.uniforms.uSampler}set texture(m){this.uniforms.uSampler!==m&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!m.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=m,this.uvMatrix.texture=m)}set alpha(m){m!==this._alpha&&(this._alpha=m,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(m){m!==this.tint&&(this._tintColor.setValue(m),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const m=this.texture.baseTexture.alphaMode;b.Color.shared.setValue(this._tintColor).premultiply(this._alpha,m).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}I.MeshMaterial=O},3613:function(at,I,w){"use strict";var b=w(7299),D=w(4797),M=w(9631),O=w(7512);I.Mesh=b.Mesh,I.MeshBatchUvs=D.MeshBatchUvs,I.MeshGeometry=M.MeshGeometry,I.MeshMaterial=O.MeshMaterial},2567:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`;I.default=w},6443:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;I.default=w},5916:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(9779);const O=new b.Matrix;D.DisplayObject.prototype._cacheAsBitmap=!1,D.DisplayObject.prototype._cacheData=null,D.DisplayObject.prototype._cacheAsBitmapResolution=null,D.DisplayObject.prototype._cacheAsBitmapMultisample=null;class C{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(D.DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(m){m!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=m,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(m){m!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=m,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(m){if(this._cacheAsBitmap===m)return;this._cacheAsBitmap=m;let p;m?(this._cacheData||(this._cacheData=new C),p=this._cacheData,p.originalRender=this.render,p.originalRenderCanvas=this.renderCanvas,p.originalUpdateTransform=this.updateTransform,p.originalCalculateBounds=this.calculateBounds,p.originalGetLocalBounds=this.getLocalBounds,p.originalDestroy=this.destroy,p.originalContainsPoint=this.containsPoint,p.originalMask=this._mask,p.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(p=this._cacheData,p.sprite&&this._destroyCachedDisplayObject(),this.render=p.originalRender,this.renderCanvas=p.originalRenderCanvas,this.calculateBounds=p.originalCalculateBounds,this.getLocalBounds=p.originalGetLocalBounds,this.destroy=p.originalDestroy,this.updateTransform=p.originalUpdateTransform,this.containsPoint=p.originalContainsPoint,this._mask=p.originalMask,this.filterArea=p.originalFilterArea)}}}),D.DisplayObject.prototype._renderCached=function(m){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(m),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(m))},D.DisplayObject.prototype._initCachedDisplayObject=function(m){var X,Y,j;if((X=this._cacheData)!=null&&X.sprite)return;const p=this.alpha;this.alpha=1,m.batch.flush();const v=this.getLocalBounds(new b.Rectangle,!0);if((Y=this.filters)!=null&&Y.length){const st=this.filters[0].padding;v.pad(st)}const y=this.cacheAsBitmapResolution||m.resolution;v.ceil(y),v.width=Math.max(v.width,1/y),v.height=Math.max(v.height,1/y);const T=m.renderTexture.current,_=m.renderTexture.sourceFrame.clone(),A=m.renderTexture.destinationFrame.clone(),P=m.projection.transform,x=b.RenderTexture.create({width:v.width,height:v.height,resolution:y,multisample:(j=this.cacheAsBitmapMultisample)!=null?j:m.multisample}),B=`cacheAsBitmap_${b.utils.uid()}`;this._cacheData.textureCacheId=B,b.BaseTexture.addToCache(x.baseTexture,B),b.Texture.addToCache(x,B);const G=this.transform.localTransform.copyTo(O).invert().translate(-v.x,-v.y);this.render=this._cacheData.originalRender,m.render(this,{renderTexture:x,clear:!0,transform:G,skipUpdateTransform:!1}),m.framebuffer.blit(),m.projection.transform=P,m.renderTexture.bind(T,_,A),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=p;const k=new M.Sprite(x);k.transform.worldTransform=this.transform.worldTransform,k.anchor.x=-(v.x/v.width),k.anchor.y=-(v.y/v.height),k.alpha=p,k._bounds=this._bounds,this._cacheData.sprite=k,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=k.containsPoint.bind(k)},D.DisplayObject.prototype._renderCachedCanvas=function(m){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(m),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(m))},D.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(m){var G;if((G=this._cacheData)!=null&&G.sprite)return;const p=this.getLocalBounds(new b.Rectangle,!0),v=this.alpha;this.alpha=1;const y=m.canvasContext.activeContext,T=m._projTransform,_=this.cacheAsBitmapResolution||m.resolution;p.ceil(_),p.width=Math.max(p.width,1/_),p.height=Math.max(p.height,1/_);const A=b.RenderTexture.create({width:p.width,height:p.height,resolution:_}),P=`cacheAsBitmap_${b.utils.uid()}`;this._cacheData.textureCacheId=P,b.BaseTexture.addToCache(A.baseTexture,P),b.Texture.addToCache(A,P);const x=O;this.transform.localTransform.copyTo(x),x.invert(),x.tx-=p.x,x.ty-=p.y,this.renderCanvas=this._cacheData.originalRenderCanvas,m.render(this,{renderTexture:A,clear:!0,transform:x,skipUpdateTransform:!1}),m.canvasContext.activeContext=y,m._projTransform=T,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=v;const B=new M.Sprite(A);B.transform.worldTransform=this.transform.worldTransform,B.anchor.x=-(p.x/p.width),B.anchor.y=-(p.y/p.height),B.alpha=v,B._bounds=this._bounds,this._cacheData.sprite=B,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=m._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=B.containsPoint.bind(B)},D.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},D.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},D.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,b.BaseTexture.removeFromCache(this._cacheData.textureCacheId),b.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},D.DisplayObject.prototype._cacheAsBitmapDestroy=function(m){this.cacheAsBitmap=!1,this.destroy(m)},I.CacheData=C},4728:function(at,I,w){"use strict";var b=w(4784);b.DisplayObject.prototype.name=null,b.Container.prototype.getChildByName=function(D,M){for(let O=0,C=this.children.length;O<C;O++)if(this.children[O].name===D)return this.children[O];if(M)for(let O=0,C=this.children.length;O<C;O++){const m=this.children[O];if(!m.getChildByName)continue;const p=m.getChildByName(D,!0);if(p)return p}return null}},1125:function(at,I,w){"use strict";var b=w(8405),D=w(4784);D.DisplayObject.prototype.getGlobalPosition=function(M=new b.Point,O=!1){return this.parent?this.parent.toGlobal(this.position,M,O):(M.x=this.position.x,M.y=this.position.y),M}},430:function(at,I,w){"use strict";var b=w(8405);class D{constructor(O,C,m){this.geometry=new b.Geometry,this.indexBuffer=null,this.size=m,this.dynamicProperties=[],this.staticProperties=[];for(let p=0;p<O.length;++p){let v=O[p];v={attributeName:v.attributeName,size:v.size,uploadFunction:v.uploadFunction,type:v.type||b.TYPES.FLOAT,offset:v.offset},C[p]?this.dynamicProperties.push(v):this.staticProperties.push(v)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const O=this.geometry;let C=0;this.indexBuffer=new b.Buffer(b.utils.createIndicesForQuads(this.size),!0,!0),O.addIndex(this.indexBuffer),this.dynamicStride=0;for(let y=0;y<this.dynamicProperties.length;++y){const T=this.dynamicProperties[y];T.offset=C,C+=T.size,this.dynamicStride+=T.size}const m=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(m),this.dynamicDataUint32=new Uint32Array(m),this.dynamicBuffer=new b.Buffer(this.dynamicData,!1,!1);let p=0;this.staticStride=0;for(let y=0;y<this.staticProperties.length;++y){const T=this.staticProperties[y];T.offset=p,p+=T.size,this.staticStride+=T.size}const v=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(v),this.staticDataUint32=new Uint32Array(v),this.staticBuffer=new b.Buffer(this.staticData,!0,!1);for(let y=0;y<this.dynamicProperties.length;++y){const T=this.dynamicProperties[y];O.addAttribute(T.attributeName,this.dynamicBuffer,0,T.type===b.TYPES.UNSIGNED_BYTE,T.type,this.dynamicStride*4,T.offset*4)}for(let y=0;y<this.staticProperties.length;++y){const T=this.staticProperties[y];O.addAttribute(T.attributeName,this.staticBuffer,0,T.type===b.TYPES.UNSIGNED_BYTE,T.type,this.staticStride*4,T.offset*4)}}uploadDynamic(O,C,m){for(let p=0;p<this.dynamicProperties.length;p++){const v=this.dynamicProperties[p];v.uploadFunction(O,C,m,v.type===b.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,v.offset)}this.dynamicBuffer._updateID++}uploadStatic(O,C,m){for(let p=0;p<this.staticProperties.length;p++){const v=this.staticProperties[p];v.uploadFunction(O,C,m,v.type===b.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,v.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}I.ParticleBuffer=D},3148:function(at,I,w){"use strict";var b=w(8405),D=w(4784);class M extends D.Container{constructor(C=1500,m,p=16384,v=!1){super();const y=16384;p>y&&(p=y),this._properties=[!1,!0,!1,!1,!1],this._maxSize=C,this._batchSize=p,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=b.BLEND_MODES.NORMAL,this.autoResize=v,this.roundPixels=!0,this.baseTexture=null,this.setProperties(m),this._tintColor=new b.Color(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(C){C&&(this._properties[0]="vertices"in C||"scale"in C?!!C.vertices||!!C.scale:this._properties[0],this._properties[1]="position"in C?!!C.position:this._properties[1],this._properties[2]="rotation"in C?!!C.rotation:this._properties[2],this._properties[3]="uvs"in C?!!C.uvs:this._properties[3],this._properties[4]="tint"in C||"alpha"in C?!!C.tint||!!C.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(C){this._tintColor.setValue(C),this._tintColor.toRgbArray(this.tintRgb)}render(C){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),C.batch.setObjectRenderer(C.plugins.particle),C.plugins.particle.render(this))}onChildrenChange(C){const m=Math.floor(C/this._batchSize);for(;this._bufferUpdateIDs.length<m;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[m]=++this._updateID}dispose(){if(this._buffers){for(let C=0;C<this._buffers.length;++C)this._buffers[C].destroy();this._buffers=null}}destroy(C){super.destroy(C),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}I.ParticleContainer=M},2767:function(at,I,w){"use strict";var b=w(8405),D=w(430),M=w(6251),O=w(8874);class C extends b.ObjectRenderer{constructor(p){super(p),this.shader=null,this.properties=null,this.tempMatrix=new b.Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:b.TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=b.Shader.from(O.default,M.default,{}),this.state=b.State.for2d()}render(p){const v=p.children,y=p._maxSize,T=p._batchSize,_=this.renderer;let A=v.length;if(A===0)return;A>y&&!p.autoResize&&(A=y);let P=p._buffers;P||(P=p._buffers=this.generateBuffers(p));const x=v[0]._texture.baseTexture,B=x.alphaMode>0;this.state.blendMode=b.utils.correctBlendMode(p.blendMode,B),_.state.set(this.state);const G=_.gl,k=p.worldTransform.copyTo(this.tempMatrix);k.prepend(_.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=k.toArray(!0),this.shader.uniforms.uColor=b.Color.shared.setValue(p.tintRgb).premultiply(p.worldAlpha,B).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=x,this.renderer.shader.bind(this.shader);let X=!1;for(let Y=0,j=0;Y<A;Y+=T,j+=1){let st=A-Y;st>T&&(st=T),j>=P.length&&P.push(this._generateOneMoreBuffer(p));const tt=P[j];tt.uploadDynamic(v,Y,st);const rt=p._bufferUpdateIDs[j]||0;X=X||tt._updateID<rt,X&&(tt._updateID=p._updateID,tt.uploadStatic(v,Y,st)),_.geometry.bind(tt.geometry),G.drawElements(G.TRIANGLES,st*6,G.UNSIGNED_SHORT,0)}}generateBuffers(p){const v=[],y=p._maxSize,T=p._batchSize,_=p._properties;for(let A=0;A<y;A+=T)v.push(new D.ParticleBuffer(this.properties,_,T));return v}_generateOneMoreBuffer(p){const v=p._batchSize,y=p._properties;return new D.ParticleBuffer(this.properties,y,v)}uploadVertices(p,v,y,T,_,A){let P=0,x=0,B=0,G=0;for(let k=0;k<y;++k){const X=p[v+k],Y=X._texture,j=X.scale.x,st=X.scale.y,tt=Y.trim,rt=Y.orig;tt?(x=tt.x-X.anchor.x*rt.width,P=x+tt.width,G=tt.y-X.anchor.y*rt.height,B=G+tt.height):(P=rt.width*(1-X.anchor.x),x=rt.width*-X.anchor.x,B=rt.height*(1-X.anchor.y),G=rt.height*-X.anchor.y),T[A]=x*j,T[A+1]=G*st,T[A+_]=P*j,T[A+_+1]=G*st,T[A+_*2]=P*j,T[A+_*2+1]=B*st,T[A+_*3]=x*j,T[A+_*3+1]=B*st,A+=_*4}}uploadPosition(p,v,y,T,_,A){for(let P=0;P<y;P++){const x=p[v+P].position;T[A]=x.x,T[A+1]=x.y,T[A+_]=x.x,T[A+_+1]=x.y,T[A+_*2]=x.x,T[A+_*2+1]=x.y,T[A+_*3]=x.x,T[A+_*3+1]=x.y,A+=_*4}}uploadRotation(p,v,y,T,_,A){for(let P=0;P<y;P++){const x=p[v+P].rotation;T[A]=x,T[A+_]=x,T[A+_*2]=x,T[A+_*3]=x,A+=_*4}}uploadUvs(p,v,y,T,_,A){for(let P=0;P<y;++P){const x=p[v+P]._texture._uvs;x?(T[A]=x.x0,T[A+1]=x.y0,T[A+_]=x.x1,T[A+_+1]=x.y1,T[A+_*2]=x.x2,T[A+_*2+1]=x.y2,T[A+_*3]=x.x3,T[A+_*3+1]=x.y3,A+=_*4):(T[A]=0,T[A+1]=0,T[A+_]=0,T[A+_+1]=0,T[A+_*2]=0,T[A+_*2+1]=0,T[A+_*3]=0,T[A+_*3+1]=0,A+=_*4)}}uploadTint(p,v,y,T,_,A){for(let P=0;P<y;++P){const x=p[v+P],B=b.Color.shared.setValue(x._tintRGB).toPremultiplied(x.alpha,x.texture.baseTexture.alphaMode>0);T[A]=B,T[A+_]=B,T[A+_*2]=B,T[A+_*3]=B,A+=_*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}C.extension={name:"particle",type:b.ExtensionType.RendererPlugin},b.extensions.add(C),I.ParticleRenderer=C},3953:function(at,I,w){"use strict";var b=w(3148),D=w(2767);I.ParticleContainer=b.ParticleContainer,I.ParticleRenderer=D.ParticleRenderer},6251:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`;I.default=w},8874:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;I.default=w},1361:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(2862),O=w(893);function C(x,B){var k;let G=!1;if((k=x==null?void 0:x._textures)!=null&&k.length){for(let X=0;X<x._textures.length;X++)if(x._textures[X]instanceof b.Texture){const Y=x._textures[X].baseTexture;B.includes(Y)||(B.push(Y),G=!0)}}return G}function m(x,B){if(x.baseTexture instanceof b.BaseTexture){const G=x.baseTexture;return B.includes(G)||B.push(G),!0}return!1}function p(x,B){if(x._texture&&x._texture instanceof b.Texture){const G=x._texture.baseTexture;return B.includes(G)||B.push(G),!0}return!1}function v(x,B){return B instanceof M.Text?(B.updateText(!0),!0):!1}function y(x,B){if(B instanceof M.TextStyle){const G=B.toFontString();return M.TextMetrics.measureFont(G),!0}return!1}function T(x,B){if(x instanceof M.Text){B.includes(x.style)||B.push(x.style),B.includes(x)||B.push(x);const G=x._texture.baseTexture;return B.includes(G)||B.push(G),!0}return!1}function _(x,B){return x instanceof M.TextStyle?(B.includes(x)||B.push(x),!0):!1}const A=class Xm{constructor(B){this.limiter=new O.CountLimiter(Xm.uploadsPerFrame),this.renderer=B,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(T),this.registerFindHook(_),this.registerFindHook(C),this.registerFindHook(m),this.registerFindHook(p),this.registerUploadHook(v),this.registerUploadHook(y)}upload(B){return new Promise(G=>{B&&this.add(B),this.queue.length?(this.completes.push(G),this.ticking||(this.ticking=!0,b.Ticker.system.addOnce(this.tick,this,b.UPDATE_PRIORITY.UTILITY))):G()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const B=this.queue[0];let G=!1;if(B&&!B._destroyed){for(let k=0,X=this.uploadHooks.length;k<X;k++)if(this.uploadHooks[k](this.uploadHookHelper,B)){this.queue.shift(),G=!0;break}}G||this.queue.shift()}if(this.queue.length)b.Ticker.system.addOnce(this.tick,this,b.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const B=this.completes.slice(0);this.completes.length=0;for(let G=0,k=B.length;G<k;G++)B[G]()}}registerFindHook(B){return B&&this.addHooks.push(B),this}registerUploadHook(B){return B&&this.uploadHooks.push(B),this}add(B){for(let G=0,k=this.addHooks.length;G<k&&!this.addHooks[G](B,this.queue);G++);if(B instanceof D.Container)for(let G=B.children.length-1;G>=0;G--)this.add(B.children[G]);return this}destroy(){this.ticking&&b.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};A.uploadsPerFrame=4;let P=A;I.BasePrepare=P},893:function(at,I){"use strict";class w{constructor(D){this.maxItemsPerFrame=D,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}I.CountLimiter=w},6126:function(at,I,w){"use strict";var b=w(8405),D=w(6325),M=w(1361);function O(v,y){return y instanceof b.BaseTexture?(y._glTextures[v.CONTEXT_UID]||v.texture.bind(y),!0):!1}function C(v,y){if(!(y instanceof D.Graphics))return!1;const{geometry:T}=y;y.finishPoly(),T.updateBatches();const{batches:_}=T;for(let A=0;A<_.length;A++){const{texture:P}=_[A].style;P&&O(v,P.baseTexture)}return T.batchable||v.geometry.bind(T,y._resolveDirectShader(v)),!0}function m(v,y){return v instanceof D.Graphics?(y.push(v),!0):!1}class p extends M.BasePrepare{constructor(y){super(y),this.uploadHookHelper=this.renderer,this.registerFindHook(m),this.registerUploadHook(O),this.registerUploadHook(C)}}p.extension={name:"prepare",type:b.ExtensionType.RendererSystem},b.extensions.add(p),I.Prepare=p},8208:function(at,I){"use strict";class w{constructor(D){this.maxMilliseconds=D,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}I.TimeLimiter=w},8686:function(at,I,w){"use strict";w(559);var b=w(1361),D=w(893),M=w(6126),O=w(8208);I.BasePrepare=b.BasePrepare,I.CountLimiter=D.CountLimiter,I.Prepare=M.Prepare,I.TimeLimiter=O.TimeLimiter},559:function(at,I,w){"use strict";var b=w(8405),D=w(1361);Object.defineProperties(b.settings,{UPLOADS_PER_FRAME:{get(){return D.BasePrepare.uploadsPerFrame},set(M){b.utils.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),D.BasePrepare.uploadsPerFrame=M}}}),Object.defineProperty(I,"settings",{enumerable:!0,get:function(){return b.settings}})},9911:function(at,I){"use strict";class w{constructor(D){this.items=[],this._name=D,this._aliasCount=0}emit(D,M,O,C,m,p,v,y){if(arguments.length>8)throw new Error("max arguments reached");const{name:T,items:_}=this;this._aliasCount++;for(let A=0,P=_.length;A<P;A++)_[A][T](D,M,O,C,m,p,v,y);return _===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(D){return D[this._name]&&(this.ensureNonAliasedItems(),this.remove(D),this.items.push(D)),this}remove(D){const M=this.items.indexOf(D);return M!==-1&&(this.ensureNonAliasedItems(),this.items.splice(M,1)),this}contains(D){return this.items.includes(D)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(w.prototype,{dispatch:{value:w.prototype.emit},run:{value:w.prototype.emit}}),I.Runner=w},255:function(at,I,w){"use strict";var b=w(9911);I.Runner=b.Runner},5871:function(){"use strict"},2291:function(){"use strict"},3797:function(at,I){"use strict";const w={createCanvas:(b,D)=>{const M=document.createElement("canvas");return M.width=b,M.height=D,M},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var b;return(b=document.baseURI)!=null?b:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(b,D)=>fetch(b,D),parseXML:b=>new DOMParser().parseFromString(b,"text/xml")};I.BrowserAdapter=w},1524:function(at,I,w){"use strict";var b=w(3797);w(5871),w(2291);var D=w(982),M=w(9407);I.BrowserAdapter=b.BrowserAdapter,I.settings=D.settings,I.isMobile=M.isMobile},982:function(at,I,w){"use strict";var b=w(3797);const D={ADAPTER:b.BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};I.settings=D},9407:function(at,I,w){"use strict";var O;var b=w(9516);const D=(O=b.default)!=null?O:b,M=D(globalThis.navigator);I.isMobile=M},5054:function(at,I,w){"use strict";var b=w(8405),D=w(9779);class M extends D.Sprite{constructor(C,m=!0){super(C[0]instanceof b.Texture?C[0]:C[0].texture),this._textures=null,this._durations=null,this._autoUpdate=m,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=C}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(b.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(b.Ticker.shared.add(this.update,this,b.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(C){this.stop(),this.currentFrame=C}gotoAndPlay(C){this.currentFrame=C,this.play()}update(C){if(!this._playing)return;const m=this.animationSpeed*C,p=this.currentFrame;if(this._durations!==null){let v=this._currentTime%1*this._durations[this.currentFrame];for(v+=m/60*1e3;v<0;)this._currentTime--,v+=this._durations[this.currentFrame];const y=Math.sign(this.animationSpeed*C);for(this._currentTime=Math.floor(this._currentTime);v>=this._durations[this.currentFrame];)v-=this._durations[this.currentFrame]*y,this._currentTime+=y;this._currentTime+=v/this._durations[this.currentFrame]}else this._currentTime+=m;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):p!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<p||this.animationSpeed<0&&this.currentFrame>p)&&this.onLoop(),this.updateTexture())}updateTexture(){const C=this.currentFrame;this._previousFrame!==C&&(this._previousFrame=C,this._texture=this._textures[C],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(C){this.stop(),super.destroy(C),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(C){const m=[];for(let p=0;p<C.length;++p)m.push(b.Texture.from(C[p]));return new M(m)}static fromImages(C){const m=[];for(let p=0;p<C.length;++p)m.push(b.Texture.from(C[p]));return new M(m)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(C){if(C[0]instanceof b.Texture)this._textures=C,this._durations=null;else{this._textures=[],this._durations=[];for(let m=0;m<C.length;m++)this._textures.push(C[m].texture),this._durations.push(C[m].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let C=Math.floor(this._currentTime)%this._textures.length;return C<0&&(C+=this._textures.length),C}set currentFrame(C){if(C<0||C>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${C}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const m=this.currentFrame;this._currentTime=C,m!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(C){C!==this._autoUpdate&&(this._autoUpdate=C,!this._autoUpdate&&this._isConnectedToTicker?(b.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(b.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}}I.AnimatedSprite=M},803:function(at,I,w){"use strict";var b=w(5054);I.AnimatedSprite=b.AnimatedSprite},299:function(at,I,w){"use strict";var b=w(8405),D=w(9779);const M=new b.Point;class O extends D.Sprite{constructor(m,p=100,v=100){super(m),this.tileTransform=new b.Transform,this._width=p,this._height=v,this.uvMatrix=this.texture.uvMatrix||new b.TextureMatrix(m),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(m){this.uvMatrix.clampMargin=m,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(m){this.tileTransform.scale.copyFrom(m)}get tilePosition(){return this.tileTransform.position}set tilePosition(m){this.tileTransform.position.copyFrom(m)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(m){const p=this._texture;!p||!p.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),m.batch.setObjectRenderer(m.plugins[this.pluginName]),m.plugins[this.pluginName].render(this))}_calculateBounds(){const m=this._width*-this._anchor._x,p=this._height*-this._anchor._y,v=this._width*(1-this._anchor._x),y=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,m,p,v,y)}getLocalBounds(m){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),m||(this._localBoundsRect||(this._localBoundsRect=new b.Rectangle),m=this._localBoundsRect),this._bounds.getRectangle(m)):super.getLocalBounds.call(this,m)}containsPoint(m){this.worldTransform.applyInverse(m,M);const p=this._width,v=this._height,y=-p*this.anchor._x;if(M.x>=y&&M.x<y+p){const T=-v*this.anchor._y;if(M.y>=T&&M.y<T+v)return!0}return!1}destroy(m){super.destroy(m),this.tileTransform=null,this.uvMatrix=null}static from(m,p){const v=m instanceof b.Texture?m:b.Texture.from(m,p);return new O(v,p.width,p.height)}get width(){return this._width}set width(m){this._width=m}get height(){return this._height}set height(m){this._height=m}}I.TilingSprite=O},7492:function(at,I,w){"use strict";var b=w(8405),D=w(1668),M=w(3428),O=w(1244),C=w(9643),m=w(9241);const p=new b.Matrix;class v extends b.ObjectRenderer{constructor(T){super(T),T.runners.contextChange.add(this),this.quad=new b.QuadUv,this.state=b.State.for2d()}contextChange(){const T=this.renderer,_={globals:T.globalUniforms};this.simpleShader=b.Shader.from(C.default,m.default,_),this.shader=T.context.webGLVersion>1?b.Shader.from(M.default,D.default,_):b.Shader.from(C.default,O.default,_)}render(T){const _=this.renderer,A=this.quad;let P=A.vertices;P[0]=P[6]=T._width*-T.anchor.x,P[1]=P[3]=T._height*-T.anchor.y,P[2]=P[4]=T._width*(1-T.anchor.x),P[5]=P[7]=T._height*(1-T.anchor.y);const x=T.uvRespectAnchor?T.anchor.x:0,B=T.uvRespectAnchor?T.anchor.y:0;P=A.uvs,P[0]=P[6]=-x,P[1]=P[3]=-B,P[2]=P[4]=1-x,P[5]=P[7]=1-B,A.invalidate();const G=T._texture,k=G.baseTexture,X=k.alphaMode>0,Y=T.tileTransform.localTransform,j=T.uvMatrix;let st=k.isPowerOfTwo&&G.frame.width===k.width&&G.frame.height===k.height;st&&(k._glTextures[_.CONTEXT_UID]?st=k.wrapMode!==b.WRAP_MODES.CLAMP:k.wrapMode===b.WRAP_MODES.CLAMP&&(k.wrapMode=b.WRAP_MODES.REPEAT));const tt=st?this.simpleShader:this.shader,rt=G.width,ct=G.height,pt=T._width,Rt=T._height;p.set(Y.a*rt/pt,Y.b*rt/Rt,Y.c*ct/pt,Y.d*ct/Rt,Y.tx/pt,Y.ty/Rt),p.invert(),st?p.prepend(j.mapCoord):(tt.uniforms.uMapCoord=j.mapCoord.toArray(!0),tt.uniforms.uClampFrame=j.uClampFrame,tt.uniforms.uClampOffset=j.uClampOffset),tt.uniforms.uTransform=p.toArray(!0),tt.uniforms.uColor=b.Color.shared.setValue(T.tint).premultiply(T.worldAlpha,X).toArray(tt.uniforms.uColor),tt.uniforms.translationMatrix=T.transform.worldTransform.toArray(!0),tt.uniforms.uSampler=G,_.shader.bind(tt),_.geometry.bind(A),this.state.blendMode=b.utils.correctBlendMode(T.blendMode,X),_.state.set(this.state),_.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}v.extension={name:"tilingSprite",type:b.ExtensionType.RendererPlugin},b.extensions.add(v),I.TilingSpriteRenderer=v},2075:function(at,I,w){"use strict";var b=w(299),D=w(7492);I.TilingSprite=b.TilingSprite,I.TilingSpriteRenderer=D.TilingSpriteRenderer},1244:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`;I.default=w},9643:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;I.default=w},9241:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;I.default=w},1668:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`;I.default=w},3428:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;I.default=w},7185:function(at,I,w){"use strict";var b=w(8405),D=w(4784);const M=new b.Point,O=new Uint16Array([0,1,2,0,2,3]);class C extends D.Container{constructor(p){super(),this._anchor=new b.ObservablePoint(this._onAnchorUpdate,this,p?p.defaultAnchor.x:0,p?p.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new b.Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=b.BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=p||b.Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=O,this.pluginName="batch",this.isSprite=!0,this._roundPixels=b.settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=b.utils.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=b.utils.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const p=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===p._updateID)return;this._textureID!==p._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=p._updateID;const v=this.transform.worldTransform,y=v.a,T=v.b,_=v.c,A=v.d,P=v.tx,x=v.ty,B=this.vertexData,G=p.trim,k=p.orig,X=this._anchor;let Y=0,j=0,st=0,tt=0;if(G?(j=G.x-X._x*k.width,Y=j+G.width,tt=G.y-X._y*k.height,st=tt+G.height):(j=-X._x*k.width,Y=j+k.width,tt=-X._y*k.height,st=tt+k.height),B[0]=y*j+_*tt+P,B[1]=A*tt+T*j+x,B[2]=y*Y+_*tt+P,B[3]=A*tt+T*Y+x,B[4]=y*Y+_*st+P,B[5]=A*st+T*Y+x,B[6]=y*j+_*st+P,B[7]=A*st+T*j+x,this._roundPixels){const rt=b.settings.RESOLUTION;for(let ct=0;ct<B.length;++ct)B[ct]=Math.round(B[ct]*rt)/rt}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const p=this._texture,v=this.vertexTrimmedData,y=p.orig,T=this._anchor,_=this.transform.worldTransform,A=_.a,P=_.b,x=_.c,B=_.d,G=_.tx,k=_.ty,X=-T._x*y.width,Y=X+y.width,j=-T._y*y.height,st=j+y.height;if(v[0]=A*X+x*j+G,v[1]=B*j+P*X+k,v[2]=A*Y+x*j+G,v[3]=B*j+P*Y+k,v[4]=A*Y+x*st+G,v[5]=B*st+P*Y+k,v[6]=A*X+x*st+G,v[7]=B*st+P*X+k,this._roundPixels){const tt=b.settings.RESOLUTION;for(let rt=0;rt<v.length;++rt)v[rt]=Math.round(v[rt]*tt)/tt}}_render(p){this.calculateVertices(),p.batch.setObjectRenderer(p.plugins[this.pluginName]),p.plugins[this.pluginName].render(this)}_calculateBounds(){const p=this._texture.trim,v=this._texture.orig;!p||p.width===v.width&&p.height===v.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(p){return this.children.length===0?(this._localBounds||(this._localBounds=new D.Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),p||(this._localBoundsRect||(this._localBoundsRect=new b.Rectangle),p=this._localBoundsRect),this._localBounds.getRectangle(p)):super.getLocalBounds.call(this,p)}containsPoint(p){this.worldTransform.applyInverse(p,M);const v=this._texture.orig.width,y=this._texture.orig.height,T=-v*this.anchor.x;let _=0;return M.x>=T&&M.x<T+v&&(_=-y*this.anchor.y,M.y>=_&&M.y<_+y)}destroy(p){if(super.destroy(p),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof p=="boolean"?p:p==null?void 0:p.texture){const v=typeof p=="boolean"?p:p==null?void 0:p.baseTexture;this._texture.destroy(!!v)}this._texture=null}static from(p,v){const y=p instanceof b.Texture?p:b.Texture.from(p,v);return new C(y)}set roundPixels(p){this._roundPixels!==p&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=p}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(p){const v=b.utils.sign(this.scale.x)||1;this.scale.x=v*p/this._texture.orig.width,this._width=p}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(p){const v=b.utils.sign(this.scale.y)||1;this.scale.y=v*p/this._texture.orig.height,this._height=p}get anchor(){return this._anchor}set anchor(p){this._anchor.copyFrom(p)}get tint(){return this._tintColor.value}set tint(p){this._tintColor.setValue(p),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(p){this._texture!==p&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=p||b.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,p&&(p.baseTexture.valid?this._onTextureUpdate():p.once("update",this._onTextureUpdate,this)))}}I.Sprite=C},9779:function(at,I,w){"use strict";var b=w(7185);I.Sprite=b.Sprite},3129:function(at,I,w){"use strict";var b=w(8405);const D=class Pc{constructor(C,m,p=null){this.linkedSheets=[],this._texture=C instanceof b.Texture?C:null,this.baseTexture=C instanceof b.BaseTexture?C:this._texture.baseTexture,this.textures={},this.animations={},this.data=m;const v=this.baseTexture.resource;this.resolution=this._updateResolution(p||(v?v.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(C=null){const{scale:m}=this.data.meta;let p=b.utils.getResolutionOfUrl(C,null);return p===null&&(p=parseFloat(m!=null?m:"1")),p!==1&&this.baseTexture.setResolution(p),p}parse(){return new Promise(C=>{this._callback=C,this._batchIndex=0,this._frameKeys.length<=Pc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(C){let m=C;const p=Pc.BATCH_SIZE;for(;m-C<p&&m<this._frameKeys.length;){const v=this._frameKeys[m],y=this._frames[v],T=y.frame;if(T){let _=null,A=null;const P=y.trimmed!==!1&&y.sourceSize?y.sourceSize:y.frame,x=new b.Rectangle(0,0,Math.floor(P.w)/this.resolution,Math.floor(P.h)/this.resolution);y.rotated?_=new b.Rectangle(Math.floor(T.x)/this.resolution,Math.floor(T.y)/this.resolution,Math.floor(T.h)/this.resolution,Math.floor(T.w)/this.resolution):_=new b.Rectangle(Math.floor(T.x)/this.resolution,Math.floor(T.y)/this.resolution,Math.floor(T.w)/this.resolution,Math.floor(T.h)/this.resolution),y.trimmed!==!1&&y.spriteSourceSize&&(A=new b.Rectangle(Math.floor(y.spriteSourceSize.x)/this.resolution,Math.floor(y.spriteSourceSize.y)/this.resolution,Math.floor(T.w)/this.resolution,Math.floor(T.h)/this.resolution)),this.textures[v]=new b.Texture(this.baseTexture,_,x,A,y.rotated?2:0,y.anchor,y.borders),b.Texture.addToCache(this.textures[v],v.toString())}m++}}_processAnimations(){const C=this.data.animations||{};for(const m in C){this.animations[m]=[];for(let p=0;p<C[m].length;p++){const v=C[m][p];this.animations[m].push(this.textures[v])}}}_parseComplete(){const C=this._callback;this._callback=null,this._batchIndex=0,C.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Pc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Pc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(C=!1){var m;for(const p in this.textures)this.textures[p].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,C&&((m=this._texture)==null||m.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};D.BATCH_SIZE=1e3;let M=D;I.Spritesheet=M},3804:function(at,I,w){"use strict";var b=w(3129),D=w(7629);I.Spritesheet=b.Spritesheet,I.spritesheetAsset=D.spritesheetAsset},7629:function(at,I,w){"use strict";var b=w(3520),D=w(8405),M=w(3129);const O=["jpg","png","jpeg","avif","webp"];function C(v,y,T){const _={};if(v.forEach(A=>{_[A]=y}),Object.keys(y.textures).forEach(A=>{_[A]=y.textures[A]}),!T){const A=D.utils.path.dirname(v[0]);y.linkedSheets.forEach((P,x)=>{const B=C([`${A}/${y.data.meta.related_multi_packs[x]}`],P,!0);Object.assign(_,B)})}return _}const m={extension:D.ExtensionType.Asset,cache:{test:v=>v instanceof M.Spritesheet,getCacheableAssets:(v,y)=>C(v,y,!1)},resolver:{test:v=>{const y=v.split("?")[0].split("."),T=y.pop(),_=y.pop();return T==="json"&&O.includes(_)},parse:v=>{var T,_;const y=v.split(".");return{resolution:parseFloat((_=(T=D.settings.RETINA_PREFIX.exec(v))==null?void 0:T[1])!=null?_:"1"),format:y[y.length-2],src:v}}},loader:{name:"spritesheetLoader",extension:{type:D.ExtensionType.LoadParser,priority:b.LoaderParserPriority.Normal},testParse(v,y){return he(this,null,function*(){return D.utils.path.extname(y.src).toLowerCase()===".json"&&!!v.frames})},parse(v,y,T){return he(this,null,function*(){var G,k;let _=D.utils.path.dirname(y.src);_&&_.lastIndexOf("/")!==_.length-1&&(_+="/");let A=_+v.meta.image;A=b.copySearchParams(A,y.src);const P=(yield T.load([A]))[A],x=new M.Spritesheet(P.baseTexture,v,y.src);yield x.parse();const B=(G=v==null?void 0:v.meta)==null?void 0:G.related_multi_packs;if(Array.isArray(B)){const X=[];for(const j of B){if(typeof j!="string")continue;let st=_+j;(k=y.data)!=null&&k.ignoreMultiPack||(st=b.copySearchParams(st,y.src),X.push(T.load({src:st,data:{ignoreMultiPack:!0}})))}const Y=yield Promise.all(X);x.linkedSheets=Y,Y.forEach(j=>{j.linkedSheets=[x].concat(x.linkedSheets.filter(st=>st!==j))})}return x})},unload(v){v.destroy(!0)}}};D.extensions.add(m),I.spritesheetAsset=m},7957:function(at,I,w){"use strict";var b=w(8405),D=w(2862),M=w(3870),O=w(8871);w(5757);var C=w(5550),m=w(9979),p=w(6612);const v=class mo{constructor(_,A,P){var j,st;const[x]=_.info,[B]=_.common,[G]=_.page,[k]=_.distanceField,X=b.utils.getResolutionOfUrl(G.file),Y={};this._ownsTextures=P,this.font=x.face,this.size=x.size,this.lineHeight=B.lineHeight/X,this.chars={},this.pageTextures=Y;for(let tt=0;tt<_.page.length;tt++){const{id:rt,file:ct}=_.page[tt];Y[rt]=A instanceof Array?A[tt]:A[ct],k!=null&&k.fieldType&&k.fieldType!=="none"&&(Y[rt].baseTexture.alphaMode=b.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,Y[rt].baseTexture.mipmap=b.MIPMAP_MODES.OFF)}for(let tt=0;tt<_.char.length;tt++){const{id:rt,page:ct}=_.char[tt];let{x:pt,y:Rt,width:Lt,height:ut,xoffset:xt,yoffset:At,xadvance:J}=_.char[tt];pt/=X,Rt/=X,Lt/=X,ut/=X,xt/=X,At/=X,J/=X;const ot=new b.Rectangle(pt+Y[ct].frame.x/X,Rt+Y[ct].frame.y/X,Lt,ut);this.chars[rt]={xOffset:xt,yOffset:At,xAdvance:J,kerning:{},texture:new b.Texture(Y[ct].baseTexture,ot),page:ct}}for(let tt=0;tt<_.kerning.length;tt++){let{first:rt,second:ct,amount:pt}=_.kerning[tt];rt/=X,ct/=X,pt/=X,this.chars[ct]&&(this.chars[ct].kerning[rt]=pt)}this.distanceFieldRange=k==null?void 0:k.distanceRange,this.distanceFieldType=(st=(j=k==null?void 0:k.fieldType)==null?void 0:j.toLowerCase())!=null?st:"none"}destroy(){for(const _ in this.chars)this.chars[_].texture.destroy(),this.chars[_].texture=null;for(const _ in this.pageTextures)this._ownsTextures&&this.pageTextures[_].destroy(!0),this.pageTextures[_]=null;this.chars=null,this.pageTextures=null}static install(_,A,P){let x;if(_ instanceof M.BitmapFontData)x=_;else{const G=O.autoDetectFormat(_);if(!G)throw new Error("Unrecognized data format for font.");x=G.parse(_)}A instanceof b.Texture&&(A=[A]);const B=new mo(x,A,P);return mo.available[B.font]=B,B}static uninstall(_){const A=mo.available[_];if(!A)throw new Error(`No font found named '${_}'`);A.destroy(),delete mo.available[_]}static from(_,A,P){if(!_)throw new Error("[BitmapFont] Property `name` is required.");const q=Object.assign({},mo.defaultOptions,P),{chars:x,padding:B,resolution:G,textureWidth:k,textureHeight:X}=q,Y=ps(q,["chars","padding","resolution","textureWidth","textureHeight"]),j=C.resolveCharacters(x),st=A instanceof D.TextStyle?A:new D.TextStyle(A),tt=k,rt=new M.BitmapFontData;rt.info[0]={face:st.fontFamily,size:st.fontSize},rt.common[0]={lineHeight:st.fontSize};let ct=0,pt=0,Rt,Lt,ut,xt=0;const At=[],J=[];for(let gt=0;gt<j.length;gt++){Rt||(Rt=b.settings.ADAPTER.createCanvas(),Rt.width=k,Rt.height=X,Lt=Rt.getContext("2d"),ut=new b.BaseTexture(Rt,He({resolution:G},Y)),At.push(ut),J.push(new b.Texture(ut)),rt.page.push({id:J.length-1,file:""}));const yt=j[gt],et=D.TextMetrics.measureText(yt,st,!1,Rt),ht=et.width,Et=Math.ceil(et.height),kt=Math.ceil((st.fontStyle==="italic"?2:1)*ht);if(pt>=X-Et*G){if(pt===0)throw new Error(`[BitmapFont] textureHeight ${X}px is too small (fontFamily: '${st.fontFamily}', fontSize: ${st.fontSize}px, char: '${yt}')`);--gt,Rt=null,Lt=null,ut=null,pt=0,ct=0,xt=0;continue}if(xt=Math.max(Et+et.fontProperties.descent,xt),kt*G+ct>=tt){if(ct===0)throw new Error(`[BitmapFont] textureWidth ${k}px is too small (fontFamily: '${st.fontFamily}', fontSize: ${st.fontSize}px, char: '${yt}')`);--gt,pt+=xt*G,pt=Math.ceil(pt),ct=0,xt=0;continue}m.drawGlyph(Rt,Lt,et,ct,pt,G,st);const Ft=p.extractCharCode(et.text);rt.char.push({id:Ft,page:J.length-1,x:ct/G,y:pt/G,width:kt,height:Et,xoffset:0,yoffset:0,xadvance:ht-(st.dropShadow?st.dropShadowDistance:0)-(st.stroke?st.strokeThickness:0)}),ct+=(kt+2*B)*G,ct=Math.ceil(ct)}if(!(P!=null&&P.skipKerning))for(let gt=0,yt=j.length;gt<yt;gt++){const et=j[gt];for(let ht=0;ht<yt;ht++){const Et=j[ht],kt=Lt.measureText(et).width,Ft=Lt.measureText(Et).width,Bt=Lt.measureText(et+Et).width-(kt+Ft);Bt&&rt.kerning.push({first:p.extractCharCode(et),second:p.extractCharCode(Et),amount:Bt})}}const ot=new mo(rt,J,!0);return mo.available[_]!==void 0&&mo.uninstall(_),mo.available[_]=ot,ot}};v.ALPHA=[["a","z"],["A","Z"]," "],v.NUMERIC=[["0","9"]],v.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],v.ASCII=[[" ","~"]],v.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:v.ALPHANUMERIC},v.available={};let y=v;I.BitmapFont=y},3870:function(at,I){"use strict";class w{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}I.BitmapFontData=w},375:function(at,I,w){"use strict";var b=w(8405),D=w(4784),M=w(3613),O=w(7957),C=w(4009),m=w(9899);w(5757);var p=w(6522),v=w(6612);const y=[],T=[],_=[],A=class Wm extends D.Container{constructor(B,G={}){super();const{align:k,tint:X,maxWidth:Y,letterSpacing:j,fontName:st,fontSize:tt}=Object.assign({},Wm.styleDefaults,G);if(!O.BitmapFont.available[st])throw new Error(`Missing BitmapFont "${st}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=k,this._tintColor=new b.Color(X),this._font=void 0,this._fontName=st,this._fontSize=tt,this.text=B,this._maxWidth=Y,this._maxLineHeight=0,this._letterSpacing=j,this._anchor=new b.ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=b.settings.ROUND_PIXELS,this.dirty=!0,this._resolution=b.settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Bt;const B=O.BitmapFont.available[this._fontName],G=this.fontSize,k=G/B.size,X=new b.Point,Y=[],j=[],st=[],tt=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",rt=p.splitTextToCharacters(tt),ct=this._maxWidth*B.size/G,pt=B.distanceFieldType==="none"?y:T;let Rt=null,Lt=0,ut=0,xt=0,At=-1,J=0,ot=0,q=0,gt=0;for(let Gt=0;Gt<rt.length;Gt++){const Ct=rt[Gt],jt=v.extractCharCode(Ct);if(/(?:\s)/.test(Ct)&&(At=Gt,J=Lt,gt++),Ct==="\r"||Ct===`
`){j.push(Lt),st.push(-1),ut=Math.max(ut,Lt),++xt,++ot,X.x=0,X.y+=B.lineHeight,Rt=null,gt=0;continue}const Kt=B.chars[jt];if(!Kt)continue;Rt&&Kt.kerning[Rt]&&(X.x+=Kt.kerning[Rt]);const ne=_.pop()||{texture:b.Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new b.Point};ne.texture=Kt.texture,ne.line=xt,ne.charCode=jt,ne.position.x=Math.round(X.x+Kt.xOffset+this._letterSpacing/2),ne.position.y=Math.round(X.y+Kt.yOffset),ne.prevSpaces=gt,Y.push(ne),Lt=ne.position.x+Math.max(Kt.xAdvance-Kt.xOffset,Kt.texture.orig.width),X.x+=Kt.xAdvance+this._letterSpacing,q=Math.max(q,Kt.yOffset+Kt.texture.height),Rt=jt,At!==-1&&ct>0&&X.x>ct&&(++ot,b.utils.removeItems(Y,1+At-ot,1+Gt-At),Gt=At,At=-1,j.push(J),st.push(Y.length>0?Y[Y.length-1].prevSpaces:0),ut=Math.max(ut,J),xt++,X.x=0,X.y+=B.lineHeight,Rt=null,gt=0)}const yt=rt[rt.length-1];yt!=="\r"&&yt!==`
`&&(/(?:\s)/.test(yt)&&(Lt=J),j.push(Lt),ut=Math.max(ut,Lt),st.push(-1));const et=[];for(let Gt=0;Gt<=xt;Gt++){let Ct=0;this._align==="right"?Ct=ut-j[Gt]:this._align==="center"?Ct=(ut-j[Gt])/2:this._align==="justify"&&(Ct=st[Gt]<0?0:(ut-j[Gt])/st[Gt]),et.push(Ct)}const ht=Y.length,Et={},kt=[],Ft=this._activePagesMeshData;pt.push(...Ft);for(let Gt=0;Gt<ht;Gt++){const Ct=Y[Gt].texture,jt=Ct.baseTexture.uid;if(!Et[jt]){let Kt=pt.pop();if(!Kt){const me=new M.MeshGeometry;let ue,Oe;B.distanceFieldType==="none"?(ue=new M.MeshMaterial(b.Texture.EMPTY),Oe=b.BLEND_MODES.NORMAL):(ue=new M.MeshMaterial(b.Texture.EMPTY,{program:b.Program.from(m.default,C.default),uniforms:{uFWidth:0}}),Oe=b.BLEND_MODES.NORMAL_NPM);const de=new M.Mesh(me,ue);de.blendMode=Oe,Kt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:de,vertices:null,uvs:null,indices:null}}Kt.index=0,Kt.indexCount=0,Kt.vertexCount=0,Kt.uvsCount=0,Kt.total=0;const{_textureCache:ne}=this;ne[jt]=ne[jt]||new b.Texture(Ct.baseTexture),Kt.mesh.texture=ne[jt],Kt.mesh.tint=this._tintColor.value,kt.push(Kt),Et[jt]=Kt}Et[jt].total++}for(let Gt=0;Gt<Ft.length;Gt++)kt.includes(Ft[Gt])||this.removeChild(Ft[Gt].mesh);for(let Gt=0;Gt<kt.length;Gt++)kt[Gt].mesh.parent!==this&&this.addChild(kt[Gt].mesh);this._activePagesMeshData=kt;for(const Gt in Et){const Ct=Et[Gt],jt=Ct.total;if(!(((Bt=Ct.indices)==null?void 0:Bt.length)>6*jt)||Ct.vertices.length<M.Mesh.BATCHABLE_SIZE*2)Ct.vertices=new Float32Array(4*2*jt),Ct.uvs=new Float32Array(4*2*jt),Ct.indices=new Uint16Array(6*jt);else{const Kt=Ct.total,ne=Ct.vertices;for(let me=Kt*4*2;me<ne.length;me++)ne[me]=0}Ct.mesh.size=6*jt}for(let Gt=0;Gt<ht;Gt++){const Ct=Y[Gt];let jt=Ct.position.x+et[Ct.line]*(this._align==="justify"?Ct.prevSpaces:1);this._roundPixels&&(jt=Math.round(jt));const Kt=jt*k,ne=Ct.position.y*k,me=Ct.texture,ue=Et[me.baseTexture.uid],Oe=me.frame,de=me._uvs,oe=ue.index++;ue.indices[oe*6+0]=0+oe*4,ue.indices[oe*6+1]=1+oe*4,ue.indices[oe*6+2]=2+oe*4,ue.indices[oe*6+3]=0+oe*4,ue.indices[oe*6+4]=2+oe*4,ue.indices[oe*6+5]=3+oe*4,ue.vertices[oe*8+0]=Kt,ue.vertices[oe*8+1]=ne,ue.vertices[oe*8+2]=Kt+Oe.width*k,ue.vertices[oe*8+3]=ne,ue.vertices[oe*8+4]=Kt+Oe.width*k,ue.vertices[oe*8+5]=ne+Oe.height*k,ue.vertices[oe*8+6]=Kt,ue.vertices[oe*8+7]=ne+Oe.height*k,ue.uvs[oe*8+0]=de.x0,ue.uvs[oe*8+1]=de.y0,ue.uvs[oe*8+2]=de.x1,ue.uvs[oe*8+3]=de.y1,ue.uvs[oe*8+4]=de.x2,ue.uvs[oe*8+5]=de.y2,ue.uvs[oe*8+6]=de.x3,ue.uvs[oe*8+7]=de.y3}this._textWidth=ut*k,this._textHeight=(X.y+B.lineHeight)*k;for(const Gt in Et){const Ct=Et[Gt];if(this.anchor.x!==0||this.anchor.y!==0){let me=0;const ue=this._textWidth*this.anchor.x,Oe=this._textHeight*this.anchor.y;for(let de=0;de<Ct.total;de++)Ct.vertices[me++]-=ue,Ct.vertices[me++]-=Oe,Ct.vertices[me++]-=ue,Ct.vertices[me++]-=Oe,Ct.vertices[me++]-=ue,Ct.vertices[me++]-=Oe,Ct.vertices[me++]-=ue,Ct.vertices[me++]-=Oe}this._maxLineHeight=q*k;const jt=Ct.mesh.geometry.getBuffer("aVertexPosition"),Kt=Ct.mesh.geometry.getBuffer("aTextureCoord"),ne=Ct.mesh.geometry.getIndex();jt.data=Ct.vertices,Kt.data=Ct.uvs,ne.data=Ct.indices,jt.update(),Kt.update(),ne.update()}for(let Gt=0;Gt<Y.length;Gt++)_.push(Y[Gt]);this._font=B,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(B){this._autoResolution&&this._resolution!==B.resolution&&(this._resolution=B.resolution,this.dirty=!0);const{distanceFieldRange:G,distanceFieldType:k,size:X}=O.BitmapFont.available[this._fontName];if(k!=="none"){const{a:Y,b:j,c:st,d:tt}=this.worldTransform,rt=Math.sqrt(Y*Y+j*j),ct=Math.sqrt(st*st+tt*tt),pt=(Math.abs(rt)+Math.abs(ct))/2,Rt=this.fontSize/X,Lt=B._view.resolution;for(const ut of this._activePagesMeshData)ut.mesh.shader.uniforms.uFWidth=pt*G*Rt*Lt}super._render(B)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const B=O.BitmapFont.available[this._fontName];if(!B)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==B&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(B){if(this.tint!==B){this._tintColor.setValue(B);for(let G=0;G<this._activePagesMeshData.length;G++)this._activePagesMeshData[G].mesh.tint=B}}get align(){return this._align}set align(B){this._align!==B&&(this._align=B,this.dirty=!0)}get fontName(){return this._fontName}set fontName(B){if(!O.BitmapFont.available[B])throw new Error(`Missing BitmapFont "${B}"`);this._fontName!==B&&(this._fontName=B,this.dirty=!0)}get fontSize(){var B;return(B=this._fontSize)!=null?B:O.BitmapFont.available[this._fontName].size}set fontSize(B){this._fontSize!==B&&(this._fontSize=B,this.dirty=!0)}get anchor(){return this._anchor}set anchor(B){typeof B=="number"?this._anchor.set(B):this._anchor.copyFrom(B)}get text(){return this._text}set text(B){B=String(B!=null?B:""),this._text!==B&&(this._text=B,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(B){this._maxWidth!==B&&(this._maxWidth=B,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(B){this._letterSpacing!==B&&(this._letterSpacing=B,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(B){B!==this._roundPixels&&(this._roundPixels=B,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(B){this._autoResolution=!1,this._resolution!==B&&(this._resolution=B,this.dirty=!0)}destroy(B){const{_textureCache:G}=this,k=O.BitmapFont.available[this._fontName].distanceFieldType==="none"?y:T;k.push(...this._activePagesMeshData);for(const X of this._activePagesMeshData)this.removeChild(X.mesh);this._activePagesMeshData=[],k.filter(X=>G[X.mesh.texture.baseTexture.uid]).forEach(X=>{X.mesh.texture=b.Texture.EMPTY});for(const X in G)G[X].destroy(),delete G[X];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(B)}};A.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let P=A;I.BitmapText=P},1839:function(){"use strict"},3944:function(at,I,w){"use strict";var b=w(3870);class D{static test(O){return typeof O=="string"&&O.startsWith("info face=")}static parse(O){const C=O.match(/^[a-z]+\s+.+$/gm),m={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const v in C){const y=C[v].match(/^[a-z]+/gm)[0],T=C[v].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),_={};for(const A in T){const P=T[A].split("="),x=P[0],B=P[1].replace(/"/gm,""),G=parseFloat(B),k=isNaN(G)?B:G;_[x]=k}m[y].push(_)}const p=new b.BitmapFontData;return m.info.forEach(v=>p.info.push({face:v.face,size:parseInt(v.size,10)})),m.common.forEach(v=>p.common.push({lineHeight:parseInt(v.lineHeight,10)})),m.page.forEach(v=>p.page.push({id:parseInt(v.id,10),file:v.file})),m.char.forEach(v=>p.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})),m.kerning.forEach(v=>p.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})),m.distanceField.forEach(v=>p.distanceField.push({distanceRange:parseInt(v.distanceRange,10),fieldType:v.fieldType})),p}}I.TextFormat=D},9142:function(at,I,w){"use strict";var b=w(3870);class D{static test(O){const C=O;return typeof O!="string"&&"getElementsByTagName"in O&&C.getElementsByTagName("page").length&&C.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(O){const C=new b.BitmapFontData,m=O.getElementsByTagName("info"),p=O.getElementsByTagName("common"),v=O.getElementsByTagName("page"),y=O.getElementsByTagName("char"),T=O.getElementsByTagName("kerning"),_=O.getElementsByTagName("distanceField");for(let A=0;A<m.length;A++)C.info.push({face:m[A].getAttribute("face"),size:parseInt(m[A].getAttribute("size"),10)});for(let A=0;A<p.length;A++)C.common.push({lineHeight:parseInt(p[A].getAttribute("lineHeight"),10)});for(let A=0;A<v.length;A++)C.page.push({id:parseInt(v[A].getAttribute("id"),10)||0,file:v[A].getAttribute("file")});for(let A=0;A<y.length;A++){const P=y[A];C.char.push({id:parseInt(P.getAttribute("id"),10),page:parseInt(P.getAttribute("page"),10)||0,x:parseInt(P.getAttribute("x"),10),y:parseInt(P.getAttribute("y"),10),width:parseInt(P.getAttribute("width"),10),height:parseInt(P.getAttribute("height"),10),xoffset:parseInt(P.getAttribute("xoffset"),10),yoffset:parseInt(P.getAttribute("yoffset"),10),xadvance:parseInt(P.getAttribute("xadvance"),10)})}for(let A=0;A<T.length;A++)C.kerning.push({first:parseInt(T[A].getAttribute("first"),10),second:parseInt(T[A].getAttribute("second"),10),amount:parseInt(T[A].getAttribute("amount"),10)});for(let A=0;A<_.length;A++)C.distanceField.push({fieldType:_[A].getAttribute("fieldType"),distanceRange:parseInt(_[A].getAttribute("distanceRange"),10)});return C}}I.XMLFormat=D},4031:function(at,I,w){"use strict";var b=w(8405),D=w(9142);class M{static test(C){return typeof C=="string"&&C.includes("<font>")?D.XMLFormat.test(b.settings.ADAPTER.parseXML(C)):!1}static parse(C){return D.XMLFormat.parse(b.settings.ADAPTER.parseXML(C))}}I.XMLStringFormat=M},8871:function(at,I,w){"use strict";var b=w(3944),D=w(9142),M=w(4031);const O=[b.TextFormat,D.XMLFormat,M.XMLStringFormat];function C(m){for(let p=0;p<O.length;p++)if(O[p].test(m))return O[p];return null}I.TextFormat=b.TextFormat,I.XMLFormat=D.XMLFormat,I.XMLStringFormat=M.XMLStringFormat,I.autoDetectFormat=C},21:function(at,I,w){"use strict";var b=w(7957),D=w(3870),M=w(375);w(1839);var O=w(8871),C=w(8692),m=w(3944),p=w(9142),v=w(4031);I.BitmapFont=b.BitmapFont,I.BitmapFontData=D.BitmapFontData,I.BitmapText=M.BitmapText,I.autoDetectFormat=O.autoDetectFormat,I.loadBitmapFont=C.loadBitmapFont,I.TextFormat=m.TextFormat,I.XMLFormat=p.XMLFormat,I.XMLStringFormat=v.XMLStringFormat},8692:function(at,I,w){"use strict";var b=w(3520),D=w(8405),M=w(7957);w(8871);var O=w(3944),C=w(4031);const m=[".xml",".fnt"],p={extension:{type:D.ExtensionType.LoadParser,priority:b.LoaderParserPriority.Normal},name:"loadBitmapFont",test(y){return m.includes(D.utils.path.extname(y).toLowerCase())},testParse(y){return he(this,null,function*(){return O.TextFormat.test(y)||C.XMLStringFormat.test(y)})},parse(y,T,_){return he(this,null,function*(){const A=O.TextFormat.test(y)?O.TextFormat.parse(y):C.XMLStringFormat.parse(y),{src:P}=T,{page:x}=A,B=[];for(let X=0;X<x.length;++X){const Y=x[X].file;let j=D.utils.path.join(D.utils.path.dirname(P),Y);j=b.copySearchParams(j,P),B.push(j)}const G=yield _.load(B),k=B.map(X=>G[X]);return M.BitmapFont.install(A,k,!0)})},load(y,T){return he(this,null,function*(){return(yield D.settings.ADAPTER.fetch(y)).text()})},unload(y){y.destroy()}};D.extensions.add(p),I.loadBitmapFont=p},4009:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`;I.default=w},9899:function(at,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;I.default=w},9979:function(at,I,w){"use strict";var b=w(8405),D=w(8102);function M(O,C,m,p,v,y,T){const _=m.text,A=m.fontProperties;C.translate(p,v),C.scale(y,y);const P=T.strokeThickness/2,x=-(T.strokeThickness/2);if(C.font=T.toFontString(),C.lineWidth=T.strokeThickness,C.textBaseline=T.textBaseline,C.lineJoin=T.lineJoin,C.miterLimit=T.miterLimit,C.fillStyle=D.generateFillStyle(O,C,T,y,[_],m),C.strokeStyle=T.stroke,T.dropShadow){const B=T.dropShadowColor,G=T.dropShadowBlur*y,k=T.dropShadowDistance*y;C.shadowColor=b.Color.shared.setValue(B).setAlpha(T.dropShadowAlpha).toRgbaString(),C.shadowBlur=G,C.shadowOffsetX=Math.cos(T.dropShadowAngle)*k,C.shadowOffsetY=Math.sin(T.dropShadowAngle)*k}else C.shadowColor="black",C.shadowBlur=0,C.shadowOffsetX=0,C.shadowOffsetY=0;T.stroke&&T.strokeThickness&&C.strokeText(_,P,x+m.lineHeight-A.descent),T.fill&&C.fillText(_,P,x+m.lineHeight-A.descent),C.setTransform(1,0,0,1,0,0),C.fillStyle="rgba(0, 0, 0, 0)"}I.drawGlyph=M},6612:function(at,I){"use strict";function w(b){return b.codePointAt?b.codePointAt(0):b.charCodeAt(0)}I.extractCharCode=w},8102:function(at,I,w){"use strict";var b=w(2862);function D(M,O,C,m,p,v){const y=C.fill;if(Array.isArray(y)){if(y.length===1)return y[0]}else return y;let T;const _=C.dropShadow?C.dropShadowDistance:0,A=C.padding||0,P=M.width/m-_-A*2,x=M.height/m-_-A*2,B=y.slice(),G=C.fillGradientStops.slice();if(!G.length){const k=B.length+1;for(let X=1;X<k;++X)G.push(X/k)}if(B.unshift(y[0]),G.unshift(0),B.push(y[y.length-1]),G.push(1),C.fillGradientType===b.TEXT_GRADIENT.LINEAR_VERTICAL){T=O.createLinearGradient(P/2,A,P/2,x+A);let k=0;const X=(v.fontProperties.fontSize+C.strokeThickness)/x;for(let Y=0;Y<p.length;Y++){const j=v.lineHeight*Y;for(let st=0;st<B.length;st++){let tt=0;typeof G[st]=="number"?tt=G[st]:tt=st/B.length;const rt=j/x+tt*X;let ct=Math.max(k,rt);ct=Math.min(ct,1),T.addColorStop(ct,B[st]),k=ct}}}else{T=O.createLinearGradient(A,x/2,P+A,x/2);const k=B.length+1;let X=1;for(let Y=0;Y<B.length;Y++){let j;typeof G[Y]=="number"?j=G[Y]:j=X/k,T.addColorStop(j,B[Y]),X++}}return T}I.generateFillStyle=D},5757:function(at,I,w){"use strict";var b=w(9979),D=w(6612),M=w(8102),O=w(5550),C=w(6522);I.drawGlyph=b.drawGlyph,I.extractCharCode=D.extractCharCode,I.generateFillStyle=M.generateFillStyle,I.resolveCharacters=O.resolveCharacters,I.splitTextToCharacters=C.splitTextToCharacters},5550:function(at,I,w){"use strict";var b=w(6522);function D(M){typeof M=="string"&&(M=[M]);const O=[];for(let C=0,m=M.length;C<m;C++){const p=M[C];if(Array.isArray(p)){if(p.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${p.length}.`);const v=p[0].charCodeAt(0),y=p[1].charCodeAt(0);if(y<v)throw new Error("[BitmapFont]: Invalid character range.");for(let T=v,_=y;T<=_;T++)O.push(String.fromCharCode(T))}else O.push(...b.splitTextToCharacters(p))}if(O.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return O}I.resolveCharacters=D},6522:function(at,I){"use strict";function w(b){return Array.from?Array.from(b):b.split("")}I.splitTextToCharacters=w},2474:function(at,I,w){"use strict";var b=w(8405),D=w(9779),M=w(2862),O=w(4072);const C=class $u extends D.Sprite{constructor(v="",y={}){var X;super(b.Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const T=new Image,_=b.Texture.from(T,{scaleMode:b.settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});_.orig=new b.Rectangle,_.trim=new b.Rectangle,this.texture=_;const A="http://www.w3.org/2000/svg",P="http://www.w3.org/1999/xhtml",x=document.createElementNS(A,"svg"),B=document.createElementNS(A,"foreignObject"),G=document.createElementNS(P,"div"),k=document.createElementNS(P,"style");B.setAttribute("width","10000"),B.setAttribute("height","10000"),B.style.overflow="hidden",x.appendChild(B),this.maxWidth=$u.defaultMaxWidth,this.maxHeight=$u.defaultMaxHeight,this._domElement=G,this._styleElement=k,this._svgRoot=x,this._foreignObject=B,this._foreignObject.appendChild(k),this._foreignObject.appendChild(G),this._image=T,this._loadImage=new Image,this._autoResolution=$u.defaultAutoResolution,this._resolution=(X=$u.defaultResolution)!=null?X:b.settings.RESOLUTION,this.text=v,this.style=y}measureText(v){var k,X;const{text:y,style:T,resolution:_}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},v);Object.assign(this._domElement,{innerHTML:y,style:T.toCSS(_)}),this._styleElement.textContent=T.toGlobalCSS(),document.body.appendChild(this._svgRoot);const A=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:P,height:x}=A;(P>this.maxWidth||x>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const B=Math.min(this.maxWidth,Math.ceil(P)),G=Math.min(this.maxHeight,Math.ceil(x));return this._svgRoot.setAttribute("width",B.toString()),this._svgRoot.setAttribute("height",G.toString()),y!==this._text&&(this._domElement.innerHTML=this._text),T!==this._style&&(Object.assign(this._domElement,{style:(k=this._style)==null?void 0:k.toCSS(_)}),this._styleElement.textContent=(X=this._style)==null?void 0:X.toGlobalCSS()),{width:B+T.padding*2,height:G+T.padding*2}}updateText(v=!0){return he(this,null,function*(){const{style:y,_image:T,_loadImage:_}=this;if(this.localStyleID!==y.styleID&&(this.dirty=!0,this.localStyleID=y.styleID),!this.dirty&&v)return;const{width:A,height:P}=this.measureText();T.width=_.width=Math.ceil(Math.max(1,A)),T.height=_.height=Math.ceil(Math.max(1,P)),this._updateID++;const x=this._updateID;yield new Promise(B=>{_.onload=()=>he(this,null,function*(){if(x<this._updateID){B();return}yield y.onBeforeDraw(),T.src=_.src,_.onload=null,_.src="",this.updateTexture(),B()});const G=new XMLSerializer().serializeToString(this._svgRoot);_.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(G)}`})})}get source(){return this._image}updateTexture(){const{style:v,texture:y,_image:T,resolution:_}=this,{padding:A}=v,{baseTexture:P}=y;y.trim.width=y._frame.width=T.width/_,y.trim.height=y._frame.height=T.height/_,y.trim.x=-A,y.trim.y=-A,y.orig.width=y._frame.width-A*2,y.orig.height=y._frame.height-A*2,this._onTextureUpdate(),P.setRealSize(T.width,T.height,_),this.dirty=!1}_render(v){this._autoResolution&&this._resolution!==v.resolution&&(this._resolution=v.resolution,this.dirty=!0),this.updateText(!0),super._render(v)}_renderCanvas(v){this._autoResolution&&this._resolution!==v.resolution&&(this._resolution=v.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(v)}getLocalBounds(v){return this.updateText(!0),super.getLocalBounds(v)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(v){var T,_,A,P,x;typeof v=="boolean"&&(v={children:v}),v=Object.assign({},$u.defaultDestroyOptions,v),super.destroy(v);const y=null;this.ownsStyle&&((T=this._style)==null||T.cleanFonts()),this._style=y,(_=this._svgRoot)==null||_.remove(),this._svgRoot=y,(A=this._domElement)==null||A.remove(),this._domElement=y,(P=this._foreignObject)==null||P.remove(),this._foreignObject=y,(x=this._styleElement)==null||x.remove(),this._styleElement=y,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=y,this._image.src="",this._image=y}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(v){this.updateText(!0);const y=b.utils.sign(this.scale.x)||1;this.scale.x=y*v/this._image.width/this.resolution,this._width=v}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(v){this.updateText(!0);const y=b.utils.sign(this.scale.y)||1;this.scale.y=y*v/this._image.height/this.resolution,this._height=v}get style(){return this._style}set style(v){this._style!==v&&(v=v||{},v instanceof O.HTMLTextStyle?(this.ownsStyle=!1,this._style=v):v instanceof M.TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=O.HTMLTextStyle.from(v)):(this.ownsStyle=!0,this._style=new O.HTMLTextStyle(v)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(v){v=String(v===""||v===null||v===void 0?" ":v),v=this.sanitiseText(v),this._text!==v&&(this._text=v,this.dirty=!0)}get resolution(){return this._resolution}set resolution(v){this._autoResolution=!1,this._resolution!==v&&(this._resolution=v,this.dirty=!0)}sanitiseText(v){return v.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};C.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},C.defaultMaxWidth=2024,C.defaultMaxHeight=2024,C.defaultAutoResolution=!0;let m=C;I.HTMLText=m},4072:function(at,I,w){"use strict";var b=w(8405),D=w(2862);const M=class Yu extends D.TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(m){return new Yu(Object.keys(Yu.defaultOptions).reduce((p,v)=>gi(He({},p),{[v]:m[v]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(m=>{URL.revokeObjectURL(m.src),m.refs--,m.refs===0&&(m.fontFace&&document.fonts.delete(m.fontFace),delete Yu.availableFonts[m.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(m,p={}){const{availableFonts:v}=Yu;if(v[m]){const y=v[m];return this._fonts.push(y),y.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return b.settings.ADAPTER.fetch(m).then(y=>y.blob()).then(y=>he(this,null,function*(){return new Promise((T,_)=>{const A=URL.createObjectURL(y),P=new FileReader;P.onload=()=>T([A,P.result]),P.onerror=_,P.readAsDataURL(y)})})).then(_=>he(this,[_],function*([y,T]){const A=Object.assign({family:b.utils.path.basename(m,b.utils.path.extname(m)),weight:"normal",style:"normal",display:"auto",src:y,dataSrc:T,refs:1,originalUrl:m,fontFace:null},p);v[m]=A,this._fonts.push(A),this.styleID++;const P=new FontFace(A.family,`url(${A.src})`,{weight:A.weight,style:A.style,display:A.display});A.fontFace=P,yield P.load(),document.fonts.add(P),yield document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...m){const p=m.filter(v=>!this._overrides.includes(v));p.length>0&&(this._overrides.push(...p),this.styleID++)}removeOverride(...m){const p=m.filter(v=>this._overrides.includes(v));p.length>0&&(this._overrides=this._overrides.filter(v=>!p.includes(v)),this.styleID++)}toCSS(m){return[`transform: scale(${m})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((m,p)=>`${m}
            @font-face {
                font-family: "${p.family}";
                src: url('${p.dataSrc}');
                font-weight: ${p.weight};
                font-style: ${p.style};
                font-display: ${p.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(m){this._stylesheet!==m&&(this._stylesheet=m,this.styleID++)}normalizeColor(m){return Array.isArray(m)&&(m=b.utils.rgb2hex(m)),typeof m=="number"?b.utils.hex2string(m):m}dropShadowToCSS(){let m=this.normalizeColor(this.dropShadowColor);const p=this.dropShadowAlpha,v=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),y=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);m.startsWith("#")&&p<1&&(m+=(p*255|0).toString(16).padStart(2,"0"));const T=`${v}px ${y}px`;return this.dropShadowBlur>0?`text-shadow: ${T} ${this.dropShadowBlur}px ${m}`:`text-shadow: ${T} ${m}`}reset(){Object.assign(this,Yu.defaultOptions)}onBeforeDraw(){const{fontsDirty:m}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&m?new Promise(p=>setTimeout(p,100)):Promise.resolve()}get isSafari(){const{userAgent:m}=b.settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(m)}set fillGradientStops(m){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(m){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(m){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(m){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(m){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(m){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(m){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};M.availableFonts={},M.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let O=M;I.HTMLTextStyle=O},9050:function(at,I,w){"use strict";var b=w(2474),D=w(4072);I.HTMLText=b.HTMLText,I.HTMLTextStyle=D.HTMLTextStyle},9438:function(at,I,w){"use strict";var b=w(8405),D=w(9779),M=w(1160),O=w(1527),C=w(7719);const m={texture:!0,children:!1,baseTexture:!0},p=class Tp extends D.Sprite{constructor(T,_,A){var B;let P=!1;A||(A=b.settings.ADAPTER.createCanvas(),P=!0),A.width=3,A.height=3;const x=b.Texture.from(A);x.orig=new b.Rectangle,x.trim=new b.Rectangle,super(x),this._ownCanvas=P,this.canvas=A,this.context=A.getContext("2d",{willReadFrequently:!0}),this._resolution=(B=Tp.defaultResolution)!=null?B:b.settings.RESOLUTION,this._autoResolution=Tp.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=T,this.style=_,this.localStyleID=-1}static get experimentalLetterSpacing(){return O.TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(T){b.utils.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),O.TextMetrics.experimentalLetterSpacing=T}updateText(T){const _=this._style;if(this.localStyleID!==_.styleID&&(this.dirty=!0,this.localStyleID=_.styleID),!this.dirty&&T)return;this._font=this._style.toFontString();const A=this.context,P=O.TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),x=P.width,B=P.height,G=P.lines,k=P.lineHeight,X=P.lineWidths,Y=P.maxLineWidth,j=P.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,x)+_.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,B)+_.padding*2)*this._resolution),A.scale(this._resolution,this._resolution),A.clearRect(0,0,this.canvas.width,this.canvas.height),A.font=this._font,A.lineWidth=_.strokeThickness,A.textBaseline=_.textBaseline,A.lineJoin=_.lineJoin,A.miterLimit=_.miterLimit;let st,tt;const rt=_.dropShadow?2:1;for(let ct=0;ct<rt;++ct){const pt=_.dropShadow&&ct===0,Rt=pt?Math.ceil(Math.max(1,B)+_.padding*2):0,Lt=Rt*this._resolution;if(pt){A.fillStyle="black",A.strokeStyle="black";const xt=_.dropShadowColor,At=_.dropShadowBlur*this._resolution,J=_.dropShadowDistance*this._resolution;A.shadowColor=b.Color.shared.setValue(xt).setAlpha(_.dropShadowAlpha).toRgbaString(),A.shadowBlur=At,A.shadowOffsetX=Math.cos(_.dropShadowAngle)*J,A.shadowOffsetY=Math.sin(_.dropShadowAngle)*J+Lt}else A.fillStyle=this._generateFillStyle(_,G,P),A.strokeStyle=_.stroke,A.shadowColor="black",A.shadowBlur=0,A.shadowOffsetX=0,A.shadowOffsetY=0;let ut=(k-j.fontSize)/2;k-j.fontSize<0&&(ut=0);for(let xt=0;xt<G.length;xt++)st=_.strokeThickness/2,tt=_.strokeThickness/2+xt*k+j.ascent+ut,_.align==="right"?st+=Y-X[xt]:_.align==="center"&&(st+=(Y-X[xt])/2),_.stroke&&_.strokeThickness&&this.drawLetterSpacing(G[xt],st+_.padding,tt+_.padding-Rt,!0),_.fill&&this.drawLetterSpacing(G[xt],st+_.padding,tt+_.padding-Rt)}this.updateTexture()}drawLetterSpacing(T,_,A,P=!1){const x=this._style.letterSpacing;let B=!1;if(O.TextMetrics.experimentalLetterSpacingSupported&&(O.TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${x}px`,this.context.textLetterSpacing=`${x}px`,B=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),x===0||B){P?this.context.strokeText(T,_,A):this.context.fillText(T,_,A);return}let G=_;const k=O.TextMetrics.graphemeSegmenter(T);let X=this.context.measureText(T).width,Y=0;for(let j=0;j<k.length;++j){const st=k[j];P?this.context.strokeText(st,G,A):this.context.fillText(st,G,A);let tt="";for(let rt=j+1;rt<k.length;++rt)tt+=k[rt];Y=this.context.measureText(tt).width,G+=X-Y+x,X=Y}}updateTexture(){const T=this.canvas;if(this._style.trim){const B=b.utils.trimCanvas(T);B.data&&(T.width=B.width,T.height=B.height,this.context.putImageData(B.data,0,0))}const _=this._texture,A=this._style,P=A.trim?0:A.padding,x=_.baseTexture;_.trim.width=_._frame.width=T.width/this._resolution,_.trim.height=_._frame.height=T.height/this._resolution,_.trim.x=-P,_.trim.y=-P,_.orig.width=_._frame.width-P*2,_.orig.height=_._frame.height-P*2,this._onTextureUpdate(),x.setRealSize(T.width,T.height,this._resolution),_.updateUvs(),this.dirty=!1}_render(T){this._autoResolution&&this._resolution!==T.resolution&&(this._resolution=T.resolution,this.dirty=!0),this.updateText(!0),super._render(T)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(T,_){return this.updateText(!0),this._textureID===-1&&(T=!1),super.getBounds(T,_)}getLocalBounds(T){return this.updateText(!0),super.getLocalBounds.call(this,T)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(T,_,A){const P=T.fill;if(Array.isArray(P)){if(P.length===1)return P[0]}else return P;let x;const B=T.dropShadow?T.dropShadowDistance:0,G=T.padding||0,k=this.canvas.width/this._resolution-B-G*2,X=this.canvas.height/this._resolution-B-G*2,Y=P.slice(),j=T.fillGradientStops.slice();if(!j.length){const st=Y.length+1;for(let tt=1;tt<st;++tt)j.push(tt/st)}if(Y.unshift(P[0]),j.unshift(0),Y.push(P[P.length-1]),j.push(1),T.fillGradientType===M.TEXT_GRADIENT.LINEAR_VERTICAL){x=this.context.createLinearGradient(k/2,G,k/2,X+G);const st=A.fontProperties.fontSize+T.strokeThickness;for(let tt=0;tt<_.length;tt++){const rt=A.lineHeight*(tt-1)+st,ct=A.lineHeight*tt;let pt=ct;tt>0&&rt>ct&&(pt=(ct+rt)/2);const Rt=ct+st,Lt=A.lineHeight*(tt+1);let ut=Rt;tt+1<_.length&&Lt<Rt&&(ut=(Rt+Lt)/2);const xt=(ut-pt)/X;for(let At=0;At<Y.length;At++){let J=0;typeof j[At]=="number"?J=j[At]:J=At/Y.length;let ot=Math.min(1,Math.max(0,pt/X+J*xt));ot=Number(ot.toFixed(5)),x.addColorStop(ot,Y[At])}}}else{x=this.context.createLinearGradient(G,X/2,k+G,X/2);const st=Y.length+1;let tt=1;for(let rt=0;rt<Y.length;rt++){let ct;typeof j[rt]=="number"?ct=j[rt]:ct=tt/st,x.addColorStop(ct,Y[rt]),tt++}}return x}destroy(T){typeof T=="boolean"&&(T={children:T}),T=Object.assign({},m,T),super.destroy(T),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(T){this.updateText(!0);const _=b.utils.sign(this.scale.x)||1;this.scale.x=_*T/this._texture.orig.width,this._width=T}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(T){this.updateText(!0);const _=b.utils.sign(this.scale.y)||1;this.scale.y=_*T/this._texture.orig.height,this._height=T}get style(){return this._style}set style(T){T=T||{},T instanceof C.TextStyle?this._style=T:this._style=new C.TextStyle(T),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(T){T=String(T!=null?T:""),this._text!==T&&(this._text=T,this.dirty=!0)}get resolution(){return this._resolution}set resolution(T){this._autoResolution=!1,this._resolution!==T&&(this._resolution=T,this.dirty=!0)}};p.defaultAutoResolution=!0;let v=p;I.Text=v},1527:function(at,I,w){"use strict";var b=w(8405);const D={willReadFrequently:!0},M=class pr{static get experimentalLetterSpacingSupported(){let m=pr._experimentalLetterSpacingSupported;if(m!==void 0){const p=b.settings.ADAPTER.getCanvasRenderingContext2D().prototype;m=pr._experimentalLetterSpacingSupported="letterSpacing"in p||"textLetterSpacing"in p}return m}constructor(m,p,v,y,T,_,A,P,x){this.text=m,this.style=p,this.width=v,this.height=y,this.lines=T,this.lineWidths=_,this.lineHeight=A,this.maxLineWidth=P,this.fontProperties=x}static measureText(m,p,v,y=pr._canvas){v=v!=null?v:p.wordWrap;const T=p.toFontString(),_=pr.measureFont(T);_.fontSize===0&&(_.fontSize=p.fontSize,_.ascent=p.fontSize);const A=y.getContext("2d",D);A.font=T;const P=(v?pr.wordWrap(m,p,y):m).split(/(?:\r\n|\r|\n)/),x=new Array(P.length);let B=0;for(let Y=0;Y<P.length;Y++){const j=pr._measureText(P[Y],p.letterSpacing,A);x[Y]=j,B=Math.max(B,j)}let G=B+p.strokeThickness;p.dropShadow&&(G+=p.dropShadowDistance);const k=p.lineHeight||_.fontSize+p.strokeThickness;let X=Math.max(k,_.fontSize+p.strokeThickness*2)+p.leading+(P.length-1)*(k+p.leading);return p.dropShadow&&(X+=p.dropShadowDistance),new pr(m,p,G,X,P,x,k+p.leading,B,_)}static _measureText(m,p,v){let y=!1;pr.experimentalLetterSpacingSupported&&(pr.experimentalLetterSpacing?(v.letterSpacing=`${p}px`,v.textLetterSpacing=`${p}px`,y=!0):(v.letterSpacing="0px",v.textLetterSpacing="0px"));let T=v.measureText(m).width;return T>0&&(y?T-=p:T+=(pr.graphemeSegmenter(m).length-1)*p),T}static wordWrap(m,p,v=pr._canvas){const y=v.getContext("2d",D);let T=0,_="",A="";const P=Object.create(null),{letterSpacing:x,whiteSpace:B}=p,G=pr.collapseSpaces(B),k=pr.collapseNewlines(B);let X=!G;const Y=p.wordWrapWidth+x,j=pr.tokenize(m);for(let st=0;st<j.length;st++){let tt=j[st];if(pr.isNewline(tt)){if(!k){A+=pr.addLine(_),X=!G,_="",T=0;continue}tt=" "}if(G){const ct=pr.isBreakingSpace(tt),pt=pr.isBreakingSpace(_[_.length-1]);if(ct&&pt)continue}const rt=pr.getFromCache(tt,x,P,y);if(rt>Y)if(_!==""&&(A+=pr.addLine(_),_="",T=0),pr.canBreakWords(tt,p.breakWords)){const ct=pr.wordWrapSplit(tt);for(let pt=0;pt<ct.length;pt++){let Rt=ct[pt],Lt=Rt,ut=1;for(;ct[pt+ut];){const At=ct[pt+ut];if(!pr.canBreakChars(Lt,At,tt,pt,p.breakWords))Rt+=At;else break;Lt=At,ut++}pt+=ut-1;const xt=pr.getFromCache(Rt,x,P,y);xt+T>Y&&(A+=pr.addLine(_),X=!1,_="",T=0),_+=Rt,T+=xt}}else{_.length>0&&(A+=pr.addLine(_),_="",T=0);const ct=st===j.length-1;A+=pr.addLine(tt,!ct),X=!1,_="",T=0}else rt+T>Y&&(X=!1,A+=pr.addLine(_),_="",T=0),(_.length>0||!pr.isBreakingSpace(tt)||X)&&(_+=tt,T+=rt)}return A+=pr.addLine(_,!1),A}static addLine(m,p=!0){return m=pr.trimRight(m),m=p?`${m}
`:m,m}static getFromCache(m,p,v,y){let T=v[m];return typeof T!="number"&&(T=pr._measureText(m,p,y)+p,v[m]=T),T}static collapseSpaces(m){return m==="normal"||m==="pre-line"}static collapseNewlines(m){return m==="normal"}static trimRight(m){if(typeof m!="string")return"";for(let p=m.length-1;p>=0;p--){const v=m[p];if(!pr.isBreakingSpace(v))break;m=m.slice(0,-1)}return m}static isNewline(m){return typeof m!="string"?!1:pr._newlines.includes(m.charCodeAt(0))}static isBreakingSpace(m,p){return typeof m!="string"?!1:pr._breakingSpaces.includes(m.charCodeAt(0))}static tokenize(m){const p=[];let v="";if(typeof m!="string")return p;for(let y=0;y<m.length;y++){const T=m[y],_=m[y+1];if(pr.isBreakingSpace(T,_)||pr.isNewline(T)){v!==""&&(p.push(v),v=""),p.push(T);continue}v+=T}return v!==""&&p.push(v),p}static canBreakWords(m,p){return p}static canBreakChars(m,p,v,y,T){return!0}static wordWrapSplit(m){return pr.graphemeSegmenter(m)}static measureFont(m){if(pr._fonts[m])return pr._fonts[m];const p={ascent:0,descent:0,fontSize:0},v=pr._canvas,y=pr._context;y.font=m;const T=pr.METRICS_STRING+pr.BASELINE_SYMBOL,_=Math.ceil(y.measureText(T).width);let A=Math.ceil(y.measureText(pr.BASELINE_SYMBOL).width);const P=Math.ceil(pr.HEIGHT_MULTIPLIER*A);if(A=A*pr.BASELINE_MULTIPLIER|0,_===0||P===0)return pr._fonts[m]=p,p;v.width=_,v.height=P,y.fillStyle="#f00",y.fillRect(0,0,_,P),y.font=m,y.textBaseline="alphabetic",y.fillStyle="#000",y.fillText(T,0,A);const x=y.getImageData(0,0,_,P).data,B=x.length,G=_*4;let k=0,X=0,Y=!1;for(k=0;k<A;++k){for(let j=0;j<G;j+=4)if(x[X+j]!==255){Y=!0;break}if(!Y)X+=G;else break}for(p.ascent=A-k,X=B-G,Y=!1,k=P;k>A;--k){for(let j=0;j<G;j+=4)if(x[X+j]!==255){Y=!0;break}if(!Y)X-=G;else break}return p.descent=k-A,p.fontSize=p.ascent+p.descent,pr._fonts[m]=p,p}static clearMetrics(m=""){m?delete pr._fonts[m]:pr._fonts={}}static get _canvas(){var m;if(!pr.__canvas){let p;try{const v=new OffscreenCanvas(0,0);if((m=v.getContext("2d",D))!=null&&m.measureText)return pr.__canvas=v,v;p=b.settings.ADAPTER.createCanvas()}catch(v){p=b.settings.ADAPTER.createCanvas()}p.width=p.height=10,pr.__canvas=p}return pr.__canvas}static get _context(){return pr.__context||(pr.__context=pr._canvas.getContext("2d",D)),pr.__context}};M.METRICS_STRING="|\xC9q\xC5",M.BASELINE_SYMBOL="M",M.BASELINE_MULTIPLIER=1.4,M.HEIGHT_MULTIPLIER=2,M.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const C=new Intl.Segmenter;return m=>[...C.segment(m)].map(p=>p.segment)}return C=>[...C]})(),M.experimentalLetterSpacing=!1,M._fonts={},M._newlines=[10,13],M._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let O=M;I.TextMetrics=O},7719:function(at,I,w){"use strict";var b=w(1160),D=w(8405);const M=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],O=class Mc{constructor(T){this.styleID=0,this.reset(),v(this,T,T)}clone(){const T={};return v(T,this,Mc.defaultStyle),new Mc(T)}reset(){v(this,Mc.defaultStyle,Mc.defaultStyle)}get align(){return this._align}set align(T){this._align!==T&&(this._align=T,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(T){this._breakWords!==T&&(this._breakWords=T,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(T){this._dropShadow!==T&&(this._dropShadow=T,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(T){this._dropShadowAlpha!==T&&(this._dropShadowAlpha=T,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(T){this._dropShadowAngle!==T&&(this._dropShadowAngle=T,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(T){this._dropShadowBlur!==T&&(this._dropShadowBlur=T,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(T){const _=m(T);this._dropShadowColor!==_&&(this._dropShadowColor=_,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(T){this._dropShadowDistance!==T&&(this._dropShadowDistance=T,this.styleID++)}get fill(){return this._fill}set fill(T){const _=m(T);this._fill!==_&&(this._fill=_,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(T){this._fillGradientType!==T&&(this._fillGradientType=T,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(T){p(this._fillGradientStops,T)||(this._fillGradientStops=T,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(T){this.fontFamily!==T&&(this._fontFamily=T,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(T){this._fontSize!==T&&(this._fontSize=T,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(T){this._fontStyle!==T&&(this._fontStyle=T,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(T){this._fontVariant!==T&&(this._fontVariant=T,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(T){this._fontWeight!==T&&(this._fontWeight=T,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(T){this._letterSpacing!==T&&(this._letterSpacing=T,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(T){this._lineHeight!==T&&(this._lineHeight=T,this.styleID++)}get leading(){return this._leading}set leading(T){this._leading!==T&&(this._leading=T,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(T){this._lineJoin!==T&&(this._lineJoin=T,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(T){this._miterLimit!==T&&(this._miterLimit=T,this.styleID++)}get padding(){return this._padding}set padding(T){this._padding!==T&&(this._padding=T,this.styleID++)}get stroke(){return this._stroke}set stroke(T){const _=m(T);this._stroke!==_&&(this._stroke=_,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(T){this._strokeThickness!==T&&(this._strokeThickness=T,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(T){this._textBaseline!==T&&(this._textBaseline=T,this.styleID++)}get trim(){return this._trim}set trim(T){this._trim!==T&&(this._trim=T,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(T){this._whiteSpace!==T&&(this._whiteSpace=T,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(T){this._wordWrap!==T&&(this._wordWrap=T,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(T){this._wordWrapWidth!==T&&(this._wordWrapWidth=T,this.styleID++)}toFontString(){const T=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let _=this.fontFamily;Array.isArray(this.fontFamily)||(_=this.fontFamily.split(","));for(let A=_.length-1;A>=0;A--){let P=_[A].trim();!/([\"\'])[^\'\"]+\1/.test(P)&&!M.includes(P)&&(P=`"${P}"`),_[A]=P}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${T} ${_.join(",")}`}};O.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:b.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let C=O;function m(y){const T=D.Color.shared,_=A=>{const P=T.setValue(A);return P.alpha===1?P.toHex():P.toRgbaString()};return Array.isArray(y)?y.map(_):_(y)}function p(y,T){if(!Array.isArray(y)||!Array.isArray(T)||y.length!==T.length)return!1;for(let _=0;_<y.length;++_)if(y[_]!==T[_])return!1;return!0}function v(y,T,_){for(const A in _)Array.isArray(T[A])?y[A]=T[A].slice():y[A]=T[A]}I.TextStyle=C},1160:function(at,I){"use strict";var w=(b=>(b[b.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",b[b.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",b))(w||{});I.TEXT_GRADIENT=w},2862:function(at,I,w){"use strict";var b=w(1160),D=w(9438),M=w(1527),O=w(7719);I.TEXT_GRADIENT=b.TEXT_GRADIENT,I.Text=D.Text,I.TextMetrics=M.TextMetrics,I.TextStyle=O.TextStyle},4735:function(at,I,w){"use strict";var b=w(4612),D=w(3498);const M=class fn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new D.TickerListener(null,null,1/0),this.deltaMS=1/fn.targetFPMS,this.elapsedMS=1/fn.targetFPMS,this._tick=m=>{this._requestId=null,this.started&&(this.update(m),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(m,p,v=b.UPDATE_PRIORITY.NORMAL){return this._addListener(new D.TickerListener(m,p,v))}addOnce(m,p,v=b.UPDATE_PRIORITY.NORMAL){return this._addListener(new D.TickerListener(m,p,v,!0))}_addListener(m){let p=this._head.next,v=this._head;if(!p)m.connect(v);else{for(;p;){if(m.priority>p.priority){m.connect(v);break}v=p,p=p.next}m.previous||m.connect(v)}return this._startIfPossible(),this}remove(m,p){let v=this._head.next;for(;v;)v.match(m,p)?v=v.destroy():v=v.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let m=0,p=this._head;for(;p=p.next;)m++;return m}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let m=this._head.next;for(;m;)m=m.destroy(!0);this._head.destroy(),this._head=null}}update(m=performance.now()){let p;if(m>this.lastTime){if(p=this.elapsedMS=m-this.lastTime,p>this._maxElapsedMS&&(p=this._maxElapsedMS),p*=this.speed,this._minElapsedMS){const T=m-this._lastFrame|0;if(T<this._minElapsedMS)return;this._lastFrame=m-T%this._minElapsedMS}this.deltaMS=p,this.deltaTime=this.deltaMS*fn.targetFPMS;const v=this._head;let y=v.next;for(;y;)y=y.emit(this.deltaTime);v.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=m}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(m){const p=Math.min(this.maxFPS,m),v=Math.min(Math.max(0,p)/1e3,fn.targetFPMS);this._maxElapsedMS=1/v}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(m){if(m===0)this._minElapsedMS=0;else{const p=Math.max(this.minFPS,m);this._minElapsedMS=1/(p/1e3)}}static get shared(){if(!fn._shared){const m=fn._shared=new fn;m.autoStart=!0,m._protected=!0}return fn._shared}static get system(){if(!fn._system){const m=fn._system=new fn;m.autoStart=!0,m._protected=!0}return fn._system}};M.targetFPMS=.06;let O=M;I.Ticker=O},3498:function(at,I){"use strict";class w{constructor(D,M=null,O=0,C=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=D,this.context=M,this.priority=O,this.once=C}match(D,M=null){return this.fn===D&&this.context===M}emit(D){this.fn&&(this.context?this.fn.call(this.context,D):this.fn(D));const M=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),M}connect(D){this.previous=D,D.next&&(D.next.previous=this),this.next=D.next,D.next=this}destroy(D=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const M=this.next;return this.next=D?null:M,this.previous=null,M}}I.TickerListener=w},1138:function(at,I,w){"use strict";var b=w(6967),D=w(4612),M=w(4735);class O{static init(m){m=Object.assign({autoStart:!0,sharedTicker:!1},m),Object.defineProperty(this,"ticker",{set(p){this._ticker&&this._ticker.remove(this.render,this),this._ticker=p,p&&p.add(this.render,this,D.UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=m.sharedTicker?M.Ticker.shared:new M.Ticker,m.autoStart&&this.start()}static destroy(){if(this._ticker){const m=this._ticker;this.ticker=null,m.destroy()}}}O.extension=b.ExtensionType.Application,b.extensions.add(O),I.TickerPlugin=O},4612:function(at,I){"use strict";var w=(b=>(b[b.INTERACTION=50]="INTERACTION",b[b.HIGH=25]="HIGH",b[b.NORMAL=0]="NORMAL",b[b.LOW=-25]="LOW",b[b.UTILITY=-50]="UTILITY",b))(w||{});I.UPDATE_PRIORITY=w},400:function(at,I,w){"use strict";w(5149);var b=w(4612),D=w(4735),M=w(1138);I.UPDATE_PRIORITY=b.UPDATE_PRIORITY,I.Ticker=D.Ticker,I.TickerPlugin=M.TickerPlugin},5149:function(at,I,w){"use strict";var b=w(1524),D=w(2947),M=w(4735);Object.defineProperties(b.settings,{TARGET_FPMS:{get(){return M.Ticker.targetFPMS},set(O){D.deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),M.Ticker.targetFPMS=O}}}),Object.defineProperty(I,"settings",{enumerable:!0,get:function(){return b.settings}})},369:function(at,I,w){"use strict";var b=w(3994);let D;function M(){return he(this,null,function*(){return D!=null||(D=(()=>he(this,null,function*(){var y;const O=document.createElement("canvas").getContext("webgl");if(!O)return b.ALPHA_MODES.UNPACK;const C=yield new Promise(T=>{const _=document.createElement("video");_.onloadeddata=()=>T(_),_.onerror=()=>T(null),_.autoplay=!1,_.crossOrigin="anonymous",_.preload="auto",_.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",_.load()});if(!C)return b.ALPHA_MODES.UNPACK;const m=O.createTexture();O.bindTexture(O.TEXTURE_2D,m);const p=O.createFramebuffer();O.bindFramebuffer(O.FRAMEBUFFER,p),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,m,0),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),O.pixelStorei(O.UNPACK_COLORSPACE_CONVERSION_WEBGL,O.NONE),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,C);const v=new Uint8Array(4);return O.readPixels(0,0,1,1,O.RGBA,O.UNSIGNED_BYTE,v),O.deleteFramebuffer(p),O.deleteTexture(m),(y=O.getExtension("WEBGL_lose_context"))==null||y.loseContext(),v[0]<=v[3]?b.ALPHA_MODES.PMA:b.ALPHA_MODES.UNPACK}))()),D})}I.detectVideoAlphaMode=M},2647:function(at,I,w){"use strict";var b=w(1566);function D(){b.deprecation("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function M(){b.deprecation("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}I.sayHello=M,I.skipHello=D},8519:function(at,I,w){"use strict";w(4082);var b=w(1524);let D;function M(){return typeof D>"u"&&(D=function(){var C;const O={stencil:!0,failIfMajorPerformanceCaveat:b.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!b.settings.ADAPTER.getWebGLRenderingContext())return!1;const m=b.settings.ADAPTER.createCanvas();let p=m.getContext("webgl",O)||m.getContext("experimental-webgl",O);const v=!!((C=p==null?void 0:p.getContextAttributes())!=null&&C.stencil);if(p){const y=p.getExtension("WEBGL_lose_context");y&&y.loseContext()}return p=null,v}catch(m){return!1}}()),D}I.isWebGLSupported=M},5133:function(at,I,w){"use strict";var b=w(642),D=w(1566);function M(p,v=[]){return D.deprecation("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),b.Color.shared.setValue(p).toRgbArray(v)}function O(p){return D.deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),b.Color.shared.setValue(p).toHex()}function C(p){return D.deprecation("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),b.Color.shared.setValue(p).toNumber()}function m(p){return D.deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),b.Color.shared.setValue(p).toNumber()}I.hex2rgb=M,I.hex2string=O,I.rgb2hex=m,I.string2hex=C},1064:function(at,I,w){"use strict";var b=w(642),D=w(3994),M=w(1566);function O(){const T=[],_=[];for(let P=0;P<32;P++)T[P]=P,_[P]=P;T[D.BLEND_MODES.NORMAL_NPM]=D.BLEND_MODES.NORMAL,T[D.BLEND_MODES.ADD_NPM]=D.BLEND_MODES.ADD,T[D.BLEND_MODES.SCREEN_NPM]=D.BLEND_MODES.SCREEN,_[D.BLEND_MODES.NORMAL]=D.BLEND_MODES.NORMAL_NPM,_[D.BLEND_MODES.ADD]=D.BLEND_MODES.ADD_NPM,_[D.BLEND_MODES.SCREEN]=D.BLEND_MODES.SCREEN_NPM;const A=[];return A.push(_),A.push(T),A}const C=O();function m(T,_){return C[_?1:0][T]}function p(T,_,A,P=!0){return M.deprecation("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),b.Color.shared.setValue(T).premultiply(_,P).toArray(A!=null?A:new Float32Array(4))}function v(T,_){return M.deprecation("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),b.Color.shared.setValue(T).toPremultiplied(_)}function y(T,_,A,P=!0){return M.deprecation("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),b.Color.shared.setValue(T).premultiply(_,P).toArray(A!=null?A:new Float32Array(4))}I.correctBlendMode=m,I.premultiplyBlendMode=C,I.premultiplyRgba=p,I.premultiplyTint=v,I.premultiplyTintToRgba=y},5301:function(at,I){"use strict";const w=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;I.DATA_URI=w},4826:function(at,I){"use strict";function w(b,D=null){const M=b*6;if(D=D||new Uint16Array(M),D.length!==M)throw new Error(`Out buffer length is incorrect, got ${D.length} and expected ${M}`);for(let O=0,C=0;O<M;O+=6,C+=4)D[O+0]=C+0,D[O+1]=C+1,D[O+2]=C+2,D[O+3]=C+0,D[O+4]=C+2,D[O+5]=C+3;return D}I.createIndicesForQuads=w},1253:function(at,I){"use strict";function w(b){if(b.BYTES_PER_ELEMENT===4)return b instanceof Float32Array?"Float32Array":b instanceof Uint32Array?"Uint32Array":"Int32Array";if(b.BYTES_PER_ELEMENT===2){if(b instanceof Uint16Array)return"Uint16Array"}else if(b.BYTES_PER_ELEMENT===1&&b instanceof Uint8Array)return"Uint8Array";return null}I.getBufferType=w},565:function(at,I,w){"use strict";var b=w(1253);const D={Float32Array,Uint32Array,Int32Array,Uint8Array};function M(O,C){let m=0,p=0;const v={};for(let A=0;A<O.length;A++)p+=C[A],m+=O[A].length;const y=new ArrayBuffer(m*4);let T=null,_=0;for(let A=0;A<O.length;A++){const P=C[A],x=O[A],B=b.getBufferType(x);v[B]||(v[B]=new D[B](y)),T=v[B];for(let G=0;G<x.length;G++){const k=(G/P|0)*p+_,X=G%P;T[k+X]=x[G]}_+=P}return new Float32Array(y)}I.interleaveTypedArrays=M},3878:function(at,I){"use strict";function w(M){return M+=M===0?1:0,--M,M|=M>>>1,M|=M>>>2,M|=M>>>4,M|=M>>>8,M|=M>>>16,M+1}function b(M){return!(M&M-1)&&!!M}function D(M){let O=(M>65535?1:0)<<4;M>>>=O;let C=(M>255?1:0)<<3;return M>>>=C,O|=C,C=(M>15?1:0)<<2,M>>>=C,O|=C,C=(M>3?1:0)<<1,M>>>=C,O|=C,O|M>>1}I.isPow2=b,I.log2=D,I.nextPow2=w},335:function(at,I){"use strict";function w(b,D,M){const O=b.length;let C;if(D>=O||M===0)return;M=D+M>O?O-D:M;const m=O-M;for(C=D;C<m;++C)b[C]=b[C+M];b.length=m}I.removeItems=w},1221:function(at,I){"use strict";function w(b){return b===0?0:b<0?-1:1}I.sign=w},6505:function(at,I){"use strict";let w=0;function b(){return++w}I.uid=b},2947:function(at,I,w){"use strict";w(4082);var b=w(1524),D=w(9219),M=w(2580),O=w(7455),C=w(8278),m=w(369),p=w(2647),v=w(8519),y=w(5133),T=w(1064),_=w(5301),A=w(4826),P=w(1253),x=w(565),B=w(3878),G=w(335),k=w(1221),X=w(6505),Y=w(1566),j=w(5999),st=w(7523),tt=w(9039),rt=w(8893),ct=w(7827),pt=w(6059),Rt=w(7277),Lt=w(6268);w(798),Object.defineProperty(I,"isMobile",{enumerable:!0,get:function(){return b.isMobile}}),I.EventEmitter=D,I.earcut=M,I.url=O.url,I.path=C.path,I.detectVideoAlphaMode=m.detectVideoAlphaMode,I.sayHello=p.sayHello,I.skipHello=p.skipHello,I.isWebGLSupported=v.isWebGLSupported,I.hex2rgb=y.hex2rgb,I.hex2string=y.hex2string,I.rgb2hex=y.rgb2hex,I.string2hex=y.string2hex,I.correctBlendMode=T.correctBlendMode,I.premultiplyBlendMode=T.premultiplyBlendMode,I.premultiplyRgba=T.premultiplyRgba,I.premultiplyTint=T.premultiplyTint,I.premultiplyTintToRgba=T.premultiplyTintToRgba,I.DATA_URI=_.DATA_URI,I.createIndicesForQuads=A.createIndicesForQuads,I.getBufferType=P.getBufferType,I.interleaveTypedArrays=x.interleaveTypedArrays,I.isPow2=B.isPow2,I.log2=B.log2,I.nextPow2=B.nextPow2,I.removeItems=G.removeItems,I.sign=k.sign,I.uid=X.uid,I.deprecation=Y.deprecation,I.BoundingBox=j.BoundingBox,I.BaseTextureCache=st.BaseTextureCache,I.ProgramCache=st.ProgramCache,I.TextureCache=st.TextureCache,I.clearTextureCache=st.clearTextureCache,I.destroyTextureCache=st.destroyTextureCache,I.CanvasRenderTarget=tt.CanvasRenderTarget,I.getCanvasBoundingBox=rt.getCanvasBoundingBox,I.trimCanvas=ct.trimCanvas,I.decomposeDataUri=pt.decomposeDataUri,I.determineCrossOrigin=Rt.determineCrossOrigin,I.getResolutionOfUrl=Lt.getResolutionOfUrl},1566:function(at,I){"use strict";const w={};function b(D,M,O=3){if(w[M])return;let C=new Error().stack;typeof C>"u"?console.warn("PixiJS Deprecation Warning: ",`${M}
Deprecated since v${D}`):(C=C.split(`
`).splice(O).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${M}
Deprecated since v${D}`),console.warn(C),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${M}
Deprecated since v${D}`),console.warn(C))),w[M]=!0}I.deprecation=b},5999:function(at,I){"use strict";const w=class{constructor(D,M,O,C){this.left=D,this.top=M,this.right=O,this.bottom=C}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};w.EMPTY=new w(0,0,0,0);let b=w;I.BoundingBox=b},9039:function(at,I,w){"use strict";var b=w(1524);class D{constructor(O,C,m){this._canvas=b.settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=m||b.settings.RESOLUTION,this.resize(O,C)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(O,C){this._checkDestroyed(),this._canvas.width=Math.round(O*this.resolution),this._canvas.height=Math.round(C*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(O){this._checkDestroyed(),this._canvas.width=Math.round(O)}get height(){return this._checkDestroyed(),this._canvas.height}set height(O){this._checkDestroyed(),this._canvas.height=Math.round(O)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}I.CanvasRenderTarget=D},7523:function(at,I){"use strict";const w={},b=Object.create(null),D=Object.create(null);function M(){let C;for(C in b)b[C].destroy();for(C in D)D[C].destroy()}function O(){let C;for(C in b)delete b[C];for(C in D)delete D[C]}I.BaseTextureCache=D,I.ProgramCache=w,I.TextureCache=b,I.clearTextureCache=O,I.destroyTextureCache=M},8893:function(at,I,w){"use strict";var b=w(5999);function D(C,m,p){for(let v=0,y=4*p*m;v<m;++v,y+=4)if(C[y+3]!==0)return!1;return!0}function M(C,m,p,v,y){const T=4*m;for(let _=v,A=v*T+4*p;_<=y;++_,A+=T)if(C[A+3]!==0)return!1;return!0}function O(C){const{width:m,height:p}=C,v=C.getContext("2d",{willReadFrequently:!0});if(v===null)throw new TypeError("Failed to get canvas 2D context");const y=v.getImageData(0,0,m,p).data;let T=0,_=0,A=m-1,P=p-1;for(;_<p&&D(y,m,_);)++_;if(_===p)return b.BoundingBox.EMPTY;for(;D(y,m,P);)--P;for(;M(y,m,T,_,P);)++T;for(;M(y,m,A,_,P);)--A;return++A,++P,new b.BoundingBox(T,_,A,P)}I.getCanvasBoundingBox=O},7827:function(at,I,w){"use strict";var b=w(8893);function D(M){const O=b.getCanvasBoundingBox(M),{width:C,height:m}=O;let p=null;if(!O.isEmpty()){const v=M.getContext("2d");if(v===null)throw new TypeError("Failed to get canvas 2D context");p=v.getImageData(O.left,O.top,C,m)}return{width:C,height:m,data:p}}I.trimCanvas=D},6059:function(at,I,w){"use strict";var b=w(5301);function D(M){const O=b.DATA_URI.exec(M);if(O)return{mediaType:O[1]?O[1].toLowerCase():void 0,subType:O[2]?O[2].toLowerCase():void 0,charset:O[3]?O[3].toLowerCase():void 0,encoding:O[4]?O[4].toLowerCase():void 0,data:O[5]}}I.decomposeDataUri=D},7277:function(at,I){"use strict";function w(b,D=globalThis.location){if(b.startsWith("data:"))return"";D=D||globalThis.location;const M=new URL(b,document.baseURI);return M.hostname!==D.hostname||M.port!==D.port||M.protocol!==D.protocol?"anonymous":""}I.determineCrossOrigin=w},6268:function(at,I,w){"use strict";w(4082);var b=w(1524);function D(M,O=1){var m;const C=(m=b.settings.RETINA_PREFIX)==null?void 0:m.exec(M);return C?parseFloat(C[1]):O}I.getResolutionOfUrl=D},8278:function(at,I,w){"use strict";var b=w(1524);function D(v){if(typeof v!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(v)}`)}function M(v){return v.split("?")[0].split("#")[0]}function O(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(v,y,T){return v.replace(new RegExp(O(y),"g"),T)}function m(v,y){let T="",_=0,A=-1,P=0,x=-1;for(let B=0;B<=v.length;++B){if(B<v.length)x=v.charCodeAt(B);else{if(x===47)break;x=47}if(x===47){if(!(A===B-1||P===1))if(A!==B-1&&P===2){if(T.length<2||_!==2||T.charCodeAt(T.length-1)!==46||T.charCodeAt(T.length-2)!==46){if(T.length>2){const G=T.lastIndexOf("/");if(G!==T.length-1){G===-1?(T="",_=0):(T=T.slice(0,G),_=T.length-1-T.lastIndexOf("/")),A=B,P=0;continue}}else if(T.length===2||T.length===1){T="",_=0,A=B,P=0;continue}}y&&(T.length>0?T+="/..":T="..",_=2)}else T.length>0?T+=`/${v.slice(A+1,B)}`:T=v.slice(A+1,B),_=B-A-1;A=B,P=0}else x===46&&P!==-1?++P:P=-1}return T}const p={toPosix(v){return C(v,"\\","/")},isUrl(v){return/^https?:/.test(this.toPosix(v))},isDataUrl(v){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(v)},isBlobUrl(v){return v.startsWith("blob:")},hasProtocol(v){return/^[^/:]+:/.test(this.toPosix(v))},getProtocol(v){D(v),v=this.toPosix(v);const y=/^file:\/\/\//.exec(v);if(y)return y[0];const T=/^[^/:]+:\/{0,2}/.exec(v);return T?T[0]:""},toAbsolute(v,y,T){if(D(v),this.isDataUrl(v)||this.isBlobUrl(v))return v;const _=M(this.toPosix(y!=null?y:b.settings.ADAPTER.getBaseUrl())),A=M(this.toPosix(T!=null?T:this.rootname(_)));return v=this.toPosix(v),v.startsWith("/")?p.join(A,v.slice(1)):this.isAbsolute(v)?v:this.join(_,v)},normalize(v){if(D(v),v.length===0)return".";if(this.isDataUrl(v)||this.isBlobUrl(v))return v;v=this.toPosix(v);let y="";const T=v.startsWith("/");this.hasProtocol(v)&&(y=this.rootname(v),v=v.slice(y.length));const _=v.endsWith("/");return v=m(v,!1),v.length>0&&_&&(v+="/"),T?`/${v}`:y+v},isAbsolute(v){return D(v),v=this.toPosix(v),this.hasProtocol(v)?!0:v.startsWith("/")},join(...v){var T;if(v.length===0)return".";let y;for(let _=0;_<v.length;++_){const A=v[_];if(D(A),A.length>0)if(y===void 0)y=A;else{const P=(T=v[_-1])!=null?T:"";this.extname(P)?y+=`/../${A}`:y+=`/${A}`}}return y===void 0?".":this.normalize(y)},dirname(v){if(D(v),v.length===0)return".";v=this.toPosix(v);let y=v.charCodeAt(0);const T=y===47;let _=-1,A=!0;const P=this.getProtocol(v),x=v;v=v.slice(P.length);for(let B=v.length-1;B>=1;--B)if(y=v.charCodeAt(B),y===47){if(!A){_=B;break}}else A=!1;return _===-1?T?"/":this.isUrl(x)?P+v:P:T&&_===1?"//":P+v.slice(0,_)},rootname(v){D(v),v=this.toPosix(v);let y="";if(v.startsWith("/")?y="/":y=this.getProtocol(v),this.isUrl(v)){const T=v.indexOf("/",y.length);T!==-1?y=v.slice(0,T):y=v,y.endsWith("/")||(y+="/")}return y},basename(v,y){D(v),y&&D(y),v=M(this.toPosix(v));let T=0,_=-1,A=!0,P;if(y!==void 0&&y.length>0&&y.length<=v.length){if(y.length===v.length&&y===v)return"";let x=y.length-1,B=-1;for(P=v.length-1;P>=0;--P){const G=v.charCodeAt(P);if(G===47){if(!A){T=P+1;break}}else B===-1&&(A=!1,B=P+1),x>=0&&(G===y.charCodeAt(x)?--x===-1&&(_=P):(x=-1,_=B))}return T===_?_=B:_===-1&&(_=v.length),v.slice(T,_)}for(P=v.length-1;P>=0;--P)if(v.charCodeAt(P)===47){if(!A){T=P+1;break}}else _===-1&&(A=!1,_=P+1);return _===-1?"":v.slice(T,_)},extname(v){D(v),v=M(this.toPosix(v));let y=-1,T=0,_=-1,A=!0,P=0;for(let x=v.length-1;x>=0;--x){const B=v.charCodeAt(x);if(B===47){if(!A){T=x+1;break}continue}_===-1&&(A=!1,_=x+1),B===46?y===-1?y=x:P!==1&&(P=1):y!==-1&&(P=-1)}return y===-1||_===-1||P===0||P===1&&y===_-1&&y===T+1?"":v.slice(y,_)},parse(v){D(v);const y={root:"",dir:"",base:"",ext:"",name:""};if(v.length===0)return y;v=M(this.toPosix(v));let T=v.charCodeAt(0);const _=this.isAbsolute(v);let A;const P="";y.root=this.rootname(v),_||this.hasProtocol(v)?A=1:A=0;let x=-1,B=0,G=-1,k=!0,X=v.length-1,Y=0;for(;X>=A;--X){if(T=v.charCodeAt(X),T===47){if(!k){B=X+1;break}continue}G===-1&&(k=!1,G=X+1),T===46?x===-1?x=X:Y!==1&&(Y=1):x!==-1&&(Y=-1)}return x===-1||G===-1||Y===0||Y===1&&x===G-1&&x===B+1?G!==-1&&(B===0&&_?y.base=y.name=v.slice(1,G):y.base=y.name=v.slice(B,G)):(B===0&&_?(y.name=v.slice(1,x),y.base=v.slice(1,G)):(y.name=v.slice(B,x),y.base=v.slice(B,G)),y.ext=v.slice(x,G)),y.dir=this.dirname(v),P&&(y.dir=P+y.dir),y},sep:"/",delimiter:":"};I.path=p},4082:function(at,I,w){"use strict";var b=w(1524);b.settings.RETINA_PREFIX=/@([0-9\.]+)x/,b.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Object.defineProperty(I,"settings",{enumerable:!0,get:function(){return b.settings}})},798:function(){"use strict"},7455:function(at,I,w){"use strict";var b=w(1805),D=w(1566);const M={get parse(){return D.deprecation("7.3.0","utils.url.parse is deprecated, use native URL API instead."),b.parse},get format(){return D.deprecation("7.3.0","utils.url.format is deprecated, use native URL API instead."),b.format},get resolve(){return D.deprecation("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),b.resolve}};I.url=M},4361:function(at,I,w){"use strict";var b=w(5787),D=w(8492),M=D(b("String.prototype.indexOf"));at.exports=function(C,m){var p=b(C,!!m);return typeof p=="function"&&M(C,".prototype.")>-1?D(p):p}},8492:function(at,I,w){"use strict";var b=w(7896),D=w(5787),M=w(4195),O=D("%TypeError%"),C=D("%Function.prototype.apply%"),m=D("%Function.prototype.call%"),p=D("%Reflect.apply%",!0)||b.call(m,C),v=D("%Object.defineProperty%",!0),y=D("%Math.max%");if(v)try{v({},"a",{value:1})}catch(_){v=null}at.exports=function(A){if(typeof A!="function")throw new O("a function is required");var P=p(b,m,arguments);return M(P,1+y(0,A.length-(arguments.length-1)),!0)};var T=function(){return p(b,C,arguments)};v?v(at.exports,"apply",{value:T}):at.exports.apply=T},2239:function(at,I,w){"use strict";var b=w(2555)(),D=w(5787),M=b&&D("%Object.defineProperty%",!0);if(M)try{M({},"a",{value:1})}catch(p){M=!1}var O=D("%SyntaxError%"),C=D("%TypeError%"),m=w(4033);at.exports=function(v,y,T){if(!v||typeof v!="object"&&typeof v!="function")throw new C("`obj` must be an object or a function`");if(typeof y!="string"&&typeof y!="symbol")throw new C("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new C("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new C("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new C("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new C("`loose`, if provided, must be a boolean");var _=arguments.length>3?arguments[3]:null,A=arguments.length>4?arguments[4]:null,P=arguments.length>5?arguments[5]:null,x=arguments.length>6?arguments[6]:!1,B=!!m&&m(v,y);if(M)M(v,y,{configurable:P===null&&B?B.configurable:!P,enumerable:_===null&&B?B.enumerable:!_,value:T,writable:A===null&&B?B.writable:!A});else if(x||!_&&!A&&!P)v[y]=T;else throw new O("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}},2580:function(at){"use strict";at.exports=I,at.exports.default=I;function I(J,ot,q){q=q||2;var gt=ot&&ot.length,yt=gt?ot[0]*q:J.length,et=w(J,0,yt,q,!0),ht=[];if(!et||et.next===et.prev)return ht;var Et,kt,Ft,Bt,Gt,Ct,jt;if(gt&&(et=p(J,ot,et,q)),J.length>80*q){Et=Ft=J[0],kt=Bt=J[1];for(var Kt=q;Kt<yt;Kt+=q)Gt=J[Kt],Ct=J[Kt+1],Gt<Et&&(Et=Gt),Ct<kt&&(kt=Ct),Gt>Ft&&(Ft=Gt),Ct>Bt&&(Bt=Ct);jt=Math.max(Ft-Et,Bt-kt),jt=jt!==0?32767/jt:0}return D(et,ht,q,Et,kt,jt,0),ht}function w(J,ot,q,gt,yt){var et,ht;if(yt===At(J,ot,q,gt)>0)for(et=ot;et<q;et+=gt)ht=Lt(et,J[et],J[et+1],ht);else for(et=q-gt;et>=ot;et-=gt)ht=Lt(et,J[et],J[et+1],ht);return ht&&Y(ht,ht.next)&&(ut(ht),ht=ht.next),ht}function b(J,ot){if(!J)return J;ot||(ot=J);var q=J,gt;do if(gt=!1,!q.steiner&&(Y(q,q.next)||X(q.prev,q,q.next)===0)){if(ut(q),q=ot=q.prev,q===q.next)break;gt=!0}else q=q.next;while(gt||q!==ot);return ot}function D(J,ot,q,gt,yt,et,ht){if(J){!ht&&et&&A(J,gt,yt,et);for(var Et=J,kt,Ft;J.prev!==J.next;){if(kt=J.prev,Ft=J.next,et?O(J,gt,yt,et):M(J)){ot.push(kt.i/q|0),ot.push(J.i/q|0),ot.push(Ft.i/q|0),ut(J),J=Ft.next,Et=Ft.next;continue}if(J=Ft,J===Et){ht?ht===1?(J=C(b(J),ot,q),D(J,ot,q,gt,yt,et,2)):ht===2&&m(J,ot,q,gt,yt,et):D(b(J),ot,q,gt,yt,et,1);break}}}}function M(J){var ot=J.prev,q=J,gt=J.next;if(X(ot,q,gt)>=0)return!1;for(var yt=ot.x,et=q.x,ht=gt.x,Et=ot.y,kt=q.y,Ft=gt.y,Bt=yt<et?yt<ht?yt:ht:et<ht?et:ht,Gt=Et<kt?Et<Ft?Et:Ft:kt<Ft?kt:Ft,Ct=yt>et?yt>ht?yt:ht:et>ht?et:ht,jt=Et>kt?Et>Ft?Et:Ft:kt>Ft?kt:Ft,Kt=gt.next;Kt!==ot;){if(Kt.x>=Bt&&Kt.x<=Ct&&Kt.y>=Gt&&Kt.y<=jt&&G(yt,Et,et,kt,ht,Ft,Kt.x,Kt.y)&&X(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.next}return!0}function O(J,ot,q,gt){var yt=J.prev,et=J,ht=J.next;if(X(yt,et,ht)>=0)return!1;for(var Et=yt.x,kt=et.x,Ft=ht.x,Bt=yt.y,Gt=et.y,Ct=ht.y,jt=Et<kt?Et<Ft?Et:Ft:kt<Ft?kt:Ft,Kt=Bt<Gt?Bt<Ct?Bt:Ct:Gt<Ct?Gt:Ct,ne=Et>kt?Et>Ft?Et:Ft:kt>Ft?kt:Ft,me=Bt>Gt?Bt>Ct?Bt:Ct:Gt>Ct?Gt:Ct,ue=x(jt,Kt,ot,q,gt),Oe=x(ne,me,ot,q,gt),de=J.prevZ,oe=J.nextZ;de&&de.z>=ue&&oe&&oe.z<=Oe;){if(de.x>=jt&&de.x<=ne&&de.y>=Kt&&de.y<=me&&de!==yt&&de!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,de.x,de.y)&&X(de.prev,de,de.next)>=0||(de=de.prevZ,oe.x>=jt&&oe.x<=ne&&oe.y>=Kt&&oe.y<=me&&oe!==yt&&oe!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,oe.x,oe.y)&&X(oe.prev,oe,oe.next)>=0))return!1;oe=oe.nextZ}for(;de&&de.z>=ue;){if(de.x>=jt&&de.x<=ne&&de.y>=Kt&&de.y<=me&&de!==yt&&de!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,de.x,de.y)&&X(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;oe&&oe.z<=Oe;){if(oe.x>=jt&&oe.x<=ne&&oe.y>=Kt&&oe.y<=me&&oe!==yt&&oe!==ht&&G(Et,Bt,kt,Gt,Ft,Ct,oe.x,oe.y)&&X(oe.prev,oe,oe.next)>=0)return!1;oe=oe.nextZ}return!0}function C(J,ot,q){var gt=J;do{var yt=gt.prev,et=gt.next.next;!Y(yt,et)&&j(yt,gt,gt.next,et)&&ct(yt,et)&&ct(et,yt)&&(ot.push(yt.i/q|0),ot.push(gt.i/q|0),ot.push(et.i/q|0),ut(gt),ut(gt.next),gt=J=et),gt=gt.next}while(gt!==J);return b(gt)}function m(J,ot,q,gt,yt,et){var ht=J;do{for(var Et=ht.next.next;Et!==ht.prev;){if(ht.i!==Et.i&&k(ht,Et)){var kt=Rt(ht,Et);ht=b(ht,ht.next),kt=b(kt,kt.next),D(ht,ot,q,gt,yt,et,0),D(kt,ot,q,gt,yt,et,0);return}Et=Et.next}ht=ht.next}while(ht!==J)}function p(J,ot,q,gt){var yt=[],et,ht,Et,kt,Ft;for(et=0,ht=ot.length;et<ht;et++)Et=ot[et]*gt,kt=et<ht-1?ot[et+1]*gt:J.length,Ft=w(J,Et,kt,gt,!1),Ft===Ft.next&&(Ft.steiner=!0),yt.push(B(Ft));for(yt.sort(v),et=0;et<yt.length;et++)q=y(yt[et],q);return q}function v(J,ot){return J.x-ot.x}function y(J,ot){var q=T(J,ot);if(!q)return ot;var gt=Rt(q,J);return b(gt,gt.next),b(q,q.next)}function T(J,ot){var q=ot,gt=J.x,yt=J.y,et=-1/0,ht;do{if(yt<=q.y&&yt>=q.next.y&&q.next.y!==q.y){var Et=q.x+(yt-q.y)*(q.next.x-q.x)/(q.next.y-q.y);if(Et<=gt&&Et>et&&(et=Et,ht=q.x<q.next.x?q:q.next,Et===gt))return ht}q=q.next}while(q!==ot);if(!ht)return null;var kt=ht,Ft=ht.x,Bt=ht.y,Gt=1/0,Ct;q=ht;do gt>=q.x&&q.x>=Ft&&gt!==q.x&&G(yt<Bt?gt:et,yt,Ft,Bt,yt<Bt?et:gt,yt,q.x,q.y)&&(Ct=Math.abs(yt-q.y)/(gt-q.x),ct(q,J)&&(Ct<Gt||Ct===Gt&&(q.x>ht.x||q.x===ht.x&&_(ht,q)))&&(ht=q,Gt=Ct)),q=q.next;while(q!==kt);return ht}function _(J,ot){return X(J.prev,J,ot.prev)<0&&X(ot.next,J,J.next)<0}function A(J,ot,q,gt){var yt=J;do yt.z===0&&(yt.z=x(yt.x,yt.y,ot,q,gt)),yt.prevZ=yt.prev,yt.nextZ=yt.next,yt=yt.next;while(yt!==J);yt.prevZ.nextZ=null,yt.prevZ=null,P(yt)}function P(J){var ot,q,gt,yt,et,ht,Et,kt,Ft=1;do{for(q=J,J=null,et=null,ht=0;q;){for(ht++,gt=q,Et=0,ot=0;ot<Ft&&(Et++,gt=gt.nextZ,!!gt);ot++);for(kt=Ft;Et>0||kt>0&&gt;)Et!==0&&(kt===0||!gt||q.z<=gt.z)?(yt=q,q=q.nextZ,Et--):(yt=gt,gt=gt.nextZ,kt--),et?et.nextZ=yt:J=yt,yt.prevZ=et,et=yt;q=gt}et.nextZ=null,Ft*=2}while(ht>1);return J}function x(J,ot,q,gt,yt){return J=(J-q)*yt|0,ot=(ot-gt)*yt|0,J=(J|J<<8)&16711935,J=(J|J<<4)&252645135,J=(J|J<<2)&858993459,J=(J|J<<1)&1431655765,ot=(ot|ot<<8)&16711935,ot=(ot|ot<<4)&252645135,ot=(ot|ot<<2)&858993459,ot=(ot|ot<<1)&1431655765,J|ot<<1}function B(J){var ot=J,q=J;do(ot.x<q.x||ot.x===q.x&&ot.y<q.y)&&(q=ot),ot=ot.next;while(ot!==J);return q}function G(J,ot,q,gt,yt,et,ht,Et){return(yt-ht)*(ot-Et)>=(J-ht)*(et-Et)&&(J-ht)*(gt-Et)>=(q-ht)*(ot-Et)&&(q-ht)*(et-Et)>=(yt-ht)*(gt-Et)}function k(J,ot){return J.next.i!==ot.i&&J.prev.i!==ot.i&&!rt(J,ot)&&(ct(J,ot)&&ct(ot,J)&&pt(J,ot)&&(X(J.prev,J,ot.prev)||X(J,ot.prev,ot))||Y(J,ot)&&X(J.prev,J,J.next)>0&&X(ot.prev,ot,ot.next)>0)}function X(J,ot,q){return(ot.y-J.y)*(q.x-ot.x)-(ot.x-J.x)*(q.y-ot.y)}function Y(J,ot){return J.x===ot.x&&J.y===ot.y}function j(J,ot,q,gt){var yt=tt(X(J,ot,q)),et=tt(X(J,ot,gt)),ht=tt(X(q,gt,J)),Et=tt(X(q,gt,ot));return!!(yt!==et&&ht!==Et||yt===0&&st(J,q,ot)||et===0&&st(J,gt,ot)||ht===0&&st(q,J,gt)||Et===0&&st(q,ot,gt))}function st(J,ot,q){return ot.x<=Math.max(J.x,q.x)&&ot.x>=Math.min(J.x,q.x)&&ot.y<=Math.max(J.y,q.y)&&ot.y>=Math.min(J.y,q.y)}function tt(J){return J>0?1:J<0?-1:0}function rt(J,ot){var q=J;do{if(q.i!==J.i&&q.next.i!==J.i&&q.i!==ot.i&&q.next.i!==ot.i&&j(q,q.next,J,ot))return!0;q=q.next}while(q!==J);return!1}function ct(J,ot){return X(J.prev,J,J.next)<0?X(J,ot,J.next)>=0&&X(J,J.prev,ot)>=0:X(J,ot,J.prev)<0||X(J,J.next,ot)<0}function pt(J,ot){var q=J,gt=!1,yt=(J.x+ot.x)/2,et=(J.y+ot.y)/2;do q.y>et!=q.next.y>et&&q.next.y!==q.y&&yt<(q.next.x-q.x)*(et-q.y)/(q.next.y-q.y)+q.x&&(gt=!gt),q=q.next;while(q!==J);return gt}function Rt(J,ot){var q=new xt(J.i,J.x,J.y),gt=new xt(ot.i,ot.x,ot.y),yt=J.next,et=ot.prev;return J.next=ot,ot.prev=J,q.next=yt,yt.prev=q,gt.next=q,q.prev=gt,et.next=gt,gt.prev=et,gt}function Lt(J,ot,q,gt){var yt=new xt(J,ot,q);return gt?(yt.next=gt.next,yt.prev=gt,gt.next.prev=yt,gt.next=yt):(yt.prev=yt,yt.next=yt),yt}function ut(J){J.next.prev=J.prev,J.prev.next=J.next,J.prevZ&&(J.prevZ.nextZ=J.nextZ),J.nextZ&&(J.nextZ.prevZ=J.prevZ)}function xt(J,ot,q){this.i=J,this.x=ot,this.y=q,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}I.deviation=function(J,ot,q,gt){var yt=ot&&ot.length,et=yt?ot[0]*q:J.length,ht=Math.abs(At(J,0,et,q));if(yt)for(var Et=0,kt=ot.length;Et<kt;Et++){var Ft=ot[Et]*q,Bt=Et<kt-1?ot[Et+1]*q:J.length;ht-=Math.abs(At(J,Ft,Bt,q))}var Gt=0;for(Et=0;Et<gt.length;Et+=3){var Ct=gt[Et]*q,jt=gt[Et+1]*q,Kt=gt[Et+2]*q;Gt+=Math.abs((J[Ct]-J[Kt])*(J[jt+1]-J[Ct+1])-(J[Ct]-J[jt])*(J[Kt+1]-J[Ct+1]))}return ht===0&&Gt===0?0:Math.abs((Gt-ht)/ht)};function At(J,ot,q,gt){for(var yt=0,et=ot,ht=q-gt;et<q;et+=gt)yt+=(J[ht]-J[et])*(J[et+1]+J[ht+1]),ht=et;return yt}I.flatten=function(J){for(var ot=J[0][0].length,q={vertices:[],holes:[],dimensions:ot},gt=0,yt=0;yt<J.length;yt++){for(var et=0;et<J[yt].length;et++)for(var ht=0;ht<ot;ht++)q.vertices.push(J[yt][et][ht]);yt>0&&(gt+=J[yt-1].length,q.holes.push(gt))}return q}},9219:function(at){"use strict";var I=Object.prototype.hasOwnProperty,w="~";function b(){}Object.create&&(b.prototype=Object.create(null),new b().__proto__||(w=!1));function D(m,p,v){this.fn=m,this.context=p,this.once=v||!1}function M(m,p,v,y,T){if(typeof v!="function")throw new TypeError("The listener must be a function");var _=new D(v,y||m,T),A=w?w+p:p;return m._events[A]?m._events[A].fn?m._events[A]=[m._events[A],_]:m._events[A].push(_):(m._events[A]=_,m._eventsCount++),m}function O(m,p){--m._eventsCount===0?m._events=new b:delete m._events[p]}function C(){this._events=new b,this._eventsCount=0}C.prototype.eventNames=function(){var p=[],v,y;if(this._eventsCount===0)return p;for(y in v=this._events)I.call(v,y)&&p.push(w?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(v)):p},C.prototype.listeners=function(p){var v=w?w+p:p,y=this._events[v];if(!y)return[];if(y.fn)return[y.fn];for(var T=0,_=y.length,A=new Array(_);T<_;T++)A[T]=y[T].fn;return A},C.prototype.listenerCount=function(p){var v=w?w+p:p,y=this._events[v];return y?y.fn?1:y.length:0},C.prototype.emit=function(p,v,y,T,_,A){var P=w?w+p:p;if(!this._events[P])return!1;var x=this._events[P],B=arguments.length,G,k;if(x.fn){switch(x.once&&this.removeListener(p,x.fn,void 0,!0),B){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,v),!0;case 3:return x.fn.call(x.context,v,y),!0;case 4:return x.fn.call(x.context,v,y,T),!0;case 5:return x.fn.call(x.context,v,y,T,_),!0;case 6:return x.fn.call(x.context,v,y,T,_,A),!0}for(k=1,G=new Array(B-1);k<B;k++)G[k-1]=arguments[k];x.fn.apply(x.context,G)}else{var X=x.length,Y;for(k=0;k<X;k++)switch(x[k].once&&this.removeListener(p,x[k].fn,void 0,!0),B){case 1:x[k].fn.call(x[k].context);break;case 2:x[k].fn.call(x[k].context,v);break;case 3:x[k].fn.call(x[k].context,v,y);break;case 4:x[k].fn.call(x[k].context,v,y,T);break;default:if(!G)for(Y=1,G=new Array(B-1);Y<B;Y++)G[Y-1]=arguments[Y];x[k].fn.apply(x[k].context,G)}}return!0},C.prototype.on=function(p,v,y){return M(this,p,v,y,!1)},C.prototype.once=function(p,v,y){return M(this,p,v,y,!0)},C.prototype.removeListener=function(p,v,y,T){var _=w?w+p:p;if(!this._events[_])return this;if(!v)return O(this,_),this;var A=this._events[_];if(A.fn)A.fn===v&&(!T||A.once)&&(!y||A.context===y)&&O(this,_);else{for(var P=0,x=[],B=A.length;P<B;P++)(A[P].fn!==v||T&&!A[P].once||y&&A[P].context!==y)&&x.push(A[P]);x.length?this._events[_]=x.length===1?x[0]:x:O(this,_)}return this},C.prototype.removeAllListeners=function(p){var v;return p?(v=w?w+p:p,this._events[v]&&O(this,v)):(this._events=new b,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=w,C.EventEmitter=C,at.exports=C},9662:function(at){"use strict";var I="Function.prototype.bind called on incompatible ",w=Object.prototype.toString,b=Math.max,D="[object Function]",M=function(p,v){for(var y=[],T=0;T<p.length;T+=1)y[T]=p[T];for(var _=0;_<v.length;_+=1)y[_+p.length]=v[_];return y},O=function(p,v){for(var y=[],T=v||0,_=0;T<p.length;T+=1,_+=1)y[_]=p[T];return y},C=function(m,p){for(var v="",y=0;y<m.length;y+=1)v+=m[y],y+1<m.length&&(v+=p);return v};at.exports=function(p){var v=this;if(typeof v!="function"||w.apply(v)!==D)throw new TypeError(I+v);for(var y=O(arguments,1),T,_=function(){if(this instanceof T){var G=v.apply(this,M(y,arguments));return Object(G)===G?G:this}return v.apply(p,M(y,arguments))},A=b(0,v.length-y.length),P=[],x=0;x<A;x++)P[x]="$"+x;if(T=Function("binder","return function ("+C(P,",")+"){ return binder.apply(this,arguments); }")(_),v.prototype){var B=function(){};B.prototype=v.prototype,T.prototype=new B,B.prototype=null}return T}},7896:function(at,I,w){"use strict";var b=w(9662);at.exports=Function.prototype.bind||b},5787:function(at,I,w){"use strict";var b,D=SyntaxError,M=Function,O=TypeError,C=function(xt){try{return M('"use strict"; return ('+xt+").constructor;")()}catch(At){}},m=Object.getOwnPropertyDescriptor;if(m)try{m({},"")}catch(xt){m=null}var p=function(){throw new O},v=m?function(){try{return arguments.callee,p}catch(xt){try{return m(arguments,"callee").get}catch(At){return p}}}():p,y=w(2003)(),T=w(1532)(),_=Object.getPrototypeOf||(T?function(xt){return xt.__proto__}:null),A={},P=typeof Uint8Array=="undefined"||!_?b:_(Uint8Array),x={"%AggregateError%":typeof AggregateError=="undefined"?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?b:ArrayBuffer,"%ArrayIteratorPrototype%":y&&_?_([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics=="undefined"?b:Atomics,"%BigInt%":typeof BigInt=="undefined"?b:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?b:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?b:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?b:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?b:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?b:FinalizationRegistry,"%Function%":M,"%GeneratorFunction%":A,"%Int8Array%":typeof Int8Array=="undefined"?b:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?b:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&_?_(_([][Symbol.iterator]())):b,"%JSON%":typeof JSON=="object"?JSON:b,"%Map%":typeof Map=="undefined"?b:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!y||!_?b:_(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?b:Promise,"%Proxy%":typeof Proxy=="undefined"?b:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?b:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?b:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!y||!_?b:_(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&_?_(""[Symbol.iterator]()):b,"%Symbol%":y?Symbol:b,"%SyntaxError%":D,"%ThrowTypeError%":v,"%TypedArray%":P,"%TypeError%":O,"%Uint8Array%":typeof Uint8Array=="undefined"?b:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?b:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?b:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?b:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?b:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?b:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?b:WeakSet};if(_)try{null.error}catch(xt){var B=_(_(xt));x["%Error.prototype%"]=B}var G=function xt(At){var J;if(At==="%AsyncFunction%")J=C("async function () {}");else if(At==="%GeneratorFunction%")J=C("function* () {}");else if(At==="%AsyncGeneratorFunction%")J=C("async function* () {}");else if(At==="%AsyncGenerator%"){var ot=xt("%AsyncGeneratorFunction%");ot&&(J=ot.prototype)}else if(At==="%AsyncIteratorPrototype%"){var q=xt("%AsyncGenerator%");q&&_&&(J=_(q.prototype))}return x[At]=J,J},k={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},X=w(7896),Y=w(1268),j=X.call(Function.call,Array.prototype.concat),st=X.call(Function.apply,Array.prototype.splice),tt=X.call(Function.call,String.prototype.replace),rt=X.call(Function.call,String.prototype.slice),ct=X.call(Function.call,RegExp.prototype.exec),pt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rt=/\\(\\)?/g,Lt=function(At){var J=rt(At,0,1),ot=rt(At,-1);if(J==="%"&&ot!=="%")throw new D("invalid intrinsic syntax, expected closing `%`");if(ot==="%"&&J!=="%")throw new D("invalid intrinsic syntax, expected opening `%`");var q=[];return tt(At,pt,function(gt,yt,et,ht){q[q.length]=et?tt(ht,Rt,"$1"):yt||gt}),q},ut=function(At,J){var ot=At,q;if(Y(k,ot)&&(q=k[ot],ot="%"+q[0]+"%"),Y(x,ot)){var gt=x[ot];if(gt===A&&(gt=G(ot)),typeof gt=="undefined"&&!J)throw new O("intrinsic "+At+" exists, but is not available. Please file an issue!");return{alias:q,name:ot,value:gt}}throw new D("intrinsic "+At+" does not exist!")};at.exports=function(At,J){if(typeof At!="string"||At.length===0)throw new O("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof J!="boolean")throw new O('"allowMissing" argument must be a boolean');if(ct(/^%?[^%]*%?$/,At)===null)throw new D("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ot=Lt(At),q=ot.length>0?ot[0]:"",gt=ut("%"+q+"%",J),yt=gt.name,et=gt.value,ht=!1,Et=gt.alias;Et&&(q=Et[0],st(ot,j([0,1],Et)));for(var kt=1,Ft=!0;kt<ot.length;kt+=1){var Bt=ot[kt],Gt=rt(Bt,0,1),Ct=rt(Bt,-1);if((Gt==='"'||Gt==="'"||Gt==="`"||Ct==='"'||Ct==="'"||Ct==="`")&&Gt!==Ct)throw new D("property names with quotes must have matching quotes");if((Bt==="constructor"||!Ft)&&(ht=!0),q+="."+Bt,yt="%"+q+"%",Y(x,yt))et=x[yt];else if(et!=null){if(!(Bt in et)){if(!J)throw new O("base intrinsic for "+At+" exists, but the property is not available.");return}if(m&&kt+1>=ot.length){var jt=m(et,Bt);Ft=!!jt,Ft&&"get"in jt&&!("originalValue"in jt.get)?et=jt.get:et=et[Bt]}else Ft=Y(et,Bt),et=et[Bt];Ft&&!ht&&(x[yt]=et)}}return et}},4033:function(at,I,w){"use strict";var b=w(5787),D=b("%Object.getOwnPropertyDescriptor%",!0);if(D)try{D([],"length")}catch(M){D=null}at.exports=D},2555:function(at,I,w){"use strict";var b=w(5787),D=b("%Object.defineProperty%",!0),M=function(){if(D)try{return D({},"a",{value:1}),!0}catch(C){return!1}return!1};M.hasArrayLengthDefineBug=function(){if(!M())return null;try{return D([],"length",{value:1}).length!==1}catch(C){return!0}},at.exports=M},1532:function(at){"use strict";var I={foo:{}},w=Object;at.exports=function(){return{__proto__:I}.foo===I.foo&&!({__proto__:null}instanceof w)}},2003:function(at,I,w){"use strict";var b=typeof Symbol!="undefined"&&Symbol,D=w(5314);at.exports=function(){return typeof b!="function"||typeof Symbol!="function"||typeof b("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:D()}},5314:function(at){"use strict";at.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var w={},b=Symbol("test"),D=Object(b);if(typeof b=="string"||Object.prototype.toString.call(b)!=="[object Symbol]"||Object.prototype.toString.call(D)!=="[object Symbol]")return!1;var M=42;w[b]=M;for(b in w)return!1;if(typeof Object.keys=="function"&&Object.keys(w).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(w).length!==0)return!1;var O=Object.getOwnPropertySymbols(w);if(O.length!==1||O[0]!==b||!Object.prototype.propertyIsEnumerable.call(w,b))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var C=Object.getOwnPropertyDescriptor(w,b);if(C.value!==M||C.enumerable!==!0)return!1}return!0}},1268:function(at,I,w){"use strict";var b=Function.prototype.call,D=Object.prototype.hasOwnProperty,M=w(7896);at.exports=M.call(b,D)},9516:function(at,I,w){"use strict";w.r(I),w.d(I,{default:function(){return X}});var b=/iPhone/i,D=/iPod/i,M=/iPad/i,O=/\biOS-universal(?:.+)Mac\b/i,C=/\bAndroid(?:.+)Mobile\b/i,m=/Android/i,p=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,v=/Silk/i,y=/Windows Phone/i,T=/\bWindows(?:.+)ARM\b/i,_=/BlackBerry/i,A=/BB10/i,P=/Opera Mini/i,x=/\b(CriOS|Chrome)(?:.+)Mobile/i,B=/Mobile(?:.+)Firefox\b/i,G=function(Y){return typeof Y!="undefined"&&Y.platform==="MacIntel"&&typeof Y.maxTouchPoints=="number"&&Y.maxTouchPoints>1&&typeof MSStream=="undefined"};function k(Y){return function(j){return j.test(Y)}}function X(Y){var j={userAgent:"",platform:"",maxTouchPoints:0};!Y&&typeof navigator!="undefined"?j={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof Y=="string"?j.userAgent=Y:Y&&Y.userAgent&&(j={userAgent:Y.userAgent,platform:Y.platform,maxTouchPoints:Y.maxTouchPoints||0});var st=j.userAgent,tt=st.split("[FBAN");typeof tt[1]!="undefined"&&(st=tt[0]),tt=st.split("Twitter"),typeof tt[1]!="undefined"&&(st=tt[0]);var rt=k(st),ct={apple:{phone:rt(b)&&!rt(y),ipod:rt(D),tablet:!rt(b)&&(rt(M)||G(j))&&!rt(y),universal:rt(O),device:(rt(b)||rt(D)||rt(M)||rt(O)||G(j))&&!rt(y)},amazon:{phone:rt(p),tablet:!rt(p)&&rt(v),device:rt(p)||rt(v)},android:{phone:!rt(y)&&rt(p)||!rt(y)&&rt(C),tablet:!rt(y)&&!rt(p)&&!rt(C)&&(rt(v)||rt(m)),device:!rt(y)&&(rt(p)||rt(v)||rt(C)||rt(m))||rt(/\bokhttp\b/i)},windows:{phone:rt(y),tablet:rt(T),device:rt(y)||rt(T)},other:{blackberry:rt(_),blackberry10:rt(A),opera:rt(P),firefox:rt(B),chrome:rt(x),device:rt(_)||rt(A)||rt(P)||rt(B)||rt(x)},any:!1,phone:!1,tablet:!1};return ct.any=ct.apple.device||ct.android.device||ct.windows.device||ct.other.device,ct.phone=ct.apple.phone||ct.android.phone||ct.windows.phone,ct.tablet=ct.apple.tablet||ct.android.tablet||ct.windows.tablet,ct}},2621:function(at,I,w){var b=typeof Map=="function"&&Map.prototype,D=Object.getOwnPropertyDescriptor&&b?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,M=b&&D&&typeof D.get=="function"?D.get:null,O=b&&Map.prototype.forEach,C=typeof Set=="function"&&Set.prototype,m=Object.getOwnPropertyDescriptor&&C?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=C&&m&&typeof m.get=="function"?m.get:null,v=C&&Set.prototype.forEach,y=typeof WeakMap=="function"&&WeakMap.prototype,T=y?WeakMap.prototype.has:null,_=typeof WeakSet=="function"&&WeakSet.prototype,A=_?WeakSet.prototype.has:null,P=typeof WeakRef=="function"&&WeakRef.prototype,x=P?WeakRef.prototype.deref:null,B=Boolean.prototype.valueOf,G=Object.prototype.toString,k=Function.prototype.toString,X=String.prototype.match,Y=String.prototype.slice,j=String.prototype.replace,st=String.prototype.toUpperCase,tt=String.prototype.toLowerCase,rt=RegExp.prototype.test,ct=Array.prototype.concat,pt=Array.prototype.join,Rt=Array.prototype.slice,Lt=Math.floor,ut=typeof BigInt=="function"?BigInt.prototype.valueOf:null,xt=Object.getOwnPropertySymbols,At=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,J=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ot=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===J||"symbol")?Symbol.toStringTag:null,q=Object.prototype.propertyIsEnumerable,gt=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(wt){return wt.__proto__}:null);function yt(wt,Mt){if(wt===1/0||wt===-1/0||wt!==wt||wt&&wt>-1e3&&wt<1e3||rt.call(/e/,Mt))return Mt;var Xe=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof wt=="number"){var Ke=wt<0?-Lt(-wt):Lt(wt);if(Ke!==wt){var gr=String(Ke),Ae=Y.call(Mt,gr.length+1);return j.call(gr,Xe,"$&_")+"."+j.call(j.call(Ae,/([0-9]{3})/g,"$&_"),/_$/,"")}}return j.call(Mt,Xe,"$&_")}var et=w(6536),ht=et.custom,Et=ue(ht)?ht:null;at.exports=function wt(Mt,Xe,Ke,gr){var Ae=Xe||{};if(oe(Ae,"quoteStyle")&&Ae.quoteStyle!=="single"&&Ae.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(oe(Ae,"maxStringLength")&&(typeof Ae.maxStringLength=="number"?Ae.maxStringLength<0&&Ae.maxStringLength!==1/0:Ae.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ci=oe(Ae,"customInspect")?Ae.customInspect:!0;if(typeof ci!="boolean"&&ci!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(oe(Ae,"indent")&&Ae.indent!==null&&Ae.indent!=="	"&&!(parseInt(Ae.indent,10)===Ae.indent&&Ae.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(oe(Ae,"numericSeparator")&&typeof Ae.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var V=Ae.numericSeparator;if(typeof Mt=="undefined")return"undefined";if(Mt===null)return"null";if(typeof Mt=="boolean")return Mt?"true":"false";if(typeof Mt=="string")return hi(Mt,Ae);if(typeof Mt=="number"){if(Mt===0)return 1/0/Mt>0?"0":"-0";var K=String(Mt);return V?yt(Mt,K):K}if(typeof Mt=="bigint"){var nt=String(Mt)+"n";return V?yt(Mt,nt):nt}var St=typeof Ae.depth=="undefined"?5:Ae.depth;if(typeof Ke=="undefined"&&(Ke=0),Ke>=St&&St>0&&typeof Mt=="object")return Bt(Mt)?"[Array]":"[Object]";var Ot=rs(Ae,Ke);if(typeof gr=="undefined")gr=[];else if(kr(gr,Mt)>=0)return"[Circular]";function Xt(Gi,is,$o){if(is&&(gr=Rt.call(gr),gr.push(is)),$o){var gs={depth:Ae.depth};return oe(Ae,"quoteStyle")&&(gs.quoteStyle=Ae.quoteStyle),wt(Gi,gs,Ke+1,gr)}return wt(Gi,Ae,Ke+1,gr)}if(typeof Mt=="function"&&!Ct(Mt)){var se=Fr(Mt),Se=Fi(Mt,Xt);return"[Function"+(se?": "+se:" (anonymous)")+"]"+(Se.length>0?" { "+pt.call(Se,", ")+" }":"")}if(ue(Mt)){var ge=J?j.call(String(Mt),/^(Symbol\(.*\))_[^)]*$/,"$1"):At.call(Mt);return typeof Mt=="object"&&!J?dr(ge):ge}if(Li(Mt)){for(var Ue="<"+tt.call(String(Mt.nodeName)),We=Mt.attributes||[],ir=0;ir<We.length;ir++)Ue+=" "+We[ir].name+"="+kt(Ft(We[ir].value),"double",Ae);return Ue+=">",Mt.childNodes&&Mt.childNodes.length&&(Ue+="..."),Ue+="</"+tt.call(String(Mt.nodeName))+">",Ue}if(Bt(Mt)){if(Mt.length===0)return"[]";var Ve=Fi(Mt,Xt);return Ot&&!ms(Ve)?"["+Ar(Ve,Ot)+"]":"[ "+pt.call(Ve,", ")+" ]"}if(jt(Mt)){var Nr=Fi(Mt,Xt);return!("cause"in Error.prototype)&&"cause"in Mt&&!q.call(Mt,"cause")?"{ ["+String(Mt)+"] "+pt.call(ct.call("[cause]: "+Xt(Mt.cause),Nr),", ")+" }":Nr.length===0?"["+String(Mt)+"]":"{ ["+String(Mt)+"] "+pt.call(Nr,", ")+" }"}if(typeof Mt=="object"&&ci){if(Et&&typeof Mt[Et]=="function"&&et)return et(Mt,{depth:St-Ke});if(ci!=="symbol"&&typeof Mt.inspect=="function")return Mt.inspect()}if(ui(Mt)){var er=[];return O&&O.call(Mt,function(Gi,is){er.push(Xt(is,Mt,!0)+" => "+Xt(Gi,Mt))}),bi("Map",M.call(Mt),er,Ot)}if(Oi(Mt)){var Er=[];return v&&v.call(Mt,function(Gi){Er.push(Xt(Gi,Mt))}),bi("Set",p.call(Mt),Er,Ot)}if(Ti(Mt))return Si("WeakMap");if(Fe(Mt))return Si("WeakSet");if(Ei(Mt))return Si("WeakRef");if(ne(Mt))return dr(Xt(Number(Mt)));if(Oe(Mt))return dr(Xt(ut.call(Mt)));if(me(Mt))return dr(B.call(Mt));if(Kt(Mt))return dr(Xt(String(Mt)));if(typeof window!="undefined"&&Mt===window)return"{ [object Window] }";if(Mt===w.g)return"{ [object globalThis] }";if(!Gt(Mt)&&!Ct(Mt)){var ur=Fi(Mt,Xt),fi=gt?gt(Mt)===Object.prototype:Mt instanceof Object||Mt.constructor===Object,or=Mt instanceof Object?"":"null prototype",di=!fi&&ot&&Object(Mt)===Mt&&ot in Mt?Y.call(Le(Mt),8,-1):or?"Object":"",qr=fi||typeof Mt.constructor!="function"?"":Mt.constructor.name?Mt.constructor.name+" ":"",Ai=qr+(di||or?"["+pt.call(ct.call([],di||[],or||[]),": ")+"] ":"");return ur.length===0?Ai+"{}":Ot?Ai+"{"+Ar(ur,Ot)+"}":Ai+"{ "+pt.call(ur,", ")+" }"}return String(Mt)};function kt(wt,Mt,Xe){var Ke=(Xe.quoteStyle||Mt)==="double"?'"':"'";return Ke+wt+Ke}function Ft(wt){return j.call(String(wt),/"/g,"&quot;")}function Bt(wt){return Le(wt)==="[object Array]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function Gt(wt){return Le(wt)==="[object Date]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function Ct(wt){return Le(wt)==="[object RegExp]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function jt(wt){return Le(wt)==="[object Error]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function Kt(wt){return Le(wt)==="[object String]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function ne(wt){return Le(wt)==="[object Number]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function me(wt){return Le(wt)==="[object Boolean]"&&(!ot||!(typeof wt=="object"&&ot in wt))}function ue(wt){if(J)return wt&&typeof wt=="object"&&wt instanceof Symbol;if(typeof wt=="symbol")return!0;if(!wt||typeof wt!="object"||!At)return!1;try{return At.call(wt),!0}catch(Mt){}return!1}function Oe(wt){if(!wt||typeof wt!="object"||!ut)return!1;try{return ut.call(wt),!0}catch(Mt){}return!1}var de=Object.prototype.hasOwnProperty||function(wt){return wt in this};function oe(wt,Mt){return de.call(wt,Mt)}function Le(wt){return G.call(wt)}function Fr(wt){if(wt.name)return wt.name;var Mt=X.call(k.call(wt),/^function\s*([\w$]+)/);return Mt?Mt[1]:null}function kr(wt,Mt){if(wt.indexOf)return wt.indexOf(Mt);for(var Xe=0,Ke=wt.length;Xe<Ke;Xe++)if(wt[Xe]===Mt)return Xe;return-1}function ui(wt){if(!M||!wt||typeof wt!="object")return!1;try{M.call(wt);try{p.call(wt)}catch(Mt){return!0}return wt instanceof Map}catch(Mt){}return!1}function Ti(wt){if(!T||!wt||typeof wt!="object")return!1;try{T.call(wt,T);try{A.call(wt,A)}catch(Mt){return!0}return wt instanceof WeakMap}catch(Mt){}return!1}function Ei(wt){if(!x||!wt||typeof wt!="object")return!1;try{return x.call(wt),!0}catch(Mt){}return!1}function Oi(wt){if(!p||!wt||typeof wt!="object")return!1;try{p.call(wt);try{M.call(wt)}catch(Mt){return!0}return wt instanceof Set}catch(Mt){}return!1}function Fe(wt){if(!A||!wt||typeof wt!="object")return!1;try{A.call(wt,A);try{T.call(wt,T)}catch(Mt){return!0}return wt instanceof WeakSet}catch(Mt){}return!1}function Li(wt){return!wt||typeof wt!="object"?!1:typeof HTMLElement!="undefined"&&wt instanceof HTMLElement?!0:typeof wt.nodeName=="string"&&typeof wt.getAttribute=="function"}function hi(wt,Mt){if(wt.length>Mt.maxStringLength){var Xe=wt.length-Mt.maxStringLength,Ke="... "+Xe+" more character"+(Xe>1?"s":"");return hi(Y.call(wt,0,Mt.maxStringLength),Mt)+Ke}var gr=j.call(j.call(wt,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Xr);return kt(gr,"single",Mt)}function Xr(wt){var Mt=wt.charCodeAt(0),Xe={8:"b",9:"t",10:"n",12:"f",13:"r"}[Mt];return Xe?"\\"+Xe:"\\x"+(Mt<16?"0":"")+st.call(Mt.toString(16))}function dr(wt){return"Object("+wt+")"}function Si(wt){return wt+" { ? }"}function bi(wt,Mt,Xe,Ke){var gr=Ke?Ar(Xe,Ke):pt.call(Xe,", ");return wt+" ("+Mt+") {"+gr+"}"}function ms(wt){for(var Mt=0;Mt<wt.length;Mt++)if(kr(wt[Mt],`
`)>=0)return!1;return!0}function rs(wt,Mt){var Xe;if(wt.indent==="	")Xe="	";else if(typeof wt.indent=="number"&&wt.indent>0)Xe=pt.call(Array(wt.indent+1)," ");else return null;return{base:Xe,prev:pt.call(Array(Mt+1),Xe)}}function Ar(wt,Mt){if(wt.length===0)return"";var Xe=`
`+Mt.prev+Mt.base;return Xe+pt.call(wt,","+Xe)+`
`+Mt.prev}function Fi(wt,Mt){var Xe=Bt(wt),Ke=[];if(Xe){Ke.length=wt.length;for(var gr=0;gr<wt.length;gr++)Ke[gr]=oe(wt,gr)?Mt(wt[gr],wt):""}var Ae=typeof xt=="function"?xt(wt):[],ci;if(J){ci={};for(var V=0;V<Ae.length;V++)ci["$"+Ae[V]]=Ae[V]}for(var K in wt)oe(wt,K)&&(Xe&&String(Number(K))===K&&K<wt.length||J&&ci["$"+K]instanceof Symbol||(rt.call(/[^\w$]/,K)?Ke.push(Mt(K,wt)+": "+Mt(wt[K],wt)):Ke.push(K+": "+Mt(wt[K],wt))));if(typeof xt=="function")for(var nt=0;nt<Ae.length;nt++)q.call(wt,Ae[nt])&&Ke.push("["+Mt(Ae[nt])+"]: "+Mt(wt[Ae[nt]],wt));return Ke}},3318:function(at,I,w){"use strict";var b=w(8405),D=w(8781),M=w(5719),O=w(3661),C=w(64),m=w(93),p=w(5018);const v={AlphaFilter:D.AlphaFilter,BlurFilter:M.BlurFilter,BlurFilterPass:M.BlurFilterPass,ColorMatrixFilter:O.ColorMatrixFilter,DisplacementFilter:C.DisplacementFilter,FXAAFilter:m.FXAAFilter,NoiseFilter:p.NoiseFilter};Object.entries(v).forEach(([y,T])=>{Object.defineProperty(v,y,{get(){return b.utils.deprecation("7.1.0",`filters.${y} has moved to ${y}`),T}})}),I.filters=v},8101:function(at,I,w){"use strict";w(5916),w(4728),w(1125);var b=w(3318),D=w(3767),M=w(5556),O=w(3520),C=w(9974),m=w(8405),p=w(4784),v=w(952),y=w(3629),T=w(8781),_=w(5719),A=w(3661),P=w(64),x=w(93),B=w(5018),G=w(6325),k=w(3613),X=w(1427),Y=w(3953),j=w(8686),st=w(9779),tt=w(803),rt=w(2075),ct=w(3804),pt=w(2862),Rt=w(21),Lt=w(9050);I.filters=b.filters,Object.keys(D).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return D[ut]}})}),Object.keys(M).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return M[ut]}})}),Object.keys(O).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return O[ut]}})}),Object.keys(C).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return C[ut]}})}),Object.keys(m).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return m[ut]}})}),Object.keys(p).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return p[ut]}})}),Object.keys(v).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return v[ut]}})}),Object.keys(y).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return y[ut]}})}),Object.keys(T).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return T[ut]}})}),Object.keys(_).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return _[ut]}})}),Object.keys(A).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return A[ut]}})}),Object.keys(P).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return P[ut]}})}),Object.keys(x).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return x[ut]}})}),Object.keys(B).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return B[ut]}})}),Object.keys(G).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return G[ut]}})}),Object.keys(k).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return k[ut]}})}),Object.keys(X).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return X[ut]}})}),Object.keys(Y).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return Y[ut]}})}),Object.keys(j).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return j[ut]}})}),Object.keys(st).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return st[ut]}})}),Object.keys(tt).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return tt[ut]}})}),Object.keys(rt).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return rt[ut]}})}),Object.keys(ct).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return ct[ut]}})}),Object.keys(pt).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return pt[ut]}})}),Object.keys(Rt).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return Rt[ut]}})}),Object.keys(Lt).forEach(function(ut){ut!=="default"&&!Object.prototype.hasOwnProperty.call(I,ut)&&Object.defineProperty(I,ut,{enumerable:!0,get:function(){return Lt[ut]}})})},8036:function(at){"use strict";var I=String.prototype.replace,w=/%20/g,b={RFC1738:"RFC1738",RFC3986:"RFC3986"};at.exports={default:b.RFC3986,formatters:{RFC1738:function(D){return I.call(D,w,"+")},RFC3986:function(D){return String(D)}},RFC1738:b.RFC1738,RFC3986:b.RFC3986}},6781:function(at,I,w){"use strict";var b=w(3790),D=w(4284),M=w(8036);at.exports={formats:M,parse:D,stringify:b}},4284:function(at,I,w){"use strict";var b=w(898),D=Object.prototype.hasOwnProperty,M=Array.isArray,O={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:b.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},C=function(P){return P.replace(/&#(\d+);/g,function(x,B){return String.fromCharCode(parseInt(B,10))})},m=function(P,x){return P&&typeof P=="string"&&x.comma&&P.indexOf(",")>-1?P.split(","):P},p="utf8=%26%2310003%3B",v="utf8=%E2%9C%93",y=function(x,B){var G={__proto__:null},k=B.ignoreQueryPrefix?x.replace(/^\?/,""):x,X=B.parameterLimit===1/0?void 0:B.parameterLimit,Y=k.split(B.delimiter,X),j=-1,st,tt=B.charset;if(B.charsetSentinel)for(st=0;st<Y.length;++st)Y[st].indexOf("utf8=")===0&&(Y[st]===v?tt="utf-8":Y[st]===p&&(tt="iso-8859-1"),j=st,st=Y.length);for(st=0;st<Y.length;++st)if(st!==j){var rt=Y[st],ct=rt.indexOf("]="),pt=ct===-1?rt.indexOf("="):ct+1,Rt,Lt;pt===-1?(Rt=B.decoder(rt,O.decoder,tt,"key"),Lt=B.strictNullHandling?null:""):(Rt=B.decoder(rt.slice(0,pt),O.decoder,tt,"key"),Lt=b.maybeMap(m(rt.slice(pt+1),B),function(ut){return B.decoder(ut,O.decoder,tt,"value")})),Lt&&B.interpretNumericEntities&&tt==="iso-8859-1"&&(Lt=C(Lt)),rt.indexOf("[]=")>-1&&(Lt=M(Lt)?[Lt]:Lt),D.call(G,Rt)?G[Rt]=b.combine(G[Rt],Lt):G[Rt]=Lt}return G},T=function(P,x,B,G){for(var k=G?x:m(x,B),X=P.length-1;X>=0;--X){var Y,j=P[X];if(j==="[]"&&B.parseArrays)Y=[].concat(k);else{Y=B.plainObjects?Object.create(null):{};var st=j.charAt(0)==="["&&j.charAt(j.length-1)==="]"?j.slice(1,-1):j,tt=parseInt(st,10);!B.parseArrays&&st===""?Y={0:k}:!isNaN(tt)&&j!==st&&String(tt)===st&&tt>=0&&B.parseArrays&&tt<=B.arrayLimit?(Y=[],Y[tt]=k):st!=="__proto__"&&(Y[st]=k)}k=Y}return k},_=function(x,B,G,k){if(x){var X=G.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x,Y=/(\[[^[\]]*])/,j=/(\[[^[\]]*])/g,st=G.depth>0&&Y.exec(X),tt=st?X.slice(0,st.index):X,rt=[];if(tt){if(!G.plainObjects&&D.call(Object.prototype,tt)&&!G.allowPrototypes)return;rt.push(tt)}for(var ct=0;G.depth>0&&(st=j.exec(X))!==null&&ct<G.depth;){if(ct+=1,!G.plainObjects&&D.call(Object.prototype,st[1].slice(1,-1))&&!G.allowPrototypes)return;rt.push(st[1])}return st&&rt.push("["+X.slice(st.index)+"]"),T(rt,B,G,k)}},A=function(x){if(!x)return O;if(x.decoder!==null&&x.decoder!==void 0&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset!="undefined"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var B=typeof x.charset=="undefined"?O.charset:x.charset;return{allowDots:typeof x.allowDots=="undefined"?O.allowDots:!!x.allowDots,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:O.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:O.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:O.arrayLimit,charset:B,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:O.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:O.comma,decoder:typeof x.decoder=="function"?x.decoder:O.decoder,delimiter:typeof x.delimiter=="string"||b.isRegExp(x.delimiter)?x.delimiter:O.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:O.depth,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:O.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:O.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:O.plainObjects,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:O.strictNullHandling}};at.exports=function(P,x){var B=A(x);if(P===""||P===null||typeof P=="undefined")return B.plainObjects?Object.create(null):{};for(var G=typeof P=="string"?y(P,B):P,k=B.plainObjects?Object.create(null):{},X=Object.keys(G),Y=0;Y<X.length;++Y){var j=X[Y],st=_(j,G[j],B,typeof P=="string");k=b.merge(k,st,B)}return B.allowSparse===!0?k:b.compact(k)}},3790:function(at,I,w){"use strict";var b=w(6703),D=w(898),M=w(8036),O=Object.prototype.hasOwnProperty,C={brackets:function(k){return k+"[]"},comma:"comma",indices:function(k,X){return k+"["+X+"]"},repeat:function(k){return k}},m=Array.isArray,p=Array.prototype.push,v=function(G,k){p.apply(G,m(k)?k:[k])},y=Date.prototype.toISOString,T=M.default,_={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:D.encode,encodeValuesOnly:!1,format:T,formatter:M.formatters[T],indices:!1,serializeDate:function(k){return y.call(k)},skipNulls:!1,strictNullHandling:!1},A=function(k){return typeof k=="string"||typeof k=="number"||typeof k=="boolean"||typeof k=="symbol"||typeof k=="bigint"},P={},x=function G(k,X,Y,j,st,tt,rt,ct,pt,Rt,Lt,ut,xt,At,J,ot){for(var q=k,gt=ot,yt=0,et=!1;(gt=gt.get(P))!==void 0&&!et;){var ht=gt.get(k);if(yt+=1,typeof ht!="undefined"){if(ht===yt)throw new RangeError("Cyclic object value");et=!0}typeof gt.get(P)=="undefined"&&(yt=0)}if(typeof ct=="function"?q=ct(X,q):q instanceof Date?q=Lt(q):Y==="comma"&&m(q)&&(q=D.maybeMap(q,function(ue){return ue instanceof Date?Lt(ue):ue})),q===null){if(st)return rt&&!At?rt(X,_.encoder,J,"key",ut):X;q=""}if(A(q)||D.isBuffer(q)){if(rt){var Et=At?X:rt(X,_.encoder,J,"key",ut);return[xt(Et)+"="+xt(rt(q,_.encoder,J,"value",ut))]}return[xt(X)+"="+xt(String(q))]}var kt=[];if(typeof q=="undefined")return kt;var Ft;if(Y==="comma"&&m(q))At&&rt&&(q=D.maybeMap(q,rt)),Ft=[{value:q.length>0?q.join(",")||null:void 0}];else if(m(ct))Ft=ct;else{var Bt=Object.keys(q);Ft=pt?Bt.sort(pt):Bt}for(var Gt=j&&m(q)&&q.length===1?X+"[]":X,Ct=0;Ct<Ft.length;++Ct){var jt=Ft[Ct],Kt=typeof jt=="object"&&typeof jt.value!="undefined"?jt.value:q[jt];if(!(tt&&Kt===null)){var ne=m(q)?typeof Y=="function"?Y(Gt,jt):Gt:Gt+(Rt?"."+jt:"["+jt+"]");ot.set(k,yt);var me=b();me.set(P,ot),v(kt,G(Kt,ne,Y,j,st,tt,Y==="comma"&&At&&m(q)?null:rt,ct,pt,Rt,Lt,ut,xt,At,J,me))}}return kt},B=function(k){if(!k)return _;if(k.encoder!==null&&typeof k.encoder!="undefined"&&typeof k.encoder!="function")throw new TypeError("Encoder has to be a function.");var X=k.charset||_.charset;if(typeof k.charset!="undefined"&&k.charset!=="utf-8"&&k.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Y=M.default;if(typeof k.format!="undefined"){if(!O.call(M.formatters,k.format))throw new TypeError("Unknown format option provided.");Y=k.format}var j=M.formatters[Y],st=_.filter;return(typeof k.filter=="function"||m(k.filter))&&(st=k.filter),{addQueryPrefix:typeof k.addQueryPrefix=="boolean"?k.addQueryPrefix:_.addQueryPrefix,allowDots:typeof k.allowDots=="undefined"?_.allowDots:!!k.allowDots,charset:X,charsetSentinel:typeof k.charsetSentinel=="boolean"?k.charsetSentinel:_.charsetSentinel,delimiter:typeof k.delimiter=="undefined"?_.delimiter:k.delimiter,encode:typeof k.encode=="boolean"?k.encode:_.encode,encoder:typeof k.encoder=="function"?k.encoder:_.encoder,encodeValuesOnly:typeof k.encodeValuesOnly=="boolean"?k.encodeValuesOnly:_.encodeValuesOnly,filter:st,format:Y,formatter:j,serializeDate:typeof k.serializeDate=="function"?k.serializeDate:_.serializeDate,skipNulls:typeof k.skipNulls=="boolean"?k.skipNulls:_.skipNulls,sort:typeof k.sort=="function"?k.sort:null,strictNullHandling:typeof k.strictNullHandling=="boolean"?k.strictNullHandling:_.strictNullHandling}};at.exports=function(G,k){var X=G,Y=B(k),j,st;typeof Y.filter=="function"?(st=Y.filter,X=st("",X)):m(Y.filter)&&(st=Y.filter,j=st);var tt=[];if(typeof X!="object"||X===null)return"";var rt;k&&k.arrayFormat in C?rt=k.arrayFormat:k&&"indices"in k?rt=k.indices?"indices":"repeat":rt="indices";var ct=C[rt];if(k&&"commaRoundTrip"in k&&typeof k.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var pt=ct==="comma"&&k&&k.commaRoundTrip;j||(j=Object.keys(X)),Y.sort&&j.sort(Y.sort);for(var Rt=b(),Lt=0;Lt<j.length;++Lt){var ut=j[Lt];Y.skipNulls&&X[ut]===null||v(tt,x(X[ut],ut,ct,pt,Y.strictNullHandling,Y.skipNulls,Y.encode?Y.encoder:null,Y.filter,Y.sort,Y.allowDots,Y.serializeDate,Y.format,Y.formatter,Y.encodeValuesOnly,Y.charset,Rt))}var xt=tt.join(Y.delimiter),At=Y.addQueryPrefix===!0?"?":"";return Y.charsetSentinel&&(Y.charset==="iso-8859-1"?At+="utf8=%26%2310003%3B&":At+="utf8=%E2%9C%93&"),xt.length>0?At+xt:""}},898:function(at,I,w){"use strict";var b=w(8036),D=Object.prototype.hasOwnProperty,M=Array.isArray,O=function(){for(var G=[],k=0;k<256;++k)G.push("%"+((k<16?"0":"")+k.toString(16)).toUpperCase());return G}(),C=function(k){for(;k.length>1;){var X=k.pop(),Y=X.obj[X.prop];if(M(Y)){for(var j=[],st=0;st<Y.length;++st)typeof Y[st]!="undefined"&&j.push(Y[st]);X.obj[X.prop]=j}}},m=function(k,X){for(var Y=X&&X.plainObjects?Object.create(null):{},j=0;j<k.length;++j)typeof k[j]!="undefined"&&(Y[j]=k[j]);return Y},p=function G(k,X,Y){if(!X)return k;if(typeof X!="object"){if(M(k))k.push(X);else if(k&&typeof k=="object")(Y&&(Y.plainObjects||Y.allowPrototypes)||!D.call(Object.prototype,X))&&(k[X]=!0);else return[k,X];return k}if(!k||typeof k!="object")return[k].concat(X);var j=k;return M(k)&&!M(X)&&(j=m(k,Y)),M(k)&&M(X)?(X.forEach(function(st,tt){if(D.call(k,tt)){var rt=k[tt];rt&&typeof rt=="object"&&st&&typeof st=="object"?k[tt]=G(rt,st,Y):k.push(st)}else k[tt]=st}),k):Object.keys(X).reduce(function(st,tt){var rt=X[tt];return D.call(st,tt)?st[tt]=G(st[tt],rt,Y):st[tt]=rt,st},j)},v=function(k,X){return Object.keys(X).reduce(function(Y,j){return Y[j]=X[j],Y},k)},y=function(G,k,X){var Y=G.replace(/\+/g," ");if(X==="iso-8859-1")return Y.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Y)}catch(j){return Y}},T=function(k,X,Y,j,st){if(k.length===0)return k;var tt=k;if(typeof k=="symbol"?tt=Symbol.prototype.toString.call(k):typeof k!="string"&&(tt=String(k)),Y==="iso-8859-1")return escape(tt).replace(/%u[0-9a-f]{4}/gi,function(Rt){return"%26%23"+parseInt(Rt.slice(2),16)+"%3B"});for(var rt="",ct=0;ct<tt.length;++ct){var pt=tt.charCodeAt(ct);if(pt===45||pt===46||pt===95||pt===126||pt>=48&&pt<=57||pt>=65&&pt<=90||pt>=97&&pt<=122||st===b.RFC1738&&(pt===40||pt===41)){rt+=tt.charAt(ct);continue}if(pt<128){rt=rt+O[pt];continue}if(pt<2048){rt=rt+(O[192|pt>>6]+O[128|pt&63]);continue}if(pt<55296||pt>=57344){rt=rt+(O[224|pt>>12]+O[128|pt>>6&63]+O[128|pt&63]);continue}ct+=1,pt=65536+((pt&1023)<<10|tt.charCodeAt(ct)&1023),rt+=O[240|pt>>18]+O[128|pt>>12&63]+O[128|pt>>6&63]+O[128|pt&63]}return rt},_=function(k){for(var X=[{obj:{o:k},prop:"o"}],Y=[],j=0;j<X.length;++j)for(var st=X[j],tt=st.obj[st.prop],rt=Object.keys(tt),ct=0;ct<rt.length;++ct){var pt=rt[ct],Rt=tt[pt];typeof Rt=="object"&&Rt!==null&&Y.indexOf(Rt)===-1&&(X.push({obj:tt,prop:pt}),Y.push(Rt))}return C(X),k},A=function(k){return Object.prototype.toString.call(k)==="[object RegExp]"},P=function(k){return!k||typeof k!="object"?!1:!!(k.constructor&&k.constructor.isBuffer&&k.constructor.isBuffer(k))},x=function(k,X){return[].concat(k,X)},B=function(k,X){if(M(k)){for(var Y=[],j=0;j<k.length;j+=1)Y.push(X(k[j]));return Y}return X(k)};at.exports={arrayToObject:m,assign:v,combine:x,compact:_,decode:y,encode:T,isBuffer:P,isRegExp:A,maybeMap:B,merge:p}},4195:function(at,I,w){"use strict";var b=w(5787),D=w(2239),M=w(2555)(),O=w(4033),C=b("%TypeError%"),m=b("%Math.floor%");at.exports=function(v,y){if(typeof v!="function")throw new C("`fn` is not a function");if(typeof y!="number"||y<0||y>4294967295||m(y)!==y)throw new C("`length` must be a positive 32-bit integer");var T=arguments.length>2&&!!arguments[2],_=!0,A=!0;if("length"in v&&O){var P=O(v,"length");P&&!P.configurable&&(_=!1),P&&!P.writable&&(A=!1)}return(_||A||!T)&&(M?D(v,"length",y,!0,!0):D(v,"length",y)),v}},6703:function(at,I,w){"use strict";var b=w(5787),D=w(4361),M=w(2621),O=b("%TypeError%"),C=b("%WeakMap%",!0),m=b("%Map%",!0),p=D("WeakMap.prototype.get",!0),v=D("WeakMap.prototype.set",!0),y=D("WeakMap.prototype.has",!0),T=D("Map.prototype.get",!0),_=D("Map.prototype.set",!0),A=D("Map.prototype.has",!0),P=function(k,X){for(var Y=k,j;(j=Y.next)!==null;Y=j)if(j.key===X)return Y.next=j.next,j.next=k.next,k.next=j,j},x=function(k,X){var Y=P(k,X);return Y&&Y.value},B=function(k,X,Y){var j=P(k,X);j?j.value=Y:k.next={key:X,next:k.next,value:Y}},G=function(k,X){return!!P(k,X)};at.exports=function(){var X,Y,j,st={assert:function(tt){if(!st.has(tt))throw new O("Side channel does not contain "+M(tt))},get:function(tt){if(C&&tt&&(typeof tt=="object"||typeof tt=="function")){if(X)return p(X,tt)}else if(m){if(Y)return T(Y,tt)}else if(j)return x(j,tt)},has:function(tt){if(C&&tt&&(typeof tt=="object"||typeof tt=="function")){if(X)return y(X,tt)}else if(m){if(Y)return A(Y,tt)}else if(j)return G(j,tt);return!1},set:function(tt,rt){C&&tt&&(typeof tt=="object"||typeof tt=="function")?(X||(X=new C),v(X,tt,rt)):m?(Y||(Y=new m),_(Y,tt,rt)):(j||(j={key:{},next:null}),B(j,tt,rt))}};return st}},6327:function(at,I,w){at=w.nmd(at);var b;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(D){var M=I&&!I.nodeType&&I,O=at&&!at.nodeType&&at,C=typeof w.g=="object"&&w.g;(C.global===C||C.window===C||C.self===C)&&(D=C);var m,p=2147483647,v=36,y=1,T=26,_=38,A=700,P=72,x=128,B="-",G=/^xn--/,k=/[^\x20-\x7E]/,X=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=v-y,st=Math.floor,tt=String.fromCharCode,rt;function ct(et){throw new RangeError(Y[et])}function pt(et,ht){for(var Et=et.length,kt=[];Et--;)kt[Et]=ht(et[Et]);return kt}function Rt(et,ht){var Et=et.split("@"),kt="";Et.length>1&&(kt=Et[0]+"@",et=Et[1]),et=et.replace(X,".");var Ft=et.split("."),Bt=pt(Ft,ht).join(".");return kt+Bt}function Lt(et){for(var ht=[],Et=0,kt=et.length,Ft,Bt;Et<kt;)Ft=et.charCodeAt(Et++),Ft>=55296&&Ft<=56319&&Et<kt?(Bt=et.charCodeAt(Et++),(Bt&64512)==56320?ht.push(((Ft&1023)<<10)+(Bt&1023)+65536):(ht.push(Ft),Et--)):ht.push(Ft);return ht}function ut(et){return pt(et,function(ht){var Et="";return ht>65535&&(ht-=65536,Et+=tt(ht>>>10&1023|55296),ht=56320|ht&1023),Et+=tt(ht),Et}).join("")}function xt(et){return et-48<10?et-22:et-65<26?et-65:et-97<26?et-97:v}function At(et,ht){return et+22+75*(et<26)-((ht!=0)<<5)}function J(et,ht,Et){var kt=0;for(et=Et?st(et/A):et>>1,et+=st(et/ht);et>j*T>>1;kt+=v)et=st(et/j);return st(kt+(j+1)*et/(et+_))}function ot(et){var ht=[],Et=et.length,kt,Ft=0,Bt=x,Gt=P,Ct,jt,Kt,ne,me,ue,Oe,de,oe;for(Ct=et.lastIndexOf(B),Ct<0&&(Ct=0),jt=0;jt<Ct;++jt)et.charCodeAt(jt)>=128&&ct("not-basic"),ht.push(et.charCodeAt(jt));for(Kt=Ct>0?Ct+1:0;Kt<Et;){for(ne=Ft,me=1,ue=v;Kt>=Et&&ct("invalid-input"),Oe=xt(et.charCodeAt(Kt++)),(Oe>=v||Oe>st((p-Ft)/me))&&ct("overflow"),Ft+=Oe*me,de=ue<=Gt?y:ue>=Gt+T?T:ue-Gt,!(Oe<de);ue+=v)oe=v-de,me>st(p/oe)&&ct("overflow"),me*=oe;kt=ht.length+1,Gt=J(Ft-ne,kt,ne==0),st(Ft/kt)>p-Bt&&ct("overflow"),Bt+=st(Ft/kt),Ft%=kt,ht.splice(Ft++,0,Bt)}return ut(ht)}function q(et){var ht,Et,kt,Ft,Bt,Gt,Ct,jt,Kt,ne,me,ue=[],Oe,de,oe,Le;for(et=Lt(et),Oe=et.length,ht=x,Et=0,Bt=P,Gt=0;Gt<Oe;++Gt)me=et[Gt],me<128&&ue.push(tt(me));for(kt=Ft=ue.length,Ft&&ue.push(B);kt<Oe;){for(Ct=p,Gt=0;Gt<Oe;++Gt)me=et[Gt],me>=ht&&me<Ct&&(Ct=me);for(de=kt+1,Ct-ht>st((p-Et)/de)&&ct("overflow"),Et+=(Ct-ht)*de,ht=Ct,Gt=0;Gt<Oe;++Gt)if(me=et[Gt],me<ht&&++Et>p&&ct("overflow"),me==ht){for(jt=Et,Kt=v;ne=Kt<=Bt?y:Kt>=Bt+T?T:Kt-Bt,!(jt<ne);Kt+=v)Le=jt-ne,oe=v-ne,ue.push(tt(At(ne+Le%oe,0))),jt=st(Le/oe);ue.push(tt(At(jt,0))),Bt=J(Et,de,kt==Ft),Et=0,++kt}++Et,++ht}return ue.join("")}function gt(et){return Rt(et,function(ht){return G.test(ht)?ot(ht.slice(4).toLowerCase()):ht})}function yt(et){return Rt(et,function(ht){return k.test(ht)?"xn--"+q(ht):ht})}m={version:"1.4.1",ucs2:{decode:Lt,encode:ut},decode:ot,encode:q,toASCII:yt,toUnicode:gt},b=function(){return m}.call(I,w,I,at),b!==void 0&&(at.exports=b)})(this)},1805:function(at,I,w){"use strict";var b=w(6327);function D(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var M=/^([a-z0-9.+-]+:)/i,O=/:[0-9]*$/,C=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,m=["<",">",'"',"`"," ","\r",`
`,"	"],p=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(p),y=["%","/","?",";","#"].concat(v),T=["/","?","#"],_=255,A=/^[+a-z0-9A-Z_-]{0,63}$/,P=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},G={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=w(6781);function X(tt,rt,ct){if(tt&&typeof tt=="object"&&tt instanceof D)return tt;var pt=new D;return pt.parse(tt,rt,ct),pt}D.prototype.parse=function(tt,rt,ct){if(typeof tt!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof tt);var pt=tt.indexOf("?"),Rt=pt!==-1&&pt<tt.indexOf("#")?"?":"#",Lt=tt.split(Rt),ut=/\\/g;Lt[0]=Lt[0].replace(ut,"/"),tt=Lt.join(Rt);var xt=tt;if(xt=xt.trim(),!ct&&tt.split("#").length===1){var At=C.exec(xt);if(At)return this.path=xt,this.href=xt,this.pathname=At[1],At[2]?(this.search=At[2],rt?this.query=k.parse(this.search.substr(1)):this.query=this.search.substr(1)):rt&&(this.search="",this.query={}),this}var J=M.exec(xt);if(J){J=J[0];var ot=J.toLowerCase();this.protocol=ot,xt=xt.substr(J.length)}if(ct||J||xt.match(/^\/\/[^@/]+@[^@/]+/)){var q=xt.substr(0,2)==="//";q&&!(J&&B[J])&&(xt=xt.substr(2),this.slashes=!0)}if(!B[J]&&(q||J&&!G[J])){for(var gt=-1,yt=0;yt<T.length;yt++){var et=xt.indexOf(T[yt]);et!==-1&&(gt===-1||et<gt)&&(gt=et)}var ht,Et;gt===-1?Et=xt.lastIndexOf("@"):Et=xt.lastIndexOf("@",gt),Et!==-1&&(ht=xt.slice(0,Et),xt=xt.slice(Et+1),this.auth=decodeURIComponent(ht)),gt=-1;for(var yt=0;yt<y.length;yt++){var et=xt.indexOf(y[yt]);et!==-1&&(gt===-1||et<gt)&&(gt=et)}gt===-1&&(gt=xt.length),this.host=xt.slice(0,gt),xt=xt.slice(gt),this.parseHost(),this.hostname=this.hostname||"";var kt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!kt)for(var Ft=this.hostname.split(/\./),yt=0,Bt=Ft.length;yt<Bt;yt++){var Gt=Ft[yt];if(Gt&&!Gt.match(A)){for(var Ct="",jt=0,Kt=Gt.length;jt<Kt;jt++)Gt.charCodeAt(jt)>127?Ct+="x":Ct+=Gt[jt];if(!Ct.match(A)){var ne=Ft.slice(0,yt),me=Ft.slice(yt+1),ue=Gt.match(P);ue&&(ne.push(ue[1]),me.unshift(ue[2])),me.length&&(xt="/"+me.join(".")+xt),this.hostname=ne.join(".");break}}}this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),kt||(this.hostname=b.toASCII(this.hostname));var Oe=this.port?":"+this.port:"",de=this.hostname||"";this.host=de+Oe,this.href+=this.host,kt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),xt[0]!=="/"&&(xt="/"+xt))}if(!x[ot])for(var yt=0,Bt=v.length;yt<Bt;yt++){var oe=v[yt];if(xt.indexOf(oe)!==-1){var Le=encodeURIComponent(oe);Le===oe&&(Le=escape(oe)),xt=xt.split(oe).join(Le)}}var Fr=xt.indexOf("#");Fr!==-1&&(this.hash=xt.substr(Fr),xt=xt.slice(0,Fr));var kr=xt.indexOf("?");if(kr!==-1?(this.search=xt.substr(kr),this.query=xt.substr(kr+1),rt&&(this.query=k.parse(this.query)),xt=xt.slice(0,kr)):rt&&(this.search="",this.query={}),xt&&(this.pathname=xt),G[ot]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Oe=this.pathname||"",ui=this.search||"";this.path=Oe+ui}return this.href=this.format(),this};function Y(tt){return typeof tt=="string"&&(tt=X(tt)),tt instanceof D?tt.format():D.prototype.format.call(tt)}D.prototype.format=function(){var tt=this.auth||"";tt&&(tt=encodeURIComponent(tt),tt=tt.replace(/%3A/i,":"),tt+="@");var rt=this.protocol||"",ct=this.pathname||"",pt=this.hash||"",Rt=!1,Lt="";this.host?Rt=tt+this.host:this.hostname&&(Rt=tt+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Rt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(Lt=k.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ut=this.search||Lt&&"?"+Lt||"";return rt&&rt.substr(-1)!==":"&&(rt+=":"),this.slashes||(!rt||G[rt])&&Rt!==!1?(Rt="//"+(Rt||""),ct&&ct.charAt(0)!=="/"&&(ct="/"+ct)):Rt||(Rt=""),pt&&pt.charAt(0)!=="#"&&(pt="#"+pt),ut&&ut.charAt(0)!=="?"&&(ut="?"+ut),ct=ct.replace(/[?#]/g,function(xt){return encodeURIComponent(xt)}),ut=ut.replace("#","%23"),rt+Rt+ct+ut+pt};function j(tt,rt){return X(tt,!1,!0).resolve(rt)}D.prototype.resolve=function(tt){return this.resolveObject(X(tt,!1,!0)).format()};function st(tt,rt){return tt?X(tt,!1,!0).resolveObject(rt):rt}D.prototype.resolveObject=function(tt){if(typeof tt=="string"){var rt=new D;rt.parse(tt,!1,!0),tt=rt}for(var ct=new D,pt=Object.keys(this),Rt=0;Rt<pt.length;Rt++){var Lt=pt[Rt];ct[Lt]=this[Lt]}if(ct.hash=tt.hash,tt.href==="")return ct.href=ct.format(),ct;if(tt.slashes&&!tt.protocol){for(var ut=Object.keys(tt),xt=0;xt<ut.length;xt++){var At=ut[xt];At!=="protocol"&&(ct[At]=tt[At])}return G[ct.protocol]&&ct.hostname&&!ct.pathname&&(ct.pathname="/",ct.path=ct.pathname),ct.href=ct.format(),ct}if(tt.protocol&&tt.protocol!==ct.protocol){if(!G[tt.protocol]){for(var J=Object.keys(tt),ot=0;ot<J.length;ot++){var q=J[ot];ct[q]=tt[q]}return ct.href=ct.format(),ct}if(ct.protocol=tt.protocol,!tt.host&&!B[tt.protocol]){for(var Bt=(tt.pathname||"").split("/");Bt.length&&!(tt.host=Bt.shift()););tt.host||(tt.host=""),tt.hostname||(tt.hostname=""),Bt[0]!==""&&Bt.unshift(""),Bt.length<2&&Bt.unshift(""),ct.pathname=Bt.join("/")}else ct.pathname=tt.pathname;if(ct.search=tt.search,ct.query=tt.query,ct.host=tt.host||"",ct.auth=tt.auth,ct.hostname=tt.hostname||tt.host,ct.port=tt.port,ct.pathname||ct.search){var gt=ct.pathname||"",yt=ct.search||"";ct.path=gt+yt}return ct.slashes=ct.slashes||tt.slashes,ct.href=ct.format(),ct}var et=ct.pathname&&ct.pathname.charAt(0)==="/",ht=tt.host||tt.pathname&&tt.pathname.charAt(0)==="/",Et=ht||et||ct.host&&tt.pathname,kt=Et,Ft=ct.pathname&&ct.pathname.split("/")||[],Bt=tt.pathname&&tt.pathname.split("/")||[],Gt=ct.protocol&&!G[ct.protocol];if(Gt&&(ct.hostname="",ct.port=null,ct.host&&(Ft[0]===""?Ft[0]=ct.host:Ft.unshift(ct.host)),ct.host="",tt.protocol&&(tt.hostname=null,tt.port=null,tt.host&&(Bt[0]===""?Bt[0]=tt.host:Bt.unshift(tt.host)),tt.host=null),Et=Et&&(Bt[0]===""||Ft[0]==="")),ht)ct.host=tt.host||tt.host===""?tt.host:ct.host,ct.hostname=tt.hostname||tt.hostname===""?tt.hostname:ct.hostname,ct.search=tt.search,ct.query=tt.query,Ft=Bt;else if(Bt.length)Ft||(Ft=[]),Ft.pop(),Ft=Ft.concat(Bt),ct.search=tt.search,ct.query=tt.query;else if(tt.search!=null){if(Gt){ct.host=Ft.shift(),ct.hostname=ct.host;var Ct=ct.host&&ct.host.indexOf("@")>0?ct.host.split("@"):!1;Ct&&(ct.auth=Ct.shift(),ct.hostname=Ct.shift(),ct.host=ct.hostname)}return ct.search=tt.search,ct.query=tt.query,(ct.pathname!==null||ct.search!==null)&&(ct.path=(ct.pathname?ct.pathname:"")+(ct.search?ct.search:"")),ct.href=ct.format(),ct}if(!Ft.length)return ct.pathname=null,ct.search?ct.path="/"+ct.search:ct.path=null,ct.href=ct.format(),ct;for(var jt=Ft.slice(-1)[0],Kt=(ct.host||tt.host||Ft.length>1)&&(jt==="."||jt==="..")||jt==="",ne=0,me=Ft.length;me>=0;me--)jt=Ft[me],jt==="."?Ft.splice(me,1):jt===".."?(Ft.splice(me,1),ne++):ne&&(Ft.splice(me,1),ne--);if(!Et&&!kt)for(;ne--;ne)Ft.unshift("..");Et&&Ft[0]!==""&&(!Ft[0]||Ft[0].charAt(0)!=="/")&&Ft.unshift(""),Kt&&Ft.join("/").substr(-1)!=="/"&&Ft.push("");var ue=Ft[0]===""||Ft[0]&&Ft[0].charAt(0)==="/";if(Gt){ct.hostname=ue?"":Ft.length?Ft.shift():"",ct.host=ct.hostname;var Ct=ct.host&&ct.host.indexOf("@")>0?ct.host.split("@"):!1;Ct&&(ct.auth=Ct.shift(),ct.hostname=Ct.shift(),ct.host=ct.hostname)}return Et=Et||ct.host&&Ft.length,Et&&!ue&&Ft.unshift(""),Ft.length>0?ct.pathname=Ft.join("/"):(ct.pathname=null,ct.path=null),(ct.pathname!==null||ct.search!==null)&&(ct.path=(ct.pathname?ct.pathname:"")+(ct.search?ct.search:"")),ct.auth=tt.auth||ct.auth,ct.slashes=ct.slashes||tt.slashes,ct.href=ct.format(),ct},D.prototype.parseHost=function(){var tt=this.host,rt=O.exec(tt);rt&&(rt=rt[0],rt!==":"&&(this.port=rt.substr(1)),tt=tt.substr(0,tt.length-rt.length)),tt&&(this.hostname=tt)},I.parse=X,I.resolve=j,I.resolveObject=st,I.format=Y,I.Url=D},4654:function(){},6536:function(){},3967:function(at,I){var w,b;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(){"use strict";var D={}.hasOwnProperty;function M(){for(var m="",p=0;p<arguments.length;p++){var v=arguments[p];v&&(m=C(m,O(v)))}return m}function O(m){if(typeof m=="string"||typeof m=="number")return m;if(typeof m!="object")return"";if(Array.isArray(m))return M.apply(null,m);if(m.toString!==Object.prototype.toString&&!m.toString.toString().includes("[native code]"))return m.toString();var p="";for(var v in m)D.call(m,v)&&m[v]&&(p=C(p,v));return p}function C(m,p){return p?m?m+" "+p:m+p:m}at.exports?(M.default=M,at.exports=M):(w=[],b=function(){return M}.apply(I,w),b!==void 0&&(at.exports=b))})()}},ji={};function Or(at){var I=ji[at];if(I!==void 0)return I.exports;var w=ji[at]={id:at,loaded:!1,exports:{}};return Ui[at].call(w.exports,w,w.exports,Or),w.loaded=!0,w.exports}(function(){Or.n=function(at){var I=at&&at.__esModule?function(){return at.default}:function(){return at};return Or.d(I,{a:I}),I}})(),function(){Or.d=function(at,I){for(var w in I)Or.o(I,w)&&!Or.o(at,w)&&Object.defineProperty(at,w,{enumerable:!0,get:I[w]})}}(),function(){Or.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(at){if(typeof window=="object")return window}}()}(),function(){Or.o=function(at,I){return Object.prototype.hasOwnProperty.call(at,I)}}(),function(){Or.r=function(at){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(at,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(at,"__esModule",{value:!0})}}(),function(){Or.nmd=function(at){return at.paths=[],at.children||(at.children=[]),at}}();var mn={};(function(){"use strict";var Lm;var at={};Or.r(at),Or.d(at,{MxU:function(){return il},Graphics:function(){return jn}});var I=Or(4309),w=(u=>(u[u.WEBGL_LEGACY=0]="WEBGL_LEGACY",u[u.WEBGL=1]="WEBGL",u[u.WEBGL2=2]="WEBGL2",u))(w||{}),b=(u=>(u[u.UNKNOWN=0]="UNKNOWN",u[u.WEBGL=1]="WEBGL",u[u.CANVAS=2]="CANVAS",u))(b||{}),D=(u=>(u[u.COLOR=16384]="COLOR",u[u.DEPTH=256]="DEPTH",u[u.STENCIL=1024]="STENCIL",u))(D||{}),M=(u=>(u[u.NORMAL=0]="NORMAL",u[u.ADD=1]="ADD",u[u.MULTIPLY=2]="MULTIPLY",u[u.SCREEN=3]="SCREEN",u[u.OVERLAY=4]="OVERLAY",u[u.DARKEN=5]="DARKEN",u[u.LIGHTEN=6]="LIGHTEN",u[u.COLOR_DODGE=7]="COLOR_DODGE",u[u.COLOR_BURN=8]="COLOR_BURN",u[u.HARD_LIGHT=9]="HARD_LIGHT",u[u.SOFT_LIGHT=10]="SOFT_LIGHT",u[u.DIFFERENCE=11]="DIFFERENCE",u[u.EXCLUSION=12]="EXCLUSION",u[u.HUE=13]="HUE",u[u.SATURATION=14]="SATURATION",u[u.COLOR=15]="COLOR",u[u.LUMINOSITY=16]="LUMINOSITY",u[u.NORMAL_NPM=17]="NORMAL_NPM",u[u.ADD_NPM=18]="ADD_NPM",u[u.SCREEN_NPM=19]="SCREEN_NPM",u[u.NONE=20]="NONE",u[u.SRC_OVER=0]="SRC_OVER",u[u.SRC_IN=21]="SRC_IN",u[u.SRC_OUT=22]="SRC_OUT",u[u.SRC_ATOP=23]="SRC_ATOP",u[u.DST_OVER=24]="DST_OVER",u[u.DST_IN=25]="DST_IN",u[u.DST_OUT=26]="DST_OUT",u[u.DST_ATOP=27]="DST_ATOP",u[u.ERASE=26]="ERASE",u[u.SUBTRACT=28]="SUBTRACT",u[u.XOR=29]="XOR",u))(M||{}),O=(u=>(u[u.POINTS=0]="POINTS",u[u.LINES=1]="LINES",u[u.LINE_LOOP=2]="LINE_LOOP",u[u.LINE_STRIP=3]="LINE_STRIP",u[u.TRIANGLES=4]="TRIANGLES",u[u.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",u[u.TRIANGLE_FAN=6]="TRIANGLE_FAN",u))(O||{}),C=(u=>(u[u.RGBA=6408]="RGBA",u[u.RGB=6407]="RGB",u[u.RG=33319]="RG",u[u.RED=6403]="RED",u[u.RGBA_INTEGER=36249]="RGBA_INTEGER",u[u.RGB_INTEGER=36248]="RGB_INTEGER",u[u.RG_INTEGER=33320]="RG_INTEGER",u[u.RED_INTEGER=36244]="RED_INTEGER",u[u.ALPHA=6406]="ALPHA",u[u.LUMINANCE=6409]="LUMINANCE",u[u.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",u[u.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",u[u.DEPTH_STENCIL=34041]="DEPTH_STENCIL",u))(C||{}),m=(u=>(u[u.TEXTURE_2D=3553]="TEXTURE_2D",u[u.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",u[u.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",u[u.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",u[u.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",u[u.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",u[u.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",u[u.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",u[u.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",u))(m||{}),p=(u=>(u[u.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",u[u.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",u[u.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",u[u.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",u[u.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",u[u.UNSIGNED_INT=5125]="UNSIGNED_INT",u[u.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",u[u.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",u[u.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",u[u.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",u[u.BYTE=5120]="BYTE",u[u.SHORT=5122]="SHORT",u[u.INT=5124]="INT",u[u.FLOAT=5126]="FLOAT",u[u.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",u[u.HALF_FLOAT=36193]="HALF_FLOAT",u))(p||{}),v=(u=>(u[u.FLOAT=0]="FLOAT",u[u.INT=1]="INT",u[u.UINT=2]="UINT",u))(v||{}),y=(u=>(u[u.NEAREST=0]="NEAREST",u[u.LINEAR=1]="LINEAR",u))(y||{}),T=(u=>(u[u.CLAMP=33071]="CLAMP",u[u.REPEAT=10497]="REPEAT",u[u.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",u))(T||{}),_=(u=>(u[u.OFF=0]="OFF",u[u.POW2=1]="POW2",u[u.ON=2]="ON",u[u.ON_MANUAL=3]="ON_MANUAL",u))(_||{}),A=(u=>(u[u.NPM=0]="NPM",u[u.UNPACK=1]="UNPACK",u[u.PMA=2]="PMA",u[u.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",u[u.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",u[u.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",u))(A||{}),P=(u=>(u[u.NO=0]="NO",u[u.YES=1]="YES",u[u.AUTO=2]="AUTO",u[u.BLEND=0]="BLEND",u[u.CLEAR=1]="CLEAR",u[u.BLIT=2]="BLIT",u))(P||{}),x=(u=>(u[u.AUTO=0]="AUTO",u[u.MANUAL=1]="MANUAL",u))(x||{}),B=(u=>(u.LOW="lowp",u.MEDIUM="mediump",u.HIGH="highp",u))(B||{}),G=(u=>(u[u.NONE=0]="NONE",u[u.SCISSOR=1]="SCISSOR",u[u.STENCIL=2]="STENCIL",u[u.SPRITE=3]="SPRITE",u[u.COLOR=4]="COLOR",u))(G||{}),k=(u=>(u[u.RED=1]="RED",u[u.GREEN=2]="GREEN",u[u.BLUE=4]="BLUE",u[u.ALPHA=8]="ALPHA",u))(k||{}),X=(u=>(u[u.NONE=0]="NONE",u[u.LOW=2]="LOW",u[u.MEDIUM=4]="MEDIUM",u[u.HIGH=8]="HIGH",u))(X||{}),Y=(u=>(u[u.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",u[u.ARRAY_BUFFER=34962]="ARRAY_BUFFER",u[u.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",u))(Y||{});const st={ADAPTER:{createCanvas:(u,i)=>{const l=document.createElement("canvas");return l.width=u,l.height=i,l},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var u;return(u=document.baseURI)!=null?u:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(u,i)=>fetch(u,i),parseXML:u=>new DOMParser().parseFromString(u,"text/xml")},RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var tt=/iPhone/i,rt=/iPod/i,ct=/iPad/i,pt=/\biOS-universal(?:.+)Mac\b/i,Rt=/\bAndroid(?:.+)Mobile\b/i,Lt=/Android/i,ut=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,xt=/Silk/i,At=/Windows Phone/i,J=/\bWindows(?:.+)ARM\b/i,ot=/BlackBerry/i,q=/BB10/i,gt=/Opera Mini/i,yt=/\b(CriOS|Chrome)(?:.+)Mobile/i,et=/Mobile(?:.+)Firefox\b/i,ht=function(u){return typeof u!="undefined"&&u.platform==="MacIntel"&&typeof u.maxTouchPoints=="number"&&u.maxTouchPoints>1&&typeof MSStream=="undefined"};function Et(u){return function(i){return i.test(u)}}function kt(u){var i={userAgent:"",platform:"",maxTouchPoints:0};!u&&typeof navigator!="undefined"?i={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof u=="string"?i.userAgent=u:u&&u.userAgent&&(i={userAgent:u.userAgent,platform:u.platform,maxTouchPoints:u.maxTouchPoints||0});var l=i.userAgent,c=l.split("[FBAN");typeof c[1]!="undefined"&&(l=c[0]),c=l.split("Twitter"),typeof c[1]!="undefined"&&(l=c[0]);var f=Et(l),S={apple:{phone:f(tt)&&!f(At),ipod:f(rt),tablet:!f(tt)&&(f(ct)||ht(i))&&!f(At),universal:f(pt),device:(f(tt)||f(rt)||f(ct)||f(pt)||ht(i))&&!f(At)},amazon:{phone:f(ut),tablet:!f(ut)&&f(xt),device:f(ut)||f(xt)},android:{phone:!f(At)&&f(ut)||!f(At)&&f(Rt),tablet:!f(At)&&!f(ut)&&!f(Rt)&&(f(xt)||f(Lt)),device:!f(At)&&(f(ut)||f(xt)||f(Rt)||f(Lt))||f(/\bokhttp\b/i)},windows:{phone:f(At),tablet:f(J),device:f(At)||f(J)},other:{blackberry:f(ot),blackberry10:f(q),opera:f(gt),firefox:f(et),chrome:f(yt),device:f(ot)||f(q)||f(gt)||f(et)||f(yt)},any:!1,phone:!1,tablet:!1};return S.any=S.apple.device||S.android.device||S.windows.device||S.other.device,S.phone=S.apple.phone||S.android.phone||S.windows.phone,S.tablet=S.apple.tablet||S.android.tablet||S.windows.tablet,S}const Ft=(Lm=kt.default)!=null?Lm:kt,Bt=Ft(globalThis.navigator);st.RETINA_PREFIX=/@([0-9\.]+)x/,st.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Gt=Or(6729),Ct=Or(9187),jt=Or(8575);const Kt={};function ne(u,i,l=3){if(Kt[i])return;let c=new Error().stack;typeof c>"u"?console.warn("PixiJS Deprecation Warning: ",`${i}
Deprecated since v${u}`):(c=c.split(`
`).splice(l).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${i}
Deprecated since v${u}`),console.warn(c),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${i}
Deprecated since v${u}`),console.warn(c))),Kt[i]=!0}const me={get parse(){return ne("7.3.0","utils.url.parse is deprecated, use native URL API instead."),jt.Qc},get format(){return ne("7.3.0","utils.url.format is deprecated, use native URL API instead."),jt.WU},get resolve(){return ne("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),jt.DB}};function ue(u){if(typeof u!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(u)}`)}function Oe(u){return u.split("?")[0].split("#")[0]}function de(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oe(u,i,l){return u.replace(new RegExp(de(i),"g"),l)}function Le(u,i){let l="",c=0,f=-1,S=0,N=-1;for(let U=0;U<=u.length;++U){if(U<u.length)N=u.charCodeAt(U);else{if(N===47)break;N=47}if(N===47){if(!(f===U-1||S===1))if(f!==U-1&&S===2){if(l.length<2||c!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){const W=l.lastIndexOf("/");if(W!==l.length-1){W===-1?(l="",c=0):(l=l.slice(0,W),c=l.length-1-l.lastIndexOf("/")),f=U,S=0;continue}}else if(l.length===2||l.length===1){l="",c=0,f=U,S=0;continue}}i&&(l.length>0?l+="/..":l="..",c=2)}else l.length>0?l+=`/${u.slice(f+1,U)}`:l=u.slice(f+1,U),c=U-f-1;f=U,S=0}else N===46&&S!==-1?++S:S=-1}return l}const Fr={toPosix(u){return oe(u,"\\","/")},isUrl(u){return/^https?:/.test(this.toPosix(u))},isDataUrl(u){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(u)},isBlobUrl(u){return u.startsWith("blob:")},hasProtocol(u){return/^[^/:]+:/.test(this.toPosix(u))},getProtocol(u){ue(u),u=this.toPosix(u);const i=/^file:\/\/\//.exec(u);if(i)return i[0];const l=/^[^/:]+:\/{0,2}/.exec(u);return l?l[0]:""},toAbsolute(u,i,l){if(ue(u),this.isDataUrl(u)||this.isBlobUrl(u))return u;const c=Oe(this.toPosix(i!=null?i:st.ADAPTER.getBaseUrl())),f=Oe(this.toPosix(l!=null?l:this.rootname(c)));return u=this.toPosix(u),u.startsWith("/")?Fr.join(f,u.slice(1)):this.isAbsolute(u)?u:this.join(c,u)},normalize(u){if(ue(u),u.length===0)return".";if(this.isDataUrl(u)||this.isBlobUrl(u))return u;u=this.toPosix(u);let i="";const l=u.startsWith("/");this.hasProtocol(u)&&(i=this.rootname(u),u=u.slice(i.length));const c=u.endsWith("/");return u=Le(u,!1),u.length>0&&c&&(u+="/"),l?`/${u}`:i+u},isAbsolute(u){return ue(u),u=this.toPosix(u),this.hasProtocol(u)?!0:u.startsWith("/")},join(...u){var l;if(u.length===0)return".";let i;for(let c=0;c<u.length;++c){const f=u[c];if(ue(f),f.length>0)if(i===void 0)i=f;else{const S=(l=u[c-1])!=null?l:"";this.extname(S)?i+=`/../${f}`:i+=`/${f}`}}return i===void 0?".":this.normalize(i)},dirname(u){if(ue(u),u.length===0)return".";u=this.toPosix(u);let i=u.charCodeAt(0);const l=i===47;let c=-1,f=!0;const S=this.getProtocol(u),N=u;u=u.slice(S.length);for(let U=u.length-1;U>=1;--U)if(i=u.charCodeAt(U),i===47){if(!f){c=U;break}}else f=!1;return c===-1?l?"/":this.isUrl(N)?S+u:S:l&&c===1?"//":S+u.slice(0,c)},rootname(u){ue(u),u=this.toPosix(u);let i="";if(u.startsWith("/")?i="/":i=this.getProtocol(u),this.isUrl(u)){const l=u.indexOf("/",i.length);l!==-1?i=u.slice(0,l):i=u,i.endsWith("/")||(i+="/")}return i},basename(u,i){ue(u),i&&ue(i),u=Oe(this.toPosix(u));let l=0,c=-1,f=!0,S;if(i!==void 0&&i.length>0&&i.length<=u.length){if(i.length===u.length&&i===u)return"";let N=i.length-1,U=-1;for(S=u.length-1;S>=0;--S){const W=u.charCodeAt(S);if(W===47){if(!f){l=S+1;break}}else U===-1&&(f=!1,U=S+1),N>=0&&(W===i.charCodeAt(N)?--N===-1&&(c=S):(N=-1,c=U))}return l===c?c=U:c===-1&&(c=u.length),u.slice(l,c)}for(S=u.length-1;S>=0;--S)if(u.charCodeAt(S)===47){if(!f){l=S+1;break}}else c===-1&&(f=!1,c=S+1);return c===-1?"":u.slice(l,c)},extname(u){ue(u),u=Oe(this.toPosix(u));let i=-1,l=0,c=-1,f=!0,S=0;for(let N=u.length-1;N>=0;--N){const U=u.charCodeAt(N);if(U===47){if(!f){l=N+1;break}continue}c===-1&&(f=!1,c=N+1),U===46?i===-1?i=N:S!==1&&(S=1):i!==-1&&(S=-1)}return i===-1||c===-1||S===0||S===1&&i===c-1&&i===l+1?"":u.slice(i,c)},parse(u){ue(u);const i={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return i;u=Oe(this.toPosix(u));let l=u.charCodeAt(0);const c=this.isAbsolute(u);let f;const S="";i.root=this.rootname(u),c||this.hasProtocol(u)?f=1:f=0;let N=-1,U=0,W=-1,Q=!0,lt=u.length-1,ft=0;for(;lt>=f;--lt){if(l=u.charCodeAt(lt),l===47){if(!Q){U=lt+1;break}continue}W===-1&&(Q=!1,W=lt+1),l===46?N===-1?N=lt:ft!==1&&(ft=1):N!==-1&&(ft=-1)}return N===-1||W===-1||ft===0||ft===1&&N===W-1&&N===U+1?W!==-1&&(U===0&&c?i.base=i.name=u.slice(1,W):i.base=i.name=u.slice(U,W)):(U===0&&c?(i.name=u.slice(1,N),i.base=u.slice(1,W)):(i.name=u.slice(U,N),i.base=u.slice(U,W)),i.ext=u.slice(N,W)),i.dir=this.dirname(u),S&&(i.dir=S+i.dir),i},sep:"/",delimiter:":"};let kr;function ui(){return he(this,null,function*(){return kr!=null||(kr=(()=>he(this,null,function*(){var S;const u=document.createElement("canvas").getContext("webgl");if(!u)return A.UNPACK;const i=yield new Promise(N=>{const U=document.createElement("video");U.onloadeddata=()=>N(U),U.onerror=()=>N(null),U.autoplay=!1,U.crossOrigin="anonymous",U.preload="auto",U.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",U.load()});if(!i)return A.UNPACK;const l=u.createTexture();u.bindTexture(u.TEXTURE_2D,l);const c=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,c),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,l,0),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),u.pixelStorei(u.UNPACK_COLORSPACE_CONVERSION_WEBGL,u.NONE),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,i);const f=new Uint8Array(4);return u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,f),u.deleteFramebuffer(c),u.deleteTexture(l),(S=u.getExtension("WEBGL_lose_context"))==null||S.loseContext(),f[0]<=f[3]?A.PMA:A.UNPACK}))()),kr})}function Ti(){ne("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function Ei(){ne("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let Oi;function Fe(){return typeof Oi>"u"&&(Oi=function(){var i;const u={stencil:!0,failIfMajorPerformanceCaveat:st.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!st.ADAPTER.getWebGLRenderingContext())return!1;const l=st.ADAPTER.createCanvas();let c=l.getContext("webgl",u)||l.getContext("experimental-webgl",u);const f=!!((i=c==null?void 0:c.getContextAttributes())!=null&&i.stencil);if(c){const S=c.getExtension("WEBGL_lose_context");S&&S.loseContext()}return c=null,f}catch(l){return!1}}()),Oi}var Li={grad:.9,turn:360,rad:360/(2*Math.PI)},hi=function(u){return typeof u=="string"?u.length>0:typeof u=="number"},Xr=function(u,i,l){return i===void 0&&(i=0),l===void 0&&(l=Math.pow(10,i)),Math.round(l*u)/l+0},dr=function(u,i,l){return i===void 0&&(i=0),l===void 0&&(l=1),u>l?l:u>i?u:i},Si=function(u){return(u=isFinite(u)?u%360:0)>0?u:u+360},bi=function(u){return{r:dr(u.r,0,255),g:dr(u.g,0,255),b:dr(u.b,0,255),a:dr(u.a)}},ms=function(u){return{r:Xr(u.r),g:Xr(u.g),b:Xr(u.b),a:Xr(u.a,3)}},rs=/^#([0-9a-f]{3,8})$/i,Ar=function(u){var i=u.toString(16);return i.length<2?"0"+i:i},Fi=function(u){var i=u.r,l=u.g,c=u.b,f=u.a,S=Math.max(i,l,c),N=S-Math.min(i,l,c),U=N?S===i?(l-c)/N:S===l?2+(c-i)/N:4+(i-l)/N:0;return{h:60*(U<0?U+6:U),s:S?N/S*100:0,v:S/255*100,a:f}},wt=function(u){var i=u.h,l=u.s,c=u.v,f=u.a;i=i/360*6,l/=100,c/=100;var S=Math.floor(i),N=c*(1-l),U=c*(1-(i-S)*l),W=c*(1-(1-i+S)*l),Q=S%6;return{r:255*[c,U,N,N,W,c][Q],g:255*[W,c,c,U,N,N][Q],b:255*[N,N,W,c,c,U][Q],a:f}},Mt=function(u){return{h:Si(u.h),s:dr(u.s,0,100),l:dr(u.l,0,100),a:dr(u.a)}},Xe=function(u){return{h:Xr(u.h),s:Xr(u.s),l:Xr(u.l),a:Xr(u.a,3)}},Ke=function(u){return wt((l=(i=u).s,{h:i.h,s:(l*=((c=i.l)<50?c:100-c)/100)>0?2*l/(c+l)*100:0,v:c+l,a:i.a}));var i,l,c},gr=function(u){return{h:(i=Fi(u)).h,s:(f=(200-(l=i.s))*(c=i.v)/100)>0&&f<200?l*c/100/(f<=100?f:200-f)*100:0,l:f/2,a:i.a};var i,l,c,f},Ae=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ci=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,V=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,K=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nt={string:[[function(u){var i=rs.exec(u);return i?(u=i[1]).length<=4?{r:parseInt(u[0]+u[0],16),g:parseInt(u[1]+u[1],16),b:parseInt(u[2]+u[2],16),a:u.length===4?Xr(parseInt(u[3]+u[3],16)/255,2):1}:u.length===6||u.length===8?{r:parseInt(u.substr(0,2),16),g:parseInt(u.substr(2,2),16),b:parseInt(u.substr(4,2),16),a:u.length===8?Xr(parseInt(u.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(u){var i=V.exec(u)||K.exec(u);return i?i[2]!==i[4]||i[4]!==i[6]?null:bi({r:Number(i[1])/(i[2]?100/255:1),g:Number(i[3])/(i[4]?100/255:1),b:Number(i[5])/(i[6]?100/255:1),a:i[7]===void 0?1:Number(i[7])/(i[8]?100:1)}):null},"rgb"],[function(u){var i=Ae.exec(u)||ci.exec(u);if(!i)return null;var l,c,f=Mt({h:(l=i[1],c=i[2],c===void 0&&(c="deg"),Number(l)*(Li[c]||1)),s:Number(i[3]),l:Number(i[4]),a:i[5]===void 0?1:Number(i[5])/(i[6]?100:1)});return Ke(f)},"hsl"]],object:[[function(u){var i=u.r,l=u.g,c=u.b,f=u.a,S=f===void 0?1:f;return hi(i)&&hi(l)&&hi(c)?bi({r:Number(i),g:Number(l),b:Number(c),a:Number(S)}):null},"rgb"],[function(u){var i=u.h,l=u.s,c=u.l,f=u.a,S=f===void 0?1:f;if(!hi(i)||!hi(l)||!hi(c))return null;var N=Mt({h:Number(i),s:Number(l),l:Number(c),a:Number(S)});return Ke(N)},"hsl"],[function(u){var i=u.h,l=u.s,c=u.v,f=u.a,S=f===void 0?1:f;if(!hi(i)||!hi(l)||!hi(c))return null;var N=function(U){return{h:Si(U.h),s:dr(U.s,0,100),v:dr(U.v,0,100),a:dr(U.a)}}({h:Number(i),s:Number(l),v:Number(c),a:Number(S)});return wt(N)},"hsv"]]},St=function(u,i){for(var l=0;l<i.length;l++){var c=i[l][0](u);if(c)return[c,i[l][1]]}return[null,void 0]},Ot=function(u){return typeof u=="string"?St(u.trim(),nt.string):typeof u=="object"&&u!==null?St(u,nt.object):[null,void 0]},Xt=function(u){return Ot(u)[1]},se=function(u,i){var l=gr(u);return{h:l.h,s:dr(l.s+100*i,0,100),l:l.l,a:l.a}},Se=function(u){return(299*u.r+587*u.g+114*u.b)/1e3/255},ge=function(u,i){var l=gr(u);return{h:l.h,s:l.s,l:dr(l.l+100*i,0,100),a:l.a}},Ue=function(){function u(i){this.parsed=Ot(i)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return u.prototype.isValid=function(){return this.parsed!==null},u.prototype.brightness=function(){return Xr(Se(this.rgba),2)},u.prototype.isDark=function(){return Se(this.rgba)<.5},u.prototype.isLight=function(){return Se(this.rgba)>=.5},u.prototype.toHex=function(){return i=ms(this.rgba),l=i.r,c=i.g,f=i.b,N=(S=i.a)<1?Ar(Xr(255*S)):"","#"+Ar(l)+Ar(c)+Ar(f)+N;var i,l,c,f,S,N},u.prototype.toRgb=function(){return ms(this.rgba)},u.prototype.toRgbString=function(){return i=ms(this.rgba),l=i.r,c=i.g,f=i.b,(S=i.a)<1?"rgba("+l+", "+c+", "+f+", "+S+")":"rgb("+l+", "+c+", "+f+")";var i,l,c,f,S},u.prototype.toHsl=function(){return Xe(gr(this.rgba))},u.prototype.toHslString=function(){return i=Xe(gr(this.rgba)),l=i.h,c=i.s,f=i.l,(S=i.a)<1?"hsla("+l+", "+c+"%, "+f+"%, "+S+")":"hsl("+l+", "+c+"%, "+f+"%)";var i,l,c,f,S},u.prototype.toHsv=function(){return i=Fi(this.rgba),{h:Xr(i.h),s:Xr(i.s),v:Xr(i.v),a:Xr(i.a,3)};var i},u.prototype.invert=function(){return We({r:255-(i=this.rgba).r,g:255-i.g,b:255-i.b,a:i.a});var i},u.prototype.saturate=function(i){return i===void 0&&(i=.1),We(se(this.rgba,i))},u.prototype.desaturate=function(i){return i===void 0&&(i=.1),We(se(this.rgba,-i))},u.prototype.grayscale=function(){return We(se(this.rgba,-1))},u.prototype.lighten=function(i){return i===void 0&&(i=.1),We(ge(this.rgba,i))},u.prototype.darken=function(i){return i===void 0&&(i=.1),We(ge(this.rgba,-i))},u.prototype.rotate=function(i){return i===void 0&&(i=15),this.hue(this.hue()+i)},u.prototype.alpha=function(i){return typeof i=="number"?We({r:(l=this.rgba).r,g:l.g,b:l.b,a:i}):Xr(this.rgba.a,3);var l},u.prototype.hue=function(i){var l=gr(this.rgba);return typeof i=="number"?We({h:i,s:l.s,l:l.l,a:l.a}):Xr(l.h)},u.prototype.isEqual=function(i){return this.toHex()===We(i).toHex()},u}(),We=function(u){return u instanceof Ue?u:new Ue(u)},ir=[],Ve=function(u){u.forEach(function(i){ir.indexOf(i)<0&&(i(Ue,nt),ir.push(i))})},Nr=function(){return new Ue({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};function er(u,i){var l={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},c={};for(var f in l)c[l[f]]=f;var S={};u.prototype.toName=function(N){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var U,W,Q=c[this.toHex()];if(Q)return Q;if(N!=null&&N.closest){var lt=this.toRgb(),ft=1/0,mt="black";if(!S.length)for(var _t in l)S[_t]=new u(l[_t]).toRgb();for(var Pt in l){var Dt=(U=lt,W=S[Pt],Math.pow(U.r-W.r,2)+Math.pow(U.g-W.g,2)+Math.pow(U.b-W.b,2));Dt<ft&&(ft=Dt,mt=Pt)}return mt}},i.string.push([function(N){var U=N.toLowerCase(),W=U==="transparent"?"#0000":l[U];return W?new u(W).toRgb():null},"name"])}Ve([er]);const Er=class xf{constructor(i=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=i}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(i){return this.value=i,this}set value(i){if(i instanceof xf)this._value=this.cloneSource(i._value),this._int=i._int,this._components.set(i._components);else{if(i===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,i))&&(this.normalize(i),this._value=this.cloneSource(i))}}get value(){return this._value}cloneSource(i){return typeof i=="string"||typeof i=="number"||i instanceof Number||i===null?i:Array.isArray(i)||ArrayBuffer.isView(i)?i.slice(0):typeof i=="object"&&i!==null?He({},i):i}isSourceEqual(i,l){const c=typeof i;if(c!==typeof l)return!1;if(c==="number"||c==="string"||i instanceof Number)return i===l;if(Array.isArray(i)&&Array.isArray(l)||ArrayBuffer.isView(i)&&ArrayBuffer.isView(l))return i.length!==l.length?!1:i.every((f,S)=>f===l[S]);if(i!==null&&l!==null){const f=Object.keys(i),S=Object.keys(l);return f.length!==S.length?!1:f.every(N=>i[N]===l[N])}return i===l}toRgba(){const[i,l,c,f]=this._components;return{r:i,g:l,b:c,a:f}}toRgb(){const[i,l,c]=this._components;return{r:i,g:l,b:c}}toRgbaString(){const[i,l,c]=this.toUint8RgbArray();return`rgba(${i},${l},${c},${this.alpha})`}toUint8RgbArray(i){const[l,c,f]=this._components;return i=i!=null?i:[],i[0]=Math.round(l*255),i[1]=Math.round(c*255),i[2]=Math.round(f*255),i}toRgbArray(i){i=i!=null?i:[];const[l,c,f]=this._components;return i[0]=l,i[1]=c,i[2]=f,i}toNumber(){return this._int}toLittleEndianNumber(){const i=this._int;return(i>>16)+(i&65280)+((i&255)<<16)}multiply(i){const[l,c,f,S]=xf.temp.setValue(i)._components;return this._components[0]*=l,this._components[1]*=c,this._components[2]*=f,this._components[3]*=S,this.refreshInt(),this._value=null,this}premultiply(i,l=!0){return l&&(this._components[0]*=i,this._components[1]*=i,this._components[2]*=i),this._components[3]=i,this.refreshInt(),this._value=null,this}toPremultiplied(i,l=!0){if(i===1)return(255<<24)+this._int;if(i===0)return l?0:this._int;let c=this._int>>16&255,f=this._int>>8&255,S=this._int&255;return l&&(c=c*i+.5|0,f=f*i+.5|0,S=S*i+.5|0),(i*255<<24)+(c<<16)+(f<<8)+S}toHex(){const i=this._int.toString(16);return`#${"000000".substring(0,6-i.length)+i}`}toHexa(){const i=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-i.length)+i}setAlpha(i){return this._components[3]=this._clamp(i),this}round(i){const[l,c,f]=this._components;return this._components[0]=Math.round(l*i)/i,this._components[1]=Math.round(c*i)/i,this._components[2]=Math.round(f*i)/i,this.refreshInt(),this._value=null,this}toArray(i){i=i!=null?i:[];const[l,c,f,S]=this._components;return i[0]=l,i[1]=c,i[2]=f,i[3]=S,i}normalize(i){let l,c,f,S;if((typeof i=="number"||i instanceof Number)&&i>=0&&i<=16777215){const N=i;l=(N>>16&255)/255,c=(N>>8&255)/255,f=(N&255)/255,S=1}else if((Array.isArray(i)||i instanceof Float32Array)&&i.length>=3&&i.length<=4)i=this._clamp(i),[l,c,f,S=1]=i;else if((i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&i.length>=3&&i.length<=4)i=this._clamp(i,0,255),[l,c,f,S=255]=i,l/=255,c/=255,f/=255,S/=255;else if(typeof i=="string"||typeof i=="object"){if(typeof i=="string"){const U=xf.HEX_PATTERN.exec(i);U&&(i=`#${U[2]}`)}const N=We(i);N.isValid()&&({r:l,g:c,b:f,a:S}=N.rgba,l/=255,c/=255,f/=255)}if(l!==void 0)this._components[0]=l,this._components[1]=c,this._components[2]=f,this._components[3]=S,this.refreshInt();else throw new Error(`Unable to convert color ${i}`)}refreshInt(){this._clamp(this._components);const[i,l,c]=this._components;this._int=(i*255<<16)+(l*255<<8)+(c*255|0)}_clamp(i,l=0,c=1){return typeof i=="number"?Math.min(Math.max(i,l),c):(i.forEach((f,S)=>{i[S]=Math.min(Math.max(f,l),c)}),i)}};Er.shared=new Er,Er.temp=new Er,Er.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ur=Er;function fi(u,i=[]){return ne("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),ur.shared.setValue(u).toRgbArray(i)}function or(u){return ne("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ur.shared.setValue(u).toHex()}function di(u){return ne("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),ur.shared.setValue(u).toNumber()}function qr(u){return ne("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ur.shared.setValue(u).toNumber()}function Ai(){const u=[],i=[];for(let c=0;c<32;c++)u[c]=c,i[c]=c;u[M.NORMAL_NPM]=M.NORMAL,u[M.ADD_NPM]=M.ADD,u[M.SCREEN_NPM]=M.SCREEN,i[M.NORMAL]=M.NORMAL_NPM,i[M.ADD]=M.ADD_NPM,i[M.SCREEN]=M.SCREEN_NPM;const l=[];return l.push(i),l.push(u),l}const Gi=Ai();function is(u,i){return Gi[i?1:0][u]}function $o(u,i,l,c=!0){return ne("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),ur.shared.setValue(u).premultiply(i,c).toArray(l!=null?l:new Float32Array(4))}function gs(u,i){return ne("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),ur.shared.setValue(u).toPremultiplied(i)}function Zn(u,i,l,c=!0){return ne("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),ur.shared.setValue(u).premultiply(i,c).toArray(l!=null?l:new Float32Array(4))}const $i=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Nl(u,i=null){const l=u*6;if(i=i||new Uint16Array(l),i.length!==l)throw new Error(`Out buffer length is incorrect, got ${i.length} and expected ${l}`);for(let c=0,f=0;c<l;c+=6,f+=4)i[c+0]=f+0,i[c+1]=f+1,i[c+2]=f+2,i[c+3]=f+0,i[c+4]=f+2,i[c+5]=f+3;return i}function Yo(u){if(u.BYTES_PER_ELEMENT===4)return u instanceof Float32Array?"Float32Array":u instanceof Uint32Array?"Uint32Array":"Int32Array";if(u.BYTES_PER_ELEMENT===2){if(u instanceof Uint16Array)return"Uint16Array"}else if(u.BYTES_PER_ELEMENT===1&&u instanceof Uint8Array)return"Uint8Array";return null}const qu={Float32Array,Uint32Array,Int32Array,Uint8Array};function Ci(u,i){let l=0,c=0;const f={};for(let W=0;W<u.length;W++)c+=i[W],l+=u[W].length;const S=new ArrayBuffer(l*4);let N=null,U=0;for(let W=0;W<u.length;W++){const Q=i[W],lt=u[W],ft=Yo(lt);f[ft]||(f[ft]=new qu[ft](S)),N=f[ft];for(let mt=0;mt<lt.length;mt++){const _t=(mt/Q|0)*c+U,Pt=mt%Q;N[_t+Pt]=lt[mt]}U+=Q}return new Float32Array(S)}function Ko(u){return u+=u===0?1:0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1}function Zo(u){return!(u&u-1)&&!!u}function Oa(u){let i=(u>65535?1:0)<<4;u>>>=i;let l=(u>255?1:0)<<3;return u>>>=l,i|=l,l=(u>15?1:0)<<2,u>>>=l,i|=l,l=(u>3?1:0)<<1,u>>>=l,i|=l,i|u>>1}function Qs(u,i,l){const c=u.length;let f;if(i>=c||l===0)return;l=i+l>c?c-i:l;const S=c-l;for(f=i;f<S;++f)u[f]=u[f+l];u.length=S}function Js(u){return u===0?0:u<0?-1:1}let Dl=0;function Os(){return++Dl}const ys=class{constructor(u,i,l,c){this.left=u,this.top=i,this.right=l,this.bottom=c}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};ys.EMPTY=new ys(0,0,0,0);let Bl=ys;const vs={},Yi=Object.create(null),_s=Object.create(null);function Dc(){let u;for(u in Yi)Yi[u].destroy();for(u in _s)_s[u].destroy()}function Fa(){let u;for(u in Yi)delete Yi[u];for(u in _s)delete _s[u]}class L{constructor(i,l,c){this._canvas=st.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=c||st.RESOLUTION,this.resize(i,l)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(i,l){this._checkDestroyed(),this._canvas.width=Math.round(i*this.resolution),this._canvas.height=Math.round(l*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(i){this._checkDestroyed(),this._canvas.width=Math.round(i)}get height(){return this._checkDestroyed(),this._canvas.height}set height(i){this._checkDestroyed(),this._canvas.height=Math.round(i)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function H(u,i,l){for(let c=0,f=4*l*i;c<i;++c,f+=4)if(u[f+3]!==0)return!1;return!0}function Z(u,i,l,c,f){const S=4*i;for(let N=c,U=c*S+4*l;N<=f;++N,U+=S)if(u[U+3]!==0)return!1;return!0}function dt(u){const{width:i,height:l}=u,c=u.getContext("2d",{willReadFrequently:!0});if(c===null)throw new TypeError("Failed to get canvas 2D context");const f=c.getImageData(0,0,i,l).data;let S=0,N=0,U=i-1,W=l-1;for(;N<l&&H(f,i,N);)++N;if(N===l)return Bl.EMPTY;for(;H(f,i,W);)--W;for(;Z(f,i,S,N,W);)++S;for(;Z(f,i,U,N,W);)--U;return++U,++W,new Bl(S,N,U,W)}function bt(u){const i=dt(u),{width:l,height:c}=i;let f=null;if(!i.isEmpty()){const S=u.getContext("2d");if(S===null)throw new TypeError("Failed to get canvas 2D context");f=S.getImageData(i.left,i.top,l,c)}return{width:l,height:c,data:f}}function Tt(u){const i=$i.exec(u);if(i)return{mediaType:i[1]?i[1].toLowerCase():void 0,subType:i[2]?i[2].toLowerCase():void 0,charset:i[3]?i[3].toLowerCase():void 0,encoding:i[4]?i[4].toLowerCase():void 0,data:i[5]}}function Nt(u,i=globalThis.location){if(u.startsWith("data:"))return"";i=i||globalThis.location;const l=new URL(u,document.baseURI);return l.hostname!==i.hostname||l.port!==i.port||l.protocol!==i.protocol?"anonymous":""}function Ht(u,i=1){var c;const l=(c=st.RETINA_PREFIX)==null?void 0:c.exec(u);return l?parseFloat(l[1]):i}var It=(u=>(u.Renderer="renderer",u.Application="application",u.RendererSystem="renderer-webgl-system",u.RendererPlugin="renderer-webgl-plugin",u.CanvasRendererSystem="renderer-canvas-system",u.CanvasRendererPlugin="renderer-canvas-plugin",u.Asset="asset",u.LoadParser="load-parser",u.ResolveParser="resolve-parser",u.CacheParser="cache-parser",u.DetectionParser="detection-parser",u))(It||{});const $t=u=>{if(typeof u=="function"||typeof u=="object"&&u.extension){if(!u.extension)throw new Error("Extension class must have an extension object");u=gi(He({},typeof u.extension!="object"?{type:u.extension}:u.extension),{ref:u})}if(typeof u=="object")u=He({},u);else throw new Error("Invalid extension type");return typeof u.type=="string"&&(u.type=[u.type]),u},Zt=(u,i)=>{var l;return(l=$t(u).priority)!=null?l:i},zt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...u){return u.map($t).forEach(i=>{i.type.forEach(l=>{var c,f;return(f=(c=this._removeHandlers)[l])==null?void 0:f.call(c,i)})}),this},add(...u){return u.map($t).forEach(i=>{i.type.forEach(l=>{const c=this._addHandlers,f=this._queue;c[l]?c[l](i):(f[l]=f[l]||[],f[l].push(i))})}),this},handle(u,i,l){const c=this._addHandlers,f=this._removeHandlers;if(c[u]||f[u])throw new Error(`Extension type ${u} already has a handler`);c[u]=i,f[u]=l;const S=this._queue;return S[u]&&(S[u].forEach(N=>i(N)),delete S[u]),this},handleByMap(u,i){return this.handle(u,l=>{i[l.name]=l.ref},l=>{delete i[l.name]})},handleByList(u,i,l=-1){return this.handle(u,c=>{i.includes(c.ref)||(i.push(c.ref),i.sort((f,S)=>Zt(S,l)-Zt(f,l)))},c=>{const f=i.indexOf(c.ref);f!==-1&&i.splice(f,1)})}};class ee{constructor(i){typeof i=="number"?this.rawBinaryData=new ArrayBuffer(i):i instanceof Uint8Array?this.rawBinaryData=i.buffer:this.rawBinaryData=i,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(i){return this[`${i}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(i){switch(i){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${i} isn't a valid view type`)}}}const ye=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ee(u){let i="";for(let l=0;l<u;++l)l>0&&(i+=`
else `),l<u-1&&(i+=`if(test == ${l}.0){}`);return i}function sr(u,i){if(u===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const l=i.createShader(i.FRAGMENT_SHADER);for(;;){const c=ye.replace(/%forloop%/gi,Ee(u));if(i.shaderSource(l,c),i.compileShader(l),!i.getShaderParameter(l,i.COMPILE_STATUS))u=u/2|0;else break}return u}const Ne=0,ar=1,Ye=2,ze=3,yr=4,ke=5;class Ze{constructor(){this.data=0,this.blendMode=M.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Ne)}set blend(i){!!(this.data&1<<Ne)!==i&&(this.data^=1<<Ne)}get offsets(){return!!(this.data&1<<ar)}set offsets(i){!!(this.data&1<<ar)!==i&&(this.data^=1<<ar)}get culling(){return!!(this.data&1<<Ye)}set culling(i){!!(this.data&1<<Ye)!==i&&(this.data^=1<<Ye)}get depthTest(){return!!(this.data&1<<ze)}set depthTest(i){!!(this.data&1<<ze)!==i&&(this.data^=1<<ze)}get depthMask(){return!!(this.data&1<<ke)}set depthMask(i){!!(this.data&1<<ke)!==i&&(this.data^=1<<ke)}get clockwiseFrontFace(){return!!(this.data&1<<yr)}set clockwiseFrontFace(i){!!(this.data&1<<yr)!==i&&(this.data^=1<<yr)}get blendMode(){return this._blendMode}set blendMode(i){this.blend=i!==M.NONE,this._blendMode=i}get polygonOffset(){return this._polygonOffset}set polygonOffset(i){this.offsets=!!i,this._polygonOffset=i}static for2d(){const i=new Ze;return i.depthTest=!1,i.blend=!0,i}}Ze.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Ge=[];function Pe(u,i){if(!u)return null;let l="";if(typeof u=="string"){const c=/\.(\w{3,4})(?:$|\?|#)/i.exec(u);c&&(l=c[1].toLowerCase())}for(let c=Ge.length-1;c>=0;--c){const f=Ge[c];if(f.test&&f.test(u,l))return new f(u,i)}throw new Error("Unrecognized source type to auto-detect Resource")}class Gr{constructor(i){this.items=[],this._name=i,this._aliasCount=0}emit(i,l,c,f,S,N,U,W){if(arguments.length>8)throw new Error("max arguments reached");const{name:Q,items:lt}=this;this._aliasCount++;for(let ft=0,mt=lt.length;ft<mt;ft++)lt[ft][Q](i,l,c,f,S,N,U,W);return lt===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(i){return i[this._name]&&(this.ensureNonAliasedItems(),this.remove(i),this.items.push(i)),this}remove(i){const l=this.items.indexOf(i);return l!==-1&&(this.ensureNonAliasedItems(),this.items.splice(l,1)),this}contains(i){return this.items.includes(i)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Gr.prototype,{dispatch:{value:Gr.prototype.emit},run:{value:Gr.prototype.emit}});class Tr{constructor(i=0,l=0){this._width=i,this._height=l,this.destroyed=!1,this.internal=!1,this.onResize=new Gr("setRealSize"),this.onUpdate=new Gr("update"),this.onError=new Gr("onError")}bind(i){this.onResize.add(i),this.onUpdate.add(i),this.onError.add(i),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(i){this.onResize.remove(i),this.onUpdate.remove(i),this.onError.remove(i)}resize(i,l){(i!==this._width||l!==this._height)&&(this._width=i,this._height=l,this.onResize.emit(i,l))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(i,l,c){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(i,l){return!1}}class gn extends Tr{constructor(i,l){var S;const{width:c,height:f}=l||{};if(!c||!f)throw new Error("BufferResource width or height invalid");super(c,f),this.data=i,this.unpackAlignment=(S=l.unpackAlignment)!=null?S:4}upload(i,l,c){const f=i.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,this.unpackAlignment),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.alphaMode===A.UNPACK);const S=l.realWidth,N=l.realHeight;return c.width===S&&c.height===N?f.texSubImage2D(l.target,0,0,0,S,N,l.format,c.type,this.data):(c.width=S,c.height=N,f.texImage2D(l.target,0,c.internalFormat,S,N,0,l.format,c.type,this.data)),!0}dispose(){this.data=null}static test(i){return i===null||i instanceof Int8Array||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array}}const yn={scaleMode:y.NEAREST,alphaMode:A.NPM},Qn=class Ku extends Gt{constructor(i=null,l=null){super(),l=Object.assign({},Ku.defaultOptions,l);const{alphaMode:c,mipmap:f,anisotropicLevel:S,scaleMode:N,width:U,height:W,wrapMode:Q,format:lt,type:ft,target:mt,resolution:_t,resourceOptions:Pt}=l;i&&!(i instanceof Tr)&&(i=Pe(i,Pt),i.internal=!0),this.resolution=_t||st.RESOLUTION,this.width=Math.round((U||0)*this.resolution)/this.resolution,this.height=Math.round((W||0)*this.resolution)/this.resolution,this._mipmap=f,this.anisotropicLevel=S,this._wrapMode=Q,this._scaleMode=N,this.format=lt,this.type=ft,this.target=mt,this.alphaMode=c,this.uid=Os(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=U>0&&W>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(i)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(i){this._mipmap!==i&&(this._mipmap=i,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(i){this._scaleMode!==i&&(this._scaleMode=i,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(i){this._wrapMode!==i&&(this._wrapMode=i,this.dirtyStyleId++)}setStyle(i,l){let c;return i!==void 0&&i!==this.scaleMode&&(this.scaleMode=i,c=!0),l!==void 0&&l!==this.mipmap&&(this.mipmap=l,c=!0),c&&this.dirtyStyleId++,this}setSize(i,l,c){return c=c||this.resolution,this.setRealSize(i*c,l*c,c)}setRealSize(i,l,c){return this.resolution=c||this.resolution,this.width=Math.round(i)/this.resolution,this.height=Math.round(l)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Zo(this.realWidth)&&Zo(this.realHeight)}setResolution(i){const l=this.resolution;return l===i?this:(this.resolution=i,this.valid&&(this.width=Math.round(this.width*l)/i,this.height=Math.round(this.height*l)/i,this.emit("update",this)),this._refreshPOT(),this)}setResource(i){if(this.resource===i)return this;if(this.resource)throw new Error("Resource can be set only once");return i.bind(this),this.resource=i,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(i){this.emit("error",this,i)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete _s[this.cacheId],delete Yi[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Ku.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(i,l,c=st.STRICT_TEXTURE_CACHE){const f=typeof i=="string";let S=null;if(f)S=i;else{if(!i._pixiId){const U=(l==null?void 0:l.pixiIdPrefix)||"pixiid";i._pixiId=`${U}_${Os()}`}S=i._pixiId}let N=_s[S];if(f&&c&&!N)throw new Error(`The cacheId "${S}" does not exist in BaseTextureCache.`);return N||(N=new Ku(i,l),N.cacheId=S,Ku.addToCache(N,S)),N}static fromBuffer(i,l,c,f){i=i||new Float32Array(l*c*4);const S=new gn(i,He({width:l,height:c},f==null?void 0:f.resourceOptions));let N,U;return i instanceof Float32Array?(N=C.RGBA,U=p.FLOAT):i instanceof Int32Array?(N=C.RGBA_INTEGER,U=p.INT):i instanceof Uint32Array?(N=C.RGBA_INTEGER,U=p.UNSIGNED_INT):i instanceof Int16Array?(N=C.RGBA_INTEGER,U=p.SHORT):i instanceof Uint16Array?(N=C.RGBA_INTEGER,U=p.UNSIGNED_SHORT):i instanceof Int8Array?(N=C.RGBA,U=p.BYTE):(N=C.RGBA,U=p.UNSIGNED_BYTE),S.internal=!0,new Ku(S,Object.assign({},yn,{type:U,format:N},f))}static addToCache(i,l){l&&(i.textureCacheIds.includes(l)||i.textureCacheIds.push(l),_s[l]&&_s[l]!==i&&console.warn(`BaseTexture added to the cache with an id [${l}] that already had an entry`),_s[l]=i)}static removeFromCache(i){if(typeof i=="string"){const l=_s[i];if(l){const c=l.textureCacheIds.indexOf(i);return c>-1&&l.textureCacheIds.splice(c,1),delete _s[i],l}}else if(i!=null&&i.textureCacheIds){for(let l=0;l<i.textureCacheIds.length;++l)delete _s[i.textureCacheIds[l]];return i.textureCacheIds.length=0,i}return null}};Qn.defaultOptions={mipmap:_.POW2,anisotropicLevel:0,scaleMode:y.LINEAR,wrapMode:T.CLAMP,alphaMode:A.UNPACK,target:m.TEXTURE_2D,format:C.RGBA,type:p.UNSIGNED_BYTE},Qn._globalBatch=0;let Cr=Qn;class xs{constructor(){this.texArray=null,this.blend=0,this.type=O.TRIANGLES,this.start=0,this.size=0,this.data=null}}let ei=0;class $r{constructor(i,l=!0,c=!1){this.data=i||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=c,this.static=l,this.id=ei++,this.disposeRunner=new Gr("disposeBuffer")}update(i){i instanceof Array&&(i=new Float32Array(i)),this.data=i||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(i){this.type=i?Y.ELEMENT_ARRAY_BUFFER:Y.ARRAY_BUFFER}get index(){return this.type===Y.ELEMENT_ARRAY_BUFFER}static from(i){return i instanceof Array&&(i=new Float32Array(i)),new $r(i)}}class qs{constructor(i,l=0,c=!1,f=p.FLOAT,S,N,U,W=1){this.buffer=i,this.size=l,this.normalized=c,this.type=f,this.stride=S,this.start=N,this.instance=U,this.divisor=W}destroy(){this.buffer=null}static from(i,l,c,f,S){return new qs(i,l,c,f,S)}}const Jn={Float32Array,Uint32Array,Int32Array,Uint8Array};function Nn(u,i){let l=0,c=0;const f={};for(let W=0;W<u.length;W++)c+=i[W],l+=u[W].length;const S=new ArrayBuffer(l*4);let N=null,U=0;for(let W=0;W<u.length;W++){const Q=i[W],lt=u[W],ft=Yo(lt);f[ft]||(f[ft]=new Jn[ft](S)),N=f[ft];for(let mt=0;mt<lt.length;mt++){const _t=(mt/Q|0)*c+U,Pt=mt%Q;N[_t+Pt]=lt[mt]}U+=Q}return new Float32Array(S)}const qn={5126:4,5123:2,5121:1};let Ll=0;const Pr={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Ki{constructor(i=[],l={}){this.buffers=i,this.indexBuffer=null,this.attributes=l,this.glVertexArrayObjects={},this.id=Ll++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Gr("disposeGeometry"),this.refCount=0}addAttribute(i,l,c=0,f=!1,S,N,U,W=!1){if(!l)throw new Error("You must pass a buffer when creating an attribute");l instanceof $r||(l instanceof Array&&(l=new Float32Array(l)),l=new $r(l));const Q=i.split("|");if(Q.length>1){for(let ft=0;ft<Q.length;ft++)this.addAttribute(Q[ft],l,c,f,S);return this}let lt=this.buffers.indexOf(l);return lt===-1&&(this.buffers.push(l),lt=this.buffers.length-1),this.attributes[i]=new qs(lt,c,f,S,N,U,W),this.instanced=this.instanced||W,this}getAttribute(i){return this.attributes[i]}getBuffer(i){return this.buffers[this.getAttribute(i).buffer]}addIndex(i){return i instanceof $r||(i instanceof Array&&(i=new Uint16Array(i)),i=new $r(i)),i.type=Y.ELEMENT_ARRAY_BUFFER,this.indexBuffer=i,this.buffers.includes(i)||this.buffers.push(i),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const i=[],l=[],c=new $r;let f;for(f in this.attributes){const S=this.attributes[f],N=this.buffers[S.buffer];i.push(N.data),l.push(S.size*qn[S.type]/4),S.buffer=0}for(c.data=Nn(i,l),f=0;f<this.buffers.length;f++)this.buffers[f]!==this.indexBuffer&&this.buffers[f].destroy();return this.buffers=[c],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const i in this.attributes){const l=this.attributes[i];return this.buffers[l.buffer].data.length/(l.stride/4||l.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const i=new Ki;for(let l=0;l<this.buffers.length;l++)i.buffers[l]=new $r(this.buffers[l].data.slice(0));for(const l in this.attributes){const c=this.attributes[l];i.attributes[l]=new qs(c.buffer,c.size,c.normalized,c.type,c.stride,c.start,c.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.type=Y.ELEMENT_ARRAY_BUFFER),i}static merge(i){const l=new Ki,c=[],f=[],S=[];let N;for(let U=0;U<i.length;U++){N=i[U];for(let W=0;W<N.buffers.length;W++)f[W]=f[W]||0,f[W]+=N.buffers[W].data.length,S[W]=0}for(let U=0;U<N.buffers.length;U++)c[U]=new Pr[Yo(N.buffers[U].data)](f[U]),l.buffers[U]=new $r(c[U]);for(let U=0;U<i.length;U++){N=i[U];for(let W=0;W<N.buffers.length;W++)c[W].set(N.buffers[W].data,S[W]),S[W]+=N.buffers[W].data.length}if(l.attributes=N.attributes,N.indexBuffer){l.indexBuffer=l.buffers[N.buffers.indexOf(N.indexBuffer)],l.indexBuffer.type=Y.ELEMENT_ARRAY_BUFFER;let U=0,W=0,Q=0,lt=0;for(let ft=0;ft<N.buffers.length;ft++)if(N.buffers[ft]!==N.indexBuffer){lt=ft;break}for(const ft in N.attributes){const mt=N.attributes[ft];(mt.buffer|0)===lt&&(W+=mt.size*qn[mt.type]/4)}for(let ft=0;ft<i.length;ft++){const mt=i[ft].indexBuffer.data;for(let _t=0;_t<mt.length;_t++)l.indexBuffer.data[_t+Q]+=U;U+=i[ft].buffers[lt].data.length/W,Q+=mt.length}}return l}}class yo extends Ki{constructor(i=!1){super(),this._buffer=new $r(null,i,!1),this._indexBuffer=new $r(null,i,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,p.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,p.FLOAT).addAttribute("aColor",this._buffer,4,!0,p.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,p.FLOAT).addIndex(this._indexBuffer)}}const ri=Math.PI*2,kl=180/Math.PI,Ts=Math.PI/180;var Pi=(u=>(u[u.POLY=0]="POLY",u[u.RECT=1]="RECT",u[u.CIRC=2]="CIRC",u[u.ELIP=3]="ELIP",u[u.RREC=4]="RREC",u))(Pi||{});class Mr{constructor(i=0,l=0){this.x=0,this.y=0,this.x=i,this.y=l}clone(){return new Mr(this.x,this.y)}copyFrom(i){return this.set(i.x,i.y),this}copyTo(i){return i.set(this.x,this.y),i}equals(i){return i.x===this.x&&i.y===this.y}set(i=0,l=i){return this.x=i,this.y=l,this}}Mr.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const ss=[new Mr,new Mr,new Mr,new Mr];class Rr{constructor(i=0,l=0,c=0,f=0){this.x=Number(i),this.y=Number(l),this.width=Number(c),this.height=Number(f),this.type=Pi.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rr(0,0,0,0)}clone(){return new Rr(this.x,this.y,this.width,this.height)}copyFrom(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this}copyTo(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i}contains(i,l){return this.width<=0||this.height<=0?!1:i>=this.x&&i<this.x+this.width&&l>=this.y&&l<this.y+this.height}intersects(i,l){if(!l){const Ce=this.x<i.x?i.x:this.x;if((this.right>i.right?i.right:this.right)<=Ce)return!1;const fr=this.y<i.y?i.y:this.y;return(this.bottom>i.bottom?i.bottom:this.bottom)>fr}const c=this.left,f=this.right,S=this.top,N=this.bottom;if(f<=c||N<=S)return!1;const U=ss[0].set(i.left,i.top),W=ss[1].set(i.left,i.bottom),Q=ss[2].set(i.right,i.top),lt=ss[3].set(i.right,i.bottom);if(Q.x<=U.x||W.y<=U.y)return!1;const ft=Math.sign(l.a*l.d-l.b*l.c);if(ft===0||(l.apply(U,U),l.apply(W,W),l.apply(Q,Q),l.apply(lt,lt),Math.max(U.x,W.x,Q.x,lt.x)<=c||Math.min(U.x,W.x,Q.x,lt.x)>=f||Math.max(U.y,W.y,Q.y,lt.y)<=S||Math.min(U.y,W.y,Q.y,lt.y)>=N))return!1;const mt=ft*(W.y-U.y),_t=ft*(U.x-W.x),Pt=mt*c+_t*S,Dt=mt*f+_t*S,Wt=mt*c+_t*N,Jt=mt*f+_t*N;if(Math.max(Pt,Dt,Wt,Jt)<=mt*U.x+_t*U.y||Math.min(Pt,Dt,Wt,Jt)>=mt*lt.x+_t*lt.y)return!1;const pe=ft*(U.y-Q.y),re=ft*(Q.x-U.x),le=pe*c+re*S,De=pe*f+re*S,xr=pe*c+re*N,Be=pe*f+re*N;return!(Math.max(le,De,xr,Be)<=pe*U.x+re*U.y||Math.min(le,De,xr,Be)>=pe*lt.x+re*lt.y)}pad(i=0,l=i){return this.x-=i,this.y-=l,this.width+=i*2,this.height+=l*2,this}fit(i){const l=Math.max(this.x,i.x),c=Math.min(this.x+this.width,i.x+i.width),f=Math.max(this.y,i.y),S=Math.min(this.y+this.height,i.y+i.height);return this.x=l,this.width=Math.max(c-l,0),this.y=f,this.height=Math.max(S-f,0),this}ceil(i=1,l=.001){const c=Math.ceil((this.x+this.width-l)*i)/i,f=Math.ceil((this.y+this.height-l)*i)/i;return this.x=Math.floor((this.x+l)*i)/i,this.y=Math.floor((this.y+l)*i)/i,this.width=c-this.x,this.height=f-this.y,this}enlarge(i){const l=Math.min(this.x,i.x),c=Math.max(this.x+this.width,i.x+i.width),f=Math.min(this.y,i.y),S=Math.max(this.y+this.height,i.y+i.height);return this.x=l,this.width=c-l,this.y=f,this.height=S-f,this}}Rr.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Es{constructor(i=0,l=0,c=0){this.x=i,this.y=l,this.radius=c,this.type=Pi.CIRC}clone(){return new Es(this.x,this.y,this.radius)}contains(i,l){if(this.radius<=0)return!1;const c=this.radius*this.radius;let f=this.x-i,S=this.y-l;return f*=f,S*=S,f+S<=c}getBounds(){return new Rr(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Es.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class to{constructor(i=0,l=0,c=0,f=0){this.x=i,this.y=l,this.width=c,this.height=f,this.type=Pi.ELIP}clone(){return new to(this.x,this.y,this.width,this.height)}contains(i,l){if(this.width<=0||this.height<=0)return!1;let c=(i-this.x)/this.width,f=(l-this.y)/this.height;return c*=c,f*=f,c+f<=1}getBounds(){return new Rr(this.x-this.width,this.y-this.height,this.width,this.height)}}to.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ni{constructor(...i){let l=Array.isArray(i[0])?i[0]:i;if(typeof l[0]!="number"){const c=[];for(let f=0,S=l.length;f<S;f++)c.push(l[f].x,l[f].y);l=c}this.points=l,this.type=Pi.POLY,this.closeStroke=!0}clone(){const i=this.points.slice(),l=new Ni(i);return l.closeStroke=this.closeStroke,l}contains(i,l){let c=!1;const f=this.points.length/2;for(let S=0,N=f-1;S<f;N=S++){const U=this.points[S*2],W=this.points[S*2+1],Q=this.points[N*2],lt=this.points[N*2+1];W>l!=lt>l&&i<(Q-U)*((l-W)/(lt-W))+U&&(c=!c)}return c}}Ni.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((u,i)=>`${u}, ${i}`,"")}]`};class Fs{constructor(i=0,l=0,c=0,f=0,S=20){this.x=i,this.y=l,this.width=c,this.height=f,this.radius=S,this.type=Pi.RREC}clone(){return new Fs(this.x,this.y,this.width,this.height,this.radius)}contains(i,l){if(this.width<=0||this.height<=0)return!1;if(i>=this.x&&i<=this.x+this.width&&l>=this.y&&l<=this.y+this.height){const c=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(l>=this.y+c&&l<=this.y+this.height-c||i>=this.x+c&&i<=this.x+this.width-c)return!0;let f=i-(this.x+c),S=l-(this.y+c);const N=c*c;if(f*f+S*S<=N||(f=i-(this.x+this.width-c),f*f+S*S<=N)||(S=l-(this.y+this.height-c),f*f+S*S<=N)||(f=i-(this.x+c),f*f+S*S<=N))return!0}return!1}}Fs.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Qr{constructor(i=1,l=0,c=0,f=1,S=0,N=0){this.array=null,this.a=i,this.b=l,this.c=c,this.d=f,this.tx=S,this.ty=N}fromArray(i){this.a=i[0],this.b=i[1],this.c=i[3],this.d=i[4],this.tx=i[2],this.ty=i[5]}set(i,l,c,f,S,N){return this.a=i,this.b=l,this.c=c,this.d=f,this.tx=S,this.ty=N,this}toArray(i,l){this.array||(this.array=new Float32Array(9));const c=l||this.array;return i?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c}apply(i,l){l=l||new Mr;const c=i.x,f=i.y;return l.x=this.a*c+this.c*f+this.tx,l.y=this.b*c+this.d*f+this.ty,l}applyInverse(i,l){l=l||new Mr;const c=1/(this.a*this.d+this.c*-this.b),f=i.x,S=i.y;return l.x=this.d*c*f+-this.c*c*S+(this.ty*this.c-this.tx*this.d)*c,l.y=this.a*c*S+-this.b*c*f+(-this.ty*this.a+this.tx*this.b)*c,l}translate(i,l){return this.tx+=i,this.ty+=l,this}scale(i,l){return this.a*=i,this.d*=l,this.c*=i,this.b*=l,this.tx*=i,this.ty*=l,this}rotate(i){const l=Math.cos(i),c=Math.sin(i),f=this.a,S=this.c,N=this.tx;return this.a=f*l-this.b*c,this.b=f*c+this.b*l,this.c=S*l-this.d*c,this.d=S*c+this.d*l,this.tx=N*l-this.ty*c,this.ty=N*c+this.ty*l,this}append(i){const l=this.a,c=this.b,f=this.c,S=this.d;return this.a=i.a*l+i.b*f,this.b=i.a*c+i.b*S,this.c=i.c*l+i.d*f,this.d=i.c*c+i.d*S,this.tx=i.tx*l+i.ty*f+this.tx,this.ty=i.tx*c+i.ty*S+this.ty,this}setTransform(i,l,c,f,S,N,U,W,Q){return this.a=Math.cos(U+Q)*S,this.b=Math.sin(U+Q)*S,this.c=-Math.sin(U-W)*N,this.d=Math.cos(U-W)*N,this.tx=i-(c*this.a+f*this.c),this.ty=l-(c*this.b+f*this.d),this}prepend(i){const l=this.tx;if(i.a!==1||i.b!==0||i.c!==0||i.d!==1){const c=this.a,f=this.c;this.a=c*i.a+this.b*i.c,this.b=c*i.b+this.b*i.d,this.c=f*i.a+this.d*i.c,this.d=f*i.b+this.d*i.d}return this.tx=l*i.a+this.ty*i.c+i.tx,this.ty=l*i.b+this.ty*i.d+i.ty,this}decompose(i){const l=this.a,c=this.b,f=this.c,S=this.d,N=i.pivot,U=-Math.atan2(-f,S),W=Math.atan2(c,l),Q=Math.abs(U+W);return Q<1e-5||Math.abs(ri-Q)<1e-5?(i.rotation=W,i.skew.x=i.skew.y=0):(i.rotation=0,i.skew.x=U,i.skew.y=W),i.scale.x=Math.sqrt(l*l+c*c),i.scale.y=Math.sqrt(f*f+S*S),i.position.x=this.tx+(N.x*l+N.y*f),i.position.y=this.ty+(N.x*c+N.y*S),i}invert(){const i=this.a,l=this.b,c=this.c,f=this.d,S=this.tx,N=i*f-l*c;return this.a=f/N,this.b=-l/N,this.c=-c/N,this.d=i/N,this.tx=(c*this.ty-f*S)/N,this.ty=-(i*this.ty-l*S)/N,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const i=new Qr;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i}copyTo(i){return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i}copyFrom(i){return this.a=i.a,this.b=i.b,this.c=i.c,this.d=i.d,this.tx=i.tx,this.ty=i.ty,this}static get IDENTITY(){return new Qr}static get TEMP_MATRIX(){return new Qr}}Qr.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ss=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],vn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Hs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tn=[],vo=[],_o=Math.sign;function th(){for(let u=0;u<16;u++){const i=[];tn.push(i);for(let l=0;l<16;l++){const c=_o(Ss[u]*Ss[l]+zs[u]*vn[l]),f=_o(vn[u]*Ss[l]+Hs[u]*vn[l]),S=_o(Ss[u]*zs[l]+zs[u]*Hs[l]),N=_o(vn[u]*zs[l]+Hs[u]*Hs[l]);for(let U=0;U<16;U++)if(Ss[U]===c&&vn[U]===f&&zs[U]===S&&Hs[U]===N){i.push(U);break}}}for(let u=0;u<16;u++){const i=new Qr;i.set(Ss[u],vn[u],zs[u],Hs[u],0,0),vo.push(i)}}th();const yi={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:u=>Ss[u],uY:u=>vn[u],vX:u=>zs[u],vY:u=>Hs[u],inv:u=>u&8?u&15:-u&7,add:(u,i)=>tn[u][i],sub:(u,i)=>tn[u][yi.inv(i)],rotate180:u=>u^4,isVertical:u=>(u&3)===2,byDirection:(u,i)=>Math.abs(u)*2<=Math.abs(i)?i>=0?yi.S:yi.N:Math.abs(i)*2<=Math.abs(u)?u>0?yi.E:yi.W:i>0?u>0?yi.SE:yi.SW:u>0?yi.NE:yi.NW,matrixAppendRotationInv:(u,i,l=0,c=0)=>{const f=vo[yi.inv(i)];f.tx=l,f.ty=c,u.append(f)}};class ns{constructor(i,l,c=0,f=0){this._x=c,this._y=f,this.cb=i,this.scope=l}clone(i=this.cb,l=this.scope){return new ns(i,l,this._x,this._y)}set(i=0,l=i){return(this._x!==i||this._y!==l)&&(this._x=i,this._y=l,this.cb.call(this.scope)),this}copyFrom(i){return(this._x!==i.x||this._y!==i.y)&&(this._x=i.x,this._y=i.y,this.cb.call(this.scope)),this}copyTo(i){return i.set(this._x,this._y),i}equals(i){return i.x===this._x&&i.y===this._y}get x(){return this._x}set x(i){this._x!==i&&(this._x=i,this.cb.call(this.scope))}get y(){return this._y}set y(i){this._y!==i&&(this._y=i,this.cb.call(this.scope))}}ns.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const xo=class{constructor(){this.worldTransform=new Qr,this.localTransform=new Qr,this.position=new ns(this.onChange,this,0,0),this.scale=new ns(this.onChange,this,1,1),this.pivot=new ns(this.onChange,this,0,0),this.skew=new ns(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const u=this.localTransform;this._localID!==this._currentLocalID&&(u.a=this._cx*this.scale.x,u.b=this._sx*this.scale.x,u.c=this._cy*this.scale.y,u.d=this._sy*this.scale.y,u.tx=this.position.x-(this.pivot.x*u.a+this.pivot.y*u.c),u.ty=this.position.y-(this.pivot.x*u.b+this.pivot.y*u.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(u){const i=this.localTransform;if(this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==u._worldID){const l=u.worldTransform,c=this.worldTransform;c.a=i.a*l.a+i.b*l.c,c.b=i.a*l.b+i.b*l.d,c.c=i.c*l.a+i.d*l.c,c.d=i.c*l.b+i.d*l.d,c.tx=i.tx*l.a+i.ty*l.c+l.tx,c.ty=i.tx*l.b+i.ty*l.d+l.ty,this._parentID=u._worldID,this._worldID++}}setFromMatrix(u){u.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(u){this._rotation!==u&&(this._rotation=u,this.updateSkew())}};xo.IDENTITY=new xo;let Na=xo;Na.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var eh=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Da=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;const qt=[{test:u=>u.type==="float"&&u.size===1&&!u.isArray,code:u=>`
            if(uv["${u}"] !== ud["${u}"].value)
            {
                ud["${u}"].value = uv["${u}"]
                gl.uniform1f(ud["${u}"].location, uv["${u}"])
            }
            `},{test:(u,i)=>(u.type==="sampler2D"||u.type==="samplerCube"||u.type==="sampler2DArray")&&u.size===1&&!u.isArray&&(i==null||i.castToBaseTexture!==void 0),code:u=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${u}"], t);

            if(ud["${u}"].value !== t)
            {
                ud["${u}"].value = t;
                gl.uniform1i(ud["${u}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(u,i)=>u.type==="mat3"&&u.size===1&&!u.isArray&&i.a!==void 0,code:u=>`
            gl.uniformMatrix3fv(ud["${u}"].location, false, uv["${u}"].toArray(true));
            `,codeUbo:u=>`
                var ${u}_matrix = uv.${u}.toArray(true);

                data[offset] = ${u}_matrix[0];
                data[offset+1] = ${u}_matrix[1];
                data[offset+2] = ${u}_matrix[2];
        
                data[offset + 4] = ${u}_matrix[3];
                data[offset + 5] = ${u}_matrix[4];
                data[offset + 6] = ${u}_matrix[5];
        
                data[offset + 8] = ${u}_matrix[6];
                data[offset + 9] = ${u}_matrix[7];
                data[offset + 10] = ${u}_matrix[8];
            `},{test:(u,i)=>u.type==="vec2"&&u.size===1&&!u.isArray&&i.x!==void 0,code:u=>`
                cv = ud["${u}"].value;
                v = uv["${u}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${u}"].location, v.x, v.y);
                }`,codeUbo:u=>`
                v = uv.${u};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:u=>u.type==="vec2"&&u.size===1&&!u.isArray,code:u=>`
                cv = ud["${u}"].value;
                v = uv["${u}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${u}"].location, v[0], v[1]);
                }
            `},{test:(u,i)=>u.type==="vec4"&&u.size===1&&!u.isArray&&i.width!==void 0,code:u=>`
                cv = ud["${u}"].value;
                v = uv["${u}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${u}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:u=>`
                    v = uv.${u};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(u,i)=>u.type==="vec4"&&u.size===1&&!u.isArray&&i.red!==void 0,code:u=>`
                cv = ud["${u}"].value;
                v = uv["${u}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${u}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:u=>`
                    v = uv.${u};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(u,i)=>u.type==="vec3"&&u.size===1&&!u.isArray&&i.red!==void 0,code:u=>`
                cv = ud["${u}"].value;
                v = uv["${u}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${u}"].location, v.red, v.green, v.blue)
                }`,codeUbo:u=>`
                    v = uv.${u};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:u=>u.type==="vec4"&&u.size===1&&!u.isArray,code:u=>`
                cv = ud["${u}"].value;
                v = uv["${u}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${u}"].location, v[0], v[1], v[2], v[3])
                }`}],ae={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},fe={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Ie(u,i){var c;const l=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const f in u.uniforms){const S=i[f];if(!S){((c=u.uniforms[f])==null?void 0:c.group)===!0&&(u.uniforms[f].ubo?l.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${f}, '${f}');
                    `):l.push(`
                        renderer.shader.syncUniformGroup(uv.${f}, syncData);
                    `));continue}const N=u.uniforms[f];let U=!1;for(let W=0;W<qt.length;W++)if(qt[W].test(S,N)){l.push(qt[W].code(f,N)),U=!0;break}if(!U){const W=(S.size===1&&!S.isArray?ae:fe)[S.type].replace("location",`ud["${f}"].location`);l.push(`
            cu = ud["${f}"];
            cv = cu.value;
            v = uv["${f}"];
            ${W};`)}}return new Function("ud","uv","renderer","syncData",l.join(`
`))}const vr={};let ii=vr;function Di(){if(ii===vr||ii!=null&&ii.isContextLost()){const u=st.ADAPTER.createCanvas();let i;st.PREFER_ENV>=w.WEBGL2&&(i=u.getContext("webgl2",{})),i||(i=u.getContext("webgl",{})||u.getContext("experimental-webgl",{}),i?i.getExtension("WEBGL_draw_buffers"):i=null),ii=i}return ii}let Dr;function je(){if(!Dr){Dr=B.MEDIUM;const u=Di();if(u&&u.getShaderPrecisionFormat){const i=u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT);i&&(Dr=i.precision?B.HIGH:B.MEDIUM)}}return Dr}const nr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Qe(u){return nr[u]}let Je=null;const Vr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function si(u,i){if(!Je){const l=Object.keys(Vr);Je={};for(let c=0;c<l.length;++c){const f=l[c];Je[u[f]]=Vr[f]}}return Je[i]}function vi(u,i,l){if(u.substring(0,9)!=="precision"){let c=i;return i===B.HIGH&&l!==B.HIGH&&(c=B.MEDIUM),`precision ${c} float;
${u}`}else if(l!==B.HIGH&&u.substring(0,15)==="precision highp")return u.replace("precision highp","precision mediump");return u}let Ns=0;const To={},Ba=class Zu{constructor(i,l,c="pixi-shader",f={}){this.extra={},this.id=Ns++,this.vertexSrc=i||Zu.defaultVertexSrc,this.fragmentSrc=l||Zu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=f,this.vertexSrc.substring(0,8)!=="#version"&&(c=c.replace(/\s+/g,"-"),To[c]?(To[c]++,c+=`-${To[c]}`):To[c]=1,this.vertexSrc=`#define SHADER_NAME ${c}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${c}
${this.fragmentSrc}`,this.vertexSrc=vi(this.vertexSrc,Zu.defaultVertexPrecision,B.HIGH),this.fragmentSrc=vi(this.fragmentSrc,Zu.defaultFragmentPrecision,je())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Da}static get defaultFragmentSrc(){return eh}static from(i,l,c){const f=i+l;let S=vs[f];return S||(vs[f]=S=new Zu(i,l,c)),S}};Ba.defaultVertexPrecision=B.HIGH,Ba.defaultFragmentPrecision=Bt.apple.device?B.HIGH:B.MEDIUM;let en=Ba,rh=0;class us{constructor(i,l,c){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=rh++,this.static=!!l,this.ubo=!!c,i instanceof $r?(this.buffer=i,this.buffer.type=Y.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=i,this.ubo&&(this.buffer=new $r(new Float32Array(1)),this.buffer.type=Y.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(i,l,c){if(!this.ubo)this.uniforms[i]=new us(l,c);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(i,l,c){return new us(i,l,c)}static uboFrom(i,l){return new us(i,l!=null?l:!0,!0)}}class _n{constructor(i,l){this.uniformBindCount=0,this.program=i,l?l instanceof us?this.uniformGroup=l:this.uniformGroup=new us(l):this.uniformGroup=new us({}),this.disposeRunner=new Gr("disposeShader")}checkUniformExists(i,l){if(l.uniforms[i])return!0;for(const c in l.uniforms){const f=l.uniforms[c];if(f.group===!0&&this.checkUniformExists(i,f))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(i,l,c){const f=en.from(i,l);return new _n(f,c)}}class Bc{constructor(i,l){if(this.vertexSrc=i,this.fragTemplate=l,this.programCache={},this.defaultGroupCache={},!l.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!l.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(i){if(!this.programCache[i]){const c=new Int32Array(i);for(let S=0;S<i;S++)c[S]=S;this.defaultGroupCache[i]=us.from({uSamplers:c},!0);let f=this.fragTemplate;f=f.replace(/%count%/gi,`${i}`),f=f.replace(/%forloop%/gi,this.generateSampleSrc(i)),this.programCache[i]=new en(this.vertexSrc,f)}const l={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qr,default:this.defaultGroupCache[i]};return new _n(this.programCache[i],l)}generateSampleSrc(i){let l="";l+=`
`,l+=`
`;for(let c=0;c<i;c++)c>0&&(l+=`
else `),c<i-1&&(l+=`if(vTextureId < ${c}.5)`),l+=`
{`,l+=`
	color = texture2D(uSamplers[${c}], vTextureCoord);`,l+=`
}`;return l+=`
`,l+=`
`,l}}class Ul{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let i=0;i<this.count;i++)this.elements[i]=null;this.count=0}}function Lc(){return!Bt.apple.device}function kc(u){let i=!0;const l=st.ADAPTER.getNavigator();if(Bt.tablet||Bt.phone){if(Bt.apple.device){const c=l.userAgent.match(/OS (\d+)_(\d+)?/);c&&parseInt(c[1],10)<11&&(i=!1)}if(Bt.android.device){const c=l.userAgent.match(/Android\s([0-9.]*)/);c&&parseInt(c[1],10)<7&&(i=!1)}}return i?u:4}class La{constructor(i){this.renderer=i}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(i){}}var Qo=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Af=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const ka=class Kn extends La{constructor(i){super(i),this.setShaderGenerator(),this.geometryClass=yo,this.vertexSize=6,this.state=Ze.for2d(),this.size=Kn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),i.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){var i;return this._defaultMaxTextures=(i=this._defaultMaxTextures)!=null?i:kc(32),this._defaultMaxTextures}static set defaultMaxTextures(i){this._defaultMaxTextures=i}static get canUploadSameBuffer(){var i;return this._canUploadSameBuffer=(i=this._canUploadSameBuffer)!=null?i:Lc(),this._canUploadSameBuffer}static set canUploadSameBuffer(i){this._canUploadSameBuffer=i}get MAX_TEXTURES(){return ne("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Af}static get defaultFragmentTemplate(){return Qo}setShaderGenerator({vertex:i=Kn.defaultVertexSrc,fragment:l=Kn.defaultFragmentTemplate}={}){this.shaderGenerator=new Bc(i,l)}contextChange(){const i=this.renderer.gl;st.PREFER_ENV===w.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Kn.defaultMaxTextures),this.maxTextures=sr(this.maxTextures,i)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let l=0;l<this._packedGeometryPoolSize;l++)this._packedGeometries[l]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:i,_textureArrayPool:l}=Kn,c=this.size/4,f=Math.floor(c/this.maxTextures)+1;for(;i.length<c;)i.push(new xs);for(;l.length<f;)l.push(new Ul);for(let S=0;S<this.maxTextures;S++)this._tempBoundTextures[S]=null}onPrerender(){this._flushId=0}render(i){i._texture.valid&&(this._vertexCount+i.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=i.vertexData.length/2,this._indexCount+=i.indices.length,this._bufferedTextures[this._bufferSize]=i._texture.baseTexture,this._bufferedElements[this._bufferSize++]=i)}buildTexturesAndDrawCalls(){const{_bufferedTextures:i,maxTextures:l}=this,c=Kn._textureArrayPool,f=this.renderer.batch,S=this._tempBoundTextures,N=this.renderer.textureGC.count;let U=++Cr._globalBatch,W=0,Q=c[0],lt=0;f.copyBoundTextures(S,l);for(let ft=0;ft<this._bufferSize;++ft){const mt=i[ft];i[ft]=null,mt._batchEnabled!==U&&(Q.count>=l&&(f.boundArray(Q,S,U,l),this.buildDrawCalls(Q,lt,ft),lt=ft,Q=c[++W],++U),mt._batchEnabled=U,mt.touched=N,Q.elements[Q.count++]=mt)}Q.count>0&&(f.boundArray(Q,S,U,l),this.buildDrawCalls(Q,lt,this._bufferSize),++W,++U);for(let ft=0;ft<S.length;ft++)S[ft]=null;Cr._globalBatch=U}buildDrawCalls(i,l,c){const{_bufferedElements:f,_attributeBuffer:S,_indexBuffer:N,vertexSize:U}=this,W=Kn._drawCallPool;let Q=this._dcIndex,lt=this._aIndex,ft=this._iIndex,mt=W[Q];mt.start=this._iIndex,mt.texArray=i;for(let _t=l;_t<c;++_t){const Pt=f[_t],Dt=Pt._texture.baseTexture,Wt=Gi[Dt.alphaMode?1:0][Pt.blendMode];f[_t]=null,l<_t&&mt.blend!==Wt&&(mt.size=ft-mt.start,l=_t,mt=W[++Q],mt.texArray=i,mt.start=ft),this.packInterleavedGeometry(Pt,S,N,lt,ft),lt+=Pt.vertexData.length/2*U,ft+=Pt.indices.length,mt.blend=Wt}l<c&&(mt.size=ft-mt.start,++Q),this._dcIndex=Q,this._aIndex=lt,this._iIndex=ft}bindAndClearTexArray(i){const l=this.renderer.texture;for(let c=0;c<i.count;c++)l.bind(i.elements[c],i.ids[c]),i.elements[c]=null;i.count=0}updateGeometry(){const{_packedGeometries:i,_attributeBuffer:l,_indexBuffer:c}=this;Kn.canUploadSameBuffer?(i[this._flushId]._buffer.update(l.rawBinaryData),i[this._flushId]._indexBuffer.update(c),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(l.rawBinaryData),i[this._flushId]._indexBuffer.update(c),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const i=this._dcIndex,{gl:l,state:c}=this.renderer,f=Kn._drawCallPool;let S=null;for(let N=0;N<i;N++){const{texArray:U,type:W,size:Q,start:lt,blend:ft}=f[N];S!==U&&(S=U,this.bindAndClearTexArray(U)),this.state.blendMode=ft,c.set(this.state),l.drawElements(W,Q,l.UNSIGNED_SHORT,lt*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Kn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]&&this._packedGeometries[i].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(i){const l=Ko(Math.ceil(i/8)),c=Oa(l),f=l*8;this._aBuffers.length<=c&&(this._iBuffers.length=c+1);let S=this._aBuffers[f];return S||(this._aBuffers[f]=S=new ee(f*this.vertexSize*4)),S}getIndexBuffer(i){const l=Ko(Math.ceil(i/12)),c=Oa(l),f=l*12;this._iBuffers.length<=c&&(this._iBuffers.length=c+1);let S=this._iBuffers[c];return S||(this._iBuffers[c]=S=new Uint16Array(f)),S}packInterleavedGeometry(i,l,c,f,S){const{uint32View:N,float32View:U}=l,W=f/this.vertexSize,Q=i.uvs,lt=i.indices,ft=i.vertexData,mt=i._texture.baseTexture._batchLocation,_t=Math.min(i.worldAlpha,1),Pt=ur.shared.setValue(i._tintRGB).toPremultiplied(_t,i._texture.baseTexture.alphaMode>0);for(let Dt=0;Dt<ft.length;Dt+=2)U[f++]=ft[Dt],U[f++]=ft[Dt+1],U[f++]=Q[Dt],U[f++]=Q[Dt+1],N[f++]=Pt,U[f++]=mt;for(let Dt=0;Dt<lt.length;Dt++)c[S++]=W+lt[Dt]}};ka.defaultBatchSize=4096,ka.extension={name:"batch",type:It.RendererPlugin},ka._drawCallPool=[],ka._textureArrayPool=[];let Eo=ka;zt.add(Eo);var Uc=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Gc=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const So=class Rc extends _n{constructor(i,l,c){const f=en.from(i||Rc.defaultVertexSrc,l||Rc.defaultFragmentSrc);super(f,c),this.padding=0,this.resolution=Rc.defaultResolution,this.multisample=Rc.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ze}apply(i,l,c,f,S){i.applyFilter(this,l,c,f)}get blendMode(){return this.state.blendMode}set blendMode(i){this.state.blendMode=i}get resolution(){return this._resolution}set resolution(i){this._resolution=i}static get defaultVertexSrc(){return Gc}static get defaultFragmentSrc(){return Uc}};So.defaultResolution=1,So.defaultMultisample=X.NONE;let zr=So;class Gl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ur(0),this.alpha=1}init(i){this.clearBeforeRender=i.clearBeforeRender;const{backgroundColor:l,background:c,backgroundAlpha:f}=i,S=c!=null?c:l;S!==void 0&&(this.color=S),this.alpha=f}get color(){return this._backgroundColor.value}set color(i){this._backgroundColor.setValue(i)}get alpha(){return this._backgroundColor.alpha}set alpha(i){this._backgroundColor.setAlpha(i)}get backgroundColor(){return this._backgroundColor}destroy(){}}Gl.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Gl.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"background"},zt.add(Gl);class Ua{constructor(i){this.renderer=i,this.emptyRenderer=new La(i),this.currentRenderer=this.emptyRenderer}setObjectRenderer(i){this.currentRenderer!==i&&(this.currentRenderer.stop(),this.currentRenderer=i,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(i,l){const{boundTextures:c}=this.renderer.texture;for(let f=l-1;f>=0;--f)i[f]=c[f]||null,i[f]&&(i[f]._batchLocation=f)}boundArray(i,l,c,f){const{elements:S,ids:N,count:U}=i;let W=0;for(let Q=0;Q<U;Q++){const lt=S[Q],ft=lt._batchLocation;if(ft>=0&&ft<f&&l[ft]===lt){N[Q]=ft;continue}for(;W<f;){const mt=l[W];if(mt&&mt._batchEnabled===c&&mt._batchLocation===W){W++;continue}N[Q]=W,lt._batchLocation=W,l[W]=lt;break}}}destroy(){this.renderer=null}}Ua.extension={type:It.RendererSystem,name:"batch"},zt.add(Ua);let Vc=0;class Ga{constructor(i){this.renderer=i,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(i){this.gl=i,this.renderer.gl=i,this.renderer.CONTEXT_UID=Vc++}init(i){if(i.context)this.initFromContext(i.context);else{const l=this.renderer.background.alpha<1,c=i.premultipliedAlpha;this.preserveDrawingBuffer=i.preserveDrawingBuffer,this.useContextAlpha=i.useContextAlpha,this.powerPreference=i.powerPreference,this.initFromOptions({alpha:l,premultipliedAlpha:c,antialias:i.antialias,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:i.powerPreference})}}initFromContext(i){this.gl=i,this.validateContext(i),this.renderer.gl=i,this.renderer.CONTEXT_UID=Vc++,this.renderer.runners.contextChange.emit(i);const l=this.renderer.view;l.addEventListener!==void 0&&(l.addEventListener("webglcontextlost",this.handleContextLost,!1),l.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(i){const l=this.createContext(this.renderer.view,i);this.initFromContext(l)}createContext(i,l){let c;if(st.PREFER_ENV>=w.WEBGL2&&(c=i.getContext("webgl2",l)),c)this.webGLVersion=2;else if(this.webGLVersion=1,c=i.getContext("webgl",l)||i.getContext("experimental-webgl",l),!c)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=c,this.getExtensions(),this.gl}getExtensions(){const{gl:i}=this,l={loseContext:i.getExtension("WEBGL_lose_context"),anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),s3tc:i.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:i.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:i.getExtension("WEBGL_compressed_texture_etc"),etc1:i.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:i.getExtension("WEBGL_compressed_texture_atc"),astc:i.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,l,{drawBuffers:i.getExtension("WEBGL_draw_buffers"),depthTexture:i.getExtension("WEBGL_depth_texture"),vertexArrayObject:i.getExtension("OES_vertex_array_object")||i.getExtension("MOZ_OES_vertex_array_object")||i.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:i.getExtension("OES_element_index_uint"),floatTexture:i.getExtension("OES_texture_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),textureHalfFloat:i.getExtension("OES_texture_half_float"),textureHalfFloatLinear:i.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,l,{colorBufferFloat:i.getExtension("EXT_color_buffer_float")})}handleContextLost(i){i.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const i=this.renderer.view;this.renderer=null,i.removeEventListener!==void 0&&(i.removeEventListener("webglcontextlost",this.handleContextLost),i.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(i){const l=i.getContextAttributes(),c="WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext;c&&(this.webGLVersion=2),l&&!l.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const f=c||!!i.getExtension("OES_element_index_uint");this.supports.uint32Indices=f,f||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ga.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ga.extension={type:It.RendererSystem,name:"context"},zt.add(Ga);class Va{constructor(i,l){if(this.width=Math.round(i),this.height=Math.round(l),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Gr("disposeFramebuffer"),this.multisample=X.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(i=0,l){return this.colorTextures[i]=l||new Cr(null,{scaleMode:y.NEAREST,resolution:1,mipmap:_.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(i){return this.depthTexture=i||new Cr(null,{scaleMode:y.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:_.OFF,format:C.DEPTH_COMPONENT,type:p.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(i,l){if(i=Math.round(i),l=Math.round(l),!i||!l)throw new Error("Framebuffer width and height must not be zero");if(!(i===this.width&&l===this.height)){this.width=i,this.height=l,this.dirtyId++,this.dirtySize++;for(let c=0;c<this.colorTextures.length;c++){const f=this.colorTextures[c],S=f.resolution;f.setSize(i/S,l/S)}if(this.depthTexture){const c=this.depthTexture.resolution;this.depthTexture.setSize(i/c,l/c)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Vl extends Cr{constructor(i={}){var l,c,f;if(typeof i=="number"){const S=arguments[0],N=arguments[1],U=arguments[2],W=arguments[3];i={width:S,height:N,scaleMode:U,resolution:W}}i.width=(l=i.width)!=null?l:100,i.height=(c=i.height)!=null?c:100,(f=i.multisample)!=null||(i.multisample=X.NONE),super(null,i),this.mipmap=_.OFF,this.valid=!0,this._clear=new ur([0,0,0,0]),this.framebuffer=new Va(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=i.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(i){this._clear.setValue(i)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(i){this.framebuffer.multisample=i}resize(i,l){this.framebuffer.resize(i*this.resolution,l*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Dn extends Tr{constructor(i){const l=i,c=l.naturalWidth||l.videoWidth||l.width,f=l.naturalHeight||l.videoHeight||l.height;super(c,f),this.source=i,this.noSubImage=!1}static crossOrigin(i,l,c){c===void 0&&!l.startsWith("data:")?i.crossOrigin=Nt(l):c!==!1&&(i.crossOrigin=typeof c=="string"?c:"anonymous")}upload(i,l,c,f){const S=i.gl,N=l.realWidth,U=l.realHeight;if(f=f||this.source,typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement){if(!f.complete||f.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&f instanceof HTMLVideoElement&&f.readyState<=1)return!1;return S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.alphaMode===A.UNPACK),!this.noSubImage&&l.target===S.TEXTURE_2D&&c.width===N&&c.height===U?S.texSubImage2D(S.TEXTURE_2D,0,0,0,l.format,c.type,f):(c.width=N,c.height=U,S.texImage2D(l.target,0,c.internalFormat,l.format,c.type,f)),!0}update(){if(this.destroyed)return;const i=this.source,l=i.naturalWidth||i.videoWidth||i.width,c=i.naturalHeight||i.videoHeight||i.height;this.resize(l,c),super.update()}dispose(){this.source=null}}class ih extends Dn{constructor(i,l){var c;if(l=l||{},typeof i=="string"){const f=new Image;Dn.crossOrigin(f,i,l.crossorigin),f.src=i,i=f}super(i),!i.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=i.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=((c=l.createBitmap)!=null?c:st.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof l.alphaMode=="number"?l.alphaMode:null,this.bitmap=null,this._load=null,l.autoLoad!==!1&&this.load()}load(i){return this._load?this._load:(i!==void 0&&(this.createBitmap=i),this._load=new Promise((l,c)=>{const f=this.source;this.url=f.src;const S=()=>{this.destroyed||(f.onload=null,f.onerror=null,this.update(),this._load=null,this.createBitmap?l(this.process()):l(this))};f.complete&&f.src?S():(f.onload=S,f.onerror=N=>{c(N),this.onError.emit(N)})}),this._load)}process(){const i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const l=globalThis.createImageBitmap,c=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:c?"cors":"no-cors"}).then(f=>f.blob()).then(f=>l(f,0,0,i.width,i.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===A.UNPACK?"premultiply":"none"})).then(f=>this.destroyed?Promise.reject():(this.bitmap=f,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(i,l,c){if(typeof this.alphaMode=="number"&&(l.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(i,l,c);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(i,l,c,this.bitmap),!this.preserveBitmap){let f=!0;const S=l._glTextures;for(const N in S){const U=S[N];if(U!==c&&U.dirtyId!==l.dirtyId){f=!1;break}}f&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(i){return typeof HTMLImageElement<"u"&&(typeof i=="string"||i instanceof HTMLImageElement)}}class zl{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(i,l,c){const f=l.width,S=l.height;if(c){const N=i.width/2/f,U=i.height/2/S,W=i.x/f+N,Q=i.y/S+U;c=yi.add(c,yi.NW),this.x0=W+N*yi.uX(c),this.y0=Q+U*yi.uY(c),c=yi.add(c,2),this.x1=W+N*yi.uX(c),this.y1=Q+U*yi.uY(c),c=yi.add(c,2),this.x2=W+N*yi.uX(c),this.y2=Q+U*yi.uY(c),c=yi.add(c,2),this.x3=W+N*yi.uX(c),this.y3=Q+U*yi.uY(c)}else this.x0=i.x/f,this.y0=i.y/S,this.x1=(i.x+i.width)/f,this.y1=i.y/S,this.x2=(i.x+i.width)/f,this.y2=(i.y+i.height)/S,this.x3=i.x/f,this.y3=(i.y+i.height)/S;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}zl.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const zc=new zl;function Hl(u){u.destroy=function(){},u.on=function(){},u.once=function(){},u.emit=function(){}}class hr extends Gt{constructor(i,l,c,f,S,N,U){if(super(),this.noFrame=!1,l||(this.noFrame=!0,l=new Rr(0,0,1,1)),i instanceof hr&&(i=i.baseTexture),this.baseTexture=i,this._frame=l,this.trim=f,this.valid=!1,this.destroyed=!1,this._uvs=zc,this.uvMatrix=null,this.orig=c||l,this._rotate=Number(S||0),S===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=N?new Mr(N.x,N.y):new Mr(0,0),this.defaultBorders=U,this._updateID=0,this.textureCacheIds=[],i.valid?this.noFrame?i.valid&&this.onBaseTextureUpdated(i):this.frame=l:i.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&i.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(i){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=i.width,this._frame.height=i.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(i){if(this.baseTexture){if(i){const{resource:l}=this.baseTexture;l!=null&&l.url&&Yi[l.url]&&hr.removeFromCache(l.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,hr.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var f;const i=this._frame.clone(),l=this._frame===this.orig?i:this.orig.clone(),c=new hr(this.baseTexture,!this.noFrame&&i,l,(f=this.trim)==null?void 0:f.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(c._frame=i),c}updateUvs(){this._uvs===zc&&(this._uvs=new zl),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(i,l={},c=st.STRICT_TEXTURE_CACHE){const f=typeof i=="string";let S=null;if(f)S=i;else if(i instanceof Cr){if(!i.cacheId){const U=(l==null?void 0:l.pixiIdPrefix)||"pixiid";i.cacheId=`${U}-${Os()}`,Cr.addToCache(i,i.cacheId)}S=i.cacheId}else{if(!i._pixiId){const U=(l==null?void 0:l.pixiIdPrefix)||"pixiid";i._pixiId=`${U}_${Os()}`}S=i._pixiId}let N=Yi[S];if(f&&c&&!N)throw new Error(`The cacheId "${S}" does not exist in TextureCache.`);return!N&&!(i instanceof Cr)?(l.resolution||(l.resolution=Ht(i)),N=new hr(new Cr(i,l)),N.baseTexture.cacheId=S,Cr.addToCache(N.baseTexture,S),hr.addToCache(N,S)):!N&&i instanceof Cr&&(N=new hr(i),hr.addToCache(N,S)),N}static fromURL(i,l){const c=Object.assign({autoLoad:!1},l==null?void 0:l.resourceOptions),f=hr.from(i,Object.assign({resourceOptions:c},l),!1),S=f.baseTexture.resource;return f.baseTexture.valid?Promise.resolve(f):S.load().then(()=>Promise.resolve(f))}static fromBuffer(i,l,c,f){return new hr(Cr.fromBuffer(i,l,c,f))}static fromLoader(i,l,c,f){const S=new Cr(i,Object.assign({scaleMode:Cr.defaultOptions.scaleMode,resolution:Ht(l)},f)),{resource:N}=S;N instanceof ih&&(N.url=l);const U=new hr(S);return c||(c=l),Cr.addToCache(U.baseTexture,c),hr.addToCache(U,c),c!==l&&(Cr.addToCache(U.baseTexture,l),hr.addToCache(U,l)),U.baseTexture.valid?Promise.resolve(U):new Promise(W=>{U.baseTexture.once("loaded",()=>W(U))})}static addToCache(i,l){l&&(i.textureCacheIds.includes(l)||i.textureCacheIds.push(l),Yi[l]&&Yi[l]!==i&&console.warn(`Texture added to the cache with an id [${l}] that already had an entry`),Yi[l]=i)}static removeFromCache(i){if(typeof i=="string"){const l=Yi[i];if(l){const c=l.textureCacheIds.indexOf(i);return c>-1&&l.textureCacheIds.splice(c,1),delete Yi[i],l}}else if(i!=null&&i.textureCacheIds){for(let l=0;l<i.textureCacheIds.length;++l)Yi[i.textureCacheIds[l]]===i&&delete Yi[i.textureCacheIds[l]];return i.textureCacheIds.length=0,i}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(i){this._frame=i,this.noFrame=!1;const{x:l,y:c,width:f,height:S}=i,N=l+f>this.baseTexture.width,U=c+S>this.baseTexture.height;if(N||U){const W=N&&U?"and":"or",Q=`X: ${l} + ${f} = ${l+f} > ${this.baseTexture.width}`,lt=`Y: ${c} + ${S} = ${c+S} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${Q} ${W} ${lt}`)}this.valid=f&&S&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=i),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(i){this._rotate=i,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return hr._EMPTY||(hr._EMPTY=new hr(new Cr),Hl(hr._EMPTY),Hl(hr._EMPTY.baseTexture)),hr._EMPTY}static get WHITE(){if(!hr._WHITE){const i=st.ADAPTER.createCanvas(16,16),l=i.getContext("2d");i.width=16,i.height=16,l.fillStyle="white",l.fillRect(0,0,16,16),hr._WHITE=new hr(Cr.from(i)),Hl(hr._WHITE),Hl(hr._WHITE.baseTexture)}return hr._WHITE}}class bo extends hr{constructor(i,l){super(i,l),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(i){this.framebuffer.multisample=i}resize(i,l,c=!0){const f=this.baseTexture.resolution,S=Math.round(i*f)/f,N=Math.round(l*f)/f;this.valid=S>0&&N>0,this._frame.width=this.orig.width=S,this._frame.height=this.orig.height=N,c&&this.baseTexture.resize(S,N),this.updateUvs()}setResolution(i){const{baseTexture:l}=this;l.resolution!==i&&(l.setResolution(i),this.resize(l.width,l.height,!1))}static create(i){return new bo(new Vl(i))}}class Hc{constructor(i){this.texturePool={},this.textureOptions=i||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(i,l,c=X.NONE){const f=new Vl(Object.assign({width:i,height:l,resolution:1,multisample:c},this.textureOptions));return new bo(f)}getOptimalTexture(i,l,c=1,f=X.NONE){let S;i=Math.max(Math.ceil(i*c-1e-6),1),l=Math.max(Math.ceil(l*c-1e-6),1),!this.enableFullScreen||i!==this._pixelsWidth||l!==this._pixelsHeight?(i=Ko(i),l=Ko(l),S=((i&65535)<<16|l&65535)>>>0,f>1&&(S+=f*4294967296)):S=f>1?-f:-1,this.texturePool[S]||(this.texturePool[S]=[]);let N=this.texturePool[S].pop();return N||(N=this.createTexture(i,l,f)),N.filterPoolKey=S,N.setResolution(c),N}getFilterTexture(i,l,c){const f=this.getOptimalTexture(i.width,i.height,l||i.resolution,c||X.NONE);return f.filterFrame=i.filterFrame,f}returnTexture(i){const l=i.filterPoolKey;i.filterFrame=null,this.texturePool[l].push(i)}returnFilterTexture(i){this.returnTexture(i)}clear(i){if(i=i!==!1,i)for(const l in this.texturePool){const c=this.texturePool[l];if(c)for(let f=0;f<c.length;f++)c[f].destroy(!0)}this.texturePool={}}setScreenSize(i){if(!(i.width===this._pixelsWidth&&i.height===this._pixelsHeight)){this.enableFullScreen=i.width>0&&i.height>0;for(const l in this.texturePool){if(!(Number(l)<0))continue;const c=this.texturePool[l];if(c)for(let f=0;f<c.length;f++)c[f].destroy(!0);this.texturePool[l]=[]}this._pixelsWidth=i.width,this._pixelsHeight=i.height}}}Hc.SCREEN_KEY=-1;class rn extends Ki{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Jo extends Ki{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new $r(this.vertices),this.uvBuffer=new $r(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(i,l){let c=0,f=0;return this.uvs[0]=c,this.uvs[1]=f,this.uvs[2]=c+l.width/i.width,this.uvs[3]=f,this.uvs[4]=c+l.width/i.width,this.uvs[5]=f+l.height/i.height,this.uvs[6]=c,this.uvs[7]=f+l.height/i.height,c=l.x,f=l.y,this.vertices[0]=c,this.vertices[1]=f,this.vertices[2]=c+l.width,this.vertices[3]=f,this.vertices[4]=c+l.width,this.vertices[5]=f+l.height,this.vertices[6]=c,this.vertices[7]=f+l.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class jc{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=X.NONE,this.sourceFrame=new Rr,this.destinationFrame=new Rr,this.bindingSourceFrame=new Rr,this.bindingDestinationFrame=new Rr,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const za=[new Mr,new Mr,new Mr,new Mr],jl=new Qr;class sh{constructor(i){this.renderer=i,this.defaultFilterStack=[{}],this.texturePool=new Hc,this.statePool=[],this.quad=new rn,this.quadUv=new Jo,this.tempRect=new Rr,this.activeState={},this.globalUniforms=new us({outputFrame:new Rr,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(i,l){var Wt,Jt,pe,re;const c=this.renderer,f=this.defaultFilterStack,S=this.statePool.pop()||new jc,N=c.renderTexture;let U,W;if(N.current){const le=N.current;U=le.resolution,W=le.multisample}else U=c.resolution,W=c.multisample;let Q=l[0].resolution||U,lt=(Wt=l[0].multisample)!=null?Wt:W,ft=l[0].padding,mt=l[0].autoFit,_t=(Jt=l[0].legacy)!=null?Jt:!0;for(let le=1;le<l.length;le++){const De=l[le];Q=Math.min(Q,De.resolution||U),lt=Math.min(lt,(pe=De.multisample)!=null?pe:W),ft=this.useMaxPadding?Math.max(ft,De.padding):ft+De.padding,mt=mt&&De.autoFit,_t=_t||((re=De.legacy)!=null?re:!0)}f.length===1&&(this.defaultFilterStack[0].renderTexture=N.current),f.push(S),S.resolution=Q,S.multisample=lt,S.legacy=_t,S.target=i,S.sourceFrame.copyFrom(i.filterArea||i.getBounds(!0)),S.sourceFrame.pad(ft);const Pt=this.tempRect.copyFrom(N.sourceFrame);c.projection.transform&&this.transformAABB(jl.copyFrom(c.projection.transform).invert(),Pt),mt?(S.sourceFrame.fit(Pt),(S.sourceFrame.width<=0||S.sourceFrame.height<=0)&&(S.sourceFrame.width=0,S.sourceFrame.height=0)):S.sourceFrame.intersects(Pt)||(S.sourceFrame.width=0,S.sourceFrame.height=0),this.roundFrame(S.sourceFrame,N.current?N.current.resolution:c.resolution,N.sourceFrame,N.destinationFrame,c.projection.transform),S.renderTexture=this.getOptimalFilterTexture(S.sourceFrame.width,S.sourceFrame.height,Q,lt),S.filters=l,S.destinationFrame.width=S.renderTexture.width,S.destinationFrame.height=S.renderTexture.height;const Dt=this.tempRect;Dt.x=0,Dt.y=0,Dt.width=S.sourceFrame.width,Dt.height=S.sourceFrame.height,S.renderTexture.filterFrame=S.sourceFrame,S.bindingSourceFrame.copyFrom(N.sourceFrame),S.bindingDestinationFrame.copyFrom(N.destinationFrame),S.transform=c.projection.transform,c.projection.transform=null,N.bind(S.renderTexture,S.sourceFrame,Dt),c.framebuffer.clear(0,0,0,0)}pop(){const i=this.defaultFilterStack,l=i.pop(),c=l.filters;this.activeState=l;const f=this.globalUniforms.uniforms;f.outputFrame=l.sourceFrame,f.resolution=l.resolution;const S=f.inputSize,N=f.inputPixel,U=f.inputClamp;if(S[0]=l.destinationFrame.width,S[1]=l.destinationFrame.height,S[2]=1/S[0],S[3]=1/S[1],N[0]=Math.round(S[0]*l.resolution),N[1]=Math.round(S[1]*l.resolution),N[2]=1/N[0],N[3]=1/N[1],U[0]=.5*N[2],U[1]=.5*N[3],U[2]=l.sourceFrame.width*S[2]-.5*N[2],U[3]=l.sourceFrame.height*S[3]-.5*N[3],l.legacy){const Q=f.filterArea;Q[0]=l.destinationFrame.width,Q[1]=l.destinationFrame.height,Q[2]=l.sourceFrame.x,Q[3]=l.sourceFrame.y,f.filterClamp=f.inputClamp}this.globalUniforms.update();const W=i[i.length-1];if(this.renderer.framebuffer.blit(),c.length===1)c[0].apply(this,l.renderTexture,W.renderTexture,P.BLEND,l),this.returnFilterTexture(l.renderTexture);else{let Q=l.renderTexture,lt=this.getOptimalFilterTexture(Q.width,Q.height,l.resolution);lt.filterFrame=Q.filterFrame;let ft=0;for(ft=0;ft<c.length-1;++ft){ft===1&&l.multisample>1&&(lt=this.getOptimalFilterTexture(Q.width,Q.height,l.resolution),lt.filterFrame=Q.filterFrame),c[ft].apply(this,Q,lt,P.CLEAR,l);const mt=Q;Q=lt,lt=mt}c[ft].apply(this,Q,W.renderTexture,P.BLEND,l),ft>1&&l.multisample>1&&this.returnFilterTexture(l.renderTexture),this.returnFilterTexture(Q),this.returnFilterTexture(lt)}l.clear(),this.statePool.push(l)}bindAndClear(i,l=P.CLEAR){const{renderTexture:c,state:f}=this.renderer;if(i===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,i==null?void 0:i.filterFrame){const N=this.tempRect;N.x=0,N.y=0,N.width=i.filterFrame.width,N.height=i.filterFrame.height,c.bind(i,i.filterFrame,N)}else i!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?c.bind(i):this.renderer.renderTexture.bind(i,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const S=f.stateId&1||this.forceClear;(l===P.CLEAR||l===P.BLIT&&S)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(i,l,c,f){const S=this.renderer;S.state.set(i.state),this.bindAndClear(c,f),i.uniforms.uSampler=l,i.uniforms.filterGlobals=this.globalUniforms,S.shader.bind(i),i.legacy=!!i.program.attributeData.aTextureCoord,i.legacy?(this.quadUv.map(l._frame,l.filterFrame),S.geometry.bind(this.quadUv),S.geometry.draw(O.TRIANGLES)):(S.geometry.bind(this.quad),S.geometry.draw(O.TRIANGLE_STRIP))}calculateSpriteMatrix(i,l){const{sourceFrame:c,destinationFrame:f}=this.activeState,{orig:S}=l._texture,N=i.set(f.width,0,0,f.height,c.x,c.y),U=l.worldTransform.copyTo(Qr.TEMP_MATRIX);return U.invert(),N.prepend(U),N.scale(1/S.width,1/S.height),N.translate(l.anchor.x,l.anchor.y),N}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(i,l,c=1,f=X.NONE){return this.texturePool.getOptimalTexture(i,l,c,f)}getFilterTexture(i,l,c){if(typeof i=="number"){const S=i;i=l,l=S}i=i||this.activeState.renderTexture;const f=this.texturePool.getOptimalTexture(i.width,i.height,l||i.resolution,c||X.NONE);return f.filterFrame=i.filterFrame,f}returnFilterTexture(i){this.texturePool.returnTexture(i)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(i,l){const c=za[0],f=za[1],S=za[2],N=za[3];c.set(l.left,l.top),f.set(l.left,l.bottom),S.set(l.right,l.top),N.set(l.right,l.bottom),i.apply(c,c),i.apply(f,f),i.apply(S,S),i.apply(N,N);const U=Math.min(c.x,f.x,S.x,N.x),W=Math.min(c.y,f.y,S.y,N.y),Q=Math.max(c.x,f.x,S.x,N.x),lt=Math.max(c.y,f.y,S.y,N.y);l.x=U,l.y=W,l.width=Q-U,l.height=lt-W}roundFrame(i,l,c,f,S){if(!(i.width<=0||i.height<=0||c.width<=0||c.height<=0)){if(S){const{a:N,b:U,c:W,d:Q}=S;if((Math.abs(U)>1e-4||Math.abs(W)>1e-4)&&(Math.abs(N)>1e-4||Math.abs(Q)>1e-4))return}S=S?jl.copyFrom(S):jl.identity(),S.translate(-c.x,-c.y).scale(f.width/c.width,f.height/c.height).translate(f.x,f.y),this.transformAABB(S,i),i.ceil(l),this.transformAABB(S.invert(),i)}}}sh.extension={type:It.RendererSystem,name:"filter"},zt.add(sh);class nh{constructor(i){this.framebuffer=i,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=X.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const wf=new Rr;class Xc{constructor(i){this.renderer=i,this.managedFramebuffers=[],this.unknownFramebuffer=new Va(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const i=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rr,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let l=this.renderer.context.extensions.drawBuffers,c=this.renderer.context.extensions.depthTexture;st.PREFER_ENV===w.WEBGL_LEGACY&&(l=null,c=null),l?i.drawBuffers=f=>l.drawBuffersWEBGL(f):(this.hasMRT=!1,i.drawBuffers=()=>{}),c||(this.writeDepthTexture=!1)}else this.msaaSamples=i.getInternalformatParameter(i.RENDERBUFFER,i.RGBA8,i.SAMPLES)}bind(i,l,c=0){const{gl:f}=this;if(i){const S=i.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(i);this.current!==i&&(this.current=i,f.bindFramebuffer(f.FRAMEBUFFER,S.framebuffer)),S.mipLevel!==c&&(i.dirtyId++,i.dirtyFormat++,S.mipLevel=c),S.dirtyId!==i.dirtyId&&(S.dirtyId=i.dirtyId,S.dirtyFormat!==i.dirtyFormat?(S.dirtyFormat=i.dirtyFormat,S.dirtySize=i.dirtySize,this.updateFramebuffer(i,c)):S.dirtySize!==i.dirtySize&&(S.dirtySize=i.dirtySize,this.resizeFramebuffer(i)));for(let N=0;N<i.colorTextures.length;N++){const U=i.colorTextures[N];this.renderer.texture.unbind(U.parentTextureArray||U)}if(i.depthTexture&&this.renderer.texture.unbind(i.depthTexture),l){const N=l.width>>c,U=l.height>>c,W=N/l.width;this.setViewport(l.x*W,l.y*W,N,U)}else{const N=i.width>>c,U=i.height>>c;this.setViewport(0,0,N,U)}}else this.current&&(this.current=null,f.bindFramebuffer(f.FRAMEBUFFER,null)),l?this.setViewport(l.x,l.y,l.width,l.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(i,l,c,f){const S=this.viewport;i=Math.round(i),l=Math.round(l),c=Math.round(c),f=Math.round(f),(S.width!==c||S.height!==f||S.x!==i||S.y!==l)&&(S.x=i,S.y=l,S.width=c,S.height=f,this.gl.viewport(i,l,c,f))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(i,l,c,f,S=D.COLOR|D.DEPTH){const{gl:N}=this;N.clearColor(i,l,c,f),N.clear(S)}initFramebuffer(i){const{gl:l}=this,c=new nh(l.createFramebuffer());return c.multisample=this.detectSamples(i.multisample),i.glFramebuffers[this.CONTEXT_UID]=c,this.managedFramebuffers.push(i),i.disposeRunner.add(this),c}resizeFramebuffer(i){const{gl:l}=this,c=i.glFramebuffers[this.CONTEXT_UID];if(c.stencil){l.bindRenderbuffer(l.RENDERBUFFER,c.stencil);let N;this.renderer.context.webGLVersion===1?N=l.DEPTH_STENCIL:i.depth&&i.stencil?N=l.DEPTH24_STENCIL8:i.depth?N=l.DEPTH_COMPONENT24:N=l.STENCIL_INDEX8,c.msaaBuffer?l.renderbufferStorageMultisample(l.RENDERBUFFER,c.multisample,N,i.width,i.height):l.renderbufferStorage(l.RENDERBUFFER,N,i.width,i.height)}const f=i.colorTextures;let S=f.length;l.drawBuffers||(S=Math.min(S,1));for(let N=0;N<S;N++){const U=f[N],W=U.parentTextureArray||U;this.renderer.texture.bind(W,0),N===0&&c.msaaBuffer&&(l.bindRenderbuffer(l.RENDERBUFFER,c.msaaBuffer),l.renderbufferStorageMultisample(l.RENDERBUFFER,c.multisample,W._glTextures[this.CONTEXT_UID].internalFormat,i.width,i.height))}i.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(i.depthTexture,0)}updateFramebuffer(i,l){const{gl:c}=this,f=i.glFramebuffers[this.CONTEXT_UID],S=i.colorTextures;let N=S.length;c.drawBuffers||(N=Math.min(N,1)),f.multisample>1&&this.canMultisampleFramebuffer(i)?f.msaaBuffer=f.msaaBuffer||c.createRenderbuffer():f.msaaBuffer&&(c.deleteRenderbuffer(f.msaaBuffer),f.msaaBuffer=null,f.blitFramebuffer&&(f.blitFramebuffer.dispose(),f.blitFramebuffer=null));const U=[];for(let W=0;W<N;W++){const Q=S[W],lt=Q.parentTextureArray||Q;this.renderer.texture.bind(lt,0),W===0&&f.msaaBuffer?(c.bindRenderbuffer(c.RENDERBUFFER,f.msaaBuffer),c.renderbufferStorageMultisample(c.RENDERBUFFER,f.multisample,lt._glTextures[this.CONTEXT_UID].internalFormat,i.width,i.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,f.msaaBuffer)):(c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+W,Q.target,lt._glTextures[this.CONTEXT_UID].texture,l),U.push(c.COLOR_ATTACHMENT0+W))}if(U.length>1&&c.drawBuffers(U),i.depthTexture&&this.writeDepthTexture){const W=i.depthTexture;this.renderer.texture.bind(W,0),c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,W._glTextures[this.CONTEXT_UID].texture,l)}if((i.stencil||i.depth)&&!(i.depthTexture&&this.writeDepthTexture)){f.stencil=f.stencil||c.createRenderbuffer();let W,Q;this.renderer.context.webGLVersion===1?(W=c.DEPTH_STENCIL_ATTACHMENT,Q=c.DEPTH_STENCIL):i.depth&&i.stencil?(W=c.DEPTH_STENCIL_ATTACHMENT,Q=c.DEPTH24_STENCIL8):i.depth?(W=c.DEPTH_ATTACHMENT,Q=c.DEPTH_COMPONENT24):(W=c.STENCIL_ATTACHMENT,Q=c.STENCIL_INDEX8),c.bindRenderbuffer(c.RENDERBUFFER,f.stencil),f.msaaBuffer?c.renderbufferStorageMultisample(c.RENDERBUFFER,f.multisample,Q,i.width,i.height):c.renderbufferStorage(c.RENDERBUFFER,Q,i.width,i.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,W,c.RENDERBUFFER,f.stencil)}else f.stencil&&(c.deleteRenderbuffer(f.stencil),f.stencil=null)}canMultisampleFramebuffer(i){return this.renderer.context.webGLVersion!==1&&i.colorTextures.length<=1&&!i.depthTexture}detectSamples(i){const{msaaSamples:l}=this;let c=X.NONE;if(i<=1||l===null)return c;for(let f=0;f<l.length;f++)if(l[f]<=i){c=l[f];break}return c===1&&(c=X.NONE),c}blit(i,l,c){const{current:f,renderer:S,gl:N,CONTEXT_UID:U}=this;if(S.context.webGLVersion!==2||!f)return;const W=f.glFramebuffers[U];if(!W)return;if(!i){if(!W.msaaBuffer)return;const lt=f.colorTextures[0];if(!lt)return;W.blitFramebuffer||(W.blitFramebuffer=new Va(f.width,f.height),W.blitFramebuffer.addColorTexture(0,lt)),i=W.blitFramebuffer,i.colorTextures[0]!==lt&&(i.colorTextures[0]=lt,i.dirtyId++,i.dirtyFormat++),(i.width!==f.width||i.height!==f.height)&&(i.width=f.width,i.height=f.height,i.dirtyId++,i.dirtySize++)}l||(l=wf,l.width=f.width,l.height=f.height),c||(c=l);const Q=l.width===c.width&&l.height===c.height;this.bind(i),N.bindFramebuffer(N.READ_FRAMEBUFFER,W.framebuffer),N.blitFramebuffer(l.left,l.top,l.right,l.bottom,c.left,c.top,c.right,c.bottom,N.COLOR_BUFFER_BIT,Q?N.NEAREST:N.LINEAR),N.bindFramebuffer(N.READ_FRAMEBUFFER,i.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(i,l){const c=i.glFramebuffers[this.CONTEXT_UID],f=this.gl;if(!c)return;delete i.glFramebuffers[this.CONTEXT_UID];const S=this.managedFramebuffers.indexOf(i);S>=0&&this.managedFramebuffers.splice(S,1),i.disposeRunner.remove(this),l||(f.deleteFramebuffer(c.framebuffer),c.msaaBuffer&&f.deleteRenderbuffer(c.msaaBuffer),c.stencil&&f.deleteRenderbuffer(c.stencil)),c.blitFramebuffer&&this.disposeFramebuffer(c.blitFramebuffer,l)}disposeAll(i){const l=this.managedFramebuffers;this.managedFramebuffers=[];for(let c=0;c<l.length;c++)this.disposeFramebuffer(l[c],i)}forceStencil(){const i=this.current;if(!i)return;const l=i.glFramebuffers[this.CONTEXT_UID];if(!l||l.stencil&&i.stencil)return;i.stencil=!0;const c=i.width,f=i.height,S=this.gl,N=l.stencil=S.createRenderbuffer();S.bindRenderbuffer(S.RENDERBUFFER,N);let U,W;this.renderer.context.webGLVersion===1?(U=S.DEPTH_STENCIL_ATTACHMENT,W=S.DEPTH_STENCIL):i.depth?(U=S.DEPTH_STENCIL_ATTACHMENT,W=S.DEPTH24_STENCIL8):(U=S.STENCIL_ATTACHMENT,W=S.STENCIL_INDEX8),l.msaaBuffer?S.renderbufferStorageMultisample(S.RENDERBUFFER,l.multisample,W,c,f):S.renderbufferStorage(S.RENDERBUFFER,W,c,f),S.framebufferRenderbuffer(S.FRAMEBUFFER,U,S.RENDERBUFFER,N)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rr}destroy(){this.renderer=null}}Xc.extension={type:It.RendererSystem,name:"framebuffer"},zt.add(Xc);const eo={5126:4,5123:2,5121:1};class Xl{constructor(i){this.renderer=i,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const i=this.gl=this.renderer.gl,l=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,l.webGLVersion!==2){let c=this.renderer.context.extensions.vertexArrayObject;st.PREFER_ENV===w.WEBGL_LEGACY&&(c=null),c?(i.createVertexArray=()=>c.createVertexArrayOES(),i.bindVertexArray=f=>c.bindVertexArrayOES(f),i.deleteVertexArray=f=>c.deleteVertexArrayOES(f)):(this.hasVao=!1,i.createVertexArray=()=>null,i.bindVertexArray=()=>null,i.deleteVertexArray=()=>null)}if(l.webGLVersion!==2){const c=i.getExtension("ANGLE_instanced_arrays");c?(i.vertexAttribDivisor=(f,S)=>c.vertexAttribDivisorANGLE(f,S),i.drawElementsInstanced=(f,S,N,U,W)=>c.drawElementsInstancedANGLE(f,S,N,U,W),i.drawArraysInstanced=(f,S,N,U)=>c.drawArraysInstancedANGLE(f,S,N,U)):this.hasInstance=!1}this.canUseUInt32ElementIndex=l.webGLVersion===2||!!l.extensions.uint32ElementIndex}bind(i,l){l=l||this.renderer.shader.shader;const{gl:c}=this;let f=i.glVertexArrayObjects[this.CONTEXT_UID],S=!1;f||(this.managedGeometries[i.id]=i,i.disposeRunner.add(this),i.glVertexArrayObjects[this.CONTEXT_UID]=f={},S=!0);const N=f[l.program.id]||this.initGeometryVao(i,l,S);this._activeGeometry=i,this._activeVao!==N&&(this._activeVao=N,this.hasVao?c.bindVertexArray(N):this.activateVao(i,l.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const i=this._activeGeometry,l=this.renderer.buffer;for(let c=0;c<i.buffers.length;c++){const f=i.buffers[c];l.update(f)}}checkCompatibility(i,l){const c=i.attributes,f=l.attributeData;for(const S in f)if(!c[S])throw new Error(`shader and geometry incompatible, geometry missing the "${S}" attribute`)}getSignature(i,l){const c=i.attributes,f=l.attributeData,S=["g",i.id];for(const N in c)f[N]&&S.push(N,f[N].location);return S.join("-")}initGeometryVao(i,l,c=!0){const f=this.gl,S=this.CONTEXT_UID,N=this.renderer.buffer,U=l.program;U.glPrograms[S]||this.renderer.shader.generateProgram(l),this.checkCompatibility(i,U);const W=this.getSignature(i,U),Q=i.glVertexArrayObjects[this.CONTEXT_UID];let lt=Q[W];if(lt)return Q[U.id]=lt,lt;const ft=i.buffers,mt=i.attributes,_t={},Pt={};for(const Dt in ft)_t[Dt]=0,Pt[Dt]=0;for(const Dt in mt)!mt[Dt].size&&U.attributeData[Dt]?mt[Dt].size=U.attributeData[Dt].size:mt[Dt].size||console.warn(`PIXI Geometry attribute '${Dt}' size cannot be determined (likely the bound shader does not have the attribute)`),_t[mt[Dt].buffer]+=mt[Dt].size*eo[mt[Dt].type];for(const Dt in mt){const Wt=mt[Dt],Jt=Wt.size;Wt.stride===void 0&&(_t[Wt.buffer]===Jt*eo[Wt.type]?Wt.stride=0:Wt.stride=_t[Wt.buffer]),Wt.start===void 0&&(Wt.start=Pt[Wt.buffer],Pt[Wt.buffer]+=Jt*eo[Wt.type])}lt=f.createVertexArray(),f.bindVertexArray(lt);for(let Dt=0;Dt<ft.length;Dt++){const Wt=ft[Dt];N.bind(Wt),c&&Wt._glBuffers[S].refCount++}return this.activateVao(i,U),Q[U.id]=lt,Q[W]=lt,f.bindVertexArray(null),N.unbind(Y.ARRAY_BUFFER),lt}disposeGeometry(i,l){var U;if(!this.managedGeometries[i.id])return;delete this.managedGeometries[i.id];const c=i.glVertexArrayObjects[this.CONTEXT_UID],f=this.gl,S=i.buffers,N=(U=this.renderer)==null?void 0:U.buffer;if(i.disposeRunner.remove(this),!!c){if(N)for(let W=0;W<S.length;W++){const Q=S[W]._glBuffers[this.CONTEXT_UID];Q&&(Q.refCount--,Q.refCount===0&&!l&&N.dispose(S[W],l))}if(!l){for(const W in c)if(W[0]==="g"){const Q=c[W];this._activeVao===Q&&this.unbind(),f.deleteVertexArray(Q)}}delete i.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(i){const l=Object.keys(this.managedGeometries);for(let c=0;c<l.length;c++)this.disposeGeometry(this.managedGeometries[l[c]],i)}activateVao(i,l){const c=this.gl,f=this.CONTEXT_UID,S=this.renderer.buffer,N=i.buffers,U=i.attributes;i.indexBuffer&&S.bind(i.indexBuffer);let W=null;for(const Q in U){const lt=U[Q],ft=N[lt.buffer],mt=ft._glBuffers[f];if(l.attributeData[Q]){W!==mt&&(S.bind(ft),W=mt);const _t=l.attributeData[Q].location;if(c.enableVertexAttribArray(_t),c.vertexAttribPointer(_t,lt.size,lt.type||c.FLOAT,lt.normalized,lt.stride,lt.start),lt.instance)if(this.hasInstance)c.vertexAttribDivisor(_t,lt.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(i,l,c,f){const{gl:S}=this,N=this._activeGeometry;if(N.indexBuffer){const U=N.indexBuffer.data.BYTES_PER_ELEMENT,W=U===2?S.UNSIGNED_SHORT:S.UNSIGNED_INT;U===2||U===4&&this.canUseUInt32ElementIndex?N.instanced?S.drawElementsInstanced(i,l||N.indexBuffer.data.length,W,(c||0)*U,f||1):S.drawElements(i,l||N.indexBuffer.data.length,W,(c||0)*U):console.warn("unsupported index buffer type: uint32")}else N.instanced?S.drawArraysInstanced(i,c,l||N.getSize(),f||1):S.drawArrays(i,c,l||N.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Xl.extension={type:It.RendererSystem,name:"geometry"},zt.add(Xl);const qo=new Qr;class Wl{constructor(i,l){this._texture=i,this.mapCoord=new Qr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof l>"u"?.5:l,this.isSimple=!1}get texture(){return this._texture}set texture(i){this._texture=i,this._textureID=-1}multiplyUvs(i,l){l===void 0&&(l=i);const c=this.mapCoord;for(let f=0;f<i.length;f+=2){const S=i[f],N=i[f+1];l[f]=S*c.a+N*c.c+c.tx,l[f+1]=S*c.b+N*c.d+c.ty}return l}update(i){const l=this._texture;if(!l||!l.valid||!i&&this._textureID===l._updateID)return!1;this._textureID=l._updateID,this._updateID++;const c=l._uvs;this.mapCoord.set(c.x1-c.x0,c.y1-c.y0,c.x3-c.x0,c.y3-c.y0,c.x0,c.y0);const f=l.orig,S=l.trim;S&&(qo.set(f.width/S.width,0,0,f.height/S.height,-S.x/S.width,-S.y/S.height),this.mapCoord.append(qo));const N=l.baseTexture,U=this.uClampFrame,W=this.clampMargin/N.resolution,Q=this.clampOffset;return U[0]=(l._frame.x+W+Q)/N.width,U[1]=(l._frame.y+W+Q)/N.height,U[2]=(l._frame.x+l._frame.width-W+Q)/N.width,U[3]=(l._frame.y+l._frame.height-W+Q)/N.height,this.uClampOffset[0]=Q/N.realWidth,this.uClampOffset[1]=Q/N.realHeight,this.isSimple=l._frame.width===N.width&&l._frame.height===N.height&&l.rotate===0,!0}}var Wc=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,$l=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class ta extends zr{constructor(i,l,c){let f=null;typeof i!="string"&&l===void 0&&c===void 0&&(f=i,i=void 0,l=void 0,c=void 0),super(i||$l,l||Wc,c),this.maskSprite=f,this.maskMatrix=new Qr}get maskSprite(){return this._maskSprite}set maskSprite(i){this._maskSprite=i,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(i,l,c,f){const S=this._maskSprite,N=S._texture;N.valid&&(N.uvMatrix||(N.uvMatrix=new Wl(N,0)),N.uvMatrix.update(),this.uniforms.npmAlpha=N.baseTexture.alphaMode?0:1,this.uniforms.mask=N,this.uniforms.otherMatrix=i.calculateSpriteMatrix(this.maskMatrix,S).prepend(N.uvMatrix.mapCoord),this.uniforms.alpha=S.worldAlpha,this.uniforms.maskClamp=N.uvMatrix.uClampFrame,i.applyFilter(this,l,c,f))}}class oh{constructor(i=null){this.type=G.NONE,this.autoDetect=!0,this.maskObject=i||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=zr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(i){i?this._filters?this._filters[0]=i:this._filters=[i]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=G.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(i){i?(this._stencilCounter=i._stencilCounter,this._scissorCounter=i._scissorCounter,this._scissorRect=i._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class ah{constructor(i){this.renderer=i,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(i){this.maskStack=i,this.renderer.scissor.setMaskStack(i),this.renderer.stencil.setMaskStack(i)}push(i,l){let c=l;if(!c.isMaskData){const S=this.maskDataPool.pop()||new oh;S.pooled=!0,S.maskObject=l,c=S}const f=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(c.copyCountersOrReset(f),c._colorMask=f?f._colorMask:15,c.autoDetect&&this.detect(c),c._target=i,c.type!==G.SPRITE&&this.maskStack.push(c),c.enabled)switch(c.type){case G.SCISSOR:this.renderer.scissor.push(c);break;case G.STENCIL:this.renderer.stencil.push(c);break;case G.SPRITE:c.copyCountersOrReset(null),this.pushSpriteMask(c);break;case G.COLOR:this.pushColorMask(c);break;default:break}c.type===G.SPRITE&&this.maskStack.push(c)}pop(i){const l=this.maskStack.pop();if(!(!l||l._target!==i)){if(l.enabled)switch(l.type){case G.SCISSOR:this.renderer.scissor.pop(l);break;case G.STENCIL:this.renderer.stencil.pop(l.maskObject);break;case G.SPRITE:this.popSpriteMask(l);break;case G.COLOR:this.popColorMask(l);break;default:break}if(l.reset(),l.pooled&&this.maskDataPool.push(l),this.maskStack.length!==0){const c=this.maskStack[this.maskStack.length-1];c.type===G.SPRITE&&c._filters&&(c._filters[0].maskSprite=c.maskObject)}}}detect(i){const l=i.maskObject;l?l.isSprite?i.type=G.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(i)?i.type=G.SCISSOR:i.type=G.STENCIL:i.type=G.COLOR}pushSpriteMask(i){const{maskObject:l}=i,c=i._target;let f=i._filters;f||(f=this.alphaMaskPool[this.alphaMaskIndex],f||(f=this.alphaMaskPool[this.alphaMaskIndex]=[new ta])),f[0].resolution=i.resolution,f[0].multisample=i.multisample,f[0].maskSprite=l;const S=c.filterArea;c.filterArea=l.getBounds(!0),this.renderer.filter.push(c,f),c.filterArea=S,i._filters||this.alphaMaskIndex++}popSpriteMask(i){this.renderer.filter.pop(),i._filters?i._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(i){const l=i._colorMask,c=i._colorMask=l&i.colorMask;c!==l&&this.renderer.gl.colorMask((c&1)!==0,(c&2)!==0,(c&4)!==0,(c&8)!==0)}popColorMask(i){const l=i._colorMask,c=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;c!==l&&this.renderer.gl.colorMask((c&1)!==0,(c&2)!==0,(c&4)!==0,(c&8)!==0)}destroy(){this.renderer=null}}ah.extension={type:It.RendererSystem,name:"mask"},zt.add(ah);class Ha{constructor(i){this.renderer=i,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(i){const{gl:l}=this.renderer,c=this.getStackLength();this.maskStack=i;const f=this.getStackLength();f!==c&&(f===0?l.disable(this.glConst):(l.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const lh=new Qr,uh=[],hh=class Tf extends Ha{constructor(i){super(i),this.glConst=st.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const i=this.maskStack[this.maskStack.length-1];return i?i._scissorCounter:0}calcScissorRect(i){var U;if(i._scissorRectLocal)return;const l=i._scissorRect,{maskObject:c}=i,{renderer:f}=this,S=f.renderTexture,N=c.getBounds(!0,(U=uh.pop())!=null?U:new Rr);this.roundFrameToPixels(N,S.current?S.current.resolution:f.resolution,S.sourceFrame,S.destinationFrame,f.projection.transform),l&&N.fit(l),i._scissorRectLocal=N}static isMatrixRotated(i){if(!i)return!1;const{a:l,b:c,c:f,d:S}=i;return(Math.abs(c)>1e-4||Math.abs(f)>1e-4)&&(Math.abs(l)>1e-4||Math.abs(S)>1e-4)}testScissor(i){const{maskObject:l}=i;if(!l.isFastRect||!l.isFastRect()||Tf.isMatrixRotated(l.worldTransform)||Tf.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(i);const c=i._scissorRectLocal;return c.width>0&&c.height>0}roundFrameToPixels(i,l,c,f,S){Tf.isMatrixRotated(S)||(S=S?lh.copyFrom(S):lh.identity(),S.translate(-c.x,-c.y).scale(f.width/c.width,f.height/c.height).translate(f.x,f.y),this.renderer.filter.transformAABB(S,i),i.fit(f),i.x=Math.round(i.x*l),i.y=Math.round(i.y*l),i.width=Math.round(i.width*l),i.height=Math.round(i.height*l))}push(i){i._scissorRectLocal||this.calcScissorRect(i);const{gl:l}=this.renderer;i._scissorRect||l.enable(l.SCISSOR_TEST),i._scissorCounter++,i._scissorRect=i._scissorRectLocal,this._useCurrent()}pop(i){const{gl:l}=this.renderer;i&&uh.push(i._scissorRectLocal),this.getStackLength()>0?this._useCurrent():l.disable(l.SCISSOR_TEST)}_useCurrent(){const i=this.maskStack[this.maskStack.length-1]._scissorRect;let l;this.renderer.renderTexture.current?l=i.y:l=this.renderer.height-i.height-i.y,this.renderer.gl.scissor(i.x,l,i.width,i.height)}};hh.extension={type:It.RendererSystem,name:"scissor"};let $c=hh;zt.add($c);class ch extends Ha{constructor(i){super(i),this.glConst=st.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const i=this.maskStack[this.maskStack.length-1];return i?i._stencilCounter:0}push(i){const l=i.maskObject,{gl:c}=this.renderer,f=i._stencilCounter;f===0&&(this.renderer.framebuffer.forceStencil(),c.clearStencil(0),c.clear(c.STENCIL_BUFFER_BIT),c.enable(c.STENCIL_TEST)),i._stencilCounter++;const S=i._colorMask;S!==0&&(i._colorMask=0,c.colorMask(!1,!1,!1,!1)),c.stencilFunc(c.EQUAL,f,4294967295),c.stencilOp(c.KEEP,c.KEEP,c.INCR),l.renderable=!0,l.render(this.renderer),this.renderer.batch.flush(),l.renderable=!1,S!==0&&(i._colorMask=S,c.colorMask((S&1)!==0,(S&2)!==0,(S&4)!==0,(S&8)!==0)),this._useCurrent()}pop(i){const l=this.renderer.gl;if(this.getStackLength()===0)l.disable(l.STENCIL_TEST);else{const c=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,f=c?c._colorMask:15;f!==0&&(c._colorMask=0,l.colorMask(!1,!1,!1,!1)),l.stencilOp(l.KEEP,l.KEEP,l.DECR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,f!==0&&(c._colorMask=f,l.colorMask((f&1)!==0,(f&2)!==0,(f&4)!==0,(f&8)!==0)),this._useCurrent()}}_useCurrent(){const i=this.renderer.gl;i.stencilFunc(i.EQUAL,this.getStackLength(),4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}}ch.extension={type:It.RendererSystem,name:"stencil"},zt.add(ch);class dh{constructor(i){this.renderer=i,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ne("7.0.0","renderer.plugins.extract has moved to renderer.extract"),i.extract}},prepare:{enumerable:!1,get(){return ne("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),i.prepare}},interaction:{enumerable:!1,get(){return ne("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),i.events}}})}init(){const i=this.rendererPlugins;for(const l in i)this.plugins[l]=new i[l](this.renderer)}destroy(){for(const i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null}}dh.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"_plugin"},zt.add(dh);class Bn{constructor(i){this.renderer=i,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Qr,this.transform=null}update(i,l,c,f){this.destinationFrame=i||this.destinationFrame||this.defaultFrame,this.sourceFrame=l||this.sourceFrame||i,this.calculateProjection(this.destinationFrame,this.sourceFrame,c,f),this.transform&&this.projectionMatrix.append(this.transform);const S=this.renderer;S.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,S.globalUniforms.update(),S.shader.shader&&S.shader.syncUniformGroup(S.shader.shader.uniforms.globals)}calculateProjection(i,l,c,f){const S=this.projectionMatrix,N=f?-1:1;S.identity(),S.a=1/l.width*2,S.d=N*(1/l.height*2),S.tx=-1-l.x*S.a,S.ty=-N-l.y*S.d}setTransform(i){}destroy(){this.renderer=null}}Bn.extension={type:It.RendererSystem,name:"projection"},zt.add(Bn);const fh=new Na,Yl=new Rr;class Yc{constructor(i){this.renderer=i,this._tempMatrix=new Qr}generateTexture(i,l){var lt;const Q=l||{},{region:c}=Q,f=ps(Q,["region"]),S=(c==null?void 0:c.copyTo(Yl))||i.getLocalBounds(Yl,!0),N=f.resolution||this.renderer.resolution;S.width=Math.max(S.width,1/N),S.height=Math.max(S.height,1/N),f.width=S.width,f.height=S.height,f.resolution=N,(lt=f.multisample)!=null||(f.multisample=this.renderer.multisample);const U=bo.create(f);this._tempMatrix.tx=-S.x,this._tempMatrix.ty=-S.y;const W=i.transform;return i.transform=fh,this.renderer.render(i,{renderTexture:U,transform:this._tempMatrix,skipUpdateTransform:!!i.parent,blit:!0}),i.transform=W,U}destroy(){}}Yc.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"textureGenerator"},zt.add(Yc);const Ao=new Rr,Ln=new Rr;class Kc{constructor(i){this.renderer=i,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rr,this.destinationFrame=new Rr,this.viewportFrame=new Rr}contextChange(){var l;const i=(l=this.renderer)==null?void 0:l.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(i&&i.alpha&&i.premultipliedAlpha)}bind(i=null,l,c){const f=this.renderer;this.current=i;let S,N,U;i?(S=i.baseTexture,U=S.resolution,l||(Ao.width=i.frame.width,Ao.height=i.frame.height,l=Ao),c||(Ln.x=i.frame.x,Ln.y=i.frame.y,Ln.width=l.width,Ln.height=l.height,c=Ln),N=S.framebuffer):(U=f.resolution,l||(Ao.width=f._view.screen.width,Ao.height=f._view.screen.height,l=Ao),c||(c=Ao,c.width=l.width,c.height=l.height));const W=this.viewportFrame;W.x=c.x*U,W.y=c.y*U,W.width=c.width*U,W.height=c.height*U,i||(W.y=f.view.height-(W.y+W.height)),W.ceil(),this.renderer.framebuffer.bind(N,W),this.renderer.projection.update(c,l,U,!N),i?this.renderer.mask.setMaskStack(S.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(l),this.destinationFrame.copyFrom(c)}clear(i,l){const c=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,f=ur.shared.setValue(i||c);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&f.premultiply(f.alpha);const S=this.destinationFrame,N=this.current?this.current.baseTexture:this.renderer._view.screen,U=S.width!==N.width||S.height!==N.height;if(U){let{x:W,y:Q,width:lt,height:ft}=this.viewportFrame;W=Math.round(W),Q=Math.round(Q),lt=Math.round(lt),ft=Math.round(ft),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(W,Q,lt,ft)}this.renderer.framebuffer.clear(f.red,f.green,f.blue,f.alpha,l),U&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Kc.extension={type:It.RendererSystem,name:"renderTexture"},zt.add(Kc);class Cf{}class Zc{constructor(i,l){this.program=i,this.uniformData=l,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function pi(u,i,l){const c=u.createShader(i);return u.shaderSource(c,l),u.compileShader(c),c}function ja(u){const i=new Array(u);for(let l=0;l<i.length;l++)i[l]=!1;return i}function Xa(u,i){switch(u){case"float":return 0;case"vec2":return new Float32Array(2*i);case"vec3":return new Float32Array(3*i);case"vec4":return new Float32Array(4*i);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*i);case"ivec3":return new Int32Array(3*i);case"ivec4":return new Int32Array(4*i);case"uvec2":return new Uint32Array(2*i);case"uvec3":return new Uint32Array(3*i);case"uvec4":return new Uint32Array(4*i);case"bool":return!1;case"bvec2":return ja(2*i);case"bvec3":return ja(3*i);case"bvec4":return ja(4*i);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function Wa(u,i){const l={},c=i.getProgramParameter(u,i.ACTIVE_ATTRIBUTES);for(let f=0;f<c;f++){const S=i.getActiveAttrib(u,f);if(S.name.startsWith("gl_"))continue;const N=si(i,S.type),U={type:N,name:S.name,size:Qe(N),location:i.getAttribLocation(u,S.name)};l[S.name]=U}return l}function Qc(u,i){const l={},c=i.getProgramParameter(u,i.ACTIVE_UNIFORMS);for(let f=0;f<c;f++){const S=i.getActiveUniform(u,f),N=S.name.replace(/\[.*?\]$/,""),U=!!S.name.match(/\[.*?\]$/),W=si(i,S.type);l[N]={name:N,index:f,type:W,size:S.size,isArray:U,value:Xa(W,S.size)}}return l}function Kl(u,i){const l=u.getShaderSource(i).split(`
`).map((Q,lt)=>`${lt}: ${Q}`),c=u.getShaderInfoLog(i),f=c.split(`
`),S={},N=f.map(Q=>parseFloat(Q.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(Q=>Q&&!S[Q]?(S[Q]=!0,!0):!1),U=[""];N.forEach(Q=>{l[Q-1]=`%c${l[Q-1]}%c`,U.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const W=l.join(`
`);U[0]=W,console.error(c),console.groupCollapsed("click to view full shader code"),console.warn(...U),console.groupEnd()}function $a(u,i,l,c){u.getProgramParameter(i,u.LINK_STATUS)||(u.getShaderParameter(l,u.COMPILE_STATUS)||Kl(u,l),u.getShaderParameter(c,u.COMPILE_STATUS)||Kl(u,c),console.error("PixiJS Error: Could not initialize shader."),u.getProgramInfoLog(i)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",u.getProgramInfoLog(i)))}function Zl(u,i){var U;const l=pi(u,u.VERTEX_SHADER,i.vertexSrc),c=pi(u,u.FRAGMENT_SHADER,i.fragmentSrc),f=u.createProgram();u.attachShader(f,l),u.attachShader(f,c);const S=(U=i.extra)==null?void 0:U.transformFeedbackVaryings;if(S&&(typeof u.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):u.transformFeedbackVaryings(f,S.names,S.bufferMode==="separate"?u.SEPARATE_ATTRIBS:u.INTERLEAVED_ATTRIBS)),u.linkProgram(f),u.getProgramParameter(f,u.LINK_STATUS)||$a(u,f,l,c),i.attributeData=Wa(f,u),i.uniformData=Qc(f,u),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(i.vertexSrc)){const W=Object.keys(i.attributeData);W.sort((Q,lt)=>Q>lt?1:-1);for(let Q=0;Q<W.length;Q++)i.attributeData[W[Q]].location=Q,u.bindAttribLocation(f,Q,W[Q]);u.linkProgram(f)}u.deleteShader(l),u.deleteShader(c);const N={};for(const W in i.uniformData){const Q=i.uniformData[W];N[W]={location:u.getUniformLocation(f,W),value:Xa(Q.type,Q.size)}}return new Zc(f,N)}function ea(u,i,l,c,f){l.buffer.update(f)}const Jc={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},qc={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Pf(u){const i=u.map(S=>({data:S,offset:0,dataLen:0,dirty:0}));let l=0,c=0,f=0;for(let S=0;S<i.length;S++){const N=i[S];if(l=qc[N.data.type],N.data.size>1&&(l=Math.max(l,16)*N.data.size),N.dataLen=l,c%l!==0&&c<16){const U=c%l%16;c+=U,f+=U}c+l>16?(f=Math.ceil(f/16)*16,N.offset=f,f+=l,c=l):(N.offset=f,c+=l,f+=l)}return f=Math.ceil(f/16)*16,{uboElements:i,size:f}}function td(u,i){const l=[];for(const c in u)i[c]&&l.push(i[c]);return l.sort((c,f)=>c.index-f.index),l}function Ql(u,i){if(!u.autoManage)return{size:0,syncFunc:ea};const l=td(u.uniforms,i),{uboElements:c,size:f}=Pf(l),S=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let N=0;N<c.length;N++){const U=c[N],W=u.uniforms[U.data.name],Q=U.data.name;let lt=!1;for(let ft=0;ft<qt.length;ft++){const mt=qt[ft];if(mt.codeUbo&&mt.test(U.data,W)){S.push(`offset = ${U.offset/4};`,qt[ft].codeUbo(U.data.name,W)),lt=!0;break}}if(!lt)if(U.data.size>1){const ft=Qe(U.data.type),mt=Math.max(qc[U.data.type]/16,1),_t=ft/mt,Pt=(4-_t%4)%4;S.push(`
                cv = ud.${Q}.value;
                v = uv.${Q};
                offset = ${U.offset/4};

                t = 0;

                for(var i=0; i < ${U.data.size*mt}; i++)
                {
                    for(var j = 0; j < ${_t}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${Pt};
                }

                `)}else{const ft=Jc[U.data.type];S.push(`
                cv = ud.${Q}.value;
                v = uv.${Q};
                offset = ${U.offset/4};
                ${ft};
                `)}}return S.push(`
       renderer.buffer.update(buffer);
    `),{size:f,syncFunc:new Function("ud","uv","renderer","syncData","buffer",S.join(`
`))}}let ro;function ph(){if(typeof ro=="boolean")return ro;try{ro=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch(u){ro=!1}return ro}let mh=0;const ra={textureCount:0,uboCount:0};class Jl{constructor(i){this.destroyed=!1,this.renderer=i,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=mh++}systemCheck(){if(!ph())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(i){this.gl=i,this.reset()}bind(i,l){i.disposeRunner.add(this),i.uniforms.globals=this.renderer.globalUniforms;const c=i.program,f=c.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(i);return this.shader=i,this.program!==c&&(this.program=c,this.gl.useProgram(f.program)),l||(ra.textureCount=0,ra.uboCount=0,this.syncUniformGroup(i.uniformGroup,ra)),f}setUniforms(i){const l=this.shader.program,c=l.glPrograms[this.renderer.CONTEXT_UID];l.syncUniforms(c.uniformData,i,this.renderer)}syncUniformGroup(i,l){const c=this.getGlProgram();(!i.static||i.dirtyId!==c.uniformDirtyGroups[i.id])&&(c.uniformDirtyGroups[i.id]=i.dirtyId,this.syncUniforms(i,c,l))}syncUniforms(i,l,c){(i.syncUniforms[this.shader.program.id]||this.createSyncGroups(i))(l.uniformData,i.uniforms,this.renderer,c)}createSyncGroups(i){const l=this.getSignature(i,this.shader.program.uniformData,"u");return this.cache[l]||(this.cache[l]=Ie(i,this.shader.program.uniformData)),i.syncUniforms[this.shader.program.id]=this.cache[l],i.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(i,l){const c=this.getGlProgram();if(!i.static||i.dirtyId!==0||!c.uniformGroups[i.id]){i.dirtyId=0;const f=c.uniformGroups[i.id]||this.createSyncBufferGroup(i,c,l);i.buffer.update(),f(c.uniformData,i.uniforms,this.renderer,ra,i.buffer)}this.renderer.buffer.bindBufferBase(i.buffer,c.uniformBufferBindings[l])}createSyncBufferGroup(i,l,c){const{gl:f}=this.renderer;this.renderer.buffer.bind(i.buffer);const S=this.gl.getUniformBlockIndex(l.program,c);l.uniformBufferBindings[c]=this.shader.uniformBindCount,f.uniformBlockBinding(l.program,S,this.shader.uniformBindCount),this.shader.uniformBindCount++;const N=this.getSignature(i,this.shader.program.uniformData,"ubo");let U=this._uboCache[N];if(U||(U=this._uboCache[N]=Ql(i,this.shader.program.uniformData)),i.autoManage){const W=new Float32Array(U.size/4);i.buffer.update(W)}return l.uniformGroups[i.id]=U.syncFunc,l.uniformGroups[i.id]}getSignature(i,l,c){const f=i.uniforms,S=[`${c}-`];for(const N in f)S.push(N),l[N]&&S.push(l[N].type);return S.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(i){const l=this.gl,c=i.program,f=Zl(l,c);return c.glPrograms[this.renderer.CONTEXT_UID]=f,f}reset(){this.program=null,this.shader=null}disposeShader(i){this.shader===i&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Jl.extension={type:It.RendererSystem,name:"shader"},zt.add(Jl);class ql{constructor(i){this.renderer=i}run(i){const{renderer:l}=this;l.runners.init.emit(l.options),i.hello&&console.log(`PixiJS 7.3.2 - ${l.rendererLogId} - https://pixijs.com`),l.resize(l.screen.width,l.screen.height)}destroy(){}}ql.defaultOptions={hello:!1},ql.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"startup"},zt.add(ql);function ed(u,i=[]){return i[M.NORMAL]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.ADD]=[u.ONE,u.ONE],i[M.MULTIPLY]=[u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.SCREEN]=[u.ONE,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.OVERLAY]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.DARKEN]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.LIGHTEN]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.COLOR_DODGE]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.COLOR_BURN]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.HARD_LIGHT]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.SOFT_LIGHT]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.DIFFERENCE]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.EXCLUSION]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.HUE]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.SATURATION]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.COLOR]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.LUMINOSITY]=[u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.NONE]=[0,0],i[M.NORMAL_NPM]=[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.ADD_NPM]=[u.SRC_ALPHA,u.ONE,u.ONE,u.ONE],i[M.SCREEN_NPM]=[u.SRC_ALPHA,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE_MINUS_SRC_ALPHA],i[M.SRC_IN]=[u.DST_ALPHA,u.ZERO],i[M.SRC_OUT]=[u.ONE_MINUS_DST_ALPHA,u.ZERO],i[M.SRC_ATOP]=[u.DST_ALPHA,u.ONE_MINUS_SRC_ALPHA],i[M.DST_OVER]=[u.ONE_MINUS_DST_ALPHA,u.ONE],i[M.DST_IN]=[u.ZERO,u.SRC_ALPHA],i[M.DST_OUT]=[u.ZERO,u.ONE_MINUS_SRC_ALPHA],i[M.DST_ATOP]=[u.ONE_MINUS_DST_ALPHA,u.SRC_ALPHA],i[M.XOR]=[u.ONE_MINUS_DST_ALPHA,u.ONE_MINUS_SRC_ALPHA],i[M.SUBTRACT]=[u.ONE,u.ONE,u.ONE,u.ONE,u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD],i}const Mf=0,Rf=1,gh=2,io=3,rd=4,ia=5,sn=class Ep{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=M.NONE,this._blendEq=!1,this.map=[],this.map[Mf]=this.setBlend,this.map[Rf]=this.setOffset,this.map[gh]=this.setCullFace,this.map[io]=this.setDepthTest,this.map[rd]=this.setFrontFace,this.map[ia]=this.setDepthMask,this.checks=[],this.defaultState=new Ze,this.defaultState.blend=!0}contextChange(i){this.gl=i,this.blendModes=ed(i),this.set(this.defaultState),this.reset()}set(i){if(i=i||this.defaultState,this.stateId!==i.data){let l=this.stateId^i.data,c=0;for(;l;)l&1&&this.map[c].call(this,!!(i.data&1<<c)),l=l>>1,c++;this.stateId=i.data}for(let l=0;l<this.checks.length;l++)this.checks[l](this,i)}forceState(i){i=i||this.defaultState;for(let l=0;l<this.map.length;l++)this.map[l].call(this,!!(i.data&1<<l));for(let l=0;l<this.checks.length;l++)this.checks[l](this,i);this.stateId=i.data}setBlend(i){this.updateCheck(Ep.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)}setOffset(i){this.updateCheck(Ep.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(i){this.gl.depthMask(i)}setCullFace(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])}setBlendMode(i){if(i===this.blendMode)return;this.blendMode=i;const l=this.blendModes[i],c=this.gl;l.length===2?c.blendFunc(l[0],l[1]):c.blendFuncSeparate(l[0],l[1],l[2],l[3]),l.length===6?(this._blendEq=!0,c.blendEquationSeparate(l[4],l[5])):this._blendEq&&(this._blendEq=!1,c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD))}setPolygonOffset(i,l){this.gl.polygonOffset(i,l)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(i,l){const c=this.checks.indexOf(i);l&&c===-1?this.checks.push(i):!l&&c!==-1&&this.checks.splice(c,1)}static checkBlendMode(i,l){i.setBlendMode(l.blendMode)}static checkPolygonOffset(i,l){i.setPolygonOffset(1,l.polygonOffset)}destroy(){this.gl=null}};sn.extension={type:It.RendererSystem,name:"state"};let Ya=sn;zt.add(Ya);class kn extends Gt{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(i){var f;this.addRunners(...i.runners);const l=((f=i.priority)!=null?f:[]).filter(S=>i.systems[S]),c=[...l,...Object.keys(i.systems).filter(S=>!l.includes(S))];for(const S of c)this.addSystem(i.systems[S],S)}addRunners(...i){i.forEach(l=>{this.runners[l]=new Gr(l)})}addSystem(i,l){const c=new i(this);if(this[l])throw new Error(`Whoops! The name "${l}" is already in use`);this[l]=c,this._systemsHash[l]=c;for(const f in this.runners)this.runners[f].add(c);return this}emitWithCustomOptions(i,l){const c=Object.keys(this._systemsHash);i.items.forEach(f=>{const S=c.find(N=>this._systemsHash[N]===f);f[i.name](l[S])})}destroy(){Object.values(this.runners).forEach(i=>{i.destroy()}),this._systemsHash={}}}const wo=class Ef{constructor(i){this.renderer=i,this.count=0,this.checkCount=0,this.maxIdle=Ef.defaultMaxIdle,this.checkCountMax=Ef.defaultCheckCountMax,this.mode=Ef.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==x.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const i=this.renderer.texture,l=i.managedTextures;let c=!1;for(let f=0;f<l.length;f++){const S=l[f];S.resource&&this.count-S.touched>this.maxIdle&&(i.destroyTexture(S,!0),l[f]=null,c=!0)}if(c){let f=0;for(let S=0;S<l.length;S++)l[S]!==null&&(l[f++]=l[S]);l.length=f}}unload(i){const l=this.renderer.texture,c=i._texture;c&&!c.framebuffer&&l.destroyTexture(c);for(let f=i.children.length-1;f>=0;f--)this.unload(i.children[f])}destroy(){this.renderer=null}};wo.defaultMode=x.AUTO,wo.defaultMaxIdle=60*60,wo.defaultCheckCountMax=60*10,wo.extension={type:It.RendererSystem,name:"textureGC"};let Co=wo;zt.add(Co);class yh{constructor(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=p.UNSIGNED_BYTE,this.internalFormat=C.RGBA,this.samplerType=0}}function Po(u){let i;return"WebGL2RenderingContext"in globalThis&&u instanceof globalThis.WebGL2RenderingContext?i={[u.RGB]:v.FLOAT,[u.RGBA]:v.FLOAT,[u.ALPHA]:v.FLOAT,[u.LUMINANCE]:v.FLOAT,[u.LUMINANCE_ALPHA]:v.FLOAT,[u.R8]:v.FLOAT,[u.R8_SNORM]:v.FLOAT,[u.RG8]:v.FLOAT,[u.RG8_SNORM]:v.FLOAT,[u.RGB8]:v.FLOAT,[u.RGB8_SNORM]:v.FLOAT,[u.RGB565]:v.FLOAT,[u.RGBA4]:v.FLOAT,[u.RGB5_A1]:v.FLOAT,[u.RGBA8]:v.FLOAT,[u.RGBA8_SNORM]:v.FLOAT,[u.RGB10_A2]:v.FLOAT,[u.RGB10_A2UI]:v.FLOAT,[u.SRGB8]:v.FLOAT,[u.SRGB8_ALPHA8]:v.FLOAT,[u.R16F]:v.FLOAT,[u.RG16F]:v.FLOAT,[u.RGB16F]:v.FLOAT,[u.RGBA16F]:v.FLOAT,[u.R32F]:v.FLOAT,[u.RG32F]:v.FLOAT,[u.RGB32F]:v.FLOAT,[u.RGBA32F]:v.FLOAT,[u.R11F_G11F_B10F]:v.FLOAT,[u.RGB9_E5]:v.FLOAT,[u.R8I]:v.INT,[u.R8UI]:v.UINT,[u.R16I]:v.INT,[u.R16UI]:v.UINT,[u.R32I]:v.INT,[u.R32UI]:v.UINT,[u.RG8I]:v.INT,[u.RG8UI]:v.UINT,[u.RG16I]:v.INT,[u.RG16UI]:v.UINT,[u.RG32I]:v.INT,[u.RG32UI]:v.UINT,[u.RGB8I]:v.INT,[u.RGB8UI]:v.UINT,[u.RGB16I]:v.INT,[u.RGB16UI]:v.UINT,[u.RGB32I]:v.INT,[u.RGB32UI]:v.UINT,[u.RGBA8I]:v.INT,[u.RGBA8UI]:v.UINT,[u.RGBA16I]:v.INT,[u.RGBA16UI]:v.UINT,[u.RGBA32I]:v.INT,[u.RGBA32UI]:v.UINT,[u.DEPTH_COMPONENT16]:v.FLOAT,[u.DEPTH_COMPONENT24]:v.FLOAT,[u.DEPTH_COMPONENT32F]:v.FLOAT,[u.DEPTH_STENCIL]:v.FLOAT,[u.DEPTH24_STENCIL8]:v.FLOAT,[u.DEPTH32F_STENCIL8]:v.FLOAT}:i={[u.RGB]:v.FLOAT,[u.RGBA]:v.FLOAT,[u.ALPHA]:v.FLOAT,[u.LUMINANCE]:v.FLOAT,[u.LUMINANCE_ALPHA]:v.FLOAT,[u.DEPTH_STENCIL]:v.FLOAT},i}function Ka(u){let i;return"WebGL2RenderingContext"in globalThis&&u instanceof globalThis.WebGL2RenderingContext?i={[p.UNSIGNED_BYTE]:{[C.RGBA]:u.RGBA8,[C.RGB]:u.RGB8,[C.RG]:u.RG8,[C.RED]:u.R8,[C.RGBA_INTEGER]:u.RGBA8UI,[C.RGB_INTEGER]:u.RGB8UI,[C.RG_INTEGER]:u.RG8UI,[C.RED_INTEGER]:u.R8UI,[C.ALPHA]:u.ALPHA,[C.LUMINANCE]:u.LUMINANCE,[C.LUMINANCE_ALPHA]:u.LUMINANCE_ALPHA},[p.BYTE]:{[C.RGBA]:u.RGBA8_SNORM,[C.RGB]:u.RGB8_SNORM,[C.RG]:u.RG8_SNORM,[C.RED]:u.R8_SNORM,[C.RGBA_INTEGER]:u.RGBA8I,[C.RGB_INTEGER]:u.RGB8I,[C.RG_INTEGER]:u.RG8I,[C.RED_INTEGER]:u.R8I},[p.UNSIGNED_SHORT]:{[C.RGBA_INTEGER]:u.RGBA16UI,[C.RGB_INTEGER]:u.RGB16UI,[C.RG_INTEGER]:u.RG16UI,[C.RED_INTEGER]:u.R16UI,[C.DEPTH_COMPONENT]:u.DEPTH_COMPONENT16},[p.SHORT]:{[C.RGBA_INTEGER]:u.RGBA16I,[C.RGB_INTEGER]:u.RGB16I,[C.RG_INTEGER]:u.RG16I,[C.RED_INTEGER]:u.R16I},[p.UNSIGNED_INT]:{[C.RGBA_INTEGER]:u.RGBA32UI,[C.RGB_INTEGER]:u.RGB32UI,[C.RG_INTEGER]:u.RG32UI,[C.RED_INTEGER]:u.R32UI,[C.DEPTH_COMPONENT]:u.DEPTH_COMPONENT24},[p.INT]:{[C.RGBA_INTEGER]:u.RGBA32I,[C.RGB_INTEGER]:u.RGB32I,[C.RG_INTEGER]:u.RG32I,[C.RED_INTEGER]:u.R32I},[p.FLOAT]:{[C.RGBA]:u.RGBA32F,[C.RGB]:u.RGB32F,[C.RG]:u.RG32F,[C.RED]:u.R32F,[C.DEPTH_COMPONENT]:u.DEPTH_COMPONENT32F},[p.HALF_FLOAT]:{[C.RGBA]:u.RGBA16F,[C.RGB]:u.RGB16F,[C.RG]:u.RG16F,[C.RED]:u.R16F},[p.UNSIGNED_SHORT_5_6_5]:{[C.RGB]:u.RGB565},[p.UNSIGNED_SHORT_4_4_4_4]:{[C.RGBA]:u.RGBA4},[p.UNSIGNED_SHORT_5_5_5_1]:{[C.RGBA]:u.RGB5_A1},[p.UNSIGNED_INT_2_10_10_10_REV]:{[C.RGBA]:u.RGB10_A2,[C.RGBA_INTEGER]:u.RGB10_A2UI},[p.UNSIGNED_INT_10F_11F_11F_REV]:{[C.RGB]:u.R11F_G11F_B10F},[p.UNSIGNED_INT_5_9_9_9_REV]:{[C.RGB]:u.RGB9_E5},[p.UNSIGNED_INT_24_8]:{[C.DEPTH_STENCIL]:u.DEPTH24_STENCIL8},[p.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[C.DEPTH_STENCIL]:u.DEPTH32F_STENCIL8}}:i={[p.UNSIGNED_BYTE]:{[C.RGBA]:u.RGBA,[C.RGB]:u.RGB,[C.ALPHA]:u.ALPHA,[C.LUMINANCE]:u.LUMINANCE,[C.LUMINANCE_ALPHA]:u.LUMINANCE_ALPHA},[p.UNSIGNED_SHORT_5_6_5]:{[C.RGB]:u.RGB},[p.UNSIGNED_SHORT_4_4_4_4]:{[C.RGBA]:u.RGBA},[p.UNSIGNED_SHORT_5_5_5_1]:{[C.RGBA]:u.RGBA}},i}class Mo{constructor(i){this.renderer=i,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Cr,this.hasIntegerTextures=!1}contextChange(){const i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Ka(i),this.samplerTypes=Po(i);const l=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=l;for(let f=0;f<l;f++)this.boundTextures[f]=null;this.emptyTextures={};const c=new yh(i.createTexture());i.bindTexture(i.TEXTURE_2D,c.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[i.TEXTURE_2D]=c,this.emptyTextures[i.TEXTURE_CUBE_MAP]=new yh(i.createTexture()),i.bindTexture(i.TEXTURE_CUBE_MAP,this.emptyTextures[i.TEXTURE_CUBE_MAP].texture);for(let f=0;f<6;f++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null);i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR);for(let f=0;f<this.boundTextures.length;f++)this.bind(null,f)}bind(i,l=0){const{gl:c}=this;if(i=i==null?void 0:i.castToBaseTexture(),(i==null?void 0:i.valid)&&!i.parentTextureArray){i.touched=this.renderer.textureGC.count;const f=i._glTextures[this.CONTEXT_UID]||this.initTexture(i);this.boundTextures[l]!==i&&(this.currentLocation!==l&&(this.currentLocation=l,c.activeTexture(c.TEXTURE0+l)),c.bindTexture(i.target,f.texture)),f.dirtyId!==i.dirtyId?(this.currentLocation!==l&&(this.currentLocation=l,c.activeTexture(c.TEXTURE0+l)),this.updateTexture(i)):f.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(i),this.boundTextures[l]=i}else this.currentLocation!==l&&(this.currentLocation=l,c.activeTexture(c.TEXTURE0+l)),c.bindTexture(c.TEXTURE_2D,this.emptyTextures[c.TEXTURE_2D].texture),this.boundTextures[l]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let i=0;i<this.boundTextures.length;i++)this.boundTextures[i]=this.unknownTexture}unbind(i){const{gl:l,boundTextures:c}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let f=0;f<c.length;f++)c[f]===this.unknownTexture&&this.bind(null,f)}for(let f=0;f<c.length;f++)c[f]===i&&(this.currentLocation!==f&&(l.activeTexture(l.TEXTURE0+f),this.currentLocation=f),l.bindTexture(i.target,this.emptyTextures[i.target].texture),c[f]=null)}ensureSamplerType(i){const{boundTextures:l,hasIntegerTextures:c,CONTEXT_UID:f}=this;if(c)for(let S=i-1;S>=0;--S){const N=l[S];N&&N._glTextures[f].samplerType!==v.FLOAT&&this.renderer.texture.unbind(N)}}initTexture(i){const l=new yh(this.gl.createTexture());return l.dirtyId=-1,i._glTextures[this.CONTEXT_UID]=l,this.managedTextures.push(i),i.on("dispose",this.destroyTexture,this),l}initTextureType(i,l){var c,f,S;l.internalFormat=(f=(c=this.internalFormats[i.type])==null?void 0:c[i.format])!=null?f:i.format,l.samplerType=(S=this.samplerTypes[l.internalFormat])!=null?S:v.FLOAT,this.webGLVersion===2&&i.type===p.HALF_FLOAT?l.type=this.gl.HALF_FLOAT:l.type=i.type}updateTexture(i){var f;const l=i._glTextures[this.CONTEXT_UID];if(!l)return;const c=this.renderer;if(this.initTextureType(i,l),(f=i.resource)==null?void 0:f.upload(c,i,l))l.samplerType!==v.FLOAT&&(this.hasIntegerTextures=!0);else{const S=i.realWidth,N=i.realHeight,U=c.gl;(l.width!==S||l.height!==N||l.dirtyId<0)&&(l.width=S,l.height=N,U.texImage2D(i.target,0,l.internalFormat,S,N,0,i.format,l.type,null))}i.dirtyStyleId!==l.dirtyStyleId&&this.updateTextureStyle(i),l.dirtyId=i.dirtyId}destroyTexture(i,l){const{gl:c}=this;if(i=i.castToBaseTexture(),i._glTextures[this.CONTEXT_UID]&&(this.unbind(i),c.deleteTexture(i._glTextures[this.CONTEXT_UID].texture),i.off("dispose",this.destroyTexture,this),delete i._glTextures[this.CONTEXT_UID],!l)){const f=this.managedTextures.indexOf(i);f!==-1&&Qs(this.managedTextures,f,1)}}updateTextureStyle(i){var c;const l=i._glTextures[this.CONTEXT_UID];l&&((i.mipmap===_.POW2||this.webGLVersion!==2)&&!i.isPowerOfTwo?l.mipmap=!1:l.mipmap=i.mipmap>=1,this.webGLVersion!==2&&!i.isPowerOfTwo?l.wrapMode=T.CLAMP:l.wrapMode=i.wrapMode,(c=i.resource)!=null&&c.style(this.renderer,i,l)||this.setStyle(i,l),l.dirtyStyleId=i.dirtyStyleId)}setStyle(i,l){const c=this.gl;if(l.mipmap&&i.mipmap!==_.ON_MANUAL&&c.generateMipmap(i.target),c.texParameteri(i.target,c.TEXTURE_WRAP_S,l.wrapMode),c.texParameteri(i.target,c.TEXTURE_WRAP_T,l.wrapMode),l.mipmap){c.texParameteri(i.target,c.TEXTURE_MIN_FILTER,i.scaleMode===y.LINEAR?c.LINEAR_MIPMAP_LINEAR:c.NEAREST_MIPMAP_NEAREST);const f=this.renderer.context.extensions.anisotropicFiltering;if(f&&i.anisotropicLevel>0&&i.scaleMode===y.LINEAR){const S=Math.min(i.anisotropicLevel,c.getParameter(f.MAX_TEXTURE_MAX_ANISOTROPY_EXT));c.texParameterf(i.target,f.TEXTURE_MAX_ANISOTROPY_EXT,S)}}else c.texParameteri(i.target,c.TEXTURE_MIN_FILTER,i.scaleMode===y.LINEAR?c.LINEAR:c.NEAREST);c.texParameteri(i.target,c.TEXTURE_MAG_FILTER,i.scaleMode===y.LINEAR?c.LINEAR:c.NEAREST)}destroy(){this.renderer=null}}Mo.extension={type:It.RendererSystem,name:"texture"},zt.add(Mo);class Za{constructor(i){this.renderer=i}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(i){const{gl:l,CONTEXT_UID:c}=this,f=i._glTransformFeedbacks[c]||this.createGLTransformFeedback(i);l.bindTransformFeedback(l.TRANSFORM_FEEDBACK,f)}unbind(){const{gl:i}=this;i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(i,l){const{gl:c,renderer:f}=this;l&&f.shader.bind(l),c.beginTransformFeedback(i)}endTransformFeedback(){const{gl:i}=this;i.endTransformFeedback()}createGLTransformFeedback(i){const{gl:l,renderer:c,CONTEXT_UID:f}=this,S=l.createTransformFeedback();i._glTransformFeedbacks[f]=S,l.bindTransformFeedback(l.TRANSFORM_FEEDBACK,S);for(let N=0;N<i.buffers.length;N++){const U=i.buffers[N];U&&(c.buffer.update(U),U._glBuffers[f].refCount++,l.bindBufferBase(l.TRANSFORM_FEEDBACK_BUFFER,N,U._glBuffers[f].buffer||null))}return l.bindTransformFeedback(l.TRANSFORM_FEEDBACK,null),i.disposeRunner.add(this),S}disposeTransformFeedback(i,l){const c=i._glTransformFeedbacks[this.CONTEXT_UID],f=this.gl;i.disposeRunner.remove(this);const S=this.renderer.buffer;if(S)for(let N=0;N<i.buffers.length;N++){const U=i.buffers[N];if(!U)continue;const W=U._glBuffers[this.CONTEXT_UID];W&&(W.refCount--,W.refCount===0&&!l&&S.dispose(U,l))}c&&(l||f.deleteTransformFeedback(c),delete i._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Za.extension={type:It.RendererSystem,name:"transformFeedback"},zt.add(Za);class sa{constructor(i){this.renderer=i}init(i){this.screen=new Rr(0,0,i.width,i.height),this.element=i.view||st.ADAPTER.createCanvas(),this.resolution=i.resolution||st.RESOLUTION,this.autoDensity=!!i.autoDensity}resizeView(i,l){this.element.width=Math.round(i*this.resolution),this.element.height=Math.round(l*this.resolution);const c=this.element.width/this.resolution,f=this.element.height/this.resolution;this.screen.width=c,this.screen.height=f,this.autoDensity&&(this.element.style.width=`${c}px`,this.element.style.height=`${f}px`),this.renderer.emit("resize",c,f),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(i){var l;i&&((l=this.element.parentNode)==null||l.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}sa.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},sa.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"_view"},zt.add(sa),st.PREFER_ENV=w.WEBGL2,st.STRICT_TEXTURE_CACHE=!1,st.RENDER_OPTIONS=He(He(He(He({},Ga.defaultOptions),Gl.defaultOptions),sa.defaultOptions),ql.defaultOptions),Object.defineProperties(st,{WRAP_MODE:{get(){return Cr.defaultOptions.wrapMode},set(u){ne("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Cr.defaultOptions.wrapMode=u}},SCALE_MODE:{get(){return Cr.defaultOptions.scaleMode},set(u){ne("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Cr.defaultOptions.scaleMode=u}},MIPMAP_TEXTURES:{get(){return Cr.defaultOptions.mipmap},set(u){ne("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Cr.defaultOptions.mipmap=u}},ANISOTROPIC_LEVEL:{get(){return Cr.defaultOptions.anisotropicLevel},set(u){ne("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Cr.defaultOptions.anisotropicLevel=u}},FILTER_RESOLUTION:{get(){return ne("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),zr.defaultResolution},set(u){zr.defaultResolution=u}},FILTER_MULTISAMPLE:{get(){return ne("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),zr.defaultMultisample},set(u){zr.defaultMultisample=u}},SPRITE_MAX_TEXTURES:{get(){return Eo.defaultMaxTextures},set(u){ne("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Eo.defaultMaxTextures=u}},SPRITE_BATCH_SIZE:{get(){return Eo.defaultBatchSize},set(u){ne("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Eo.defaultBatchSize=u}},CAN_UPLOAD_SAME_BUFFER:{get(){return Eo.canUploadSameBuffer},set(u){ne("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Eo.canUploadSameBuffer=u}},GC_MODE:{get(){return Co.defaultMode},set(u){ne("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Co.defaultMode=u}},GC_MAX_IDLE:{get(){return Co.defaultMaxIdle},set(u){ne("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Co.defaultMaxIdle=u}},GC_MAX_CHECK_COUNT:{get(){return Co.defaultCheckCountMax},set(u){ne("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Co.defaultCheckCountMax=u}},PRECISION_VERTEX:{get(){return en.defaultVertexPrecision},set(u){ne("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),en.defaultVertexPrecision=u}},PRECISION_FRAGMENT:{get(){return en.defaultFragmentPrecision},set(u){ne("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),en.defaultFragmentPrecision=u}}});var js=(u=>(u[u.INTERACTION=50]="INTERACTION",u[u.HIGH=25]="HIGH",u[u.NORMAL=0]="NORMAL",u[u.LOW=-25]="LOW",u[u.UTILITY=-50]="UTILITY",u))(js||{});class xn{constructor(i,l=null,c=0,f=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=i,this.context=l,this.priority=c,this.once=f}match(i,l=null){return this.fn===i&&this.context===l}emit(i){this.fn&&(this.context?this.fn.call(this.context,i):this.fn(i));const l=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),l}connect(i){this.previous=i,i.next&&(i.next.previous=this),this.next=i.next,i.next=this}destroy(i=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const l=this.next;return this.next=i?null:l,this.previous=null,l}}const mi=class pn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new xn(null,null,1/0),this.deltaMS=1/pn.targetFPMS,this.elapsedMS=1/pn.targetFPMS,this._tick=i=>{this._requestId=null,this.started&&(this.update(i),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(i,l,c=js.NORMAL){return this._addListener(new xn(i,l,c))}addOnce(i,l,c=js.NORMAL){return this._addListener(new xn(i,l,c,!0))}_addListener(i){let l=this._head.next,c=this._head;if(!l)i.connect(c);else{for(;l;){if(i.priority>l.priority){i.connect(c);break}c=l,l=l.next}i.previous||i.connect(c)}return this._startIfPossible(),this}remove(i,l){let c=this._head.next;for(;c;)c.match(i,l)?c=c.destroy():c=c.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let i=0,l=this._head;for(;l=l.next;)i++;return i}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let i=this._head.next;for(;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}}update(i=performance.now()){let l;if(i>this.lastTime){if(l=this.elapsedMS=i-this.lastTime,l>this._maxElapsedMS&&(l=this._maxElapsedMS),l*=this.speed,this._minElapsedMS){const S=i-this._lastFrame|0;if(S<this._minElapsedMS)return;this._lastFrame=i-S%this._minElapsedMS}this.deltaMS=l,this.deltaTime=this.deltaMS*pn.targetFPMS;const c=this._head;let f=c.next;for(;f;)f=f.emit(this.deltaTime);c.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(i){const l=Math.min(this.maxFPS,i),c=Math.min(Math.max(0,l)/1e3,pn.targetFPMS);this._maxElapsedMS=1/c}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(i){if(i===0)this._minElapsedMS=0;else{const l=Math.max(this.minFPS,i);this._minElapsedMS=1/(l/1e3)}}static get shared(){if(!pn._shared){const i=pn._shared=new pn;i.autoStart=!0,i._protected=!0}return pn._shared}static get system(){if(!pn._system){const i=pn._system=new pn;i.autoStart=!0,i._protected=!0}return pn._system}};mi.targetFPMS=.06;let jr=mi;Object.defineProperties(st,{TARGET_FPMS:{get(){return jr.targetFPMS},set(u){ne("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),jr.targetFPMS=u}}});class Un{static init(i){i=Object.assign({autoStart:!0,sharedTicker:!1},i),Object.defineProperty(this,"ticker",{set(l){this._ticker&&this._ticker.remove(this.render,this),this._ticker=l,l&&l.add(this.render,this,js.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=i.sharedTicker?jr.shared:new jr,i.autoStart&&this.start()}static destroy(){if(this._ticker){const i=this._ticker;this.ticker=null,i.destroy()}}}Un.extension=It.Application,zt.add(Un);const Zi=[];zt.handleByList(It.Renderer,Zi);function bs(u){for(const i of Zi)if(i.test(u))return new i(u);throw new Error("Unable to auto-detect a suitable renderer.")}var Ro=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,na=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const As=Ro,Qa=na;class vh{constructor(i){this.renderer=i}contextChange(i){let l;if(this.renderer.context.webGLVersion===1){const c=i.getParameter(i.FRAMEBUFFER_BINDING);i.bindFramebuffer(i.FRAMEBUFFER,null),l=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.FRAMEBUFFER,c)}else{const c=i.getParameter(i.DRAW_FRAMEBUFFER_BINDING);i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),l=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,c)}l>=X.HIGH?this.multisample=X.HIGH:l>=X.MEDIUM?this.multisample=X.MEDIUM:l>=X.LOW?this.multisample=X.LOW:this.multisample=X.NONE}destroy(){}}vh.extension={type:It.RendererSystem,name:"_multisample"},zt.add(vh);class id{constructor(i){this.buffer=i||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Ja{constructor(i){this.renderer=i,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(i){const{gl:l,CONTEXT_UID:c}=this,f=i._glBuffers[c]||this.createGLBuffer(i);l.bindBuffer(i.type,f.buffer)}unbind(i){const{gl:l}=this;l.bindBuffer(i,null)}bindBufferBase(i,l){const{gl:c,CONTEXT_UID:f}=this;if(this.boundBufferBases[l]!==i){const S=i._glBuffers[f]||this.createGLBuffer(i);this.boundBufferBases[l]=i,c.bindBufferBase(c.UNIFORM_BUFFER,l,S.buffer)}}bindBufferRange(i,l,c){const{gl:f,CONTEXT_UID:S}=this;c=c||0;const N=i._glBuffers[S]||this.createGLBuffer(i);f.bindBufferRange(f.UNIFORM_BUFFER,l||0,N.buffer,c*256,256)}update(i){const{gl:l,CONTEXT_UID:c}=this,f=i._glBuffers[c]||this.createGLBuffer(i);if(i._updateID!==f.updateID)if(f.updateID=i._updateID,l.bindBuffer(i.type,f.buffer),f.byteLength>=i.data.byteLength)l.bufferSubData(i.type,0,i.data);else{const S=i.static?l.STATIC_DRAW:l.DYNAMIC_DRAW;f.byteLength=i.data.byteLength,l.bufferData(i.type,i.data,S)}}dispose(i,l){if(!this.managedBuffers[i.id])return;delete this.managedBuffers[i.id];const c=i._glBuffers[this.CONTEXT_UID],f=this.gl;i.disposeRunner.remove(this),c&&(l||f.deleteBuffer(c.buffer),delete i._glBuffers[this.CONTEXT_UID])}disposeAll(i){const l=Object.keys(this.managedBuffers);for(let c=0;c<l.length;c++)this.dispose(this.managedBuffers[l[c]],i)}createGLBuffer(i){const{CONTEXT_UID:l,gl:c}=this;return i._glBuffers[l]=new id(c.createBuffer()),this.managedBuffers[i.id]=i,i.disposeRunner.add(this),i._glBuffers[l]}}Ja.extension={type:It.RendererSystem,name:"buffer"},zt.add(Ja);class _h{constructor(i){this.renderer=i}render(i,l){const c=this.renderer;let f,S,N,U;if(l&&(f=l.renderTexture,S=l.clear,N=l.transform,U=l.skipUpdateTransform),this.renderingToScreen=!f,c.runners.prerender.emit(),c.emit("prerender"),c.projection.transform=N,!c.context.isLost){if(f||(this.lastObjectRendered=i),!U){const W=i.enableTempParent();i.updateTransform(),i.disableTempParent(W)}c.renderTexture.bind(f),c.batch.currentRenderer.start(),(S!=null?S:c.background.clearBeforeRender)&&c.renderTexture.clear(),i.render(c),c.batch.currentRenderer.flush(),f&&(l.blit&&c.framebuffer.blit(),f.baseTexture.update()),c.runners.postrender.emit(),c.projection.transform=null,c.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}_h.extension={type:It.RendererSystem,name:"objectRenderer"},zt.add(_h);const Xs=class Sp extends kn{constructor(i){super(),this.type=b.WEBGL,i=Object.assign({},st.RENDER_OPTIONS,i),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new us({projectionMatrix:new Qr},!0);const l={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Sp.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(l),"useContextAlpha"in i&&(ne("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),i.premultipliedAlpha=i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",i.backgroundAlpha=i.useContextAlpha===!1?1:i.backgroundAlpha),this._plugin.rendererPlugins=Sp.__plugins,this.options=i,this.startup.run(this.options)}static test(i){return i!=null&&i.forceCanvas?!1:Fe()}render(i,l){this.objectRenderer.render(i,l)}resize(i,l){this._view.resizeView(i,l)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(i=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:i}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(i){this._view.resolution=i,this.runners.resolutionChange.emit(i)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ne("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ne("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ne("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ne("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(i){ne("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=i}get backgroundAlpha(){return ne("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(i){ne("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=i}get powerPreference(){return ne("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(i,l){return this.textureGenerator.generateTexture(i,l)}};Xs.extension={type:It.Renderer,priority:1},Xs.__plugins={},Xs.__systems={};let oa=Xs;zt.handleByMap(It.RendererPlugin,oa.__plugins),zt.handleByMap(It.RendererSystem,oa.__systems),zt.add(oa);class tu extends Tr{constructor(i,l){const{width:c,height:f}=l||{};super(c,f),this.items=[],this.itemDirtyIds=[];for(let S=0;S<i;S++){const N=new Cr;this.items.push(N),this.itemDirtyIds.push(-2)}this.length=i,this._load=null,this.baseTexture=null}initFromArray(i,l){for(let c=0;c<this.length;c++)i[c]&&(i[c].castToBaseTexture?this.addBaseTextureAt(i[c].castToBaseTexture(),c):i[c]instanceof Tr?this.addResourceAt(i[c],c):this.addResourceAt(Pe(i[c],l),c))}dispose(){for(let i=0,l=this.length;i<l;i++)this.items[i].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(i,l){if(!this.items[l])throw new Error(`Index ${l} is out of bounds`);return i.valid&&!this.valid&&this.resize(i.width,i.height),this.items[l].setResource(i),this}bind(i){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(i);for(let l=0;l<this.length;l++)this.items[l].parentTextureArray=i,this.items[l].on("update",i.update,i)}unbind(i){super.unbind(i);for(let l=0;l<this.length;l++)this.items[l].parentTextureArray=null,this.items[l].off("update",i.update,i)}load(){if(this._load)return this._load;const i=this.items.map(l=>l.resource).filter(l=>l).map(l=>l.load());return this._load=Promise.all(i).then(()=>{const{realWidth:l,realHeight:c}=this.items[0];return this.resize(l,c),this.update(),Promise.resolve(this)}),this._load}}class sd extends tu{constructor(i,l){const{width:c,height:f}=l||{};let S,N;Array.isArray(i)?(S=i,N=i.length):N=i,super(N,{width:c,height:f}),S&&this.initFromArray(S,l)}addBaseTextureAt(i,l){if(i.resource)this.addResourceAt(i.resource,l);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(i){super.bind(i),i.target=m.TEXTURE_2D_ARRAY}upload(i,l,c){const{length:f,itemDirtyIds:S,items:N}=this,{gl:U}=i;c.dirtyId<0&&U.texImage3D(U.TEXTURE_2D_ARRAY,0,c.internalFormat,this._width,this._height,f,0,l.format,c.type,null);for(let W=0;W<f;W++){const Q=N[W];S[W]<Q.dirtyId&&(S[W]=Q.dirtyId,Q.valid&&U.texSubImage3D(U.TEXTURE_2D_ARRAY,0,0,0,W,Q.resource.width,Q.resource.height,1,l.format,c.type,Q.resource.source))}return!0}}class If extends Dn{constructor(i){super(i)}static test(i){const{OffscreenCanvas:l}=globalThis;return l&&i instanceof l?!0:globalThis.HTMLCanvasElement&&i instanceof HTMLCanvasElement}}const Gn=class Ic extends tu{constructor(i,l){const{width:c,height:f,autoLoad:S,linkBaseTexture:N}=l||{};if(i&&i.length!==Ic.SIDES)throw new Error(`Invalid length. Got ${i.length}, expected 6`);super(6,{width:c,height:f});for(let U=0;U<Ic.SIDES;U++)this.items[U].target=m.TEXTURE_CUBE_MAP_POSITIVE_X+U;this.linkBaseTexture=N!==!1,i&&this.initFromArray(i,l),S!==!1&&this.load()}bind(i){super.bind(i),i.target=m.TEXTURE_CUBE_MAP}addBaseTextureAt(i,l,c){if(c===void 0&&(c=this.linkBaseTexture),!this.items[l])throw new Error(`Index ${l} is out of bounds`);if(!this.linkBaseTexture||i.parentTextureArray||Object.keys(i._glTextures).length>0)if(i.resource)this.addResourceAt(i.resource,l);else throw new Error("CubeResource does not support copying of renderTexture.");else i.target=m.TEXTURE_CUBE_MAP_POSITIVE_X+l,i.parentTextureArray=this.baseTexture,this.items[l]=i;return i.valid&&!this.valid&&this.resize(i.realWidth,i.realHeight),this.items[l]=i,this}upload(i,l,c){const f=this.itemDirtyIds;for(let S=0;S<Ic.SIDES;S++){const N=this.items[S];(f[S]<N.dirtyId||c.dirtyId<l.dirtyId)&&(N.valid&&N.resource?(N.resource.upload(i,N,c),f[S]=N.dirtyId):f[S]<-1&&(i.gl.texImage2D(N.target,0,c.internalFormat,l.realWidth,l.realHeight,0,l.format,c.type,null),f[S]=-1))}return!0}static test(i){return Array.isArray(i)&&i.length===Ic.SIDES}};Gn.SIDES=6;let aa=Gn;class nn extends Dn{constructor(i,l){var N,U;l=l||{};let c,f,S;typeof i=="string"?(c=nn.EMPTY,f=i,S=!0):(c=i,f=null,S=!1),super(c),this.url=f,this.crossOrigin=(N=l.crossOrigin)!=null?N:!0,this.alphaMode=typeof l.alphaMode=="number"?l.alphaMode:null,this.ownsImageBitmap=(U=l.ownsImageBitmap)!=null?U:S,this._load=null,l.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise((i,l)=>he(this,null,function*(){if(this.url===null){i(this);return}try{const c=yield st.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const f=yield c.blob();if(this.destroyed)return;const S=yield createImageBitmap(f,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===A.UNPACK?"premultiply":"none"});if(this.destroyed){S.close();return}this.source=S,this.update(),i(this)}catch(c){if(this.destroyed)return;l(c),this.onError.emit(c)}})),this._load)}upload(i,l,c){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(l.alphaMode=this.alphaMode),super.upload(i,l,c)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(i){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof i=="string"||i instanceof ImageBitmap)}static get EMPTY(){var i;return nn._EMPTY=(i=nn._EMPTY)!=null?i:st.ADAPTER.createCanvas(0,0),nn._EMPTY}}const la=class Sf extends Dn{constructor(i,l){l=l||{},super(st.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=i,this.scale=l.scale||1,this._overrideWidth=l.width,this._overrideHeight=l.height,this._resolve=null,this._crossorigin=l.crossorigin,this._load=null,l.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(i=>{if(this._resolve=()=>{this.update(),i(this)},Sf.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const i=new Image;Dn.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=l=>{this._resolve&&(i.onerror=null,this.onError.emit(l))},i.onload=()=>{if(!this._resolve)return;const l=i.width,c=i.height;if(!l||!c)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let f=l*this.scale,S=c*this.scale;(this._overrideWidth||this._overrideHeight)&&(f=this._overrideWidth||this._overrideHeight/c*l,S=this._overrideHeight||this._overrideWidth/l*c),f=Math.round(f),S=Math.round(S);const N=this.source;N.width=f,N.height=S,N._pixiId=`canvas_${Os()}`,N.getContext("2d").drawImage(i,0,0,l,c,0,0,f,S),this._resolve(),this._resolve=null}}static getSize(i){const l=Sf.SVG_SIZE.exec(i),c={};return l&&(c[l[1]]=Math.round(parseFloat(l[3])),c[l[5]]=Math.round(parseFloat(l[7]))),c}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(i,l){return l==="svg"||typeof i=="string"&&i.startsWith("data:image/svg+xml")||typeof i=="string"&&Sf.SVG_XML.test(i)}};la.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,la.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let ua=la;const ws=class bp extends Dn{constructor(i,l){if(l=l||{},!(i instanceof HTMLVideoElement)){const c=document.createElement("video");l.autoLoad!==!1&&c.setAttribute("preload","auto"),l.playsinline!==!1&&(c.setAttribute("webkit-playsinline",""),c.setAttribute("playsinline","")),l.muted===!0&&(c.setAttribute("muted",""),c.muted=!0),l.loop===!0&&c.setAttribute("loop",""),l.autoPlay!==!1&&c.setAttribute("autoplay",""),typeof i=="string"&&(i=[i]);const f=i[0].src||i[0];Dn.crossOrigin(c,f,l.crossorigin);for(let S=0;S<i.length;++S){const N=document.createElement("source");let{src:U,mime:W}=i[S];if(U=U||i[S],U.startsWith("data:"))W=U.slice(5,U.indexOf(";"));else if(!U.startsWith("blob:")){const Q=U.split("?").shift().toLowerCase(),lt=Q.slice(Q.lastIndexOf(".")+1);W=W||bp.MIME_TYPES[lt]||`video/${lt}`}N.src=U,W&&(N.type=W),c.appendChild(N)}i=c}super(i),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=l.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=l.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),l.autoLoad!==!1&&this.load()}update(i=0){if(!this.destroyed){if(this._updateFPS){const l=jr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-l)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart),i.addEventListener("pause",this._onPlayStop),i.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise((l,c)=>{this.valid?l(this):(this._resolve=l,this._reject=c,i.load())}),this._load}_onError(i){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(i),this._reject&&(this._reject(i),this._reject=null,this._resolve=null)}_isSourcePlaying(){const i=this.source;return!i.paused&&!i.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const i=this.source;i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay);const l=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!l&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&i.play()}dispose(){this._configureAutoUpdate();const i=this.source;i&&(i.removeEventListener("play",this._onPlayStart),i.removeEventListener("pause",this._onPlayStop),i.removeEventListener("seeked",this._onSeeked),i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay),i.removeEventListener("error",this._onError,!0),i.pause(),i.src="",i.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(i){i!==this._autoUpdate&&(this._autoUpdate=i,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(i){i!==this._updateFPS&&(this._updateFPS=i,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(jr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(jr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(jr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(i,l){return globalThis.HTMLVideoElement&&i instanceof HTMLVideoElement||bp.TYPES.includes(l)}};ws.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ws.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ds=ws;Ge.push(nn,ih,If,Ds,ua,gn,aa,sd);class ha{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Runner("disposeTransformFeedback")}bindBuffer(i,l){this.buffers[i]=l}destroy(){this.disposeRunner.emit(this,!1)}}const so="7.3.2";class Ws{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(i){return this.minX>this.maxX||this.minY>this.maxY?Rr.EMPTY:(i=i||new Rr(0,0,1,1),i.x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)}addPoint(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)}addPointMatrix(i,l){const{a:c,b:f,c:S,d:N,tx:U,ty:W}=i,Q=c*l.x+S*l.y+U,lt=f*l.x+N*l.y+W;this.minX=Math.min(this.minX,Q),this.maxX=Math.max(this.maxX,Q),this.minY=Math.min(this.minY,lt),this.maxY=Math.max(this.maxY,lt)}addQuad(i){let l=this.minX,c=this.minY,f=this.maxX,S=this.maxY,N=i[0],U=i[1];l=N<l?N:l,c=U<c?U:c,f=N>f?N:f,S=U>S?U:S,N=i[2],U=i[3],l=N<l?N:l,c=U<c?U:c,f=N>f?N:f,S=U>S?U:S,N=i[4],U=i[5],l=N<l?N:l,c=U<c?U:c,f=N>f?N:f,S=U>S?U:S,N=i[6],U=i[7],l=N<l?N:l,c=U<c?U:c,f=N>f?N:f,S=U>S?U:S,this.minX=l,this.minY=c,this.maxX=f,this.maxY=S}addFrame(i,l,c,f,S){this.addFrameMatrix(i.worldTransform,l,c,f,S)}addFrameMatrix(i,l,c,f,S){const N=i.a,U=i.b,W=i.c,Q=i.d,lt=i.tx,ft=i.ty;let mt=this.minX,_t=this.minY,Pt=this.maxX,Dt=this.maxY,Wt=N*l+W*c+lt,Jt=U*l+Q*c+ft;mt=Wt<mt?Wt:mt,_t=Jt<_t?Jt:_t,Pt=Wt>Pt?Wt:Pt,Dt=Jt>Dt?Jt:Dt,Wt=N*f+W*c+lt,Jt=U*f+Q*c+ft,mt=Wt<mt?Wt:mt,_t=Jt<_t?Jt:_t,Pt=Wt>Pt?Wt:Pt,Dt=Jt>Dt?Jt:Dt,Wt=N*l+W*S+lt,Jt=U*l+Q*S+ft,mt=Wt<mt?Wt:mt,_t=Jt<_t?Jt:_t,Pt=Wt>Pt?Wt:Pt,Dt=Jt>Dt?Jt:Dt,Wt=N*f+W*S+lt,Jt=U*f+Q*S+ft,mt=Wt<mt?Wt:mt,_t=Jt<_t?Jt:_t,Pt=Wt>Pt?Wt:Pt,Dt=Jt>Dt?Jt:Dt,this.minX=mt,this.minY=_t,this.maxX=Pt,this.maxY=Dt}addVertexData(i,l,c){let f=this.minX,S=this.minY,N=this.maxX,U=this.maxY;for(let W=l;W<c;W+=2){const Q=i[W],lt=i[W+1];f=Q<f?Q:f,S=lt<S?lt:S,N=Q>N?Q:N,U=lt>U?lt:U}this.minX=f,this.minY=S,this.maxX=N,this.maxY=U}addVertices(i,l,c,f){this.addVerticesMatrix(i.worldTransform,l,c,f)}addVerticesMatrix(i,l,c,f,S=0,N=S){const U=i.a,W=i.b,Q=i.c,lt=i.d,ft=i.tx,mt=i.ty;let _t=this.minX,Pt=this.minY,Dt=this.maxX,Wt=this.maxY;for(let Jt=c;Jt<f;Jt+=2){const pe=l[Jt],re=l[Jt+1],le=U*pe+Q*re+ft,De=lt*re+W*pe+mt;_t=Math.min(_t,le-S),Dt=Math.max(Dt,le+S),Pt=Math.min(Pt,De-N),Wt=Math.max(Wt,De+N)}this.minX=_t,this.minY=Pt,this.maxX=Dt,this.maxY=Wt}addBounds(i){const l=this.minX,c=this.minY,f=this.maxX,S=this.maxY;this.minX=i.minX<l?i.minX:l,this.minY=i.minY<c?i.minY:c,this.maxX=i.maxX>f?i.maxX:f,this.maxY=i.maxY>S?i.maxY:S}addBoundsMask(i,l){const c=i.minX>l.minX?i.minX:l.minX,f=i.minY>l.minY?i.minY:l.minY,S=i.maxX<l.maxX?i.maxX:l.maxX,N=i.maxY<l.maxY?i.maxY:l.maxY;if(c<=S&&f<=N){const U=this.minX,W=this.minY,Q=this.maxX,lt=this.maxY;this.minX=c<U?c:U,this.minY=f<W?f:W,this.maxX=S>Q?S:Q,this.maxY=N>lt?N:lt}}addBoundsMatrix(i,l){this.addFrameMatrix(l,i.minX,i.minY,i.maxX,i.maxY)}addBoundsArea(i,l){const c=i.minX>l.x?i.minX:l.x,f=i.minY>l.y?i.minY:l.y,S=i.maxX<l.x+l.width?i.maxX:l.x+l.width,N=i.maxY<l.y+l.height?i.maxY:l.y+l.height;if(c<=S&&f<=N){const U=this.minX,W=this.minY,Q=this.maxX,lt=this.maxY;this.minX=c<U?c:U,this.minY=f<W?f:W,this.maxX=S>Q?S:Q,this.maxY=N>lt?N:lt}}pad(i=0,l=i){this.isEmpty()||(this.minX-=i,this.maxX+=i,this.minY-=l,this.maxY+=l)}addFramePad(i,l,c,f,S,N){i-=S,l-=N,c+=S,f+=N,this.minX=this.minX<i?this.minX:i,this.maxX=this.maxX>c?this.maxX:c,this.minY=this.minY<l?this.minY:l,this.maxY=this.maxY>f?this.maxY:f}}class ti extends Gt{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Na,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ws,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(i){const l=Object.keys(i);for(let c=0;c<l.length;++c){const f=l[c];Object.defineProperty(ti.prototype,f,Object.getOwnPropertyDescriptor(i,f))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(i,l){return i||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),l||(this._boundsRect||(this._boundsRect=new Rr),l=this._boundsRect),this._bounds.getRectangle(l)}getLocalBounds(i){var U;i||(this._localBoundsRect||(this._localBoundsRect=new Rr),i=this._localBoundsRect),this._localBounds||(this._localBounds=new Ws);const l=this.transform,c=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(U=c==null?void 0:c.worldAlpha)!=null?U:1,this.transform=this._tempDisplayObjectParent.transform;const f=this._bounds,S=this._boundsID;this._bounds=this._localBounds;const N=this.getBounds(!1,i);return this.parent=c,this.transform=l,this._bounds=f,this._bounds.updateID+=this._boundsID-S,N}toGlobal(i,l,c=!1){return c||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(i,l)}toLocal(i,l,c,f){return l&&(i=l.toGlobal(i,c,f)),f||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(i,c)}setParent(i){if(!i||!i.addChild)throw new Error("setParent: Argument must be a Container");return i.addChild(this),i}removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)}setTransform(i=0,l=0,c=1,f=1,S=0,N=0,U=0,W=0,Q=0){return this.position.x=i,this.position.y=l,this.scale.x=c||1,this.scale.y=f||1,this.rotation=S,this.skew.x=N,this.skew.y=U,this.pivot.x=W,this.pivot.y=Q,this}destroy(i){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new nd),this.tempDisplayObjectParent}enableTempParent(){const i=this.parent;return this.parent=this._tempDisplayObjectParent,i}disableTempParent(i){this.parent=i}get x(){return this.position.x}set x(i){this.transform.position.x=i}get y(){return this.position.y}set y(i){this.transform.position.y=i}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(i){this.transform.position.copyFrom(i)}get scale(){return this.transform.scale}set scale(i){this.transform.scale.copyFrom(i)}get pivot(){return this.transform.pivot}set pivot(i){this.transform.pivot.copyFrom(i)}get skew(){return this.transform.skew}set skew(i){this.transform.skew.copyFrom(i)}get rotation(){return this.transform.rotation}set rotation(i){this.transform.rotation=i}get angle(){return this.transform.rotation*kl}set angle(i){this.transform.rotation=i*Ts}get zIndex(){return this._zIndex}set zIndex(i){this._zIndex=i,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let i=this;do{if(!i.visible)return!1;i=i.parent}while(i);return!0}get mask(){return this._mask}set mask(i){if(this._mask!==i){if(this._mask){const l=this._mask.isMaskData?this._mask.maskObject:this._mask;l&&(l._maskRefCount--,l._maskRefCount===0&&(l.renderable=!0,l.isMask=!1))}if(this._mask=i,this._mask){const l=this._mask.isMaskData?this._mask.maskObject:this._mask;l&&(l._maskRefCount===0&&(l.renderable=!1,l.isMask=!0),l._maskRefCount++)}}}}class nd extends ti{constructor(){super(...arguments),this.sortDirty=null}}ti.prototype.displayObjectUpdateTransform=ti.prototype.updateTransform;const xh=new Qr;function Th(u,i){return u.zIndex===i.zIndex?u._lastSortedIndex-i._lastSortedIndex:u.zIndex-i.zIndex}const Cs=class Ap extends ti{constructor(){super(),this.children=[],this.sortableChildren=Ap.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(i){}addChild(...i){if(i.length>1)for(let l=0;l<i.length;l++)this.addChild(i[l]);else{const l=i[0];l.parent&&l.parent.removeChild(l),l.parent=this,this.sortDirty=!0,l.transform._parentID=-1,this.children.push(l),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",l,this,this.children.length-1),l.emit("added",this)}return i[0]}addChildAt(i,l){if(l<0||l>this.children.length)throw new Error(`${i}addChildAt: The index ${l} supplied is out of bounds ${this.children.length}`);return i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.splice(l,0,i),this._boundsID++,this.onChildrenChange(l),i.emit("added",this),this.emit("childAdded",i,this,l),i}swapChildren(i,l){if(i===l)return;const c=this.getChildIndex(i),f=this.getChildIndex(l);this.children[c]=l,this.children[f]=i,this.onChildrenChange(c<f?c:f)}getChildIndex(i){const l=this.children.indexOf(i);if(l===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return l}setChildIndex(i,l){if(l<0||l>=this.children.length)throw new Error(`The index ${l} supplied is out of bounds ${this.children.length}`);const c=this.getChildIndex(i);Qs(this.children,c,1),this.children.splice(l,0,i),this.onChildrenChange(l)}getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]}removeChild(...i){if(i.length>1)for(let l=0;l<i.length;l++)this.removeChild(i[l]);else{const l=i[0],c=this.children.indexOf(l);if(c===-1)return null;l.parent=null,l.transform._parentID=-1,Qs(this.children,c,1),this._boundsID++,this.onChildrenChange(c),l.emit("removed",this),this.emit("childRemoved",l,this,c)}return i[0]}removeChildAt(i){const l=this.getChildAt(i);return l.parent=null,l.transform._parentID=-1,Qs(this.children,i,1),this._boundsID++,this.onChildrenChange(i),l.emit("removed",this),this.emit("childRemoved",l,this,i),l}removeChildren(i=0,l=this.children.length){const c=i,f=l,S=f-c;let N;if(S>0&&S<=f){N=this.children.splice(c,S);for(let U=0;U<N.length;++U)N[U].parent=null,N[U].transform&&(N[U].transform._parentID=-1);this._boundsID++,this.onChildrenChange(i);for(let U=0;U<N.length;++U)N[U].emit("removed",this),this.emit("childRemoved",N[U],this,U);return N}else if(S===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let i=!1;for(let l=0,c=this.children.length;l<c;++l){const f=this.children[l];f._lastSortedIndex=l,!i&&f.zIndex!==0&&(i=!0)}i&&this.children.length>1&&this.children.sort(Th),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let i=0,l=this.children.length;i<l;++i){const c=this.children[i];c.visible&&c.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let i=0;i<this.children.length;i++){const l=this.children[i];if(!(!l.visible||!l.renderable))if(l.calculateBounds(),l._mask){const c=l._mask.isMaskData?l._mask.maskObject:l._mask;c?(c.calculateBounds(),this._bounds.addBoundsMask(l._bounds,c._bounds)):this._bounds.addBounds(l._bounds)}else l.filterArea?this._bounds.addBoundsArea(l._bounds,l.filterArea):this._bounds.addBounds(l._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(i,l=!1){const c=super.getLocalBounds(i);if(!l)for(let f=0,S=this.children.length;f<S;++f){const N=this.children[f];N.visible&&N.updateTransform()}return c}_calculateBounds(){}_renderWithCulling(i){const l=i.renderTexture.sourceFrame;if(!(l.width>0&&l.height>0))return;let c,f;this.cullArea?(c=this.cullArea,f=this.worldTransform):this._render!==Ap.prototype._render&&(c=this.getBounds(!0));const S=i.projection.transform;if(S&&(f?(f=xh.copyFrom(f),f.prepend(S)):f=S),c&&l.intersects(c,f))this._render(i);else if(this.cullArea)return;for(let N=0,U=this.children.length;N<U;++N){const W=this.children[N],Q=W.cullable;W.cullable=Q||!this.cullArea,W.render(i),W.cullable=Q}}render(i){var l;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(l=this.filters)!=null&&l.length)this.renderAdvanced(i);else if(this.cullable)this._renderWithCulling(i);else{this._render(i);for(let c=0,f=this.children.length;c<f;++c)this.children[c].render(i)}}renderAdvanced(i){var S,N,U;const l=this.filters,c=this._mask;if(l){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let W=0;W<l.length;W++)l[W].enabled&&this._enabledFilters.push(l[W])}const f=l&&((S=this._enabledFilters)==null?void 0:S.length)||c&&(!c.isMaskData||c.enabled&&(c.autoDetect||c.type!==G.NONE));if(f&&i.batch.flush(),l&&((N=this._enabledFilters)!=null&&N.length)&&i.filter.push(this,this._enabledFilters),c&&i.mask.push(this,this._mask),this.cullable)this._renderWithCulling(i);else{this._render(i);for(let W=0,Q=this.children.length;W<Q;++W)this.children[W].render(i)}f&&i.batch.flush(),c&&i.mask.pop(this),l&&((U=this._enabledFilters)!=null&&U.length)&&i.filter.pop()}_render(i){}destroy(i){super.destroy(),this.sortDirty=!1;const l=typeof i=="boolean"?i:i==null?void 0:i.children,c=this.removeChildren(0,this.children.length);if(l)for(let f=0;f<c.length;++f)c[f].destroy(i)}get width(){return this.scale.x*this.getLocalBounds().width}set width(i){const l=this.getLocalBounds().width;l!==0?this.scale.x=i/l:this.scale.x=1,this._width=i}get height(){return this.scale.y*this.getLocalBounds().height}set height(i){const l=this.getLocalBounds().height;l!==0?this.scale.y=i/l:this.scale.y=1,this._height=i}};Cs.defaultSortableChildren=!1;let wi=Cs;wi.prototype.containerUpdateTransform=wi.prototype.updateTransform,Object.defineProperties(st,{SORTABLE_CHILDREN:{get(){return wi.defaultSortableChildren},set(u){ne("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),wi.defaultSortableChildren=u}}});const ni=new Mr,on=new Uint16Array([0,1,2,0,2,3]);class Io extends wi{constructor(i){super(),this._anchor=new ns(this._onAnchorUpdate,this,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ur(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=M.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=i||hr.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=on,this.pluginName="batch",this.isSprite=!0,this._roundPixels=st.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Js(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Js(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const i=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===i._updateID)return;this._textureID!==i._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=i._updateID;const l=this.transform.worldTransform,c=l.a,f=l.b,S=l.c,N=l.d,U=l.tx,W=l.ty,Q=this.vertexData,lt=i.trim,ft=i.orig,mt=this._anchor;let _t=0,Pt=0,Dt=0,Wt=0;if(lt?(Pt=lt.x-mt._x*ft.width,_t=Pt+lt.width,Wt=lt.y-mt._y*ft.height,Dt=Wt+lt.height):(Pt=-mt._x*ft.width,_t=Pt+ft.width,Wt=-mt._y*ft.height,Dt=Wt+ft.height),Q[0]=c*Pt+S*Wt+U,Q[1]=N*Wt+f*Pt+W,Q[2]=c*_t+S*Wt+U,Q[3]=N*Wt+f*_t+W,Q[4]=c*_t+S*Dt+U,Q[5]=N*Dt+f*_t+W,Q[6]=c*Pt+S*Dt+U,Q[7]=N*Dt+f*Pt+W,this._roundPixels){const Jt=st.RESOLUTION;for(let pe=0;pe<Q.length;++pe)Q[pe]=Math.round(Q[pe]*Jt)/Jt}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const i=this._texture,l=this.vertexTrimmedData,c=i.orig,f=this._anchor,S=this.transform.worldTransform,N=S.a,U=S.b,W=S.c,Q=S.d,lt=S.tx,ft=S.ty,mt=-f._x*c.width,_t=mt+c.width,Pt=-f._y*c.height,Dt=Pt+c.height;if(l[0]=N*mt+W*Pt+lt,l[1]=Q*Pt+U*mt+ft,l[2]=N*_t+W*Pt+lt,l[3]=Q*Pt+U*_t+ft,l[4]=N*_t+W*Dt+lt,l[5]=Q*Dt+U*_t+ft,l[6]=N*mt+W*Dt+lt,l[7]=Q*Dt+U*mt+ft,this._roundPixels){const Wt=st.RESOLUTION;for(let Jt=0;Jt<l.length;++Jt)l[Jt]=Math.round(l[Jt]*Wt)/Wt}}_render(i){this.calculateVertices(),i.batch.setObjectRenderer(i.plugins[this.pluginName]),i.plugins[this.pluginName].render(this)}_calculateBounds(){const i=this._texture.trim,l=this._texture.orig;!i||i.width===l.width&&i.height===l.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(i){return this.children.length===0?(this._localBounds||(this._localBounds=new Ws),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),i||(this._localBoundsRect||(this._localBoundsRect=new Rr),i=this._localBoundsRect),this._localBounds.getRectangle(i)):super.getLocalBounds.call(this,i)}containsPoint(i){this.worldTransform.applyInverse(i,ni);const l=this._texture.orig.width,c=this._texture.orig.height,f=-l*this.anchor.x;let S=0;return ni.x>=f&&ni.x<f+l&&(S=-c*this.anchor.y,ni.y>=S&&ni.y<S+c)}destroy(i){if(super.destroy(i),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof i=="boolean"?i:i==null?void 0:i.texture){const l=typeof i=="boolean"?i:i==null?void 0:i.baseTexture;this._texture.destroy(!!l)}this._texture=null}static from(i,l){const c=i instanceof hr?i:hr.from(i,l);return new Io(c)}set roundPixels(i){this._roundPixels!==i&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=i}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(i){const l=Js(this.scale.x)||1;this.scale.x=l*i/this._texture.orig.width,this._width=i}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(i){const l=Js(this.scale.y)||1;this.scale.y=l*i/this._texture.orig.height,this._height=i}get anchor(){return this._anchor}set anchor(i){this._anchor.copyFrom(i)}get tint(){return this._tintColor.value}set tint(i){this._tintColor.setValue(i),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(i){this._texture!==i&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=i||hr.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,i&&(i.baseTexture.valid?this._onTextureUpdate():i.once("update",this._onTextureUpdate,this)))}}const Eh=new Qr;ti.prototype._cacheAsBitmap=!1,ti.prototype._cacheData=null,ti.prototype._cacheAsBitmapResolution=null,ti.prototype._cacheAsBitmapMultisample=null;class Sh{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ti.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(u){u!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=u,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(u){u!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=u,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(u){if(this._cacheAsBitmap===u)return;this._cacheAsBitmap=u;let i;u?(this._cacheData||(this._cacheData=new Sh),i=this._cacheData,i.originalRender=this.render,i.originalRenderCanvas=this.renderCanvas,i.originalUpdateTransform=this.updateTransform,i.originalCalculateBounds=this.calculateBounds,i.originalGetLocalBounds=this.getLocalBounds,i.originalDestroy=this.destroy,i.originalContainsPoint=this.containsPoint,i.originalMask=this._mask,i.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(i=this._cacheData,i.sprite&&this._destroyCachedDisplayObject(),this.render=i.originalRender,this.renderCanvas=i.originalRenderCanvas,this.calculateBounds=i.originalCalculateBounds,this.getLocalBounds=i.originalGetLocalBounds,this.destroy=i.originalDestroy,this.updateTransform=i.originalUpdateTransform,this.containsPoint=i.originalContainsPoint,this._mask=i.originalMask,this.filterArea=i.originalFilterArea)}}}),ti.prototype._renderCached=function(u){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(u),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(u))},ti.prototype._initCachedDisplayObject=function(u){var mt,_t,Pt;if((mt=this._cacheData)!=null&&mt.sprite)return;const i=this.alpha;this.alpha=1,u.batch.flush();const l=this.getLocalBounds(new Rr,!0);if((_t=this.filters)!=null&&_t.length){const Dt=this.filters[0].padding;l.pad(Dt)}const c=this.cacheAsBitmapResolution||u.resolution;l.ceil(c),l.width=Math.max(l.width,1/c),l.height=Math.max(l.height,1/c);const f=u.renderTexture.current,S=u.renderTexture.sourceFrame.clone(),N=u.renderTexture.destinationFrame.clone(),U=u.projection.transform,W=bo.create({width:l.width,height:l.height,resolution:c,multisample:(Pt=this.cacheAsBitmapMultisample)!=null?Pt:u.multisample}),Q=`cacheAsBitmap_${Os()}`;this._cacheData.textureCacheId=Q,Cr.addToCache(W.baseTexture,Q),hr.addToCache(W,Q);const lt=this.transform.localTransform.copyTo(Eh).invert().translate(-l.x,-l.y);this.render=this._cacheData.originalRender,u.render(this,{renderTexture:W,clear:!0,transform:lt,skipUpdateTransform:!1}),u.framebuffer.blit(),u.projection.transform=U,u.renderTexture.bind(f,S,N),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const ft=new Io(W);ft.transform.worldTransform=this.transform.worldTransform,ft.anchor.x=-(l.x/l.width),ft.anchor.y=-(l.y/l.height),ft.alpha=i,ft._bounds=this._bounds,this._cacheData.sprite=ft,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=ft.containsPoint.bind(ft)},ti.prototype._renderCachedCanvas=function(u){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(u),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(u))},ti.prototype._initCachedDisplayObjectCanvas=function(u){var lt;if((lt=this._cacheData)!=null&&lt.sprite)return;const i=this.getLocalBounds(new Rr,!0),l=this.alpha;this.alpha=1;const c=u.canvasContext.activeContext,f=u._projTransform,S=this.cacheAsBitmapResolution||u.resolution;i.ceil(S),i.width=Math.max(i.width,1/S),i.height=Math.max(i.height,1/S);const N=bo.create({width:i.width,height:i.height,resolution:S}),U=`cacheAsBitmap_${Os()}`;this._cacheData.textureCacheId=U,Cr.addToCache(N.baseTexture,U),hr.addToCache(N,U);const W=Eh;this.transform.localTransform.copyTo(W),W.invert(),W.tx-=i.x,W.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,u.render(this,{renderTexture:N,clear:!0,transform:W,skipUpdateTransform:!1}),u.canvasContext.activeContext=c,u._projTransform=f,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=l;const Q=new Io(N);Q.transform.worldTransform=this.transform.worldTransform,Q.anchor.x=-(i.x/i.width),Q.anchor.y=-(i.y/i.height),Q.alpha=l,Q._bounds=this._bounds,this._cacheData.sprite=Q,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=u._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=Q.containsPoint.bind(Q)},ti.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},ti.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},ti.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Cr.removeFromCache(this._cacheData.textureCacheId),hr.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},ti.prototype._cacheAsBitmapDestroy=function(u){this.cacheAsBitmap=!1,this.destroy(u)},ti.prototype.name=null,wi.prototype.getChildByName=function(u,i){for(let l=0,c=this.children.length;l<c;l++)if(this.children[l].name===u)return this.children[l];if(i)for(let l=0,c=this.children.length;l<c;l++){const f=this.children[l];if(!f.getChildByName)continue;const S=f.getChildByName(u,!0);if(S)return S}return null},ti.prototype.getGlobalPosition=function(u=new Mr,i=!1){return this.parent?this.parent.toGlobal(this.position,u,i):(u.x=this.position.x,u.y=this.position.y),u};var bh=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class od extends zr{constructor(i=1){super(As,bh,{uAlpha:1}),this.alpha=i}get alpha(){return this.uniforms.uAlpha}set alpha(i){this.uniforms.uAlpha=i}}const eu={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ad=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function ca(u){const i=eu[u],l=i.length;let c=ad,f="";const S="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let N;for(let U=0;U<u;U++){let W=S.replace("%index%",U.toString());N=U,U>=l&&(N=u-U-1),W=W.replace("%value%",i[N].toString()),f+=W,f+=`
`}return c=c.replace("%blur%",f),c=c.replace("%size%",u.toString()),c}const Ah=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Of(u,i){const l=Math.ceil(u/2);let c=Ah,f="",S;i?S="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":S="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let N=0;N<u;N++){let U=S.replace("%index%",N.toString());U=U.replace("%sampleIndex%",`${N-(l-1)}.0`),f+=U,f+=`
`}return c=c.replace("%blur%",f),c=c.replace("%size%",u.toString()),c}class Bs extends zr{constructor(i,l=8,c=4,f=zr.defaultResolution,S=5){const N=Of(S,i),U=ca(S);super(N,U),this.horizontal=i,this.resolution=f,this._quality=0,this.quality=c,this.blur=l}apply(i,l,c,f){if(c?this.horizontal?this.uniforms.strength=1/c.width*(c.width/l.width):this.uniforms.strength=1/c.height*(c.height/l.height):this.horizontal?this.uniforms.strength=1/i.renderer.width*(i.renderer.width/l.width):this.uniforms.strength=1/i.renderer.height*(i.renderer.height/l.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)i.applyFilter(this,l,c,f);else{const S=i.getFilterTexture(),N=i.renderer;let U=l,W=S;this.state.blend=!1,i.applyFilter(this,U,W,P.CLEAR);for(let Q=1;Q<this.passes-1;Q++){i.bindAndClear(U,P.BLIT),this.uniforms.uSampler=W;const lt=W;W=U,U=lt,N.shader.bind(this),N.geometry.draw(5)}this.state.blend=!0,i.applyFilter(this,W,c,f),i.returnFilterTexture(S)}}get blur(){return this.strength}set blur(i){this.padding=1+Math.abs(i)*2,this.strength=i}get quality(){return this._quality}set quality(i){this._quality=i,this.passes=i}}class ru extends zr{constructor(i=8,l=4,c=zr.defaultResolution,f=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Bs(!0,i,l,c,f),this.blurYFilter=new Bs(!1,i,l,c,f),this.resolution=c,this.quality=l,this.blur=i,this.repeatEdgePixels=!1}apply(i,l,c,f){const S=Math.abs(this.blurXFilter.strength),N=Math.abs(this.blurYFilter.strength);if(S&&N){const U=i.getFilterTexture();this.blurXFilter.apply(i,l,U,P.CLEAR),this.blurYFilter.apply(i,U,c,f),i.returnFilterTexture(U)}else N?this.blurYFilter.apply(i,l,c,f):this.blurXFilter.apply(i,l,c,f)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(i){this.blurXFilter.blur=this.blurYFilter.blur=i,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(i){this.blurXFilter.quality=this.blurYFilter.quality=i}get blurX(){return this.blurXFilter.blur}set blurX(i){this.blurXFilter.blur=i,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(i){this.blurYFilter.blur=i,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(i){this.blurYFilter.blendMode=i}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(i){this._repeatEdgePixels=i,this.updatePadding()}}var iu=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class no extends zr{constructor(){const i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Qa,iu,i),this.alpha=1}_loadMatrix(i,l=!1){let c=i;l&&(this._multiply(c,this.uniforms.m,i),c=this._colorMatrix(c)),this.uniforms.m=c}_multiply(i,l,c){return i[0]=l[0]*c[0]+l[1]*c[5]+l[2]*c[10]+l[3]*c[15],i[1]=l[0]*c[1]+l[1]*c[6]+l[2]*c[11]+l[3]*c[16],i[2]=l[0]*c[2]+l[1]*c[7]+l[2]*c[12]+l[3]*c[17],i[3]=l[0]*c[3]+l[1]*c[8]+l[2]*c[13]+l[3]*c[18],i[4]=l[0]*c[4]+l[1]*c[9]+l[2]*c[14]+l[3]*c[19]+l[4],i[5]=l[5]*c[0]+l[6]*c[5]+l[7]*c[10]+l[8]*c[15],i[6]=l[5]*c[1]+l[6]*c[6]+l[7]*c[11]+l[8]*c[16],i[7]=l[5]*c[2]+l[6]*c[7]+l[7]*c[12]+l[8]*c[17],i[8]=l[5]*c[3]+l[6]*c[8]+l[7]*c[13]+l[8]*c[18],i[9]=l[5]*c[4]+l[6]*c[9]+l[7]*c[14]+l[8]*c[19]+l[9],i[10]=l[10]*c[0]+l[11]*c[5]+l[12]*c[10]+l[13]*c[15],i[11]=l[10]*c[1]+l[11]*c[6]+l[12]*c[11]+l[13]*c[16],i[12]=l[10]*c[2]+l[11]*c[7]+l[12]*c[12]+l[13]*c[17],i[13]=l[10]*c[3]+l[11]*c[8]+l[12]*c[13]+l[13]*c[18],i[14]=l[10]*c[4]+l[11]*c[9]+l[12]*c[14]+l[13]*c[19]+l[14],i[15]=l[15]*c[0]+l[16]*c[5]+l[17]*c[10]+l[18]*c[15],i[16]=l[15]*c[1]+l[16]*c[6]+l[17]*c[11]+l[18]*c[16],i[17]=l[15]*c[2]+l[16]*c[7]+l[17]*c[12]+l[18]*c[17],i[18]=l[15]*c[3]+l[16]*c[8]+l[17]*c[13]+l[18]*c[18],i[19]=l[15]*c[4]+l[16]*c[9]+l[17]*c[14]+l[18]*c[19]+l[19],i}_colorMatrix(i){const l=new Float32Array(i);return l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,l}brightness(i,l){const c=[i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(c,l)}tint(i,l){const[c,f,S]=ur.shared.setValue(i).toArray(),N=[c,0,0,0,0,0,f,0,0,0,0,0,S,0,0,0,0,0,1,0];this._loadMatrix(N,l)}greyscale(i,l){const c=[i,i,i,0,0,i,i,i,0,0,i,i,i,0,0,0,0,0,1,0];this._loadMatrix(c,l)}blackAndWhite(i){const l=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(l,i)}hue(i,l){i=(i||0)/180*Math.PI;const c=Math.cos(i),f=Math.sin(i),S=Math.sqrt,N=1/3,U=S(N),W=c+(1-c)*N,Q=N*(1-c)-U*f,lt=N*(1-c)+U*f,ft=N*(1-c)+U*f,mt=c+N*(1-c),_t=N*(1-c)-U*f,Pt=N*(1-c)-U*f,Dt=N*(1-c)+U*f,Wt=c+N*(1-c),Jt=[W,Q,lt,0,0,ft,mt,_t,0,0,Pt,Dt,Wt,0,0,0,0,0,1,0];this._loadMatrix(Jt,l)}contrast(i,l){const c=(i||0)+1,f=-.5*(c-1),S=[c,0,0,0,f,0,c,0,0,f,0,0,c,0,f,0,0,0,1,0];this._loadMatrix(S,l)}saturate(i=0,l){const c=i*2/3+1,f=(c-1)*-.5,S=[c,f,f,0,0,f,c,f,0,0,f,f,c,0,0,0,0,0,1,0];this._loadMatrix(S,l)}desaturate(){this.saturate(-1)}negative(i){const l=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(l,i)}sepia(i){const l=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(l,i)}technicolor(i){const l=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(l,i)}polaroid(i){const l=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(l,i)}toBGR(i){const l=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(l,i)}kodachrome(i){const l=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(l,i)}browni(i){const l=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(l,i)}vintage(i){const l=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(l,i)}colorTone(i,l,c,f,S){i=i||.2,l=l||.15,c=c||16770432,f=f||3375104;const N=ur.shared,[U,W,Q]=N.setValue(c).toArray(),[lt,ft,mt]=N.setValue(f).toArray(),_t=[.3,.59,.11,0,0,U,W,Q,i,0,lt,ft,mt,l,0,U-lt,W-ft,Q-mt,0,0];this._loadMatrix(_t,S)}night(i,l){i=i||.1;const c=[i*-2,-i,0,0,0,-i,0,i,0,0,0,i,i*2,0,0,0,0,0,1,0];this._loadMatrix(c,l)}predator(i,l){const c=[11.224130630493164*i,-4.794486999511719*i,-2.8746118545532227*i,0*i,.40342438220977783*i,-3.6330697536468506*i,9.193157196044922*i,-2.951810836791992*i,0*i,-1.316135048866272*i,-3.2184197902679443*i,-4.2375030517578125*i,7.476448059082031*i,0*i,.8044459223747253*i,0,0,0,1,0];this._loadMatrix(c,l)}lsd(i){const l=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(l,i)}reset(){const i=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(i,!1)}get matrix(){return this.uniforms.m}set matrix(i){this.uniforms.m=i}get alpha(){return this.uniforms.uAlpha}set alpha(i){this.uniforms.uAlpha=i}}no.prototype.grayscale=no.prototype.greyscale;var wh=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Ch=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class Ph extends zr{constructor(i,l){const c=new Qr;i.renderable=!1,super(Ch,wh,{mapSampler:i._texture,filterMatrix:c,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=i,this.maskMatrix=c,l==null&&(l=20),this.scale=new Mr(l,l)}apply(i,l,c,f){this.uniforms.filterMatrix=i.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const S=this.maskSprite.worldTransform,N=Math.sqrt(S.a*S.a+S.b*S.b),U=Math.sqrt(S.c*S.c+S.d*S.d);N!==0&&U!==0&&(this.uniforms.rotation[0]=S.a/N,this.uniforms.rotation[1]=S.b/N,this.uniforms.rotation[2]=S.c/U,this.uniforms.rotation[3]=S.d/U),i.applyFilter(this,l,c,f)}get map(){return this.uniforms.mapSampler}set map(i){this.uniforms.mapSampler=i}}var Mh=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,da=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class $s extends zr{constructor(){super(da,Mh)}}var Oo=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class Rh extends zr{constructor(i=.5,l=Math.random()){super(Qa,Oo,{uNoise:0,uSeed:0}),this.noise=i,this.seed=l}get noise(){return this.uniforms.uNoise}set noise(i){this.uniforms.uNoise=i}get seed(){return this.uniforms.uSeed}set seed(i){this.uniforms.uSeed=i}}const Ih={AlphaFilter:od,BlurFilter:ru,BlurFilterPass:Bs,ColorMatrixFilter:no,DisplacementFilter:Ph,FXAAFilter:$s,NoiseFilter:Rh};Object.entries(Ih).forEach(([u,i])=>{Object.defineProperty(Ih,u,{get(){return ne("7.1.0",`filters.${u} has moved to ${u}`),i}})});class Vn{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(i){this.removeTickerListener(),this.events=i,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(i){this._pauseUpdate=i}addTickerListener(){this.tickerAdded||!this.domElement||(jr.system.add(this.tickerUpdate,this,js.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(jr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const i=this.events.rootPointerEvent;this.events.supportsTouchEvents&&i.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:i.clientX,clientY:i.clientY}))}tickerUpdate(i){this._deltaTime+=i,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const hs=new Vn;class Fo{constructor(i){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Fo.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Mr,this.page=new Mr,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=i}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(i,l,c){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(i,l,c,f,S){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class qa extends Fo{constructor(){super(...arguments),this.client=new Mr,this.movement=new Mr,this.offset=new Mr,this.global=new Mr,this.screen=new Mr}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(i,l,c){return i.worldTransform.applyInverse(c||this.global,l)}getModifierState(i){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(i)}initMouseEvent(i,l,c,f,S,N,U,W,Q,lt,ft,mt,_t,Pt,Dt){throw new Error("Method not implemented.")}}class Vi extends qa{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ls extends qa{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Ls.DOM_DELTA_PIXEL=0,Ls.DOM_DELTA_LINE=1,Ls.DOM_DELTA_PAGE=2;const su=2048,ld=new Mr,fa=new Mr;class ud{constructor(i){this.dispatch=new Gt,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=i,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(i,l){this.mappingTable[i]||(this.mappingTable[i]=[]),this.mappingTable[i].push({fn:l,priority:0}),this.mappingTable[i].sort((c,f)=>c.priority-f.priority)}dispatchEvent(i,l){i.propagationStopped=!1,i.propagationImmediatelyStopped=!1,this.propagate(i,l),this.dispatch.emit(l||i.type,i)}mapEvent(i){if(!this.rootTarget)return;const l=this.mappingTable[i.type];if(l)for(let c=0,f=l.length;c<f;c++)l[c].fn(i);else console.warn(`[EventBoundary]: Event mapping not defined for ${i.type}`)}hitTest(i,l){hs.pauseUpdate=!0;const c=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",f=this[c](this.rootTarget,this.rootTarget.eventMode,ld.set(i,l),this.hitTestFn,this.hitPruneFn);return f&&f[0]}propagate(i,l){if(!i.target)return;const c=i.composedPath();i.eventPhase=i.CAPTURING_PHASE;for(let f=0,S=c.length-1;f<S;f++)if(i.currentTarget=c[f],this.notifyTarget(i,l),i.propagationStopped||i.propagationImmediatelyStopped)return;if(i.eventPhase=i.AT_TARGET,i.currentTarget=i.target,this.notifyTarget(i,l),!(i.propagationStopped||i.propagationImmediatelyStopped)){i.eventPhase=i.BUBBLING_PHASE;for(let f=c.length-2;f>=0;f--)if(i.currentTarget=c[f],this.notifyTarget(i,l),i.propagationStopped||i.propagationImmediatelyStopped)return}}all(i,l,c=this._allInteractiveElements){if(c.length===0)return;i.eventPhase=i.BUBBLING_PHASE;const f=Array.isArray(l)?l:[l];for(let S=c.length-1;S>=0;S--)f.forEach(N=>{i.currentTarget=c[S],this.notifyTarget(i,N)})}propagationPath(i){const l=[i];for(let c=0;c<su&&i!==this.rootTarget;c++){if(!i.parent)throw new Error("Cannot find propagation path to disconnected target");l.push(i.parent),i=i.parent}return l.reverse(),l}hitTestMoveRecursive(i,l,c,f,S,N=!1){let U=!1;if(this._interactivePrune(i))return null;if((i.eventMode==="dynamic"||l==="dynamic")&&(hs.pauseUpdate=!1),i.interactiveChildren&&i.children){const lt=i.children;for(let ft=lt.length-1;ft>=0;ft--){const mt=lt[ft],_t=this.hitTestMoveRecursive(mt,this._isInteractive(l)?l:mt.eventMode,c,f,S,N||S(i,c));if(_t){if(_t.length>0&&!_t[_t.length-1].parent)continue;const Pt=i.isInteractive();(_t.length>0||Pt)&&(Pt&&this._allInteractiveElements.push(i),_t.push(i)),this._hitElements.length===0&&(this._hitElements=_t),U=!0}}}const W=this._isInteractive(l),Q=i.isInteractive();return W&&Q&&this._allInteractiveElements.push(i),N||this._hitElements.length>0?null:U?this._hitElements:W&&!S(i,c)&&f(i,c)?Q?[i]:[]:null}hitTestRecursive(i,l,c,f,S){if(this._interactivePrune(i)||S(i,c))return null;if((i.eventMode==="dynamic"||l==="dynamic")&&(hs.pauseUpdate=!1),i.interactiveChildren&&i.children){const W=i.children;for(let Q=W.length-1;Q>=0;Q--){const lt=W[Q],ft=this.hitTestRecursive(lt,this._isInteractive(l)?l:lt.eventMode,c,f,S);if(ft){if(ft.length>0&&!ft[ft.length-1].parent)continue;const mt=i.isInteractive();return(ft.length>0||mt)&&ft.push(i),ft}}}const N=this._isInteractive(l),U=i.isInteractive();return N&&f(i,c)?U?[i]:[]:null}_isInteractive(i){return i==="static"||i==="dynamic"}_interactivePrune(i){return!!(!i||i.isMask||!i.visible||!i.renderable||i.eventMode==="none"||i.eventMode==="passive"&&!i.interactiveChildren||i.isMask)}hitPruneFn(i,l){var c;if(i.hitArea&&(i.worldTransform.applyInverse(l,fa),!i.hitArea.contains(fa.x,fa.y)))return!0;if(i._mask){const f=i._mask.isMaskData?i._mask.maskObject:i._mask;if(f&&!((c=f.containsPoint)!=null&&c.call(f,l)))return!0}return!1}hitTestFn(i,l){return i.eventMode==="passive"?!1:i.hitArea?!0:i.containsPoint?i.containsPoint(l):!1}notifyTarget(i,l){var S,N;l=l!=null?l:i.type;const c=`on${l}`;(N=(S=i.currentTarget)[c])==null||N.call(S,i);const f=i.eventPhase===i.CAPTURING_PHASE||i.eventPhase===i.AT_TARGET?`${l}capture`:l;this.notifyListeners(i,f),i.eventPhase===i.AT_TARGET&&this.notifyListeners(i,l)}mapPointerDown(i){if(!(i instanceof Vi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const l=this.createPointerEvent(i);if(this.dispatchEvent(l,"pointerdown"),l.pointerType==="touch")this.dispatchEvent(l,"touchstart");else if(l.pointerType==="mouse"||l.pointerType==="pen"){const f=l.button===2;this.dispatchEvent(l,f?"rightdown":"mousedown")}const c=this.trackingData(i.pointerId);c.pressTargetsByButton[i.button]=l.composedPath(),this.freeEvent(l)}mapPointerMove(i){var W,Q,lt;if(!(i instanceof Vi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const l=this.createPointerEvent(i);this._isPointerMoveEvent=!1;const c=l.pointerType==="mouse"||l.pointerType==="pen",f=this.trackingData(i.pointerId),S=this.findMountedTarget(f.overTargets);if(((W=f.overTargets)==null?void 0:W.length)>0&&S!==l.target){const ft=i.type==="mousemove"?"mouseout":"pointerout",mt=this.createPointerEvent(i,ft,S);if(this.dispatchEvent(mt,"pointerout"),c&&this.dispatchEvent(mt,"mouseout"),!l.composedPath().includes(S)){const _t=this.createPointerEvent(i,"pointerleave",S);for(_t.eventPhase=_t.AT_TARGET;_t.target&&!l.composedPath().includes(_t.target);)_t.currentTarget=_t.target,this.notifyTarget(_t),c&&this.notifyTarget(_t,"mouseleave"),_t.target=_t.target.parent;this.freeEvent(_t)}this.freeEvent(mt)}if(S!==l.target){const ft=i.type==="mousemove"?"mouseover":"pointerover",mt=this.clonePointerEvent(l,ft);this.dispatchEvent(mt,"pointerover"),c&&this.dispatchEvent(mt,"mouseover");let _t=S==null?void 0:S.parent;for(;_t&&_t!==this.rootTarget.parent&&_t!==l.target;)_t=_t.parent;if(!_t||_t===this.rootTarget.parent){const Pt=this.clonePointerEvent(l,"pointerenter");for(Pt.eventPhase=Pt.AT_TARGET;Pt.target&&Pt.target!==S&&Pt.target!==this.rootTarget.parent;)Pt.currentTarget=Pt.target,this.notifyTarget(Pt),c&&this.notifyTarget(Pt,"mouseenter"),Pt.target=Pt.target.parent;this.freeEvent(Pt)}this.freeEvent(mt)}const N=[],U=(Q=this.enableGlobalMoveEvents)!=null?Q:!0;this.moveOnAll?N.push("pointermove"):this.dispatchEvent(l,"pointermove"),U&&N.push("globalpointermove"),l.pointerType==="touch"&&(this.moveOnAll?N.splice(1,0,"touchmove"):this.dispatchEvent(l,"touchmove"),U&&N.push("globaltouchmove")),c&&(this.moveOnAll?N.splice(1,0,"mousemove"):this.dispatchEvent(l,"mousemove"),U&&N.push("globalmousemove"),this.cursor=(lt=l.target)==null?void 0:lt.cursor),N.length>0&&this.all(l,N),this._allInteractiveElements.length=0,this._hitElements.length=0,f.overTargets=l.composedPath(),this.freeEvent(l)}mapPointerOver(i){var N;if(!(i instanceof Vi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const l=this.trackingData(i.pointerId),c=this.createPointerEvent(i),f=c.pointerType==="mouse"||c.pointerType==="pen";this.dispatchEvent(c,"pointerover"),f&&this.dispatchEvent(c,"mouseover"),c.pointerType==="mouse"&&(this.cursor=(N=c.target)==null?void 0:N.cursor);const S=this.clonePointerEvent(c,"pointerenter");for(S.eventPhase=S.AT_TARGET;S.target&&S.target!==this.rootTarget.parent;)S.currentTarget=S.target,this.notifyTarget(S),f&&this.notifyTarget(S,"mouseenter"),S.target=S.target.parent;l.overTargets=c.composedPath(),this.freeEvent(c),this.freeEvent(S)}mapPointerOut(i){if(!(i instanceof Vi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const l=this.trackingData(i.pointerId);if(l.overTargets){const c=i.pointerType==="mouse"||i.pointerType==="pen",f=this.findMountedTarget(l.overTargets),S=this.createPointerEvent(i,"pointerout",f);this.dispatchEvent(S),c&&this.dispatchEvent(S,"mouseout");const N=this.createPointerEvent(i,"pointerleave",f);for(N.eventPhase=N.AT_TARGET;N.target&&N.target!==this.rootTarget.parent;)N.currentTarget=N.target,this.notifyTarget(N),c&&this.notifyTarget(N,"mouseleave"),N.target=N.target.parent;l.overTargets=null,this.freeEvent(S),this.freeEvent(N)}this.cursor=null}mapPointerUp(i){if(!(i instanceof Vi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const l=performance.now(),c=this.createPointerEvent(i);if(this.dispatchEvent(c,"pointerup"),c.pointerType==="touch")this.dispatchEvent(c,"touchend");else if(c.pointerType==="mouse"||c.pointerType==="pen"){const U=c.button===2;this.dispatchEvent(c,U?"rightup":"mouseup")}const f=this.trackingData(i.pointerId),S=this.findMountedTarget(f.pressTargetsByButton[i.button]);let N=S;if(S&&!c.composedPath().includes(S)){let U=S;for(;U&&!c.composedPath().includes(U);){if(c.currentTarget=U,this.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch")this.notifyTarget(c,"touchendoutside");else if(c.pointerType==="mouse"||c.pointerType==="pen"){const W=c.button===2;this.notifyTarget(c,W?"rightupoutside":"mouseupoutside")}U=U.parent}delete f.pressTargetsByButton[i.button],N=U}if(N){const U=this.clonePointerEvent(c,"click");U.target=N,U.path=null,f.clicksByButton[i.button]||(f.clicksByButton[i.button]={clickCount:0,target:U.target,timeStamp:l});const W=f.clicksByButton[i.button];if(W.target===U.target&&l-W.timeStamp<200?++W.clickCount:W.clickCount=1,W.target=U.target,W.timeStamp=l,U.detail=W.clickCount,U.pointerType==="mouse"){const Q=U.button===2;this.dispatchEvent(U,Q?"rightclick":"click")}else U.pointerType==="touch"&&this.dispatchEvent(U,"tap");this.dispatchEvent(U,"pointertap"),this.freeEvent(U)}this.freeEvent(c)}mapPointerUpOutside(i){if(!(i instanceof Vi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const l=this.trackingData(i.pointerId),c=this.findMountedTarget(l.pressTargetsByButton[i.button]),f=this.createPointerEvent(i);if(c){let S=c;for(;S;)f.currentTarget=S,this.notifyTarget(f,"pointerupoutside"),f.pointerType==="touch"?this.notifyTarget(f,"touchendoutside"):(f.pointerType==="mouse"||f.pointerType==="pen")&&this.notifyTarget(f,f.button===2?"rightupoutside":"mouseupoutside"),S=S.parent;delete l.pressTargetsByButton[i.button]}this.freeEvent(f)}mapWheel(i){if(!(i instanceof Ls)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const l=this.createWheelEvent(i);this.dispatchEvent(l),this.freeEvent(l)}findMountedTarget(i){if(!i)return null;let l=i[0];for(let c=1;c<i.length&&i[c].parent===l;c++)l=i[c];return l}createPointerEvent(i,l,c){var S;const f=this.allocateEvent(Vi);return this.copyPointerData(i,f),this.copyMouseData(i,f),this.copyData(i,f),f.nativeEvent=i.nativeEvent,f.originalEvent=i,f.target=(S=c!=null?c:this.hitTest(f.global.x,f.global.y))!=null?S:this._hitElements[0],typeof l=="string"&&(f.type=l),f}createWheelEvent(i){const l=this.allocateEvent(Ls);return this.copyWheelData(i,l),this.copyMouseData(i,l),this.copyData(i,l),l.nativeEvent=i.nativeEvent,l.originalEvent=i,l.target=this.hitTest(l.global.x,l.global.y),l}clonePointerEvent(i,l){const c=this.allocateEvent(Vi);return c.nativeEvent=i.nativeEvent,c.originalEvent=i.originalEvent,this.copyPointerData(i,c),this.copyMouseData(i,c),this.copyData(i,c),c.target=i.target,c.path=i.composedPath().slice(),c.type=l!=null?l:c.type,c}copyWheelData(i,l){l.deltaMode=i.deltaMode,l.deltaX=i.deltaX,l.deltaY=i.deltaY,l.deltaZ=i.deltaZ}copyPointerData(i,l){i instanceof Vi&&l instanceof Vi&&(l.pointerId=i.pointerId,l.width=i.width,l.height=i.height,l.isPrimary=i.isPrimary,l.pointerType=i.pointerType,l.pressure=i.pressure,l.tangentialPressure=i.tangentialPressure,l.tiltX=i.tiltX,l.tiltY=i.tiltY,l.twist=i.twist)}copyMouseData(i,l){i instanceof qa&&l instanceof qa&&(l.altKey=i.altKey,l.button=i.button,l.buttons=i.buttons,l.client.copyFrom(i.client),l.ctrlKey=i.ctrlKey,l.metaKey=i.metaKey,l.movement.copyFrom(i.movement),l.screen.copyFrom(i.screen),l.shiftKey=i.shiftKey,l.global.copyFrom(i.global))}copyData(i,l){l.isTrusted=i.isTrusted,l.srcElement=i.srcElement,l.timeStamp=performance.now(),l.type=i.type,l.detail=i.detail,l.view=i.view,l.which=i.which,l.layer.copyFrom(i.layer),l.page.copyFrom(i.page)}trackingData(i){return this.mappingState.trackingData[i]||(this.mappingState.trackingData[i]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[i]}allocateEvent(i){this.eventPool.has(i)||this.eventPool.set(i,[]);const l=this.eventPool.get(i).pop()||new i(this);return l.eventPhase=l.NONE,l.currentTarget=null,l.path=null,l.target=null,l}freeEvent(i){if(i.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const l=i.constructor;this.eventPool.has(l)||this.eventPool.set(l,[]),this.eventPool.get(l).push(i)}notifyListeners(i,l){const c=i.currentTarget._events[l];if(c&&i.currentTarget.isInteractive())if("fn"in c)c.once&&i.currentTarget.removeListener(l,c.fn,void 0,!0),c.fn.call(c.context,i);else for(let f=0,S=c.length;f<S&&!i.propagationImmediatelyStopped;f++)c[f].once&&i.currentTarget.removeListener(l,c[f].fn,void 0,!0),c[f].fn.call(c[f].context,i)}}const hd=1,Oh={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},pa=class wp{constructor(i){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=i,this.rootBoundary=new ud(null),hs.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Vi(null),this.rootWheelEvent=new Ls(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(He({},wp.defaultEventFeatures),{set:(l,c,f)=>(c==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=f),l[c]=f,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(i){var f,S;const{view:l,resolution:c}=this.renderer;this.setTargetElement(l),this.resolution=c,wp._defaultEventMode=(f=i.eventMode)!=null?f:"auto",Object.assign(this.features,(S=i.eventFeatures)!=null?S:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(i){this.resolution=i}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(i){i=i||"default";let l=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(l=!1),this.currentCursor===i)return;this.currentCursor=i;const c=this.cursorStyles[i];if(c)switch(typeof c){case"string":l&&(this.domElement.style.cursor=c);break;case"function":c(i);break;case"object":l&&Object.assign(this.domElement.style,c);break}else l&&typeof i=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,i)&&(this.domElement.style.cursor=i)}get pointer(){return this.rootPointerEvent}onPointerDown(i){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const l=this.normalizeToPointerData(i);this.autoPreventDefault&&l[0].isNormalized&&(i.cancelable||!("cancelable"in i))&&i.preventDefault();for(let c=0,f=l.length;c<f;c++){const S=l[c],N=this.bootstrapEvent(this.rootPointerEvent,S);this.rootBoundary.mapEvent(N)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(i){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,hs.pointerMoved();const l=this.normalizeToPointerData(i);for(let c=0,f=l.length;c<f;c++){const S=this.bootstrapEvent(this.rootPointerEvent,l[c]);this.rootBoundary.mapEvent(S)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(i){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let l=i.target;i.composedPath&&i.composedPath().length>0&&(l=i.composedPath()[0]);const c=l!==this.domElement?"outside":"",f=this.normalizeToPointerData(i);for(let S=0,N=f.length;S<N;S++){const U=this.bootstrapEvent(this.rootPointerEvent,f[S]);U.type+=c,this.rootBoundary.mapEvent(U)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(i){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const l=this.normalizeToPointerData(i);for(let c=0,f=l.length;c<f;c++){const S=this.bootstrapEvent(this.rootPointerEvent,l[c]);this.rootBoundary.mapEvent(S)}this.setCursor(this.rootBoundary.cursor)}onWheel(i){if(!this.features.wheel)return;const l=this.normalizeWheelEvent(i);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(l)}setTargetElement(i){this.removeEvents(),this.domElement=i,hs.domElement=i,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;hs.addTickerListener();const i=this.domElement.style;i&&(globalThis.navigator.msPointerEnabled?(i.msContentZooming="none",i.msTouchAction="none"):this.supportsPointerEvents&&(i.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;hs.removeTickerListener();const i=this.domElement.style;globalThis.navigator.msPointerEnabled?(i.msContentZooming="",i.msTouchAction=""):this.supportsPointerEvents&&(i.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(i,l,c){const f=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},S=1/this.resolution;i.x=(l-f.left)*(this.domElement.width/f.width)*S,i.y=(c-f.top)*(this.domElement.height/f.height)*S}normalizeToPointerData(i){const l=[];if(this.supportsTouchEvents&&i instanceof TouchEvent)for(let c=0,f=i.changedTouches.length;c<f;c++){const S=i.changedTouches[c];typeof S.button>"u"&&(S.button=0),typeof S.buttons>"u"&&(S.buttons=1),typeof S.isPrimary>"u"&&(S.isPrimary=i.touches.length===1&&i.type==="touchstart"),typeof S.width>"u"&&(S.width=S.radiusX||1),typeof S.height>"u"&&(S.height=S.radiusY||1),typeof S.tiltX>"u"&&(S.tiltX=0),typeof S.tiltY>"u"&&(S.tiltY=0),typeof S.pointerType>"u"&&(S.pointerType="touch"),typeof S.pointerId>"u"&&(S.pointerId=S.identifier||0),typeof S.pressure>"u"&&(S.pressure=S.force||.5),typeof S.twist>"u"&&(S.twist=0),typeof S.tangentialPressure>"u"&&(S.tangentialPressure=0),typeof S.layerX>"u"&&(S.layerX=S.offsetX=S.clientX),typeof S.layerY>"u"&&(S.layerY=S.offsetY=S.clientY),S.isNormalized=!0,S.type=i.type,l.push(S)}else if(!globalThis.MouseEvent||i instanceof MouseEvent&&(!this.supportsPointerEvents||!(i instanceof globalThis.PointerEvent))){const c=i;typeof c.isPrimary>"u"&&(c.isPrimary=!0),typeof c.width>"u"&&(c.width=1),typeof c.height>"u"&&(c.height=1),typeof c.tiltX>"u"&&(c.tiltX=0),typeof c.tiltY>"u"&&(c.tiltY=0),typeof c.pointerType>"u"&&(c.pointerType="mouse"),typeof c.pointerId>"u"&&(c.pointerId=hd),typeof c.pressure>"u"&&(c.pressure=.5),typeof c.twist>"u"&&(c.twist=0),typeof c.tangentialPressure>"u"&&(c.tangentialPressure=0),c.isNormalized=!0,l.push(c)}else l.push(i);return l}normalizeWheelEvent(i){const l=this.rootWheelEvent;return this.transferMouseData(l,i),l.deltaX=i.deltaX,l.deltaY=i.deltaY,l.deltaZ=i.deltaZ,l.deltaMode=i.deltaMode,this.mapPositionToPoint(l.screen,i.clientX,i.clientY),l.global.copyFrom(l.screen),l.offset.copyFrom(l.screen),l.nativeEvent=i,l.type=i.type,l}bootstrapEvent(i,l){return i.originalEvent=null,i.nativeEvent=l,i.pointerId=l.pointerId,i.width=l.width,i.height=l.height,i.isPrimary=l.isPrimary,i.pointerType=l.pointerType,i.pressure=l.pressure,i.tangentialPressure=l.tangentialPressure,i.tiltX=l.tiltX,i.tiltY=l.tiltY,i.twist=l.twist,this.transferMouseData(i,l),this.mapPositionToPoint(i.screen,l.clientX,l.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.isTrusted=l.isTrusted,i.type==="pointerleave"&&(i.type="pointerout"),i.type.startsWith("mouse")&&(i.type=i.type.replace("mouse","pointer")),i.type.startsWith("touch")&&(i.type=Oh[i.type]||i.type),i}transferMouseData(i,l){i.isTrusted=l.isTrusted,i.srcElement=l.srcElement,i.timeStamp=performance.now(),i.type=l.type,i.altKey=l.altKey,i.button=l.button,i.buttons=l.buttons,i.client.x=l.clientX,i.client.y=l.clientY,i.ctrlKey=l.ctrlKey,i.metaKey=l.metaKey,i.movement.x=l.movementX,i.movement.y=l.movementY,i.page.x=l.pageX,i.page.y=l.pageY,i.relatedTarget=null,i.shiftKey=l.shiftKey}};pa.extension={name:"events",type:[It.RendererSystem,It.CanvasRendererSystem]},pa.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let nu=pa;zt.add(nu);function Fh(u){return u==="dynamic"||u==="static"}const cd={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var u;return(u=this._internalInteractive)!=null?u:Fh(nu.defaultEventMode)},set interactive(u){ne("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=u,this.eventMode=u?"static":"auto"},_internalEventMode:void 0,get eventMode(){var u;return(u=this._internalEventMode)!=null?u:nu.defaultEventMode},set eventMode(u){this._internalInteractive=Fh(u),this._internalEventMode=u},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(u,i,l){const c=typeof l=="boolean"&&l||typeof l=="object"&&l.capture,f=typeof i=="function"?void 0:i;u=c?`${u}capture`:u,i=typeof i=="function"?i:i.handleEvent,this.on(u,i,f)},removeEventListener(u,i,l){const c=typeof l=="boolean"&&l||typeof l=="object"&&l.capture,f=typeof i=="function"?void 0:i;u=c?`${u}capture`:u,i=typeof i=="function"?i:i.handleEvent,this.off(u,i,f)},dispatchEvent(u){if(!(u instanceof Fo))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return u.defaultPrevented=!1,u.path=null,u.target=this,u.manager.dispatchEvent(u),!u.defaultPrevented}};ti.mixin(cd);const Nh={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ti.mixin(Nh);const tl=9,No=100,dd=0,fd=0,Do=2,Dh=1,el=-1e3,Tn=-1e3,rl=2;class ma{constructor(i){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Bt.tablet||Bt.phone)&&this.createTouchHook();const l=document.createElement("div");l.style.width=`${No}px`,l.style.height=`${No}px`,l.style.position="absolute",l.style.top=`${dd}px`,l.style.left=`${fd}px`,l.style.zIndex=Do.toString(),this.div=l,this.renderer=i,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const i=document.createElement("button");i.style.width=`${Dh}px`,i.style.height=`${Dh}px`,i.style.position="absolute",i.style.top=`${el}px`,i.style.left=`${Tn}px`,i.style.zIndex=rl.toString(),i.style.backgroundColor="#FF0000",i.title="select to enable accessibility for this content",i.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(i),this._hookDiv=i}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var i;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(i=this.renderer.view.parentNode)==null||i.appendChild(this.div))}deactivate(){var i;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(i=this.div.parentNode)==null||i.removeChild(this.div))}updateAccessibleObjects(i){if(!i.visible||!i.accessibleChildren)return;i.accessible&&i.isInteractive()&&(i._accessibleActive||this.addChild(i),i.renderId=this.renderId);const l=i.children;if(l)for(let c=0;c<l.length;c++)this.updateAccessibleObjects(l[c])}update(){const i=performance.now();if(Bt.android.device&&i<this.androidUpdateCount||(this.androidUpdateCount=i+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:l,y:c,width:f,height:S}=this.renderer.view.getBoundingClientRect(),{width:N,height:U,resolution:W}=this.renderer,Q=f/N*W,lt=S/U*W;let ft=this.div;ft.style.left=`${l}px`,ft.style.top=`${c}px`,ft.style.width=`${N}px`,ft.style.height=`${U}px`;for(let mt=0;mt<this.children.length;mt++){const _t=this.children[mt];if(_t.renderId!==this.renderId)_t._accessibleActive=!1,Qs(this.children,mt,1),this.div.removeChild(_t._accessibleDiv),this.pool.push(_t._accessibleDiv),_t._accessibleDiv=null,mt--;else{ft=_t._accessibleDiv;let Pt=_t.hitArea;const Dt=_t.worldTransform;_t.hitArea?(ft.style.left=`${(Dt.tx+Pt.x*Dt.a)*Q}px`,ft.style.top=`${(Dt.ty+Pt.y*Dt.d)*lt}px`,ft.style.width=`${Pt.width*Dt.a*Q}px`,ft.style.height=`${Pt.height*Dt.d*lt}px`):(Pt=_t.getBounds(),this.capHitArea(Pt),ft.style.left=`${Pt.x*Q}px`,ft.style.top=`${Pt.y*lt}px`,ft.style.width=`${Pt.width*Q}px`,ft.style.height=`${Pt.height*lt}px`,ft.title!==_t.accessibleTitle&&_t.accessibleTitle!==null&&(ft.title=_t.accessibleTitle),ft.getAttribute("aria-label")!==_t.accessibleHint&&_t.accessibleHint!==null&&ft.setAttribute("aria-label",_t.accessibleHint)),(_t.accessibleTitle!==ft.title||_t.tabIndex!==ft.tabIndex)&&(ft.title=_t.accessibleTitle,ft.tabIndex=_t.tabIndex,this.debug&&this.updateDebugHTML(ft))}}this.renderId++}updateDebugHTML(i){i.innerHTML=`type: ${i.type}</br> title : ${i.title}</br> tabIndex: ${i.tabIndex}`}capHitArea(i){i.x<0&&(i.width+=i.x,i.x=0),i.y<0&&(i.height+=i.y,i.y=0);const{width:l,height:c}=this.renderer;i.x+i.width>l&&(i.width=l-i.x),i.y+i.height>c&&(i.height=c-i.y)}addChild(i){let l=this.pool.pop();l||(l=document.createElement("button"),l.style.width=`${No}px`,l.style.height=`${No}px`,l.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",l.style.position="absolute",l.style.zIndex=Do.toString(),l.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?l.setAttribute("aria-live","off"):l.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?l.setAttribute("aria-relevant","additions"):l.setAttribute("aria-relevant","text"),l.addEventListener("click",this._onClick.bind(this)),l.addEventListener("focus",this._onFocus.bind(this)),l.addEventListener("focusout",this._onFocusOut.bind(this))),l.style.pointerEvents=i.accessiblePointerEvents,l.type=i.accessibleType,i.accessibleTitle&&i.accessibleTitle!==null?l.title=i.accessibleTitle:(!i.accessibleHint||i.accessibleHint===null)&&(l.title=`displayObject ${i.tabIndex}`),i.accessibleHint&&i.accessibleHint!==null&&l.setAttribute("aria-label",i.accessibleHint),this.debug&&this.updateDebugHTML(l),i._accessibleActive=!0,i._accessibleDiv=l,l.displayObject=i,this.children.push(i),this.div.appendChild(i._accessibleDiv),i._accessibleDiv.tabIndex=i.tabIndex}_dispatchEvent(i,l){const{displayObject:c}=i.target,f=this.renderer.events.rootBoundary,S=Object.assign(new Fo(f),{target:c});f.rootTarget=this.renderer.lastObjectRendered,l.forEach(N=>f.dispatchEvent(S,N))}_onClick(i){this._dispatchEvent(i,["click","pointertap","tap"])}_onFocus(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","assertive"),this._dispatchEvent(i,["mouseover"])}_onFocusOut(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","polite"),this._dispatchEvent(i,["mouseout"])}_onKeyDown(i){i.keyCode===tl&&this.activate()}_onMouseMove(i){i.movementX===0&&i.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}ma.extension={name:"accessibility",type:[It.RendererPlugin,It.CanvasRendererPlugin]},zt.add(ma);const oo=class Cp{constructor(i){this.stage=new wi,i=Object.assign({forceCanvas:!1},i),this.renderer=bs(i),Cp._plugins.forEach(l=>{l.init.call(this,i)})}render(){this.renderer.render(this.stage)}get view(){var i;return(i=this.renderer)==null?void 0:i.view}get screen(){var i;return(i=this.renderer)==null?void 0:i.screen}destroy(i,l){const c=Cp._plugins.slice(0);c.reverse(),c.forEach(f=>{f.destroy.call(this)}),this.stage.destroy(l),this.stage=null,this.renderer.destroy(i),this.renderer=null}};oo._plugins=[];let il=oo;zt.handleByList(It.Application,il._plugins);class Bo{static init(i){Object.defineProperty(this,"resizeTo",{set(l){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=l,l&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let l,c;if(this._resizeTo===globalThis.window)l=globalThis.innerWidth,c=globalThis.innerHeight;else{const{clientWidth:f,clientHeight:S}=this._resizeTo;l=f,c=S}this.renderer.resize(l,c),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=i.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Bo.extension=It.Application,zt.add(Bo);const Bh={loader:It.LoadParser,resolver:It.ResolveParser,cache:It.CacheParser,detection:It.DetectionParser};zt.handle(It.Asset,u=>{const i=u.ref;Object.entries(Bh).filter(([l])=>!!i[l]).forEach(([l,c])=>{var f;return zt.add(Object.assign(i[l],{extension:(f=i[l].extension)!=null?f:c}))})},u=>{const i=u.ref;Object.keys(Bh).filter(l=>!!i[l]).forEach(l=>zt.remove(i[l]))});class Lh{constructor(i,l=!1){this._loader=i,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=l}add(i){i.forEach(l=>{this._assetList.push(l)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){return he(this,null,function*(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const i=[],l=Math.min(this._assetList.length,this._maxConcurrent);for(let c=0;c<l;c++)i.push(this._assetList.pop());yield this._loader.load(i),this._isLoading=!1,this._next()}})}get active(){return this._isActive}set active(i){this._isActive!==i&&(this._isActive=i,i&&!this._isLoading&&this._next())}}function Jr(u,i){const l=u.split("?")[0],c=Fr.extname(l).toLowerCase();return Array.isArray(i)?i.includes(c):c===i}const Ps=(u,i,l=!1)=>(Array.isArray(u)||(u=[u]),i?u.map(c=>typeof c=="string"||l?i(c):c):u);class kh{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(i){return this._cache.has(i)}get(i){const l=this._cache.get(i);return l||console.warn(`[Assets] Asset id ${i} was not found in the Cache`),l}set(i,l){const c=Ps(i);let f;for(let U=0;U<this.parsers.length;U++){const W=this.parsers[U];if(W.test(l)){f=W.getCacheableAssets(c,l);break}}f||(f={},c.forEach(U=>{f[U]=l}));const S=Object.keys(f),N={cacheKeys:S,keys:c};if(c.forEach(U=>{this._cacheMap.set(U,N)}),S.forEach(U=>{this._cache.has(U)&&this._cache.get(U)!==l&&console.warn("[Cache] already has key:",U),this._cache.set(U,f[U])}),l instanceof hr){const U=l;c.forEach(W=>{U.baseTexture!==hr.EMPTY.baseTexture&&Cr.addToCache(U.baseTexture,W),hr.addToCache(U,W)})}}remove(i){if(!this._cacheMap.has(i)){console.warn(`[Assets] Asset id ${i} was not found in the Cache`);return}const l=this._cacheMap.get(i);l.cacheKeys.forEach(c=>{this._cache.delete(c)}),l.keys.forEach(c=>{this._cacheMap.delete(c)})}get parsers(){return this._parsers}}const zn=new kh,Lo=u=>!Array.isArray(u);class Uh{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(i,l,c)=>(this._parsersValidated=!1,i[l]=c,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(i,l){const c={promise:null,parser:null};return c.promise=(()=>he(this,null,function*(){var N,U;let f=null,S=null;if(l.loadParser&&(S=this._parserHash[l.loadParser],S||console.warn(`[Assets] specified load parser "${l.loadParser}" not found while loading ${i}`)),!S){for(let W=0;W<this.parsers.length;W++){const Q=this.parsers[W];if(Q.load&&((N=Q.test)!=null&&N.call(Q,i,l,this))){S=Q;break}}if(!S)return console.warn(`[Assets] ${i} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}f=yield S.load(i,l,this),c.parser=S;for(let W=0;W<this.parsers.length;W++){const Q=this.parsers[W];Q.parse&&Q.parse&&(yield(U=Q.testParse)==null?void 0:U.call(Q,f,l,this))&&(f=(yield Q.parse(f,l,this))||f,c.parser=Q)}return f}))(),c}load(i,l){return he(this,null,function*(){this._parsersValidated||this._validateParsers();let c=0;const f={},S=Lo(i),N=Ps(i,Q=>({alias:[Q],src:Q})),U=N.length,W=N.map(Q=>he(this,null,function*(){const lt=Fr.toAbsolute(Q.src);if(!f[Q.src])try{this.promiseCache[lt]||(this.promiseCache[lt]=this._getLoadPromiseAndParser(lt,Q)),f[Q.src]=yield this.promiseCache[lt].promise,l&&l(++c/U)}catch(ft){throw delete this.promiseCache[lt],delete f[Q.src],new Error(`[Loader.load] Failed to load ${lt}.
${ft}`)}}));return yield Promise.all(W),S?f[N[0].src]:f})}unload(i){return he(this,null,function*(){const l=Ps(i,c=>({alias:[c],src:c})).map(c=>he(this,null,function*(){var N,U;const f=Fr.toAbsolute(c.src),S=this.promiseCache[f];if(S){const W=yield S.promise;delete this.promiseCache[f],(U=(N=S.parser)==null?void 0:N.unload)==null||U.call(N,W,c,this)}}));yield Promise.all(l)})}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(i=>i.name).reduce((i,l)=>(i[l.name]&&console.warn(`[Assets] loadParser name conflict "${l.name}"`),gi(He({},i),{[l.name]:l})),{})}}var Qi=(u=>(u[u.Low=0]="Low",u[u.Normal=1]="Normal",u[u.High=2]="High",u))(Qi||{});function oi(u,i){if(Array.isArray(i)){for(const l of i)if(u.startsWith(`data:${l}`))return!0;return!1}return u.startsWith(`data:${i}`)}const zi=".json",Xi="application/json",ou={extension:{type:It.LoadParser,priority:Qi.Low},name:"loadJson",test(u){return oi(u,Xi)||Jr(u,zi)},load(u){return he(this,null,function*(){return yield(yield st.ADAPTER.fetch(u)).json()})}};zt.add(ou);const sl=".txt",nl="text/plain",Ff={name:"loadTxt",extension:{type:It.LoadParser,priority:Qi.Low},test(u){return oi(u,nl)||Jr(u,sl)},load(u){return he(this,null,function*(){return yield(yield st.ADAPTER.fetch(u)).text()})}};zt.add(Ff);const os=["normal","bold","100","200","300","400","500","600","700","800","900"],Gh=[".ttf",".otf",".woff",".woff2"],Vh=["font/ttf","font/otf","font/woff","font/woff2"],zh=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function En(u){const i=Fr.extname(u),l=Fr.basename(u,i).replace(/(-|_)/g," ").toLowerCase().split(" ").map(S=>S.charAt(0).toUpperCase()+S.slice(1));let c=l.length>0;for(const S of l)if(!S.match(zh)){c=!1;break}let f=l.join(" ");return c||(f=`"${f.replace(/[\\"]/g,"\\$&")}"`),f}const Ys=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function ol(u){return Ys.test(u)?u:encodeURI(u)}const Hh={extension:{type:It.LoadParser,priority:Qi.Low},name:"loadWebFont",test(u){return oi(u,Vh)||Jr(u,Gh)},load(u,i){return he(this,null,function*(){var c,f,S,N,U,W;const l=st.ADAPTER.getFontFaceSet();if(l){const Q=[],lt=(f=(c=i.data)==null?void 0:c.family)!=null?f:En(u),ft=(U=(N=(S=i.data)==null?void 0:S.weights)==null?void 0:N.filter(_t=>os.includes(_t)))!=null?U:["normal"],mt=(W=i.data)!=null?W:{};for(let _t=0;_t<ft.length;_t++){const Pt=ft[_t],Dt=new FontFace(lt,`url(${ol(u)})`,gi(He({},mt),{weight:Pt}));yield Dt.load(),l.add(Dt),Q.push(Dt)}return Q.length===1?Q[0]:Q}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})},unload(u){(Array.isArray(u)?u:[u]).forEach(i=>st.ADAPTER.getFontFaceSet().delete(i))}};zt.add(Hh);let au=0,lu;const pd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",md={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${pd}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},gd={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let uu;class yd{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(i=>{const l=URL.createObjectURL(new Blob([md.code],{type:"application/javascript"})),c=new Worker(l);c.addEventListener("message",f=>{c.terminate(),URL.revokeObjectURL(l),i(f.data)})}),this._isImageBitmapSupported)}loadImageBitmap(i){return this._run("loadImageBitmap",[i])}_initWorkers(){return he(this,null,function*(){this._initialized||(this._initialized=!0)})}getWorker(){lu===void 0&&(lu=navigator.hardwareConcurrency||4);let i=this.workerPool.pop();return!i&&this._createdWorkers<lu&&(uu||(uu=URL.createObjectURL(new Blob([gd.code],{type:"application/javascript"}))),this._createdWorkers++,i=new Worker(uu),i.addEventListener("message",l=>{this.complete(l.data),this.returnWorker(l.target),this.next()})),i}returnWorker(i){this.workerPool.push(i)}complete(i){i.error!==void 0?this.resolveHash[i.uuid].reject(i.error):this.resolveHash[i.uuid].resolve(i.data),this.resolveHash[i.uuid]=null}_run(i,l){return he(this,null,function*(){yield this._initWorkers();const c=new Promise((f,S)=>{this.queue.push({id:i,arguments:l,resolve:f,reject:S})});return this.next(),c})}next(){if(!this.queue.length)return;const i=this.getWorker();if(!i)return;const l=this.queue.pop(),c=l.id;this.resolveHash[au]={resolve:l.resolve,reject:l.reject},i.postMessage({data:l.arguments,uuid:au++,id:c})}}const jh=new yd;function ga(u,i,l){u.resource.internal=!0;const c=new hr(u),f=()=>{delete i.promiseCache[l],zn.has(l)&&zn.remove(l)};return c.baseTexture.once("destroyed",()=>{l in i.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),f())}),c.once("destroyed",()=>{u.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),f())}),c}const al=[".jpeg",".jpg",".png",".webp",".avif"],vd=["image/jpeg","image/png","image/webp","image/avif"];function hu(u){return he(this,null,function*(){const i=yield st.ADAPTER.fetch(u);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${u}: ${i.status} ${i.statusText}`);const l=yield i.blob();return yield createImageBitmap(l)})}const ko={name:"loadTextures",extension:{type:It.LoadParser,priority:Qi.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(u){return oi(u,vd)||Jr(u,al)},load(u,i,l){return he(this,null,function*(){var U,W;const c=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let f;c?this.config.preferWorkers&&(yield jh.isImageBitmapSupported())?f=yield jh.loadImageBitmap(u):f=yield hu(u):f=yield new Promise((Q,lt)=>{const ft=new Image;ft.crossOrigin=this.config.crossOrigin,ft.src=u,ft.complete?Q(ft):(ft.onload=()=>Q(ft),ft.onerror=mt=>lt(mt))});const S=He({},i.data);(U=S.resolution)!=null||(S.resolution=Ht(u)),c&&((W=S.resourceOptions)==null?void 0:W.ownsImageBitmap)===void 0&&(S.resourceOptions=He({},S.resourceOptions),S.resourceOptions.ownsImageBitmap=!0);const N=new Cr(f,S);return N.resource.src=u,ga(N,l,u)})},unload(u){u.destroy(!0)}};zt.add(ko);const _d=".svg",Xh="image/svg+xml",xd={extension:{type:It.LoadParser,priority:Qi.High},name:"loadSVG",test(u){return oi(u,Xh)||Jr(u,_d)},testParse(u){return he(this,null,function*(){return ua.test(u)})},parse(u,i,l){return he(this,null,function*(){var S;const c=new ua(u,(S=i==null?void 0:i.data)==null?void 0:S.resourceOptions);yield c.load();const f=new Cr(c,He({resolution:Ht(u)},i==null?void 0:i.data));return f.resource.src=i.src,ga(f,l,i.src)})},load(u,i){return he(this,null,function*(){return(yield st.ADAPTER.fetch(u)).text()})},unload:ko.unload};zt.add(xd);const Td=[".mp4",".m4v",".webm",".ogv"],Ed=["video/mp4","video/webm","video/ogg"],Sd={name:"loadVideo",extension:{type:It.LoadParser,priority:Qi.High},config:{defaultAutoPlay:!0},test(u){return oi(u,Ed)||Jr(u,Td)},load(u,i,l){return he(this,null,function*(){var N;let c;const f=yield(yield st.ADAPTER.fetch(u)).blob(),S=URL.createObjectURL(f);try{const U=He({autoPlay:this.config.defaultAutoPlay},(N=i==null?void 0:i.data)==null?void 0:N.resourceOptions),W=new Ds(S,U);yield W.load();const Q=new Cr(W,He({alphaMode:yield ui(),resolution:Ht(u)},i==null?void 0:i.data));Q.resource.src=u,c=ga(Q,l,u),c.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(S)})}catch(U){throw URL.revokeObjectURL(S),U}return c})},unload(u){u.destroy(!0)}};zt.add(Sd);function cu(u,i,l,c,f){const S=i[l];for(let N=0;N<S.length;N++){const U=S[N];l<i.length-1?cu(u.replace(c[l],U),i,l+1,c,f):f.push(u.replace(c[l],U))}}function bd(u){const i=/\{(.*?)\}/g,l=u.match(i),c=[];if(l){const f=[];l.forEach(S=>{const N=S.substring(1,S.length-1).split(",");f.push(N)}),cu(u,f,0,l,c)}else c.push(u);return c}class Ad{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(i,l)=>`${i}${this._bundleIdConnector}${l}`,extractAssetIdFromBundle:(i,l)=>l.replace(`${i}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(i){var l,c,f;if(this._bundleIdConnector=(l=i.connector)!=null?l:this._bundleIdConnector,this._createBundleAssetId=(c=i.createBundleAssetId)!=null?c:this._createBundleAssetId,this._extractAssetIdFromBundle=(f=i.extractAssetIdFromBundle)!=null?f:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...i){i.forEach(l=>{this._preferredOrder.push(l),l.priority||(l.priority=Object.keys(l.params))}),this._resolverHash={}}set basePath(i){this._basePath=i}get basePath(){return this._basePath}set rootPath(i){this._rootPath=i}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(i){if(typeof i=="string")this._defaultSearchParams=i;else{const l=i;this._defaultSearchParams=Object.keys(l).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(l[c])}`).join("&")}}getAlias(i){const{alias:l,name:c,src:f,srcs:S}=i;return Ps(l||c||f||S,N=>{var U;return typeof N=="string"?N:Array.isArray(N)?N.map(W=>{var Q,lt;return(lt=(Q=W==null?void 0:W.src)!=null?Q:W==null?void 0:W.srcs)!=null?lt:W}):N!=null&&N.src||N!=null&&N.srcs?(U=N.src)!=null?U:N.srcs:N},!0)}addManifest(i){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=i,i.bundles.forEach(l=>{this.addBundle(l.name,l.assets)})}addBundle(i,l){const c=[];Array.isArray(l)?l.forEach(f=>{var W,Q;const S=(W=f.src)!=null?W:f.srcs,N=(Q=f.alias)!=null?Q:f.name;let U;if(typeof N=="string"){const lt=this._createBundleAssetId(i,N);c.push(lt),U=[N,lt]}else{const lt=N.map(ft=>this._createBundleAssetId(i,ft));c.push(...lt),U=[...N,...lt]}this.add(gi(He({},f),{alias:U,src:S}))}):Object.keys(l).forEach(f=>{var N;const S=[f,this._createBundleAssetId(i,f)];if(typeof l[f]=="string")this.add({alias:S,src:l[f]});else if(Array.isArray(l[f]))this.add({alias:S,src:l[f]});else{const U=l[f],W=(N=U.src)!=null?N:U.srcs;this.add(gi(He({},U),{alias:S,src:Array.isArray(W)?W:[W]}))}c.push(...S)}),this._bundles[i]=c}add(i,l,c,f,S){const N=[];typeof i=="string"||Array.isArray(i)&&typeof i[0]=="string"?(ne("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),N.push({alias:i,src:l,data:c,format:f,loadParser:S})):Array.isArray(i)?N.push(...i):N.push(i);let U;U=W=>{this.hasKey(W)&&console.warn(`[Resolver] already has key: ${W} overwriting`)},Ps(N).forEach(W=>{const{src:Q,srcs:lt}=W;let{data:ft,format:mt,loadParser:_t}=W;const Pt=Ps(Q||lt).map(Jt=>typeof Jt=="string"?bd(Jt):Array.isArray(Jt)?Jt:[Jt]),Dt=this.getAlias(W);Array.isArray(Dt)?Dt.forEach(U):U(Dt);const Wt=[];Pt.forEach(Jt=>{Jt.forEach(pe=>{var le,De,xr;let re={};if(typeof pe!="object"){re.src=pe;for(let Be=0;Be<this._parsers.length;Be++){const Ce=this._parsers[Be];if(Ce.test(pe)){re=Ce.parse(pe);break}}}else ft=(le=pe.data)!=null?le:ft,mt=(De=pe.format)!=null?De:mt,_t=(xr=pe.loadParser)!=null?xr:_t,re=He(He({},re),pe);if(!Dt)throw new Error(`[Resolver] alias is undefined for this asset: ${re.src}`);re=this.buildResolvedAsset(re,{aliases:Dt,data:ft,format:mt,loadParser:_t}),Wt.push(re)})}),Dt.forEach(Jt=>{this._assetMap[Jt]=Wt})})}resolveBundle(i){const l=Lo(i);i=Ps(i);const c={};return i.forEach(f=>{const S=this._bundles[f];if(S){const N=this.resolve(S),U={};for(const W in N){const Q=N[W];U[this._extractAssetIdFromBundle(f,W)]=Q}c[f]=U}}),l?c[i[0]]:c}resolveUrl(i){const l=this.resolve(i);if(typeof i!="string"){const c={};for(const f in l)c[f]=l[f].src;return c}return l.src}resolve(i){const l=Lo(i);i=Ps(i);const c={};return i.forEach(f=>{var S;if(!this._resolverHash[f])if(this._assetMap[f]){let N=this._assetMap[f];const U=N[0],W=this._getPreferredOrder(N);W==null||W.priority.forEach(Q=>{W.params[Q].forEach(lt=>{const ft=N.filter(mt=>mt[Q]?mt[Q]===lt:!1);ft.length&&(N=ft)})}),this._resolverHash[f]=(S=N[0])!=null?S:U}else this._resolverHash[f]=this.buildResolvedAsset({alias:[f],src:f},{});c[f]=this._resolverHash[f]}),l?c[i[0]]:c}hasKey(i){return!!this._assetMap[i]}hasBundle(i){return!!this._bundles[i]}_getPreferredOrder(i){for(let l=0;l<i.length;l++){const c=i[0],f=this._preferredOrder.find(S=>S.params.format.includes(c.format));if(f)return f}return this._preferredOrder[0]}_appendDefaultSearchParams(i){if(!this._defaultSearchParams)return i;const l=/\?/.test(i)?"&":"?";return`${i}${l}${this._defaultSearchParams}`}buildResolvedAsset(i,l){var U;const{aliases:c,data:f,loadParser:S,format:N}=l;return(this._basePath||this._rootPath)&&(i.src=Fr.toAbsolute(i.src,this._basePath,this._rootPath)),i.alias=(U=c!=null?c:i.alias)!=null?U:[i.src],i.src=this._appendDefaultSearchParams(i.src),i.data=He(He({},f||{}),i.data),i.loadParser=S!=null?S:i.loadParser,i.format=N!=null?N:Fr.extname(i.src).slice(1),i.srcs=i.src,i.name=i.alias,i}}class wd{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ad,this.loader=new Uh,this.cache=zn,this._backgroundLoader=new Lh(this.loader),this._backgroundLoader.active=!0,this.reset()}init(){return he(this,arguments,function*(i={}){var S,N,U;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,i.defaultSearchParams&&this.resolver.setDefaultSearchParams(i.defaultSearchParams),i.basePath&&(this.resolver.basePath=i.basePath),i.bundleIdentifier&&this.resolver.setBundleIdentifier(i.bundleIdentifier),i.manifest){let W=i.manifest;typeof W=="string"&&(W=yield this.load(W)),this.resolver.addManifest(W)}const l=(N=(S=i.texturePreference)==null?void 0:S.resolution)!=null?N:1,c=typeof l=="number"?[l]:l,f=yield this._detectFormats({preferredFormats:(U=i.texturePreference)==null?void 0:U.format,skipDetections:i.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:f,resolution:c}}),i.preferences&&this.setPreferences(i.preferences)})}add(i,l,c,f,S){this.resolver.add(i,l,c,f,S)}load(i,l){return he(this,null,function*(){this._initialized||(yield this.init());const c=Lo(i),f=Ps(i).map(U=>{if(typeof U!="string"){const W=this.resolver.getAlias(U);return W.some(Q=>!this.resolver.hasKey(Q))&&this.add(U),Array.isArray(W)?W[0]:W}return this.resolver.hasKey(U)||this.add({alias:U,src:U}),U}),S=this.resolver.resolve(f),N=yield this._mapLoadToResolve(S,l);return c?N[f[0]]:N})}addBundle(i,l){this.resolver.addBundle(i,l)}loadBundle(i,l){return he(this,null,function*(){this._initialized||(yield this.init());let c=!1;typeof i=="string"&&(c=!0,i=[i]);const f=this.resolver.resolveBundle(i),S={},N=Object.keys(f);let U=0,W=0;const Q=()=>{l==null||l(++U/W)},lt=N.map(ft=>{const mt=f[ft];return W+=Object.keys(mt).length,this._mapLoadToResolve(mt,Q).then(_t=>{S[ft]=_t})});return yield Promise.all(lt),c?S[i[0]]:S})}backgroundLoad(i){return he(this,null,function*(){this._initialized||(yield this.init()),typeof i=="string"&&(i=[i]);const l=this.resolver.resolve(i);this._backgroundLoader.add(Object.values(l))})}backgroundLoadBundle(i){return he(this,null,function*(){this._initialized||(yield this.init()),typeof i=="string"&&(i=[i]);const l=this.resolver.resolveBundle(i);Object.values(l).forEach(c=>{this._backgroundLoader.add(Object.values(c))})})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(i){if(typeof i=="string")return zn.get(i);const l={};for(let c=0;c<i.length;c++)l[c]=zn.get(i[c]);return l}_mapLoadToResolve(i,l){return he(this,null,function*(){const c=Object.values(i),f=Object.keys(i);this._backgroundLoader.active=!1;const S=yield this.loader.load(c,l);this._backgroundLoader.active=!0;const N={};return c.forEach((U,W)=>{const Q=S[U.src],lt=[U.src];U.alias&&lt.push(...U.alias),N[f[W]]=Q,zn.set(lt,Q)}),N})}unload(i){return he(this,null,function*(){this._initialized||(yield this.init());const l=Ps(i).map(f=>typeof f!="string"?f.src:f),c=this.resolver.resolve(l);yield this._unloadFromResolved(c)})}unloadBundle(i){return he(this,null,function*(){this._initialized||(yield this.init()),i=Ps(i);const l=this.resolver.resolveBundle(i),c=Object.keys(l).map(f=>this._unloadFromResolved(l[f]));yield Promise.all(c)})}_unloadFromResolved(i){return he(this,null,function*(){const l=Object.values(i);l.forEach(c=>{zn.remove(c.src)}),yield this.loader.unload(l)})}_detectFormats(i){return he(this,null,function*(){let l=[];i.preferredFormats&&(l=Array.isArray(i.preferredFormats)?i.preferredFormats:[i.preferredFormats]);for(const c of i.detections)i.skipDetections||(yield c.test())?l=yield c.add(l):i.skipDetections||(l=yield c.remove(l));return l=l.filter((c,f)=>l.indexOf(c)===f),l})}get detections(){return this._detections}get preferWorkers(){return ko.config.preferWorkers}set preferWorkers(i){ne("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:i})}setPreferences(i){this.loader.parsers.forEach(l=>{l.config&&Object.keys(l.config).filter(c=>c in i).forEach(c=>{l.config[c]=i[c]})})}}const du=new wd;zt.handleByList(It.LoadParser,du.loader.parsers).handleByList(It.ResolveParser,du.resolver.parsers).handleByList(It.CacheParser,du.cache.parsers).handleByList(It.DetectionParser,du.detections);const Cd={extension:It.CacheParser,test:u=>Array.isArray(u)&&u.every(i=>i instanceof hr),getCacheableAssets:(u,i)=>{const l={};return u.forEach(c=>{i.forEach((f,S)=>{l[c+(S===0?"":S+1)]=f})}),l}};zt.add(Cd);function Pd(u){return he(this,null,function*(){if("Image"in globalThis)return new Promise(i=>{const l=new Image;l.onload=()=>{i(!0)},l.onerror=()=>{i(!1)},l.src=u});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const i=yield(yield fetch(u)).blob();yield createImageBitmap(i)}catch(i){return!1}return!0}return!1})}const Nf={extension:{type:It.DetectionParser,priority:1},test:()=>he(this,null,function*(){return Pd("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),add:u=>he(this,null,function*(){return[...u,"avif"]}),remove:u=>he(this,null,function*(){return u.filter(i=>i!=="avif")})};zt.add(Nf);const Md={extension:{type:It.DetectionParser,priority:0},test:()=>he(this,null,function*(){return Pd("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")}),add:u=>he(this,null,function*(){return[...u,"webp"]}),remove:u=>he(this,null,function*(){return u.filter(i=>i!=="webp")})};zt.add(Md);const Wh=["png","jpg","jpeg"],Rd={extension:{type:It.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:u=>he(this,null,function*(){return[...u,...Wh]}),remove:u=>he(this,null,function*(){return u.filter(i=>!Wh.includes(i))})};zt.add(Rd);const fu="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function $h(u){return fu?!1:document.createElement("video").canPlayType(u)!==""}const Df={extension:{type:It.DetectionParser,priority:0},test:()=>he(this,null,function*(){return $h("video/webm")}),add:u=>he(this,null,function*(){return[...u,"webm"]}),remove:u=>he(this,null,function*(){return u.filter(i=>i!=="webm")})};zt.add(Df);const Bf={extension:{type:It.DetectionParser,priority:0},test:()=>he(this,null,function*(){return $h("video/mp4")}),add:u=>he(this,null,function*(){return[...u,"mp4","m4v"]}),remove:u=>he(this,null,function*(){return u.filter(i=>i!=="mp4"&&i!=="m4v")})};zt.add(Bf);const ya={extension:{type:It.DetectionParser,priority:0},test:()=>he(this,null,function*(){return $h("video/ogg")}),add:u=>he(this,null,function*(){return[...u,"ogv"]}),remove:u=>he(this,null,function*(){return u.filter(i=>i!=="ogv")})};zt.add(ya);const Yh={extension:It.ResolveParser,test:ko.test,parse:u=>{var i,l;return{resolution:parseFloat((l=(i=st.RETINA_PREFIX.exec(u))==null?void 0:i[1])!=null?l:"1"),format:Fr.extname(u).slice(1),src:u}}};zt.add(Yh);const ll=(u,i)=>{const l=i.split("?")[1];return l&&(u+=`?${l}`),u};var ks=(u=>(u[u.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",u[u.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",u[u.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",u[u.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",u[u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",u[u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",u[u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",u[u.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",u[u.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",u[u.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",u[u.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",u[u.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",u[u.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",u[u.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",u[u.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",u[u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",u[u.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",u[u.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",u[u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",u[u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",u[u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",u[u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",u[u.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",u[u.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",u[u.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",u[u.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",u[u.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",u))(ks||{});const ul={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Sn,Uo;function Kh(){Uo={s3tc:Sn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Sn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Sn.getExtension("WEBGL_compressed_texture_etc"),etc1:Sn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Sn.getExtension("WEBGL_compressed_texture_pvrtc")||Sn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Sn.getExtension("WEBGL_compressed_texture_atc"),astc:Sn.getExtension("WEBGL_compressed_texture_astc")}}const Id={extension:{type:It.DetectionParser,priority:2},test:()=>he(this,null,function*(){const u=st.ADAPTER.createCanvas().getContext("webgl");return u?(Sn=u,!0):(console.warn("WebGL not available for compressed textures."),!1)}),add:u=>he(this,null,function*(){Uo||Kh();const i=[];for(const l in Uo)Uo[l]&&i.push(l);return[...i,...u]}),remove:u=>he(this,null,function*(){return Uo||Kh(),u.filter(i=>!(i in Uo))})};zt.add(Id);class Lf extends gn{constructor(i,l={width:1,height:1,autoLoad:!0}){let c,f;typeof i=="string"?(c=i,f=new Uint8Array):(c=null,f=i),super(f,l),this.origin=c,this.buffer=f?new ee(f):null,this._load=null,this.loaded=!1,this.origin!==null&&l.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(i){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(i=>i.blob()).then(i=>i.arrayBuffer()).then(i=>(this.data=new Uint32Array(i),this.buffer=new ee(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),this)),this._load)}}class ki extends Lf{constructor(i,l){super(i,l),this.format=l.format,this.levels=l.levels||1,this._width=l.width,this._height=l.height,this._extension=ki._formatToExtension(this.format),(l.levelBuffers||this.buffer)&&(this._levelBuffers=l.levelBuffers||ki._createLevelBuffers(i instanceof Uint8Array?i:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(i,l,c){const f=i.gl;if(!i.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;f.pixelStorei(f.UNPACK_ALIGNMENT,4);for(let S=0,N=this.levels;S<N;S++){const{levelID:U,levelWidth:W,levelHeight:Q,levelBuffer:lt}=this._levelBuffers[S];f.compressedTexImage2D(f.TEXTURE_2D,U,this.format,W,Q,0,lt)}return!0}onBlobLoaded(){this._levelBuffers=ki._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(i){if(i>=33776&&i<=33779)return"s3tc";if(i>=37488&&i<=37497)return"etc";if(i>=35840&&i<=35843)return"pvrtc";if(i>=36196)return"etc1";if(i>=35986&&i<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(i,l,c,f,S,N,U){const W=new Array(c);let Q=i.byteOffset,lt=N,ft=U,mt=lt+f-1&~(f-1),_t=ft+S-1&~(S-1),Pt=mt*_t*ul[l];for(let Dt=0;Dt<c;Dt++)W[Dt]={levelID:Dt,levelWidth:c>1?lt:mt,levelHeight:c>1?ft:_t,levelBuffer:new Uint8Array(i.buffer,Q,Pt)},Q+=Pt,lt=lt>>1||1,ft=ft>>1||1,mt=lt+f-1&~(f-1),_t=ft+S-1&~(S-1),Pt=mt*_t*ul[l];return W}}const Ji=4,hl=124,Od=32,Zh=20,Fd=542327876,cl={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Qh={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},dl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Jh=1,Nd=2,Dd=4,qh=64,tc=512,Bd=131072,ec=827611204,pu=861165636,kf=894720068,Ld=808540228,rc=4,kd={[ec]:ks.COMPRESSED_RGBA_S3TC_DXT1_EXT,[pu]:ks.COMPRESSED_RGBA_S3TC_DXT3_EXT,[kf]:ks.COMPRESSED_RGBA_S3TC_DXT5_EXT},mu={70:ks.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:ks.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:ks.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:ks.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:ks.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:ks.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:ks.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:ks.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:ks.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Hn(u){const i=new Uint32Array(u);if(i[0]!==Fd)throw new Error("Invalid DDS file magic word");const l=new Uint32Array(u,0,hl/Uint32Array.BYTES_PER_ELEMENT),c=l[cl.HEIGHT],f=l[cl.WIDTH],S=l[cl.MIPMAP_COUNT],N=new Uint32Array(u,cl.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Od/Uint32Array.BYTES_PER_ELEMENT),U=N[Jh];if(U&Dd){const W=N[Qh.FOURCC];if(W!==Ld){const pe=kd[W],re=Ji+hl,le=new Uint8Array(u,re);return[new ki(le,{format:pe,width:f,height:c,levels:S})]}const Q=Ji+hl,lt=new Uint32Array(i.buffer,Q,Zh/Uint32Array.BYTES_PER_ELEMENT),ft=lt[dl.DXGI_FORMAT],mt=lt[dl.RESOURCE_DIMENSION],_t=lt[dl.MISC_FLAG],Pt=lt[dl.ARRAY_SIZE],Dt=mu[ft];if(Dt===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${ft}`);if(_t===rc)throw new Error("DDSParser does not support cubemap textures");if(mt===6)throw new Error("DDSParser does not supported 3D texture data");const Wt=new Array,Jt=Ji+hl+Zh;if(Pt===1)Wt.push(new Uint8Array(u,Jt));else{const pe=ul[Dt];let re=0,le=f,De=c;for(let Be=0;Be<S;Be++){const Ce=Math.max(1,le+3&-4),fr=Math.max(1,De+3&-4),wr=Ce*fr*pe;re+=wr,le=le>>>1,De=De>>>1}let xr=Jt;for(let Be=0;Be<Pt;Be++)Wt.push(new Uint8Array(u,xr,re)),xr+=re}return Wt.map(pe=>new ki(pe,{format:Dt,width:f,height:c,levels:S}))}throw U&qh?new Error("DDSParser does not support uncompressed texture data."):U&tc?new Error("DDSParser does not supported YUV uncompressed texture data."):U&Bd?new Error("DDSParser does not support single-channel (lumninance) texture data!"):U&Nd?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Ud=[171,75,84,88,32,49,49,187,13,10,26,10],Gd=67305985,Us={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},gu=64,ic={[p.UNSIGNED_BYTE]:1,[p.UNSIGNED_SHORT]:2,[p.INT]:4,[p.UNSIGNED_INT]:4,[p.FLOAT]:4,[p.HALF_FLOAT]:8},fl={[C.RGBA]:4,[C.RGB]:3,[C.RG]:2,[C.RED]:1,[C.LUMINANCE]:1,[C.LUMINANCE_ALPHA]:2,[C.ALPHA]:1},as={[p.UNSIGNED_SHORT_4_4_4_4]:2,[p.UNSIGNED_SHORT_5_5_5_1]:2,[p.UNSIGNED_SHORT_5_6_5]:2};function Uf(u,i,l=!1){const c=new DataView(i);if(!Gf(u,c))return null;const f=c.getUint32(Us.ENDIANNESS,!0)===Gd,S=c.getUint32(Us.GL_TYPE,f),N=c.getUint32(Us.GL_FORMAT,f),U=c.getUint32(Us.GL_INTERNAL_FORMAT,f),W=c.getUint32(Us.PIXEL_WIDTH,f),Q=c.getUint32(Us.PIXEL_HEIGHT,f)||1,lt=c.getUint32(Us.PIXEL_DEPTH,f)||1,ft=c.getUint32(Us.NUMBER_OF_ARRAY_ELEMENTS,f)||1,mt=c.getUint32(Us.NUMBER_OF_FACES,f),_t=c.getUint32(Us.NUMBER_OF_MIPMAP_LEVELS,f),Pt=c.getUint32(Us.BYTES_OF_KEY_VALUE_DATA,f);if(Q===0||lt!==1)throw new Error("Only 2D textures are supported");if(mt!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(ft!==1)throw new Error("WebGL does not support array textures");const Dt=4,Wt=4,Jt=W+3&-4,pe=Q+3&-4,re=new Array(ft);let le=W*Q;S===0&&(le=Jt*pe);let De;if(S!==0?ic[S]?De=ic[S]*fl[N]:De=as[S]:De=ul[U],De===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const xr=l?ls(c,Pt,f):null;let Be=le*De,Ce=W,fr=Q,wr=Jt,Wr=pe,tr=gu+Pt;for(let ce=0;ce<_t;ce++){const be=c.getUint32(tr,f);let _r=tr+4;for(let Hr=0;Hr<ft;Hr++){let _e=re[Hr];_e||(_e=re[Hr]=new Array(_t)),_e[ce]={levelID:ce,levelWidth:_t>1||S!==0?Ce:wr,levelHeight:_t>1||S!==0?fr:Wr,levelBuffer:new Uint8Array(i,_r,Be)},_r+=Be}tr+=be+4,tr=tr%4!==0?tr+4-tr%4:tr,Ce=Ce>>1||1,fr=fr>>1||1,wr=Ce+Dt-1&~(Dt-1),Wr=fr+Wt-1&~(Wt-1),Be=wr*Wr*De}return S!==0?{uncompressed:re.map(ce=>{let be=ce[0].levelBuffer,_r=!1;return S===p.FLOAT?be=new Float32Array(ce[0].levelBuffer.buffer,ce[0].levelBuffer.byteOffset,ce[0].levelBuffer.byteLength/4):S===p.UNSIGNED_INT?(_r=!0,be=new Uint32Array(ce[0].levelBuffer.buffer,ce[0].levelBuffer.byteOffset,ce[0].levelBuffer.byteLength/4)):S===p.INT&&(_r=!0,be=new Int32Array(ce[0].levelBuffer.buffer,ce[0].levelBuffer.byteOffset,ce[0].levelBuffer.byteLength/4)),{resource:new gn(be,{width:ce[0].levelWidth,height:ce[0].levelHeight}),type:S,format:_r?yu(N):N}}),kvData:xr}:{compressed:re.map(ce=>new ki(null,{format:U,width:W,height:Q,levels:_t,levelBuffers:ce})),kvData:xr}}function Gf(u,i){for(let l=0;l<Ud.length;l++)if(i.getUint8(l)!==Ud[l])return console.error(`${u} is not a valid *.ktx file!`),!1;return!0}function yu(u){switch(u){case C.RGBA:return C.RGBA_INTEGER;case C.RGB:return C.RGB_INTEGER;case C.RG:return C.RG_INTEGER;case C.RED:return C.RED_INTEGER;default:return u}}function ls(u,i,l){const c=new Map;let f=0;for(;f<i;){const S=u.getUint32(gu+f,l),N=gu+f+4,U=3-(S+3)%4;if(S===0||S>i-f){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let W=0;for(;W<S&&u.getUint8(N+W)!==0;W++);if(W===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const Q=new TextDecoder().decode(new Uint8Array(u.buffer,N,W)),lt=new DataView(u.buffer,N+W+1,S-W-1);c.set(Q,lt),f+=4+S+U}return c}const Vf={extension:{type:It.LoadParser,priority:Qi.High},name:"loadDDS",test(u){return Jr(u,".dds")},load(u,i,l){return he(this,null,function*(){const c=yield(yield st.ADAPTER.fetch(u)).arrayBuffer(),f=Hn(c).map(S=>{const N=new Cr(S,He({mipmap:_.OFF,alphaMode:A.NO_PREMULTIPLIED_ALPHA,resolution:Ht(u)},i.data));return ga(N,l,u)});return f.length===1?f[0]:f})},unload(u){Array.isArray(u)?u.forEach(i=>i.destroy(!0)):u.destroy(!0)}};zt.add(Vf);const qe={extension:{type:It.LoadParser,priority:Qi.High},name:"loadKTX",test(u){return Jr(u,".ktx")},load(u,i,l){return he(this,null,function*(){const c=yield(yield st.ADAPTER.fetch(u)).arrayBuffer(),{compressed:f,uncompressed:S,kvData:N}=Uf(u,c),U=f!=null?f:S,W=He({mipmap:_.OFF,alphaMode:A.NO_PREMULTIPLIED_ALPHA,resolution:Ht(u)},i.data),Q=U.map(lt=>{var _t;U===S&&Object.assign(W,{type:lt.type,format:lt.format});const ft=(_t=lt.resource)!=null?_t:lt,mt=new Cr(ft,W);return mt.ktxKeyValueData=N,ga(mt,l,u)});return Q.length===1?Q[0]:Q})},unload(u){Array.isArray(u)?u.forEach(i=>i.destroy(!0)):u.destroy(!0)}};zt.add(qe);const va={extension:It.ResolveParser,test:u=>{const i=Fr.extname(u).slice(1);return["basis","ktx","dds"].includes(i)},parse:u=>{var l,c,f,S;const i=Fr.extname(u).slice(1);if(i==="ktx"){const N=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(N.some(U=>u.endsWith(U)))return{resolution:parseFloat((c=(l=st.RETINA_PREFIX.exec(u))==null?void 0:l[1])!=null?c:"1"),format:N.find(U=>u.endsWith(U)),src:u}}return{resolution:parseFloat((S=(f=st.RETINA_PREFIX.exec(u))==null?void 0:f[1])!=null?S:"1"),format:i,src:u}}};zt.add(va);const _a=new Rr,Vd=4,zd=class Oc{constructor(i){this.renderer=i,this._rendererPremultipliedAlpha=!1}contextChange(){var l;const i=(l=this.renderer)==null?void 0:l.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(i&&i.alpha&&i.premultipliedAlpha)}image(i,l,c,f){return he(this,null,function*(){const S=new Image;return S.src=yield this.base64(i,l,c,f),S})}base64(i,l,c,f){return he(this,null,function*(){const S=this.canvas(i,f);if(S.toBlob!==void 0)return new Promise((N,U)=>{S.toBlob(W=>{if(!W){U(new Error("ICanvas.toBlob failed!"));return}const Q=new FileReader;Q.onload=()=>N(Q.result),Q.onerror=U,Q.readAsDataURL(W)},l,c)});if(S.toDataURL!==void 0)return S.toDataURL(l,c);if(S.convertToBlob!==void 0){const N=yield S.convertToBlob({type:l,quality:c});return new Promise((U,W)=>{const Q=new FileReader;Q.onload=()=>U(Q.result),Q.onerror=W,Q.readAsDataURL(N)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})}canvas(i,l){const{pixels:c,width:f,height:S,flipY:N,premultipliedAlpha:U}=this._rawPixels(i,l);N&&Oc._flipY(c,f,S),U&&Oc._unpremultiplyAlpha(c);const W=new L(f,S,1),Q=new ImageData(new Uint8ClampedArray(c.buffer),f,S);return W.context.putImageData(Q,0,0),W.canvas}pixels(i,l){const{pixels:c,width:f,height:S,flipY:N,premultipliedAlpha:U}=this._rawPixels(i,l);return N&&Oc._flipY(c,f,S),U&&Oc._unpremultiplyAlpha(c),c}_rawPixels(i,l){const c=this.renderer;if(!c)throw new Error("The Extract has already been destroyed");let f,S=!1,N=!1,U,W=!1;i&&(i instanceof bo?U=i:(U=c.generateTexture(i,{region:l,resolution:c.resolution,multisample:c.multisample}),W=!0,l&&(_a.width=l.width,_a.height=l.height,l=_a)));const Q=c.gl;if(U){if(f=U.baseTexture.resolution,l=l!=null?l:U.frame,S=!1,N=U.baseTexture.alphaMode>0&&U.baseTexture.format===C.RGBA,!W){c.renderTexture.bind(U);const _t=U.framebuffer.glFramebuffers[c.CONTEXT_UID];_t.blitFramebuffer&&c.framebuffer.bind(_t.blitFramebuffer)}}else f=c.resolution,l||(l=_a,l.width=c.width/f,l.height=c.height/f),S=!0,N=this._rendererPremultipliedAlpha,c.renderTexture.bind();const lt=Math.max(Math.round(l.width*f),1),ft=Math.max(Math.round(l.height*f),1),mt=new Uint8Array(Vd*lt*ft);return Q.readPixels(Math.round(l.x*f),Math.round(l.y*f),lt,ft,Q.RGBA,Q.UNSIGNED_BYTE,mt),W&&(U==null||U.destroy(!0)),{pixels:mt,width:lt,height:ft,flipY:S,premultipliedAlpha:N}}destroy(){this.renderer=null}static _flipY(i,l,c){const f=l<<2,S=c>>1,N=new Uint8Array(f);for(let U=0;U<S;U++){const W=U*f,Q=(c-U-1)*f;N.set(i.subarray(W,W+f)),i.copyWithin(W,Q,Q+f),i.set(N,Q)}}static _unpremultiplyAlpha(i){i instanceof Uint8ClampedArray&&(i=new Uint8Array(i.buffer));const l=i.length;for(let c=0;c<l;c+=4){const f=i[c+3];if(f!==0){const S=255.001/f;i[c]=i[c]*S+.5,i[c+1]=i[c+1]*S+.5,i[c+2]=i[c+2]*S+.5}}}};zd.extension={name:"extract",type:It.RendererSystem};let pl=zd;zt.add(pl);const ao={build(u){const i=u.points;let l,c,f,S,N,U;if(u.type===Pi.CIRC){const Pt=u.shape;l=Pt.x,c=Pt.y,N=U=Pt.radius,f=S=0}else if(u.type===Pi.ELIP){const Pt=u.shape;l=Pt.x,c=Pt.y,N=Pt.width,U=Pt.height,f=S=0}else{const Pt=u.shape,Dt=Pt.width/2,Wt=Pt.height/2;l=Pt.x+Dt,c=Pt.y+Wt,N=U=Math.max(0,Math.min(Pt.radius,Math.min(Dt,Wt))),f=Dt-N,S=Wt-U}if(!(N>=0&&U>=0&&f>=0&&S>=0)){i.length=0;return}const W=Math.ceil(2.3*Math.sqrt(N+U)),Q=W*8+(f?4:0)+(S?4:0);if(i.length=Q,Q===0)return;if(W===0){i.length=8,i[0]=i[6]=l+f,i[1]=i[3]=c+S,i[2]=i[4]=l-f,i[5]=i[7]=c-S;return}let lt=0,ft=W*4+(f?2:0)+2,mt=ft,_t=Q;{const Pt=f+N,Dt=S,Wt=l+Pt,Jt=l-Pt,pe=c+Dt;if(i[lt++]=Wt,i[lt++]=pe,i[--ft]=pe,i[--ft]=Jt,S){const re=c-Dt;i[mt++]=Jt,i[mt++]=re,i[--_t]=re,i[--_t]=Wt}}for(let Pt=1;Pt<W;Pt++){const Dt=Math.PI/2*(Pt/W),Wt=f+Math.cos(Dt)*N,Jt=S+Math.sin(Dt)*U,pe=l+Wt,re=l-Wt,le=c+Jt,De=c-Jt;i[lt++]=pe,i[lt++]=le,i[--ft]=le,i[--ft]=re,i[mt++]=re,i[mt++]=De,i[--_t]=De,i[--_t]=pe}{const Pt=f,Dt=S+U,Wt=l+Pt,Jt=l-Pt,pe=c+Dt,re=c-Dt;i[lt++]=Wt,i[lt++]=pe,i[--_t]=re,i[--_t]=Wt,f&&(i[lt++]=Jt,i[lt++]=pe,i[--_t]=re,i[--_t]=Jt)}},triangulate(u,i){const l=u.points,c=i.points,f=i.indices;if(l.length===0)return;let S=c.length/2;const N=S;let U,W;if(u.type!==Pi.RREC){const lt=u.shape;U=lt.x,W=lt.y}else{const lt=u.shape;U=lt.x+lt.width/2,W=lt.y+lt.height/2}const Q=u.matrix;c.push(u.matrix?Q.a*U+Q.c*W+Q.tx:U,u.matrix?Q.b*U+Q.d*W+Q.ty:W),S++,c.push(l[0],l[1]);for(let lt=2;lt<l.length;lt+=2)c.push(l[lt],l[lt+1]),f.push(S++,N,S);f.push(N+1,N,S)}};function vu(u,i=!1){const l=u.length;if(l<6)return;let c=0;for(let f=0,S=u[l-2],N=u[l-1];f<l;f+=2){const U=u[f],W=u[f+1];c+=(U-S)*(W+N),S=U,N=W}if(!i&&c>0||i&&c<=0){const f=l/2;for(let S=f+f%2;S<l;S+=2){const N=l-S-2,U=l-S-1,W=S,Q=S+1;[u[N],u[W]]=[u[W],u[N]],[u[U],u[Q]]=[u[Q],u[U]]}}}const _u={build(u){u.points=u.shape.points.slice()},triangulate(u,i){let l=u.points;const c=u.holes,f=i.points,S=i.indices;if(l.length>=6){vu(l,!1);const N=[];for(let Q=0;Q<c.length;Q++){const lt=c[Q];vu(lt.points,!0),N.push(l.length/2),l=l.concat(lt.points)}const U=Ct(l,N,2);if(!U)return;const W=f.length/2;for(let Q=0;Q<U.length;Q+=3)S.push(U[Q]+W),S.push(U[Q+1]+W),S.push(U[Q+2]+W);for(let Q=0;Q<l.length;Q++)f.push(l[Q])}}},sc={build(u){const i=u.shape,l=i.x,c=i.y,f=i.width,S=i.height,N=u.points;N.length=0,f>=0&&S>=0&&N.push(l,c,l+f,c,l+f,c+S,l,c+S)},triangulate(u,i){const l=u.points,c=i.points;if(l.length===0)return;const f=c.length/2;c.push(l[0],l[1],l[2],l[3],l[6],l[7],l[4],l[5]),i.indices.push(f,f+1,f+2,f+1,f+2,f+3)}},nc={build(u){ao.build(u)},triangulate(u,i){ao.triangulate(u,i)}};var Ms=(u=>(u.MITER="miter",u.BEVEL="bevel",u.ROUND="round",u))(Ms||{}),bn=(u=>(u.BUTT="butt",u.ROUND="round",u.SQUARE="square",u))(bn||{});const Mi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(u,i=20){if(!this.adaptive||!u||isNaN(u))return i;let l=Math.ceil(u/this.maxLength);return l<this.minSegments?l=this.minSegments:l>this.maxSegments&&(l=this.maxSegments),l}},An=null;class wn{static curveTo(i,l,c,f,S,N){const U=N[N.length-2],W=N[N.length-1]-l,Q=U-i,lt=f-l,ft=c-i,mt=Math.abs(W*ft-Q*lt);if(mt<1e-8||S===0)return(N[N.length-2]!==i||N[N.length-1]!==l)&&N.push(i,l),null;const _t=W*W+Q*Q,Pt=lt*lt+ft*ft,Dt=W*lt+Q*ft,Wt=S*Math.sqrt(_t)/mt,Jt=S*Math.sqrt(Pt)/mt,pe=Wt*Dt/_t,re=Jt*Dt/Pt,le=Wt*ft+Jt*Q,De=Wt*lt+Jt*W,xr=Q*(Jt+pe),Be=W*(Jt+pe),Ce=ft*(Wt+re),fr=lt*(Wt+re),wr=Math.atan2(Be-De,xr-le),Wr=Math.atan2(fr-De,Ce-le);return{cx:le+i,cy:De+l,radius:S,startAngle:wr,endAngle:Wr,anticlockwise:Q*lt>ft*W}}static arc(i,l,c,f,S,N,U,W,Q){const lt=U-N,ft=Mi._segmentsCount(Math.abs(lt)*S,Math.ceil(Math.abs(lt)/ri)*40),mt=lt/(ft*2),_t=mt*2,Pt=Math.cos(mt),Dt=Math.sin(mt),Wt=ft-1,Jt=Wt%1/Wt;for(let pe=0;pe<=Wt;++pe){const re=pe+Jt*pe,le=mt+N+_t*re,De=Math.cos(le),xr=-Math.sin(le);Q.push((Pt*De+Dt*xr)*S+c,(Pt*-xr+Dt*De)*S+f)}}}class ml{static curveLength(i,l,c,f,S,N,U,W){let Q=0,lt=0,ft=0,mt=0,_t=0,Pt=0,Dt=0,Wt=0,Jt=0,pe=0,re=0,le=i,De=l;for(let xr=1;xr<=10;++xr)lt=xr/10,ft=lt*lt,mt=ft*lt,_t=1-lt,Pt=_t*_t,Dt=Pt*_t,Wt=Dt*i+3*Pt*lt*c+3*_t*ft*S+mt*U,Jt=Dt*l+3*Pt*lt*f+3*_t*ft*N+mt*W,pe=le-Wt,re=De-Jt,le=Wt,De=Jt,Q+=Math.sqrt(pe*pe+re*re);return Q}static curveTo(i,l,c,f,S,N,U){const W=U[U.length-2],Q=U[U.length-1];U.length-=2;const lt=Mi._segmentsCount(ml.curveLength(W,Q,i,l,c,f,S,N));let ft=0,mt=0,_t=0,Pt=0,Dt=0;U.push(W,Q);for(let Wt=1,Jt=0;Wt<=lt;++Wt)Jt=Wt/lt,ft=1-Jt,mt=ft*ft,_t=mt*ft,Pt=Jt*Jt,Dt=Pt*Jt,U.push(_t*W+3*mt*Jt*i+3*ft*Pt*c+Dt*S,_t*Q+3*mt*Jt*l+3*ft*Pt*f+Dt*N)}}function oc(u,i,l,c,f,S,N,U){const W=u-l*f,Q=i-c*f,lt=u+l*S,ft=i+c*S;let mt,_t;N?(mt=c,_t=-l):(mt=-c,_t=l);const Pt=W+mt,Dt=Q+_t,Wt=lt+mt,Jt=ft+_t;return U.push(Pt,Dt,Wt,Jt),2}function qi(u,i,l,c,f,S,N,U){const W=l-u,Q=c-i;let lt=Math.atan2(W,Q),ft=Math.atan2(f-u,S-i);U&&lt<ft?lt+=Math.PI*2:!U&&lt>ft&&(ft+=Math.PI*2);let mt=lt;const _t=ft-lt,Pt=Math.abs(_t),Dt=Math.sqrt(W*W+Q*Q),Wt=(15*Pt*Math.sqrt(Dt)/Math.PI>>0)+1,Jt=_t/Wt;if(mt+=Jt,U){N.push(u,i,l,c);for(let pe=1,re=mt;pe<Wt;pe++,re+=Jt)N.push(u,i,u+Math.sin(re)*Dt,i+Math.cos(re)*Dt);N.push(u,i,f,S)}else{N.push(l,c,u,i);for(let pe=1,re=mt;pe<Wt;pe++,re+=Jt)N.push(u+Math.sin(re)*Dt,i+Math.cos(re)*Dt,u,i);N.push(f,S,u,i)}return Wt*2}function Hd(u,i){const l=u.shape;let c=u.points||l.points.slice();const f=i.closePointEps;if(c.length===0)return;const S=u.lineStyle,N=new Mr(c[0],c[1]),U=new Mr(c[c.length-2],c[c.length-1]),W=l.type!==Pi.POLY||l.closeStroke,Q=Math.abs(N.x-U.x)<f&&Math.abs(N.y-U.y)<f;if(W){c=c.slice(),Q&&(c.pop(),c.pop(),U.set(c[c.length-2],c[c.length-1]));const _e=(N.x+U.x)*.5,Re=(U.y+N.y)*.5;c.unshift(_e,Re),c.push(_e,Re)}const lt=i.points,ft=c.length/2;let mt=c.length;const _t=lt.length/2,Pt=S.width/2,Dt=Pt*Pt,Wt=S.miterLimit*S.miterLimit;let Jt=c[0],pe=c[1],re=c[2],le=c[3],De=0,xr=0,Be=-(pe-le),Ce=Jt-re,fr=0,wr=0,Wr=Math.sqrt(Be*Be+Ce*Ce);Be/=Wr,Ce/=Wr,Be*=Pt,Ce*=Pt;const tr=S.alignment,ce=(1-tr)*2,be=tr*2;W||(S.cap===bn.ROUND?mt+=qi(Jt-Be*(ce-be)*.5,pe-Ce*(ce-be)*.5,Jt-Be*ce,pe-Ce*ce,Jt+Be*be,pe+Ce*be,lt,!0)+2:S.cap===bn.SQUARE&&(mt+=oc(Jt,pe,Be,Ce,ce,be,!0,lt))),lt.push(Jt-Be*ce,pe-Ce*ce,Jt+Be*be,pe+Ce*be);for(let _e=1;_e<ft-1;++_e){Jt=c[(_e-1)*2],pe=c[(_e-1)*2+1],re=c[_e*2],le=c[_e*2+1],De=c[(_e+1)*2],xr=c[(_e+1)*2+1],Be=-(pe-le),Ce=Jt-re,Wr=Math.sqrt(Be*Be+Ce*Ce),Be/=Wr,Ce/=Wr,Be*=Pt,Ce*=Pt,fr=-(le-xr),wr=re-De,Wr=Math.sqrt(fr*fr+wr*wr),fr/=Wr,wr/=Wr,fr*=Pt,wr*=Pt;const Re=re-Jt,Br=pe-le,Zr=re-De,Lr=xr-le,Xo=Re*Zr+Br*Lr,hn=Br*Zr-Lr*Re,Zs=hn<0;if(Math.abs(hn)<.001*Math.abs(Xo)){lt.push(re-Be*ce,le-Ce*ce,re+Be*be,le+Ce*be),Xo>=0&&(S.join===Ms.ROUND?mt+=qi(re,le,re-Be*ce,le-Ce*ce,re-fr*ce,le-wr*ce,lt,!1)+4:mt+=2,lt.push(re-fr*be,le-wr*be,re+fr*ce,le+wr*ce));continue}const On=(-Be+Jt)*(-Ce+le)-(-Be+re)*(-Ce+pe),zu=(-fr+De)*(-wr+le)-(-fr+re)*(-wr+xr),Ma=(Re*zu-Zr*On)/hn,Wo=(Lr*On-Br*zu)/hn,Ra=(Ma-re)*(Ma-re)+(Wo-le)*(Wo-le),cn=re+(Ma-re)*ce,Fn=le+(Wo-le)*ce,dn=re-(Ma-re)*be,Vs=le-(Wo-le)*be,Ia=Math.min(Re*Re+Br*Br,Zr*Zr+Lr*Lr),xi=Zs?ce:be,Ol=Ia+xi*xi*Dt,Fl=Ra<=Ol;let Hu=S.join;if(Hu===Ms.MITER&&Ra/Dt>Wt&&(Hu=Ms.BEVEL),Fl)switch(Hu){case Ms.MITER:{lt.push(cn,Fn,dn,Vs);break}case Ms.BEVEL:{Zs?lt.push(cn,Fn,re+Be*be,le+Ce*be,cn,Fn,re+fr*be,le+wr*be):lt.push(re-Be*ce,le-Ce*ce,dn,Vs,re-fr*ce,le-wr*ce,dn,Vs),mt+=2;break}case Ms.ROUND:{Zs?(lt.push(cn,Fn,re+Be*be,le+Ce*be),mt+=qi(re,le,re+Be*be,le+Ce*be,re+fr*be,le+wr*be,lt,!0)+4,lt.push(cn,Fn,re+fr*be,le+wr*be)):(lt.push(re-Be*ce,le-Ce*ce,dn,Vs),mt+=qi(re,le,re-Be*ce,le-Ce*ce,re-fr*ce,le-wr*ce,lt,!1)+4,lt.push(re-fr*ce,le-wr*ce,dn,Vs));break}}else{switch(lt.push(re-Be*ce,le-Ce*ce,re+Be*be,le+Ce*be),Hu){case Ms.MITER:{Zs?lt.push(dn,Vs,dn,Vs):lt.push(cn,Fn,cn,Fn),mt+=2;break}case Ms.ROUND:{Zs?mt+=qi(re,le,re+Be*be,le+Ce*be,re+fr*be,le+wr*be,lt,!0)+2:mt+=qi(re,le,re-Be*ce,le-Ce*ce,re-fr*ce,le-wr*ce,lt,!1)+2;break}}lt.push(re-fr*ce,le-wr*ce,re+fr*be,le+wr*be),mt+=2}}Jt=c[(ft-2)*2],pe=c[(ft-2)*2+1],re=c[(ft-1)*2],le=c[(ft-1)*2+1],Be=-(pe-le),Ce=Jt-re,Wr=Math.sqrt(Be*Be+Ce*Ce),Be/=Wr,Ce/=Wr,Be*=Pt,Ce*=Pt,lt.push(re-Be*ce,le-Ce*ce,re+Be*be,le+Ce*be),W||(S.cap===bn.ROUND?mt+=qi(re-Be*(ce-be)*.5,le-Ce*(ce-be)*.5,re-Be*ce,le-Ce*ce,re+Be*be,le+Ce*be,lt,!1)+2:S.cap===bn.SQUARE&&(mt+=oc(re,le,Be,Ce,ce,be,!1,lt)));const _r=i.indices,Hr=Mi.epsilon*Mi.epsilon;for(let _e=_t;_e<mt+_t-2;++_e)Jt=lt[_e*2],pe=lt[_e*2+1],re=lt[(_e+1)*2],le=lt[(_e+1)*2+1],De=lt[(_e+2)*2],xr=lt[(_e+2)*2+1],!(Math.abs(Jt*(le-xr)+re*(xr-pe)+De*(pe-le))<Hr)&&_r.push(_e,_e+1,_e+2)}function Cn(u,i){let l=0;const c=u.shape,f=u.points||c.points,S=c.type!==Pi.POLY||c.closeStroke;if(f.length===0)return;const N=i.points,U=i.indices,W=f.length/2,Q=N.length/2;let lt=Q;for(N.push(f[0],f[1]),l=1;l<W;l++)N.push(f[l*2],f[l*2+1]),U.push(lt,lt+1),lt++;S&&U.push(lt,Q)}function ac(u,i){u.lineStyle.native?Cn(u,i):Hd(u,i)}class gl{static curveLength(i,l,c,f,S,N){const U=i-2*c+S,W=l-2*f+N,Q=2*c-2*i,lt=2*f-2*l,ft=4*(U*U+W*W),mt=4*(U*Q+W*lt),_t=Q*Q+lt*lt,Pt=2*Math.sqrt(ft+mt+_t),Dt=Math.sqrt(ft),Wt=2*ft*Dt,Jt=2*Math.sqrt(_t),pe=mt/Dt;return(Wt*Pt+Dt*mt*(Pt-Jt)+(4*_t*ft-mt*mt)*Math.log((2*Dt+pe+Pt)/(pe+Jt)))/(4*Wt)}static curveTo(i,l,c,f,S){const N=S[S.length-2],U=S[S.length-1],W=Mi._segmentsCount(gl.curveLength(N,U,i,l,c,f));let Q=0,lt=0;for(let ft=1;ft<=W;++ft){const mt=ft/W;Q=N+(i-N)*mt,lt=U+(l-U)*mt,S.push(Q+(i+(c-i)*mt-Q)*mt,lt+(l+(f-l)*mt-lt)*mt)}}}const yl={[Pi.POLY]:_u,[Pi.CIRC]:ao,[Pi.ELIP]:ao,[Pi.RECT]:sc,[Pi.RREC]:nc},xu=[],xa=[];class Tu{constructor(i,l=null,c=null,f=null){this.points=[],this.holes=[],this.shape=i,this.lineStyle=c,this.fillStyle=l,this.matrix=f,this.type=i.type}clone(){return new Tu(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class vl{constructor(){this.reset()}begin(i,l,c){this.reset(),this.style=i,this.start=l,this.attribStart=c}end(i,l){this.attribSize=l-this.attribStart,this.size=i-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const lo=new Mr,Gs=class $m extends yo{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Ws,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),xa.push(this.drawCalls[i]);this.drawCalls.length=0;for(let i=0;i<this.batches.length;i++){const l=this.batches[i];l.reset(),xu.push(l)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(i,l=null,c=null,f=null){const S=new Tu(i,l,c,f);return this.graphicsData.push(S),this.dirty++,this}drawHole(i,l=null){if(!this.graphicsData.length)return null;const c=new Tu(i,null,null,l),f=this.graphicsData[this.graphicsData.length-1];return c.lineStyle=f.lineStyle,f.holes.push(c),this.dirty++,this}destroy(){super.destroy();for(let i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(i){const l=this.graphicsData;for(let c=0;c<l.length;++c){const f=l[c];if(f.fillStyle.visible&&f.shape&&(f.matrix?f.matrix.applyInverse(i,lo):lo.copyFrom(i),f.shape.contains(lo.x,lo.y))){let S=!1;if(f.holes){for(let N=0;N<f.holes.length;N++)if(f.holes[N].shape.contains(lo.x,lo.y)){S=!0;break}}if(!S)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const i=this.uvs,l=this.graphicsData;let c=null,f=null;this.batches.length>0&&(c=this.batches[this.batches.length-1],f=c.style);for(let W=this.shapeIndex;W<l.length;W++){this.shapeIndex++;const Q=l[W],lt=Q.fillStyle,ft=Q.lineStyle;yl[Q.type].build(Q),Q.matrix&&this.transformPoints(Q.points,Q.matrix),(lt.visible||ft.visible)&&this.processHoles(Q.holes);for(let mt=0;mt<2;mt++){const _t=mt===0?lt:ft;if(!_t.visible)continue;const Pt=_t.texture.baseTexture,Dt=this.indices.length,Wt=this.points.length/2;Pt.wrapMode=T.REPEAT,mt===0?this.processFill(Q):this.processLine(Q);const Jt=this.points.length/2-Wt;Jt!==0&&(c&&!this._compareStyles(f,_t)&&(c.end(Dt,Wt),c=null),c||(c=xu.pop()||new vl,c.begin(_t,Dt,Wt),this.batches.push(c),f=_t),this.addUvs(this.points,i,_t.texture,Wt,Jt,_t.matrix))}}const S=this.indices.length,N=this.points.length/2;if(c&&c.end(S,N),this.batches.length===0){this.batchable=!0;return}const U=N>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&U===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=U?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(i,l){return!(!i||!l||i.texture.baseTexture!==l.texture.baseTexture||i.color+i.alpha!==l.color+l.alpha||!!i.native!=!!l.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let i=0,l=this.graphicsData.length;i<l;i++){const c=this.graphicsData[i],f=c.fillStyle,S=c.lineStyle;if(f&&!f.texture.baseTexture.valid||S&&!S.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const i=this.batches;for(let l=0,c=i.length;l<c;l++){const f=i[l];for(let S=0;S<f.size;S++){const N=f.start+S;this.indicesUint16[N]=this.indicesUint16[N]-f.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const i=this.batches;for(let l=0;l<i.length;l++)if(i[l].style.native)return!1;return this.points.length<$m.BATCHABLE_SIZE*2}buildDrawCalls(){let i=++Cr._globalBatch;for(let ft=0;ft<this.drawCalls.length;ft++)this.drawCalls[ft].texArray.clear(),xa.push(this.drawCalls[ft]);this.drawCalls.length=0;const l=this.colors,c=this.textureIds;let f=xa.pop();f||(f=new xs,f.texArray=new Ul),f.texArray.count=0,f.start=0,f.size=0,f.type=O.TRIANGLES;let S=0,N=null,U=0,W=!1,Q=O.TRIANGLES,lt=0;this.drawCalls.push(f);for(let ft=0;ft<this.batches.length;ft++){const mt=this.batches[ft],_t=8,Pt=mt.style,Dt=Pt.texture.baseTexture;W!==!!Pt.native&&(W=!!Pt.native,Q=W?O.LINES:O.TRIANGLES,N=null,S=_t,i++),N!==Dt&&(N=Dt,Dt._batchEnabled!==i&&(S===_t&&(i++,S=0,f.size>0&&(f=xa.pop(),f||(f=new xs,f.texArray=new Ul),this.drawCalls.push(f)),f.start=lt,f.size=0,f.texArray.count=0,f.type=Q),Dt.touched=1,Dt._batchEnabled=i,Dt._batchLocation=S,Dt.wrapMode=T.REPEAT,f.texArray.elements[f.texArray.count++]=Dt,S++)),f.size+=mt.size,lt+=mt.size,U=Dt._batchLocation,this.addColors(l,Pt.color,Pt.alpha,mt.attribSize,mt.attribStart),this.addTextureIds(c,U,mt.attribSize,mt.attribStart)}Cr._globalBatch=i,this.packAttributes()}packAttributes(){const i=this.points,l=this.uvs,c=this.colors,f=this.textureIds,S=new ArrayBuffer(i.length*3*4),N=new Float32Array(S),U=new Uint32Array(S);let W=0;for(let Q=0;Q<i.length/2;Q++)N[W++]=i[Q*2],N[W++]=i[Q*2+1],N[W++]=l[Q*2],N[W++]=l[Q*2+1],U[W++]=c[Q],N[W++]=f[Q];this._buffer.update(S),this._indexBuffer.update(this.indicesUint16)}processFill(i){i.holes.length?_u.triangulate(i,this):yl[i.type].triangulate(i,this)}processLine(i){ac(i,this);for(let l=0;l<i.holes.length;l++)ac(i.holes[l],this)}processHoles(i){for(let l=0;l<i.length;l++){const c=i[l];yl[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix)}}calculateBounds(){const i=this._bounds;i.clear(),i.addVertexData(this.points,0,this.points.length),i.pad(this.boundsPadding,this.boundsPadding)}transformPoints(i,l){for(let c=0;c<i.length/2;c++){const f=i[c*2],S=i[c*2+1];i[c*2]=l.a*f+l.c*S+l.tx,i[c*2+1]=l.b*f+l.d*S+l.ty}}addColors(i,l,c,f,S=0){const N=ur.shared.setValue(l).toLittleEndianNumber(),U=ur.shared.setValue(N).toPremultiplied(c);i.length=Math.max(i.length,S+f);for(let W=0;W<f;W++)i[S+W]=U}addTextureIds(i,l,c,f=0){i.length=Math.max(i.length,f+c);for(let S=0;S<c;S++)i[f+S]=l}addUvs(i,l,c,f,S,N=null){let U=0;const W=l.length,Q=c.frame;for(;U<S;){let ft=i[(f+U)*2],mt=i[(f+U)*2+1];if(N){const _t=N.a*ft+N.c*mt+N.tx;mt=N.b*ft+N.d*mt+N.ty,ft=_t}U++,l.push(ft/Q.width,mt/Q.height)}const lt=c.baseTexture;(Q.width<lt.width||Q.height<lt.height)&&this.adjustUvs(l,c,W,S)}adjustUvs(i,l,c,f){const S=l.baseTexture,N=1e-6,U=c+f*2,W=l.frame,Q=W.width/S.width,lt=W.height/S.height;let ft=W.x/W.width,mt=W.y/W.height,_t=Math.floor(i[c]+N),Pt=Math.floor(i[c+1]+N);for(let Dt=c+2;Dt<U;Dt+=2)_t=Math.min(_t,Math.floor(i[Dt]+N)),Pt=Math.min(Pt,Math.floor(i[Dt+1]+N));ft-=_t,mt-=Pt;for(let Dt=c;Dt<U;Dt+=2)i[Dt]=(i[Dt]+ft)*Q,i[Dt+1]=(i[Dt+1]+mt)*lt}};Gs.BATCHABLE_SIZE=100;let Yr=Gs;class Bi{constructor(){this.color=16777215,this.alpha=1,this.texture=hr.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const i=new Bi;return i.color=this.color,i.alpha=this.alpha,i.texture=this.texture,i.matrix=this.matrix,i.visible=this.visible,i}reset(){this.color=16777215,this.alpha=1,this.texture=hr.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Ri extends Bi{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=bn.BUTT,this.join=Ms.MITER,this.miterLimit=10}clone(){const i=new Ri;return i.color=this.color,i.alpha=this.alpha,i.texture=this.texture,i.matrix=this.matrix,i.visible=this.visible,i.width=this.width,i.alignment=this.alignment,i.native=this.native,i.cap=this.cap,i.join=this.join,i.miterLimit=this.miterLimit,i}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=bn.BUTT,this.join=Ms.MITER,this.miterLimit=10}}const Hi={},cs=class bf extends wi{constructor(i=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Bi,this._lineStyle=new Ri,this._matrix=null,this._holeMode=!1,this.state=Ze.for2d(),this._geometry=i||new Yr,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ur(16777215),this.blendMode=M.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new bf(this._geometry)}set blendMode(i){this.state.blendMode=i}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(i){this._tintColor.setValue(i)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(i=null,l=0,c,f=.5,S=!1){return typeof i=="number"&&(i={width:i,color:l,alpha:c,alignment:f,native:S}),this.lineTextureStyle(i)}lineTextureStyle(i){const l={width:0,texture:hr.WHITE,color:i!=null&&i.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:bn.BUTT,join:Ms.MITER,miterLimit:10};i=Object.assign(l,i),this.normalizeColor(i),this.currentPath&&this.startPoly();const c=i.width>0&&i.alpha>0;return c?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._lineStyle,{visible:c},i)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const i=this.currentPath.points,l=this.currentPath.points.length;l>2&&(this.drawShape(this.currentPath),this.currentPath=new Ni,this.currentPath.closeStroke=!1,this.currentPath.points.push(i[l-2],i[l-1]))}else this.currentPath=new Ni,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(i,l){return this.startPoly(),this.currentPath.points[0]=i,this.currentPath.points[1]=l,this}lineTo(i,l){this.currentPath||this.moveTo(0,0);const c=this.currentPath.points,f=c[c.length-2],S=c[c.length-1];return(f!==i||S!==l)&&c.push(i,l),this}_initCurve(i=0,l=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[i,l]):this.moveTo(i,l)}quadraticCurveTo(i,l,c,f){this._initCurve();const S=this.currentPath.points;return S.length===0&&this.moveTo(0,0),gl.curveTo(i,l,c,f,S),this}bezierCurveTo(i,l,c,f,S,N){return this._initCurve(),ml.curveTo(i,l,c,f,S,N,this.currentPath.points),this}arcTo(i,l,c,f,S){this._initCurve(i,l);const N=this.currentPath.points,U=wn.curveTo(i,l,c,f,S,N);if(U){const{cx:W,cy:Q,radius:lt,startAngle:ft,endAngle:mt,anticlockwise:_t}=U;this.arc(W,Q,lt,ft,mt,_t)}return this}arc(i,l,c,f,S,N=!1){if(f===S)return this;if(!N&&S<=f?S+=ri:N&&f<=S&&(f+=ri),S-f===0)return this;const U=i+Math.cos(f)*c,W=l+Math.sin(f)*c,Q=this._geometry.closePointEps;let lt=this.currentPath?this.currentPath.points:null;if(lt){const ft=Math.abs(lt[lt.length-2]-U),mt=Math.abs(lt[lt.length-1]-W);ft<Q&&mt<Q||lt.push(U,W)}else this.moveTo(U,W),lt=this.currentPath.points;return wn.arc(U,W,i,l,c,f,S,N,lt),this}beginFill(i=0,l){return this.beginTextureFill({texture:hr.WHITE,color:i,alpha:l})}normalizeColor(i){var c,f;const l=ur.shared.setValue((c=i.color)!=null?c:0);i.color=l.toNumber(),(f=i.alpha)!=null||(i.alpha=l.alpha)}beginTextureFill(i){const l={texture:hr.WHITE,color:16777215,matrix:null};i=Object.assign(l,i),this.normalizeColor(i),this.currentPath&&this.startPoly();const c=i.alpha>0;return c?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._fillStyle,{visible:c},i)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(i,l,c,f){return this.drawShape(new Rr(i,l,c,f))}drawRoundedRect(i,l,c,f,S){return this.drawShape(new Fs(i,l,c,f,S))}drawCircle(i,l,c){return this.drawShape(new Es(i,l,c))}drawEllipse(i,l,c,f){return this.drawShape(new to(i,l,c,f))}drawPolygon(...i){let l,c=!0;const f=i[0];f.points?(c=f.closeStroke,l=f.points):Array.isArray(i[0])?l=i[0]:l=i;const S=new Ni(l);return S.closeStroke=c,this.drawShape(S),this}drawShape(i){return this._holeMode?this._geometry.drawHole(i,this._matrix):this._geometry.drawShape(i,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const i=this._geometry.graphicsData;return i.length===1&&i[0].shape.type===Pi.RECT&&!i[0].matrix&&!i[0].holes.length&&!(i[0].lineStyle.visible&&i[0].lineStyle.width)}_render(i){this.finishPoly();const l=this._geometry;l.updateBatches(),l.batchable?(this.batchDirty!==l.batchDirty&&this._populateBatches(),this._renderBatched(i)):(i.batch.flush(),this._renderDirect(i))}_populateBatches(){const i=this._geometry,l=this.blendMode,c=i.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=i.batchDirty,this.batches.length=c,this.vertexData=new Float32Array(i.points);for(let f=0;f<c;f++){const S=i.batches[f],N=S.style.color,U=new Float32Array(this.vertexData.buffer,S.attribStart*4*2,S.attribSize*2),W=new Float32Array(i.uvsFloat32.buffer,S.attribStart*4*2,S.attribSize*2),Q=new Uint16Array(i.indicesUint16.buffer,S.start*2,S.size),lt={vertexData:U,blendMode:l,indices:Q,uvs:W,_batchRGB:ur.shared.setValue(N).toRgbArray(),_tintRGB:N,_texture:S.style.texture,alpha:S.style.alpha,worldAlpha:1};this.batches[f]=lt}}_renderBatched(i){if(this.batches.length){i.batch.setObjectRenderer(i.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let l=0,c=this.batches.length;l<c;l++){const f=this.batches[l];f.worldAlpha=this.worldAlpha*f.alpha,i.plugins[this.pluginName].render(f)}}}_renderDirect(i){const l=this._resolveDirectShader(i),c=this._geometry,f=this.worldAlpha,S=l.uniforms,N=c.drawCalls;S.translationMatrix=this.transform.worldTransform,ur.shared.setValue(this._tintColor).premultiply(f).toArray(S.tint),i.shader.bind(l),i.geometry.bind(c,l),i.state.set(this.state);for(let U=0,W=N.length;U<W;U++)this._renderDrawCallDirect(i,c.drawCalls[U])}_renderDrawCallDirect(i,l){const{texArray:c,type:f,size:S,start:N}=l,U=c.count;for(let W=0;W<U;W++)i.texture.bind(c.elements[W],W);i.geometry.draw(f,S,N)}_resolveDirectShader(i){let l=this.shader;const c=this.pluginName;if(!l){if(!Hi[c]){const{maxTextures:f}=i.plugins[c],S=new Int32Array(f);for(let W=0;W<f;W++)S[W]=W;const N={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qr,default:us.from({uSamplers:S},!0)},U=i.plugins[c]._shader.program;Hi[c]=new _n(U,N)}l=Hi[c]}return l}_calculateBounds(){this.finishPoly();const i=this._geometry;if(!i.graphicsData.length)return;const{minX:l,minY:c,maxX:f,maxY:S}=i.bounds;this._bounds.addFrame(this.transform,l,c,f,S)}containsPoint(i){return this.worldTransform.applyInverse(i,bf._TEMP_POINT),this._geometry.containsPoint(bf._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let i=0;i<this.batches.length;i++){const l=this.batches[i];l._tintRGB=ur.shared.setValue(this._tintColor).multiply(l._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const i=this.transform._worldID;if(this._transformID===i)return;this._transformID=i;const l=this.transform.worldTransform,c=l.a,f=l.b,S=l.c,N=l.d,U=l.tx,W=l.ty,Q=this._geometry.points,lt=this.vertexData;let ft=0;for(let mt=0;mt<Q.length;mt+=2){const _t=Q[mt],Pt=Q[mt+1];lt[ft++]=c*_t+S*Pt+U,lt[ft++]=N*Pt+f*_t+W}}closePath(){const i=this.currentPath;return i&&(i.closeStroke=!0,this.finishPoly()),this}setMatrix(i){return this._matrix=i,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(i){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(i)}};cs.curves=Mi,cs._TEMP_POINT=new Mr;let jn=cs;const Wi={buildPoly:_u,buildCircle:ao,buildRectangle:sc,buildRoundedRectangle:nc,buildLine:ac,ArcUtils:wn,BezierUtils:ml,QuadraticUtils:gl,BatchPart:vl,FILL_COMMANDS:yl,BATCH_POOL:xu,DRAW_CALL_POOL:xa};class _l{constructor(i,l){this.uvBuffer=i,this.uvMatrix=l,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(i){if(!i&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const l=this.uvBuffer.data;(!this.data||this.data.length!==l.length)&&(this.data=new Float32Array(l.length)),this.uvMatrix.multiplyUvs(l,this.data),this._updateID++}}const Xn=new Mr,xl=new Ni,Eu=class Ym extends wi{constructor(i,l,c,f=O.TRIANGLES){super(),this.geometry=i,this.shader=l,this.state=c||Ze.for2d(),this.drawMode=f,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=st.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(i){this._geometry!==i&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=i,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(i){this.shader=i}get material(){return this.shader}set blendMode(i){this.state.blendMode=i}get blendMode(){return this.state.blendMode}set roundPixels(i){this._roundPixels!==i&&(this._transformID=-1),this._roundPixels=i}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(i){this.shader.tint=i}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(i){this.shader.texture=i}_render(i){const l=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===O.TRIANGLES&&l.length<Ym.BATCHABLE_SIZE*2?this._renderToBatch(i):this._renderDefault(i)}_renderDefault(i){const l=this.shader;l.alpha=this.worldAlpha,l.update&&l.update(),i.batch.flush(),l.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),i.shader.bind(l),i.state.set(this.state),i.geometry.bind(this.geometry,l),i.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(i){const l=this.geometry,c=this.shader;c.uvMatrix&&(c.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=l.indexBuffer.data,this._tintRGB=c._tintRGB,this._texture=c.texture;const f=this.material.pluginName;i.batch.setObjectRenderer(i.plugins[f]),i.plugins[f].render(this)}calculateVertices(){const i=this.geometry.buffers[0],l=i.data,c=i._updateID;if(c===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==l.length&&(this.vertexData=new Float32Array(l.length));const f=this.transform.worldTransform,S=f.a,N=f.b,U=f.c,W=f.d,Q=f.tx,lt=f.ty,ft=this.vertexData;for(let mt=0;mt<ft.length/2;mt++){const _t=l[mt*2],Pt=l[mt*2+1];ft[mt*2]=S*_t+U*Pt+Q,ft[mt*2+1]=N*_t+W*Pt+lt}if(this._roundPixels){const mt=st.RESOLUTION;for(let _t=0;_t<ft.length;++_t)ft[_t]=Math.round(ft[_t]*mt)/mt}this.vertexDirty=c}calculateUvs(){const i=this.geometry.buffers[1],l=this.shader;l.uvMatrix.isSimple?this.uvs=i.data:(this.batchUvs||(this.batchUvs=new _l(i,l.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(i){if(!this.getBounds().contains(i.x,i.y))return!1;this.worldTransform.applyInverse(i,Xn);const l=this.geometry.getBuffer("aVertexPosition").data,c=xl.points,f=this.geometry.getIndex().data,S=f.length,N=this.drawMode===4?3:1;for(let U=0;U+2<S;U+=N){const W=f[U]*2,Q=f[U+1]*2,lt=f[U+2]*2;if(c[0]=l[W],c[1]=l[W+1],c[2]=l[Q],c[3]=l[Q+1],c[4]=l[lt],c[5]=l[lt+1],xl.contains(Xn.x,Xn.y))return!0}return!1}destroy(i){super.destroy(i),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Eu.BATCHABLE_SIZE=100;let Ta=Eu;class Rs extends Ki{constructor(i,l,c){super();const f=new $r(i),S=new $r(l,!0),N=new $r(c,!0,!0);this.addAttribute("aVertexPosition",f,2,!1,p.FLOAT).addAttribute("aTextureCoord",S,2,!1,p.FLOAT).addIndex(N),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var lc=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Ea=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Pn extends _n{constructor(i,l){const c={uSampler:i,alpha:1,uTextureMatrix:Qr.IDENTITY,uColor:new Float32Array([1,1,1,1])};l=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},l),l.uniforms&&Object.assign(c,l.uniforms),super(l.program||en.from(Ea,lc),c),this._colorDirty=!1,this.uvMatrix=new Wl(i),this.batchable=l.program===void 0,this.pluginName=l.pluginName,this._tintColor=new ur(l.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=l.alpha}get texture(){return this.uniforms.uSampler}set texture(i){this.uniforms.uSampler!==i&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!i.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=i,this.uvMatrix.texture=i)}set alpha(i){i!==this._alpha&&(this._alpha=i,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(i){i!==this.tint&&(this._tintColor.setValue(i),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const i=this.texture.baseTexture.alphaMode;ur.shared.setValue(this._tintColor).premultiply(this._alpha,i).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class uc extends null{constructor(i=100,l=100,c=10,f=10){super(),this.segWidth=c,this.segHeight=f,this.width=i,this.height=l,this.build()}build(){const i=this.segWidth*this.segHeight,l=[],c=[],f=[],S=this.segWidth-1,N=this.segHeight-1,U=this.width/S,W=this.height/N;for(let lt=0;lt<i;lt++){const ft=lt%this.segWidth,mt=lt/this.segWidth|0;l.push(ft*U,mt*W),c.push(ft/S,mt/N)}const Q=S*N;for(let lt=0;lt<Q;lt++){const ft=lt%S,mt=lt/S|0,_t=mt*this.segWidth+ft,Pt=mt*this.segWidth+ft+1,Dt=(mt+1)*this.segWidth+ft,Wt=(mt+1)*this.segWidth+ft+1;f.push(_t,Pt,Dt,Pt,Wt,Dt)}this.buffers[0].data=new Float32Array(l),this.buffers[1].data=new Float32Array(c),this.indexBuffer.data=new Uint16Array(f),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class jd extends null{constructor(i=200,l,c=0){super(new Float32Array(l.length*4),new Float32Array(l.length*4),new Uint16Array((l.length-1)*6)),this.points=l,this._width=i,this.textureScale=c,this.build()}get width(){return this._width}build(){const i=this.points;if(!i)return;const l=this.getBuffer("aVertexPosition"),c=this.getBuffer("aTextureCoord"),f=this.getIndex();if(i.length<1)return;l.data.length/4!==i.length&&(l.data=new Float32Array(i.length*4),c.data=new Float32Array(i.length*4),f.data=new Uint16Array((i.length-1)*6));const S=c.data,N=f.data;S[0]=0,S[1]=0,S[2]=0,S[3]=1;let U=0,W=i[0];const Q=this._width*this.textureScale,lt=i.length;for(let mt=0;mt<lt;mt++){const _t=mt*4;if(this.textureScale>0){const Pt=W.x-i[mt].x,Dt=W.y-i[mt].y,Wt=Math.sqrt(Pt*Pt+Dt*Dt);W=i[mt],U+=Wt/Q}else U=mt/(lt-1);S[_t]=U,S[_t+1]=0,S[_t+2]=U,S[_t+3]=1}let ft=0;for(let mt=0;mt<lt-1;mt++){const _t=mt*2;N[ft++]=_t,N[ft++]=_t+1,N[ft++]=_t+2,N[ft++]=_t+2,N[ft++]=_t+1,N[ft++]=_t+3}c.update(),f.update(),this.updateVertices()}updateVertices(){const i=this.points;if(i.length<1)return;let l=i[0],c,f=0,S=0;const N=this.buffers[0].data,U=i.length,W=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let Q=0;Q<U;Q++){const lt=i[Q],ft=Q*4;Q<i.length-1?c=i[Q+1]:c=lt,S=-(c.x-l.x),f=c.y-l.y;let mt=(1-Q/(U-1))*10;mt>1&&(mt=1);const _t=Math.sqrt(f*f+S*S);_t<1e-6?(f=0,S=0):(f/=_t,S/=_t,f*=W,S*=W),N[ft]=lt.x+f,N[ft+1]=lt.y+S,N[ft+2]=lt.x-f,N[ft+3]=lt.y-S,l=lt}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class Go extends null{constructor(i,l,c){const f=new PlaneGeometry(i.width,i.height,l,c),S=new MeshMaterial(Texture.WHITE);super(f,S),this.texture=i,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const i=this.geometry,{width:l,height:c}=this.shader.texture;this.autoResize&&(i.width!==l||i.height!==c)&&(i.width=this.shader.texture.width,i.height=this.shader.texture.height,i.build())}set texture(i){this.shader.texture!==i&&(this.shader.texture=i,this._textureID=-1,i.baseTexture.valid?this.textureUpdated():i.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(i){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(i)}destroy(i){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(i)}}const Vo=10;class zo extends null{constructor(i,l,c,f,S){var N,U,W,Q,lt,ft,mt,_t;super(Texture.WHITE,4,4),this._origWidth=i.orig.width,this._origHeight=i.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=(U=l!=null?l:(N=i.defaultBorders)==null?void 0:N.left)!=null?U:Vo,this._rightWidth=(Q=f!=null?f:(W=i.defaultBorders)==null?void 0:W.right)!=null?Q:Vo,this._topHeight=(ft=c!=null?c:(lt=i.defaultBorders)==null?void 0:lt.top)!=null?ft:Vo,this._bottomHeight=(_t=S!=null?S:(mt=i.defaultBorders)==null?void 0:mt.bottom)!=null?_t:Vo,this.texture=i}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(i){this.geometry.getBuffer("aVertexPosition").data=i}updateHorizontalVertices(){const i=this.vertices,l=this._getMinScale();i[9]=i[11]=i[13]=i[15]=this._topHeight*l,i[17]=i[19]=i[21]=i[23]=this._height-this._bottomHeight*l,i[25]=i[27]=i[29]=i[31]=this._height}updateVerticalVertices(){const i=this.vertices,l=this._getMinScale();i[2]=i[10]=i[18]=i[26]=this._leftWidth*l,i[4]=i[12]=i[20]=i[28]=this._width-this._rightWidth*l,i[6]=i[14]=i[22]=i[30]=this._width}_getMinScale(){const i=this._leftWidth+this._rightWidth,l=this._width>i?1:this._width/i,c=this._topHeight+this._bottomHeight,f=this._height>c?1:this._height/c;return Math.min(l,f)}get width(){return this._width}set width(i){this._width=i,this._refresh()}get height(){return this._height}set height(i){this._height=i,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(i){this._leftWidth=i,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(i){this._rightWidth=i,this._refresh()}get topHeight(){return this._topHeight}set topHeight(i){this._topHeight=i,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(i){this._bottomHeight=i,this._refresh()}_refresh(){const i=this.texture,l=this.geometry.buffers[1].data;this._origWidth=i.orig.width,this._origHeight=i.orig.height;const c=1/this._origWidth,f=1/this._origHeight;l[0]=l[8]=l[16]=l[24]=0,l[1]=l[3]=l[5]=l[7]=0,l[6]=l[14]=l[22]=l[30]=1,l[25]=l[27]=l[29]=l[31]=1,l[2]=l[10]=l[18]=l[26]=c*this._leftWidth,l[4]=l[12]=l[20]=l[28]=1-c*this._rightWidth,l[9]=l[11]=l[13]=l[15]=f*this._topHeight,l[17]=l[19]=l[21]=l[23]=1-f*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class hc extends null{constructor(i=Texture.EMPTY,l,c,f,S){const N=new MeshGeometry(l,c,f);N.getBuffer("aVertexPosition").static=!1;const U=new MeshMaterial(i);super(N,U,null,S),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(i){this.geometry.getBuffer("aVertexPosition").data=i}_render(i){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(i)}}class Su extends null{constructor(i,l,c=0){const f=new RopeGeometry(i.height,l,c),S=new MeshMaterial(i);c>0&&(i.baseTexture.wrapMode=WRAP_MODES.REPEAT),super(f,S),this.autoUpdate=!0}_render(i){const l=this.geometry;(this.autoUpdate||l._width!==this.shader.texture.height)&&(l._width=this.shader.texture.height,l.update()),super._render(i)}}class Xd extends null{constructor(i=1500,l,c=16384,f=!1){super();const S=16384;c>S&&(c=S),this._properties=[!1,!0,!1,!1,!1],this._maxSize=i,this._batchSize=c,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=BLEND_MODES.NORMAL,this.autoResize=f,this.roundPixels=!0,this.baseTexture=null,this.setProperties(l),this._tintColor=new Color(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(i){i&&(this._properties[0]="vertices"in i||"scale"in i?!!i.vertices||!!i.scale:this._properties[0],this._properties[1]="position"in i?!!i.position:this._properties[1],this._properties[2]="rotation"in i?!!i.rotation:this._properties[2],this._properties[3]="uvs"in i?!!i.uvs:this._properties[3],this._properties[4]="tint"in i||"alpha"in i?!!i.tint||!!i.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(i){this._tintColor.setValue(i),this._tintColor.toRgbArray(this.tintRgb)}render(i){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),i.batch.setObjectRenderer(i.plugins.particle),i.plugins.particle.render(this))}onChildrenChange(i){const l=Math.floor(i/this._batchSize);for(;this._bufferUpdateIDs.length<l;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[l]=++this._updateID}dispose(){if(this._buffers){for(let i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._buffers=null}}destroy(i){super.destroy(i),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class Tl{constructor(i,l,c){this.geometry=new Ki,this.indexBuffer=null,this.size=c,this.dynamicProperties=[],this.staticProperties=[];for(let f=0;f<i.length;++f){let S=i[f];S={attributeName:S.attributeName,size:S.size,uploadFunction:S.uploadFunction,type:S.type||p.FLOAT,offset:S.offset},l[f]?this.dynamicProperties.push(S):this.staticProperties.push(S)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const i=this.geometry;let l=0;this.indexBuffer=new $r(Nl(this.size),!0,!0),i.addIndex(this.indexBuffer),this.dynamicStride=0;for(let N=0;N<this.dynamicProperties.length;++N){const U=this.dynamicProperties[N];U.offset=l,l+=U.size,this.dynamicStride+=U.size}const c=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(c),this.dynamicDataUint32=new Uint32Array(c),this.dynamicBuffer=new $r(this.dynamicData,!1,!1);let f=0;this.staticStride=0;for(let N=0;N<this.staticProperties.length;++N){const U=this.staticProperties[N];U.offset=f,f+=U.size,this.staticStride+=U.size}const S=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(S),this.staticDataUint32=new Uint32Array(S),this.staticBuffer=new $r(this.staticData,!0,!1);for(let N=0;N<this.dynamicProperties.length;++N){const U=this.dynamicProperties[N];i.addAttribute(U.attributeName,this.dynamicBuffer,0,U.type===p.UNSIGNED_BYTE,U.type,this.dynamicStride*4,U.offset*4)}for(let N=0;N<this.staticProperties.length;++N){const U=this.staticProperties[N];i.addAttribute(U.attributeName,this.staticBuffer,0,U.type===p.UNSIGNED_BYTE,U.type,this.staticStride*4,U.offset*4)}}uploadDynamic(i,l,c){for(let f=0;f<this.dynamicProperties.length;f++){const S=this.dynamicProperties[f];S.uploadFunction(i,l,c,S.type===p.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,S.offset)}this.dynamicBuffer._updateID++}uploadStatic(i,l,c){for(let f=0;f<this.staticProperties.length;f++){const S=this.staticProperties[f];S.uploadFunction(i,l,c,S.type===p.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,S.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var bu=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,ds=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Wn extends La{constructor(i){super(i),this.shader=null,this.properties=null,this.tempMatrix=new Qr,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:p.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=_n.from(ds,bu,{}),this.state=Ze.for2d()}render(i){const l=i.children,c=i._maxSize,f=i._batchSize,S=this.renderer;let N=l.length;if(N===0)return;N>c&&!i.autoResize&&(N=c);let U=i._buffers;U||(U=i._buffers=this.generateBuffers(i));const W=l[0]._texture.baseTexture,Q=W.alphaMode>0;this.state.blendMode=is(i.blendMode,Q),S.state.set(this.state);const lt=S.gl,ft=i.worldTransform.copyTo(this.tempMatrix);ft.prepend(S.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=ft.toArray(!0),this.shader.uniforms.uColor=ur.shared.setValue(i.tintRgb).premultiply(i.worldAlpha,Q).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=W,this.renderer.shader.bind(this.shader);let mt=!1;for(let _t=0,Pt=0;_t<N;_t+=f,Pt+=1){let Dt=N-_t;Dt>f&&(Dt=f),Pt>=U.length&&U.push(this._generateOneMoreBuffer(i));const Wt=U[Pt];Wt.uploadDynamic(l,_t,Dt);const Jt=i._bufferUpdateIDs[Pt]||0;mt=mt||Wt._updateID<Jt,mt&&(Wt._updateID=i._updateID,Wt.uploadStatic(l,_t,Dt)),S.geometry.bind(Wt.geometry),lt.drawElements(lt.TRIANGLES,Dt*6,lt.UNSIGNED_SHORT,0)}}generateBuffers(i){const l=[],c=i._maxSize,f=i._batchSize,S=i._properties;for(let N=0;N<c;N+=f)l.push(new Tl(this.properties,S,f));return l}_generateOneMoreBuffer(i){const l=i._batchSize,c=i._properties;return new Tl(this.properties,c,l)}uploadVertices(i,l,c,f,S,N){let U=0,W=0,Q=0,lt=0;for(let ft=0;ft<c;++ft){const mt=i[l+ft],_t=mt._texture,Pt=mt.scale.x,Dt=mt.scale.y,Wt=_t.trim,Jt=_t.orig;Wt?(W=Wt.x-mt.anchor.x*Jt.width,U=W+Wt.width,lt=Wt.y-mt.anchor.y*Jt.height,Q=lt+Wt.height):(U=Jt.width*(1-mt.anchor.x),W=Jt.width*-mt.anchor.x,Q=Jt.height*(1-mt.anchor.y),lt=Jt.height*-mt.anchor.y),f[N]=W*Pt,f[N+1]=lt*Dt,f[N+S]=U*Pt,f[N+S+1]=lt*Dt,f[N+S*2]=U*Pt,f[N+S*2+1]=Q*Dt,f[N+S*3]=W*Pt,f[N+S*3+1]=Q*Dt,N+=S*4}}uploadPosition(i,l,c,f,S,N){for(let U=0;U<c;U++){const W=i[l+U].position;f[N]=W.x,f[N+1]=W.y,f[N+S]=W.x,f[N+S+1]=W.y,f[N+S*2]=W.x,f[N+S*2+1]=W.y,f[N+S*3]=W.x,f[N+S*3+1]=W.y,N+=S*4}}uploadRotation(i,l,c,f,S,N){for(let U=0;U<c;U++){const W=i[l+U].rotation;f[N]=W,f[N+S]=W,f[N+S*2]=W,f[N+S*3]=W,N+=S*4}}uploadUvs(i,l,c,f,S,N){for(let U=0;U<c;++U){const W=i[l+U]._texture._uvs;W?(f[N]=W.x0,f[N+1]=W.y0,f[N+S]=W.x1,f[N+S+1]=W.y1,f[N+S*2]=W.x2,f[N+S*2+1]=W.y2,f[N+S*3]=W.x3,f[N+S*3+1]=W.y3,N+=S*4):(f[N]=0,f[N+1]=0,f[N+S]=0,f[N+S+1]=0,f[N+S*2]=0,f[N+S*2+1]=0,f[N+S*3]=0,f[N+S*3+1]=0,N+=S*4)}}uploadTint(i,l,c,f,S,N){for(let U=0;U<c;++U){const W=i[l+U],Q=ur.shared.setValue(W._tintRGB).toPremultiplied(W.alpha,W.texture.baseTexture.alphaMode>0);f[N]=Q,f[N+S]=Q,f[N+S*2]=Q,f[N+S*3]=Q,N+=S*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Wn.extension={name:"particle",type:It.RendererPlugin},zt.add(Wn);var Is=(u=>(u[u.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",u[u.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",u))(Is||{});const ts={willReadFrequently:!0},an=class mr{static get experimentalLetterSpacingSupported(){let i=mr._experimentalLetterSpacingSupported;if(i!==void 0){const l=st.ADAPTER.getCanvasRenderingContext2D().prototype;i=mr._experimentalLetterSpacingSupported="letterSpacing"in l||"textLetterSpacing"in l}return i}constructor(i,l,c,f,S,N,U,W,Q){this.text=i,this.style=l,this.width=c,this.height=f,this.lines=S,this.lineWidths=N,this.lineHeight=U,this.maxLineWidth=W,this.fontProperties=Q}static measureText(i,l,c,f=mr._canvas){c=c!=null?c:l.wordWrap;const S=l.toFontString(),N=mr.measureFont(S);N.fontSize===0&&(N.fontSize=l.fontSize,N.ascent=l.fontSize);const U=f.getContext("2d",ts);U.font=S;const W=(c?mr.wordWrap(i,l,f):i).split(/(?:\r\n|\r|\n)/),Q=new Array(W.length);let lt=0;for(let Pt=0;Pt<W.length;Pt++){const Dt=mr._measureText(W[Pt],l.letterSpacing,U);Q[Pt]=Dt,lt=Math.max(lt,Dt)}let ft=lt+l.strokeThickness;l.dropShadow&&(ft+=l.dropShadowDistance);const mt=l.lineHeight||N.fontSize+l.strokeThickness;let _t=Math.max(mt,N.fontSize+l.strokeThickness*2)+l.leading+(W.length-1)*(mt+l.leading);return l.dropShadow&&(_t+=l.dropShadowDistance),new mr(i,l,ft,_t,W,Q,mt+l.leading,lt,N)}static _measureText(i,l,c){let f=!1;mr.experimentalLetterSpacingSupported&&(mr.experimentalLetterSpacing?(c.letterSpacing=`${l}px`,c.textLetterSpacing=`${l}px`,f=!0):(c.letterSpacing="0px",c.textLetterSpacing="0px"));let S=c.measureText(i).width;return S>0&&(f?S-=l:S+=(mr.graphemeSegmenter(i).length-1)*l),S}static wordWrap(i,l,c=mr._canvas){const f=c.getContext("2d",ts);let S=0,N="",U="";const W=Object.create(null),{letterSpacing:Q,whiteSpace:lt}=l,ft=mr.collapseSpaces(lt),mt=mr.collapseNewlines(lt);let _t=!ft;const Pt=l.wordWrapWidth+Q,Dt=mr.tokenize(i);for(let Wt=0;Wt<Dt.length;Wt++){let Jt=Dt[Wt];if(mr.isNewline(Jt)){if(!mt){U+=mr.addLine(N),_t=!ft,N="",S=0;continue}Jt=" "}if(ft){const re=mr.isBreakingSpace(Jt),le=mr.isBreakingSpace(N[N.length-1]);if(re&&le)continue}const pe=mr.getFromCache(Jt,Q,W,f);if(pe>Pt)if(N!==""&&(U+=mr.addLine(N),N="",S=0),mr.canBreakWords(Jt,l.breakWords)){const re=mr.wordWrapSplit(Jt);for(let le=0;le<re.length;le++){let De=re[le],xr=De,Be=1;for(;re[le+Be];){const fr=re[le+Be];if(!mr.canBreakChars(xr,fr,Jt,le,l.breakWords))De+=fr;else break;xr=fr,Be++}le+=Be-1;const Ce=mr.getFromCache(De,Q,W,f);Ce+S>Pt&&(U+=mr.addLine(N),_t=!1,N="",S=0),N+=De,S+=Ce}}else{N.length>0&&(U+=mr.addLine(N),N="",S=0);const re=Wt===Dt.length-1;U+=mr.addLine(Jt,!re),_t=!1,N="",S=0}else pe+S>Pt&&(_t=!1,U+=mr.addLine(N),N="",S=0),(N.length>0||!mr.isBreakingSpace(Jt)||_t)&&(N+=Jt,S+=pe)}return U+=mr.addLine(N,!1),U}static addLine(i,l=!0){return i=mr.trimRight(i),i=l?`${i}
`:i,i}static getFromCache(i,l,c,f){let S=c[i];return typeof S!="number"&&(S=mr._measureText(i,l,f)+l,c[i]=S),S}static collapseSpaces(i){return i==="normal"||i==="pre-line"}static collapseNewlines(i){return i==="normal"}static trimRight(i){if(typeof i!="string")return"";for(let l=i.length-1;l>=0;l--){const c=i[l];if(!mr.isBreakingSpace(c))break;i=i.slice(0,-1)}return i}static isNewline(i){return typeof i!="string"?!1:mr._newlines.includes(i.charCodeAt(0))}static isBreakingSpace(i,l){return typeof i!="string"?!1:mr._breakingSpaces.includes(i.charCodeAt(0))}static tokenize(i){const l=[];let c="";if(typeof i!="string")return l;for(let f=0;f<i.length;f++){const S=i[f],N=i[f+1];if(mr.isBreakingSpace(S,N)||mr.isNewline(S)){c!==""&&(l.push(c),c=""),l.push(S);continue}c+=S}return c!==""&&l.push(c),l}static canBreakWords(i,l){return l}static canBreakChars(i,l,c,f,S){return!0}static wordWrapSplit(i){return mr.graphemeSegmenter(i)}static measureFont(i){if(mr._fonts[i])return mr._fonts[i];const l={ascent:0,descent:0,fontSize:0},c=mr._canvas,f=mr._context;f.font=i;const S=mr.METRICS_STRING+mr.BASELINE_SYMBOL,N=Math.ceil(f.measureText(S).width);let U=Math.ceil(f.measureText(mr.BASELINE_SYMBOL).width);const W=Math.ceil(mr.HEIGHT_MULTIPLIER*U);if(U=U*mr.BASELINE_MULTIPLIER|0,N===0||W===0)return mr._fonts[i]=l,l;c.width=N,c.height=W,f.fillStyle="#f00",f.fillRect(0,0,N,W),f.font=i,f.textBaseline="alphabetic",f.fillStyle="#000",f.fillText(S,0,U);const Q=f.getImageData(0,0,N,W).data,lt=Q.length,ft=N*4;let mt=0,_t=0,Pt=!1;for(mt=0;mt<U;++mt){for(let Dt=0;Dt<ft;Dt+=4)if(Q[_t+Dt]!==255){Pt=!0;break}if(!Pt)_t+=ft;else break}for(l.ascent=U-mt,_t=lt-ft,Pt=!1,mt=W;mt>U;--mt){for(let Dt=0;Dt<ft;Dt+=4)if(Q[_t+Dt]!==255){Pt=!0;break}if(!Pt)_t-=ft;else break}return l.descent=mt-U,l.fontSize=l.ascent+l.descent,mr._fonts[i]=l,l}static clearMetrics(i=""){i?delete mr._fonts[i]:mr._fonts={}}static get _canvas(){var i;if(!mr.__canvas){let l;try{const c=new OffscreenCanvas(0,0);if((i=c.getContext("2d",ts))!=null&&i.measureText)return mr.__canvas=c,c;l=st.ADAPTER.createCanvas()}catch(c){l=st.ADAPTER.createCanvas()}l.width=l.height=10,mr.__canvas=l}return mr.__canvas}static get _context(){return mr.__context||(mr.__context=mr._canvas.getContext("2d",ts)),mr.__context}};an.METRICS_STRING="|\xC9q\xC5",an.BASELINE_SYMBOL="M",an.BASELINE_MULTIPLIER=1.4,an.HEIGHT_MULTIPLIER=2,an.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const u=new Intl.Segmenter;return i=>[...u.segment(i)].map(l=>l.segment)}return u=>[...u]})(),an.experimentalLetterSpacing=!1,an._fonts={},an._newlines=[10,13],an._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Mn=an;const cc=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Wd=class Fc{constructor(i){this.styleID=0,this.reset(),$n(this,i,i)}clone(){const i={};return $n(i,this,Fc.defaultStyle),new Fc(i)}reset(){$n(this,Fc.defaultStyle,Fc.defaultStyle)}get align(){return this._align}set align(i){this._align!==i&&(this._align=i,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(i){this._breakWords!==i&&(this._breakWords=i,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(i){this._dropShadow!==i&&(this._dropShadow=i,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(i){this._dropShadowAlpha!==i&&(this._dropShadowAlpha=i,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(i){this._dropShadowAngle!==i&&(this._dropShadowAngle=i,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(i){this._dropShadowBlur!==i&&(this._dropShadowBlur=i,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(i){const l=Au(i);this._dropShadowColor!==l&&(this._dropShadowColor=l,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(i){this._dropShadowDistance!==i&&(this._dropShadowDistance=i,this.styleID++)}get fill(){return this._fill}set fill(i){const l=Au(i);this._fill!==l&&(this._fill=l,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(i){this._fillGradientType!==i&&(this._fillGradientType=i,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(i){dc(this._fillGradientStops,i)||(this._fillGradientStops=i,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(i){this.fontFamily!==i&&(this._fontFamily=i,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(i){this._fontSize!==i&&(this._fontSize=i,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(i){this._fontStyle!==i&&(this._fontStyle=i,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(i){this._fontVariant!==i&&(this._fontVariant=i,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(i){this._fontWeight!==i&&(this._fontWeight=i,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(i){this._lineHeight!==i&&(this._lineHeight=i,this.styleID++)}get leading(){return this._leading}set leading(i){this._leading!==i&&(this._leading=i,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(i){this._lineJoin!==i&&(this._lineJoin=i,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(i){this._miterLimit!==i&&(this._miterLimit=i,this.styleID++)}get padding(){return this._padding}set padding(i){this._padding!==i&&(this._padding=i,this.styleID++)}get stroke(){return this._stroke}set stroke(i){const l=Au(i);this._stroke!==l&&(this._stroke=l,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(i){this._strokeThickness!==i&&(this._strokeThickness=i,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(i){this._textBaseline!==i&&(this._textBaseline=i,this.styleID++)}get trim(){return this._trim}set trim(i){this._trim!==i&&(this._trim=i,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(i){this._whiteSpace!==i&&(this._whiteSpace=i,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(i){this._wordWrap!==i&&(this._wordWrap=i,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(i){this._wordWrapWidth!==i&&(this._wordWrapWidth=i,this.styleID++)}toFontString(){const i=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let l=this.fontFamily;Array.isArray(this.fontFamily)||(l=this.fontFamily.split(","));for(let c=l.length-1;c>=0;c--){let f=l[c].trim();!/([\"\'])[^\'\"]+\1/.test(f)&&!cc.includes(f)&&(f=`"${f}"`),l[c]=f}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${i} ${l.join(",")}`}};Wd.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Is.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let fs=Wd;function Au(u){const i=ur.shared,l=c=>{const f=i.setValue(c);return f.alpha===1?f.toHex():f.toRgbaString()};return Array.isArray(u)?u.map(l):l(u)}function dc(u,i){if(!Array.isArray(u)||!Array.isArray(i)||u.length!==i.length)return!1;for(let l=0;l<u.length;++l)if(u[l]!==i[l])return!1;return!0}function $n(u,i,l){for(const c in l)Array.isArray(i[c])?u[c]=i[c].slice():u[c]=i[c]}const fc={texture:!0,children:!1,baseTexture:!0},uo=class Pp extends Io{constructor(i,l,c){var N;let f=!1;c||(c=st.ADAPTER.createCanvas(),f=!0),c.width=3,c.height=3;const S=hr.from(c);S.orig=new Rr,S.trim=new Rr,super(S),this._ownCanvas=f,this.canvas=c,this.context=c.getContext("2d",{willReadFrequently:!0}),this._resolution=(N=Pp.defaultResolution)!=null?N:st.RESOLUTION,this._autoResolution=Pp.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=i,this.style=l,this.localStyleID=-1}static get experimentalLetterSpacing(){return Mn.experimentalLetterSpacing}static set experimentalLetterSpacing(i){ne("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Mn.experimentalLetterSpacing=i}updateText(i){const l=this._style;if(this.localStyleID!==l.styleID&&(this.dirty=!0,this.localStyleID=l.styleID),!this.dirty&&i)return;this._font=this._style.toFontString();const c=this.context,f=Mn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),S=f.width,N=f.height,U=f.lines,W=f.lineHeight,Q=f.lineWidths,lt=f.maxLineWidth,ft=f.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,S)+l.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,N)+l.padding*2)*this._resolution),c.scale(this._resolution,this._resolution),c.clearRect(0,0,this.canvas.width,this.canvas.height),c.font=this._font,c.lineWidth=l.strokeThickness,c.textBaseline=l.textBaseline,c.lineJoin=l.lineJoin,c.miterLimit=l.miterLimit;let mt,_t;const Pt=l.dropShadow?2:1;for(let Dt=0;Dt<Pt;++Dt){const Wt=l.dropShadow&&Dt===0,Jt=Wt?Math.ceil(Math.max(1,N)+l.padding*2):0,pe=Jt*this._resolution;if(Wt){c.fillStyle="black",c.strokeStyle="black";const le=l.dropShadowColor,De=l.dropShadowBlur*this._resolution,xr=l.dropShadowDistance*this._resolution;c.shadowColor=ur.shared.setValue(le).setAlpha(l.dropShadowAlpha).toRgbaString(),c.shadowBlur=De,c.shadowOffsetX=Math.cos(l.dropShadowAngle)*xr,c.shadowOffsetY=Math.sin(l.dropShadowAngle)*xr+pe}else c.fillStyle=this._generateFillStyle(l,U,f),c.strokeStyle=l.stroke,c.shadowColor="black",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0;let re=(W-ft.fontSize)/2;W-ft.fontSize<0&&(re=0);for(let le=0;le<U.length;le++)mt=l.strokeThickness/2,_t=l.strokeThickness/2+le*W+ft.ascent+re,l.align==="right"?mt+=lt-Q[le]:l.align==="center"&&(mt+=(lt-Q[le])/2),l.stroke&&l.strokeThickness&&this.drawLetterSpacing(U[le],mt+l.padding,_t+l.padding-Jt,!0),l.fill&&this.drawLetterSpacing(U[le],mt+l.padding,_t+l.padding-Jt)}this.updateTexture()}drawLetterSpacing(i,l,c,f=!1){const S=this._style.letterSpacing;let N=!1;if(Mn.experimentalLetterSpacingSupported&&(Mn.experimentalLetterSpacing?(this.context.letterSpacing=`${S}px`,this.context.textLetterSpacing=`${S}px`,N=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),S===0||N){f?this.context.strokeText(i,l,c):this.context.fillText(i,l,c);return}let U=l;const W=Mn.graphemeSegmenter(i);let Q=this.context.measureText(i).width,lt=0;for(let ft=0;ft<W.length;++ft){const mt=W[ft];f?this.context.strokeText(mt,U,c):this.context.fillText(mt,U,c);let _t="";for(let Pt=ft+1;Pt<W.length;++Pt)_t+=W[Pt];lt=this.context.measureText(_t).width,U+=Q-lt+S,Q=lt}}updateTexture(){const i=this.canvas;if(this._style.trim){const N=bt(i);N.data&&(i.width=N.width,i.height=N.height,this.context.putImageData(N.data,0,0))}const l=this._texture,c=this._style,f=c.trim?0:c.padding,S=l.baseTexture;l.trim.width=l._frame.width=i.width/this._resolution,l.trim.height=l._frame.height=i.height/this._resolution,l.trim.x=-f,l.trim.y=-f,l.orig.width=l._frame.width-f*2,l.orig.height=l._frame.height-f*2,this._onTextureUpdate(),S.setRealSize(i.width,i.height,this._resolution),l.updateUvs(),this.dirty=!1}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._render(i)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(i,l){return this.updateText(!0),this._textureID===-1&&(i=!1),super.getBounds(i,l)}getLocalBounds(i){return this.updateText(!0),super.getLocalBounds.call(this,i)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(i,l,c){const f=i.fill;if(Array.isArray(f)){if(f.length===1)return f[0]}else return f;let S;const N=i.dropShadow?i.dropShadowDistance:0,U=i.padding||0,W=this.canvas.width/this._resolution-N-U*2,Q=this.canvas.height/this._resolution-N-U*2,lt=f.slice(),ft=i.fillGradientStops.slice();if(!ft.length){const mt=lt.length+1;for(let _t=1;_t<mt;++_t)ft.push(_t/mt)}if(lt.unshift(f[0]),ft.unshift(0),lt.push(f[f.length-1]),ft.push(1),i.fillGradientType===Is.LINEAR_VERTICAL){S=this.context.createLinearGradient(W/2,U,W/2,Q+U);const mt=c.fontProperties.fontSize+i.strokeThickness;for(let _t=0;_t<l.length;_t++){const Pt=c.lineHeight*(_t-1)+mt,Dt=c.lineHeight*_t;let Wt=Dt;_t>0&&Pt>Dt&&(Wt=(Dt+Pt)/2);const Jt=Dt+mt,pe=c.lineHeight*(_t+1);let re=Jt;_t+1<l.length&&pe<Jt&&(re=(Jt+pe)/2);const le=(re-Wt)/Q;for(let De=0;De<lt.length;De++){let xr=0;typeof ft[De]=="number"?xr=ft[De]:xr=De/lt.length;let Be=Math.min(1,Math.max(0,Wt/Q+xr*le));Be=Number(Be.toFixed(5)),S.addColorStop(Be,lt[De])}}}else{S=this.context.createLinearGradient(U,Q/2,W+U,Q/2);const mt=lt.length+1;let _t=1;for(let Pt=0;Pt<lt.length;Pt++){let Dt;typeof ft[Pt]=="number"?Dt=ft[Pt]:Dt=_t/mt,S.addColorStop(Dt,lt[Pt]),_t++}}return S}destroy(i){typeof i=="boolean"&&(i={children:i}),i=Object.assign({},fc,i),super.destroy(i),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(i){this.updateText(!0);const l=Js(this.scale.x)||1;this.scale.x=l*i/this._texture.orig.width,this._width=i}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(i){this.updateText(!0);const l=Js(this.scale.y)||1;this.scale.y=l*i/this._texture.orig.height,this._height=i}get style(){return this._style}set style(i){i=i||{},i instanceof fs?this._style=i:this._style=new fs(i),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(i){i=String(i!=null?i:""),this._text!==i&&(this._text=i,this.dirty=!0)}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}};uo.defaultAutoResolution=!0;let pc=uo;class $d{constructor(i){this.maxItemsPerFrame=i,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function mc(u,i){var c;let l=!1;if((c=u==null?void 0:u._textures)!=null&&c.length){for(let f=0;f<u._textures.length;f++)if(u._textures[f]instanceof hr){const S=u._textures[f].baseTexture;i.includes(S)||(i.push(S),l=!0)}}return l}function wu(u,i){if(u.baseTexture instanceof Cr){const l=u.baseTexture;return i.includes(l)||i.push(l),!0}return!1}function zf(u,i){if(u._texture&&u._texture instanceof hr){const l=u._texture.baseTexture;return i.includes(l)||i.push(l),!0}return!1}function Hf(u,i){return i instanceof pc?(i.updateText(!0),!0):!1}function Yd(u,i){if(i instanceof fs){const l=i.toFontString();return Mn.measureFont(l),!0}return!1}function Kd(u,i){if(u instanceof pc){i.includes(u.style)||i.push(u.style),i.includes(u)||i.push(u);const l=u._texture.baseTexture;return i.includes(l)||i.push(l),!0}return!1}function Ho(u,i){return u instanceof fs?(i.includes(u)||i.push(u),!0):!1}const Zd=class Km{constructor(i){this.limiter=new $d(Km.uploadsPerFrame),this.renderer=i,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Kd),this.registerFindHook(Ho),this.registerFindHook(mc),this.registerFindHook(wu),this.registerFindHook(zf),this.registerUploadHook(Hf),this.registerUploadHook(Yd)}upload(i){return new Promise(l=>{i&&this.add(i),this.queue.length?(this.completes.push(l),this.ticking||(this.ticking=!0,jr.system.addOnce(this.tick,this,js.UTILITY))):l()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const i=this.queue[0];let l=!1;if(i&&!i._destroyed){for(let c=0,f=this.uploadHooks.length;c<f;c++)if(this.uploadHooks[c](this.uploadHookHelper,i)){this.queue.shift(),l=!0;break}}l||this.queue.shift()}if(this.queue.length)jr.system.addOnce(this.tick,this,js.UTILITY);else{this.ticking=!1;const i=this.completes.slice(0);this.completes.length=0;for(let l=0,c=i.length;l<c;l++)i[l]()}}registerFindHook(i){return i&&this.addHooks.push(i),this}registerUploadHook(i){return i&&this.uploadHooks.push(i),this}add(i){for(let l=0,c=this.addHooks.length;l<c&&!this.addHooks[l](i,this.queue);l++);if(i instanceof wi)for(let l=i.children.length-1;l>=0;l--)this.add(i.children[l]);return this}destroy(){this.ticking&&jr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Zd.uploadsPerFrame=4;let ho=Zd;Object.defineProperties(st,{UPLOADS_PER_FRAME:{get(){return ho.uploadsPerFrame},set(u){ne("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),ho.uploadsPerFrame=u}}});function gc(u,i){return i instanceof Cr?(i._glTextures[u.CONTEXT_UID]||u.texture.bind(i),!0):!1}function Ii(u,i){if(!(i instanceof jn))return!1;const{geometry:l}=i;i.finishPoly(),l.updateBatches();const{batches:c}=l;for(let f=0;f<c.length;f++){const{texture:S}=c[f].style;S&&gc(u,S.baseTexture)}return l.batchable||u.geometry.bind(l,i._resolveDirectShader(u)),!0}function jf(u,i){return u instanceof jn?(i.push(u),!0):!1}class yc extends ho{constructor(i){super(i),this.uploadHookHelper=this.renderer,this.registerFindHook(jf),this.registerUploadHook(gc),this.registerUploadHook(Ii)}}yc.extension={name:"prepare",type:It.RendererSystem},zt.add(yc);class vc extends null{constructor(i,l=!0){super(i[0]instanceof Texture?i[0]:i[0].texture),this._textures=null,this._durations=null,this._autoUpdate=l,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=i}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(i){this.stop(),this.currentFrame=i}gotoAndPlay(i){this.currentFrame=i,this.play()}update(i){if(!this._playing)return;const l=this.animationSpeed*i,c=this.currentFrame;if(this._durations!==null){let f=this._currentTime%1*this._durations[this.currentFrame];for(f+=l/60*1e3;f<0;)this._currentTime--,f+=this._durations[this.currentFrame];const S=Math.sign(this.animationSpeed*i);for(this._currentTime=Math.floor(this._currentTime);f>=this._durations[this.currentFrame];)f-=this._durations[this.currentFrame]*S,this._currentTime+=S;this._currentTime+=f/this._durations[this.currentFrame]}else this._currentTime+=l;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):c!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<c||this.animationSpeed<0&&this.currentFrame>c)&&this.onLoop(),this.updateTexture())}updateTexture(){const i=this.currentFrame;this._previousFrame!==i&&(this._previousFrame=i,this._texture=this._textures[i],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(i){this.stop(),super.destroy(i),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(i){const l=[];for(let c=0;c<i.length;++c)l.push(Texture.from(i[c]));return new vc(l)}static fromImages(i){const l=[];for(let c=0;c<i.length;++c)l.push(Texture.from(i[c]));return new vc(l)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(i){if(i[0]instanceof Texture)this._textures=i,this._durations=null;else{this._textures=[],this._durations=[];for(let l=0;l<i.length;l++)this._textures.push(i[l].texture),this._durations.push(i[l].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let i=Math.floor(this._currentTime)%this._textures.length;return i<0&&(i+=this._textures.length),i}set currentFrame(i){if(i<0||i>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${i}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const l=this.currentFrame;this._currentTime=i,l!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const El=new Mr;class _c extends null{constructor(i,l=100,c=100){super(i),this.tileTransform=new Transform,this._width=l,this._height=c,this.uvMatrix=this.texture.uvMatrix||new TextureMatrix(i),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(i){this.uvMatrix.clampMargin=i,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(i){this.tileTransform.scale.copyFrom(i)}get tilePosition(){return this.tileTransform.position}set tilePosition(i){this.tileTransform.position.copyFrom(i)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(i){const l=this._texture;!l||!l.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),i.batch.setObjectRenderer(i.plugins[this.pluginName]),i.plugins[this.pluginName].render(this))}_calculateBounds(){const i=this._width*-this._anchor._x,l=this._height*-this._anchor._y,c=this._width*(1-this._anchor._x),f=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,i,l,c,f)}getLocalBounds(i){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),i||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),i=this._localBoundsRect),this._bounds.getRectangle(i)):super.getLocalBounds.call(this,i)}containsPoint(i){this.worldTransform.applyInverse(i,El);const l=this._width,c=this._height,f=-l*this.anchor._x;if(El.x>=f&&El.x<f+l){const S=-c*this.anchor._y;if(El.y>=S&&El.y<S+c)return!0}return!1}destroy(i){super.destroy(i),this.tileTransform=null,this.uvMatrix=null}static from(i,l){const c=i instanceof Texture?i:Texture.from(i,l);return new _c(c,l.width,l.height)}get width(){return this._width}set width(i){this._width=i}get height(){return this._height}set height(i){this._height=i}}var Qd=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Xf=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Ks=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Cu=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Wf=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ln=new Qr;class Sl extends La{constructor(i){super(i),i.runners.contextChange.add(this),this.quad=new Jo,this.state=Ze.for2d()}contextChange(){const i=this.renderer,l={globals:i.globalUniforms};this.simpleShader=_n.from(Cu,Wf,l),this.shader=i.context.webGLVersion>1?_n.from(Xf,Qd,l):_n.from(Cu,Ks,l)}render(i){const l=this.renderer,c=this.quad;let f=c.vertices;f[0]=f[6]=i._width*-i.anchor.x,f[1]=f[3]=i._height*-i.anchor.y,f[2]=f[4]=i._width*(1-i.anchor.x),f[5]=f[7]=i._height*(1-i.anchor.y);const S=i.uvRespectAnchor?i.anchor.x:0,N=i.uvRespectAnchor?i.anchor.y:0;f=c.uvs,f[0]=f[6]=-S,f[1]=f[3]=-N,f[2]=f[4]=1-S,f[5]=f[7]=1-N,c.invalidate();const U=i._texture,W=U.baseTexture,Q=W.alphaMode>0,lt=i.tileTransform.localTransform,ft=i.uvMatrix;let mt=W.isPowerOfTwo&&U.frame.width===W.width&&U.frame.height===W.height;mt&&(W._glTextures[l.CONTEXT_UID]?mt=W.wrapMode!==T.CLAMP:W.wrapMode===T.CLAMP&&(W.wrapMode=T.REPEAT));const _t=mt?this.simpleShader:this.shader,Pt=U.width,Dt=U.height,Wt=i._width,Jt=i._height;ln.set(lt.a*Pt/Wt,lt.b*Pt/Jt,lt.c*Dt/Wt,lt.d*Dt/Jt,lt.tx/Wt,lt.ty/Jt),ln.invert(),mt?ln.prepend(ft.mapCoord):(_t.uniforms.uMapCoord=ft.mapCoord.toArray(!0),_t.uniforms.uClampFrame=ft.uClampFrame,_t.uniforms.uClampOffset=ft.uClampOffset),_t.uniforms.uTransform=ln.toArray(!0),_t.uniforms.uColor=ur.shared.setValue(i.tint).premultiply(i.worldAlpha,Q).toArray(_t.uniforms.uColor),_t.uniforms.translationMatrix=i.transform.worldTransform.toArray(!0),_t.uniforms.uSampler=U,l.shader.bind(_t),l.geometry.bind(c),this.state.blendMode=is(i.blendMode,Q),l.state.set(this.state),l.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Sl.extension={name:"tilingSprite",type:It.RendererPlugin},zt.add(Sl);const co=class Nc{constructor(i,l,c=null){this.linkedSheets=[],this._texture=i instanceof hr?i:null,this.baseTexture=i instanceof Cr?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=l;const f=this.baseTexture.resource;this.resolution=this._updateResolution(c||(f?f.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(i=null){const{scale:l}=this.data.meta;let c=Ht(i,null);return c===null&&(c=parseFloat(l!=null?l:"1")),c!==1&&this.baseTexture.setResolution(c),c}parse(){return new Promise(i=>{this._callback=i,this._batchIndex=0,this._frameKeys.length<=Nc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(i){let l=i;const c=Nc.BATCH_SIZE;for(;l-i<c&&l<this._frameKeys.length;){const f=this._frameKeys[l],S=this._frames[f],N=S.frame;if(N){let U=null,W=null;const Q=S.trimmed!==!1&&S.sourceSize?S.sourceSize:S.frame,lt=new Rr(0,0,Math.floor(Q.w)/this.resolution,Math.floor(Q.h)/this.resolution);S.rotated?U=new Rr(Math.floor(N.x)/this.resolution,Math.floor(N.y)/this.resolution,Math.floor(N.h)/this.resolution,Math.floor(N.w)/this.resolution):U=new Rr(Math.floor(N.x)/this.resolution,Math.floor(N.y)/this.resolution,Math.floor(N.w)/this.resolution,Math.floor(N.h)/this.resolution),S.trimmed!==!1&&S.spriteSourceSize&&(W=new Rr(Math.floor(S.spriteSourceSize.x)/this.resolution,Math.floor(S.spriteSourceSize.y)/this.resolution,Math.floor(N.w)/this.resolution,Math.floor(N.h)/this.resolution)),this.textures[f]=new hr(this.baseTexture,U,lt,W,S.rotated?2:0,S.anchor,S.borders),hr.addToCache(this.textures[f],f.toString())}l++}}_processAnimations(){const i=this.data.animations||{};for(const l in i){this.animations[l]=[];for(let c=0;c<i[l].length;c++){const f=i[l][c];this.animations[l].push(this.textures[f])}}}_parseComplete(){const i=this._callback;this._callback=null,this._batchIndex=0,i.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Nc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Nc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(i=!1){var l;for(const c in this.textures)this.textures[c].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,i&&((l=this._texture)==null||l.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};co.BATCH_SIZE=1e3;let bl=co;const xc=["jpg","png","jpeg","avif","webp"];function Pu(u,i,l){const c={};if(u.forEach(f=>{c[f]=i}),Object.keys(i.textures).forEach(f=>{c[f]=i.textures[f]}),!l){const f=Fr.dirname(u[0]);i.linkedSheets.forEach((S,N)=>{const U=Pu([`${f}/${i.data.meta.related_multi_packs[N]}`],S,!0);Object.assign(c,U)})}return c}const $f={extension:It.Asset,cache:{test:u=>u instanceof bl,getCacheableAssets:(u,i)=>Pu(u,i,!1)},resolver:{test:u=>{const i=u.split("?")[0].split("."),l=i.pop(),c=i.pop();return l==="json"&&xc.includes(c)},parse:u=>{var l,c;const i=u.split(".");return{resolution:parseFloat((c=(l=st.RETINA_PREFIX.exec(u))==null?void 0:l[1])!=null?c:"1"),format:i[i.length-2],src:u}}},loader:{name:"spritesheetLoader",extension:{type:It.LoadParser,priority:Qi.Normal},testParse(u,i){return he(this,null,function*(){return Fr.extname(i.src).toLowerCase()===".json"&&!!u.frames})},parse(u,i,l){return he(this,null,function*(){var W,Q;let c=Fr.dirname(i.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let f=c+u.meta.image;f=ll(f,i.src);const S=(yield l.load([f]))[f],N=new bl(S.baseTexture,u,i.src);yield N.parse();const U=(W=u==null?void 0:u.meta)==null?void 0:W.related_multi_packs;if(Array.isArray(U)){const lt=[];for(const mt of U){if(typeof mt!="string")continue;let _t=c+mt;(Q=i.data)!=null&&Q.ignoreMultiPack||(_t=ll(_t,i.src),lt.push(l.load({src:_t,data:{ignoreMultiPack:!0}})))}const ft=yield Promise.all(lt);N.linkedSheets=ft,ft.forEach(mt=>{mt.linkedSheets=[N].concat(N.linkedSheets.filter(_t=>_t!==mt))})}return N})},unload(u){u.destroy(!0)}}};zt.add($f);class Sa{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Mu{static test(i){return typeof i=="string"&&i.startsWith("info face=")}static parse(i){const l=i.match(/^[a-z]+\s+.+$/gm),c={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const S in l){const N=l[S].match(/^[a-z]+/gm)[0],U=l[S].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),W={};for(const Q in U){const lt=U[Q].split("="),ft=lt[0],mt=lt[1].replace(/"/gm,""),_t=parseFloat(mt),Pt=isNaN(_t)?mt:_t;W[ft]=Pt}c[N].push(W)}const f=new Sa;return c.info.forEach(S=>f.info.push({face:S.face,size:parseInt(S.size,10)})),c.common.forEach(S=>f.common.push({lineHeight:parseInt(S.lineHeight,10)})),c.page.forEach(S=>f.page.push({id:parseInt(S.id,10),file:S.file})),c.char.forEach(S=>f.char.push({id:parseInt(S.id,10),page:parseInt(S.page,10),x:parseInt(S.x,10),y:parseInt(S.y,10),width:parseInt(S.width,10),height:parseInt(S.height,10),xoffset:parseInt(S.xoffset,10),yoffset:parseInt(S.yoffset,10),xadvance:parseInt(S.xadvance,10)})),c.kerning.forEach(S=>f.kerning.push({first:parseInt(S.first,10),second:parseInt(S.second,10),amount:parseInt(S.amount,10)})),c.distanceField.forEach(S=>f.distanceField.push({distanceRange:parseInt(S.distanceRange,10),fieldType:S.fieldType})),f}}class Ru{static test(i){const l=i;return typeof i!="string"&&"getElementsByTagName"in i&&l.getElementsByTagName("page").length&&l.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(i){const l=new Sa,c=i.getElementsByTagName("info"),f=i.getElementsByTagName("common"),S=i.getElementsByTagName("page"),N=i.getElementsByTagName("char"),U=i.getElementsByTagName("kerning"),W=i.getElementsByTagName("distanceField");for(let Q=0;Q<c.length;Q++)l.info.push({face:c[Q].getAttribute("face"),size:parseInt(c[Q].getAttribute("size"),10)});for(let Q=0;Q<f.length;Q++)l.common.push({lineHeight:parseInt(f[Q].getAttribute("lineHeight"),10)});for(let Q=0;Q<S.length;Q++)l.page.push({id:parseInt(S[Q].getAttribute("id"),10)||0,file:S[Q].getAttribute("file")});for(let Q=0;Q<N.length;Q++){const lt=N[Q];l.char.push({id:parseInt(lt.getAttribute("id"),10),page:parseInt(lt.getAttribute("page"),10)||0,x:parseInt(lt.getAttribute("x"),10),y:parseInt(lt.getAttribute("y"),10),width:parseInt(lt.getAttribute("width"),10),height:parseInt(lt.getAttribute("height"),10),xoffset:parseInt(lt.getAttribute("xoffset"),10),yoffset:parseInt(lt.getAttribute("yoffset"),10),xadvance:parseInt(lt.getAttribute("xadvance"),10)})}for(let Q=0;Q<U.length;Q++)l.kerning.push({first:parseInt(U[Q].getAttribute("first"),10),second:parseInt(U[Q].getAttribute("second"),10),amount:parseInt(U[Q].getAttribute("amount"),10)});for(let Q=0;Q<W.length;Q++)l.distanceField.push({fieldType:W[Q].getAttribute("fieldType"),distanceRange:parseInt(W[Q].getAttribute("distanceRange"),10)});return l}}class Iu{static test(i){return typeof i=="string"&&i.includes("<font>")?Ru.test(st.ADAPTER.parseXML(i)):!1}static parse(i){return Ru.parse(st.ADAPTER.parseXML(i))}}const ba=[Mu,Ru,Iu];function Ou(u){for(let i=0;i<ba.length;i++)if(ba[i].test(u))return ba[i];return null}function Jd(u,i,l,c,f,S){const N=l.fill;if(Array.isArray(N)){if(N.length===1)return N[0]}else return N;let U;const W=l.dropShadow?l.dropShadowDistance:0,Q=l.padding||0,lt=u.width/c-W-Q*2,ft=u.height/c-W-Q*2,mt=N.slice(),_t=l.fillGradientStops.slice();if(!_t.length){const Pt=mt.length+1;for(let Dt=1;Dt<Pt;++Dt)_t.push(Dt/Pt)}if(mt.unshift(N[0]),_t.unshift(0),mt.push(N[N.length-1]),_t.push(1),l.fillGradientType===Is.LINEAR_VERTICAL){U=i.createLinearGradient(lt/2,Q,lt/2,ft+Q);let Pt=0;const Dt=(S.fontProperties.fontSize+l.strokeThickness)/ft;for(let Wt=0;Wt<f.length;Wt++){const Jt=S.lineHeight*Wt;for(let pe=0;pe<mt.length;pe++){let re=0;typeof _t[pe]=="number"?re=_t[pe]:re=pe/mt.length;const le=Jt/ft+re*Dt;let De=Math.max(Pt,le);De=Math.min(De,1),U.addColorStop(De,mt[pe]),Pt=De}}}else{U=i.createLinearGradient(Q,ft/2,lt+Q,ft/2);const Pt=mt.length+1;let Dt=1;for(let Wt=0;Wt<mt.length;Wt++){let Jt;typeof _t[Wt]=="number"?Jt=_t[Wt]:Jt=Dt/Pt,U.addColorStop(Jt,mt[Wt]),Dt++}}return U}function Tc(u,i,l,c,f,S,N){const U=l.text,W=l.fontProperties;i.translate(c,f),i.scale(S,S);const Q=N.strokeThickness/2,lt=-(N.strokeThickness/2);if(i.font=N.toFontString(),i.lineWidth=N.strokeThickness,i.textBaseline=N.textBaseline,i.lineJoin=N.lineJoin,i.miterLimit=N.miterLimit,i.fillStyle=Jd(u,i,N,S,[U],l),i.strokeStyle=N.stroke,N.dropShadow){const ft=N.dropShadowColor,mt=N.dropShadowBlur*S,_t=N.dropShadowDistance*S;i.shadowColor=ur.shared.setValue(ft).setAlpha(N.dropShadowAlpha).toRgbaString(),i.shadowBlur=mt,i.shadowOffsetX=Math.cos(N.dropShadowAngle)*_t,i.shadowOffsetY=Math.sin(N.dropShadowAngle)*_t}else i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;N.stroke&&N.strokeThickness&&i.strokeText(U,Q,lt+l.lineHeight-W.descent),N.fill&&i.fillText(U,Q,lt+l.lineHeight-W.descent),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(0, 0, 0, 0)"}function qd(u){return Array.from?Array.from(u):u.split("")}function tf(u){typeof u=="string"&&(u=[u]);const i=[];for(let l=0,c=u.length;l<c;l++){const f=u[l];if(Array.isArray(f)){if(f.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${f.length}.`);const S=f[0].charCodeAt(0),N=f[1].charCodeAt(0);if(N<S)throw new Error("[BitmapFont]: Invalid character range.");for(let U=S,W=N;U<=W;U++)i.push(String.fromCharCode(U))}else i.push(...qd(f))}if(i.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return i}function Aa(u){return u.codePointAt?u.codePointAt(0):u.charCodeAt(0)}const un=class go{constructor(i,l,c){var lt,ft;const[f]=i.info,[S]=i.common,[N]=i.page,[U]=i.distanceField,W=Ht(N.file),Q={};this._ownsTextures=c,this.font=f.face,this.size=f.size,this.lineHeight=S.lineHeight/W,this.chars={},this.pageTextures=Q;for(let mt=0;mt<i.page.length;mt++){const{id:_t,file:Pt}=i.page[mt];Q[_t]=l instanceof Array?l[mt]:l[Pt],U!=null&&U.fieldType&&U.fieldType!=="none"&&(Q[_t].baseTexture.alphaMode=A.NO_PREMULTIPLIED_ALPHA,Q[_t].baseTexture.mipmap=_.OFF)}for(let mt=0;mt<i.char.length;mt++){const{id:_t,page:Pt}=i.char[mt];let{x:Dt,y:Wt,width:Jt,height:pe,xoffset:re,yoffset:le,xadvance:De}=i.char[mt];Dt/=W,Wt/=W,Jt/=W,pe/=W,re/=W,le/=W,De/=W;const xr=new Rr(Dt+Q[Pt].frame.x/W,Wt+Q[Pt].frame.y/W,Jt,pe);this.chars[_t]={xOffset:re,yOffset:le,xAdvance:De,kerning:{},texture:new hr(Q[Pt].baseTexture,xr),page:Pt}}for(let mt=0;mt<i.kerning.length;mt++){let{first:_t,second:Pt,amount:Dt}=i.kerning[mt];_t/=W,Pt/=W,Dt/=W,this.chars[Pt]&&(this.chars[Pt].kerning[_t]=Dt)}this.distanceFieldRange=U==null?void 0:U.distanceRange,this.distanceFieldType=(ft=(lt=U==null?void 0:U.fieldType)==null?void 0:lt.toLowerCase())!=null?ft:"none"}destroy(){for(const i in this.chars)this.chars[i].texture.destroy(),this.chars[i].texture=null;for(const i in this.pageTextures)this._ownsTextures&&this.pageTextures[i].destroy(!0),this.pageTextures[i]=null;this.chars=null,this.pageTextures=null}static install(i,l,c){let f;if(i instanceof Sa)f=i;else{const N=Ou(i);if(!N)throw new Error("Unrecognized data format for font.");f=N.parse(i)}l instanceof hr&&(l=[l]);const S=new go(f,l,c);return go.available[S.font]=S,S}static uninstall(i){const l=go.available[i];if(!l)throw new Error(`No font found named '${i}'`);l.destroy(),delete go.available[i]}static from(i,l,c){if(!i)throw new Error("[BitmapFont] Property `name` is required.");const Be=Object.assign({},go.defaultOptions,c),{chars:f,padding:S,resolution:N,textureWidth:U,textureHeight:W}=Be,Q=ps(Be,["chars","padding","resolution","textureWidth","textureHeight"]),lt=tf(f),ft=l instanceof fs?l:new fs(l),mt=U,_t=new Sa;_t.info[0]={face:ft.fontFamily,size:ft.fontSize},_t.common[0]={lineHeight:ft.fontSize};let Pt=0,Dt=0,Wt,Jt,pe,re=0;const le=[],De=[];for(let Ce=0;Ce<lt.length;Ce++){Wt||(Wt=st.ADAPTER.createCanvas(),Wt.width=U,Wt.height=W,Jt=Wt.getContext("2d"),pe=new Cr(Wt,He({resolution:N},Q)),le.push(pe),De.push(new hr(pe)),_t.page.push({id:De.length-1,file:""}));const fr=lt[Ce],wr=Mn.measureText(fr,ft,!1,Wt),Wr=wr.width,tr=Math.ceil(wr.height),ce=Math.ceil((ft.fontStyle==="italic"?2:1)*Wr);if(Dt>=W-tr*N){if(Dt===0)throw new Error(`[BitmapFont] textureHeight ${W}px is too small (fontFamily: '${ft.fontFamily}', fontSize: ${ft.fontSize}px, char: '${fr}')`);--Ce,Wt=null,Jt=null,pe=null,Dt=0,Pt=0,re=0;continue}if(re=Math.max(tr+wr.fontProperties.descent,re),ce*N+Pt>=mt){if(Pt===0)throw new Error(`[BitmapFont] textureWidth ${U}px is too small (fontFamily: '${ft.fontFamily}', fontSize: ${ft.fontSize}px, char: '${fr}')`);--Ce,Dt+=re*N,Dt=Math.ceil(Dt),Pt=0,re=0;continue}Tc(Wt,Jt,wr,Pt,Dt,N,ft);const be=Aa(wr.text);_t.char.push({id:be,page:De.length-1,x:Pt/N,y:Dt/N,width:ce,height:tr,xoffset:0,yoffset:0,xadvance:Wr-(ft.dropShadow?ft.dropShadowDistance:0)-(ft.stroke?ft.strokeThickness:0)}),Pt+=(ce+2*S)*N,Pt=Math.ceil(Pt)}if(!(c!=null&&c.skipKerning))for(let Ce=0,fr=lt.length;Ce<fr;Ce++){const wr=lt[Ce];for(let Wr=0;Wr<fr;Wr++){const tr=lt[Wr],ce=Jt.measureText(wr).width,be=Jt.measureText(tr).width,_r=Jt.measureText(wr+tr).width-(ce+be);_r&&_t.kerning.push({first:Aa(wr),second:Aa(tr),amount:_r})}}const xr=new go(_t,De,!0);return go.available[i]!==void 0&&go.uninstall(i),go.available[i]=xr,xr}};un.ALPHA=[["a","z"],["A","Z"]," "],un.NUMERIC=[["0","9"]],un.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],un.ASCII=[[" ","~"]],un.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:un.ALPHANUMERIC},un.available={};let Rn=un;var Fu=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,ef=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const rf=[],Al=[],sf=[],wl=class Zm extends wi{constructor(i,l={}){super();const{align:c,tint:f,maxWidth:S,letterSpacing:N,fontName:U,fontSize:W}=Object.assign({},Zm.styleDefaults,l);if(!Rn.available[U])throw new Error(`Missing BitmapFont "${U}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=c,this._tintColor=new ur(f),this._font=void 0,this._fontName=U,this._fontSize=W,this.text=i,this._maxWidth=S,this._maxLineHeight=0,this._letterSpacing=N,this._anchor=new ns(()=>{this.dirty=!0},this,0,0),this._roundPixels=st.ROUND_PIXELS,this.dirty=!0,this._resolution=st.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Wr;const i=Rn.available[this._fontName],l=this.fontSize,c=l/i.size,f=new Mr,S=[],N=[],U=[],W=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",Q=qd(W),lt=this._maxWidth*i.size/l,ft=i.distanceFieldType==="none"?rf:Al;let mt=null,_t=0,Pt=0,Dt=0,Wt=-1,Jt=0,pe=0,re=0,le=0;for(let tr=0;tr<Q.length;tr++){const ce=Q[tr],be=Aa(ce);if(/(?:\s)/.test(ce)&&(Wt=tr,Jt=_t,le++),ce==="\r"||ce===`
`){N.push(_t),U.push(-1),Pt=Math.max(Pt,_t),++Dt,++pe,f.x=0,f.y+=i.lineHeight,mt=null,le=0;continue}const _r=i.chars[be];if(!_r)continue;mt&&_r.kerning[mt]&&(f.x+=_r.kerning[mt]);const Hr=sf.pop()||{texture:hr.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Mr};Hr.texture=_r.texture,Hr.line=Dt,Hr.charCode=be,Hr.position.x=Math.round(f.x+_r.xOffset+this._letterSpacing/2),Hr.position.y=Math.round(f.y+_r.yOffset),Hr.prevSpaces=le,S.push(Hr),_t=Hr.position.x+Math.max(_r.xAdvance-_r.xOffset,_r.texture.orig.width),f.x+=_r.xAdvance+this._letterSpacing,re=Math.max(re,_r.yOffset+_r.texture.height),mt=be,Wt!==-1&&lt>0&&f.x>lt&&(++pe,Qs(S,1+Wt-pe,1+tr-Wt),tr=Wt,Wt=-1,N.push(Jt),U.push(S.length>0?S[S.length-1].prevSpaces:0),Pt=Math.max(Pt,Jt),Dt++,f.x=0,f.y+=i.lineHeight,mt=null,le=0)}const De=Q[Q.length-1];De!=="\r"&&De!==`
`&&(/(?:\s)/.test(De)&&(_t=Jt),N.push(_t),Pt=Math.max(Pt,_t),U.push(-1));const xr=[];for(let tr=0;tr<=Dt;tr++){let ce=0;this._align==="right"?ce=Pt-N[tr]:this._align==="center"?ce=(Pt-N[tr])/2:this._align==="justify"&&(ce=U[tr]<0?0:(Pt-N[tr])/U[tr]),xr.push(ce)}const Be=S.length,Ce={},fr=[],wr=this._activePagesMeshData;ft.push(...wr);for(let tr=0;tr<Be;tr++){const ce=S[tr].texture,be=ce.baseTexture.uid;if(!Ce[be]){let _r=ft.pop();if(!_r){const _e=new Rs;let Re,Br;i.distanceFieldType==="none"?(Re=new Pn(hr.EMPTY),Br=M.NORMAL):(Re=new Pn(hr.EMPTY,{program:en.from(ef,Fu),uniforms:{uFWidth:0}}),Br=M.NORMAL_NPM);const Zr=new Ta(_e,Re);Zr.blendMode=Br,_r={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Zr,vertices:null,uvs:null,indices:null}}_r.index=0,_r.indexCount=0,_r.vertexCount=0,_r.uvsCount=0,_r.total=0;const{_textureCache:Hr}=this;Hr[be]=Hr[be]||new hr(ce.baseTexture),_r.mesh.texture=Hr[be],_r.mesh.tint=this._tintColor.value,fr.push(_r),Ce[be]=_r}Ce[be].total++}for(let tr=0;tr<wr.length;tr++)fr.includes(wr[tr])||this.removeChild(wr[tr].mesh);for(let tr=0;tr<fr.length;tr++)fr[tr].mesh.parent!==this&&this.addChild(fr[tr].mesh);this._activePagesMeshData=fr;for(const tr in Ce){const ce=Ce[tr],be=ce.total;if(!(((Wr=ce.indices)==null?void 0:Wr.length)>6*be)||ce.vertices.length<Ta.BATCHABLE_SIZE*2)ce.vertices=new Float32Array(4*2*be),ce.uvs=new Float32Array(4*2*be),ce.indices=new Uint16Array(6*be);else{const _r=ce.total,Hr=ce.vertices;for(let _e=_r*4*2;_e<Hr.length;_e++)Hr[_e]=0}ce.mesh.size=6*be}for(let tr=0;tr<Be;tr++){const ce=S[tr];let be=ce.position.x+xr[ce.line]*(this._align==="justify"?ce.prevSpaces:1);this._roundPixels&&(be=Math.round(be));const _r=be*c,Hr=ce.position.y*c,_e=ce.texture,Re=Ce[_e.baseTexture.uid],Br=_e.frame,Zr=_e._uvs,Lr=Re.index++;Re.indices[Lr*6+0]=0+Lr*4,Re.indices[Lr*6+1]=1+Lr*4,Re.indices[Lr*6+2]=2+Lr*4,Re.indices[Lr*6+3]=0+Lr*4,Re.indices[Lr*6+4]=2+Lr*4,Re.indices[Lr*6+5]=3+Lr*4,Re.vertices[Lr*8+0]=_r,Re.vertices[Lr*8+1]=Hr,Re.vertices[Lr*8+2]=_r+Br.width*c,Re.vertices[Lr*8+3]=Hr,Re.vertices[Lr*8+4]=_r+Br.width*c,Re.vertices[Lr*8+5]=Hr+Br.height*c,Re.vertices[Lr*8+6]=_r,Re.vertices[Lr*8+7]=Hr+Br.height*c,Re.uvs[Lr*8+0]=Zr.x0,Re.uvs[Lr*8+1]=Zr.y0,Re.uvs[Lr*8+2]=Zr.x1,Re.uvs[Lr*8+3]=Zr.y1,Re.uvs[Lr*8+4]=Zr.x2,Re.uvs[Lr*8+5]=Zr.y2,Re.uvs[Lr*8+6]=Zr.x3,Re.uvs[Lr*8+7]=Zr.y3}this._textWidth=Pt*c,this._textHeight=(f.y+i.lineHeight)*c;for(const tr in Ce){const ce=Ce[tr];if(this.anchor.x!==0||this.anchor.y!==0){let _e=0;const Re=this._textWidth*this.anchor.x,Br=this._textHeight*this.anchor.y;for(let Zr=0;Zr<ce.total;Zr++)ce.vertices[_e++]-=Re,ce.vertices[_e++]-=Br,ce.vertices[_e++]-=Re,ce.vertices[_e++]-=Br,ce.vertices[_e++]-=Re,ce.vertices[_e++]-=Br,ce.vertices[_e++]-=Re,ce.vertices[_e++]-=Br}this._maxLineHeight=re*c;const be=ce.mesh.geometry.getBuffer("aVertexPosition"),_r=ce.mesh.geometry.getBuffer("aTextureCoord"),Hr=ce.mesh.geometry.getIndex();be.data=ce.vertices,_r.data=ce.uvs,Hr.data=ce.indices,be.update(),_r.update(),Hr.update()}for(let tr=0;tr<S.length;tr++)sf.push(S[tr]);this._font=i,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0);const{distanceFieldRange:l,distanceFieldType:c,size:f}=Rn.available[this._fontName];if(c!=="none"){const{a:S,b:N,c:U,d:W}=this.worldTransform,Q=Math.sqrt(S*S+N*N),lt=Math.sqrt(U*U+W*W),ft=(Math.abs(Q)+Math.abs(lt))/2,mt=this.fontSize/f,_t=i._view.resolution;for(const Pt of this._activePagesMeshData)Pt.mesh.shader.uniforms.uFWidth=ft*l*mt*_t}super._render(i)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const i=Rn.available[this._fontName];if(!i)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==i&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(i){if(this.tint!==i){this._tintColor.setValue(i);for(let l=0;l<this._activePagesMeshData.length;l++)this._activePagesMeshData[l].mesh.tint=i}}get align(){return this._align}set align(i){this._align!==i&&(this._align=i,this.dirty=!0)}get fontName(){return this._fontName}set fontName(i){if(!Rn.available[i])throw new Error(`Missing BitmapFont "${i}"`);this._fontName!==i&&(this._fontName=i,this.dirty=!0)}get fontSize(){var i;return(i=this._fontSize)!=null?i:Rn.available[this._fontName].size}set fontSize(i){this._fontSize!==i&&(this._fontSize=i,this.dirty=!0)}get anchor(){return this._anchor}set anchor(i){typeof i=="number"?this._anchor.set(i):this._anchor.copyFrom(i)}get text(){return this._text}set text(i){i=String(i!=null?i:""),this._text!==i&&(this._text=i,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(i){this._maxWidth!==i&&(this._maxWidth=i,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(i){i!==this._roundPixels&&(this._roundPixels=i,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}destroy(i){const{_textureCache:l}=this,c=Rn.available[this._fontName].distanceFieldType==="none"?rf:Al;c.push(...this._activePagesMeshData);for(const f of this._activePagesMeshData)this.removeChild(f.mesh);this._activePagesMeshData=[],c.filter(f=>l[f.mesh.texture.baseTexture.uid]).forEach(f=>{f.mesh.texture=hr.EMPTY});for(const f in l)l[f].destroy(),delete l[f];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(i)}};wl.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let Mp=null;const Nu=[".xml",".fnt"],d={extension:{type:It.LoadParser,priority:Qi.Normal},name:"loadBitmapFont",test(u){return Nu.includes(Fr.extname(u).toLowerCase())},testParse(u){return he(this,null,function*(){return Mu.test(u)||Iu.test(u)})},parse(u,i,l){return he(this,null,function*(){const c=Mu.test(u)?Mu.parse(u):Iu.parse(u),{src:f}=i,{page:S}=c,N=[];for(let Q=0;Q<S.length;++Q){const lt=S[Q].file;let ft=Fr.join(Fr.dirname(f),lt);ft=ll(ft,f),N.push(ft)}const U=yield l.load(N),W=N.map(Q=>U[Q]);return Rn.install(c,W,!0)})},load(u,i){return he(this,null,function*(){return(yield st.ADAPTER.fetch(u)).text()})},unload(u){u.destroy()}};zt.add(d);const g=class Qu extends fs{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(i){return new Qu(Object.keys(Qu.defaultOptions).reduce((l,c)=>gi(He({},l),{[c]:i[c]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(i=>{URL.revokeObjectURL(i.src),i.refs--,i.refs===0&&(i.fontFace&&document.fonts.delete(i.fontFace),delete Qu.availableFonts[i.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(i,l={}){const{availableFonts:c}=Qu;if(c[i]){const f=c[i];return this._fonts.push(f),f.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return st.ADAPTER.fetch(i).then(f=>f.blob()).then(f=>he(this,null,function*(){return new Promise((S,N)=>{const U=URL.createObjectURL(f),W=new FileReader;W.onload=()=>S([U,W.result]),W.onerror=N,W.readAsDataURL(f)})})).then(N=>he(this,[N],function*([f,S]){const U=Object.assign({family:Fr.basename(i,Fr.extname(i)),weight:"normal",style:"normal",display:"auto",src:f,dataSrc:S,refs:1,originalUrl:i,fontFace:null},l);c[i]=U,this._fonts.push(U),this.styleID++;const W=new FontFace(U.family,`url(${U.src})`,{weight:U.weight,style:U.style,display:U.display});U.fontFace=W,yield W.load(),document.fonts.add(W),yield document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...i){const l=i.filter(c=>!this._overrides.includes(c));l.length>0&&(this._overrides.push(...l),this.styleID++)}removeOverride(...i){const l=i.filter(c=>this._overrides.includes(c));l.length>0&&(this._overrides=this._overrides.filter(c=>!l.includes(c)),this.styleID++)}toCSS(i){return[`transform: scale(${i})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((i,l)=>`${i}
            @font-face {
                font-family: "${l.family}";
                src: url('${l.dataSrc}');
                font-weight: ${l.weight};
                font-style: ${l.style};
                font-display: ${l.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(i){this._stylesheet!==i&&(this._stylesheet=i,this.styleID++)}normalizeColor(i){return Array.isArray(i)&&(i=qr(i)),typeof i=="number"?or(i):i}dropShadowToCSS(){let i=this.normalizeColor(this.dropShadowColor);const l=this.dropShadowAlpha,c=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),f=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);i.startsWith("#")&&l<1&&(i+=(l*255|0).toString(16).padStart(2,"0"));const S=`${c}px ${f}px`;return this.dropShadowBlur>0?`text-shadow: ${S} ${this.dropShadowBlur}px ${i}`:`text-shadow: ${S} ${i}`}reset(){Object.assign(this,Qu.defaultOptions)}onBeforeDraw(){const{fontsDirty:i}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&i?new Promise(l=>setTimeout(l,100)):Promise.resolve()}get isSafari(){const{userAgent:i}=st.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(i)}set fillGradientStops(i){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(i){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(i){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(i){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(i){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(i){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(i){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};g.availableFonts={},g.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let R=g;const z=class Ju extends Io{constructor(i="",l={}){var ft;super(hr.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const c=new Image,f=hr.from(c,{scaleMode:st.SCALE_MODE,resourceOptions:{autoLoad:!1}});f.orig=new Rr,f.trim=new Rr,this.texture=f;const S="http://www.w3.org/2000/svg",N="http://www.w3.org/1999/xhtml",U=document.createElementNS(S,"svg"),W=document.createElementNS(S,"foreignObject"),Q=document.createElementNS(N,"div"),lt=document.createElementNS(N,"style");W.setAttribute("width","10000"),W.setAttribute("height","10000"),W.style.overflow="hidden",U.appendChild(W),this.maxWidth=Ju.defaultMaxWidth,this.maxHeight=Ju.defaultMaxHeight,this._domElement=Q,this._styleElement=lt,this._svgRoot=U,this._foreignObject=W,this._foreignObject.appendChild(lt),this._foreignObject.appendChild(Q),this._image=c,this._loadImage=new Image,this._autoResolution=Ju.defaultAutoResolution,this._resolution=(ft=Ju.defaultResolution)!=null?ft:st.RESOLUTION,this.text=i,this.style=l}measureText(i){var lt,ft;const{text:l,style:c,resolution:f}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},i);Object.assign(this._domElement,{innerHTML:l,style:c.toCSS(f)}),this._styleElement.textContent=c.toGlobalCSS(),document.body.appendChild(this._svgRoot);const S=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:N,height:U}=S;(N>this.maxWidth||U>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const W=Math.min(this.maxWidth,Math.ceil(N)),Q=Math.min(this.maxHeight,Math.ceil(U));return this._svgRoot.setAttribute("width",W.toString()),this._svgRoot.setAttribute("height",Q.toString()),l!==this._text&&(this._domElement.innerHTML=this._text),c!==this._style&&(Object.assign(this._domElement,{style:(lt=this._style)==null?void 0:lt.toCSS(f)}),this._styleElement.textContent=(ft=this._style)==null?void 0:ft.toGlobalCSS()),{width:W+c.padding*2,height:Q+c.padding*2}}updateText(i=!0){return he(this,null,function*(){const{style:l,_image:c,_loadImage:f}=this;if(this.localStyleID!==l.styleID&&(this.dirty=!0,this.localStyleID=l.styleID),!this.dirty&&i)return;const{width:S,height:N}=this.measureText();c.width=f.width=Math.ceil(Math.max(1,S)),c.height=f.height=Math.ceil(Math.max(1,N)),this._updateID++;const U=this._updateID;yield new Promise(W=>{f.onload=()=>he(this,null,function*(){if(U<this._updateID){W();return}yield l.onBeforeDraw(),c.src=f.src,f.onload=null,f.src="",this.updateTexture(),W()});const Q=new XMLSerializer().serializeToString(this._svgRoot);f.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(Q)}`})})}get source(){return this._image}updateTexture(){const{style:i,texture:l,_image:c,resolution:f}=this,{padding:S}=i,{baseTexture:N}=l;l.trim.width=l._frame.width=c.width/f,l.trim.height=l._frame.height=c.height/f,l.trim.x=-S,l.trim.y=-S,l.orig.width=l._frame.width-S*2,l.orig.height=l._frame.height-S*2,this._onTextureUpdate(),N.setRealSize(c.width,c.height,f),this.dirty=!1}_render(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._render(i)}_renderCanvas(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(i)}getLocalBounds(i){return this.updateText(!0),super.getLocalBounds(i)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(i){var c,f,S,N,U;typeof i=="boolean"&&(i={children:i}),i=Object.assign({},Ju.defaultDestroyOptions,i),super.destroy(i);const l=null;this.ownsStyle&&((c=this._style)==null||c.cleanFonts()),this._style=l,(f=this._svgRoot)==null||f.remove(),this._svgRoot=l,(S=this._domElement)==null||S.remove(),this._domElement=l,(N=this._foreignObject)==null||N.remove(),this._foreignObject=l,(U=this._styleElement)==null||U.remove(),this._styleElement=l,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=l,this._image.src="",this._image=l}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(i){this.updateText(!0);const l=Js(this.scale.x)||1;this.scale.x=l*i/this._image.width/this.resolution,this._width=i}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(i){this.updateText(!0);const l=Js(this.scale.y)||1;this.scale.y=l*i/this._image.height/this.resolution,this._height=i}get style(){return this._style}set style(i){this._style!==i&&(i=i||{},i instanceof R?(this.ownsStyle=!1,this._style=i):i instanceof fs?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=R.from(i)):(this.ownsStyle=!0,this._style=new R(i)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(i){i=String(i===""||i===null||i===void 0?" ":i),i=this.sanitiseText(i),this._text!==i&&(this._text=i,this.dirty=!0)}get resolution(){return this._resolution}set resolution(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)}sanitiseText(i){return i.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};z.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},z.defaultMaxWidth=2024,z.defaultMaxHeight=2024,z.defaultAutoResolution=!0;let $=null;var it;const vt=new il({resizeTo:window,backgroundColor:0});(it=document.getElementById("game"))==null||it.appendChild(vt.view);const Ut=new I.pixiGame({mode:"production",name:{title:"Stellar Odyssey",id:"stellar-odyssey"},settings:{framerate:30},pixi:{app:vt}});Ut.config.mode==="development"&&(window.Game=Ut);var Vt=Ut,Qt=Or(1122);/*!
 * @pixi/filter-adjustment - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xe=null,Te=null;class ve extends null{constructor(i){super(xe,Te),this.gamma=1,this.saturation=1,this.contrast=1,this.brightness=1,this.red=1,this.green=1,this.blue=1,this.alpha=1,Object.assign(this,i)}apply(i,l,c,f){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,i.applyFilter(this,l,c,f)}}/*!
 * @pixi/filter-kawase-blur - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-kawase-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,rr=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,lr=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`;class _i extends zr{constructor(i=4,l=3,c=!1){super($e,c?lr:rr),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new Mr,this.pixelSize=1,this._clamp=c,Array.isArray(i)?this.kernels=i:(this._blur=i,this.quality=l)}apply(i,l,c,f){const S=this._pixelSize.x/l._frame.width,N=this._pixelSize.y/l._frame.height;let U;if(this._quality===1||this._blur===0)U=this._kernels[0]+.5,this.uniforms.uOffset[0]=U*S,this.uniforms.uOffset[1]=U*N,i.applyFilter(this,l,c,f);else{const W=i.getFilterTexture();let Q=l,lt=W,ft;const mt=this._quality-1;for(let _t=0;_t<mt;_t++)U=this._kernels[_t]+.5,this.uniforms.uOffset[0]=U*S,this.uniforms.uOffset[1]=U*N,i.applyFilter(this,Q,lt,1),ft=Q,Q=lt,lt=ft;U=this._kernels[mt]+.5,this.uniforms.uOffset[0]=U*S,this.uniforms.uOffset[1]=U*N,i.applyFilter(this,Q,c,f),i.returnFilterTexture(W)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((i,l)=>i+l+.5,0))}_generateKernels(){const i=this._blur,l=this._quality,c=[i];if(i>0){let f=i;const S=i/l;for(let N=1;N<l;N++)f-=S,c.push(f)}this._kernels=c,this._updatePadding()}get kernels(){return this._kernels}set kernels(i){Array.isArray(i)&&i.length>0?(this._kernels=i,this._quality=i.length,this._blur=Math.max(...i)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(i){typeof i=="number"?(this._pixelSize.x=i,this._pixelSize.y=i):Array.isArray(i)?(this._pixelSize.x=i[0],this._pixelSize.y=i[1]):i instanceof Mr?(this._pixelSize.x=i.x,this._pixelSize.y=i.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(i){this._quality=Math.max(1,Math.round(i)),this._generateKernels()}get blur(){return this._blur}set blur(i){this._blur=i,this._generateKernels()}}/*!
 * @pixi/filter-advanced-bloom - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var te=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Yt=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`;class ie extends zr{constructor(i=.5){super(te,Yt),this.threshold=i}get threshold(){return this.uniforms.threshold}set threshold(i){this.uniforms.threshold=i}}var we=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;const cr=class extends zr{constructor(u){super(te,we),this.bloomScale=1,this.brightness=1,this._resolution=st.FILTER_RESOLUTION,typeof u=="number"&&(u={threshold:u});const i=Object.assign(cr.defaults,u);this.bloomScale=i.bloomScale,this.brightness=i.brightness;const{kernels:l,blur:c,quality:f,pixelSize:S,resolution:N}=i;this._extractFilter=new ie(i.threshold),this._extractFilter.resolution=N,this._blurFilter=l?new _i(l):new _i(c,f),this.pixelSize=S,this.resolution=N}apply(u,i,l,c,f){const S=u.getFilterTexture();this._extractFilter.apply(u,i,S,1,f);const N=u.getFilterTexture();this._blurFilter.apply(u,S,N,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=N,u.applyFilter(this,i,l,c),u.returnFilterTexture(N),u.returnFilterTexture(S)}get resolution(){return this._resolution}set resolution(u){this._resolution=u,this._extractFilter&&(this._extractFilter.resolution=u),this._blurFilter&&(this._blurFilter.resolution=u)}get threshold(){return this._extractFilter.threshold}set threshold(u){this._extractFilter.threshold=u}get kernels(){return this._blurFilter.kernels}set kernels(u){this._blurFilter.kernels=u}get blur(){return this._blurFilter.blur}set blur(u){this._blurFilter.blur=u}get quality(){return this._blurFilter.quality}set quality(u){this._blurFilter.quality=u}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(u){this._blurFilter.pixelSize=u}};let Sr=cr;Sr.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:st.FILTER_RESOLUTION};/*!
 * @pixi/filter-ascii - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-ascii is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var br=null,Ir=null;class es extends null{constructor(i=8){super(br,Ir),this.size=i}get size(){return this.uniforms.pixelSize}set size(i){this.uniforms.pixelSize=i}}/*!
 * @pixi/filter-bevel - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-bevel is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Kr=null,fo=null;class Rp extends null{constructor(i){super(Kr,fo),this._thickness=2,this._angle=0,this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),Object.assign(this,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},i),this.padding=1}_updateTransform(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)}get rotation(){return this._angle/t}set rotation(i){this._angle=i*t,this._updateTransform()}get thickness(){return this._thickness}set thickness(i){this._thickness=i,this._updateTransform()}get lightColor(){return r.rgb2hex(this.uniforms.lightColor)}set lightColor(i){r.hex2rgb(i,this.uniforms.lightColor)}get lightAlpha(){return this.uniforms.lightAlpha}set lightAlpha(i){this.uniforms.lightAlpha=i}get shadowColor(){return r.rgb2hex(this.uniforms.shadowColor)}set shadowColor(i){r.hex2rgb(i,this.uniforms.shadowColor)}get shadowAlpha(){return this.uniforms.shadowAlpha}set shadowAlpha(i){this.uniforms.shadowAlpha=i}}/*!
 * @pixi/filter-bloom - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class Uv extends null{constructor(i=2,l=4,c=n.FILTER_RESOLUTION,f=5){super();let S,N;typeof i=="number"?(S=i,N=i):i instanceof F?(S=i.x,N=i.y):Array.isArray(i)&&(S=i[0],N=i[1]),this.blurXFilter=new s(!0,S,l,c,f),this.blurYFilter=new s(!1,N,l,c,f),this.blurYFilter.blendMode=o.SCREEN,this.defaultFilter=new h}apply(i,l,c,f){const S=i.getFilterTexture();this.defaultFilter.apply(i,l,c,f),this.blurXFilter.apply(i,l,S,1),this.blurYFilter.apply(i,S,c,0),i.returnFilterTexture(S)}get blur(){return this.blurXFilter.blur}set blur(i){this.blurXFilter.blur=this.blurYFilter.blur=i}get blurX(){return this.blurXFilter.blur}set blurX(i){this.blurXFilter.blur=i}get blurY(){return this.blurYFilter.blur}set blurY(i){this.blurYFilter.blur=i}}/*!
 * @pixi/filter-bulge-pinch - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qm=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Jm=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;const Ip=class extends zr{constructor(u){super(Qm,Jm),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,Ip.defaults,u)}apply(u,i,l,c){const{width:f,height:S}=i.filterFrame;this.uniforms.dimensions[0]=f,this.uniforms.dimensions[1]=S,u.applyFilter(this,i,l,c)}get radius(){return this.uniforms.radius}set radius(u){this.uniforms.radius=u}get strength(){return this.uniforms.strength}set strength(u){this.uniforms.strength=u}get center(){return this.uniforms.center}set center(u){this.uniforms.center=u}};let qm=Ip;qm.defaults={center:[.5,.5],radius:100,strength:1};/*!
 * @pixi/filter-color-gradient - v5.2.0
 * Compiled Tue, 28 Feb 2023 14:24:35 UTC
 *
 * @pixi/filter-color-gradient is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var tg=`const float PI = 3.1415926538;
const float PI_2 = PI*2.;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;
uniform sampler2D uSampler;

const int TYPE_LINEAR = 0;
const int TYPE_RADIAL = 1;
const int TYPE_CONIC = 2;
const int MAX_STOPS = 32;

uniform int uNumStops;
uniform float uAlphas[3*MAX_STOPS];
uniform vec3 uColors[MAX_STOPS];
uniform float uOffsets[MAX_STOPS];
uniform int uType;
uniform float uAngle;
uniform float uAlpha;
uniform int uMaxColors;

struct ColorStop {
    float offset;
    vec3 color;
    float alpha;
};

mat2 rotate2d(float angle){
    return mat2(cos(angle), -sin(angle),
    sin(angle), cos(angle));
}

float projectLinearPosition(vec2 pos, float angle){
    vec2 center = vec2(0.5);
    vec2 result = pos - center;
    result = rotate2d(angle) * result;
    result = result + center;
    return clamp(result.x, 0., 1.);
}

float projectRadialPosition(vec2 pos) {
    float r = distance(vFilterCoord, vec2(0.5));
    return clamp(2.*r, 0., 1.);
}

float projectAnglePosition(vec2 pos, float angle) {
    vec2 center = pos - vec2(0.5);
    float polarAngle=atan(-center.y, center.x);
    return mod(polarAngle + angle, PI_2) / PI_2;
}

float projectPosition(vec2 pos, int type, float angle) {
    if (type == TYPE_LINEAR) {
        return projectLinearPosition(pos, angle);
    } else if (type == TYPE_RADIAL) {
        return projectRadialPosition(pos);
    } else if (type == TYPE_CONIC) {
        return projectAnglePosition(pos, angle);
    }

    return pos.y;
}

void main(void) {
    // current/original color
    vec4 currentColor = texture2D(uSampler, vTextureCoord);

    // skip calculations if gradient alpha is 0
    if (0.0 == uAlpha) {
        gl_FragColor = currentColor;
        return;
    }

    // project position
    float y = projectPosition(vFilterCoord, uType, radians(uAngle));

    // check gradient bounds
    float offsetMin = uOffsets[0];
    float offsetMax = 0.0;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (i == uNumStops-1){ // last index
            offsetMax = uOffsets[i];
        }
    }

    if (y  < offsetMin || y > offsetMax) {
        gl_FragColor = currentColor;
        return;
    }

    // limit colors
    if (uMaxColors > 0) {
        float stepSize = 1./float(uMaxColors);
        float stepNumber = float(floor(y/stepSize));
        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment
    }

    // find color stops
    ColorStop from;
    ColorStop to;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (y >= uOffsets[i]) {
            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);
            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);
        }

        if (i == uNumStops-1){ // last index
            break;
        }
    }

    // mix colors from stops
    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);
    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);

    float segmentHeight = to.offset - from.offset;
    float relativePos = y - from.offset;// position from 0 to [segmentHeight]
    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].

    float gradientAlpha = uAlpha * currentColor.a;
    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;

    // mix resulting color with current color
    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);
}
`,eg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform vec4 inputSize;
uniform vec4 outputFrame;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;
}
`,Cl=Cl||{};Cl.stringify=function(){var u={"visit_linear-gradient":function(i){return u.visit_gradient(i)},"visit_repeating-linear-gradient":function(i){return u.visit_gradient(i)},"visit_radial-gradient":function(i){return u.visit_gradient(i)},"visit_repeating-radial-gradient":function(i){return u.visit_gradient(i)},visit_gradient:function(i){var l=u.visit(i.orientation);return l&&(l+=", "),i.type+"("+l+u.visit(i.colorStops)+")"},visit_shape:function(i){var l=i.value,c=u.visit(i.at),f=u.visit(i.style);return f&&(l+=" "+f),c&&(l+=" at "+c),l},"visit_default-radial":function(i){var l="",c=u.visit(i.at);return c&&(l+=c),l},"visit_extent-keyword":function(i){var l=i.value,c=u.visit(i.at);return c&&(l+=" at "+c),l},"visit_position-keyword":function(i){return i.value},visit_position:function(i){return u.visit(i.value.x)+" "+u.visit(i.value.y)},"visit_%":function(i){return i.value+"%"},visit_em:function(i){return i.value+"em"},visit_px:function(i){return i.value+"px"},visit_literal:function(i){return u.visit_color(i.value,i)},visit_hex:function(i){return u.visit_color("#"+i.value,i)},visit_rgb:function(i){return u.visit_color("rgb("+i.value.join(", ")+")",i)},visit_rgba:function(i){return u.visit_color("rgba("+i.value.join(", ")+")",i)},visit_color:function(i,l){var c=i,f=u.visit(l.length);return f&&(c+=" "+f),c},visit_angular:function(i){return i.value+"deg"},visit_directional:function(i){return"to "+i.value},visit_array:function(i){var l="",c=i.length;return i.forEach(function(f,S){l+=u.visit(f),S<c-1&&(l+=", ")}),l},visit:function(i){if(!i)return"";var l="";if(i instanceof Array)return u.visit_array(i,l);if(i.type){var c=u["visit_"+i.type];if(c)return c(i);throw Error("Missing visitor visit_"+i.type)}else throw Error("Invalid node.")}};return function(i){return u.visit(i)}}();var Cl=Cl||{};Cl.parse=function(){var u={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},i="";function l(_e){var Re=new Error(i+": "+_e);throw Re.source=i,Re}function c(){var _e=f();return i.length>0&&l("Invalid input not EOF"),_e}function f(){return re(S)}function S(){return N("linear-gradient",u.linearGradient,W)||N("repeating-linear-gradient",u.repeatingLinearGradient,W)||N("radial-gradient",u.radialGradient,ft)||N("repeating-radial-gradient",u.repeatingRadialGradient,ft)}function N(_e,Re,Br){return U(Re,function(Zr){var Lr=Br();return Lr&&(_r(u.comma)||l("Missing comma before color stops")),{type:_e,orientation:Lr,colorStops:re(le)}})}function U(_e,Re){var Br=_r(_e);if(Br){_r(u.startCall)||l("Missing (");var Zr=Re(Br);return _r(u.endCall)||l("Missing )"),Zr}}function W(){return Q()||lt()}function Q(){return be("directional",u.sideOrCorner,1)}function lt(){return be("angular",u.angleValue,1)}function ft(){var _e,Re=mt(),Br;return Re&&(_e=[],_e.push(Re),Br=i,_r(u.comma)&&(Re=mt(),Re?_e.push(Re):i=Br)),_e}function mt(){var _e=_t()||Pt();if(_e)_e.at=Wt();else{var Re=Dt();if(Re){_e=Re;var Br=Wt();Br&&(_e.at=Br)}else{var Zr=Jt();Zr&&(_e={type:"default-radial",at:Zr})}}return _e}function _t(){var _e=be("shape",/^(circle)/i,0);return _e&&(_e.style=ce()||Dt()),_e}function Pt(){var _e=be("shape",/^(ellipse)/i,0);return _e&&(_e.style=Wr()||Dt()),_e}function Dt(){return be("extent-keyword",u.extentKeywords,1)}function Wt(){if(be("position",/^at/,0)){var _e=Jt();return _e||l("Missing positioning value"),_e}}function Jt(){var _e=pe();if(_e.x||_e.y)return{type:"position",value:_e}}function pe(){return{x:Wr(),y:Wr()}}function re(_e){var Re=_e(),Br=[];if(Re)for(Br.push(Re);_r(u.comma);)Re=_e(),Re?Br.push(Re):l("One extra comma");return Br}function le(){var _e=De();return _e||l("Expected color definition"),_e.length=Wr(),_e}function De(){return Be()||fr()||Ce()||xr()}function xr(){return be("literal",u.literalColor,0)}function Be(){return be("hex",u.hexColor,1)}function Ce(){return U(u.rgbColor,function(){return{type:"rgb",value:re(wr)}})}function fr(){return U(u.rgbaColor,function(){return{type:"rgba",value:re(wr)}})}function wr(){return _r(u.number)[1]}function Wr(){return be("%",u.percentageValue,1)||tr()||ce()}function tr(){return be("position-keyword",u.positionKeywords,1)}function ce(){return be("px",u.pixelValue,1)||be("em",u.emValue,1)}function be(_e,Re,Br){var Zr=_r(Re);if(Zr)return{type:_e,value:Zr[Br]}}function _r(_e){var Re,Br;return Br=/^[\n\r\t\s]+/.exec(i),Br&&Hr(Br[0].length),Re=_e.exec(i),Re&&Hr(Re[0].length),Re}function Hr(_e){i=i.substr(_e)}return function(_e){return i=_e.toString(),c()}}();var rg=Cl.parse;Cl.stringify;var Op={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Fp={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function ig(u){var i,l=[],c=1,f;if(typeof u=="string")if(Op[u])l=Op[u].slice(),f="rgb";else if(u==="transparent")c=0,f="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(u)){var S=u.slice(1),N=S.length,U=N<=4;c=1,U?(l=[parseInt(S[0]+S[0],16),parseInt(S[1]+S[1],16),parseInt(S[2]+S[2],16)],N===4&&(c=parseInt(S[3]+S[3],16)/255)):(l=[parseInt(S[0]+S[1],16),parseInt(S[2]+S[3],16),parseInt(S[4]+S[5],16)],N===8&&(c=parseInt(S[6]+S[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),f="rgb"}else if(i=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(u)){var W=i[1],Q=W==="rgb",S=W.replace(/a$/,"");f=S;var N=S==="cmyk"?4:S==="gray"?1:3;l=i[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(mt,_t){if(/%$/.test(mt))return _t===N?parseFloat(mt)/100:S==="rgb"?parseFloat(mt)*255/100:parseFloat(mt);if(S[_t]==="h"){if(/deg$/.test(mt))return parseFloat(mt);if(Fp[mt]!==void 0)return Fp[mt]}return parseFloat(mt)}),W===S&&l.push(1),c=Q||l[N]===void 0?1:l[N],l=l.slice(0,N)}else u.length>10&&/[0-9](?:\s|\/)/.test(u)&&(l=u.match(/([0-9]+)/g).map(function(lt){return parseFloat(lt)}),f=u.match(/([a-z])/ig).join("").toLowerCase());else isNaN(u)?Array.isArray(u)||u.length?(l=[u[0],u[1],u[2]],f="rgb",c=u.length===4?u[3]:1):u instanceof Object&&(u.r!=null||u.red!=null||u.R!=null?(f="rgb",l=[u.r||u.red||u.R||0,u.g||u.green||u.G||0,u.b||u.blue||u.B||0]):(f="hsl",l=[u.h||u.hue||u.H||0,u.s||u.saturation||u.S||0,u.l||u.lightness||u.L||u.b||u.brightness]),c=u.a||u.alpha||u.opacity||1,u.opacity!=null&&(c/=100)):(f="rgb",l=[u>>>16,(u&65280)>>>8,u&255]);return{space:f,values:l,alpha:c}}var Yf={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Kf={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(u){var i=u[0]/360,l=u[1]/100,c=u[2]/100,f,S,N,U,W;if(l===0)return W=c*255,[W,W,W];c<.5?S=c*(1+l):S=c+l-c*l,f=2*c-S,U=[0,0,0];for(var Q=0;Q<3;Q++)N=i+1/3*-(Q-1),N<0?N++:N>1&&N--,6*N<1?W=f+(S-f)*6*N:2*N<1?W=S:3*N<2?W=f+(S-f)*(2/3-N)*6:W=f,U[Q]=W*255;return U}};Yf.hsl=function(u){var i=u[0]/255,l=u[1]/255,c=u[2]/255,f=Math.min(i,l,c),S=Math.max(i,l,c),N=S-f,U,W,Q;return S===f?U=0:i===S?U=(l-c)/N:l===S?U=2+(c-i)/N:c===S&&(U=4+(i-l)/N),U=Math.min(U*60,360),U<0&&(U+=360),Q=(f+S)/2,S===f?W=0:Q<=.5?W=N/(S+f):W=N/(2-S-f),[U,W*100,Q*100]};function sg(u){Array.isArray(u)&&u.raw&&(u=String.raw(...arguments));var i,l=ig(u);if(!l.space)return[];const c=l.space[0]==="h"?Kf.min:Yf.min,f=l.space[0]==="h"?Kf.max:Yf.max;return i=Array(3),i[0]=Math.min(Math.max(l.values[0],c[0]),f[0]),i[1]=Math.min(Math.max(l.values[1],c[1]),f[1]),i[2]=Math.min(Math.max(l.values[2],c[2]),f[2]),l.space[0]==="h"&&(i=Kf.rgb(i)),i.push(Math.min(Math.max(l.alpha,0),1)),i}function Np(u){switch(typeof u){case"string":return ng(u);case"number":return fi(u);default:return u}}function ng(u){const i=sg(u);if(!i)throw new Error(`Unable to parse color "${u}" as RGBA.`);return[i[0]/255,i[1]/255,i[2]/255,i[3]]}function og(u){const i=rg(mg(u));if(i.length===0)throw new Error("Invalid CSS gradient.");if(i.length!==1)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");const l=i[0],c=ag(l.type),f=lg(l.colorStops),S=fg(l.orientation);return{type:c,stops:f,angle:S}}function ag(u){const i={"linear-gradient":0,"radial-gradient":1};if(!(u in i))throw new Error(`Unsupported gradient type "${u}"`);return i[u]}function lg(u){const i=cg(u),l=[];for(let c=0;c<u.length;c++){const f=ug(u[c]);l.push({offset:i[c],color:f.slice(0,3),alpha:f[3]})}return l}function ug(u){return Np(hg(u))}function hg(u){switch(u.type){case"hex":return`#${u.value}`;case"literal":return u.value;default:return`${u.type}(${u.value.join(",")})`}}function cg(u){const i=[];for(let f=0;f<u.length;f++){const S=u[f];let N=-1;S.type==="literal"&&S.length&&"type"in S.length&&S.length.type==="%"&&"value"in S.length&&(N=parseFloat(S.length.value)/100),i.push(N)}const l=f=>{for(let S=f;S<i.length;S++)if(i[S]!==-1)return{indexDelta:S-f,offset:i[S]};return{indexDelta:i.length-1-f,offset:1}};let c=0;for(let f=0;f<i.length;f++){const S=i[f];if(S!==-1)c=S;else if(f===0)i[f]=0;else if(f+1===i.length)i[f]=1;else{const N=l(f),U=(N.offset-c)/(1+N.indexDelta);for(let W=0;W<=N.indexDelta;W++)i[f+W]=c+(W+1)*U;f+=N.indexDelta,c=i[f]}}return i.map(dg)}function dg(u){return u.toString().length>6?parseFloat(u.toString().substring(0,6)):u}function fg(u){if(typeof u=="undefined")return 0;if("type"in u&&"value"in u)switch(u.type){case"angular":return parseFloat(u.value);case"directional":return pg(u.value)}return 0}function pg(u){const i={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(u in i))throw new Error(`Unsupported directional value "${u}"`);return i[u]}function mg(u){let i=u.replace(/\s{2,}/gu," ");return i=i.replace(/;/g,""),i=i.replace(/ ,/g,","),i=i.replace(/\( /g,"("),i=i.replace(/ \)/g,")"),i.trim()}var gg=Object.defineProperty,yg=Object.defineProperties,vg=Object.getOwnPropertyDescriptors,Dp=Object.getOwnPropertySymbols,_g=Object.prototype.hasOwnProperty,xg=Object.prototype.propertyIsEnumerable,Bp=(u,i,l)=>i in u?gg(u,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[i]=l,Zf=(u,i)=>{for(var l in i||(i={}))_g.call(i,l)&&Bp(u,l,i[l]);if(Dp)for(var l of Dp(i))xg.call(i,l)&&Bp(u,l,i[l]);return u},Tg=(u,i)=>yg(u,vg(i));const Lp=90;function Eg(u){return[...u].sort((i,l)=>i.offset-l.offset)}const Qf=class extends zr{constructor(u){u&&"css"in u&&(u=Tg(Zf({},og(u.css||"")),{alpha:u.alpha,maxColors:u.maxColors}));const i=Zf(Zf({},Qf.defaults),u);if(!i.stops||i.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");super(eg,tg),this._stops=[],this.autoFit=!1,Object.assign(this,i)}get stops(){return this._stops}set stops(u){const i=Eg(u),l=new Float32Array(i.length*3),c=0,f=1,S=2;for(let N=0;N<i.length;N++){const U=Np(i[N].color),W=N*3;l[W+c]=U[c],l[W+f]=U[f],l[W+S]=U[S]}this.uniforms.uColors=l,this.uniforms.uOffsets=i.map(N=>N.offset),this.uniforms.uAlphas=i.map(N=>N.alpha),this.uniforms.uNumStops=i.length,this._stops=i}set type(u){this.uniforms.uType=u}get type(){return this.uniforms.uType}set angle(u){this.uniforms.uAngle=u-Lp}get angle(){return this.uniforms.uAngle+Lp}set alpha(u){this.uniforms.uAlpha=u}get alpha(){return this.uniforms.uAlpha}set maxColors(u){this.uniforms.uMaxColors=u}get maxColors(){return this.uniforms.uMaxColors}};let nf=Qf;nf.LINEAR=0,nf.RADIAL=1,nf.CONIC=2,nf.defaults={type:Qf.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0};/*!
 * @pixi/filter-color-map - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-color-map is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Sg=null,bg=null;class Gv extends null{constructor(i,l=!1,c=1){super(Sg,bg),this.mix=1,this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._nearest=!1,this._scaleMode=null,this._colorMap=null,this._scaleMode=null,this.nearest=l,this.mix=c,this.colorMap=i}apply(i,l,c,f){this.uniforms._mix=this.mix,i.applyFilter(this,l,c,f)}get colorSize(){return this._size}get colorMap(){return this._colorMap}set colorMap(i){!i||(i instanceof s||(i=s.from(i)),i!=null&&i.baseTexture&&(i.baseTexture.scaleMode=this._scaleMode,i.baseTexture.mipmap=o.OFF,this._size=i.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=i),this._colorMap=i)}get nearest(){return this._nearest}set nearest(i){this._nearest=i,this._scaleMode=i?r.NEAREST:r.LINEAR;const l=this._colorMap;l&&l.baseTexture&&(l.baseTexture._glTextures={},l.baseTexture.scaleMode=this._scaleMode,l.baseTexture.mipmap=o.OFF,l._updateID++,l.baseTexture.emit("update",l.baseTexture))}updateColorMap(){const i=this._colorMap;i&&i.baseTexture&&(i._updateID++,i.baseTexture.emit("update",i.baseTexture),this.colorMap=i)}destroy(i=!1){this._colorMap&&this._colorMap.destroy(i),super.destroy()}}/*!
 * @pixi/filter-color-overlay - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-color-overlay is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ag=null,wg=null;class Vv extends null{constructor(i=0,l=1){super(Ag,wg),this._color=0,this._alpha=1,this.uniforms.color=new Float32Array(3),this.color=i,this.alpha=l}set color(i){const l=this.uniforms.color;typeof i=="number"?(t.hex2rgb(i,l),this._color=i):(l[0]=i[0],l[1]=i[1],l[2]=i[2],this._color=t.rgb2hex(l))}get color(){return this._color}set alpha(i){this.uniforms.alpha=i,this._alpha=i}get alpha(){return this._alpha}}/*!
 * @pixi/filter-color-replace - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Cg=null,Pg=null;class zv extends null{constructor(i=16711680,l=0,c=.4){super(Cg,Pg),this._originalColor=16711680,this._newColor=0,this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=i,this.newColor=l,this.epsilon=c}set originalColor(i){const l=this.uniforms.originalColor;typeof i=="number"?(e.hex2rgb(i,l),this._originalColor=i):(l[0]=i[0],l[1]=i[1],l[2]=i[2],this._originalColor=e.rgb2hex(l))}get originalColor(){return this._originalColor}set newColor(i){const l=this.uniforms.newColor;typeof i=="number"?(e.hex2rgb(i,l),this._newColor=i):(l[0]=i[0],l[1]=i[1],l[2]=i[2],this._newColor=e.rgb2hex(l))}get newColor(){return this._newColor}set epsilon(i){this.uniforms.epsilon=i}get epsilon(){return this.uniforms.epsilon}}/*!
 * @pixi/filter-convolution - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-convolution is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mg=null,Rg=null;class Hv extends null{constructor(i,l=200,c=200){super(Mg,Rg),this.uniforms.texelSize=new Float32Array(2),this.uniforms.matrix=new Float32Array(9),i!==void 0&&(this.matrix=i),this.width=l,this.height=c}get matrix(){return this.uniforms.matrix}set matrix(i){i.forEach((l,c)=>{this.uniforms.matrix[c]=l})}get width(){return 1/this.uniforms.texelSize[0]}set width(i){this.uniforms.texelSize[0]=1/i}get height(){return 1/this.uniforms.texelSize[1]}set height(i){this.uniforms.texelSize[1]=1/i}}/*!
 * @pixi/filter-cross-hatch - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-cross-hatch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ig=null,Og=null;class jv extends null{constructor(){super(Ig,Og)}}/*!
 * @pixi/filter-crt - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Fg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ng=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;const kp=class extends zr{constructor(u){super(Fg,Ng),this.time=0,this.seed=0,this.uniforms.dimensions=new Float32Array(2),Object.assign(this,kp.defaults,u)}apply(u,i,l,c){const{width:f,height:S}=i.filterFrame;this.uniforms.dimensions[0]=f,this.uniforms.dimensions[1]=S,this.uniforms.seed=this.seed,this.uniforms.time=this.time,u.applyFilter(this,i,l,c)}set curvature(u){this.uniforms.curvature=u}get curvature(){return this.uniforms.curvature}set lineWidth(u){this.uniforms.lineWidth=u}get lineWidth(){return this.uniforms.lineWidth}set lineContrast(u){this.uniforms.lineContrast=u}get lineContrast(){return this.uniforms.lineContrast}set verticalLine(u){this.uniforms.verticalLine=u}get verticalLine(){return this.uniforms.verticalLine}set noise(u){this.uniforms.noise=u}get noise(){return this.uniforms.noise}set noiseSize(u){this.uniforms.noiseSize=u}get noiseSize(){return this.uniforms.noiseSize}set vignetting(u){this.uniforms.vignetting=u}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(u){this.uniforms.vignettingAlpha=u}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(u){this.uniforms.vignettingBlur=u}get vignettingBlur(){return this.uniforms.vignettingBlur}};let Dg=kp;Dg.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};/*!
 * @pixi/filter-dot - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-dot is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Bg=null,Lg=null;class Xv extends null{constructor(i=1,l=5,c=!0){super(Bg,Lg),this.scale=i,this.angle=l,this.grayscale=c}get scale(){return this.uniforms.scale}set scale(i){this.uniforms.scale=i}get angle(){return this.uniforms.angle}set angle(i){this.uniforms.angle=i}get grayscale(){return this.uniforms.grayscale}set grayscale(i){this.uniforms.grayscale=i}}/*!
 * @pixi/filter-drop-shadow - v5.2.0
 * Compiled Tue, 28 Feb 2023 14:24:35 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var kg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ug=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`,Gg=Object.defineProperty,Up=Object.getOwnPropertySymbols,Vg=Object.prototype.hasOwnProperty,zg=Object.prototype.propertyIsEnumerable,Gp=(u,i,l)=>i in u?Gg(u,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[i]=l,Vp=(u,i)=>{for(var l in i||(i={}))Vg.call(i,l)&&Gp(u,l,i[l]);if(Up)for(var l of Up(i))zg.call(i,l)&&Gp(u,l,i[l]);return u};const Jf=class extends zr{constructor(u){super(),this.angle=45,this._distance=5,this._resolution=st.FILTER_RESOLUTION;const i=u?Vp(Vp({},Jf.defaults),u):Jf.defaults,{kernels:l,blur:c,quality:f,pixelSize:S,resolution:N}=i;this._offset=new ns(this._updatePadding,this),this._tintFilter=new zr(kg,Ug),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=this._offset,this._tintFilter.resolution=N,this._blurFilter=l?new _i(l):new _i(c,f),this.pixelSize=S,this.resolution=N;const{shadowOnly:U,rotation:W,distance:Q,offset:lt,alpha:ft,color:mt}=i;this.shadowOnly=U,W!==void 0&&Q!==void 0?(this.rotation=W,this.distance=Q):this.offset=lt,this.alpha=ft,this.color=mt}apply(u,i,l,c){const f=u.getFilterTexture();this._tintFilter.apply(u,i,f,1),this._blurFilter.apply(u,f,l,c),this.shadowOnly!==!0&&u.applyFilter(this,i,l,0),u.returnFilterTexture(f)}_updatePadding(){const u=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=u+this.blur*2}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}set offset(u){this._offset.copyFrom(u),this._updatePadding()}get offset(){return this._offset}get resolution(){return this._resolution}set resolution(u){this._resolution=u,this._tintFilter&&(this._tintFilter.resolution=u),this._blurFilter&&(this._blurFilter.resolution=u)}get distance(){return this._distance}set distance(u){ne("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=u,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/Ts}set rotation(u){ne("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=u*Ts,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(u){this._tintFilter.uniforms.alpha=u}get color(){return qr(this._tintFilter.uniforms.color)}set color(u){fi(u,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(u){this._blurFilter.kernels=u}get blur(){return this._blurFilter.blur}set blur(u){this._blurFilter.blur=u,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(u){this._blurFilter.quality=u}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(u){this._blurFilter.pixelSize=u}};let Hg=Jf;Hg.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:st.FILTER_RESOLUTION};/*!
 * @pixi/filter-emboss - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-emboss is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var jg=null,Xg=null;class Wv extends null{constructor(i=5){super(jg,Xg),this.strength=i}get strength(){return this.uniforms.strength}set strength(i){this.uniforms.strength=i}}/*!
 * @pixi/filter-glitch - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$g=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`;const qf=class extends zr{constructor(u){super(Wg,$g),this.offset=100,this.fillMode=qf.TRANSPARENT,this.average=!1,this.seed=0,this.minSize=8,this.sampleSize=512,this._slices=0,this._offsets=new Float32Array(1),this._sizes=new Float32Array(1),this._direction=-1,this.uniforms.dimensions=new Float32Array(2),this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=hr.from(this._canvas,{scaleMode:y.NEAREST}),Object.assign(this,qf.defaults,u)}apply(u,i,l,c){const{width:f,height:S}=i.filterFrame;this.uniforms.dimensions[0]=f,this.uniforms.dimensions[1]=S,this.uniforms.aspect=S/f,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,u.applyFilter(this,i,l,c)}_randomizeSizes(){const u=this._sizes,i=this._slices-1,l=this.sampleSize,c=Math.min(this.minSize/l,.9/this._slices);if(this.average){const f=this._slices;let S=1;for(let N=0;N<i;N++){const U=S/(f-N),W=Math.max(U*(1-Math.random()*.6),c);u[N]=W,S-=W}u[i]=S}else{let f=1;const S=Math.sqrt(1/this._slices);for(let N=0;N<i;N++){const U=Math.max(S*f*Math.random(),c);u[N]=U,f-=U}u[i]=f}this.shuffle()}shuffle(){const u=this._sizes,i=this._slices-1;for(let l=i;l>0;l--){const c=Math.random()*l>>0,f=u[l];u[l]=u[c],u[c]=f}}_randomizeOffsets(){for(let u=0;u<this._slices;u++)this._offsets[u]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const u=this.sampleSize,i=this.texture,l=this._canvas.getContext("2d");l.clearRect(0,0,8,u);let c,f=0;for(let S=0;S<this._slices;S++){c=Math.floor(this._offsets[S]*256);const N=this._sizes[S]*u,U=c>0?c:0,W=c<0?-c:0;l.fillStyle=`rgba(${U}, ${W}, 0, 1)`,l.fillRect(0,f>>0,u,N+1>>0),f+=N}i.baseTexture.update(),this.uniforms.displacementMap=i}set sizes(u){const i=Math.min(this._slices,u.length);for(let l=0;l<i;l++)this._sizes[l]=u[l]}get sizes(){return this._sizes}set offsets(u){const i=Math.min(this._slices,u.length);for(let l=0;l<i;l++)this._offsets[l]=u[l]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(u){this._slices!==u&&(this._slices=u,this.uniforms.slices=u,this._sizes=this.uniforms.slicesWidth=new Float32Array(u),this._offsets=this.uniforms.slicesOffset=new Float32Array(u),this.refresh())}get direction(){return this._direction}set direction(u){if(this._direction===u)return;this._direction=u;const i=u*Ts;this.uniforms.sinDir=Math.sin(i),this.uniforms.cosDir=Math.cos(i)}get red(){return this.uniforms.red}set red(u){this.uniforms.red=u}get green(){return this.uniforms.green}set green(u){this.uniforms.green=u}get blue(){return this.uniforms.blue}set blue(u){this.uniforms.blue=u}destroy(){var u;(u=this.texture)==null||u.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};let Du=qf;Du.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},Du.TRANSPARENT=0,Du.ORIGINAL=1,Du.LOOP=2,Du.CLAMP=3,Du.MIRROR=4;/*!
 * @pixi/filter-glow - v5.2.1
 * Compiled Fri, 24 Mar 2023 22:12:11 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Yg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Kg=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;
uniform float alpha;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    if (knockout) {
      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;const zp=class extends zr{constructor(u){const i=Object.assign({},zp.defaults,u),{outerStrength:l,innerStrength:c,color:f,knockout:S,quality:N,alpha:U}=i,W=Math.round(i.distance);super(Yg,Kg.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/N/W).toFixed(7)}`).replace(/__DIST__/gi,`${W.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:f,outerStrength:l,innerStrength:c,padding:W,knockout:S,alpha:U})}get color(){return qr(this.uniforms.glowColor)}set color(u){fi(u,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(u){this.uniforms.outerStrength=u}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(u){this.uniforms.innerStrength=u}get knockout(){return this.uniforms.knockout}set knockout(u){this.uniforms.knockout=u}get alpha(){return this.uniforms.alpha}set alpha(u){this.uniforms.alpha=u}};let Hp=zp;Hp.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};/*!
 * @pixi/filter-godray - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Qg=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,Jg=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`;const jp=class extends zr{constructor(u){super(Zg,Jg.replace("${perlin}",Qg)),this.parallel=!0,this.time=0,this._angle=0,this.uniforms.dimensions=new Float32Array(2);const i=Object.assign(jp.defaults,u);this._angleLight=new Mr,this.angle=i.angle,this.gain=i.gain,this.lacunarity=i.lacunarity,this.alpha=i.alpha,this.parallel=i.parallel,this.center=i.center,this.time=i.time}apply(u,i,l,c){const{width:f,height:S}=i.filterFrame;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=f,this.uniforms.dimensions[1]=S,this.uniforms.aspect=S/f,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,u.applyFilter(this,i,l,c)}get angle(){return this._angle}set angle(u){this._angle=u;const i=u*Ts;this._angleLight.x=Math.cos(i),this._angleLight.y=Math.sin(i)}get gain(){return this.uniforms.gain}set gain(u){this.uniforms.gain=u}get lacunarity(){return this.uniforms.lacunarity}set lacunarity(u){this.uniforms.lacunarity=u}get alpha(){return this.uniforms.alpha}set alpha(u){this.uniforms.alpha=u}};let qg=jp;qg.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};/*!
 * @pixi/filter-grayscale - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-grayscale is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var t0=null,e0=null;class $v extends null{constructor(){super(t0,e0)}}/*!
 * @pixi/filter-hsl-adjustment - v5.2.0
 * Compiled Tue, 28 Feb 2023 14:24:35 UTC
 *
 * @pixi/filter-hsl-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var r0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,i0=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float uHue;
uniform float uAlpha;
uniform bool uColorize;
uniform float uSaturation;
uniform float uLightness;

// https://en.wikipedia.org/wiki/Luma_(video)
const vec3 weight = vec3(0.299, 0.587, 0.114);

float getWeightedAverage(vec3 rgb) {
    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;
}

// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243
const vec3 k = vec3(0.57735, 0.57735, 0.57735);

vec3 hueShift(vec3 color, float angle) {
    float cosAngle = cos(angle);
    return vec3(
    color * cosAngle +
    cross(k, color) * sin(angle) +
    k * dot(k, color) * (1.0 - cosAngle)
    );
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    vec4 result = color;

    // colorize
    if (uColorize) {
        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);
    }

    // hue
    result.rgb = hueShift(result.rgb, uHue);

    // saturation
    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js
    float average = (result.r + result.g + result.b) / 3.0;

    if (uSaturation > 0.) {
        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));
    } else {
        result.rgb -= (average - result.rgb) * uSaturation;
    }

    // lightness
    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));

    // alpha
    gl_FragColor = mix(color, result, uAlpha);
}
`;const Xp=class extends zr{constructor(u){super(r0,i0),this._hue=0;const i=Object.assign({},Xp.defaults,u);Object.assign(this,i)}get hue(){return this._hue}set hue(u){this._hue=u,this.uniforms.uHue=this._hue*(Math.PI/180)}get alpha(){return this.uniforms.uAlpha}set alpha(u){this.uniforms.uAlpha=u}get colorize(){return this.uniforms.uColorize}set colorize(u){this.uniforms.uColorize=u}get lightness(){return this.uniforms.uLightness}set lightness(u){this.uniforms.uLightness=u}get saturation(){return this.uniforms.uSaturation}set saturation(u){this.uniforms.uSaturation=u}};let s0=Xp;s0.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1};/*!
 * @pixi/filter-motion-blur - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-motion-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var n0=null,o0=null;class Yv extends null{constructor(i=[0,0],l=5,c=0){super(n0,o0),this.kernelSize=5,this.uniforms.uVelocity=new Float32Array(2),this._velocity=new s(this.velocityChanged,this),this.setVelocity(i),this.kernelSize=l,this.offset=c}apply(i,l,c,f){const{x:S,y:N}=this.velocity;this.uniforms.uKernelSize=S!==0||N!==0?this.kernelSize:0,i.applyFilter(this,l,c,f)}set velocity(i){this.setVelocity(i)}get velocity(){return this._velocity}setVelocity(i){if(Array.isArray(i)){const[l,c]=i;this._velocity.set(l,c)}else this._velocity.copyFrom(i)}velocityChanged(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1}set offset(i){this.uniforms.uOffset=i}get offset(){return this.uniforms.uOffset}}/*!
 * @pixi/filter-multi-color-replace - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-multi-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var a0=null,l0=null;class Kv extends null{constructor(i,l=.05,c=i.length){super(a0,l0.replace(/%maxColors%/g,c.toFixed(0))),this._replacements=[],this._maxColors=0,this.epsilon=l,this._maxColors=c,this.uniforms.originalColors=new Float32Array(c*3),this.uniforms.targetColors=new Float32Array(c*3),this.replacements=i}set replacements(i){const l=this.uniforms.originalColors,c=this.uniforms.targetColors,f=i.length;if(f>this._maxColors)throw new Error(`Length of replacements (${f}) exceeds the maximum colors length (${this._maxColors})`);l[f*3]=-1;for(let S=0;S<f;S++){const N=i[S];let U=N[0];typeof U=="number"?U=a.hex2rgb(U):N[0]=a.rgb2hex(U),l[S*3]=U[0],l[S*3+1]=U[1],l[S*3+2]=U[2];let W=N[1];typeof W=="number"?W=a.hex2rgb(W):N[1]=a.rgb2hex(W),c[S*3]=W[0],c[S*3+1]=W[1],c[S*3+2]=W[2]}this._replacements=i}get replacements(){return this._replacements}refresh(){this.replacements=this._replacements}get maxColors(){return this._maxColors}set epsilon(i){this.uniforms.epsilon=i}get epsilon(){return this.uniforms.epsilon}}/*!
 * @pixi/filter-old-film - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var u0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,h0=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`;const Wp=class extends zr{constructor(u,i=0){super(u0,h0),this.seed=0,this.uniforms.dimensions=new Float32Array(2),typeof u=="number"?(this.seed=u,u=void 0):this.seed=i,Object.assign(this,Wp.defaults,u)}apply(u,i,l,c){var f,S;this.uniforms.dimensions[0]=(f=i.filterFrame)==null?void 0:f.width,this.uniforms.dimensions[1]=(S=i.filterFrame)==null?void 0:S.height,this.uniforms.seed=this.seed,u.applyFilter(this,i,l,c)}set sepia(u){this.uniforms.sepia=u}get sepia(){return this.uniforms.sepia}set noise(u){this.uniforms.noise=u}get noise(){return this.uniforms.noise}set noiseSize(u){this.uniforms.noiseSize=u}get noiseSize(){return this.uniforms.noiseSize}set scratch(u){this.uniforms.scratch=u}get scratch(){return this.uniforms.scratch}set scratchDensity(u){this.uniforms.scratchDensity=u}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(u){this.uniforms.scratchWidth=u}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(u){this.uniforms.vignetting=u}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(u){this.uniforms.vignettingAlpha=u}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(u){this.uniforms.vignettingBlur=u}get vignettingBlur(){return this.uniforms.vignettingBlur}};let c0=Wp;c0.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};/*!
 * @pixi/filter-outline - v5.2.0
 * Compiled Tue, 28 Feb 2023 14:24:35 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var d0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,f0=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterClamp;

uniform float uAlpha;
uniform vec2 uThickness;
uniform vec4 uColor;
uniform bool uKnockout;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${angleStep};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture2D(uSampler, vTextureCoord);
    vec4 contentColor = sourceColor * float(!uKnockout);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    gl_FragColor = contentColor + outlineColor;
}
`;const of=class extends zr{constructor(u=1,i=0,l=.1,c=1,f=!1){super(d0,f0.replace(/\$\{angleStep\}/,of.getAngleStep(l))),this._thickness=1,this._alpha=1,this._knockout=!1,this.uniforms.uThickness=new Float32Array([0,0]),this.uniforms.uColor=new Float32Array([0,0,0,1]),this.uniforms.uAlpha=c,this.uniforms.uKnockout=f,Object.assign(this,{thickness:u,color:i,quality:l,alpha:c,knockout:f})}static getAngleStep(u){const i=Math.max(u*of.MAX_SAMPLES,of.MIN_SAMPLES);return(Math.PI*2/i).toFixed(7)}apply(u,i,l,c){this.uniforms.uThickness[0]=this._thickness/i._frame.width,this.uniforms.uThickness[1]=this._thickness/i._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,u.applyFilter(this,i,l,c)}get alpha(){return this._alpha}set alpha(u){this._alpha=u}get color(){return qr(this.uniforms.uColor)}set color(u){fi(u,this.uniforms.uColor)}get knockout(){return this._knockout}set knockout(u){this._knockout=u}get thickness(){return this._thickness}set thickness(u){this._thickness=u,this.padding=u}};let $p=of;$p.MIN_SAMPLES=1,$p.MAX_SAMPLES=100;/*!
 * @pixi/filter-pixelate - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var p0=null,m0=null;class Zv extends null{constructor(i=10){super(p0,m0),this.size=i}get size(){return this.uniforms.size}set size(i){typeof i=="number"&&(i=[i,i]),this.uniforms.size=i}}/*!
 * @pixi/filter-radial-blur - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-radial-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var g0=null,y0=null;class Qv extends null{constructor(i=0,l=[0,0],c=5,f=-1){super(g0,y0),this._angle=0,this.angle=i,this.center=l,this.kernelSize=c,this.radius=f}apply(i,l,c,f){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,i.applyFilter(this,l,c,f)}set angle(i){this._angle=i,this.uniforms.uRadian=i*Math.PI/180}get angle(){return this._angle}get center(){return this.uniforms.uCenter}set center(i){this.uniforms.uCenter=i}get radius(){return this.uniforms.uRadius}set radius(i){(i<0||i===1/0)&&(i=-1),this.uniforms.uRadius=i}}/*!
 * @pixi/filter-reflection - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var v0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,_0=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`;const Yp=class extends zr{constructor(u){super(v0,_0),this.time=0,this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,Yp.defaults,u)}apply(u,i,l,c){var f,S;this.uniforms.dimensions[0]=(f=i.filterFrame)==null?void 0:f.width,this.uniforms.dimensions[1]=(S=i.filterFrame)==null?void 0:S.height,this.uniforms.time=this.time,u.applyFilter(this,i,l,c)}set mirror(u){this.uniforms.mirror=u}get mirror(){return this.uniforms.mirror}set boundary(u){this.uniforms.boundary=u}get boundary(){return this.uniforms.boundary}set amplitude(u){this.uniforms.amplitude[0]=u[0],this.uniforms.amplitude[1]=u[1]}get amplitude(){return this.uniforms.amplitude}set waveLength(u){this.uniforms.waveLength[0]=u[0],this.uniforms.waveLength[1]=u[1]}get waveLength(){return this.uniforms.waveLength}set alpha(u){this.uniforms.alpha[0]=u[0],this.uniforms.alpha[1]=u[1]}get alpha(){return this.uniforms.alpha}};let x0=Yp;x0.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};/*!
 * @pixi/filter-rgb-split - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-rgb-split is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var T0=null,E0=null;class Jv extends null{constructor(i=[-10,0],l=[0,10],c=[0,0]){super(T0,E0),this.red=i,this.green=l,this.blue=c}get red(){return this.uniforms.red}set red(i){this.uniforms.red=i}get green(){return this.uniforms.green}set green(i){this.uniforms.green=i}get blue(){return this.uniforms.blue}set blue(i){this.uniforms.blue=i}}/*!
 * @pixi/filter-shockwave - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var S0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,b0=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`;const Kp=class extends zr{constructor(u=[0,0],i,l=0){super(S0,b0),this.center=u,Object.assign(this,Kp.defaults,i),this.time=l}apply(u,i,l,c){this.uniforms.time=this.time,u.applyFilter(this,i,l,c)}get center(){return this.uniforms.center}set center(u){this.uniforms.center=u}get amplitude(){return this.uniforms.amplitude}set amplitude(u){this.uniforms.amplitude=u}get wavelength(){return this.uniforms.wavelength}set wavelength(u){this.uniforms.wavelength=u}get brightness(){return this.uniforms.brightness}set brightness(u){this.uniforms.brightness=u}get speed(){return this.uniforms.speed}set speed(u){this.uniforms.speed=u}get radius(){return this.uniforms.radius}set radius(u){this.uniforms.radius=u}};let A0=Kp;A0.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};/*!
 * @pixi/filter-simple-lightmap - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-simple-lightmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var w0=null,C0=null;class qv extends null{constructor(i,l=0,c=1){super(w0,C0),this._color=0,this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,c]),this.texture=i,this.color=l}apply(i,l,c,f){var S,N;this.uniforms.dimensions[0]=(S=l.filterFrame)==null?void 0:S.width,this.uniforms.dimensions[1]=(N=l.filterFrame)==null?void 0:N.height,i.applyFilter(this,l,c,f)}get texture(){return this.uniforms.uLightmap}set texture(i){this.uniforms.uLightmap=i}set color(i){const l=this.uniforms.ambientColor;typeof i=="number"?(n.hex2rgb(i,l),this._color=i):(l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],this._color=n.rgb2hex(l))}get color(){return this._color}get alpha(){return this.uniforms.ambientColor[3]}set alpha(i){this.uniforms.ambientColor[3]=i}}/*!
 * @pixi/filter-tilt-shift - v5.2.0
 * Compiled Tue, 28 Feb 2023 14:24:35 UTC
 *
 * @pixi/filter-tilt-shift is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var P0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,M0=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;class Zp extends zr{constructor(i){var l,c;super(P0,M0),this.uniforms.blur=i.blur,this.uniforms.gradientBlur=i.gradientBlur,this.uniforms.start=(l=i.start)!=null?l:new Mr(0,window.innerHeight/2),this.uniforms.end=(c=i.end)!=null?c:new Mr(600,window.innerHeight/2),this.uniforms.delta=new Mr(30,30),this.uniforms.texSize=new Mr(window.innerWidth,window.innerHeight),this.updateDelta()}updateDelta(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}get blur(){return this.uniforms.blur}set blur(i){this.uniforms.blur=i}get gradientBlur(){return this.uniforms.gradientBlur}set gradientBlur(i){this.uniforms.gradientBlur=i}get start(){return this.uniforms.start}set start(i){this.uniforms.start=i,this.updateDelta()}get end(){return this.uniforms.end}set end(i){this.uniforms.end=i,this.updateDelta()}}class R0 extends Zp{updateDelta(){const i=this.uniforms.end.x-this.uniforms.start.x,l=this.uniforms.end.y-this.uniforms.start.y,c=Math.sqrt(i*i+l*l);this.uniforms.delta.x=i/c,this.uniforms.delta.y=l/c}}class I0 extends Zp{updateDelta(){const i=this.uniforms.end.x-this.uniforms.start.x,l=this.uniforms.end.y-this.uniforms.start.y,c=Math.sqrt(i*i+l*l);this.uniforms.delta.x=-l/c,this.uniforms.delta.y=i/c}}const Qp=class extends zr{constructor(u,i,l,c){super(),typeof u=="number"&&(ne("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),u={blur:u,gradientBlur:i,start:l,end:c}),u=Object.assign({},Qp.defaults,u),this.tiltShiftXFilter=new R0(u),this.tiltShiftYFilter=new I0(u)}apply(u,i,l,c){const f=u.getFilterTexture();this.tiltShiftXFilter.apply(u,i,f,1),this.tiltShiftYFilter.apply(u,f,l,c),u.returnFilterTexture(f)}get blur(){return this.tiltShiftXFilter.blur}set blur(u){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=u}get gradientBlur(){return this.tiltShiftXFilter.gradientBlur}set gradientBlur(u){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=u}get start(){return this.tiltShiftXFilter.start}set start(u){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=u}get end(){return this.tiltShiftXFilter.end}set end(u){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=u}};let O0=Qp;O0.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0};/*!
 * @pixi/filter-twist - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var F0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,N0=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;const Jp=class extends zr{constructor(u){super(F0,N0),Object.assign(this,Jp.defaults,u)}get offset(){return this.uniforms.offset}set offset(u){this.uniforms.offset=u}get radius(){return this.uniforms.radius}set radius(u){this.uniforms.radius=u}get angle(){return this.uniforms.angle}set angle(u){this.uniforms.angle=u}};let D0=Jp;D0.defaults={radius:200,angle:4,padding:20,offset:new Mr};/*!
 * @pixi/filter-zoom-blur - v5.1.1
 * Compiled Wed, 11 Jan 2023 23:10:33 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var B0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,L0=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,qp=Object.getOwnPropertySymbols,k0=Object.prototype.hasOwnProperty,U0=Object.prototype.propertyIsEnumerable,G0=(u,i)=>{var l={};for(var c in u)k0.call(u,c)&&i.indexOf(c)<0&&(l[c]=u[c]);if(u!=null&&qp)for(var c of qp(u))i.indexOf(c)<0&&U0.call(u,c)&&(l[c]=u[c]);return l};const tm=class extends zr{constructor(u){const i=Object.assign(tm.defaults,u),{maxKernelSize:l}=i,c=G0(i,["maxKernelSize"]);super(B0,L0.replace("${maxKernelSize}",l.toFixed(1))),Object.assign(this,c)}get center(){return this.uniforms.uCenter}set center(u){this.uniforms.uCenter=u}get strength(){return this.uniforms.uStrength}set strength(u){this.uniforms.uStrength=u}get innerRadius(){return this.uniforms.uInnerRadius}set innerRadius(u){this.uniforms.uInnerRadius=u}get radius(){return this.uniforms.uRadius}set radius(u){(u<0||u===1/0)&&(u=-1),this.uniforms.uRadius=u}};let V0=tm;V0.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32};/*!
 * pixi-filters - v5.2.1
 * Compiled Fri, 24 Mar 2023 22:12:11 UTC
 *
 * pixi-filters is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */const{app:Pl}=Vt.PIXI,Ur={sprite:function(){const u=new jn;return u.lineStyle(2,16777215),u.drawCircle(0,0,50),u.x=Pl.screen.width/2,u.y=Pl.screen.height/2,u.filters=[new Hp({quality:.2})],Vt.addSprite(u,"Circle")}(),acceleration:.2,velocity:{x:0,y:0},restoringForce:.005,friction:.95,smoothDamp:.15,position:{x:0,y:0,_x:0,_y:0},state:["idle"]};Vt.keyManager.addKeys([{name:"Move Up",key:"w",fn:()=>Ur.velocity.y-=Ur.acceleration},{name:"Move Left",key:"a",fn:()=>Ur.velocity.x-=Ur.acceleration},{name:"Move Down",key:"s",fn:()=>Ur.velocity.y+=Ur.acceleration},{name:"Move Right",key:"d",fn:()=>Ur.velocity.x+=Ur.acceleration}]);function em(u){Vt.PIXI.camera.x=Qt.E.smoothDamp(Vt.PIXI.camera.x,Ur.position.x,Ur.smoothDamp,u).toNumber(),Vt.PIXI.camera.y=Qt.E.smoothDamp(Vt.PIXI.camera.y,Ur.position.y,Ur.smoothDamp,u).toNumber()}Pl.ticker.add(u=>{switch(Ur.position.x+=Ur.velocity.x,Ur.position.y+=Ur.velocity.y,Ur.sprite.x+=Ur.velocity.x,Ur.sprite.y+=Ur.velocity.y,Ur.velocity.x*=Ur.friction,Ur.velocity.y*=Ur.friction,Ur.state[0]){case"lockedToMass":{const i=Ur.state[1];Ur.position.x=Ur.sprite.x=Qt.E.smoothDamp(Ur.sprite.x,i.x,Ur.smoothDamp,u).toNumber(),Ur.position.y=Ur.sprite.y=Qt.E.smoothDamp(Ur.sprite.y,i.y,Ur.smoothDamp,u).toNumber(),Vt.PIXI.camera.x=Ur.sprite.x-Pl.screen.width/2,Vt.PIXI.camera.y=Ur.sprite.y-Pl.screen.height/2}break;case"lockedToMassExit":Ur.position.x-=Pl.screen.width/2,Ur.position.y-=Pl.screen.height/2,em(u),Ur.state=["idle"];break;case"idle":default:em(u);break}});const wa=[],{Graphics:z0}=at,{app:af}=Vt.PIXI;function H0(u,i){const l=new z0;return l.beginFill(16777215),l.drawCircle(0,0,45),l.endFill(),l.x=u,l.y=i,Vt.addSprite(l,"Circle")}function j0(){const l=af.screen.width/2-300,c=af.screen.width/2+600/2,f=af.screen.height/2-400/2,S=af.screen.height/2+400/2,N=Math.random()*(c-l)+l,U=Math.random()*(S-f)+f,W=H0(N,U);return wa.push(W),W}const Bu=Vt.addCurrency("quarks"),rm=Vt.addAttribute("regenRate",!0,2),X0=Vt.addAttribute("absorbRate",!0,2),im=Vt.addAttribute("maxParticles",!0,10);Bu.static.addUpgrade([{name:"Value",costScaling:u=>Qt.E.pow(1.2,Qt.E.scale((0,Qt.E)(u),1e6,2,0)).mul(10).ceil(),maxLevel:(0,Qt.E)(1e3),effect:function(u){Bu.static.boost.setBoost("valueUpg1Quarks","Quarks Value - Quarks","Quarks Value - Quarks",i=>(0,Qt.E)(i).mul(Qt.E.floor(Qt.E.mul(.5,u).mul(Qt.E.ln(u)).add(u))),2)}},{name:"Capacity",costScaling:u=>Qt.E.pow(1.3,Qt.E.scale((0,Qt.E)(u),1e6,2,0)).mul(10).ceil(),maxLevel:(0,Qt.E)(100),effect:function(u){im.static.boost.setBoost("valueUpg2Quarks","Quarks Capacity - Quarks","Quarks Capacity - Quarks",i=>(0,Qt.E)(i).add(10).add(u),1)}},{name:"Regeneration",costScaling:u=>Qt.E.pow(1.5,Qt.E.scale((0,Qt.E)(u),1e6,2,0)).mul(10).ceil(),maxLevel:(0,Qt.E)(30),effect:function(u){rm.static.boost.setBoost("valueUpg3Quarks","Quarks Regeneration - Quarks","Quarks Regeneration - Quarks",i=>(0,Qt.E)(i).add(2).add(u.mul(.5)),1)}},{name:"Speed",costScaling:u=>Qt.E.pow(3,Qt.E.scale((0,Qt.E)(u),1e6,2,0)).mul(100).ceil(),maxLevel:(0,Qt.E)(5),effect:function(u){}}]),Vt.eventManager.addEvent("Mass Spawn","interval",(0,Qt.E)(1e3).div(rm.value),()=>{im.value.gt(wa.length)&&j0()}),Vt.keyManager.addKey("Collect Quarks"," ",function(){if(Ur.state[0]==="idle")for(let u=0;u<wa.length;u++){const i=wa[u];if(Ur.sprite.collides(i)){Ur.state=["lockedToMass",i],Vt.eventManager.addEvent("massCollect","timeout",(0,Qt.E)(1e3).div(X0.value.toString()),function(){Ur.state=["lockedToMassExit"],console.log("gainMass");const l=wa.indexOf(i);wa[l].remove(wa),wa.splice(l,1),Bu.static.gain(),console.log(Bu.static.value.format())});break}}});const{app:sm}=Vt.PIXI,W0=Vt.addCurrency("tActive"),$0=Vt.addCurrency("tPassive"),Y0=Vt.addCurrency("active"),K0=Vt.addCurrency("passive"),Z0=Vt.addCurrency("chronos");sm.ticker.add(function(u){u*=1e3/sm.ticker.FPS*1e3,W0.static.gain(u),$0.static.gain(u),Y0.static.gain(u),K0.static.gain(u)});function t1(u){}const nm=Vt.addAttribute("lastReward",!1);function e1(u=!1){return u||nm.value.sub(Date.now()).mul(-1).gte(432e5)?(nm.value=E(Date.now()),Z0.static.gain(),!0):!1}const tp=Vt.addCurrency("genesis");tp.static.addUpgrade([{name:"Quarks Value",costScaling:u=>Qt.E.pow(1.2,Qt.E.scale((0,Qt.E)(u),1e6,2,0)).mul(10).ceil(),maxLevel:(0,Qt.E)(1e3),effect:function(u){Bu.static.boost.setBoost("valueUpg1Genesis","Quarks Value - Genesis","Quarks Value - Genesis",i=>(0,Qt.E)(i).mul(Qt.E.floor(Qt.E.mul(.5,u).mul(Qt.E.ln(u)).add(u))),2)}}]);const Q0=Vt.addReset(Bu);function r1(){tp.static.boost.setBoost({id:"genesisBase",name:"Base",description:"Base boost",value:u=>E(u).add(1),order:1}),tp.static.gain(),Q0.reset()}var J0=Or(745);const q0=(0,J0.s)(document.getElementById("ui"));var Me=Or(7294),ty=Or(3967),In=Or.n(ty),ai=Or(5893);const ey=["as","disabled"];function ry(u,i){if(u==null)return{};var l={},c=Object.keys(u),f,S;for(S=0;S<c.length;S++)f=c[S],!(i.indexOf(f)>=0)&&(l[f]=u[f]);return l}function iy(u){return!u||u.trim()==="#"}function om({tagName:u,disabled:i,href:l,target:c,rel:f,role:S,onClick:N,tabIndex:U=0,type:W}){u||(l!=null||c!=null||f!=null?u="a":u="button");const Q={tagName:u};if(u==="button")return[{type:W||"button",disabled:i},Q];const lt=mt=>{if((i||u==="a"&&iy(l))&&mt.preventDefault(),i){mt.stopPropagation();return}N==null||N(mt)},ft=mt=>{mt.key===" "&&(mt.preventDefault(),lt(mt))};return u==="a"&&(l||(l="#"),i&&(l=void 0)),[{role:S!=null?S:"button",disabled:void 0,tabIndex:i?void 0:U,href:l,target:u==="a"?c:void 0,"aria-disabled":i||void 0,rel:u==="a"?f:void 0,onClick:lt,onKeyDown:ft},Q]}const sy=Me.forwardRef((u,i)=>{let{as:l,disabled:c}=u,f=ry(u,ey);const[S,{tagName:N}]=om(Object.assign({tagName:l,disabled:c},f));return(0,ai.jsx)(N,Object.assign({},f,S,{ref:i}))});sy.displayName="Button";var i1=null;const am=["xxl","xl","lg","md","sm","xs"],lm="xs",Ec=Me.createContext({prefixes:{},breakpoints:am,minBreakpoint:lm}),{Consumer:s1,Provider:ny}=Ec;function n1({prefixes:u={},breakpoints:i=am,minBreakpoint:l=lm,dir:c,children:f}){const S=useMemo(()=>({prefixes:He({},u),breakpoints:i,minBreakpoint:l,dir:c}),[u,i,l,c]);return _jsx(ny,{value:S,children:f})}function Ca(u,i){const{prefixes:l}=(0,Me.useContext)(Ec);return u||l[i]||i}function o1(){const{breakpoints:u}=useContext(Ec);return u}function a1(){const{minBreakpoint:u}=useContext(Ec);return u}function oy(){const{dir:u}=(0,Me.useContext)(Ec);return u==="rtl"}function l1(u,i){typeof i=="string"&&(i={prefix:i});const l=u.prototype&&u.prototype.isReactComponent,{prefix:c,forwardRefAs:f=l?"ref":"innerRef"}=i,S=React.forwardRef((W,U)=>{var N=ps(W,[]);N[f]=U;const Q=Ca(N.bsPrefix,c);return _jsx(u,gi(He({},N),{bsPrefix:Q}))});return S.displayName=`Bootstrap(${u.displayName||u.name})`,S}var u1=null;const um=Me.forwardRef((Q,W)=>{var lt=Q,{as:u,bsPrefix:i,variant:l="primary",size:c,active:f=!1,disabled:S=!1,className:N}=lt,U=ps(lt,["as","bsPrefix","variant","size","active","disabled","className"]);const ft=Ca(i,"btn"),[mt,{tagName:_t}]=om(He({tagName:u,disabled:S},U)),Pt=_t;return(0,ai.jsx)(Pt,gi(He(He({},mt),U),{ref:W,disabled:S,className:In()(N,ft,f&&"active",l&&`${ft}-${l}`,c&&`${ft}-${c}`,U.href&&S&&"disabled")}))});um.displayName="Button";var ay=um,Lu=!!(typeof window!="undefined"&&window.document&&window.document.createElement),ep=!1,rp=!1;try{var ip={get passive(){return ep=!0},get once(){return rp=ep=!0}};Lu&&(window.addEventListener("test",ip,ip),window.removeEventListener("test",ip,!0))}catch(u){}function ly(u,i,l,c){if(c&&typeof c!="boolean"&&!rp){var f=c.once,S=c.capture,N=l;!rp&&f&&(N=l.__once||function U(W){this.removeEventListener(i,U,S),l.call(this,W)},l.__once=N),u.addEventListener(i,N,ep?c:S)}u.addEventListener(i,l,c)}var hm=ly;function lf(u){return u&&u.ownerDocument||document}function uy(u,i,l,c){var f=c&&typeof c!="boolean"?c.capture:c;u.removeEventListener(i,l,f),l.__once&&u.removeEventListener(i,l.__once,f)}var sp=uy,uf;function cm(u){if((!uf&&uf!==0||u)&&Lu){var i=document.createElement("div");i.style.position="absolute",i.style.top="-9999px",i.style.width="50px",i.style.height="50px",i.style.overflow="scroll",document.body.appendChild(i),uf=i.offsetWidth-i.clientWidth,document.body.removeChild(i)}return uf}function hy(){return(0,Me.useState)(null)}function cy(u){const i=(0,Me.useRef)(u);return(0,Me.useEffect)(()=>{i.current=u},[u]),i}var dy=cy;function po(u){const i=dy(u);return(0,Me.useCallback)(function(...l){return i.current&&i.current(...l)},[i])}const dm=u=>!u||typeof u=="function"?u:i=>{u.current=i};function fy(u,i){const l=dm(u),c=dm(i);return f=>{l&&l(f),c&&c(f)}}function py(u,i){return(0,Me.useMemo)(()=>fy(u,i),[u,i])}var hf=py;function my(u){const i=(0,Me.useRef)(u);return i.current=u,i}function fm(u){const i=my(u);(0,Me.useEffect)(()=>()=>i.current(),[])}function gy(u){var i=lf(u);return i&&i.defaultView||window}function yy(u,i){return gy(u).getComputedStyle(u,i)}var vy=/([A-Z])/g;function _y(u){return u.replace(vy,"-$1").toLowerCase()}var xy=/^ms-/;function cf(u){return _y(u).replace(xy,"-ms-")}var Ty=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Ey(u){return!!(u&&Ty.test(u))}function Sy(u,i){var l="",c="";if(typeof i=="string")return u.style.getPropertyValue(cf(i))||yy(u).getPropertyValue(cf(i));Object.keys(i).forEach(function(f){var S=i[f];!S&&S!==0?u.style.removeProperty(cf(f)):Ey(f)?c+=f+"("+S+") ":l+=cf(f)+": "+S+";"}),c&&(l+="transform: "+c+";"),u.style.cssText+=";"+l}var Ml=Sy;function by(u,i,l,c){return hm(u,i,l,c),function(){sp(u,i,l,c)}}var df=by;function Ay(u,i,l,c){if(l===void 0&&(l=!1),c===void 0&&(c=!0),u){var f=document.createEvent("HTMLEvents");f.initEvent(i,l,c),u.dispatchEvent(f)}}function wy(u){var i=Ml(u,"transitionDuration")||"",l=i.indexOf("ms")===-1?1e3:1;return parseFloat(i)*l}function Cy(u,i,l){l===void 0&&(l=5);var c=!1,f=setTimeout(function(){c||Ay(u,"transitionend",!0)},i+l),S=df(u,"transitionend",function(){c=!0},{once:!0});return function(){clearTimeout(f),S()}}function pm(u,i,l,c){l==null&&(l=wy(u)||0);var f=Cy(u,l,c),S=df(u,"transitionend",i);return function(){f(),S()}}function np(u){u===void 0&&(u=lf());try{var i=u.activeElement;return!i||!i.nodeName?null:i}catch(l){return u.body}}function mm(u,i){if(u.contains)return u.contains(i);if(u.compareDocumentPosition)return u===i||!!(u.compareDocumentPosition(i)&16)}var ku=Or(3935);function Py(){const u=(0,Me.useRef)(!0),i=(0,Me.useRef)(()=>u.current);return(0,Me.useEffect)(()=>(u.current=!0,()=>{u.current=!1}),[]),i.current}function My(u){const i=(0,Me.useRef)(null);return(0,Me.useEffect)(()=>{i.current=u}),i.current}const Ry="data-rr-ui-",Iy=null;function Oy(u){return`${Ry}${u}`}function h1(u){return`${Iy}${u}`}function Fy(u=document){const i=u.defaultView;return Math.abs(i.innerWidth-u.documentElement.clientWidth)}const gm=Oy("modal-open");class Ny{constructor({ownerDocument:i,handleContainerOverflow:l=!0,isRTL:c=!1}={}){this.handleContainerOverflow=l,this.isRTL=c,this.modals=[],this.ownerDocument=i}getScrollbarWidth(){return Fy(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(i){}removeModalAttributes(i){}setContainerStyle(i){const l={overflow:"hidden"},c=this.isRTL?"paddingLeft":"paddingRight",f=this.getElement();i.style={overflow:f.style.overflow,[c]:f.style[c]},i.scrollBarWidth&&(l[c]=`${parseInt(Ml(f,c)||"0",10)+i.scrollBarWidth}px`),f.setAttribute(gm,""),Ml(f,l)}reset(){[...this.modals].forEach(i=>this.remove(i))}removeContainerStyle(i){const l=this.getElement();l.removeAttribute(gm),Object.assign(l.style,i.style)}add(i){let l=this.modals.indexOf(i);return l!==-1||(l=this.modals.length,this.modals.push(i),this.setModalAttributes(i),l!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),l}remove(i){const l=this.modals.indexOf(i);l!==-1&&(this.modals.splice(l,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(i))}isTopModal(i){return!!this.modals.length&&this.modals[this.modals.length-1]===i}}var op=Ny;const ym=(0,Me.createContext)(Lu?window:void 0),c1=ym.Provider;function ap(){return(0,Me.useContext)(ym)}const lp=(u,i)=>Lu?u==null?(i||lf()).body:(typeof u=="function"&&(u=u()),u&&"current"in u&&(u=u.current),u&&("nodeType"in u||u.getBoundingClientRect)?u:null):null;function Dy(u,i){const l=ap(),[c,f]=(0,Me.useState)(()=>lp(u,l==null?void 0:l.document));if(!c){const S=lp(u);S&&f(S)}return(0,Me.useEffect)(()=>{i&&c&&i(c)},[i,c]),(0,Me.useEffect)(()=>{const S=lp(u);S!==c&&f(S)},[u,c]),c}const By=typeof Or.g!="undefined"&&Or.g.navigator&&Or.g.navigator.product==="ReactNative";var vm=typeof document!="undefined"||By?Me.useLayoutEffect:Me.useEffect;function Ly({children:u,in:i,onExited:l,mountOnEnter:c,unmountOnExit:f}){const S=(0,Me.useRef)(null),N=(0,Me.useRef)(i),U=po(l);(0,Me.useEffect)(()=>{i?N.current=!0:U(S.current)},[i,U]);const W=hf(S,u.ref),Q=(0,Me.cloneElement)(u,{ref:W});return i?Q:f||!N.current&&c?null:Q}var ky=Ly;function Uy({in:u,onTransition:i}){const l=(0,Me.useRef)(null),c=(0,Me.useRef)(!0),f=po(i);return vm(()=>{if(!l.current)return;let S=!1;return f({in:u,element:l.current,initial:c.current,isStale:()=>S}),()=>{S=!0}},[u,f]),vm(()=>(c.current=!1,()=>{c.current=!0}),[]),l}function Gy({children:u,in:i,onExited:l,onEntered:c,transition:f}){const[S,N]=(0,Me.useState)(!i);i&&S&&N(!1);const U=Uy({in:!!i,onTransition:Q=>{const lt=()=>{Q.isStale()||(Q.in?c==null||c(Q.element,Q.initial):(N(!0),l==null||l(Q.element)))};Promise.resolve(f(Q)).then(lt,ft=>{throw Q.in||N(!0),ft})}}),W=hf(U,u.ref);return S&&!i?null:(0,Me.cloneElement)(u,{ref:W})}function _m(u,i,l){return u?(0,ai.jsx)(u,Object.assign({},l)):i?(0,ai.jsx)(Gy,Object.assign({},l,{transition:i})):(0,ai.jsx)(ky,Object.assign({},l))}function Vy(u){return u.code==="Escape"||u.keyCode===27}const zy=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Hy(u,i){if(u==null)return{};var l={},c=Object.keys(u),f,S;for(S=0;S<c.length;S++)f=c[S],!(i.indexOf(f)>=0)&&(l[f]=u[f]);return l}let up;function jy(u){return up||(up=new op({ownerDocument:u==null?void 0:u.document})),up}function Xy(u){const i=ap(),l=u||jy(i),c=(0,Me.useRef)({dialog:null,backdrop:null});return Object.assign(c.current,{add:()=>l.add(c.current),remove:()=>l.remove(c.current),isTopModal:()=>l.isTopModal(c.current),setDialogRef:(0,Me.useCallback)(f=>{c.current.dialog=f},[]),setBackdropRef:(0,Me.useCallback)(f=>{c.current.backdrop=f},[])})}const xm=(0,Me.forwardRef)((u,i)=>{let{show:l=!1,role:c="dialog",className:f,style:S,children:N,backdrop:U=!0,keyboard:W=!0,onBackdropClick:Q,onEscapeKeyDown:lt,transition:ft,runTransition:mt,backdropTransition:_t,runBackdropTransition:Pt,autoFocus:Dt=!0,enforceFocus:Wt=!0,restoreFocus:Jt=!0,restoreFocusOptions:pe,renderDialog:re,renderBackdrop:le=xi=>(0,ai.jsx)("div",Object.assign({},xi)),manager:De,container:xr,onShow:Be,onHide:Ce=()=>{},onExit:fr,onExited:wr,onExiting:Wr,onEnter:tr,onEntering:ce,onEntered:be}=u,_r=Hy(u,zy);const Hr=ap(),_e=Dy(xr),Re=Xy(De),Br=Py(),Zr=My(l),[Lr,Xo]=(0,Me.useState)(!l),hn=(0,Me.useRef)(null);(0,Me.useImperativeHandle)(i,()=>Re,[Re]),Lu&&!Zr&&l&&(hn.current=np(Hr==null?void 0:Hr.document)),l&&Lr&&Xo(!1);const Zs=po(()=>{if(Re.add(),cn.current=df(document,"keydown",Wo),Ra.current=df(document,"focus",()=>setTimeout(zu),!0),Be&&Be(),Dt){var xi,Ol;const Fl=np((xi=(Ol=Re.dialog)==null?void 0:Ol.ownerDocument)!=null?xi:Hr==null?void 0:Hr.document);Re.dialog&&Fl&&!mm(Re.dialog,Fl)&&(hn.current=Fl,Re.dialog.focus())}}),On=po(()=>{if(Re.remove(),cn.current==null||cn.current(),Ra.current==null||Ra.current(),Jt){var xi;(xi=hn.current)==null||xi.focus==null||xi.focus(pe),hn.current=null}});(0,Me.useEffect)(()=>{!l||!_e||Zs()},[l,_e,Zs]),(0,Me.useEffect)(()=>{Lr&&On()},[Lr,On]),fm(()=>{On()});const zu=po(()=>{if(!Wt||!Br()||!Re.isTopModal())return;const xi=np(Hr==null?void 0:Hr.document);Re.dialog&&xi&&!mm(Re.dialog,xi)&&Re.dialog.focus()}),Ma=po(xi=>{xi.target===xi.currentTarget&&(Q==null||Q(xi),U===!0&&Ce())}),Wo=po(xi=>{W&&Vy(xi)&&Re.isTopModal()&&(lt==null||lt(xi),xi.defaultPrevented||Ce())}),Ra=(0,Me.useRef)(),cn=(0,Me.useRef)(),Fn=(...xi)=>{Xo(!0),wr==null||wr(...xi)};if(!_e)return null;const dn=Object.assign({role:c,ref:Re.setDialogRef,"aria-modal":c==="dialog"?!0:void 0},_r,{style:S,className:f,tabIndex:-1});let Vs=re?re(dn):(0,ai.jsx)("div",Object.assign({},dn,{children:Me.cloneElement(N,{role:"document"})}));Vs=_m(ft,mt,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!l,onExit:fr,onExiting:Wr,onExited:Fn,onEnter:tr,onEntering:ce,onEntered:be,children:Vs});let Ia=null;return U&&(Ia=le({ref:Re.setBackdropRef,onClick:Ma}),Ia=_m(_t,Pt,{in:!!l,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Ia})),(0,ai.jsx)(ai.Fragment,{children:ku.createPortal((0,ai.jsxs)(ai.Fragment,{children:[Ia,Vs]}),_e)})});xm.displayName="Modal";var Wy=Object.assign(xm,{Manager:op});function $y(u,i){return u.classList?!!i&&u.classList.contains(i):(" "+(u.className.baseVal||u.className)+" ").indexOf(" "+i+" ")!==-1}function Yy(u,i){u.classList?u.classList.add(i):$y(u,i)||(typeof u.className=="string"?u.className=u.className+" "+i:u.setAttribute("class",(u.className&&u.className.baseVal||"")+" "+i))}var Ky=Function.prototype.bind.call(Function.prototype.call,[].slice);function Uu(u,i){return Ky(u.querySelectorAll(i))}function Tm(u,i){return u.replace(new RegExp("(^|\\s)"+i+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Zy(u,i){u.classList?u.classList.remove(i):typeof u.className=="string"?u.className=Tm(u.className,i):u.setAttribute("class",Tm(u.className&&u.className.baseVal||"",i))}const Gu={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Qy extends op{adjustAndStore(i,l,c){const f=l.style[i];l.dataset[i]=f,Ml(l,{[i]:`${parseFloat(Ml(l,i))+c}px`})}restore(i,l){const c=l.dataset[i];c!==void 0&&(delete l.dataset[i],Ml(l,{[i]:c}))}setContainerStyle(i){super.setContainerStyle(i);const l=this.getElement();if(Yy(l,"modal-open"),!i.scrollBarWidth)return;const c=this.isRTL?"paddingLeft":"paddingRight",f=this.isRTL?"marginLeft":"marginRight";Uu(l,Gu.FIXED_CONTENT).forEach(S=>this.adjustAndStore(c,S,i.scrollBarWidth)),Uu(l,Gu.STICKY_CONTENT).forEach(S=>this.adjustAndStore(f,S,-i.scrollBarWidth)),Uu(l,Gu.NAVBAR_TOGGLER).forEach(S=>this.adjustAndStore(f,S,i.scrollBarWidth))}removeContainerStyle(i){super.removeContainerStyle(i);const l=this.getElement();Zy(l,"modal-open");const c=this.isRTL?"paddingLeft":"paddingRight",f=this.isRTL?"marginLeft":"marginRight";Uu(l,Gu.FIXED_CONTENT).forEach(S=>this.restore(c,S)),Uu(l,Gu.STICKY_CONTENT).forEach(S=>this.restore(f,S)),Uu(l,Gu.NAVBAR_TOGGLER).forEach(S=>this.restore(f,S))}}let hp;function Jy(u){return hp||(hp=new Qy(u)),hp}var f1=null;function qy(u,i){if(u==null)return{};var l={},c=Object.keys(u),f,S;for(S=0;S<c.length;S++)f=c[S],!(i.indexOf(f)>=0)&&(l[f]=u[f]);return l}function cp(u,i){return cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,f){return c.__proto__=f,c},cp(u,i)}function tv(u,i){u.prototype=Object.create(i.prototype),u.prototype.constructor=u,cp(u,i)}var Em={disabled:!1},Sm=Me.createContext(null),ev=function(i){return i.scrollTop},Sc="unmounted",Rl="exited",Pa="entering",Il="entered",dp="exiting",jo=function(u){tv(i,u);function i(c,f){var S;S=u.call(this,c,f)||this;var N=f,U=N&&!N.isMounting?c.enter:c.appear,W;return S.appearStatus=null,c.in?U?(W=Rl,S.appearStatus=Pa):W=Il:c.unmountOnExit||c.mountOnEnter?W=Sc:W=Rl,S.state={status:W},S.nextCallback=null,S}i.getDerivedStateFromProps=function(f,S){var N=f.in;return N&&S.status===Sc?{status:Rl}:null};var l=i.prototype;return l.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},l.componentDidUpdate=function(f){var S=null;if(f!==this.props){var N=this.state.status;this.props.in?N!==Pa&&N!==Il&&(S=Pa):(N===Pa||N===Il)&&(S=dp)}this.updateStatus(!1,S)},l.componentWillUnmount=function(){this.cancelNextCallback()},l.getTimeouts=function(){var f=this.props.timeout,S,N,U;return S=N=U=f,f!=null&&typeof f!="number"&&(S=f.exit,N=f.enter,U=f.appear!==void 0?f.appear:N),{exit:S,enter:N,appear:U}},l.updateStatus=function(f,S){if(f===void 0&&(f=!1),S!==null)if(this.cancelNextCallback(),S===Pa){if(this.props.unmountOnExit||this.props.mountOnEnter){var N=this.props.nodeRef?this.props.nodeRef.current:ku.findDOMNode(this);N&&ev(N)}this.performEnter(f)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Rl&&this.setState({status:Sc})},l.performEnter=function(f){var S=this,N=this.props.enter,U=this.context?this.context.isMounting:f,W=this.props.nodeRef?[U]:[ku.findDOMNode(this),U],Q=W[0],lt=W[1],ft=this.getTimeouts(),mt=U?ft.appear:ft.enter;if(!f&&!N||Em.disabled){this.safeSetState({status:Il},function(){S.props.onEntered(Q)});return}this.props.onEnter(Q,lt),this.safeSetState({status:Pa},function(){S.props.onEntering(Q,lt),S.onTransitionEnd(mt,function(){S.safeSetState({status:Il},function(){S.props.onEntered(Q,lt)})})})},l.performExit=function(){var f=this,S=this.props.exit,N=this.getTimeouts(),U=this.props.nodeRef?void 0:ku.findDOMNode(this);if(!S||Em.disabled){this.safeSetState({status:Rl},function(){f.props.onExited(U)});return}this.props.onExit(U),this.safeSetState({status:dp},function(){f.props.onExiting(U),f.onTransitionEnd(N.exit,function(){f.safeSetState({status:Rl},function(){f.props.onExited(U)})})})},l.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},l.safeSetState=function(f,S){S=this.setNextCallback(S),this.setState(f,S)},l.setNextCallback=function(f){var S=this,N=!0;return this.nextCallback=function(U){N&&(N=!1,S.nextCallback=null,f(U))},this.nextCallback.cancel=function(){N=!1},this.nextCallback},l.onTransitionEnd=function(f,S){this.setNextCallback(S);var N=this.props.nodeRef?this.props.nodeRef.current:ku.findDOMNode(this),U=f==null&&!this.props.addEndListener;if(!N||U){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var W=this.props.nodeRef?[this.nextCallback]:[N,this.nextCallback],Q=W[0],lt=W[1];this.props.addEndListener(Q,lt)}f!=null&&setTimeout(this.nextCallback,f)},l.render=function(){var f=this.state.status;if(f===Sc)return null;var S=this.props,N=S.children,U=S.in,W=S.mountOnEnter,Q=S.unmountOnExit,lt=S.appear,ft=S.enter,mt=S.exit,_t=S.timeout,Pt=S.addEndListener,Dt=S.onEnter,Wt=S.onEntering,Jt=S.onEntered,pe=S.onExit,re=S.onExiting,le=S.onExited,De=S.nodeRef,xr=qy(S,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Me.createElement(Sm.Provider,{value:null},typeof N=="function"?N(f,xr):Me.cloneElement(Me.Children.only(N),xr))},i}(Me.Component);jo.contextType=Sm,jo.propTypes={};function Vu(){}jo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vu,onEntering:Vu,onEntered:Vu,onExit:Vu,onExiting:Vu,onExited:Vu},jo.UNMOUNTED=Sc,jo.EXITED=Rl,jo.ENTERING=Pa,jo.ENTERED=Il,jo.EXITING=dp;var rv=jo;function bm(u,i){const l=Ml(u,i)||"",c=l.indexOf("ms")===-1?1e3:1;return parseFloat(l)*c}function iv(u,i){const l=bm(u,"transitionDuration"),c=bm(u,"transitionDelay"),f=pm(u,S=>{S.target===u&&(f(),i(S))},l+c)}function sv(u){u.offsetHeight}function nv(u){return u&&"setState"in u?ku.findDOMNode(u):u!=null?u:null}var ov=Me.forwardRef((ft,lt)=>{var mt=ft,{onEnter:u,onEntering:i,onEntered:l,onExit:c,onExiting:f,onExited:S,addEndListener:N,children:U,childRef:W}=mt,Q=ps(mt,["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"]);const _t=(0,Me.useRef)(null),Pt=hf(_t,W),Dt=Ce=>{Pt(nv(Ce))},Wt=Ce=>fr=>{Ce&&_t.current&&Ce(_t.current,fr)},Jt=(0,Me.useCallback)(Wt(u),[u]),pe=(0,Me.useCallback)(Wt(i),[i]),re=(0,Me.useCallback)(Wt(l),[l]),le=(0,Me.useCallback)(Wt(c),[c]),De=(0,Me.useCallback)(Wt(f),[f]),xr=(0,Me.useCallback)(Wt(S),[S]),Be=(0,Me.useCallback)(Wt(N),[N]);return(0,ai.jsx)(rv,gi(He({ref:lt},Q),{onEnter:Jt,onEntered:re,onEntering:pe,onExit:le,onExited:xr,onExiting:De,addEndListener:Be,nodeRef:_t,children:typeof U=="function"?(Ce,fr)=>U(Ce,gi(He({},fr),{ref:Dt})):Me.cloneElement(U,{ref:Dt})}))});const av={[Pa]:"show",[Il]:"show"},Am=Me.forwardRef((N,S)=>{var U=N,{className:u,children:i,transitionClasses:l={},onEnter:c}=U,f=ps(U,["className","children","transitionClasses","onEnter"]);const W=He({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},f),Q=(0,Me.useCallback)((lt,ft)=>{sv(lt),c==null||c(lt,ft)},[c]);return(0,ai.jsx)(ov,gi(He({ref:S,addEndListener:iv},W),{onEnter:Q,childRef:i.ref,children:(lt,ft)=>Me.cloneElement(i,gi(He({},ft),{className:In()("fade",u,i.props.className,av[lt],l[lt])}))}))});Am.displayName="Fade";var wm=Am;const Cm=Me.forwardRef((S,f)=>{var N=S,{className:u,bsPrefix:i,as:l="div"}=N,c=ps(N,["className","bsPrefix","as"]);return i=Ca(i,"modal-body"),(0,ai.jsx)(l,He({ref:f,className:In()(u,i)},c))});Cm.displayName="ModalBody";var lv=Cm,Pm=Me.createContext({onHide(){}});const Mm=Me.forwardRef((lt,Q)=>{var ft=lt,{bsPrefix:u,className:i,contentClassName:l,centered:c,size:f,fullscreen:S,children:N,scrollable:U}=ft,W=ps(ft,["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"]);u=Ca(u,"modal");const mt=`${u}-dialog`,_t=typeof S=="string"?`${u}-fullscreen-${S}`:`${u}-fullscreen`;return(0,ai.jsx)("div",gi(He({},W),{ref:Q,className:In()(mt,i,f&&`${u}-${f}`,c&&`${mt}-centered`,U&&`${mt}-scrollable`,S&&_t),children:(0,ai.jsx)("div",{className:In()(`${u}-content`,l),children:N})}))});Mm.displayName="ModalDialog";var Rm=Mm;const Im=Me.forwardRef((S,f)=>{var N=S,{className:u,bsPrefix:i,as:l="div"}=N,c=ps(N,["className","bsPrefix","as"]);return i=Ca(i,"modal-footer"),(0,ai.jsx)(l,He({ref:f,className:In()(u,i)},c))});Im.displayName="ModalFooter";var uv=Im,hv=Or(5697),fp=Or.n(hv);const cv={"aria-label":fp().string,onClick:fp().func,variant:fp().oneOf(["white"])},pp=Me.forwardRef((S,f)=>{var N=S,{className:u,variant:i,"aria-label":l="Close"}=N,c=ps(N,["className","variant","aria-label"]);return(0,ai.jsx)("button",He({ref:f,type:"button",className:In()("btn-close",i&&`btn-close-${i}`,u),"aria-label":l},c))});pp.displayName="CloseButton",pp.propTypes=cv;var dv=pp,fv=Me.forwardRef((U,N)=>{var W=U,{closeLabel:u="Close",closeVariant:i,closeButton:l=!1,onHide:c,children:f}=W,S=ps(W,["closeLabel","closeVariant","closeButton","onHide","children"]);const Q=(0,Me.useContext)(Pm),lt=po(()=>{Q==null||Q.onHide(),c==null||c()});return(0,ai.jsxs)("div",gi(He({ref:N},S),{children:[f,l&&(0,ai.jsx)(dv,{"aria-label":u,variant:i,onClick:lt})]}))});const Om=Me.forwardRef((N,S)=>{var U=N,{bsPrefix:u,className:i,closeLabel:l="Close",closeButton:c=!1}=U,f=ps(U,["bsPrefix","className","closeLabel","closeButton"]);return u=Ca(u,"modal-header"),(0,ai.jsx)(fv,gi(He({ref:S},f),{className:In()(i,u),closeLabel:l,closeButton:c}))});Om.displayName="ModalHeader";var pv=Om,mv=u=>Me.forwardRef((i,l)=>(0,ai.jsx)("div",gi(He({},i),{ref:l,className:In()(i.className,u)})));const gv=mv("h4"),Fm=Me.forwardRef((S,f)=>{var N=S,{className:u,bsPrefix:i,as:l=gv}=N,c=ps(N,["className","bsPrefix","as"]);return i=Ca(i,"modal-title"),(0,ai.jsx)(l,He({ref:f,className:In()(u,i)},c))});Fm.displayName="ModalTitle";var yv=Fm;function vv(u){return(0,ai.jsx)(wm,gi(He({},u),{timeout:null}))}function _v(u){return(0,ai.jsx)(wm,gi(He({},u),{timeout:null}))}const Nm=Me.forwardRef((Hr,_r)=>{var _e=Hr,{bsPrefix:u,className:i,style:l,dialogClassName:c,contentClassName:f,children:S,dialogAs:N=Rm,"aria-labelledby":U,"aria-describedby":W,"aria-label":Q,show:lt=!1,animation:ft=!0,backdrop:mt=!0,keyboard:_t=!0,onEscapeKeyDown:Pt,onShow:Dt,onHide:Wt,container:Jt,autoFocus:pe=!0,enforceFocus:re=!0,restoreFocus:le=!0,restoreFocusOptions:De,onEntered:xr,onExit:Be,onExiting:Ce,onEnter:fr,onEntering:wr,onExited:Wr,backdropClassName:tr,manager:ce}=_e,be=ps(_e,["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"]);const[Re,Br]=(0,Me.useState)({}),[Zr,Lr]=(0,Me.useState)(!1),Xo=(0,Me.useRef)(!1),hn=(0,Me.useRef)(!1),Zs=(0,Me.useRef)(null),[On,zu]=hy(),Ma=hf(_r,zu),Wo=po(Wt),Ra=oy();u=Ca(u,"modal");const cn=(0,Me.useMemo)(()=>({onHide:Wo}),[Wo]);function Fn(){return ce||Jy({isRTL:Ra})}function dn(li){if(!Lu)return;const ju=Fn().getScrollbarWidth()>0,Um=li.scrollHeight>lf(li).documentElement.clientHeight;Br({paddingRight:ju&&!Um?cm():void 0,paddingLeft:!ju&&Um?cm():void 0})}const Vs=po(()=>{On&&dn(On.dialog)});fm(()=>{sp(window,"resize",Vs),Zs.current==null||Zs.current()});const Ia=()=>{Xo.current=!0},xi=li=>{Xo.current&&On&&li.target===On.dialog&&(hn.current=!0),Xo.current=!1},Ol=()=>{Lr(!0),Zs.current=pm(On.dialog,()=>{Lr(!1)})},Fl=li=>{li.target===li.currentTarget&&Ol()},Hu=li=>{if(mt==="static"){Fl(li);return}if(hn.current||li.target!==li.currentTarget){hn.current=!1;return}Wt==null||Wt()},Mv=li=>{_t?Pt==null||Pt(li):(li.preventDefault(),mt==="static"&&Ol())},Rv=(li,ju)=>{li&&dn(li),fr==null||fr(li,ju)},Iv=li=>{Zs.current==null||Zs.current(),Be==null||Be(li)},Ov=(li,ju)=>{wr==null||wr(li,ju),hm(window,"resize",Vs)},Fv=li=>{li&&(li.style.display=""),Wr==null||Wr(li),sp(window,"resize",Vs)},Nv=(0,Me.useCallback)(li=>(0,ai.jsx)("div",gi(He({},li),{className:In()(`${u}-backdrop`,tr,!ft&&"show")})),[ft,tr,u]),km=He(He({},l),Re);km.display="block";const Dv=li=>(0,ai.jsx)("div",gi(He({role:"dialog"},li),{style:km,className:In()(i,u,Zr&&`${u}-static`,!ft&&"show"),onClick:mt?Hu:void 0,onMouseUp:xi,"aria-label":Q,"aria-labelledby":U,"aria-describedby":W,children:(0,ai.jsx)(N,gi(He({},be),{onMouseDown:Ia,className:c,contentClassName:f,children:S}))}));return(0,ai.jsx)(Pm.Provider,{value:cn,children:(0,ai.jsx)(Wy,{show:lt,ref:Ma,backdrop:mt,container:Jt,keyboard:!0,autoFocus:pe,enforceFocus:re,restoreFocus:le,restoreFocusOptions:De,onEscapeKeyDown:Mv,onShow:Dt,onHide:Wt,onEnter:Rv,onEntering:Ov,onEntered:xr,onExit:Iv,onExiting:Ce,onExited:Fv,manager:Fn(),transition:ft?vv:void 0,backdropTransition:ft?_v:void 0,renderBackdrop:Nv,renderDialog:Dv})})});Nm.displayName="Modal";var bc=Object.assign(Nm,{Body:lv,Header:pv,Title:yv,Footer:uv,Dialog:Rm,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),xv=Object.defineProperty,Tv=Object.defineProperties,Ev=Object.getOwnPropertyDescriptors,Dm=Object.getOwnPropertySymbols,Sv=Object.prototype.hasOwnProperty,bv=Object.prototype.propertyIsEnumerable,Bm=(u,i,l)=>i in u?xv(u,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[i]=l,Av=(u,i)=>{for(var l in i||(i={}))Sv.call(i,l)&&Bm(u,l,i[l]);if(Dm)for(var l of Dm(i))bv.call(i,l)&&Bm(u,l,i[l]);return u},wv=(u,i)=>Tv(u,Ev(i));const Cv=u=>{const{title:i,children:l}=u,[c,f]=Me.useState(!0);return Me.createElement(bc,wv(Av({},u),{show:c,onHide:()=>f(!1),size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),Me.createElement(bc.Header,{closeButton:!0},Me.createElement(bc.Title,{id:"contained-modal-title-vcenter"},i)),Me.createElement(bc.Body,null,l),Me.createElement(bc.Footer,null,Me.createElement(ay,{onClick:u.onHide},"Close")))},ff=[{id:"chapter1",title:"Chapter 1: Awakening in the Abyss",text:Me.createElement("p",null,"After a timeless sleep, you wake up in a vast cosmic abyss, feeling trapped by the pull of a relentless black hole. A mysterious force compels you to collect cosmic particles, each one bringing hope as you try to amass enough mass to break free from the void's grip.")}];function Pv(u){for(let i=0;i<ff.length;i++)if(ff[i].id===u){console.log(`Showing story \`${u}\``),q0.render(Me.createElement(Cv,{title:ff[i].title},ff[i].text));return}else continue;console.error(`Story with id ${u} not found`)}window.showStory=Pv})()})();
