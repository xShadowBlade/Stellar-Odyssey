"use strict";(()=>{var hb=Object.create;var ma=Object.defineProperty,ub=Object.defineProperties,cb=Object.getOwnPropertyDescriptor,db=Object.getOwnPropertyDescriptors,fb=Object.getOwnPropertyNames,fa=Object.getOwnPropertySymbols,mb=Object.getPrototypeOf,Cu=Object.prototype.hasOwnProperty,Vm=Object.prototype.propertyIsEnumerable;var zm=(r,t,e)=>t in r?ma(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,gt=(r,t)=>{for(var e in t||(t={}))Cu.call(t,e)&&zm(r,e,t[e]);if(fa)for(var e of fa(t))Vm.call(t,e)&&zm(r,e,t[e]);return r},Ne=(r,t)=>ub(r,db(t));var pa=(r,t)=>{var e={};for(var i in r)Cu.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&fa)for(var i of fa(r))t.indexOf(i)<0&&Vm.call(r,i)&&(e[i]=r[i]);return e};var g=(r,t)=>()=>(r&&(t=r(r=0)),t);var Mt=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Mu=(r,t)=>{for(var e in t)ma(r,e,{get:t[e],enumerable:!0})},pb=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of fb(t))!Cu.call(r,s)&&s!==e&&ma(r,s,{get:()=>t[s],enumerable:!(i=cb(t,s))||i.enumerable});return r};var tn=(r,t,e)=>(e=r!=null?hb(mb(r)):{},pb(t||!r||!r.__esModule?ma(e,"default",{value:r,enumerable:!0}):e,r));var V=(r,t,e)=>new Promise((i,s)=>{var o=l=>{try{a(e.next(l))}catch(h){s(h)}},n=l=>{try{a(e.throw(l))}catch(h){s(h)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,n);a((e=e.apply(r,t)).next())});var Be,ga,en,ht,Ee,H,pr,J,Z,ge,we,qt,kt,Oe,rn,xe,zt,Hm,Et,Se,pt=g(()=>{Be=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Be||{}),ga=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(ga||{}),en=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(en||{}),ht=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(ht||{}),Ee=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Ee||{}),H=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(H||{}),pr=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(pr||{}),J=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(J||{}),Z=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(Z||{}),ge=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(ge||{}),we=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(we||{}),qt=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(qt||{}),kt=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(kt||{}),Oe=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Oe||{}),rn=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(rn||{}),xe=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(xe||{}),zt=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(zt||{}),Hm=(r=>(r[r.RED=1]="RED",r[r.GREEN=2]="GREEN",r[r.BLUE=4]="BLUE",r[r.ALPHA=8]="ALPHA",r))(Hm||{}),Et=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(Et||{}),Se=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Se||{})});var xa,Pu=g(()=>{xa={createCanvas:(r,t)=>{let e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var r;return(r=document.baseURI)!=null?r:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")}});var N,Xm=g(()=>{Pu();N={ADAPTER:xa,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}});function gb(r){return function(t){return t.test(r)}}function sn(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator!="undefined"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]!="undefined"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]!="undefined"&&(e=i[0]);var s=gb(e),o={apple:{phone:s(Iu)&&!s(Br),ipod:s(jm),tablet:!s(Iu)&&(s(Wm)||ep(t))&&!s(Br),universal:s($m),device:(s(Iu)||s(jm)||s(Wm)||s($m)||ep(t))&&!s(Br)},amazon:{phone:s(Ps),tablet:!s(Ps)&&s(ya),device:s(Ps)||s(ya)},android:{phone:!s(Br)&&s(Ps)||!s(Br)&&s(Ru),tablet:!s(Br)&&!s(Ps)&&!s(Ru)&&(s(ya)||s(Ym)),device:!s(Br)&&(s(Ps)||s(ya)||s(Ru)||s(Ym))||s(/\bokhttp\b/i)},windows:{phone:s(Br),tablet:s(qm),device:s(Br)||s(qm)},other:{blackberry:s(Km),blackberry10:s(Zm),opera:s(Qm),firefox:s(tp),chrome:s(Jm),device:s(Km)||s(Zm)||s(Qm)||s(tp)||s(Jm)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var Iu,jm,Wm,$m,Ru,Ym,Ps,ya,Br,qm,Km,Zm,Qm,Jm,tp,ep,Fu=g(()=>{Iu=/iPhone/i,jm=/iPod/i,Wm=/iPad/i,$m=/\biOS-universal(?:.+)Mac\b/i,Ru=/\bAndroid(?:.+)Mobile\b/i,Ym=/Android/i,Ps=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ya=/Silk/i,Br=/Windows Phone/i,qm=/\bWindows(?:.+)ARM\b/i,Km=/BlackBerry/i,Zm=/BB10/i,Qm=/Opera Mini/i,Jm=/\b(CriOS|Chrome)(?:.+)Mobile/i,tp=/Mobile(?:.+)Firefox\b/i,ep=function(r){return typeof r!="undefined"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream=="undefined"}});var rp=g(()=>{Fu();Fu()});var ip,xb,Ve,sp=g(()=>{rp();xb=(ip=sn.default)!=null?ip:sn,Ve=xb(globalThis.navigator)});var Pt=g(()=>{Pu();Xm();sp()});var va=g(()=>{Pt();Pt();N.RETINA_PREFIX=/@([0-9\.]+)x/;N.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1});var np=Mt((zC,Du)=>{"use strict";var yb=Object.prototype.hasOwnProperty,Ce="~";function on(){}Object.create&&(on.prototype=Object.create(null),new on().__proto__||(Ce=!1));function vb(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function op(r,t,e,i,s){if(typeof e!="function")throw new TypeError("The listener must be a function");var o=new vb(e,i||r,s),n=Ce?Ce+t:t;return r._events[n]?r._events[n].fn?r._events[n]=[r._events[n],o]:r._events[n].push(o):(r._events[n]=o,r._eventsCount++),r}function _a(r,t){--r._eventsCount===0?r._events=new on:delete r._events[t]}function ye(){this._events=new on,this._eventsCount=0}ye.prototype.eventNames=function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)yb.call(e,i)&&t.push(Ce?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};ye.prototype.listeners=function(t){var e=Ce?Ce+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,o=i.length,n=new Array(o);s<o;s++)n[s]=i[s].fn;return n};ye.prototype.listenerCount=function(t){var e=Ce?Ce+t:t,i=this._events[e];return i?i.fn?1:i.length:0};ye.prototype.emit=function(t,e,i,s,o,n){var a=Ce?Ce+t:t;if(!this._events[a])return!1;var l=this._events[a],h=arguments.length,d,f;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,s),!0;case 5:return l.fn.call(l.context,e,i,s,o),!0;case 6:return l.fn.call(l.context,e,i,s,o,n),!0}for(f=1,d=new Array(h-1);f<h;f++)d[f-1]=arguments[f];l.fn.apply(l.context,d)}else{var m=l.length,p;for(f=0;f<m;f++)switch(l[f].once&&this.removeListener(t,l[f].fn,void 0,!0),h){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,e);break;case 3:l[f].fn.call(l[f].context,e,i);break;case 4:l[f].fn.call(l[f].context,e,i,s);break;default:if(!d)for(p=1,d=new Array(h-1);p<h;p++)d[p-1]=arguments[p];l[f].fn.apply(l[f].context,d)}}return!0};ye.prototype.on=function(t,e,i){return op(this,t,e,i,!1)};ye.prototype.once=function(t,e,i){return op(this,t,e,i,!0)};ye.prototype.removeListener=function(t,e,i,s){var o=Ce?Ce+t:t;if(!this._events[o])return this;if(!e)return _a(this,o),this;var n=this._events[o];if(n.fn)n.fn===e&&(!s||n.once)&&(!i||n.context===i)&&_a(this,o);else{for(var a=0,l=[],h=n.length;a<h;a++)(n[a].fn!==e||s&&!n[a].once||i&&n[a].context!==i)&&l.push(n[a]);l.length?this._events[o]=l.length===1?l[0]:l:_a(this,o)}return this};ye.prototype.removeAllListeners=function(t){var e;return t?(e=Ce?Ce+t:t,this._events[e]&&_a(this,e)):(this._events=new on,this._eventsCount=0),this};ye.prototype.off=ye.prototype.removeListener;ye.prototype.addListener=ye.prototype.on;ye.prefixed=Ce;ye.EventEmitter=ye;typeof Du!="undefined"&&(Du.exports=ye)});var cp=Mt((VC,Lu)=>{"use strict";Lu.exports=Aa;Lu.exports.default=Aa;function Aa(r,t,e){e=e||2;var i=t&&t.length,s=i?t[0]*e:r.length,o=lp(r,0,s,e,!0),n=[];if(!o||o.next===o.prev)return n;var a,l,h,d,f,m,p;if(i&&(o=Eb(r,t,o,e)),r.length>80*e){a=h=r[0],l=d=r[1];for(var v=e;v<s;v+=e)f=r[v],m=r[v+1],f<a&&(a=f),m<l&&(l=m),f>h&&(h=f),m>d&&(d=m);p=Math.max(h-a,d-l),p=p!==0?32767/p:0}return nn(o,n,e,a,l,p,0),n}function lp(r,t,e,i,s){var o,n;if(s===Ou(r,t,e,i)>0)for(o=t;o<e;o+=i)n=ap(o,r[o],r[o+1],n);else for(o=e-i;o>=t;o-=i)n=ap(o,r[o],r[o+1],n);return n&&Ea(n,n.next)&&(ln(n),n=n.next),n}function Ri(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(Ea(e,e.next)||Vt(e.prev,e,e.next)===0)){if(ln(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function nn(r,t,e,i,s,o,n){if(r){!n&&o&&Pb(r,i,s,o);for(var a=r,l,h;r.prev!==r.next;){if(l=r.prev,h=r.next,o?bb(r,i,s,o):_b(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(h.i/e|0),ln(r),r=h.next,a=h.next;continue}if(r=h,r===a){n?n===1?(r=Tb(Ri(r),t,e),nn(r,t,e,i,s,o,2)):n===2&&Ab(r,t,e,i,s,o):nn(Ri(r),t,e,i,s,o,1);break}}}}function _b(r){var t=r.prev,e=r,i=r.next;if(Vt(t,e,i)>=0)return!1;for(var s=t.x,o=e.x,n=i.x,a=t.y,l=e.y,h=i.y,d=s<o?s<n?s:n:o<n?o:n,f=a<l?a<h?a:h:l<h?l:h,m=s>o?s>n?s:n:o>n?o:n,p=a>l?a>h?a:h:l>h?l:h,v=i.next;v!==t;){if(v.x>=d&&v.x<=m&&v.y>=f&&v.y<=p&&Is(s,a,o,l,n,h,v.x,v.y)&&Vt(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function bb(r,t,e,i){var s=r.prev,o=r,n=r.next;if(Vt(s,o,n)>=0)return!1;for(var a=s.x,l=o.x,h=n.x,d=s.y,f=o.y,m=n.y,p=a<l?a<h?a:h:l<h?l:h,v=d<f?d<m?d:m:f<m?f:m,b=a>l?a>h?a:h:l>h?l:h,E=d>f?d>m?d:m:f>m?f:m,S=Nu(p,v,t,e,i),C=Nu(b,E,t,e,i),w=r.prevZ,A=r.nextZ;w&&w.z>=S&&A&&A.z<=C;){if(w.x>=p&&w.x<=b&&w.y>=v&&w.y<=E&&w!==s&&w!==n&&Is(a,d,l,f,h,m,w.x,w.y)&&Vt(w.prev,w,w.next)>=0||(w=w.prevZ,A.x>=p&&A.x<=b&&A.y>=v&&A.y<=E&&A!==s&&A!==n&&Is(a,d,l,f,h,m,A.x,A.y)&&Vt(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;w&&w.z>=S;){if(w.x>=p&&w.x<=b&&w.y>=v&&w.y<=E&&w!==s&&w!==n&&Is(a,d,l,f,h,m,w.x,w.y)&&Vt(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;A&&A.z<=C;){if(A.x>=p&&A.x<=b&&A.y>=v&&A.y<=E&&A!==s&&A!==n&&Is(a,d,l,f,h,m,A.x,A.y)&&Vt(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Tb(r,t,e){var i=r;do{var s=i.prev,o=i.next.next;!Ea(s,o)&&hp(s,i,i.next,o)&&an(s,o)&&an(o,s)&&(t.push(s.i/e|0),t.push(i.i/e|0),t.push(o.i/e|0),ln(i),ln(i.next),i=r=o),i=i.next}while(i!==r);return Ri(i)}function Ab(r,t,e,i,s,o){var n=r;do{for(var a=n.next.next;a!==n.prev;){if(n.i!==a.i&&Fb(n,a)){var l=up(n,a);n=Ri(n,n.next),l=Ri(l,l.next),nn(n,t,e,i,s,o,0),nn(l,t,e,i,s,o,0);return}a=a.next}n=n.next}while(n!==r)}function Eb(r,t,e,i){var s=[],o,n,a,l,h;for(o=0,n=t.length;o<n;o++)a=t[o]*i,l=o<n-1?t[o+1]*i:r.length,h=lp(r,a,l,i,!1),h===h.next&&(h.steiner=!0),s.push(Rb(h));for(s.sort(wb),o=0;o<s.length;o++)e=Sb(s[o],e);return e}function wb(r,t){return r.x-t.x}function Sb(r,t){var e=Cb(r,t);if(!e)return t;var i=up(e,r);return Ri(i,i.next),Ri(e,e.next)}function Cb(r,t){var e=t,i=r.x,s=r.y,o=-1/0,n;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){var a=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>o&&(o=a,n=e.x<e.next.x?e:e.next,a===i))return n}e=e.next}while(e!==t);if(!n)return null;var l=n,h=n.x,d=n.y,f=1/0,m;e=n;do i>=e.x&&e.x>=h&&i!==e.x&&Is(s<d?i:o,s,h,d,s<d?o:i,s,e.x,e.y)&&(m=Math.abs(s-e.y)/(i-e.x),an(e,r)&&(m<f||m===f&&(e.x>n.x||e.x===n.x&&Mb(n,e)))&&(n=e,f=m)),e=e.next;while(e!==l);return n}function Mb(r,t){return Vt(r.prev,r,t.prev)<0&&Vt(t.next,r,r.next)<0}function Pb(r,t,e,i){var s=r;do s.z===0&&(s.z=Nu(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,Ib(s)}function Ib(r){var t,e,i,s,o,n,a,l,h=1;do{for(e=r,r=null,o=null,n=0;e;){for(n++,i=e,a=0,t=0;t<h&&(a++,i=i.nextZ,!!i);t++);for(l=h;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(s=e,e=e.nextZ,a--):(s=i,i=i.nextZ,l--),o?o.nextZ=s:r=s,s.prevZ=o,o=s;e=i}o.nextZ=null,h*=2}while(n>1);return r}function Nu(r,t,e,i,s){return r=(r-e)*s|0,t=(t-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function Rb(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function Is(r,t,e,i,s,o,n,a){return(s-n)*(t-a)>=(r-n)*(o-a)&&(r-n)*(i-a)>=(e-n)*(t-a)&&(e-n)*(o-a)>=(s-n)*(i-a)}function Fb(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!Db(r,t)&&(an(r,t)&&an(t,r)&&Nb(r,t)&&(Vt(r.prev,r,t.prev)||Vt(r,t.prev,t))||Ea(r,t)&&Vt(r.prev,r,r.next)>0&&Vt(t.prev,t,t.next)>0)}function Vt(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Ea(r,t){return r.x===t.x&&r.y===t.y}function hp(r,t,e,i){var s=Ta(Vt(r,t,e)),o=Ta(Vt(r,t,i)),n=Ta(Vt(e,i,r)),a=Ta(Vt(e,i,t));return!!(s!==o&&n!==a||s===0&&ba(r,e,t)||o===0&&ba(r,i,t)||n===0&&ba(e,r,i)||a===0&&ba(e,t,i))}function ba(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function Ta(r){return r>0?1:r<0?-1:0}function Db(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&hp(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function an(r,t){return Vt(r.prev,r,r.next)<0?Vt(r,t,r.next)>=0&&Vt(r,r.prev,t)>=0:Vt(r,t,r.prev)<0||Vt(r,r.next,t)<0}function Nb(r,t){var e=r,i=!1,s=(r.x+t.x)/2,o=(r.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&s<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function up(r,t){var e=new Bu(r.i,r.x,r.y),i=new Bu(t.i,t.x,t.y),s=r.next,o=t.prev;return r.next=t,t.prev=r,e.next=s,s.prev=e,i.next=e,e.prev=i,o.next=i,i.prev=o,i}function ap(r,t,e,i){var s=new Bu(r,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function ln(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Bu(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Aa.deviation=function(r,t,e,i){var s=t&&t.length,o=s?t[0]*e:r.length,n=Math.abs(Ou(r,0,o,e));if(s)for(var a=0,l=t.length;a<l;a++){var h=t[a]*e,d=a<l-1?t[a+1]*e:r.length;n-=Math.abs(Ou(r,h,d,e))}var f=0;for(a=0;a<i.length;a+=3){var m=i[a]*e,p=i[a+1]*e,v=i[a+2]*e;f+=Math.abs((r[m]-r[v])*(r[p+1]-r[m+1])-(r[m]-r[p])*(r[v+1]-r[m+1]))}return n===0&&f===0?0:Math.abs((f-n)/n)};function Ou(r,t,e,i){for(var s=0,o=t,n=e-i;o<e;o+=i)s+=(r[n]-r[o])*(r[o+1]+r[n+1]),n=o;return s}Aa.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,s=0;s<r.length;s++){for(var o=0;o<r[s].length;o++)for(var n=0;n<t;n++)e.vertices.push(r[s][o][n]);s>0&&(i+=r[s-1].length,e.holes.push(i))}return e}});var dp=Mt((Rs,Fs)=>{(function(r){var t=typeof Rs=="object"&&Rs&&!Rs.nodeType&&Rs,e=typeof Fs=="object"&&Fs&&!Fs.nodeType&&Fs,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(r=i);var s,o=2147483647,n=36,a=1,l=26,h=38,d=700,f=72,m=128,p="-",v=/^xn--/,b=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=n-a,w=Math.floor,A=String.fromCharCode,P;function X(B){throw new RangeError(S[B])}function F(B,W){for(var nt=B.length,at=[];nt--;)at[nt]=W(B[nt]);return at}function I(B,W){var nt=B.split("@"),at="";nt.length>1&&(at=nt[0]+"@",B=nt[1]),B=B.replace(E,".");var Ft=B.split("."),jt=F(Ft,W).join(".");return at+jt}function q(B){for(var W=[],nt=0,at=B.length,Ft,jt;nt<at;)Ft=B.charCodeAt(nt++),Ft>=55296&&Ft<=56319&&nt<at?(jt=B.charCodeAt(nt++),(jt&64512)==56320?W.push(((Ft&1023)<<10)+(jt&1023)+65536):(W.push(Ft),nt--)):W.push(Ft);return W}function et(B){return F(B,function(W){var nt="";return W>65535&&(W-=65536,nt+=A(W>>>10&1023|55296),W=56320|W&1023),nt+=A(W),nt}).join("")}function mt(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:n}function Y(B,W){return B+22+75*(B<26)-((W!=0)<<5)}function R(B,W,nt){var at=0;for(B=nt?w(B/d):B>>1,B+=w(B/W);B>C*l>>1;at+=n)B=w(B/C);return w(at+(C+1)*B/(B+h))}function z(B){var W=[],nt=B.length,at,Ft=0,jt=m,Rt=f,Qt,me,Yt,ae,yt,Ot,Gt,Jt,le;for(Qt=B.lastIndexOf(p),Qt<0&&(Qt=0),me=0;me<Qt;++me)B.charCodeAt(me)>=128&&X("not-basic"),W.push(B.charCodeAt(me));for(Yt=Qt>0?Qt+1:0;Yt<nt;){for(ae=Ft,yt=1,Ot=n;Yt>=nt&&X("invalid-input"),Gt=mt(B.charCodeAt(Yt++)),(Gt>=n||Gt>w((o-Ft)/yt))&&X("overflow"),Ft+=Gt*yt,Jt=Ot<=Rt?a:Ot>=Rt+l?l:Ot-Rt,!(Gt<Jt);Ot+=n)le=n-Jt,yt>w(o/le)&&X("overflow"),yt*=le;at=W.length+1,Rt=R(Ft-ae,at,ae==0),w(Ft/at)>o-jt&&X("overflow"),jt+=w(Ft/at),Ft%=at,W.splice(Ft++,0,jt)}return et(W)}function Q(B){var W,nt,at,Ft,jt,Rt,Qt,me,Yt,ae,yt,Ot=[],Gt,Jt,le,Pi;for(B=q(B),Gt=B.length,W=m,nt=0,jt=f,Rt=0;Rt<Gt;++Rt)yt=B[Rt],yt<128&&Ot.push(A(yt));for(at=Ft=Ot.length,Ft&&Ot.push(p);at<Gt;){for(Qt=o,Rt=0;Rt<Gt;++Rt)yt=B[Rt],yt>=W&&yt<Qt&&(Qt=yt);for(Jt=at+1,Qt-W>w((o-nt)/Jt)&&X("overflow"),nt+=(Qt-W)*Jt,W=Qt,Rt=0;Rt<Gt;++Rt)if(yt=B[Rt],yt<W&&++nt>o&&X("overflow"),yt==W){for(me=nt,Yt=n;ae=Yt<=jt?a:Yt>=jt+l?l:Yt-jt,!(me<ae);Yt+=n)Pi=me-ae,le=n-ae,Ot.push(A(Y(ae+Pi%le,0))),me=w(Pi/le);Ot.push(A(Y(me,0))),jt=R(nt,Jt,at==Ft),nt=0,++at}++nt,++W}return Ot.join("")}function ft(B){return I(B,function(W){return v.test(W)?z(W.slice(4).toLowerCase()):W})}function O(B){return I(B,function(W){return b.test(W)?"xn--"+Q(W):W})}if(s={version:"1.4.1",ucs2:{decode:q,encode:et},decode:z,encode:Q,toASCII:O,toUnicode:ft},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return s});else if(t&&e)if(Fs.exports==t)e.exports=s;else for(P in s)s.hasOwnProperty(P)&&(t[P]=s[P]);else r.punycode=s})(Rs)});var mp=Mt((HC,fp)=>{"use strict";fp.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(t,e);if(n.value!==s||n.enumerable!==!0)return!1}return!0}});var xp=Mt((XC,gp)=>{"use strict";var pp=typeof Symbol!="undefined"&&Symbol,Bb=mp();gp.exports=function(){return typeof pp!="function"||typeof Symbol!="function"||typeof pp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Bb()}});var _p=Mt((jC,vp)=>{"use strict";var yp={foo:{}},Ob=Object;vp.exports=function(){return{__proto__:yp}.foo===yp.foo&&!({__proto__:null}instanceof Ob)}});var Ap=Mt((WC,Tp)=>{"use strict";var Lb="Function.prototype.bind called on incompatible ",kb=Object.prototype.toString,Ub=Math.max,Gb="[object Function]",bp=function(t,e){for(var i=[],s=0;s<t.length;s+=1)i[s]=t[s];for(var o=0;o<e.length;o+=1)i[o+t.length]=e[o];return i},zb=function(t,e){for(var i=[],s=e||0,o=0;s<t.length;s+=1,o+=1)i[o]=t[s];return i},Vb=function(r,t){for(var e="",i=0;i<r.length;i+=1)e+=r[i],i+1<r.length&&(e+=t);return e};Tp.exports=function(t){var e=this;if(typeof e!="function"||kb.apply(e)!==Gb)throw new TypeError(Lb+e);for(var i=zb(arguments,1),s,o=function(){if(this instanceof s){var d=e.apply(this,bp(i,arguments));return Object(d)===d?d:this}return e.apply(t,bp(i,arguments))},n=Ub(0,e.length-i.length),a=[],l=0;l<n;l++)a[l]="$"+l;if(s=Function("binder","return function ("+Vb(a,",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var h=function(){};h.prototype=e.prototype,s.prototype=new h,h.prototype=null}return s}});var wa=Mt(($C,Ep)=>{"use strict";var Hb=Ap();Ep.exports=Function.prototype.bind||Hb});var Sp=Mt((YC,wp)=>{"use strict";var Xb=Function.prototype.call,jb=Object.prototype.hasOwnProperty,Wb=wa();wp.exports=Wb.call(Xb,jb)});var ei=Mt((qC,Rp)=>{"use strict";var vt,Os=SyntaxError,Ip=Function,Bs=TypeError,ku=function(r){try{return Ip('"use strict"; return ('+r+").constructor;")()}catch(t){}},Fi=Object.getOwnPropertyDescriptor;if(Fi)try{Fi({},"")}catch(r){Fi=null}var Uu=function(){throw new Bs},$b=Fi?function(){try{return arguments.callee,Uu}catch(r){try{return Fi(arguments,"callee").get}catch(t){return Uu}}}():Uu,Ds=xp()(),Yb=_p()(),te=Object.getPrototypeOf||(Yb?function(r){return r.__proto__}:null),Ns={},qb=typeof Uint8Array=="undefined"||!te?vt:te(Uint8Array),Di={"%AggregateError%":typeof AggregateError=="undefined"?vt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?vt:ArrayBuffer,"%ArrayIteratorPrototype%":Ds&&te?te([][Symbol.iterator]()):vt,"%AsyncFromSyncIteratorPrototype%":vt,"%AsyncFunction%":Ns,"%AsyncGenerator%":Ns,"%AsyncGeneratorFunction%":Ns,"%AsyncIteratorPrototype%":Ns,"%Atomics%":typeof Atomics=="undefined"?vt:Atomics,"%BigInt%":typeof BigInt=="undefined"?vt:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?vt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?vt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?vt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?vt:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?vt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?vt:FinalizationRegistry,"%Function%":Ip,"%GeneratorFunction%":Ns,"%Int8Array%":typeof Int8Array=="undefined"?vt:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?vt:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?vt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ds&&te?te(te([][Symbol.iterator]())):vt,"%JSON%":typeof JSON=="object"?JSON:vt,"%Map%":typeof Map=="undefined"?vt:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Ds||!te?vt:te(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?vt:Promise,"%Proxy%":typeof Proxy=="undefined"?vt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?vt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?vt:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Ds||!te?vt:te(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?vt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ds&&te?te(""[Symbol.iterator]()):vt,"%Symbol%":Ds?Symbol:vt,"%SyntaxError%":Os,"%ThrowTypeError%":$b,"%TypedArray%":qb,"%TypeError%":Bs,"%Uint8Array%":typeof Uint8Array=="undefined"?vt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?vt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?vt:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?vt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?vt:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?vt:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?vt:WeakSet};if(te)try{null.error}catch(r){Cp=te(te(r)),Di["%Error.prototype%"]=Cp}var Cp,Kb=function r(t){var e;if(t==="%AsyncFunction%")e=ku("async function () {}");else if(t==="%GeneratorFunction%")e=ku("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=ku("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&te&&(e=te(s.prototype))}return Di[t]=e,e},Mp={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},hn=wa(),Sa=Sp(),Zb=hn.call(Function.call,Array.prototype.concat),Qb=hn.call(Function.apply,Array.prototype.splice),Pp=hn.call(Function.call,String.prototype.replace),Ca=hn.call(Function.call,String.prototype.slice),Jb=hn.call(Function.call,RegExp.prototype.exec),tT=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,eT=/\\(\\)?/g,rT=function(t){var e=Ca(t,0,1),i=Ca(t,-1);if(e==="%"&&i!=="%")throw new Os("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new Os("invalid intrinsic syntax, expected opening `%`");var s=[];return Pp(t,tT,function(o,n,a,l){s[s.length]=a?Pp(l,eT,"$1"):n||o}),s},iT=function(t,e){var i=t,s;if(Sa(Mp,i)&&(s=Mp[i],i="%"+s[0]+"%"),Sa(Di,i)){var o=Di[i];if(o===Ns&&(o=Kb(i)),typeof o=="undefined"&&!e)throw new Bs("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:o}}throw new Os("intrinsic "+t+" does not exist!")};Rp.exports=function(t,e){if(typeof t!="string"||t.length===0)throw new Bs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Bs('"allowMissing" argument must be a boolean');if(Jb(/^%?[^%]*%?$/,t)===null)throw new Os("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=rT(t),s=i.length>0?i[0]:"",o=iT("%"+s+"%",e),n=o.name,a=o.value,l=!1,h=o.alias;h&&(s=h[0],Qb(i,Zb([0,1],h)));for(var d=1,f=!0;d<i.length;d+=1){var m=i[d],p=Ca(m,0,1),v=Ca(m,-1);if((p==='"'||p==="'"||p==="`"||v==='"'||v==="'"||v==="`")&&p!==v)throw new Os("property names with quotes must have matching quotes");if((m==="constructor"||!f)&&(l=!0),s+="."+m,n="%"+s+"%",Sa(Di,n))a=Di[n];else if(a!=null){if(!(m in a)){if(!e)throw new Bs("base intrinsic for "+t+" exists, but the property is not available.");return}if(Fi&&d+1>=i.length){var b=Fi(a,m);f=!!b,f&&"get"in b&&!("originalValue"in b.get)?a=b.get:a=a[m]}else f=Sa(a,m),a=a[m];f&&!l&&(Di[n]=a)}}return a}});var Vu=Mt((KC,Fp)=>{"use strict";var sT=ei(),Gu=sT("%Object.defineProperty%",!0),zu=function(){if(Gu)try{return Gu({},"a",{value:1}),!0}catch(t){return!1}return!1};zu.hasArrayLengthDefineBug=function(){if(!zu())return null;try{return Gu([],"length",{value:1}).length!==1}catch(t){return!0}};Fp.exports=zu});var Hu=Mt((ZC,Dp)=>{"use strict";var oT=ei(),Ma=oT("%Object.getOwnPropertyDescriptor%",!0);if(Ma)try{Ma([],"length")}catch(r){Ma=null}Dp.exports=Ma});var Op=Mt((QC,Bp)=>{"use strict";var nT=Vu()(),Xu=ei(),un=nT&&Xu("%Object.defineProperty%",!0);if(un)try{un({},"a",{value:1})}catch(r){un=!1}var aT=Xu("%SyntaxError%"),Ls=Xu("%TypeError%"),Np=Hu();Bp.exports=function(t,e,i){if(!t||typeof t!="object"&&typeof t!="function")throw new Ls("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Ls("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ls("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ls("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ls("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ls("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,n=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!Np&&Np(t,e);if(un)un(t,e,{configurable:n===null&&l?l.configurable:!n,enumerable:s===null&&l?l.enumerable:!s,value:i,writable:o===null&&l?l.writable:!o});else if(a||!s&&!o&&!n)t[e]=i;else throw new aT("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Vp=Mt((JC,zp)=>{"use strict";var Gp=ei(),Lp=Op(),lT=Vu()(),kp=Hu(),Up=Gp("%TypeError%"),hT=Gp("%Math.floor%");zp.exports=function(t,e){if(typeof t!="function")throw new Up("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||hT(e)!==e)throw new Up("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],s=!0,o=!0;if("length"in t&&kp){var n=kp(t,"length");n&&!n.configurable&&(s=!1),n&&!n.writable&&(o=!1)}return(s||o||!i)&&(lT?Lp(t,"length",e,!0,!0):Lp(t,"length",e)),t}});var $p=Mt((t2,Pa)=>{"use strict";var ju=wa(),ks=ei(),uT=Vp(),cT=ks("%TypeError%"),Xp=ks("%Function.prototype.apply%"),jp=ks("%Function.prototype.call%"),Wp=ks("%Reflect.apply%",!0)||ju.call(jp,Xp),cn=ks("%Object.defineProperty%",!0),dT=ks("%Math.max%");if(cn)try{cn({},"a",{value:1})}catch(r){cn=null}Pa.exports=function(t){if(typeof t!="function")throw new cT("a function is required");var e=Wp(ju,jp,arguments);return uT(e,1+dT(0,t.length-(arguments.length-1)),!0)};var Hp=function(){return Wp(ju,Xp,arguments)};cn?cn(Pa.exports,"apply",{value:Hp}):Pa.exports.apply=Hp});var Zp=Mt((e2,Kp)=>{"use strict";var Yp=ei(),qp=$p(),fT=qp(Yp("String.prototype.indexOf"));Kp.exports=function(t,e){var i=Yp(t,!!e);return typeof i=="function"&&fT(t,".prototype.")>-1?qp(i):i}});var Qp=Mt(()=>{});var yg=Mt((s2,xg)=>{var ec=typeof Map=="function"&&Map.prototype,Wu=Object.getOwnPropertyDescriptor&&ec?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ra=ec&&Wu&&typeof Wu.get=="function"?Wu.get:null,Jp=ec&&Map.prototype.forEach,rc=typeof Set=="function"&&Set.prototype,$u=Object.getOwnPropertyDescriptor&&rc?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Fa=rc&&$u&&typeof $u.get=="function"?$u.get:null,tg=rc&&Set.prototype.forEach,mT=typeof WeakMap=="function"&&WeakMap.prototype,fn=mT?WeakMap.prototype.has:null,pT=typeof WeakSet=="function"&&WeakSet.prototype,mn=pT?WeakSet.prototype.has:null,gT=typeof WeakRef=="function"&&WeakRef.prototype,eg=gT?WeakRef.prototype.deref:null,xT=Boolean.prototype.valueOf,yT=Object.prototype.toString,vT=Function.prototype.toString,_T=String.prototype.match,ic=String.prototype.slice,ii=String.prototype.replace,bT=String.prototype.toUpperCase,rg=String.prototype.toLowerCase,cg=RegExp.prototype.test,ig=Array.prototype.concat,gr=Array.prototype.join,TT=Array.prototype.slice,sg=Math.floor,Ku=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Yu=Object.getOwnPropertySymbols,Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Us=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ve=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Us||"symbol")?Symbol.toStringTag:null,dg=Object.prototype.propertyIsEnumerable,og=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function ng(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||cg.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-sg(-r):sg(r);if(i!==r){var s=String(i),o=ic.call(t,s.length+1);return ii.call(s,e,"$&_")+"."+ii.call(ii.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ii.call(t,e,"$&_")}var Qu=Qp(),ag=Qu.custom,lg=mg(ag)?ag:null;xg.exports=function r(t,e,i,s){var o=e||{};if(ri(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ri(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var n=ri(o,"customInspect")?o.customInspect:!0;if(typeof n!="boolean"&&n!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ri(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ri(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t=="undefined")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return gg(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?ng(t,l):l}if(typeof t=="bigint"){var h=String(t)+"n";return a?ng(t,h):h}var d=typeof o.depth=="undefined"?5:o.depth;if(typeof i=="undefined"&&(i=0),i>=d&&d>0&&typeof t=="object")return Ju(t)?"[Array]":"[Object]";var f=GT(o,i);if(typeof s=="undefined")s=[];else if(pg(s,t)>=0)return"[Circular]";function m(R,z,Q){if(z&&(s=TT.call(s),s.push(z)),Q){var ft={depth:o.depth};return ri(o,"quoteStyle")&&(ft.quoteStyle=o.quoteStyle),r(R,ft,i+1,s)}return r(R,o,i+1,s)}if(typeof t=="function"&&!hg(t)){var p=RT(t),v=Ia(t,m);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(v.length>0?" { "+gr.call(v,", ")+" }":"")}if(mg(t)){var b=Us?ii.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Zu.call(t);return typeof t=="object"&&!Us?dn(b):b}if(LT(t)){for(var E="<"+rg.call(String(t.nodeName)),S=t.attributes||[],C=0;C<S.length;C++)E+=" "+S[C].name+"="+fg(AT(S[C].value),"double",o);return E+=">",t.childNodes&&t.childNodes.length&&(E+="..."),E+="</"+rg.call(String(t.nodeName))+">",E}if(Ju(t)){if(t.length===0)return"[]";var w=Ia(t,m);return f&&!UT(w)?"["+tc(w,f)+"]":"[ "+gr.call(w,", ")+" ]"}if(wT(t)){var A=Ia(t,m);return!("cause"in Error.prototype)&&"cause"in t&&!dg.call(t,"cause")?"{ ["+String(t)+"] "+gr.call(ig.call("[cause]: "+m(t.cause),A),", ")+" }":A.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+gr.call(A,", ")+" }"}if(typeof t=="object"&&n){if(lg&&typeof t[lg]=="function"&&Qu)return Qu(t,{depth:d-i});if(n!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(FT(t)){var P=[];return Jp&&Jp.call(t,function(R,z){P.push(m(z,t,!0)+" => "+m(R,t))}),ug("Map",Ra.call(t),P,f)}if(BT(t)){var X=[];return tg&&tg.call(t,function(R){X.push(m(R,t))}),ug("Set",Fa.call(t),X,f)}if(DT(t))return qu("WeakMap");if(OT(t))return qu("WeakSet");if(NT(t))return qu("WeakRef");if(CT(t))return dn(m(Number(t)));if(PT(t))return dn(m(Ku.call(t)));if(MT(t))return dn(xT.call(t));if(ST(t))return dn(m(String(t)));if(typeof window!="undefined"&&t===window)return"{ [object Window] }";if(t===global)return"{ [object globalThis] }";if(!ET(t)&&!hg(t)){var F=Ia(t,m),I=og?og(t)===Object.prototype:t instanceof Object||t.constructor===Object,q=t instanceof Object?"":"null prototype",et=!I&&ve&&Object(t)===t&&ve in t?ic.call(si(t),8,-1):q?"Object":"",mt=I||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",Y=mt+(et||q?"["+gr.call(ig.call([],et||[],q||[]),": ")+"] ":"");return F.length===0?Y+"{}":f?Y+"{"+tc(F,f)+"}":Y+"{ "+gr.call(F,", ")+" }"}return String(t)};function fg(r,t,e){var i=(e.quoteStyle||t)==="double"?'"':"'";return i+r+i}function AT(r){return ii.call(String(r),/"/g,"&quot;")}function Ju(r){return si(r)==="[object Array]"&&(!ve||!(typeof r=="object"&&ve in r))}function ET(r){return si(r)==="[object Date]"&&(!ve||!(typeof r=="object"&&ve in r))}function hg(r){return si(r)==="[object RegExp]"&&(!ve||!(typeof r=="object"&&ve in r))}function wT(r){return si(r)==="[object Error]"&&(!ve||!(typeof r=="object"&&ve in r))}function ST(r){return si(r)==="[object String]"&&(!ve||!(typeof r=="object"&&ve in r))}function CT(r){return si(r)==="[object Number]"&&(!ve||!(typeof r=="object"&&ve in r))}function MT(r){return si(r)==="[object Boolean]"&&(!ve||!(typeof r=="object"&&ve in r))}function mg(r){if(Us)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Zu)return!1;try{return Zu.call(r),!0}catch(t){}return!1}function PT(r){if(!r||typeof r!="object"||!Ku)return!1;try{return Ku.call(r),!0}catch(t){}return!1}var IT=Object.prototype.hasOwnProperty||function(r){return r in this};function ri(r,t){return IT.call(r,t)}function si(r){return yT.call(r)}function RT(r){if(r.name)return r.name;var t=_T.call(vT.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function pg(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function FT(r){if(!Ra||!r||typeof r!="object")return!1;try{Ra.call(r);try{Fa.call(r)}catch(t){return!0}return r instanceof Map}catch(t){}return!1}function DT(r){if(!fn||!r||typeof r!="object")return!1;try{fn.call(r,fn);try{mn.call(r,mn)}catch(t){return!0}return r instanceof WeakMap}catch(t){}return!1}function NT(r){if(!eg||!r||typeof r!="object")return!1;try{return eg.call(r),!0}catch(t){}return!1}function BT(r){if(!Fa||!r||typeof r!="object")return!1;try{Fa.call(r);try{Ra.call(r)}catch(t){return!0}return r instanceof Set}catch(t){}return!1}function OT(r){if(!mn||!r||typeof r!="object")return!1;try{mn.call(r,mn);try{fn.call(r,fn)}catch(t){return!0}return r instanceof WeakSet}catch(t){}return!1}function LT(r){return!r||typeof r!="object"?!1:typeof HTMLElement!="undefined"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function gg(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return gg(ic.call(r,0,t.maxStringLength),t)+i}var s=ii.call(ii.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,kT);return fg(s,"single",t)}function kT(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+bT.call(t.toString(16))}function dn(r){return"Object("+r+")"}function qu(r){return r+" { ? }"}function ug(r,t,e,i){var s=i?tc(e,i):gr.call(e,", ");return r+" ("+t+") {"+s+"}"}function UT(r){for(var t=0;t<r.length;t++)if(pg(r[t],`
`)>=0)return!1;return!0}function GT(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=gr.call(Array(r.indent+1)," ");else return null;return{base:e,prev:gr.call(Array(t+1),e)}}function tc(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+gr.call(r,","+e)+`
`+t.prev}function Ia(r,t){var e=Ju(r),i=[];if(e){i.length=r.length;for(var s=0;s<r.length;s++)i[s]=ri(r,s)?t(r[s],r):""}var o=typeof Yu=="function"?Yu(r):[],n;if(Us){n={};for(var a=0;a<o.length;a++)n["$"+o[a]]=o[a]}for(var l in r)ri(r,l)&&(e&&String(Number(l))===l&&l<r.length||Us&&n["$"+l]instanceof Symbol||(cg.call(/[^\w$]/,l)?i.push(t(l,r)+": "+t(r[l],r)):i.push(l+": "+t(r[l],r))));if(typeof Yu=="function")for(var h=0;h<o.length;h++)dg.call(r,o[h])&&i.push("["+t(o[h])+"]: "+t(r[o[h]],r));return i}});var _g=Mt((o2,vg)=>{"use strict";var sc=ei(),Gs=Zp(),zT=yg(),VT=sc("%TypeError%"),Da=sc("%WeakMap%",!0),Na=sc("%Map%",!0),HT=Gs("WeakMap.prototype.get",!0),XT=Gs("WeakMap.prototype.set",!0),jT=Gs("WeakMap.prototype.has",!0),WT=Gs("Map.prototype.get",!0),$T=Gs("Map.prototype.set",!0),YT=Gs("Map.prototype.has",!0),oc=function(r,t){for(var e=r,i;(i=e.next)!==null;e=i)if(i.key===t)return e.next=i.next,i.next=r.next,r.next=i,i},qT=function(r,t){var e=oc(r,t);return e&&e.value},KT=function(r,t,e){var i=oc(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},ZT=function(r,t){return!!oc(r,t)};vg.exports=function(){var t,e,i,s={assert:function(o){if(!s.has(o))throw new VT("Side channel does not contain "+zT(o))},get:function(o){if(Da&&o&&(typeof o=="object"||typeof o=="function")){if(t)return HT(t,o)}else if(Na){if(e)return WT(e,o)}else if(i)return qT(i,o)},has:function(o){if(Da&&o&&(typeof o=="object"||typeof o=="function")){if(t)return jT(t,o)}else if(Na){if(e)return YT(e,o)}else if(i)return ZT(i,o);return!1},set:function(o,n){Da&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Da),XT(t,o,n)):Na?(e||(e=new Na),$T(e,o,n)):(i||(i={key:{},next:null}),KT(i,o,n))}};return s}});var Ba=Mt((n2,bg)=>{"use strict";var QT=String.prototype.replace,JT=/%20/g,nc={RFC1738:"RFC1738",RFC3986:"RFC3986"};bg.exports={default:nc.RFC3986,formatters:{RFC1738:function(r){return QT.call(r,JT,"+")},RFC3986:function(r){return String(r)}},RFC1738:nc.RFC1738,RFC3986:nc.RFC3986}});var lc=Mt((a2,Ag)=>{"use strict";var tA=Ba(),ac=Object.prototype.hasOwnProperty,Ni=Array.isArray,xr=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),eA=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Ni(i)){for(var s=[],o=0;o<i.length;++o)typeof i[o]!="undefined"&&s.push(i[o]);e.obj[e.prop]=s}}},Tg=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},s=0;s<t.length;++s)typeof t[s]!="undefined"&&(i[s]=t[s]);return i},rA=function r(t,e,i){if(!e)return t;if(typeof e!="object"){if(Ni(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!ac.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var s=t;return Ni(t)&&!Ni(e)&&(s=Tg(t,i)),Ni(t)&&Ni(e)?(e.forEach(function(o,n){if(ac.call(t,n)){var a=t[n];a&&typeof a=="object"&&o&&typeof o=="object"?t[n]=r(a,o,i):t.push(o)}else t[n]=o}),t):Object.keys(e).reduce(function(o,n){var a=e[n];return ac.call(o,n)?o[n]=r(o[n],a,i):o[n]=a,o},s)},iA=function(t,e){return Object.keys(e).reduce(function(i,s){return i[s]=e[s],i},t)},sA=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(s){return i}},oA=function(t,e,i,s,o){if(t.length===0)return t;var n=t;if(typeof t=="symbol"?n=Symbol.prototype.toString.call(t):typeof t!="string"&&(n=String(t)),i==="iso-8859-1")return escape(n).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",l=0;l<n.length;++l){var h=n.charCodeAt(l);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===tA.RFC1738&&(h===40||h===41)){a+=n.charAt(l);continue}if(h<128){a=a+xr[h];continue}if(h<2048){a=a+(xr[192|h>>6]+xr[128|h&63]);continue}if(h<55296||h>=57344){a=a+(xr[224|h>>12]+xr[128|h>>6&63]+xr[128|h&63]);continue}l+=1,h=65536+((h&1023)<<10|n.charCodeAt(l)&1023),a+=xr[240|h>>18]+xr[128|h>>12&63]+xr[128|h>>6&63]+xr[128|h&63]}return a},nA=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],s=0;s<e.length;++s)for(var o=e[s],n=o.obj[o.prop],a=Object.keys(n),l=0;l<a.length;++l){var h=a[l],d=n[h];typeof d=="object"&&d!==null&&i.indexOf(d)===-1&&(e.push({obj:n,prop:h}),i.push(d))}return eA(e),t},aA=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},lA=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},hA=function(t,e){return[].concat(t,e)},uA=function(t,e){if(Ni(t)){for(var i=[],s=0;s<t.length;s+=1)i.push(e(t[s]));return i}return e(t)};Ag.exports={arrayToObject:Tg,assign:iA,combine:hA,compact:nA,decode:sA,encode:oA,isBuffer:lA,isRegExp:aA,maybeMap:uA,merge:rA}});var Pg=Mt((l2,Mg)=>{"use strict";var Sg=_g(),Oa=lc(),pn=Ba(),cA=Object.prototype.hasOwnProperty,Eg={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Or=Array.isArray,dA=Array.prototype.push,Cg=function(r,t){dA.apply(r,Or(t)?t:[t])},fA=Date.prototype.toISOString,wg=pn.default,_e={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Oa.encode,encodeValuesOnly:!1,format:wg,formatter:pn.formatters[wg],indices:!1,serializeDate:function(t){return fA.call(t)},skipNulls:!1,strictNullHandling:!1},mA=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},hc={},pA=function r(t,e,i,s,o,n,a,l,h,d,f,m,p,v,b,E){for(var S=t,C=E,w=0,A=!1;(C=C.get(hc))!==void 0&&!A;){var P=C.get(t);if(w+=1,typeof P!="undefined"){if(P===w)throw new RangeError("Cyclic object value");A=!0}typeof C.get(hc)=="undefined"&&(w=0)}if(typeof l=="function"?S=l(e,S):S instanceof Date?S=f(S):i==="comma"&&Or(S)&&(S=Oa.maybeMap(S,function(ft){return ft instanceof Date?f(ft):ft})),S===null){if(o)return a&&!v?a(e,_e.encoder,b,"key",m):e;S=""}if(mA(S)||Oa.isBuffer(S)){if(a){var X=v?e:a(e,_e.encoder,b,"key",m);return[p(X)+"="+p(a(S,_e.encoder,b,"value",m))]}return[p(e)+"="+p(String(S))]}var F=[];if(typeof S=="undefined")return F;var I;if(i==="comma"&&Or(S))v&&a&&(S=Oa.maybeMap(S,a)),I=[{value:S.length>0?S.join(",")||null:void 0}];else if(Or(l))I=l;else{var q=Object.keys(S);I=h?q.sort(h):q}for(var et=s&&Or(S)&&S.length===1?e+"[]":e,mt=0;mt<I.length;++mt){var Y=I[mt],R=typeof Y=="object"&&typeof Y.value!="undefined"?Y.value:S[Y];if(!(n&&R===null)){var z=Or(S)?typeof i=="function"?i(et,Y):et:et+(d?"."+Y:"["+Y+"]");E.set(t,w);var Q=Sg();Q.set(hc,E),Cg(F,r(R,z,i,s,o,n,i==="comma"&&v&&Or(S)?null:a,l,h,d,f,m,p,v,b,Q))}}return F},gA=function(t){if(!t)return _e;if(t.encoder!==null&&typeof t.encoder!="undefined"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||_e.charset;if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=pn.default;if(typeof t.format!="undefined"){if(!cA.call(pn.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var s=pn.formatters[i],o=_e.filter;return(typeof t.filter=="function"||Or(t.filter))&&(o=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:_e.addQueryPrefix,allowDots:typeof t.allowDots=="undefined"?_e.allowDots:!!t.allowDots,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:_e.charsetSentinel,delimiter:typeof t.delimiter=="undefined"?_e.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:_e.encode,encoder:typeof t.encoder=="function"?t.encoder:_e.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:_e.encodeValuesOnly,filter:o,format:i,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:_e.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:_e.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:_e.strictNullHandling}};Mg.exports=function(r,t){var e=r,i=gA(t),s,o;typeof i.filter=="function"?(o=i.filter,e=o("",e)):Or(i.filter)&&(o=i.filter,s=o);var n=[];if(typeof e!="object"||e===null)return"";var a;t&&t.arrayFormat in Eg?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var l=Eg[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=l==="comma"&&t&&t.commaRoundTrip;s||(s=Object.keys(e)),i.sort&&s.sort(i.sort);for(var d=Sg(),f=0;f<s.length;++f){var m=s[f];i.skipNulls&&e[m]===null||Cg(n,pA(e[m],m,l,h,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}var p=n.join(i.delimiter),v=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),p.length>0?v+p:""}});var Fg=Mt((h2,Rg)=>{"use strict";var zs=lc(),uc=Object.prototype.hasOwnProperty,xA=Array.isArray,ee={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:zs.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},yA=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},Ig=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},vA="utf8=%26%2310003%3B",_A="utf8=%E2%9C%93",bA=function(t,e){var i={__proto__:null},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,n=s.split(e.delimiter,o),a=-1,l,h=e.charset;if(e.charsetSentinel)for(l=0;l<n.length;++l)n[l].indexOf("utf8=")===0&&(n[l]===_A?h="utf-8":n[l]===vA&&(h="iso-8859-1"),a=l,l=n.length);for(l=0;l<n.length;++l)if(l!==a){var d=n[l],f=d.indexOf("]="),m=f===-1?d.indexOf("="):f+1,p,v;m===-1?(p=e.decoder(d,ee.decoder,h,"key"),v=e.strictNullHandling?null:""):(p=e.decoder(d.slice(0,m),ee.decoder,h,"key"),v=zs.maybeMap(Ig(d.slice(m+1),e),function(b){return e.decoder(b,ee.decoder,h,"value")})),v&&e.interpretNumericEntities&&h==="iso-8859-1"&&(v=yA(v)),d.indexOf("[]=")>-1&&(v=xA(v)?[v]:v),uc.call(i,p)?i[p]=zs.combine(i[p],v):i[p]=v}return i},TA=function(r,t,e,i){for(var s=i?t:Ig(t,e),o=r.length-1;o>=0;--o){var n,a=r[o];if(a==="[]"&&e.parseArrays)n=[].concat(s);else{n=e.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,h=parseInt(l,10);!e.parseArrays&&l===""?n={0:s}:!isNaN(h)&&a!==l&&String(h)===l&&h>=0&&e.parseArrays&&h<=e.arrayLimit?(n=[],n[h]=s):l!=="__proto__"&&(n[l]=s)}s=n}return s},AA=function(t,e,i,s){if(t){var o=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,n=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&n.exec(o),h=l?o.slice(0,l.index):o,d=[];if(h){if(!i.plainObjects&&uc.call(Object.prototype,h)&&!i.allowPrototypes)return;d.push(h)}for(var f=0;i.depth>0&&(l=a.exec(o))!==null&&f<i.depth;){if(f+=1,!i.plainObjects&&uc.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(l[1])}return l&&d.push("["+o.slice(l.index)+"]"),TA(d,e,i,s)}},EA=function(t){if(!t)return ee;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset=="undefined"?ee.charset:t.charset;return{allowDots:typeof t.allowDots=="undefined"?ee.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:ee.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:ee.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:ee.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ee.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:ee.comma,decoder:typeof t.decoder=="function"?t.decoder:ee.decoder,delimiter:typeof t.delimiter=="string"||zs.isRegExp(t.delimiter)?t.delimiter:ee.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:ee.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:ee.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:ee.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:ee.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ee.strictNullHandling}};Rg.exports=function(r,t){var e=EA(t);if(r===""||r===null||typeof r=="undefined")return e.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?bA(r,e):r,s=e.plainObjects?Object.create(null):{},o=Object.keys(i),n=0;n<o.length;++n){var a=o[n],l=AA(a,i[a],e,typeof r=="string");s=zs.merge(s,l,e)}return e.allowSparse===!0?s:zs.compact(s)}});var Ng=Mt((u2,Dg)=>{"use strict";var wA=Pg(),SA=Fg(),CA=Ba();Dg.exports={formats:CA,parse:SA,stringify:wA}});var kg=Mt(Hs=>{"use strict";var MA=dp();function qe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var PA=/^([a-z0-9.+-]+:)/i,IA=/:[0-9]*$/,RA=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,FA=["<",">",'"',"`"," ","\r",`
`,"	"],DA=["{","}","|","\\","^","`"].concat(FA),cc=["'"].concat(DA),Bg=["%","/","?",";","#"].concat(cc),Og=["/","?","#"],NA=255,Lg=/^[+a-z0-9A-Z_-]{0,63}$/,BA=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,OA={javascript:!0,"javascript:":!0},dc={javascript:!0,"javascript:":!0},Vs={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},fc=Ng();function gn(r,t,e){if(r&&typeof r=="object"&&r instanceof qe)return r;var i=new qe;return i.parse(r,t,e),i}qe.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),s=i!==-1&&i<r.indexOf("#")?"?":"#",o=r.split(s),n=/\\/g;o[0]=o[0].replace(n,"/"),r=o.join(s);var a=r;if(a=a.trim(),!e&&r.split("#").length===1){var l=RA.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=fc.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=PA.exec(a);if(h){h=h[0];var d=h.toLowerCase();this.protocol=d,a=a.substr(h.length)}if(e||h||a.match(/^\/\/[^@/]+@[^@/]+/)){var f=a.substr(0,2)==="//";f&&!(h&&dc[h])&&(a=a.substr(2),this.slashes=!0)}if(!dc[h]&&(f||h&&!Vs[h])){for(var m=-1,p=0;p<Og.length;p++){var v=a.indexOf(Og[p]);v!==-1&&(m===-1||v<m)&&(m=v)}var b,E;m===-1?E=a.lastIndexOf("@"):E=a.lastIndexOf("@",m),E!==-1&&(b=a.slice(0,E),a=a.slice(E+1),this.auth=decodeURIComponent(b)),m=-1;for(var p=0;p<Bg.length;p++){var v=a.indexOf(Bg[p]);v!==-1&&(m===-1||v<m)&&(m=v)}m===-1&&(m=a.length),this.host=a.slice(0,m),a=a.slice(m),this.parseHost(),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S)for(var C=this.hostname.split(/\./),p=0,w=C.length;p<w;p++){var A=C[p];if(A&&!A.match(Lg)){for(var P="",X=0,F=A.length;X<F;X++)A.charCodeAt(X)>127?P+="x":P+=A[X];if(!P.match(Lg)){var I=C.slice(0,p),q=C.slice(p+1),et=A.match(BA);et&&(I.push(et[1]),q.unshift(et[2])),q.length&&(a="/"+q.join(".")+a),this.hostname=I.join(".");break}}}this.hostname.length>NA?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=MA.toASCII(this.hostname));var mt=this.port?":"+this.port:"",Y=this.hostname||"";this.host=Y+mt,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!OA[d])for(var p=0,w=cc.length;p<w;p++){var R=cc[p];if(a.indexOf(R)!==-1){var z=encodeURIComponent(R);z===R&&(z=escape(R)),a=a.split(R).join(z)}}var Q=a.indexOf("#");Q!==-1&&(this.hash=a.substr(Q),a=a.slice(0,Q));var ft=a.indexOf("?");if(ft!==-1?(this.search=a.substr(ft),this.query=a.substr(ft+1),t&&(this.query=fc.parse(this.query)),a=a.slice(0,ft)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Vs[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var mt=this.pathname||"",O=this.search||"";this.path=mt+O}return this.href=this.format(),this};function LA(r){return typeof r=="string"&&(r=gn(r)),r instanceof qe?r.format():qe.prototype.format.call(r)}qe.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",s=!1,o="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=fc.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var n=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Vs[t])&&s!==!1?(s="//"+(s||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),n&&n.charAt(0)!=="?"&&(n="?"+n),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),n=n.replace("#","%23"),t+s+e+n+i};function kA(r,t){return gn(r,!1,!0).resolve(t)}qe.prototype.resolve=function(r){return this.resolveObject(gn(r,!1,!0)).format()};function UA(r,t){return r?gn(r,!1,!0).resolveObject(t):t}qe.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new qe;t.parse(r,!1,!0),r=t}for(var e=new qe,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];e[o]=this[o]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var n=Object.keys(r),a=0;a<n.length;a++){var l=n[a];l!=="protocol"&&(e[l]=r[l])}return Vs[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!Vs[r.protocol]){for(var h=Object.keys(r),d=0;d<h.length;d++){var f=h[d];e[f]=r[f]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!dc[r.protocol]){for(var w=(r.pathname||"").split("/");w.length&&!(r.host=w.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),e.pathname=w.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var m=e.pathname||"",p=e.search||"";e.path=m+p}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var v=e.pathname&&e.pathname.charAt(0)==="/",b=r.host||r.pathname&&r.pathname.charAt(0)==="/",E=b||v||e.host&&r.pathname,S=E,C=e.pathname&&e.pathname.split("/")||[],w=r.pathname&&r.pathname.split("/")||[],A=e.protocol&&!Vs[e.protocol];if(A&&(e.hostname="",e.port=null,e.host&&(C[0]===""?C[0]=e.host:C.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(w[0]===""?w[0]=r.host:w.unshift(r.host)),r.host=null),E=E&&(w[0]===""||C[0]==="")),b)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,C=w;else if(w.length)C||(C=[]),C.pop(),C=C.concat(w),e.search=r.search,e.query=r.query;else if(r.search!=null){if(A){e.host=C.shift(),e.hostname=e.host;var P=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;P&&(e.auth=P.shift(),e.hostname=P.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!C.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var X=C.slice(-1)[0],F=(e.host||r.host||C.length>1)&&(X==="."||X==="..")||X==="",I=0,q=C.length;q>=0;q--)X=C[q],X==="."?C.splice(q,1):X===".."?(C.splice(q,1),I++):I&&(C.splice(q,1),I--);if(!E&&!S)for(;I--;I)C.unshift("..");E&&C[0]!==""&&(!C[0]||C[0].charAt(0)!=="/")&&C.unshift(""),F&&C.join("/").substr(-1)!=="/"&&C.push("");var et=C[0]===""||C[0]&&C[0].charAt(0)==="/";if(A){e.hostname=et?"":C.length?C.shift():"",e.host=e.hostname;var P=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;P&&(e.auth=P.shift(),e.hostname=P.shift(),e.host=e.hostname)}return E=E||e.host&&C.length,E&&!et&&C.unshift(""),C.length>0?e.pathname=C.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};qe.prototype.parseHost=function(){var r=this.host,t=IA.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};Hs.parse=gn;Hs.resolve=kA;Hs.resolveObject=UA;Hs.format=LA;Hs.Url=qe});function ct(r,t,e=3){if(Ug[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),Ug[t]=!0}var Ug,Xs=g(()=>{Ug={}});var js,Gg,zg=g(()=>{js=tn(kg(),1);Xs();Gg={get parse(){return ct("7.3.0","utils.url.parse is deprecated, use native URL API instead."),js.parse},get format(){return ct("7.3.0","utils.url.format is deprecated, use native URL API instead."),js.format},get resolve(){return ct("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),js.resolve}}});function sr(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function xn(r){return r.split("?")[0].split("#")[0]}function GA(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zA(r,t,e){return r.replace(new RegExp(GA(t),"g"),e)}function VA(r,t){let e="",i=0,s=-1,o=0,n=-1;for(let a=0;a<=r.length;++a){if(a<r.length)n=r.charCodeAt(a);else{if(n===47)break;n=47}if(n===47){if(!(s===a-1||o===1))if(s!==a-1&&o===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){let l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),s=a,o=0;continue}}else if(e.length===2||e.length===1){e="",i=0,s=a,o=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+=`/${r.slice(s+1,a)}`:e=r.slice(s+1,a),i=a-s-1;s=a,o=0}else n===46&&o!==-1?++o:o=-1}return e}var mc,Vg=g(()=>{Pt();mc={toPosix(r){return zA(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){sr(r),r=this.toPosix(r);let t=/^file:\/\/\//.exec(r);if(t)return t[0];let e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(sr(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;let i=xn(this.toPosix(t!=null?t:N.ADAPTER.getBaseUrl())),s=xn(this.toPosix(e!=null?e:this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?mc.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(sr(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="",e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));let i=r.endsWith("/");return r=VA(r,!1),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return sr(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){var e;if(r.length===0)return".";let t;for(let i=0;i<r.length;++i){let s=r[i];if(sr(s),s.length>0)if(t===void 0)t=s;else{let o=(e=r[i-1])!=null?e:"";this.extname(o)?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(sr(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0),e=t===47,i=-1,s=!0,o=this.getProtocol(r),n=r;r=r.slice(o.length);for(let a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!s){i=a;break}}else s=!1;return i===-1?e?"/":this.isUrl(n)?o+r:o:e&&i===1?"//":o+r.slice(0,i)},rootname(r){sr(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){let e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){sr(r),t&&sr(t),r=xn(this.toPosix(r));let e=0,i=-1,s=!0,o;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let n=t.length-1,a=-1;for(o=r.length-1;o>=0;--o){let l=r.charCodeAt(o);if(l===47){if(!s){e=o+1;break}}else a===-1&&(s=!1,a=o+1),n>=0&&(l===t.charCodeAt(n)?--n===-1&&(i=o):(n=-1,i=a))}return e===i?i=a:i===-1&&(i=r.length),r.slice(e,i)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===47){if(!s){e=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":r.slice(e,i)},extname(r){sr(r),r=xn(this.toPosix(r));let t=-1,e=0,i=-1,s=!0,o=0;for(let n=r.length-1;n>=0;--n){let a=r.charCodeAt(n);if(a===47){if(!s){e=n+1;break}continue}i===-1&&(s=!1,i=n+1),a===46?t===-1?t=n:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){sr(r);let t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=xn(this.toPosix(r));let e=r.charCodeAt(0),i=this.isAbsolute(r),s,o="";t.root=this.rootname(r),i||this.hasProtocol(r)?s=1:s=0;let n=-1,a=0,l=-1,h=!0,d=r.length-1,f=0;for(;d>=s;--d){if(e=r.charCodeAt(d),e===47){if(!h){a=d+1;break}continue}l===-1&&(h=!1,l=d+1),e===46?n===-1?n=d:f!==1&&(f=1):n!==-1&&(f=-1)}return n===-1||l===-1||f===0||f===1&&n===l-1&&n===a+1?l!==-1&&(a===0&&i?t.base=t.name=r.slice(1,l):t.base=t.name=r.slice(a,l)):(a===0&&i?(t.name=r.slice(1,n),t.base=r.slice(1,l)):(t.name=r.slice(a,n),t.base=r.slice(a,l)),t.ext=r.slice(n,l)),t.dir=this.dirname(r),o&&(t.dir=o+t.dir),t},sep:"/",delimiter:":"}});function Hg(){return V(this,null,function*(){return yn!=null||(yn=(()=>V(this,null,function*(){var o;let r=document.createElement("canvas").getContext("webgl");if(!r)return kt.UNPACK;let t=yield new Promise(n=>{let a=document.createElement("video");a.onloadeddata=()=>n(a),a.onerror=()=>n(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!t)return kt.UNPACK;let e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);let i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);let s=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,s),r.deleteFramebuffer(i),r.deleteTexture(e),(o=r.getExtension("WEBGL_lose_context"))==null||o.loseContext(),s[0]<=s[3]?kt.PMA:kt.UNPACK}))()),yn})}var yn,Xg=g(()=>{pt()});function jg(){ct("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function Wg(){ct("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}var $g=g(()=>{Xs()});function La(){return typeof pc>"u"&&(pc=function(){var t;let r={stencil:!0,failIfMajorPerformanceCaveat:N.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!N.ADAPTER.getWebGLRenderingContext())return!1;let e=N.ADAPTER.createCanvas(),i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),s=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){let o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,s}catch(e){return!1}}()),pc}var pc,Yg=g(()=>{va();Pt()});var HA,Lr,re,Ke,r0,qg,gc,XA,ka,i0,s0,Kg,Zg,Qg,vn,jA,WA,$A,YA,vc,Jg,qA,xc,yc,t0,_c,or,e0,o0,n0=g(()=>{HA={grad:.9,turn:360,rad:360/(2*Math.PI)},Lr=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},re=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},Ke=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},r0=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},qg=function(r){return{r:Ke(r.r,0,255),g:Ke(r.g,0,255),b:Ke(r.b,0,255),a:Ke(r.a)}},gc=function(r){return{r:re(r.r),g:re(r.g),b:re(r.b),a:re(r.a,3)}},XA=/^#([0-9a-f]{3,8})$/i,ka=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},i0=function(r){var t=r.r,e=r.g,i=r.b,s=r.a,o=Math.max(t,e,i),n=o-Math.min(t,e,i),a=n?o===t?(e-i)/n:o===e?2+(i-t)/n:4+(t-e)/n:0;return{h:60*(a<0?a+6:a),s:o?n/o*100:0,v:o/255*100,a:s}},s0=function(r){var t=r.h,e=r.s,i=r.v,s=r.a;t=t/360*6,e/=100,i/=100;var o=Math.floor(t),n=i*(1-e),a=i*(1-(t-o)*e),l=i*(1-(1-t+o)*e),h=o%6;return{r:255*[i,a,n,n,l,i][h],g:255*[l,i,i,a,n,n][h],b:255*[n,n,l,i,i,a][h],a:s}},Kg=function(r){return{h:r0(r.h),s:Ke(r.s,0,100),l:Ke(r.l,0,100),a:Ke(r.a)}},Zg=function(r){return{h:re(r.h),s:re(r.s),l:re(r.l),a:re(r.a,3)}},Qg=function(r){return s0((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},vn=function(r){return{h:(t=i0(r)).h,s:(s=(200-(e=t.s))*(i=t.v)/100)>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,e,i,s},jA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,WA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$A=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YA=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vc={string:[[function(r){var t=XA.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?re(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?re(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=$A.exec(r)||YA.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:qg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=jA.exec(r)||WA.exec(r);if(!t)return null;var e,i,s=Kg({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(HA[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Qg(s)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,s=r.a,o=s===void 0?1:s;return Lr(t)&&Lr(e)&&Lr(i)?qg({r:Number(t),g:Number(e),b:Number(i),a:Number(o)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,s=r.a,o=s===void 0?1:s;if(!Lr(t)||!Lr(e)||!Lr(i))return null;var n=Kg({h:Number(t),s:Number(e),l:Number(i),a:Number(o)});return Qg(n)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,s=r.a,o=s===void 0?1:s;if(!Lr(t)||!Lr(e)||!Lr(i))return null;var n=function(a){return{h:r0(a.h),s:Ke(a.s,0,100),v:Ke(a.v,0,100),a:Ke(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(o)});return s0(n)},"hsv"]]},Jg=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},qA=function(r){return typeof r=="string"?Jg(r.trim(),vc.string):typeof r=="object"&&r!==null?Jg(r,vc.object):[null,void 0]},xc=function(r,t){var e=vn(r);return{h:e.h,s:Ke(e.s+100*t,0,100),l:e.l,a:e.a}},yc=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},t0=function(r,t){var e=vn(r);return{h:e.h,s:e.s,l:Ke(e.l+100*t,0,100),a:e.a}},_c=function(){function r(t){this.parsed=qA(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return re(yc(this.rgba),2)},r.prototype.isDark=function(){return yc(this.rgba)<.5},r.prototype.isLight=function(){return yc(this.rgba)>=.5},r.prototype.toHex=function(){return t=gc(this.rgba),e=t.r,i=t.g,s=t.b,n=(o=t.a)<1?ka(re(255*o)):"","#"+ka(e)+ka(i)+ka(s)+n;var t,e,i,s,o,n},r.prototype.toRgb=function(){return gc(this.rgba)},r.prototype.toRgbString=function(){return t=gc(this.rgba),e=t.r,i=t.g,s=t.b,(o=t.a)<1?"rgba("+e+", "+i+", "+s+", "+o+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,o},r.prototype.toHsl=function(){return Zg(vn(this.rgba))},r.prototype.toHslString=function(){return t=Zg(vn(this.rgba)),e=t.h,i=t.s,s=t.l,(o=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+o+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,o},r.prototype.toHsv=function(){return t=i0(this.rgba),{h:re(t.h),s:re(t.s),v:re(t.v),a:re(t.a,3)};var t},r.prototype.invert=function(){return or({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),or(xc(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),or(xc(this.rgba,-t))},r.prototype.grayscale=function(){return or(xc(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),or(t0(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),or(t0(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?or({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):re(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=vn(this.rgba);return typeof t=="number"?or({h:t,s:e.s,l:e.l,a:e.a}):re(e.h)},r.prototype.isEqual=function(t){return this.toHex()===or(t).toHex()},r}(),or=function(r){return r instanceof _c?r:new _c(r)},e0=[],o0=function(r){r.forEach(function(t){e0.indexOf(t)<0&&(t(_c,vc),e0.push(t))})}});function a0(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in e)i[e[s]]=s;var o={};r.prototype.toName=function(n){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=i[this.toHex()];if(h)return h;if(n!=null&&n.closest){var d=this.toRgb(),f=1/0,m="black";if(!o.length)for(var p in e)o[p]=new r(e[p]).toRgb();for(var v in e){var b=(a=d,l=o[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));b<f&&(f=b,m=v)}return m}},t.string.push([function(n){var a=n.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new r(l).toRgb():null},"name"])}var l0=g(()=>{});var Ws,dt,h0=g(()=>{n0();l0();o0([a0]);Ws=class Ua{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Ua)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?gt({},t):t}isSourceEqual(t,e){let i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((s,o)=>s===e[o]);if(t!==null&&e!==null){let s=Object.keys(t),o=Object.keys(e);return s.length!==o.length?!1:s.every(n=>t[n]===e[n])}return t===e}toRgba(){let[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){let[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){let[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){let[e,i,s]=this._components;return t=t!=null?t:[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(s*255),t}toRgbArray(t){t=t!=null?t:[];let[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toLittleEndianNumber(){let t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){let[e,i,s,o]=Ua.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=s,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,o=this._int&255;return e&&(i=i*t+.5|0,s=s*t+.5|0,o=o*t+.5|0),(t*255<<24)+(i<<16)+(s<<8)+o}toHex(){let t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){let t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){let[e,i,s]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(s*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t!=null?t:[];let[e,i,s,o]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=o,t}normalize(t){let e,i,s,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){let n=t;e=(n>>16&255)/255,i=(n>>8&255)/255,s=(n&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,s,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,s,o=255]=t,e/=255,i/=255,s/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){let a=Ua.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}let n=or(t);n.isValid()&&({r:e,g:i,b:s,a:o}=n.rgba,e/=255,i/=255,s/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=o,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);let[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((s,o)=>{t[o]=Math.min(Math.max(s,e),i)}),t)}};Ws.shared=new Ws,Ws.temp=new Ws,Ws.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;dt=Ws});var oi=g(()=>{h0()});function u0(r,t=[]){return ct("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),dt.shared.setValue(r).toRgbArray(t)}function c0(r){return ct("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),dt.shared.setValue(r).toHex()}function d0(r){return ct("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),dt.shared.setValue(r).toNumber()}function f0(r){return ct("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),dt.shared.setValue(r).toNumber()}var m0=g(()=>{oi();Xs()});function KA(){let r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[ht.NORMAL_NPM]=ht.NORMAL,r[ht.ADD_NPM]=ht.ADD,r[ht.SCREEN_NPM]=ht.SCREEN,t[ht.NORMAL]=ht.NORMAL_NPM,t[ht.ADD]=ht.ADD_NPM,t[ht.SCREEN]=ht.SCREEN_NPM;let e=[];return e.push(t),e.push(r),e}function p0(r,t){return _n[t?1:0][r]}function g0(r,t,e,i=!0){return ct("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),dt.shared.setValue(r).premultiply(t,i).toArray(e!=null?e:new Float32Array(4))}function x0(r,t){return ct("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),dt.shared.setValue(r).toPremultiplied(t)}function y0(r,t,e,i=!0){return ct("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),dt.shared.setValue(r).premultiply(t,i).toArray(e!=null?e:new Float32Array(4))}var _n,v0=g(()=>{oi();pt();Xs();_n=KA()});var Ga,bc=g(()=>{Ga=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i});function _0(r,t=null){let e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,s=0;i<e;i+=6,s+=4)t[i+0]=s+0,t[i+1]=s+1,t[i+2]=s+2,t[i+3]=s+0,t[i+4]=s+2,t[i+5]=s+3;return t}var b0=g(()=>{});function ni(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var Tc=g(()=>{});function T0(r,t){let e=0,i=0,s={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;let o=new ArrayBuffer(e*4),n=null,a=0;for(let l=0;l<r.length;l++){let h=t[l],d=r[l],f=ni(d);s[f]||(s[f]=new ZA[f](o)),n=s[f];for(let m=0;m<d.length;m++){let p=(m/h|0)*i+a,v=m%h;n[p+v]=d[m]}a+=h}return new Float32Array(o)}var ZA,A0=g(()=>{Tc();ZA={Float32Array,Uint32Array,Int32Array,Uint8Array}});function ai(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function bn(r){return!(r&r-1)&&!!r}function Tn(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}var E0=g(()=>{});function za(r,t,e){let i=r.length,s;if(t>=i||e===0)return;e=t+e>i?i-t:e;let o=i-e;for(s=t;s<o;++s)r[s]=r[s+e];r.length=o}var w0=g(()=>{});function S0(r){return r===0?0:r<0?-1:1}var C0=g(()=>{});function yr(){return++QA}var QA,M0=g(()=>{QA=0});var Ac,An,Ec=g(()=>{Ac=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Ac.EMPTY=new Ac(0,0,0,0);An=Ac});function P0(){let r;for(r in ie)ie[r].destroy();for(r in Me)Me[r].destroy()}function I0(){let r;for(r in ie)delete ie[r];for(r in Me)delete Me[r]}var En,ie,Me,R0=g(()=>{En={},ie=Object.create(null),Me=Object.create(null)});var Va,F0=g(()=>{Pt();Va=class{constructor(t,e,i){this._canvas=N.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||N.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}});function D0(r,t,e){for(let i=0,s=4*e*t;i<t;++i,s+=4)if(r[s+3]!==0)return!1;return!0}function N0(r,t,e,i,s){let o=4*t;for(let n=i,a=i*o+4*e;n<=s;++n,a+=o)if(r[a+3]!==0)return!1;return!0}function Ha(r){let{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");let s=i.getImageData(0,0,t,e).data,o=0,n=0,a=t-1,l=e-1;for(;n<e&&D0(s,t,n);)++n;if(n===e)return An.EMPTY;for(;D0(s,t,l);)--l;for(;N0(s,t,o,n,l);)++o;for(;N0(s,t,a,n,l);)--a;return++a,++l,new An(o,n,a,l)}var wc=g(()=>{Ec()});function B0(r){let t=Ha(r),{width:e,height:i}=t,s=null;if(!t.isEmpty()){let o=r.getContext("2d");if(o===null)throw new TypeError("Failed to get canvas 2D context");s=o.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:s}}var O0=g(()=>{wc()});function L0(r){let t=Ga.exec(r);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var k0=g(()=>{bc()});function Xa(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;let e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}var U0=g(()=>{});function wn(r,t=1){var i;let e=(i=N.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var G0=g(()=>{va();Pt()});var U={};Mu(U,{BaseTextureCache:()=>Me,BoundingBox:()=>An,CanvasRenderTarget:()=>Va,DATA_URI:()=>Ga,EventEmitter:()=>li.default,ProgramCache:()=>En,TextureCache:()=>ie,clearTextureCache:()=>I0,correctBlendMode:()=>p0,createIndicesForQuads:()=>_0,decomposeDataUri:()=>L0,deprecation:()=>ct,destroyTextureCache:()=>P0,detectVideoAlphaMode:()=>Hg,determineCrossOrigin:()=>Xa,earcut:()=>z0.default,getBufferType:()=>ni,getCanvasBoundingBox:()=>Ha,getResolutionOfUrl:()=>wn,hex2rgb:()=>u0,hex2string:()=>c0,interleaveTypedArrays:()=>T0,isMobile:()=>Ve,isPow2:()=>bn,isWebGLSupported:()=>La,log2:()=>Tn,nextPow2:()=>ai,path:()=>mc,premultiplyBlendMode:()=>_n,premultiplyRgba:()=>g0,premultiplyTint:()=>x0,premultiplyTintToRgba:()=>y0,removeItems:()=>za,rgb2hex:()=>f0,sayHello:()=>Wg,sign:()=>S0,skipHello:()=>jg,string2hex:()=>d0,trimCanvas:()=>B0,uid:()=>yr,url:()=>Gg});var li,z0,he=g(()=>{va();Pt();li=tn(np(),1),z0=tn(cp(),1);zg();Vg();Xg();$g();Yg();m0();v0();bc();b0();Tc();A0();E0();w0();C0();M0();Xs();Ec();R0();F0();wc();O0();k0();U0();G0()});var D,Sc,V0,G,St=g(()=>{D=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(D||{}),Sc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r=Ne(gt({},typeof r.extension!="object"?{type:r.extension}:r.extension),{ref:r})}if(typeof r=="object")r=gt({},r);else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},V0=(r,t)=>{var e;return(e=Sc(r).priority)!=null?e:t},G={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Sc).forEach(t=>{t.type.forEach(e=>{var i,s;return(s=(i=this._removeHandlers)[e])==null?void 0:s.call(i,t)})}),this},add(...r){return r.map(Sc).forEach(t=>{t.type.forEach(e=>{let i=this._addHandlers,s=this._queue;i[e]?i[e](t):(s[e]=s[e]||[],s[e].push(t))})}),this},handle(r,t,e){let i=this._addHandlers,s=this._removeHandlers;if(i[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,s[r]=e;let o=this._queue;return o[r]&&(o[r].forEach(n=>t(n)),delete o[r]),this},handleByMap(r,t){return this.handle(r,e=>{t[e.name]=e.ref},e=>{delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,o)=>V0(o,e)-V0(s,e)))},i=>{let s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})}}});var kr,Cc=g(()=>{kr=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}});function tE(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function Sn(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let e=t.createShader(t.FRAGMENT_SHADER);for(;;){let i=JA.replace(/%forloop%/gi,tE(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var JA,ja=g(()=>{JA=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`)});var Mc,Pc,Ic,Rc,Fc,Dc,Kt,Cn=g(()=>{pt();Mc=0,Pc=1,Ic=2,Rc=3,Fc=4,Dc=5,Kt=class r{constructor(){this.data=0,this.blendMode=ht.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Mc)}set blend(t){!!(this.data&1<<Mc)!==t&&(this.data^=1<<Mc)}get offsets(){return!!(this.data&1<<Pc)}set offsets(t){!!(this.data&1<<Pc)!==t&&(this.data^=1<<Pc)}get culling(){return!!(this.data&1<<Ic)}set culling(t){!!(this.data&1<<Ic)!==t&&(this.data^=1<<Ic)}get depthTest(){return!!(this.data&1<<Rc)}set depthTest(t){!!(this.data&1<<Rc)!==t&&(this.data^=1<<Rc)}get depthMask(){return!!(this.data&1<<Dc)}set depthMask(t){!!(this.data&1<<Dc)!==t&&(this.data^=1<<Dc)}get clockwiseFrontFace(){return!!(this.data&1<<Fc)}set clockwiseFrontFace(t){!!(this.data&1<<Fc)!==t&&(this.data^=1<<Fc)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ht.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){let t=new r;return t.depthTest=!1,t.blend=!0,t}};Kt.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}});function Bi(r,t){if(!r)return null;let e="";if(typeof r=="string"){let i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=$s.length-1;i>=0;--i){let s=$s[i];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var $s,Ys=g(()=>{$s=[]});var Ht,H0=g(()=>{Ht=class{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,s,o,n,a,l){if(arguments.length>8)throw new Error("max arguments reached");let{name:h,items:d}=this;this._aliasCount++;for(let f=0,m=d.length;f<m;f++)d[f][h](t,e,i,s,o,n,a,l);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){let e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(Ht.prototype,{dispatch:{value:Ht.prototype.emit},run:{value:Ht.prototype.emit}})});var Ur=g(()=>{H0()});var Le,Oi=g(()=>{Ur();Le=class{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ht("setRealSize"),this.onUpdate=new Ht("update"),this.onError=new Ht("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}});var Ze,Wa=g(()=>{pt();Oi();Ze=class extends Le{constructor(t,e){var o;let{width:i,height:s}=e||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=t,this.unpackAlignment=(o=e.unpackAlignment)!=null?o:4}upload(t,e,i){let s=t.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===kt.UNPACK);let o=e.realWidth,n=e.realHeight;return i.width===o&&i.height===n?s.texSubImage2D(e.target,0,0,0,o,n,e.format,i.type,this.data):(i.width=o,i.height=n,s.texImage2D(e.target,0,i.internalFormat,o,n,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}});var eE,Nc,ot,Gr=g(()=>{pt();Pt();he();Ys();Wa();Oi();eE={scaleMode:ge.NEAREST,alphaMode:kt.NPM},Nc=class qs extends li.default{constructor(t=null,e=null){super(),e=Object.assign({},qs.defaultOptions,e);let{alphaMode:i,mipmap:s,anisotropicLevel:o,scaleMode:n,width:a,height:l,wrapMode:h,format:d,type:f,target:m,resolution:p,resourceOptions:v}=e;t&&!(t instanceof Le)&&(t=Bi(t,v),t.internal=!0),this.resolution=p||N.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=o,this._wrapMode=h,this._scaleMode=n,this.format=d,this.type=f,this.target=m,this.alphaMode=i,this.uid=yr(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=bn(this.realWidth)&&bn(this.realHeight)}setResolution(t){let e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Me[this.cacheId],delete ie[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),qs.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=N.STRICT_TEXTURE_CACHE){let s=typeof t=="string",o=null;if(s)o=t;else{if(!t._pixiId){let a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${yr()}`}o=t._pixiId}let n=Me[o];if(s&&i&&!n)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return n||(n=new qs(t,e),n.cacheId=o,qs.addToCache(n,o)),n}static fromBuffer(t,e,i,s){t=t||new Float32Array(e*i*4);let o=new Ze(t,gt({width:e,height:i},s==null?void 0:s.resourceOptions)),n,a;return t instanceof Float32Array?(n=H.RGBA,a=J.FLOAT):t instanceof Int32Array?(n=H.RGBA_INTEGER,a=J.INT):t instanceof Uint32Array?(n=H.RGBA_INTEGER,a=J.UNSIGNED_INT):t instanceof Int16Array?(n=H.RGBA_INTEGER,a=J.SHORT):t instanceof Uint16Array?(n=H.RGBA_INTEGER,a=J.UNSIGNED_SHORT):t instanceof Int8Array?(n=H.RGBA,a=J.BYTE):(n=H.RGBA,a=J.UNSIGNED_BYTE),o.internal=!0,new qs(o,Object.assign({},eE,{type:a,format:n},s))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Me[e]&&Me[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Me[e]=t)}static removeFromCache(t){if(typeof t=="string"){let e=Me[t];if(e){let i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Me[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Me[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};Nc.defaultOptions={mipmap:qt.POW2,anisotropicLevel:0,scaleMode:ge.LINEAR,wrapMode:we.CLAMP,alphaMode:kt.UNPACK,target:pr.TEXTURE_2D,format:H.RGBA,type:J.UNSIGNED_BYTE},Nc._globalBatch=0;ot=Nc});var zr,Bc=g(()=>{pt();zr=class{constructor(){this.texArray=null,this.blend=0,this.type=Ee.TRIANGLES,this.start=0,this.size=0,this.data=null}}});var rE,Ct,Ks=g(()=>{pt();Ur();rE=0,Ct=class r{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=rE++,this.disposeRunner=new Ht("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Se.ELEMENT_ARRAY_BUFFER:Se.ARRAY_BUFFER}get index(){return this.type===Se.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)}}});var Li,Oc=g(()=>{pt();Li=class r{constructor(t,e=0,i=!1,s=J.FLOAT,o,n,a,l=1){this.buffer=t,this.size=e,this.normalized=i,this.type=s,this.stride=o,this.start=n,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,i,s,o){return new r(t,e,i,s,o)}}});function X0(r,t){let e=0,i=0,s={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;let o=new ArrayBuffer(e*4),n=null,a=0;for(let l=0;l<r.length;l++){let h=t[l],d=r[l],f=ni(d);s[f]||(s[f]=new iE[f](o)),n=s[f];for(let m=0;m<d.length;m++){let p=(m/h|0)*i+a,v=m%h;n[p+v]=d[m]}a+=h}return new Float32Array(o)}var iE,j0=g(()=>{he();iE={Float32Array,Uint32Array,Int32Array,Uint8Array}});var W0,sE,oE,ke,Mn=g(()=>{pt();Ur();he();Oc();Ks();j0();W0={5126:4,5123:2,5121:1},sE=0,oE={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},ke=class r{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=sE++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ht("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,s=!1,o,n,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ct||(e instanceof Array&&(e=new Float32Array(e)),e=new Ct(e));let h=t.split("|");if(h.length>1){for(let f=0;f<h.length;f++)this.addAttribute(h[f],e,i,s,o);return this}let d=this.buffers.indexOf(e);return d===-1&&(this.buffers.push(e),d=this.buffers.length-1),this.attributes[t]=new Li(d,i,s,o,n,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Ct||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ct(t)),t.type=Se.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;let t=[],e=[],i=new Ct,s;for(s in this.attributes){let o=this.attributes[s],n=this.buffers[o.buffer];t.push(n.data),e.push(o.size*W0[o.type]/4),o.buffer=0}for(i.data=X0(t,e),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(let t in this.attributes){let e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){let t=new r;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Ct(this.buffers[e].data.slice(0));for(let e in this.attributes){let i=this.attributes[e];t.attributes[e]=new Li(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Se.ELEMENT_ARRAY_BUFFER),t}static merge(t){let e=new r,i=[],s=[],o=[],n;for(let a=0;a<t.length;a++){n=t[a];for(let l=0;l<n.buffers.length;l++)s[l]=s[l]||0,s[l]+=n.buffers[l].data.length,o[l]=0}for(let a=0;a<n.buffers.length;a++)i[a]=new oE[ni(n.buffers[a].data)](s[a]),e.buffers[a]=new Ct(i[a]);for(let a=0;a<t.length;a++){n=t[a];for(let l=0;l<n.buffers.length;l++)i[l].set(n.buffers[l].data,o[l]),o[l]+=n.buffers[l].data.length}if(e.attributes=n.attributes,n.indexBuffer){e.indexBuffer=e.buffers[n.buffers.indexOf(n.indexBuffer)],e.indexBuffer.type=Se.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,d=0;for(let f=0;f<n.buffers.length;f++)if(n.buffers[f]!==n.indexBuffer){d=f;break}for(let f in n.attributes){let m=n.attributes[f];(m.buffer|0)===d&&(l+=m.size*W0[m.type]/4)}for(let f=0;f<t.length;f++){let m=t[f].indexBuffer.data;for(let p=0;p<m.length;p++)e.indexBuffer.data[p+h]+=a;a+=t[f].buffers[d].data.length/l,h+=m.length}}return e}}});var hi,Lc=g(()=>{pt();Ks();Mn();hi=class extends ke{constructor(t=!1){super(),this._buffer=new Ct(null,t,!1),this._indexBuffer=new Ct(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,J.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,J.FLOAT).addAttribute("aColor",this._buffer,4,!0,J.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,J.FLOAT).addIndex(this._indexBuffer)}}});var Vr,$a,Qe,It,ui=g(()=>{Vr=Math.PI*2,$a=180/Math.PI,Qe=Math.PI/180,It=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(It||{})});var it,Ya=g(()=>{it=class r{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new r(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}};it.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}});var qa,st,Ka=g(()=>{ui();Ya();qa=[new it,new it,new it,new it],st=class r{constructor(t=0,e=0,i=0,s=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s),this.type=It.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new r(0,0,0,0)}clone(){return new r(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){let I=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=I)return!1;let q=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>q}let i=this.left,s=this.right,o=this.top,n=this.bottom;if(s<=i||n<=o)return!1;let a=qa[0].set(t.left,t.top),l=qa[1].set(t.left,t.bottom),h=qa[2].set(t.right,t.top),d=qa[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;let f=Math.sign(e.a*e.d-e.b*e.c);if(f===0||(e.apply(a,a),e.apply(l,l),e.apply(h,h),e.apply(d,d),Math.max(a.x,l.x,h.x,d.x)<=i||Math.min(a.x,l.x,h.x,d.x)>=s||Math.max(a.y,l.y,h.y,d.y)<=o||Math.min(a.y,l.y,h.y,d.y)>=n))return!1;let m=f*(l.y-a.y),p=f*(a.x-l.x),v=m*i+p*o,b=m*s+p*o,E=m*i+p*n,S=m*s+p*n;if(Math.max(v,b,E,S)<=m*a.x+p*a.y||Math.min(v,b,E,S)>=m*d.x+p*d.y)return!1;let C=f*(a.y-h.y),w=f*(h.x-a.x),A=C*i+w*o,P=C*s+w*o,X=C*i+w*n,F=C*s+w*n;return!(Math.max(A,P,X,F)<=C*a.x+w*a.y||Math.min(A,P,X,F)>=C*d.x+w*d.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){let e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(o-s,0),this}ceil(t=1,e=.001){let i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){let e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=o-s,this}};st.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}});var ki,$0=g(()=>{ui();Ka();ki=class r{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=It.CIRC}clone(){return new r(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;let i=this.radius*this.radius,s=this.x-t,o=this.y-e;return s*=s,o*=o,s+o<=i}getBounds(){return new st(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};ki.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}});var Ui,Y0=g(()=>{ui();Ka();Ui=class r{constructor(t=0,e=0,i=0,s=0){this.x=t,this.y=e,this.width=i,this.height=s,this.type=It.ELIP}clone(){return new r(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,s=(e-this.y)/this.height;return i*=i,s*=s,i+s<=1}getBounds(){return new st(this.x-this.width,this.y-this.height,this.width,this.height)}};Ui.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}});var nr,q0=g(()=>{ui();nr=class r{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){let i=[];for(let s=0,o=e.length;s<o;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.type=It.POLY,this.closeStroke=!0}clone(){let t=this.points.slice(),e=new r(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1,s=this.points.length/2;for(let o=0,n=s-1;o<s;n=o++){let a=this.points[o*2],l=this.points[o*2+1],h=this.points[n*2],d=this.points[n*2+1];l>e!=d>e&&t<(h-a)*((e-l)/(d-l))+a&&(i=!i)}return i}};nr.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,t)=>`${r}, ${t}`,"")}]`}});var Gi,K0=g(()=>{ui();Gi=class r{constructor(t=0,e=0,i=0,s=0,o=20){this.x=t,this.y=e,this.width=i,this.height=s,this.radius=o,this.type=It.RREC}clone(){return new r(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),o=e-(this.y+i),n=i*i;if(s*s+o*o<=n||(s=t-(this.x+this.width-i),s*s+o*o<=n)||(o=e-(this.y+this.height-i),s*s+o*o<=n)||(s=t-(this.x+i),s*s+o*o<=n))return!0}return!1}};Gi.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}});var xt,Za=g(()=>{ui();Ya();xt=class r{constructor(t=1,e=0,i=0,s=1,o=0,n=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=o,this.ty=n}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,o,n){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=o,this.ty=n,this}toArray(t,e){this.array||(this.array=new Float32Array(9));let i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new it;let i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new it;let i=1/(this.a*this.d+this.c*-this.b),s=t.x,o=t.y;return e.x=this.d*i*s+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*o+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){let e=Math.cos(t),i=Math.sin(t),s=this.a,o=this.c,n=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=o*e-this.d*i,this.d=o*i+this.d*e,this.tx=n*e-this.ty*i,this.ty=n*i+this.ty*e,this}append(t){let e=this.a,i=this.b,s=this.c,o=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*o,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*o,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*o+this.ty,this}setTransform(t,e,i,s,o,n,a,l,h){return this.a=Math.cos(a+h)*o,this.b=Math.sin(a+h)*o,this.c=-Math.sin(a-l)*n,this.d=Math.cos(a-l)*n,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){let e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){let i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){let e=this.a,i=this.b,s=this.c,o=this.d,n=t.pivot,a=-Math.atan2(-s,o),l=Math.atan2(i,e),h=Math.abs(a+l);return h<1e-5||Math.abs(Vr-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+o*o),t.position.x=this.tx+(n.x*e+n.y*s),t.position.y=this.ty+(n.x*i+n.y*o),t}invert(){let t=this.a,e=this.b,i=this.c,s=this.d,o=this.tx,n=t*s-e*i;return this.a=s/n,this.b=-e/n,this.c=-i/n,this.d=t/n,this.tx=(i*this.ty-s*o)/n,this.ty=-(t*this.ty-e*o)/n,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new r}static get TEMP_MATRIX(){return new r}};xt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}});function nE(){for(let r=0;r<16;r++){let t=[];kc.push(t);for(let e=0;e<16;e++){let i=Qa(zi[r]*zi[e]+Hi[r]*Vi[e]),s=Qa(Vi[r]*zi[e]+Xi[r]*Vi[e]),o=Qa(zi[r]*Hi[e]+Hi[r]*Xi[e]),n=Qa(Vi[r]*Hi[e]+Xi[r]*Xi[e]);for(let a=0;a<16;a++)if(zi[a]===i&&Vi[a]===s&&Hi[a]===o&&Xi[a]===n){t.push(a);break}}}for(let r=0;r<16;r++){let t=new xt;t.set(zi[r],Vi[r],Hi[r],Xi[r],0,0),Z0.push(t)}}var zi,Vi,Hi,Xi,kc,Z0,Qa,Dt,Q0=g(()=>{Za();zi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Vi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Hi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Xi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],kc=[],Z0=[],Qa=Math.sign;nE();Dt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>zi[r],uY:r=>Vi[r],vX:r=>Hi[r],vY:r=>Xi[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>kc[r][t],sub:(r,t)=>kc[r][Dt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Dt.S:Dt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Dt.E:Dt.W:t>0?r>0?Dt.SE:Dt.SW:r>0?Dt.NE:Dt.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{let s=Z0[Dt.inv(t)];s.tx=e,s.ty=i,r.append(s)}}});var ue,Uc=g(()=>{ue=class r{constructor(t,e,i=0,s=0){this._x=i,this._y=s,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new r(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}};ue.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`}});var Gc,Hr,J0=g(()=>{Za();Uc();Gc=class{constructor(){this.worldTransform=new xt,this.localTransform=new xt,this.position=new ue(this.onChange,this,0,0),this.scale=new ue(this.onChange,this,1,1),this.pivot=new ue(this.onChange,this,0,0),this.skew=new ue(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){let r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){let t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){let e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};Gc.IDENTITY=new Gc;Hr=Gc;Hr.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}});var be=g(()=>{$0();Y0();q0();Ka();K0();Q0();Za();Uc();Ya();J0();ui()});var tx,ex=g(()=>{tx=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`});var rx,ix=g(()=>{rx=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`});function Ja(r,t,e){let i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}var zc=g(()=>{});function Vc(r){let t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Pn(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Vc(2*t);case"bvec3":return Vc(3*t);case"bvec4":return Vc(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var tl=g(()=>{});var ar,In=g(()=>{ar=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,t)=>r.type==="vec3"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}]});function Hc(r,t){var i;let e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(let s in r.uniforms){let o=t[s];if(!o){((i=r.uniforms[s])==null?void 0:i.group)===!0&&(r.uniforms[s].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}let n=r.uniforms[s],a=!1;for(let l=0;l<ar.length;l++)if(ar[l].test(o,n)){e.push(ar[l].code(s,n)),a=!0;break}if(!a){let l=(o.size===1&&!o.isArray?aE:lE)[o.type].replace("location",`ud["${s}"].location`);e.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var aE,lE,Xc=g(()=>{In();aE={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},lE={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"}});function Rn(){if(Zs===sx||Zs!=null&&Zs.isContextLost()){let r=N.ADAPTER.createCanvas(),t;N.PREFER_ENV>=Be.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Zs=t}return Zs}var sx,Zs,el=g(()=>{pt();Pt();sx={},Zs=sx});function jc(){if(!rl){rl=xe.MEDIUM;let r=Rn();if(r&&r.getShaderPrecisionFormat){let t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);t&&(rl=t.precision?xe.HIGH:xe.MEDIUM)}}return rl}var rl,Wc=g(()=>{pt();el()});function ox(r,t){let e=r.getShaderSource(t).split(`
`).map((h,d)=>`${d}: ${h}`),i=r.getShaderInfoLog(t),s=i.split(`
`),o={},n=s.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!o[h]?(o[h]=!0,!0):!1),a=[""];n.forEach(h=>{e[h-1]=`%c${e[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let l=e.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function $c(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||ox(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||ox(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}var Yc=g(()=>{});function Fn(r){return hE[r]}var hE,il=g(()=>{hE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1}});function Dn(r,t){if(!sl){let e=Object.keys(nx);sl={};for(let i=0;i<e.length;++i){let s=e[i];sl[r[s]]=nx[s]}}return sl[t]}var sl,nx,ol=g(()=>{sl=null,nx={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"}});function nl(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===xe.HIGH&&e!==xe.HIGH&&(i=xe.MEDIUM),`precision ${i} float;
${r}`}else if(e!==xe.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var qc=g(()=>{pt()});function Bn(){if(typeof Nn=="boolean")return Nn;try{Nn=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch(r){Nn=!1}return Nn}var Nn,al=g(()=>{});var ll=g(()=>{ja();zc();tl();Xc();Wc();el();Yc();il();ol();qc();In();al()});var uE,hl,Kc,ce,Js=g(()=>{pt();he();ex();ix();ll();qc();Wc();uE=0,hl={},Kc=class Qs{constructor(t,e,i="pixi-shader",s={}){this.extra={},this.id=uE++,this.vertexSrc=t||Qs.defaultVertexSrc,this.fragmentSrc=e||Qs.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),hl[i]?(hl[i]++,i+=`-${hl[i]}`):hl[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=nl(this.vertexSrc,Qs.defaultVertexPrecision,xe.HIGH),this.fragmentSrc=nl(this.fragmentSrc,Qs.defaultFragmentPrecision,jc())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return rx}static get defaultFragmentSrc(){return tx}static from(t,e,i){let s=t+e,o=En[s];return o||(En[s]=o=new Qs(t,e,i)),o}};Kc.defaultVertexPrecision=xe.HIGH,Kc.defaultFragmentPrecision=Ve.apple.device?xe.HIGH:xe.MEDIUM;ce=Kc});var cE,Te,to=g(()=>{pt();Ks();cE=0,Te=class r{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=cE++,this.static=!!e,this.ubo=!!i,t instanceof Ct?(this.buffer=t,this.buffer.type=Se.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ct(new Float32Array(1)),this.buffer.type=Se.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new r(t,e,i)}static uboFrom(t,e){return new r(t,e!=null?e:!0,!0)}}});var se,ul=g(()=>{Ur();Js();to();se=class r{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Te?this.uniformGroup=e:this.uniformGroup=new Te(e):this.uniformGroup=new Te({}),this.disposeRunner=new Ht("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(let i in e.uniforms){let s=e.uniforms[i];if(s.group===!0&&this.checkUniformExists(t,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){let s=ce.from(t,e);return new r(s,i)}}});var eo,Zc=g(()=>{be();Js();ul();to();eo=class{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){let i=new Int32Array(t);for(let o=0;o<t;o++)i[o]=o;this.defaultGroupCache[t]=Te.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${t}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ce(this.vertexSrc,s)}let e={tint:new Float32Array([1,1,1,1]),translationMatrix:new xt,default:this.defaultGroupCache[t]};return new se(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}});var Xr,Qc=g(()=>{Xr=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}});function ax(){return!Ve.apple.device}var lx=g(()=>{Pt()});function hx(r){let t=!0,e=N.ADAPTER.getNavigator();if(Ve.tablet||Ve.phone){if(Ve.apple.device){let i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(Ve.android.device){let i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}var ux=g(()=>{Pt()});var Je,cl=g(()=>{Je=class{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}});var cx,dx=g(()=>{cx=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`});var fx,mx=g(()=>{fx=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`});var On,vr,Jc=g(()=>{oi();pt();St();Pt();he();Cc();ja();Cn();Gr();Bc();Lc();Zc();Qc();lx();ux();cl();dx();mx();On=class lr extends Je{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=hi,this.vertexSize=6,this.state=Kt.for2d(),this.size=lr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){var t;return this._defaultMaxTextures=(t=this._defaultMaxTextures)!=null?t:hx(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){var t;return this._canUploadSameBuffer=(t=this._canUploadSameBuffer)!=null?t:ax(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return ct("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return fx}static get defaultFragmentTemplate(){return cx}setShaderGenerator({vertex:t=lr.defaultVertexSrc,fragment:e=lr.defaultFragmentTemplate}={}){this.shaderGenerator=new eo(t,e)}contextChange(){let t=this.renderer.gl;N.PREFER_ENV===Be.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),lr.defaultMaxTextures),this.maxTextures=Sn(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){let{_drawCallPool:t,_textureArrayPool:e}=lr,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new zr);for(;e.length<s;)e.push(new Xr);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){let{_bufferedTextures:t,maxTextures:e}=this,i=lr._textureArrayPool,s=this.renderer.batch,o=this._tempBoundTextures,n=this.renderer.textureGC.count,a=++ot._globalBatch,l=0,h=i[0],d=0;s.copyBoundTextures(o,e);for(let f=0;f<this._bufferSize;++f){let m=t[f];t[f]=null,m._batchEnabled!==a&&(h.count>=e&&(s.boundArray(h,o,a,e),this.buildDrawCalls(h,d,f),d=f,h=i[++l],++a),m._batchEnabled=a,m.touched=n,h.elements[h.count++]=m)}h.count>0&&(s.boundArray(h,o,a,e),this.buildDrawCalls(h,d,this._bufferSize),++l,++a);for(let f=0;f<o.length;f++)o[f]=null;ot._globalBatch=a}buildDrawCalls(t,e,i){let{_bufferedElements:s,_attributeBuffer:o,_indexBuffer:n,vertexSize:a}=this,l=lr._drawCallPool,h=this._dcIndex,d=this._aIndex,f=this._iIndex,m=l[h];m.start=this._iIndex,m.texArray=t;for(let p=e;p<i;++p){let v=s[p],b=v._texture.baseTexture,E=_n[b.alphaMode?1:0][v.blendMode];s[p]=null,e<p&&m.blend!==E&&(m.size=f-m.start,e=p,m=l[++h],m.texArray=t,m.start=f),this.packInterleavedGeometry(v,o,n,d,f),d+=v.vertexData.length/2*a,f+=v.indices.length,m.blend=E}e<i&&(m.size=f-m.start,++h),this._dcIndex=h,this._aIndex=d,this._iIndex=f}bindAndClearTexArray(t){let e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){let{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;lr.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){let t=this._dcIndex,{gl:e,state:i}=this.renderer,s=lr._drawCallPool,o=null;for(let n=0;n<t;n++){let{texArray:a,type:l,size:h,start:d,blend:f}=s[n];o!==a&&(o=a,this.bindAndClearTexArray(a)),this.state.blendMode=f,i.set(this.state),e.drawElements(l,h,e.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),lr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){let e=ai(Math.ceil(t/8)),i=Tn(e),s=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new kr(s*this.vertexSize*4)),o}getIndexBuffer(t){let e=ai(Math.ceil(t/12)),i=Tn(e),s=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(s)),o}packInterleavedGeometry(t,e,i,s,o){let{uint32View:n,float32View:a}=e,l=s/this.vertexSize,h=t.uvs,d=t.indices,f=t.vertexData,m=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),v=dt.shared.setValue(t._tintRGB).toPremultiplied(p,t._texture.baseTexture.alphaMode>0);for(let b=0;b<f.length;b+=2)a[s++]=f[b],a[s++]=f[b+1],a[s++]=h[b],a[s++]=h[b+1],n[s++]=v,a[s++]=m;for(let b=0;b<d.length;b++)i[o++]=l+d[b]}};On.defaultBatchSize=4096,On.extension={name:"batch",type:D.RendererPlugin},On._drawCallPool=[],On._textureArrayPool=[];vr=On;G.add(vr)});var px,gx=g(()=>{px=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`});var xx,yx=g(()=>{xx=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`});var td,$,kn=g(()=>{pt();Js();ul();Cn();gx();yx();td=class Ln extends se{constructor(t,e,i){let s=ce.from(t||Ln.defaultVertexSrc,e||Ln.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=Ln.defaultResolution,this.multisample=Ln.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Kt}apply(t,e,i,s,o){t.applyFilter(this,e,i,s)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return xx}static get defaultFragmentSrc(){return px}};td.defaultResolution=1,td.defaultMultisample=Et.NONE;$=td});var _r,dl=g(()=>{oi();St();_r=class{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new dt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;let{backgroundColor:e,background:i,backgroundAlpha:s}=t,o=i!=null?i:e;o!==void 0&&(this.color=o),this.alpha=s}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}};_r.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},_r.extension={type:[D.RendererSystem,D.CanvasRendererSystem],name:"background"};G.add(_r)});var ji,ed=g(()=>{St();cl();ji=class{constructor(t){this.renderer=t,this.emptyRenderer=new Je(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){let{boundTextures:i}=this.renderer.texture;for(let s=e-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)}boundArray(t,e,i,s){let{elements:o,ids:n,count:a}=t,l=0;for(let h=0;h<a;h++){let d=o[h],f=d._batchLocation;if(f>=0&&f<s&&e[f]===d){n[h]=f;continue}for(;l<s;){let m=e[l];if(m&&m._batchEnabled===i&&m._batchLocation===l){l++;continue}n[h]=l,d._batchLocation=l,e[l]=d;break}}}destroy(){this.renderer=null}};ji.extension={type:D.RendererSystem,name:"batch"};G.add(ji)});var vx,br,fl=g(()=>{pt();St();Pt();vx=0,br=class{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=vx++}init(t){if(t.context)this.initFromContext(t.context);else{let e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=vx++,this.renderer.runners.contextChange.emit(t);let e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){let e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(N.PREFER_ENV>=Be.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){let{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){let t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){let e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};br.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},br.extension={type:D.RendererSystem,name:"context"};G.add(br)});var jr,ml=g(()=>{pt();Ur();Gr();jr=class{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ht("disposeFramebuffer"),this.multisample=Et.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new ot(null,{scaleMode:ge.NEAREST,resolution:1,mipmap:qt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new ot(null,{scaleMode:ge.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:qt.OFF,format:H.DEPTH_COMPONENT,type:J.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){let s=this.colorTextures[i],o=s.resolution;s.setSize(t/o,e/o)}if(this.depthTexture){let i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}});var ci,pl=g(()=>{oi();pt();ml();Gr();ci=class extends ot{constructor(t={}){var e,i,s;if(typeof t=="number"){let o=arguments[0],n=arguments[1],a=arguments[2],l=arguments[3];t={width:o,height:n,scaleMode:a,resolution:l}}t.width=(e=t.width)!=null?e:100,t.height=(i=t.height)!=null?i:100,(s=t.multisample)!=null||(t.multisample=Et.NONE),super(null,t),this.mipmap=qt.OFF,this.valid=!0,this._clear=new dt([0,0,0,0]),this.framebuffer=new jr(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}});var oe,di=g(()=>{pt();he();Oi();oe=class extends Le{constructor(t){let e=t,i=e.naturalWidth||e.videoWidth||e.width,s=e.naturalHeight||e.videoHeight||e.height;super(i,s),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=Xa(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,s){let o=t.gl,n=e.realWidth,a=e.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===kt.UNPACK),!this.noSubImage&&e.target===o.TEXTURE_2D&&i.width===n&&i.height===a?o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,i.type,s):(i.width=n,i.height=a,o.texImage2D(e.target,0,i.internalFormat,e.format,i.type,s)),!0}update(){if(this.destroyed)return;let t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}});var fi,gl=g(()=>{pt();Pt();di();fi=class extends oe{constructor(t,e){var i;if(e=e||{},typeof t=="string"){let s=new Image;oe.crossOrigin(s,t,e.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=((i=e.createBitmap)!=null?i:N.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{let s=this.source;this.url=s.src;let o=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};s.complete&&s.src?o():(s.onload=o,s.onerror=n=>{i(n),this.onError.emit(n)})}),this._load)}process(){let t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);let e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>e(s,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===kt.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let s=!0,o=e._glTextures;for(let n in o){let a=o[n];if(a!==i&&a.dirtyId!==e.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}});var mi,rd=g(()=>{be();mi=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){let s=e.width,o=e.height;if(i){let n=t.width/2/s,a=t.height/2/o,l=t.x/s+n,h=t.y/o+a;i=Dt.add(i,Dt.NW),this.x0=l+n*Dt.uX(i),this.y0=h+a*Dt.uY(i),i=Dt.add(i,2),this.x1=l+n*Dt.uX(i),this.y1=h+a*Dt.uY(i),i=Dt.add(i,2),this.x2=l+n*Dt.uX(i),this.y2=h+a*Dt.uY(i),i=Dt.add(i,2),this.x3=l+n*Dt.uX(i),this.y3=h+a*Dt.uY(i)}else this.x0=t.x/s,this.y0=t.y/o,this.x1=(t.x+t.width)/s,this.y1=t.y/o,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/o,this.x3=t.x/s,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}};mi.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}});function xl(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}var _x,tt,id=g(()=>{be();Pt();he();Gr();gl();rd();_x=new mi;tt=class r extends li.default{constructor(t,e,i,s,o,n,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new st(0,0,1,1)),t instanceof r&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=_x,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=n?new it(n.x,n.y):new it(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){let{resource:e}=this.baseTexture;e!=null&&e.url&&ie[e.url]&&r.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;let t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new r(this.baseTexture,!this.noFrame&&t,e,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===_x&&(this._uvs=new mi),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=N.STRICT_TEXTURE_CACHE){let s=typeof t=="string",o=null;if(s)o=t;else if(t instanceof ot){if(!t.cacheId){let a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${yr()}`,ot.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){let a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${yr()}`}o=t._pixiId}let n=ie[o];if(s&&i&&!n)throw new Error(`The cacheId "${o}" does not exist in TextureCache.`);return!n&&!(t instanceof ot)?(e.resolution||(e.resolution=wn(t)),n=new r(new ot(t,e)),n.baseTexture.cacheId=o,ot.addToCache(n.baseTexture,o),r.addToCache(n,o)):!n&&t instanceof ot&&(n=new r(t),r.addToCache(n,o)),n}static fromURL(t,e){let i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),s=r.from(t,Object.assign({resourceOptions:i},e),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(()=>Promise.resolve(s))}static fromBuffer(t,e,i,s){return new r(ot.fromBuffer(t,e,i,s))}static fromLoader(t,e,i,s){let o=new ot(t,Object.assign({scaleMode:ot.defaultOptions.scaleMode,resolution:wn(e)},s)),{resource:n}=o;n instanceof fi&&(n.url=e);let a=new r(o);return i||(i=e),ot.addToCache(a.baseTexture,i),r.addToCache(a,i),i!==e&&(ot.addToCache(a.baseTexture,e),r.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),ie[e]&&ie[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),ie[e]=t)}static removeFromCache(t){if(typeof t=="string"){let e=ie[t];if(e){let i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ie[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)ie[t.textureCacheIds[e]]===t&&delete ie[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;let{x:e,y:i,width:s,height:o}=t,n=e+s>this.baseTexture.width,a=i+o>this.baseTexture.height;if(n||a){let l=n&&a?"and":"or",h=`X: ${e} + ${s} = ${e+s} > ${this.baseTexture.width}`,d=`Y: ${i} + ${o} = ${i+o} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${d}`)}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return r._EMPTY||(r._EMPTY=new r(new ot),xl(r._EMPTY),xl(r._EMPTY.baseTexture)),r._EMPTY}static get WHITE(){if(!r._WHITE){let t=N.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),r._WHITE=new r(ot.from(t)),xl(r._WHITE),xl(r._WHITE.baseTexture)}return r._WHITE}}});var He,yl=g(()=>{id();pl();He=class r extends tt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){let s=this.baseTexture.resolution,o=Math.round(t*s)/s,n=Math.round(e*s)/s;this.valid=o>0&&n>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=n,i&&this.baseTexture.resize(o,n),this.updateUvs()}setResolution(t){let{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new r(new ci(t))}}});var Wi,sd=g(()=>{pt();he();pl();yl();Wi=class{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=Et.NONE){let s=new ci(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new He(s)}getOptimalTexture(t,e,i=1,s=Et.NONE){let o;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ai(t),e=ai(e),o=((t&65535)<<16|e&65535)>>>0,s>1&&(o+=s*4294967296)):o=s>1?-s:-1,this.texturePool[o]||(this.texturePool[o]=[]);let n=this.texturePool[o].pop();return n||(n=this.createTexture(t,e,s)),n.filterPoolKey=o,n.setResolution(i),n}getFilterTexture(t,e,i){let s=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||Et.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){let e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(let e in this.texturePool){let i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(let e in this.texturePool){if(!(Number(e)<0))continue;let i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}};Wi.SCREEN_KEY=-1});var ro,od=g(()=>{Mn();ro=class extends ke{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}});var pi,nd=g(()=>{Ks();Mn();pi=class extends ke{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Ct(this.vertices),this.uvBuffer=new Ct(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+e.width/t.width,this.uvs[3]=s,this.uvs[4]=i+e.width/t.width,this.uvs[5]=s+e.height/t.height,this.uvs[6]=i,this.uvs[7]=s+e.height/t.height,i=e.x,s=e.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+e.width,this.vertices[3]=s,this.vertices[4]=i+e.width,this.vertices[5]=s+e.height,this.vertices[6]=i,this.vertices[7]=s+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}});var io,ad=g(()=>{pt();be();io=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Et.NONE,this.sourceFrame=new st,this.destinationFrame=new st,this.bindingSourceFrame=new st,this.bindingDestinationFrame=new st,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}});var vl,ld,$i,hd=g(()=>{pt();St();be();sd();to();od();nd();ad();vl=[new it,new it,new it,new it],ld=new xt,$i=class{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Wi,this.statePool=[],this.quad=new ro,this.quadUv=new pi,this.tempRect=new st,this.activeState={},this.globalUniforms=new Te({outputFrame:new st,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){var E,S,C,w;let i=this.renderer,s=this.defaultFilterStack,o=this.statePool.pop()||new io,n=i.renderTexture,a,l;if(n.current){let A=n.current;a=A.resolution,l=A.multisample}else a=i.resolution,l=i.multisample;let h=e[0].resolution||a,d=(E=e[0].multisample)!=null?E:l,f=e[0].padding,m=e[0].autoFit,p=(S=e[0].legacy)!=null?S:!0;for(let A=1;A<e.length;A++){let P=e[A];h=Math.min(h,P.resolution||a),d=Math.min(d,(C=P.multisample)!=null?C:l),f=this.useMaxPadding?Math.max(f,P.padding):f+P.padding,m=m&&P.autoFit,p=p||((w=P.legacy)!=null?w:!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=n.current),s.push(o),o.resolution=h,o.multisample=d,o.legacy=p,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(f);let v=this.tempRect.copyFrom(n.sourceFrame);i.projection.transform&&this.transformAABB(ld.copyFrom(i.projection.transform).invert(),v),m?(o.sourceFrame.fit(v),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(v)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,n.current?n.current.resolution:i.resolution,n.sourceFrame,n.destinationFrame,i.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,h,d),o.filters=e,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;let b=this.tempRect;b.x=0,b.y=0,b.width=o.sourceFrame.width,b.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(n.sourceFrame),o.bindingDestinationFrame.copyFrom(n.destinationFrame),o.transform=i.projection.transform,i.projection.transform=null,n.bind(o.renderTexture,o.sourceFrame,b),i.framebuffer.clear(0,0,0,0)}pop(){let t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;let s=this.globalUniforms.uniforms;s.outputFrame=e.sourceFrame,s.resolution=e.resolution;let o=s.inputSize,n=s.inputPixel,a=s.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],n[0]=Math.round(o[0]*e.resolution),n[1]=Math.round(o[1]*e.resolution),n[2]=1/n[0],n[3]=1/n[1],a[0]=.5*n[2],a[1]=.5*n[3],a[2]=e.sourceFrame.width*o[2]-.5*n[2],a[3]=e.sourceFrame.height*o[3]-.5*n[3],e.legacy){let h=s.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();let l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,l.renderTexture,Oe.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let h=e.renderTexture,d=this.getOptimalFilterTexture(h.width,h.height,e.resolution);d.filterFrame=h.filterFrame;let f=0;for(f=0;f<i.length-1;++f){f===1&&e.multisample>1&&(d=this.getOptimalFilterTexture(h.width,h.height,e.resolution),d.filterFrame=h.filterFrame),i[f].apply(this,h,d,Oe.CLEAR,e);let m=h;h=d,d=m}i[f].apply(this,h,l.renderTexture,Oe.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(d)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=Oe.CLEAR){let{renderTexture:i,state:s}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){let n=this.tempRect;n.x=0,n.y=0,n.width=t.filterFrame.width,n.height=t.filterFrame.height,i.bind(t,t.filterFrame,n)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);let o=s.stateId&1||this.forceClear;(e===Oe.CLEAR||e===Oe.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,s){let o=this.renderer;o.state.set(t.state),this.bindAndClear(i,s),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Ee.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Ee.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){let{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:o}=e._texture,n=t.set(s.width,0,0,s.height,i.x,i.y),a=e.worldTransform.copyTo(xt.TEMP_MATRIX);return a.invert(),n.prepend(a),n.scale(1/o.width,1/o.height),n.translate(e.anchor.x,e.anchor.y),n}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,s=Et.NONE){return this.texturePool.getOptimalTexture(t,e,i,s)}getFilterTexture(t,e,i){if(typeof t=="number"){let o=t;t=e,e=o}t=t||this.activeState.renderTexture;let s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||Et.NONE);return s.filterFrame=t.filterFrame,s}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){let i=vl[0],s=vl[1],o=vl[2],n=vl[3];i.set(e.left,e.top),s.set(e.left,e.bottom),o.set(e.right,e.top),n.set(e.right,e.bottom),t.apply(i,i),t.apply(s,s),t.apply(o,o),t.apply(n,n);let a=Math.min(i.x,s.x,o.x,n.x),l=Math.min(i.y,s.y,o.y,n.y),h=Math.max(i.x,s.x,o.x,n.x),d=Math.max(i.y,s.y,o.y,n.y);e.x=a,e.y=l,e.width=h-a,e.height=d-l}roundFrame(t,e,i,s,o){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(o){let{a:n,b:a,c:l,d:h}=o;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(h)>1e-4))return}o=o?ld.copyFrom(o):ld.identity(),o.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(o,t),t.ceil(e),this.transformAABB(o.invert(),t)}}};$i.extension={type:D.RendererSystem,name:"filter"};G.add($i)});var so,ud=g(()=>{pt();so=class{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Et.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}});var dE,Yi,cd=g(()=>{pt();St();be();Pt();ml();ud();dE=new st,Yi=class{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new jr(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);let t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new st,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;N.PREFER_ENV===Be.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=s=>e.drawBuffersWEBGL(s):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){let{gl:s}=this;if(t){let o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,s.bindFramebuffer(s.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=i),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let n=0;n<t.colorTextures.length;n++){let a=t.colorTextures[n];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){let n=e.width>>i,a=e.height>>i,l=n/e.width;this.setViewport(e.x*l,e.y*l,n,a)}else{let n=t.width>>i,a=t.height>>i;this.setViewport(0,0,n,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,s){let o=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),s=Math.round(s),(o.width!==i||o.height!==s||o.x!==t||o.y!==e)&&(o.x=t,o.y=e,o.width=i,o.height=s,this.gl.viewport(t,e,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,s,o=en.COLOR|en.DEPTH){let{gl:n}=this;n.clearColor(t,e,i,s),n.clear(o)}initFramebuffer(t){let{gl:e}=this,i=new so(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){let{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let n;this.renderer.context.webGLVersion===1?n=e.DEPTH_STENCIL:t.depth&&t.stencil?n=e.DEPTH24_STENCIL8:t.depth?n=e.DEPTH_COMPONENT24:n=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,n,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,n,t.width,t.height)}let s=t.colorTextures,o=s.length;e.drawBuffers||(o=Math.min(o,1));for(let n=0;n<o;n++){let a=s[n],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),n===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){let{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures,n=o.length;i.drawBuffers||(n=Math.min(n,1)),s.multisample>1&&this.canMultisampleFramebuffer(t)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));let a=[];for(let l=0;l<n;l++){let h=o[l],d=h.parentTextureArray||h;this.renderer.texture.bind(d,0),l===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,h.target,d._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){let l=t.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||i.createRenderbuffer();let l,h;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,h=i.DEPTH_STENCIL):t.depth&&t.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,h=i.DEPTH24_STENCIL8):t.depth?(l=i.DEPTH_ATTACHMENT,h=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,h=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,h,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,h,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,s.stencil)}else s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){let{msaaSamples:e}=this,i=Et.NONE;if(t<=1||e===null)return i;for(let s=0;s<e.length;s++)if(e[s]<=t){i=e[s];break}return i===1&&(i=Et.NONE),i}blit(t,e,i){let{current:s,renderer:o,gl:n,CONTEXT_UID:a}=this;if(o.context.webGLVersion!==2||!s)return;let l=s.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;let d=s.colorTextures[0];if(!d)return;l.blitFramebuffer||(l.blitFramebuffer=new jr(s.width,s.height),l.blitFramebuffer.addColorTexture(0,d)),t=l.blitFramebuffer,t.colorTextures[0]!==d&&(t.colorTextures[0]=d,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}e||(e=dE,e.width=s.width,e.height=s.height),i||(i=e);let h=e.width===i.width&&e.height===i.height;this.bind(t),n.bindFramebuffer(n.READ_FRAMEBUFFER,l.framebuffer),n.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,n.COLOR_BUFFER_BIT,h?n.NEAREST:n.LINEAR),n.bindFramebuffer(n.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){let i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];let o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),e||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){let e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){let t=this.current;if(!t)return;let e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;let i=t.width,s=t.height,o=this.gl,n=e.stencil=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,n);let a,l;this.renderer.context.webGLVersion===1?(a=o.DEPTH_STENCIL_ATTACHMENT,l=o.DEPTH_STENCIL):t.depth?(a=o.DEPTH_STENCIL_ATTACHMENT,l=o.DEPTH24_STENCIL8):(a=o.STENCIL_ATTACHMENT,l=o.STENCIL_INDEX8),e.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,e.multisample,l,i,s):o.renderbufferStorage(o.RENDERBUFFER,l,i,s),o.framebufferRenderbuffer(o.FRAMEBUFFER,a,o.RENDERBUFFER,n)}reset(){this.current=this.unknownFramebuffer,this.viewport=new st}destroy(){this.renderer=null}};Yi.extension={type:D.RendererSystem,name:"framebuffer"};G.add(Yi)});var dd,qi,fd=g(()=>{pt();St();Pt();dd={5126:4,5123:2,5121:1},qi=class{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);let t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;N.PREFER_ENV===Be.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=s=>i.bindVertexArrayOES(s),t.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){let i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(s,o)=>i.vertexAttribDivisorANGLE(s,o),t.drawElementsInstanced=(s,o,n,a,l)=>i.drawElementsInstancedANGLE(s,o,n,a,l),t.drawArraysInstanced=(s,o,n,a)=>i.drawArraysInstancedANGLE(s,o,n,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;let{gl:i}=this,s=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},o=!0);let n=s[e.program.id]||this.initGeometryVao(t,e,o);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){let s=t.buffers[i];e.update(s)}}checkCompatibility(t,e){let i=t.attributes,s=e.attributeData;for(let o in s)if(!i[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(t,e){let i=t.attributes,s=e.attributeData,o=["g",t.id];for(let n in i)s[n]&&o.push(n,s[n].location);return o.join("-")}initGeometryVao(t,e,i=!0){let s=this.gl,o=this.CONTEXT_UID,n=this.renderer.buffer,a=e.program;a.glPrograms[o]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);let l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID],d=h[l];if(d)return h[a.id]=d,d;let f=t.buffers,m=t.attributes,p={},v={};for(let b in f)p[b]=0,v[b]=0;for(let b in m)!m[b].size&&a.attributeData[b]?m[b].size=a.attributeData[b].size:m[b].size||console.warn(`PIXI Geometry attribute '${b}' size cannot be determined (likely the bound shader does not have the attribute)`),p[m[b].buffer]+=m[b].size*dd[m[b].type];for(let b in m){let E=m[b],S=E.size;E.stride===void 0&&(p[E.buffer]===S*dd[E.type]?E.stride=0:E.stride=p[E.buffer]),E.start===void 0&&(E.start=v[E.buffer],v[E.buffer]+=S*dd[E.type])}d=s.createVertexArray(),s.bindVertexArray(d);for(let b=0;b<f.length;b++){let E=f[b];n.bind(E),i&&E._glBuffers[o].refCount++}return this.activateVao(t,a),h[a.id]=d,h[l]=d,s.bindVertexArray(null),n.unbind(Se.ARRAY_BUFFER),d}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];let i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=t.buffers,n=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(n)for(let l=0;l<o.length;l++){let h=o[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!e&&n.dispose(o[l],e))}if(!e){for(let l in i)if(l[0]==="g"){let h=i[l];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){let e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){let i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,n=t.buffers,a=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);let l=null;for(let h in a){let d=a[h],f=n[d.buffer],m=f._glBuffers[s];if(e.attributeData[h]){l!==m&&(o.bind(f),l=m);let p=e.attributeData[h].location;if(i.enableVertexAttribArray(p),i.vertexAttribPointer(p,d.size,d.type||i.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)i.vertexAttribDivisor(p,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,s){let{gl:o}=this,n=this._activeGeometry;if(n.indexBuffer){let a=n.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?n.instanced?o.drawElementsInstanced(t,e||n.indexBuffer.data.length,l,(i||0)*a,s||1):o.drawElements(t,e||n.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else n.instanced?o.drawArraysInstanced(t,i,e||n.getSize(),s||1):o.drawArrays(t,i,e||n.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};qi.extension={type:D.RendererSystem,name:"geometry"};G.add(qi)});var bx,Tr,md=g(()=>{be();bx=new xt,Tr=class{constructor(t,e){this._texture=t,this.mapCoord=new xt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);let i=this.mapCoord;for(let s=0;s<t.length;s+=2){let o=t[s],n=t[s+1];e[s]=o*i.a+n*i.c+i.tx,e[s+1]=o*i.b+n*i.d+i.ty}return e}update(t){let e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;let i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);let s=e.orig,o=e.trim;o&&(bx.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(bx));let n=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/n.resolution,h=this.clampOffset;return a[0]=(e._frame.x+l+h)/n.width,a[1]=(e._frame.y+l+h)/n.height,a[2]=(e._frame.x+e._frame.width-l+h)/n.width,a[3]=(e._frame.y+e._frame.height-l+h)/n.height,this.uClampOffset[0]=h/n.realWidth,this.uClampOffset[1]=h/n.realHeight,this.isSimple=e._frame.width===n.width&&e._frame.height===n.height&&e.rotate===0,!0}}});var Tx,Ax=g(()=>{Tx=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`});var Ex,wx=g(()=>{Ex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`});var oo,pd=g(()=>{be();md();kn();Ax();wx();oo=class extends ${constructor(t,e,i){let s=null;typeof t!="string"&&e===void 0&&i===void 0&&(s=t,t=void 0,e=void 0,i=void 0),super(t||Ex,e||Tx,i),this.maskSprite=s,this.maskMatrix=new xt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,s){let o=this._maskSprite,n=o._texture;n.valid&&(n.uvMatrix||(n.uvMatrix=new Tr(n,0)),n.uvMatrix.update(),this.uniforms.npmAlpha=n.baseTexture.alphaMode?0:1,this.uniforms.mask=n,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(n.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=n.uvMatrix.uClampFrame,t.applyFilter(this,e,i,s))}}});var no,gd=g(()=>{pt();kn();no=class{constructor(t=null){this.type=zt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=$.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=zt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}});var Ki,xd=g(()=>{pt();St();pd();gd();Ki=class{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){let o=this.maskDataPool.pop()||new no;o.pooled=!0,o.maskObject=e,i=o}let s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==zt.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case zt.SCISSOR:this.renderer.scissor.push(i);break;case zt.STENCIL:this.renderer.stencil.push(i);break;case zt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case zt.COLOR:this.pushColorMask(i);break;default:break}i.type===zt.SPRITE&&this.maskStack.push(i)}pop(t){let e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case zt.SCISSOR:this.renderer.scissor.pop(e);break;case zt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case zt.SPRITE:this.popSpriteMask(e);break;case zt.COLOR:this.popColorMask(e);break;default:break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){let i=this.maskStack[this.maskStack.length-1];i.type===zt.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){let e=t.maskObject;e?e.isSprite?t.type=zt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=zt.SCISSOR:t.type=zt.STENCIL:t.type=zt.COLOR}pushSpriteMask(t){let{maskObject:e}=t,i=t._target,s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new oo])),s[0].resolution=t.resolution,s[0].multisample=t.multisample,s[0].maskSprite=e;let o=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=o,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){let e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){let e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}};Ki.extension={type:D.RendererSystem,name:"mask"};G.add(Ki)});var ao,yd=g(()=>{ao=class{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){let{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;let s=this.getStackLength();s!==i&&(s===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}});var Sx,Cx,Mx,bl,vd=g(()=>{St();be();Pt();yd();Sx=new xt,Cx=[],Mx=class _l extends ao{constructor(t){super(t),this.glConst=N.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){let t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){var a;if(t._scissorRectLocal)return;let e=t._scissorRect,{maskObject:i}=t,{renderer:s}=this,o=s.renderTexture,n=i.getBounds(!0,(a=Cx.pop())!=null?a:new st);this.roundFrameToPixels(n,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),e&&n.fit(e),t._scissorRectLocal=n}static isMatrixRotated(t){if(!t)return!1;let{a:e,b:i,c:s,d:o}=t;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(o)>1e-4)}testScissor(t){let{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||_l.isMatrixRotated(e.worldTransform)||_l.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);let i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,s,o){_l.isMatrixRotated(o)||(o=o?Sx.copyFrom(o):Sx.identity(),o.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,t),t.fit(s),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);let{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){let{gl:e}=this.renderer;t&&Cx.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){let t=this.maskStack[this.maskStack.length-1]._scissorRect,e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};Mx.extension={type:D.RendererSystem,name:"scissor"};bl=Mx;G.add(bl)});var Zi,_d=g(()=>{St();Pt();yd();Zi=class extends ao{constructor(t){super(t),this.glConst=N.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){let t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){let e=t.maskObject,{gl:i}=this.renderer,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;let o=t._colorMask;o!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,o!==0&&(t._colorMask=o,i.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}pop(t){let e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{let i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,e.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){let t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}};Zi.extension={type:D.RendererSystem,name:"stencil"};G.add(Zi)});var Qi,bd=g(()=>{St();he();Qi=class{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ct("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return ct("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return ct("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){let t=this.rendererPlugins;for(let e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(let t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}};Qi.extension={type:[D.RendererSystem,D.CanvasRendererSystem],name:"_plugin"};G.add(Qi)});var Ji,Td=g(()=>{St();be();Ji=class{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new xt,this.transform=null}update(t,e,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);let o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)}calculateProjection(t,e,i,s){let o=this.projectionMatrix,n=s?-1:1;o.identity(),o.a=1/e.width*2,o.d=n*(1/e.height*2),o.tx=-1-e.x*o.a,o.ty=-n-e.y*o.d}setTransform(t){}destroy(){this.renderer=null}};Ji.extension={type:D.RendererSystem,name:"projection"};G.add(Ji)});var fE,Px,ts,Ad=g(()=>{St();be();yl();fE=new Hr,Px=new st,ts=class{constructor(t){this.renderer=t,this._tempMatrix=new xt}generateTexture(t,e){var d;let h=e||{},{region:i}=h,s=pa(h,["region"]),o=(i==null?void 0:i.copyTo(Px))||t.getLocalBounds(Px,!0),n=s.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/n),o.height=Math.max(o.height,1/n),s.width=o.width,s.height=o.height,s.resolution=n,(d=s.multisample)!=null||(s.multisample=this.renderer.multisample);let a=He.create(s);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;let l=t.transform;return t.transform=fE,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,a}destroy(){}};ts.extension={type:[D.RendererSystem,D.CanvasRendererSystem],name:"textureGenerator"};G.add(ts)});var es,Un,rs,Ed=g(()=>{oi();St();be();es=new st,Un=new st,rs=class{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new st,this.destinationFrame=new st,this.viewportFrame=new st}contextChange(){var e;let t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){let s=this.renderer;this.current=t;let o,n,a;t?(o=t.baseTexture,a=o.resolution,e||(es.width=t.frame.width,es.height=t.frame.height,e=es),i||(Un.x=t.frame.x,Un.y=t.frame.y,Un.width=e.width,Un.height=e.height,i=Un),n=o.framebuffer):(a=s.resolution,e||(es.width=s._view.screen.width,es.height=s._view.screen.height,e=es),i||(i=es,i.width=e.width,i.height=e.height));let l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(n,l),this.renderer.projection.update(i,e,a,!n),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){let i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=dt.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);let o=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,a=o.width!==n.width||o.height!==n.height;if(a){let{x:l,y:h,width:d,height:f}=this.viewportFrame;l=Math.round(l),h=Math.round(h),d=Math.round(d),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,h,d,f)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};rs.extension={type:D.RendererSystem,name:"renderTexture"};G.add(rs)});var Tl,lo,wd=g(()=>{Tl=class{},lo=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}});function Ix(r,t){let e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){let o=t.getActiveAttrib(r,s);if(o.name.startsWith("gl_"))continue;let n=Dn(t,o.type),a={type:n,name:o.name,size:Fn(n),location:t.getAttribLocation(r,o.name)};e[o.name]=a}return e}var Rx=g(()=>{il();ol()});function Fx(r,t){let e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){let o=t.getActiveUniform(r,s),n=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),l=Dn(t,o.type);e[n]={name:n,index:s,type:l,size:o.size,isArray:a,value:Pn(l,o.size)}}return e}var Dx=g(()=>{tl();ol()});function Al(r,t){var a;let e=Ja(r,r.VERTEX_SHADER,t.vertexSrc),i=Ja(r,r.FRAGMENT_SHADER,t.fragmentSrc),s=r.createProgram();r.attachShader(s,e),r.attachShader(s,i);let o=(a=t.extra)==null?void 0:a.transformFeedbackVaryings;if(o&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(s,o.names,o.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||$c(r,s,e,i),t.attributeData=Ix(s,r),t.uniformData=Fx(s,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){let l=Object.keys(t.attributeData);l.sort((h,d)=>h>d?1:-1);for(let h=0;h<l.length;h++)t.attributeData[l[h]].location=h,r.bindAttribLocation(s,h,l[h]);r.linkProgram(s)}r.deleteShader(e),r.deleteShader(i);let n={};for(let l in t.uniformData){let h=t.uniformData[l];n[l]={location:r.getUniformLocation(s,l),value:Pn(h.type,h.size)}}return new lo(s,n)}var Sd=g(()=>{wd();zc();tl();Rx();Dx();Yc()});function mE(r,t,e,i,s){e.buffer.update(s)}function Cd(r){let t=r.map(o=>({data:o,offset:0,dataLen:0,dirty:0})),e=0,i=0,s=0;for(let o=0;o<t.length;o++){let n=t[o];if(e=Nx[n.data.type],n.data.size>1&&(e=Math.max(e,16)*n.data.size),n.dataLen=e,i%e!==0&&i<16){let a=i%e%16;i+=a,s+=a}i+e>16?(s=Math.ceil(s/16)*16,n.offset=s,s+=e,i=e):(n.offset=s,i+=e,s+=e)}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}function Md(r,t){let e=[];for(let i in r)t[i]&&e.push(t[i]);return e.sort((i,s)=>i.index-s.index),e}function El(r,t){if(!r.autoManage)return{size:0,syncFunc:mE};let e=Md(r.uniforms,t),{uboElements:i,size:s}=Cd(e),o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let n=0;n<i.length;n++){let a=i[n],l=r.uniforms[a.data.name],h=a.data.name,d=!1;for(let f=0;f<ar.length;f++){let m=ar[f];if(m.codeUbo&&m.test(a.data,l)){o.push(`offset = ${a.offset/4};`,ar[f].codeUbo(a.data.name,l)),d=!0;break}}if(!d)if(a.data.size>1){let f=Fn(a.data.type),m=Math.max(Nx[a.data.type]/16,1),p=f/m,v=(4-p%4)%4;o.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*m}; i++)
                {
                    for(var j = 0; j < ${p}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{let f=pE[a.data.type];o.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${f};
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var pE,Nx,Pd=g(()=>{ll();In();il();pE={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Nx={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4}});var gE,wl,is,Id=g(()=>{St();ll();Sd();Pd();al();Xc();gE=0,wl={textureCount:0,uboCount:0},is=class{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=gE++}systemCheck(){if(!Bn())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;let i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),e||(wl.textureCount=0,wl.uboCount=0,this.syncUniformGroup(t.uniformGroup,wl)),s}setUniforms(t){let e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){let i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){let e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Hc(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){let i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;let s=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),s(i.uniformData,t.uniforms,this.renderer,wl,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){let{gl:s}=this.renderer;this.renderer.buffer.bind(t.buffer);let o=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(e.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;let n=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[n];if(a||(a=this._uboCache[n]=El(t,this.shader.program.uniformData)),t.autoManage){let l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){let s=t.uniforms,o=[`${i}-`];for(let n in s)o.push(n),e[n]&&o.push(e[n].type);return o.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){let e=this.gl,i=t.program,s=Al(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};is.extension={type:D.RendererSystem,name:"shader"};G.add(is)});var Ar,Sl=g(()=>{St();Ar=class{constructor(t){this.renderer=t}run(t){let{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.3.2 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}};Ar.defaultOptions={hello:!1},Ar.extension={type:[D.RendererSystem,D.CanvasRendererSystem],name:"startup"};G.add(Ar)});function Bx(r,t=[]){return t[ht.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.ADD]=[r.ONE,r.ONE],t[ht.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.NONE]=[0,0],t[ht.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[ht.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ht.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[ht.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[ht.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ht.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[ht.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[ht.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[ht.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[ht.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ht.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var Ox=g(()=>{pt()});var xE,yE,vE,_E,bE,TE,Lx,Cl,Fd=g(()=>{pt();St();Cn();Ox();xE=0,yE=1,vE=2,_E=3,bE=4,TE=5,Lx=class Rd{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ht.NONE,this._blendEq=!1,this.map=[],this.map[xE]=this.setBlend,this.map[yE]=this.setOffset,this.map[vE]=this.setCullFace,this.map[_E]=this.setDepthTest,this.map[bE]=this.setFrontFace,this.map[TE]=this.setDepthMask,this.checks=[],this.defaultState=new Kt,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=Bx(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Rd.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Rd.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;let e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){let i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};Lx.extension={type:D.RendererSystem,name:"state"};Cl=Lx;G.add(Cl)});var ss,Ml=g(()=>{Ur();he();ss=class extends li.default{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){var s;this.addRunners(...t.runners);let e=((s=t.priority)!=null?s:[]).filter(o=>t.systems[o]),i=[...e,...Object.keys(t.systems).filter(o=>!e.includes(o))];for(let o of i)this.addSystem(t.systems[o],o)}addRunners(...t){t.forEach(e=>{this.runners[e]=new Ht(e)})}addSystem(t,e){let i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(let s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(t,e){let i=Object.keys(this._systemsHash);t.items.forEach(s=>{let o=i.find(n=>this._systemsHash[n]===s);s[t.name](e[o])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}});var Gn,hr,Il=g(()=>{pt();St();Gn=class Pl{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Pl.defaultMaxIdle,this.checkCountMax=Pl.defaultCheckCountMax,this.mode=Pl.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==rn.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let t=this.renderer.texture,e=t.managedTextures,i=!1;for(let s=0;s<e.length;s++){let o=e[s];o.resource&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),e[s]=null,i=!0)}if(i){let s=0;for(let o=0;o<e.length;o++)e[o]!==null&&(e[s++]=e[o]);e.length=s}}unload(t){let e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let s=t.children.length-1;s>=0;s--)this.unload(t.children[s])}destroy(){this.renderer=null}};Gn.defaultMode=rn.AUTO,Gn.defaultMaxIdle=60*60,Gn.defaultCheckCountMax=60*10,Gn.extension={type:D.RendererSystem,name:"textureGC"};hr=Gn;G.add(hr)});var gi,Dd=g(()=>{pt();gi=class{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=J.UNSIGNED_BYTE,this.internalFormat=H.RGBA,this.samplerType=0}}});function kx(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[r.RGB]:Z.FLOAT,[r.RGBA]:Z.FLOAT,[r.ALPHA]:Z.FLOAT,[r.LUMINANCE]:Z.FLOAT,[r.LUMINANCE_ALPHA]:Z.FLOAT,[r.R8]:Z.FLOAT,[r.R8_SNORM]:Z.FLOAT,[r.RG8]:Z.FLOAT,[r.RG8_SNORM]:Z.FLOAT,[r.RGB8]:Z.FLOAT,[r.RGB8_SNORM]:Z.FLOAT,[r.RGB565]:Z.FLOAT,[r.RGBA4]:Z.FLOAT,[r.RGB5_A1]:Z.FLOAT,[r.RGBA8]:Z.FLOAT,[r.RGBA8_SNORM]:Z.FLOAT,[r.RGB10_A2]:Z.FLOAT,[r.RGB10_A2UI]:Z.FLOAT,[r.SRGB8]:Z.FLOAT,[r.SRGB8_ALPHA8]:Z.FLOAT,[r.R16F]:Z.FLOAT,[r.RG16F]:Z.FLOAT,[r.RGB16F]:Z.FLOAT,[r.RGBA16F]:Z.FLOAT,[r.R32F]:Z.FLOAT,[r.RG32F]:Z.FLOAT,[r.RGB32F]:Z.FLOAT,[r.RGBA32F]:Z.FLOAT,[r.R11F_G11F_B10F]:Z.FLOAT,[r.RGB9_E5]:Z.FLOAT,[r.R8I]:Z.INT,[r.R8UI]:Z.UINT,[r.R16I]:Z.INT,[r.R16UI]:Z.UINT,[r.R32I]:Z.INT,[r.R32UI]:Z.UINT,[r.RG8I]:Z.INT,[r.RG8UI]:Z.UINT,[r.RG16I]:Z.INT,[r.RG16UI]:Z.UINT,[r.RG32I]:Z.INT,[r.RG32UI]:Z.UINT,[r.RGB8I]:Z.INT,[r.RGB8UI]:Z.UINT,[r.RGB16I]:Z.INT,[r.RGB16UI]:Z.UINT,[r.RGB32I]:Z.INT,[r.RGB32UI]:Z.UINT,[r.RGBA8I]:Z.INT,[r.RGBA8UI]:Z.UINT,[r.RGBA16I]:Z.INT,[r.RGBA16UI]:Z.UINT,[r.RGBA32I]:Z.INT,[r.RGBA32UI]:Z.UINT,[r.DEPTH_COMPONENT16]:Z.FLOAT,[r.DEPTH_COMPONENT24]:Z.FLOAT,[r.DEPTH_COMPONENT32F]:Z.FLOAT,[r.DEPTH_STENCIL]:Z.FLOAT,[r.DEPTH24_STENCIL8]:Z.FLOAT,[r.DEPTH32F_STENCIL8]:Z.FLOAT}:t={[r.RGB]:Z.FLOAT,[r.RGBA]:Z.FLOAT,[r.ALPHA]:Z.FLOAT,[r.LUMINANCE]:Z.FLOAT,[r.LUMINANCE_ALPHA]:Z.FLOAT,[r.DEPTH_STENCIL]:Z.FLOAT},t}var Ux=g(()=>{pt()});function Gx(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[J.UNSIGNED_BYTE]:{[H.RGBA]:r.RGBA8,[H.RGB]:r.RGB8,[H.RG]:r.RG8,[H.RED]:r.R8,[H.RGBA_INTEGER]:r.RGBA8UI,[H.RGB_INTEGER]:r.RGB8UI,[H.RG_INTEGER]:r.RG8UI,[H.RED_INTEGER]:r.R8UI,[H.ALPHA]:r.ALPHA,[H.LUMINANCE]:r.LUMINANCE,[H.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[J.BYTE]:{[H.RGBA]:r.RGBA8_SNORM,[H.RGB]:r.RGB8_SNORM,[H.RG]:r.RG8_SNORM,[H.RED]:r.R8_SNORM,[H.RGBA_INTEGER]:r.RGBA8I,[H.RGB_INTEGER]:r.RGB8I,[H.RG_INTEGER]:r.RG8I,[H.RED_INTEGER]:r.R8I},[J.UNSIGNED_SHORT]:{[H.RGBA_INTEGER]:r.RGBA16UI,[H.RGB_INTEGER]:r.RGB16UI,[H.RG_INTEGER]:r.RG16UI,[H.RED_INTEGER]:r.R16UI,[H.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[J.SHORT]:{[H.RGBA_INTEGER]:r.RGBA16I,[H.RGB_INTEGER]:r.RGB16I,[H.RG_INTEGER]:r.RG16I,[H.RED_INTEGER]:r.R16I},[J.UNSIGNED_INT]:{[H.RGBA_INTEGER]:r.RGBA32UI,[H.RGB_INTEGER]:r.RGB32UI,[H.RG_INTEGER]:r.RG32UI,[H.RED_INTEGER]:r.R32UI,[H.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[J.INT]:{[H.RGBA_INTEGER]:r.RGBA32I,[H.RGB_INTEGER]:r.RGB32I,[H.RG_INTEGER]:r.RG32I,[H.RED_INTEGER]:r.R32I},[J.FLOAT]:{[H.RGBA]:r.RGBA32F,[H.RGB]:r.RGB32F,[H.RG]:r.RG32F,[H.RED]:r.R32F,[H.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[J.HALF_FLOAT]:{[H.RGBA]:r.RGBA16F,[H.RGB]:r.RGB16F,[H.RG]:r.RG16F,[H.RED]:r.R16F},[J.UNSIGNED_SHORT_5_6_5]:{[H.RGB]:r.RGB565},[J.UNSIGNED_SHORT_4_4_4_4]:{[H.RGBA]:r.RGBA4},[J.UNSIGNED_SHORT_5_5_5_1]:{[H.RGBA]:r.RGB5_A1},[J.UNSIGNED_INT_2_10_10_10_REV]:{[H.RGBA]:r.RGB10_A2,[H.RGBA_INTEGER]:r.RGB10_A2UI},[J.UNSIGNED_INT_10F_11F_11F_REV]:{[H.RGB]:r.R11F_G11F_B10F},[J.UNSIGNED_INT_5_9_9_9_REV]:{[H.RGB]:r.RGB9_E5},[J.UNSIGNED_INT_24_8]:{[H.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[J.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[H.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[J.UNSIGNED_BYTE]:{[H.RGBA]:r.RGBA,[H.RGB]:r.RGB,[H.ALPHA]:r.ALPHA,[H.LUMINANCE]:r.LUMINANCE,[H.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[J.UNSIGNED_SHORT_5_6_5]:{[H.RGB]:r.RGB},[J.UNSIGNED_SHORT_4_4_4_4]:{[H.RGBA]:r.RGBA},[J.UNSIGNED_SHORT_5_5_5_1]:{[H.RGBA]:r.RGBA}},t}var zx=g(()=>{pt()});var os,Nd=g(()=>{pt();St();he();Gr();Dd();Ux();zx();os=class{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ot,this.hasIntegerTextures=!1}contextChange(){let t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Gx(t),this.samplerTypes=kx(t);let e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let s=0;s<e;s++)this.boundTextures[s]=null;this.emptyTextures={};let i=new gi(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new gi(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(t,e=0){let{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;let s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):s.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){let{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===t&&(this.currentLocation!==s&&(e.activeTexture(e.TEXTURE0+s),this.currentLocation=s),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[s]=null)}ensureSamplerType(t){let{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let o=t-1;o>=0;--o){let n=e[o];n&&n._glTextures[s].samplerType!==Z.FLOAT&&this.renderer.texture.unbind(n)}}initTexture(t){let e=new gi(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i,s,o;e.internalFormat=(s=(i=this.internalFormats[t.type])==null?void 0:i[t.format])!=null?s:t.format,e.samplerType=(o=this.samplerTypes[e.internalFormat])!=null?o:Z.FLOAT,this.webGLVersion===2&&t.type===J.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var s;let e=t._glTextures[this.CONTEXT_UID];if(!e)return;let i=this.renderer;if(this.initTextureType(t,e),(s=t.resource)==null?void 0:s.upload(i,t,e))e.samplerType!==Z.FLOAT&&(this.hasIntegerTextures=!0);else{let o=t.realWidth,n=t.realHeight,a=i.gl;(e.width!==o||e.height!==n||e.dirtyId<0)&&(e.width=o,e.height=n,a.texImage2D(t.target,0,e.internalFormat,o,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){let{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){let s=this.managedTextures.indexOf(t);s!==-1&&za(this.managedTextures,s,1)}}updateTextureStyle(t){var i;let e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===qt.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=we.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){let i=this.gl;if(e.mipmap&&t.mipmap!==qt.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ge.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);let s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===ge.LINEAR){let o=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ge.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===ge.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}};os.extension={type:D.RendererSystem,name:"texture"};G.add(os)});var ns,Bd=g(()=>{St();ns=class{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){let{gl:e,CONTEXT_UID:i}=this,s=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s)}unbind(){let{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){let{gl:i,renderer:s}=this;e&&s.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){let{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){let{gl:e,renderer:i,CONTEXT_UID:s}=this,o=e.createTransformFeedback();t._glTransformFeedbacks[s]=o,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,o);for(let n=0;n<t.buffers.length;n++){let a=t.buffers[n];a&&(i.buffer.update(a),a._glBuffers[s].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,a._glBuffers[s].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),o}disposeTransformFeedback(t,e){let i=t._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this);let o=this.renderer.buffer;if(o)for(let n=0;n<t.buffers.length;n++){let a=t.buffers[n];if(!a)continue;let l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&o.dispose(a,e))}i&&(e||s.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}};ns.extension={type:D.RendererSystem,name:"transformFeedback"};G.add(ns)});var Er,Rl=g(()=>{St();be();Pt();Er=class{constructor(t){this.renderer=t}init(t){this.screen=new st(0,0,t.width,t.height),this.element=t.view||N.ADAPTER.createCanvas(),this.resolution=t.resolution||N.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);let i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}};Er.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Er.extension={type:[D.RendererSystem,D.CanvasRendererSystem],name:"_view"};G.add(Er)});var Od=g(()=>{dl();ed();fl();hd();cd();fd();xd();vd();_d();bd();Td();Ad();Ed();Id();Sl();Fd();Ml();Il();Nd();Bd();Rl()});var Vx=g(()=>{pt();Pt();he();Jc();kn();Js();Od();Gr();fl();dl();Rl();Sl();Il();N.PREFER_ENV=Be.WEBGL2;N.STRICT_TEXTURE_CACHE=!1;N.RENDER_OPTIONS=gt(gt(gt(gt({},br.defaultOptions),_r.defaultOptions),Er.defaultOptions),Ar.defaultOptions);Object.defineProperties(N,{WRAP_MODE:{get(){return ot.defaultOptions.wrapMode},set(r){ct("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ot.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return ot.defaultOptions.scaleMode},set(r){ct("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ot.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return ot.defaultOptions.mipmap},set(r){ct("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ot.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return ot.defaultOptions.anisotropicLevel},set(r){ct("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ot.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return ct("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),$.defaultResolution},set(r){$.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return ct("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),$.defaultMultisample},set(r){$.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return vr.defaultMaxTextures},set(r){ct("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),vr.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return vr.defaultBatchSize},set(r){ct("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),vr.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return vr.canUploadSameBuffer},set(r){ct("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),vr.canUploadSameBuffer=r}},GC_MODE:{get(){return hr.defaultMode},set(r){ct("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),hr.defaultMode=r}},GC_MAX_IDLE:{get(){return hr.defaultMaxIdle},set(r){ct("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),hr.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return hr.defaultCheckCountMax},set(r){ct("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),hr.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return ce.defaultVertexPrecision},set(r){ct("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ce.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return ce.defaultFragmentPrecision},set(r){ct("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ce.defaultFragmentPrecision=r}}})});var Pe,Fl=g(()=>{Pe=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Pe||{})});var ho,Hx=g(()=>{ho=class{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=s}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));let e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let e=this.next;return this.next=t?null:e,this.previous=null,e}}});var Xx,Nt,Dl=g(()=>{Fl();Hx();Xx=class Xe{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ho(null,null,1/0),this.deltaMS=1/Xe.targetFPMS,this.elapsedMS=1/Xe.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Pe.NORMAL){return this._addListener(new ho(t,e,i))}addOnce(t,e,i=Pe.NORMAL){return this._addListener(new ho(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){let o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Xe.targetFPMS;let i=this._head,s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){let e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Xe.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{let e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Xe._shared){let t=Xe._shared=new Xe;t.autoStart=!0,t._protected=!0}return Xe._shared}static get system(){if(!Xe._system){let t=Xe._system=new Xe;t.autoStart=!0,t._protected=!0}return Xe._system}};Xx.targetFPMS=.06;Nt=Xx});var jx=g(()=>{Pt();Pt();he();Dl();Object.defineProperties(N,{TARGET_FPMS:{get(){return Nt.targetFPMS},set(r){ct("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Nt.targetFPMS=r}}})});var uo,Wx=g(()=>{St();Fl();Dl();uo=class{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Pe.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Nt.shared:new Nt,t.autoStart&&this.start()}static destroy(){if(this._ticker){let t=this._ticker;this.ticker=null,t.destroy()}}};uo.extension=D.Application;G.add(uo)});var Ld=g(()=>{jx();Fl();Dl();Wx()});function Nl(r){for(let t of $x)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}var $x,Yx=g(()=>{St();$x=[];G.handleByList(D.Renderer,$x)});var qx,Kx=g(()=>{qx=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`});var Zx,Qx=g(()=>{Zx=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`});var Bl,co,Jx=g(()=>{Kx();Qx();Bl=qx,co=Zx});var fo,ty=g(()=>{pt();St();fo=class{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){let i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{let i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=Et.HIGH?this.multisample=Et.HIGH:e>=Et.MEDIUM?this.multisample=Et.MEDIUM:e>=Et.LOW?this.multisample=Et.LOW:this.multisample=Et.NONE}destroy(){}};fo.extension={type:D.RendererSystem,name:"_multisample"};G.add(fo)});var Ol,ey=g(()=>{Ol=class{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}});var mo,ry=g(()=>{St();ey();mo=class{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){let{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,s.buffer)}unbind(t){let{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){let{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[e]!==t){let o=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,o.buffer)}}bindBufferRange(t,e,i){let{gl:s,CONTEXT_UID:o}=this;i=i||0;let n=t._glBuffers[o]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,n.buffer,i*256,256)}update(t){let{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==s.updateID)if(s.updateID=t._updateID,e.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{let o=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,o)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];let i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(e||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){let e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){let{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new Ol(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}};mo.extension={type:D.RendererSystem,name:"buffer"};G.add(mo)});var po,iy=g(()=>{St();po=class{constructor(t){this.renderer=t}render(t,e){let i=this.renderer,s,o,n,a;if(e&&(s=e.renderTexture,o=e.clear,n=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=n,!i.context.isLost){if(s||(this.lastObjectRendered=t),!a){let l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(o!=null?o:i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),s&&(e.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}};po.extension={type:D.RendererSystem,name:"objectRenderer"};G.add(po)});var Ll,zn,sy=g(()=>{pt();St();be();Pt();he();to();Ml();Ll=class kd extends ss{constructor(t){super(),this.type=ga.WEBGL,t=Object.assign({},N.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Te({projectionMatrix:new xt},!0);let e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:kd.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(ct("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=kd.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:La()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ct("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ct("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ct("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ct("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){ct("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return ct("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){ct("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return ct("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};Ll.extension={type:D.Renderer,priority:1},Ll.__plugins={},Ll.__systems={};zn=Ll;G.handleByMap(D.RendererPlugin,zn.__plugins);G.handleByMap(D.RendererSystem,zn.__systems);G.add(zn)});var Wr,Vn=g(()=>{Gr();Ys();Oi();Wr=class extends Le{constructor(t,e){let{width:i,height:s}=e||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let o=0;o<t;o++){let n=new ot;this.items.push(n),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Le?this.addResourceAt(t[i],i):this.addResourceAt(Bi(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;let t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{let{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}}});var go,Ud=g(()=>{pt();Vn();go=class extends Wr{constructor(t,e){let{width:i,height:s}=e||{},o,n;Array.isArray(t)?(o=t,n=t.length):n=t,super(n,{width:i,height:s}),o&&this.initFromArray(o,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=pr.TEXTURE_2D_ARRAY}upload(t,e,i){let{length:s,itemDirtyIds:o,items:n}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,e.format,i.type,null);for(let l=0;l<s;l++){let h=n[l];o[l]<h.dirtyId&&(o[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,e.format,i.type,h.resource.source))}return!0}}});var xo,Gd=g(()=>{di();xo=class extends oe{constructor(t){super(t)}static test(t){let{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}});var oy,kl,zd=g(()=>{pt();Vn();oy=class Hn extends Wr{constructor(t,e){let{width:i,height:s,autoLoad:o,linkBaseTexture:n}=e||{};if(t&&t.length!==Hn.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:s});for(let a=0;a<Hn.SIDES;a++)this.items[a].target=pr.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=n!==!1,t&&this.initFromArray(t,e),o!==!1&&this.load()}bind(t){super.bind(t),t.target=pr.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=pr.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){let s=this.itemDirtyIds;for(let o=0;o<Hn.SIDES;o++){let n=this.items[o];(s[o]<n.dirtyId||i.dirtyId<e.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(t,n,i),s[o]=n.dirtyId):s[o]<-1&&(t.gl.texImage2D(n.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),s[o]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Hn.SIDES}};oy.SIDES=6;kl=oy});var yo,Vd=g(()=>{pt();Pt();di();yo=class r extends oe{constructor(t,e){var n,a;e=e||{};let i,s,o;typeof t=="string"?(i=r.EMPTY,s=t,o=!0):(i=t,s=null,o=!1),super(i),this.url=s,this.crossOrigin=(n=e.crossOrigin)!=null?n:!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=(a=e.ownsImageBitmap)!=null?a:o,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise((t,e)=>V(this,null,function*(){if(this.url===null){t(this);return}try{let i=yield N.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;let s=yield i.blob();if(this.destroyed)return;let o=yield createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===kt.UNPACK?"premultiply":"none"});if(this.destroyed){o.close();return}this.source=o,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}})),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){var t;return r._EMPTY=(t=r._EMPTY)!=null?t:N.ADAPTER.createCanvas(0,0),r._EMPTY}}});var Hd,as,Xd=g(()=>{Pt();he();di();Hd=class Ul extends oe{constructor(t,e){e=e||{},super(N.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Ul.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){let t=new Image;oe.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;let e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=e*this.scale,o=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*e,o=this._overrideHeight||this._overrideWidth/e*i),s=Math.round(s),o=Math.round(o);let n=this.source;n.width=s,n.height=o,n._pixiId=`canvas_${yr()}`,n.getContext("2d").drawImage(t,0,0,e,i,0,0,s,o),this._resolve(),this._resolve=null}}static getSize(t){let e=Ul.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Ul.SVG_XML.test(t)}};Hd.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Hd.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;as=Hd});var jd,vo,$d=g(()=>{Ld();di();jd=class Wd extends oe{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){let i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);let s=t[0].src||t[0];oe.crossOrigin(i,s,e.crossorigin);for(let o=0;o<t.length;++o){let n=document.createElement("source"),{src:a,mime:l}=t[o];if(a=a||t[o],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let h=a.split("?").shift().toLowerCase(),d=h.slice(h.lastIndexOf(".")+1);l=l||Wd.MIME_TYPES[d]||`video/${d}`}n.src=a,l&&(n.type=l),i.appendChild(n)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){let e=Nt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;let t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){let t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){let t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);let e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();let t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Nt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Wd.TYPES.includes(e)}};jd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],jd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};vo=jd});var ny=g(()=>{Ud();Ys();Ys();Wa();Gd();zd();Vd();gl();Xd();$d();di();Oi();Vn();$s.push(yo,fi,xo,vo,as,Ze,kl,go)});var Gl,ay=g(()=>{Ur();Gl=class{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Ht("disposeTransformFeedback")}bindBuffer(t,e){this.buffers[t]=e}destroy(){this.disposeRunner.emit(this,!1)}}});var AE,L=g(()=>{Vx();oi();pt();St();be();Ur();Pt();Ld();he();Yx();dl();Bc();Lc();Jc();Zc();ed();Qc();cl();fl();kn();ad();hd();pd();Jx();ml();cd();ud();ty();Oc();Ks();ry();Mn();fd();Cc();gd();xd();vd();_d();bd();Td();iy();sy();pl();Ad();yl();sd();Ed();wd();Js();ul();Id();to();ja();Sd();Pd();el();In();al();Sl();Cn();Fd();Od();Gr();Dd();ny();id();Il();md();Nd();rd();ay();Bd();od();nd();Rl();Ml();di();Oi();Vn();Ud();Ys();Wa();Gd();zd();Vd();gl();Xd();$d();AE="7.3.2"});var ur,Yd=g(()=>{L();ur=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?st.EMPTY:(t=t||new st(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){let{a:i,b:s,c:o,d:n,tx:a,ty:l}=t,h=i*e.x+o*e.y+a,d=s*e.x+n*e.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(t){let e=this.minX,i=this.minY,s=this.maxX,o=this.maxY,n=t[0],a=t[1];e=n<e?n:e,i=a<i?a:i,s=n>s?n:s,o=a>o?a:o,n=t[2],a=t[3],e=n<e?n:e,i=a<i?a:i,s=n>s?n:s,o=a>o?a:o,n=t[4],a=t[5],e=n<e?n:e,i=a<i?a:i,s=n>s?n:s,o=a>o?a:o,n=t[6],a=t[7],e=n<e?n:e,i=a<i?a:i,s=n>s?n:s,o=a>o?a:o,this.minX=e,this.minY=i,this.maxX=s,this.maxY=o}addFrame(t,e,i,s,o){this.addFrameMatrix(t.worldTransform,e,i,s,o)}addFrameMatrix(t,e,i,s,o){let n=t.a,a=t.b,l=t.c,h=t.d,d=t.tx,f=t.ty,m=this.minX,p=this.minY,v=this.maxX,b=this.maxY,E=n*e+l*i+d,S=a*e+h*i+f;m=E<m?E:m,p=S<p?S:p,v=E>v?E:v,b=S>b?S:b,E=n*s+l*i+d,S=a*s+h*i+f,m=E<m?E:m,p=S<p?S:p,v=E>v?E:v,b=S>b?S:b,E=n*e+l*o+d,S=a*e+h*o+f,m=E<m?E:m,p=S<p?S:p,v=E>v?E:v,b=S>b?S:b,E=n*s+l*o+d,S=a*s+h*o+f,m=E<m?E:m,p=S<p?S:p,v=E>v?E:v,b=S>b?S:b,this.minX=m,this.minY=p,this.maxX=v,this.maxY=b}addVertexData(t,e,i){let s=this.minX,o=this.minY,n=this.maxX,a=this.maxY;for(let l=e;l<i;l+=2){let h=t[l],d=t[l+1];s=h<s?h:s,o=d<o?d:o,n=h>n?h:n,a=d>a?d:a}this.minX=s,this.minY=o,this.maxX=n,this.maxY=a}addVertices(t,e,i,s){this.addVerticesMatrix(t.worldTransform,e,i,s)}addVerticesMatrix(t,e,i,s,o=0,n=o){let a=t.a,l=t.b,h=t.c,d=t.d,f=t.tx,m=t.ty,p=this.minX,v=this.minY,b=this.maxX,E=this.maxY;for(let S=i;S<s;S+=2){let C=e[S],w=e[S+1],A=a*C+h*w+f,P=d*w+l*C+m;p=Math.min(p,A-o),b=Math.max(b,A+o),v=Math.min(v,P-n),E=Math.max(E,P+n)}this.minX=p,this.minY=v,this.maxX=b,this.maxY=E}addBounds(t){let e=this.minX,i=this.minY,s=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>o?t.maxY:o}addBoundsMask(t,e){let i=t.minX>e.minX?t.minX:e.minX,s=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,n=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=o&&s<=n){let a=this.minX,l=this.minY,h=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=o>h?o:h,this.maxY=n>d?n:d}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){let i=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,n=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=o&&s<=n){let a=this.minX,l=this.minY,h=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=o>h?o:h,this.maxY=n>d?n:d}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,s,o,n){t-=o,e-=n,i+=o,s+=n,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>s?this.maxY:s}}});var At,Xn,qd=g(()=>{L();Yd();At=class r extends U.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Hr,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ur,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){let e=Object.keys(t);for(let i=0;i<e.length;++i){let s=e[i];Object.defineProperty(r.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new st),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){var a;t||(this._localBoundsRect||(this._localBoundsRect=new st),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ur);let e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(a=i==null?void 0:i.worldAlpha)!=null?a:1,this.transform=this._tempDisplayObjectParent.transform;let s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;let n=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=s,this._bounds.updateID+=this._boundsID-o,n}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,s){return e&&(t=e.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,s=1,o=0,n=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=s||1,this.rotation=o,this.skew.x=n,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Xn),this.tempDisplayObjectParent}enableTempParent(){let t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*$a}set angle(t){this.transform.rotation=t*Qe}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){let e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){let e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}},Xn=class extends At{constructor(){super(...arguments),this.sortDirty=null}};At.prototype.displayObjectUpdateTransform=At.prototype.updateTransform});function wE(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var EE,ly,Xt,Zd=g(()=>{L();qd();EE=new xt;ly=class Kd extends At{constructor(){super(),this.children=[],this.sortableChildren=Kd.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{let e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;let i=this.getChildIndex(t),s=this.getChildIndex(e);this.children[i]=e,this.children[s]=t,this.onChildrenChange(i<s?i:s)}getChildIndex(t){let e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);let i=this.getChildIndex(t);U.removeItems(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{let e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,U.removeItems(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){let e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,U.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){let i=t,s=e,o=s-i,n;if(o>0&&o<=s){n=this.children.splice(i,o);for(let a=0;a<n.length;++a)n[a].parent=null,n[a].transform&&(n[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<n.length;++a)n[a].emit("removed",this),this.emit("childRemoved",n[a],this,a);return n}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){let s=this.children[e];s._lastSortedIndex=e,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(wE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){let i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){let e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){let i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){let i=super.getLocalBounds(t);if(!e)for(let s=0,o=this.children.length;s<o;++s){let n=this.children[s];n.visible&&n.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){let e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==Kd.prototype._render&&(i=this.getBounds(!0));let o=t.projection.transform;if(o&&(s?(s=EE.copyFrom(s),s.prepend(o)):s=o),i&&e.intersects(i,s))this._render(t);else if(this.cullArea)return;for(let n=0,a=this.children.length;n<a;++n){let l=this.children[n],h=l.cullable;l.cullable=h||!this.cullArea,l.render(t),l.cullable=h}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(t)}}renderAdvanced(t){var o,n,a;let e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<e.length;l++)e[l].enabled&&this._enabledFilters.push(e[l])}let s=e&&((o=this._enabledFilters)==null?void 0:o.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==zt.NONE));if(s&&t.batch.flush(),e&&((n=this._enabledFilters)!=null&&n.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let l=0,h=this.children.length;l<h;++l)this.children[l].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;let e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let s=0;s<i.length;++s)i[s].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){let e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){let e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};ly.defaultSortableChildren=!1;Xt=ly;Xt.prototype.containerUpdateTransform=Xt.prototype.updateTransform});var hy=g(()=>{L();L();Zd();Object.defineProperties(N,{SORTABLE_CHILDREN:{get(){return Xt.defaultSortableChildren},set(r){U.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Xt.defaultSortableChildren=r}}})});var Ie=g(()=>{hy();Yd();Zd();qd()});var jn,SE,Re,uy=g(()=>{L();Ie();jn=new it,SE=new Uint16Array([0,1,2,0,2,3]),Re=class r extends Xt{constructor(t){super(),this._anchor=new ue(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new dt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ht.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||tt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=SE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=N.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=U.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=U.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){let t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;let e=this.transform.worldTransform,i=e.a,s=e.b,o=e.c,n=e.d,a=e.tx,l=e.ty,h=this.vertexData,d=t.trim,f=t.orig,m=this._anchor,p=0,v=0,b=0,E=0;if(d?(v=d.x-m._x*f.width,p=v+d.width,E=d.y-m._y*f.height,b=E+d.height):(v=-m._x*f.width,p=v+f.width,E=-m._y*f.height,b=E+f.height),h[0]=i*v+o*E+a,h[1]=n*E+s*v+l,h[2]=i*p+o*E+a,h[3]=n*E+s*p+l,h[4]=i*p+o*b+a,h[5]=n*b+s*p+l,h[6]=i*v+o*b+a,h[7]=n*b+s*v+l,this._roundPixels){let S=N.RESOLUTION;for(let C=0;C<h.length;++C)h[C]=Math.round(h[C]*S)/S}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;let t=this._texture,e=this.vertexTrimmedData,i=t.orig,s=this._anchor,o=this.transform.worldTransform,n=o.a,a=o.b,l=o.c,h=o.d,d=o.tx,f=o.ty,m=-s._x*i.width,p=m+i.width,v=-s._y*i.height,b=v+i.height;if(e[0]=n*m+l*v+d,e[1]=h*v+a*m+f,e[2]=n*p+l*v+d,e[3]=h*v+a*p+f,e[4]=n*p+l*b+d,e[5]=h*b+a*p+f,e[6]=n*m+l*b+d,e[7]=h*b+a*m+f,this._roundPixels){let E=N.RESOLUTION;for(let S=0;S<e.length;++S)e[S]=Math.round(e[S]*E)/E}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){let t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new ur),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new st),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,jn);let e=this._texture.orig.width,i=this._texture.orig.height,s=-e*this.anchor.x,o=0;return jn.x>=s&&jn.x<s+e&&(o=-i*this.anchor.y,jn.y>=o&&jn.y<o+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){let e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){let i=t instanceof tt?t:tt.from(t,e);return new r(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){let e=U.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){let e=U.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||tt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}});var ls=g(()=>{uy()});var cy,Qd,dy=g(()=>{L();Ie();ls();cy=new xt;At.prototype._cacheAsBitmap=!1;At.prototype._cacheData=null;At.prototype._cacheAsBitmapResolution=null;At.prototype._cacheAsBitmapMultisample=null;Qd=class{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}};Object.defineProperties(At.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let t;r?(this._cacheData||(this._cacheData=new Qd),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});At.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};At.prototype._initCachedDisplayObject=function(r){var m,p,v;if((m=this._cacheData)!=null&&m.sprite)return;let t=this.alpha;this.alpha=1,r.batch.flush();let e=this.getLocalBounds(new st,!0);if((p=this.filters)!=null&&p.length){let b=this.filters[0].padding;e.pad(b)}let i=this.cacheAsBitmapResolution||r.resolution;e.ceil(i),e.width=Math.max(e.width,1/i),e.height=Math.max(e.height,1/i);let s=r.renderTexture.current,o=r.renderTexture.sourceFrame.clone(),n=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=He.create({width:e.width,height:e.height,resolution:i,multisample:(v=this.cacheAsBitmapMultisample)!=null?v:r.multisample}),h=`cacheAsBitmap_${U.uid()}`;this._cacheData.textureCacheId=h,ot.addToCache(l.baseTexture,h),tt.addToCache(l,h);let d=this.transform.localTransform.copyTo(cy).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:d,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(s,o,n),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;let f=new Re(l);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(e.x/e.width),f.anchor.y=-(e.y/e.height),f.alpha=t,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)};At.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};At.prototype._initCachedDisplayObjectCanvas=function(r){var d;if((d=this._cacheData)!=null&&d.sprite)return;let t=this.getLocalBounds(new st,!0),e=this.alpha;this.alpha=1;let i=r.canvasContext.activeContext,s=r._projTransform,o=this.cacheAsBitmapResolution||r.resolution;t.ceil(o),t.width=Math.max(t.width,1/o),t.height=Math.max(t.height,1/o);let n=He.create({width:t.width,height:t.height,resolution:o}),a=`cacheAsBitmap_${U.uid()}`;this._cacheData.textureCacheId=a,ot.addToCache(n.baseTexture,a),tt.addToCache(n,a);let l=cy;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:n,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;let h=new Re(n);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};At.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};At.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};At.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ot.removeFromCache(this._cacheData.textureCacheId),tt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};At.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)}});var fy=g(()=>{Ie();At.prototype.name=null;Xt.prototype.getChildByName=function(r,t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].name===r)return this.children[e];if(t)for(let e=0,i=this.children.length;e<i;e++){let s=this.children[e];if(!s.getChildByName)continue;let o=s.getChildByName(r,!0);if(o)return o}return null}});var my=g(()=>{L();Ie();At.prototype.getGlobalPosition=function(r=new it,t=!1){return this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r}});var py,gy=g(()=>{py=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`});var hs,xy=g(()=>{L();gy();hs=class extends ${constructor(t=1){super(Bl,py,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}});var zl=g(()=>{xy()});function yy(r){let t=CE[r],e=t.length,i=ME,s="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",n;for(let a=0;a<r;a++){let l=o.replace("%index%",a.toString());n=a,a>=e&&(n=r-a-1),l=l.replace("%value%",t[n].toString()),s+=l,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}var CE,ME,vy=g(()=>{CE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ME=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`)});function _y(r,t){let e=Math.ceil(r/2),i=PE,s="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let n=0;n<r;n++){let a=o.replace("%index%",n.toString());a=a.replace("%sampleIndex%",`${n-(e-1)}.0`),s+=a,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}var PE,by=g(()=>{PE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`});var wr,Jd=g(()=>{L();vy();by();wr=class extends ${constructor(t,e=8,i=4,s=$.defaultResolution,o=5){let n=_y(o,t),a=yy(o);super(n,a),this.horizontal=t,this.resolution=s,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,s);else{let o=t.getFilterTexture(),n=t.renderer,a=e,l=o;this.state.blend=!1,t.applyFilter(this,a,l,Oe.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,Oe.BLIT),this.uniforms.uSampler=l;let d=l;l=a,a=d,n.shader.bind(this),n.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,s),t.returnFilterTexture(o)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}});var _o,Ty=g(()=>{L();Jd();_o=class extends ${constructor(t=8,e=4,i=$.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new wr(!0,t,e,i,s),this.blurYFilter=new wr(!1,t,e,i,s),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,s){let o=Math.abs(this.blurXFilter.strength),n=Math.abs(this.blurYFilter.strength);if(o&&n){let a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,Oe.CLEAR),this.blurYFilter.apply(t,a,i,s),t.returnFilterTexture(a)}else n?this.blurYFilter.apply(t,e,i,s):this.blurXFilter.apply(t,e,i,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}});var Vl=g(()=>{Ty();Jd()});var Ay,Ey=g(()=>{Ay=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`});var xi,wy=g(()=>{L();Ey();xi=class extends ${constructor(){let t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(co,Ay,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){let e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){let i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){let[i,s,o]=dt.shared.setValue(t).toArray(),n=[i,0,0,0,0,0,s,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(n,e)}greyscale(t,e){let i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){let e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;let i=Math.cos(t),s=Math.sin(t),o=Math.sqrt,n=1/3,a=o(n),l=i+(1-i)*n,h=n*(1-i)-a*s,d=n*(1-i)+a*s,f=n*(1-i)+a*s,m=i+n*(1-i),p=n*(1-i)-a*s,v=n*(1-i)-a*s,b=n*(1-i)+a*s,E=i+n*(1-i),S=[l,h,d,0,0,f,m,p,0,0,v,b,E,0,0,0,0,0,1,0];this._loadMatrix(S,e)}contrast(t,e){let i=(t||0)+1,s=-.5*(i-1),o=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(o,e)}saturate(t=0,e){let i=t*2/3+1,s=(i-1)*-.5,o=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(o,e)}desaturate(){this.saturate(-1)}negative(t){let e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){let e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){let e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){let e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){let e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){let e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){let e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){let e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,s,o){t=t||.2,e=e||.15,i=i||16770432,s=s||3375104;let n=dt.shared,[a,l,h]=n.setValue(i).toArray(),[d,f,m]=n.setValue(s).toArray(),p=[.3,.59,.11,0,0,a,l,h,t,0,d,f,m,e,0,a-d,l-f,h-m,0,0];this._loadMatrix(p,o)}night(t,e){t=t||.1;let i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){let i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){let e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){let t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}};xi.prototype.grayscale=xi.prototype.greyscale});var tf=g(()=>{wy()});var Sy,Cy=g(()=>{Sy=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`});var My,Py=g(()=>{My=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`});var bo,Iy=g(()=>{L();Cy();Py();bo=class extends ${constructor(t,e){let i=new xt;t.renderable=!1,super(My,Sy,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new it(e,e)}apply(t,e,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;let o=this.maskSprite.worldTransform,n=Math.sqrt(o.a*o.a+o.b*o.b),a=Math.sqrt(o.c*o.c+o.d*o.d);n!==0&&a!==0&&(this.uniforms.rotation[0]=o.a/n,this.uniforms.rotation[1]=o.b/n,this.uniforms.rotation[2]=o.c/a,this.uniforms.rotation[3]=o.d/a),t.applyFilter(this,e,i,s)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}});var ef=g(()=>{Iy()});var Ry,Fy=g(()=>{Ry=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`});var Dy,Ny=g(()=>{Dy=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`});var To,By=g(()=>{L();Fy();Ny();To=class extends ${constructor(){super(Dy,Ry)}}});var rf=g(()=>{By()});var Oy,Ly=g(()=>{Oy=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`});var Ao,ky=g(()=>{L();Ly();Ao=class extends ${constructor(t=.5,e=Math.random()){super(co,Oy,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}});var sf=g(()=>{ky()});var Hl,Uy=g(()=>{L();zl();Vl();tf();ef();rf();sf();Hl={AlphaFilter:hs,BlurFilter:_o,BlurFilterPass:wr,ColorMatrixFilter:xi,DisplacementFilter:bo,FXAAFilter:To,NoiseFilter:Ao};Object.entries(Hl).forEach(([r,t])=>{Object.defineProperty(Hl,r,{get(){return U.deprecation("7.1.0",`filters.${r} has moved to ${r}`),t}})})});var of,Sr,nf=g(()=>{L();of=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Nt.system.add(this.tickerUpdate,this,Pe.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Nt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}},Sr=new of});var Cr,Xl=g(()=>{L();Cr=class r{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=r.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new it,this.page=new it,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,s,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}});var cr,Wn=g(()=>{L();Xl();cr=class extends Cr{constructor(){super(...arguments),this.client=new it,this.movement=new it,this.offset=new it,this.global=new it,this.screen=new it}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,o,n,a,l,h,d,f,m,p,v,b){throw new Error("Method not implemented.")}}});var de,jl=g(()=>{Wn();de=class extends cr{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}});var tr,Wl=g(()=>{Wn();tr=class extends cr{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};tr.DOM_DELTA_PIXEL=0,tr.DOM_DELTA_LINE=1,tr.DOM_DELTA_PAGE=2});var IE,RE,af,Eo,lf=g(()=>{L();nf();Wn();jl();Wl();IE=2048,RE=new it,af=new it,Eo=class{constructor(t){this.dispatch=new U.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,s)=>i.priority-s.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;let e=this.mappingTable[t.type];if(e)for(let i=0,s=e.length;i<s;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Sr.pauseUpdate=!0;let i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,RE.set(t,e),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,e){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,o=i.length-1;s<o;s++)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;let s=Array.isArray(e)?e:[e];for(let o=i.length-1;o>=0;o--)s.forEach(n=>{t.currentTarget=i[o],this.notifyTarget(t,n)})}propagationPath(t){let e=[t];for(let i=0;i<IE&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,s,o,n=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Sr.pauseUpdate=!1),t.interactiveChildren&&t.children){let d=t.children;for(let f=d.length-1;f>=0;f--){let m=d[f],p=this.hitTestMoveRecursive(m,this._isInteractive(e)?e:m.eventMode,i,s,o,n||o(t,i));if(p){if(p.length>0&&!p[p.length-1].parent)continue;let v=t.isInteractive();(p.length>0||v)&&(v&&this._allInteractiveElements.push(t),p.push(t)),this._hitElements.length===0&&(this._hitElements=p),a=!0}}}let l=this._isInteractive(e),h=t.isInteractive();return l&&h&&this._allInteractiveElements.push(t),n||this._hitElements.length>0?null:a?this._hitElements:l&&!o(t,i)&&s(t,i)?h?[t]:[]:null}hitTestRecursive(t,e,i,s,o){if(this._interactivePrune(t)||o(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Sr.pauseUpdate=!1),t.interactiveChildren&&t.children){let l=t.children;for(let h=l.length-1;h>=0;h--){let d=l[h],f=this.hitTestRecursive(d,this._isInteractive(e)?e:d.eventMode,i,s,o);if(f){if(f.length>0&&!f[f.length-1].parent)continue;let m=t.isInteractive();return(f.length>0||m)&&f.push(t),f}}}let n=this._isInteractive(e),a=t.isInteractive();return n&&s(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,af),!t.hitArea.contains(af.x,af.y)))return!0;if(t._mask){let s=t._mask.isMaskData?t._mask.maskObject:t._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var o,n;e=e!=null?e:t.type;let i=`on${e}`;(n=(o=t.currentTarget)[i])==null||n.call(o,t);let s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof de)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){let s=e.button===2;this.dispatchEvent(e,s?"rightdown":"mousedown")}let i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var l,h,d;if(!(t instanceof de)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;let i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.trackingData(t.pointerId),o=this.findMountedTarget(s.overTargets);if(((l=s.overTargets)==null?void 0:l.length)>0&&o!==e.target){let f=t.type==="mousemove"?"mouseout":"pointerout",m=this.createPointerEvent(t,f,o);if(this.dispatchEvent(m,"pointerout"),i&&this.dispatchEvent(m,"mouseout"),!e.composedPath().includes(o)){let p=this.createPointerEvent(t,"pointerleave",o);for(p.eventPhase=p.AT_TARGET;p.target&&!e.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),i&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(m)}if(o!==e.target){let f=t.type==="mousemove"?"mouseover":"pointerover",m=this.clonePointerEvent(e,f);this.dispatchEvent(m,"pointerover"),i&&this.dispatchEvent(m,"mouseover");let p=o==null?void 0:o.parent;for(;p&&p!==this.rootTarget.parent&&p!==e.target;)p=p.parent;if(!p||p===this.rootTarget.parent){let v=this.clonePointerEvent(e,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==o&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),i&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(m)}let n=[],a=(h=this.enableGlobalMoveEvents)!=null?h:!0;this.moveOnAll?n.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&n.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?n.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&n.push("globaltouchmove")),i&&(this.moveOnAll?n.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&n.push("globalmousemove"),this.cursor=(d=e.target)==null?void 0:d.cursor),n.length>0&&this.all(e,n),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var n;if(!(t instanceof de)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(n=i.target)==null?void 0:n.cursor);let o=this.clonePointerEvent(i,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(o)}mapPointerOut(t){if(!(t instanceof de)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId);if(e.overTargets){let i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(e.overTargets),o=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(o),i&&this.dispatchEvent(o,"mouseout");let n=this.createPointerEvent(t,"pointerleave",s);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),i&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;e.overTargets=null,this.freeEvent(o),this.freeEvent(n)}this.cursor=null}mapPointerUp(t){if(!(t instanceof de)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}let s=this.trackingData(t.pointerId),o=this.findMountedTarget(s.pressTargetsByButton[t.button]),n=o;if(o&&!i.composedPath().includes(o)){let a=o;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[t.button],n=a}if(n){let a=this.clonePointerEvent(i,"click");a.target=n,a.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});let l=s.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){let h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof de)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(i){let o=i;for(;o;)s.currentTarget=o,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof tr)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}let e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){var o;let s=this.allocateEvent(de);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=(o=i!=null?i:this.hitTest(s.global.x,s.global.y))!=null?o:this._hitElements[0],typeof e=="string"&&(s.type=e),s}createWheelEvent(t){let e=this.allocateEvent(tr);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){let i=this.allocateEvent(de);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e!=null?e:i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof de&&e instanceof de&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof cr&&e instanceof cr&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);let e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){let i=t.currentTarget._events[e];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let s=0,o=i.length;s<o&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeListener(e,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,t)}}});var FE,DE,hf,wo,cf=g(()=>{L();lf();nf();jl();Wl();FE=1,DE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},hf=class uf{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Eo(null),Sr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new de(null),this.rootWheelEvent=new tr(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(gt({},uf.defaultEventFeatures),{set:(e,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),e[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){var s,o;let{view:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,uf._defaultEventMode=(s=t.eventMode)!=null?s:"auto",Object.assign(this.features,(o=t.eventFeatures)!=null?o:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;let i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,s=e.length;i<s;i++){let o=e[i],n=this.bootstrapEvent(this.rootPointerEvent,o);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Sr.pointerMoved();let e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){let o=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);let i=e!==this.domElement?"outside":"",s=this.normalizeToPointerData(t);for(let o=0,n=s.length;o<n;o++){let a=this.bootstrapEvent(this.rootPointerEvent,s[o]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){let o=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;let e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Sr.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Sr.addTickerListener();let t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Sr.removeTickerListener();let t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){let s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;t.x=(e-s.left)*(this.domElement.width/s.width)*o,t.y=(i-s.top)*(this.domElement.height/s.height)*o}normalizeToPointerData(t){let e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,s=t.changedTouches.length;i<s;i++){let o=t.changedTouches[i];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,e.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){let i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=FE),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){let e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=DE[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};hf.extension={name:"events",type:[D.RendererSystem,D.CanvasRendererSystem]},hf.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};wo=hf;G.add(wo)});function Gy(r){return r==="dynamic"||r==="static"}var df,zy=g(()=>{L();Ie();cf();Xl();df={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var r;return(r=this._internalInteractive)!=null?r:Gy(wo.defaultEventMode)},set interactive(r){U.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){var r;return(r=this._internalEventMode)!=null?r:wo.defaultEventMode},set eventMode(r){this._internalInteractive=Gy(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){let i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.on(r,t,s)},removeEventListener(r,t,e){let i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,s)},dispatchEvent(r){if(!(r instanceof Cr))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};At.mixin(df)});var ff=g(()=>{lf();cf();Xl();zy();Wn();jl();Wl()});var $l,mf=g(()=>{$l={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1}});var NE,Yl,BE,OE,Vy,Hy,LE,kE,UE,So,Xy=g(()=>{L();Ie();ff();mf();At.mixin($l);NE=9,Yl=100,BE=0,OE=0,Vy=2,Hy=1,LE=-1e3,kE=-1e3,UE=2,So=class{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(U.isMobile.tablet||U.isMobile.phone)&&this.createTouchHook();let e=document.createElement("div");e.style.width=`${Yl}px`,e.style.height=`${Yl}px`,e.style.position="absolute",e.style.top=`${BE}px`,e.style.left=`${OE}px`,e.style.zIndex=Vy.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){let t=document.createElement("button");t.style.width=`${Hy}px`,t.style.height=`${Hy}px`,t.style.position="absolute",t.style.top=`${LE}px`,t.style.left=`${kE}px`,t.style.zIndex=UE.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);let e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){let t=performance.now();if(U.isMobile.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);let{x:e,y:i,width:s,height:o}=this.renderer.view.getBoundingClientRect(),{width:n,height:a,resolution:l}=this.renderer,h=s/n*l,d=o/a*l,f=this.div;f.style.left=`${e}px`,f.style.top=`${i}px`,f.style.width=`${n}px`,f.style.height=`${a}px`;for(let m=0;m<this.children.length;m++){let p=this.children[m];if(p.renderId!==this.renderId)p._accessibleActive=!1,U.removeItems(this.children,m,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,m--;else{f=p._accessibleDiv;let v=p.hitArea,b=p.worldTransform;p.hitArea?(f.style.left=`${(b.tx+v.x*b.a)*h}px`,f.style.top=`${(b.ty+v.y*b.d)*d}px`,f.style.width=`${v.width*b.a*h}px`,f.style.height=`${v.height*b.d*d}px`):(v=p.getBounds(),this.capHitArea(v),f.style.left=`${v.x*h}px`,f.style.top=`${v.y*d}px`,f.style.width=`${v.width*h}px`,f.style.height=`${v.height*d}px`,f.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(f.title=p.accessibleTitle),f.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&f.setAttribute("aria-label",p.accessibleHint)),(p.accessibleTitle!==f.title||p.tabIndex!==f.tabIndex)&&(f.title=p.accessibleTitle,f.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);let{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${Yl}px`,e.style.height=`${Yl}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Vy.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){let{displayObject:i}=t.target,s=this.renderer.events.rootBoundary,o=Object.assign(new Cr(s),{target:i});s.rootTarget=this.renderer.lastObjectRendered,e.forEach(n=>s.dispatchEvent(o,n))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===NE&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}};So.extension={name:"accessibility",type:[D.RendererPlugin,D.CanvasRendererPlugin]};G.add(So)});var jy=g(()=>{Xy();mf()});var Wy,$n,$y=g(()=>{L();Ie();Wy=class pf{constructor(t){this.stage=new Xt,t=Object.assign({forceCanvas:!1},t),this.renderer=Nl(t),pf._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){let i=pf._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Wy._plugins=[];$n=Wy;G.handleByList(D.Application,$n._plugins)});var Co,Yy=g(()=>{L();Co=class{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:s,clientHeight:o}=this._resizeTo;e=s,i=o}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};Co.extension=D.Application;G.add(Co)});var qy=g(()=>{$y();Yy()});var Ky,Zy=g(()=>{L();Ky={loader:D.LoadParser,resolver:D.ResolveParser,cache:D.CacheParser,detection:D.DetectionParser};G.handle(D.Asset,r=>{let t=r.ref;Object.entries(Ky).filter(([e])=>!!t[e]).forEach(([e,i])=>{var s;return G.add(Object.assign(t[e],{extension:(s=t[e].extension)!=null?s:i}))})},r=>{let t=r.ref;Object.keys(Ky).filter(e=>!!t[e]).forEach(e=>G.remove(t[e]))})});var ql,Qy=g(()=>{ql=class{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){return V(this,null,function*(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());yield this._loader.load(t),this._isLoading=!1,this._next()}})}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}});function Fe(r,t){if(Array.isArray(t)){for(let e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}var $r=g(()=>{});function Zt(r,t){let e=r.split("?")[0],i=U.path.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}var Yr=g(()=>{L()});var ne,us=g(()=>{ne=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r)});var yi,gf=g(()=>{yi=(r,t)=>{let e=t.split("?")[1];return e&&(r+=`?${e}`),r}});function Jy(r,t,e,i,s){let o=t[e];for(let n=0;n<o.length;n++){let a=o[n];e<t.length-1?Jy(r.replace(i[e],a),t,e+1,i,s):s.push(r.replace(i[e],a))}}function Yn(r){let t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){let s=[];e.forEach(o=>{let n=o.substring(1,o.length-1).split(",");s.push(n)}),Jy(r,s,0,e,i)}else i.push(r);return i}var Kl=g(()=>{});var Mr,Mo=g(()=>{Mr=r=>!Array.isArray(r)});var Zl=g(()=>{$r();Yr();us();gf();Kl();Mo()});var xf,er,qn=g(()=>{L();Zl();us();xf=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){let i=ne(t),s;for(let a=0;a<this.parsers.length;a++){let l=this.parsers[a];if(l.test(e)){s=l.getCacheableAssets(i,e);break}}s||(s={},i.forEach(a=>{s[a]=e}));let o=Object.keys(s),n={cacheKeys:o,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,n)}),o.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),e instanceof tt){let a=e;i.forEach(l=>{a.baseTexture!==tt.EMPTY.baseTexture&&ot.addToCache(a.baseTexture,l),tt.addToCache(a,l)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}let e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}},er=new xf});var Ql,tv=g(()=>{L();Zl();Mo();us();Ql=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){let i={promise:null,parser:null};return i.promise=(()=>V(this,null,function*(){var n,a;let s=null,o=null;if(e.loadParser&&(o=this._parserHash[e.loadParser],o||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!o){for(let l=0;l<this.parsers.length;l++){let h=this.parsers[l];if(h.load&&((n=h.test)!=null&&n.call(h,t,e,this))){o=h;break}}if(!o)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=yield o.load(t,e,this),i.parser=o;for(let l=0;l<this.parsers.length;l++){let h=this.parsers[l];h.parse&&h.parse&&(yield(a=h.testParse)==null?void 0:a.call(h,s,e,this))&&(s=(yield h.parse(s,e,this))||s,i.parser=h)}return s}))(),i}load(t,e){return V(this,null,function*(){this._parsersValidated||this._validateParsers();let i=0,s={},o=Mr(t),n=ne(t,h=>({alias:[h],src:h})),a=n.length,l=n.map(h=>V(this,null,function*(){let d=U.path.toAbsolute(h.src);if(!s[h.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,h)),s[h.src]=yield this.promiseCache[d].promise,e&&e(++i/a)}catch(f){throw delete this.promiseCache[d],delete s[h.src],new Error(`[Loader.load] Failed to load ${d}.
${f}`)}}));return yield Promise.all(l),o?s[n[0].src]:s})}unload(t){return V(this,null,function*(){let e=ne(t,i=>({alias:[i],src:i})).map(i=>V(this,null,function*(){var n,a;let s=U.path.toAbsolute(i.src),o=this.promiseCache[s];if(o){let l=yield o.promise;delete this.promiseCache[s],(a=(n=o.parser)==null?void 0:n.unload)==null||a.call(n,l,i,this)}}));yield Promise.all(e)})}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),Ne(gt({},t),{[e.name]:e})),{})}}});var Ut,qr=g(()=>{Ut=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Ut||{})});var GE,zE,Jl,yf=g(()=>{L();$r();Yr();qr();GE=".json",zE="application/json",Jl={extension:{type:D.LoadParser,priority:Ut.Low},name:"loadJson",test(r){return Fe(r,zE)||Zt(r,GE)},load(r){return V(this,null,function*(){return yield(yield N.ADAPTER.fetch(r)).json()})}};G.add(Jl)});var VE,HE,th,vf=g(()=>{L();$r();Yr();qr();VE=".txt",HE="text/plain",th={name:"loadTxt",extension:{type:D.LoadParser,priority:Ut.Low},test(r){return Fe(r,HE)||Zt(r,VE)},load(r){return V(this,null,function*(){return yield(yield N.ADAPTER.fetch(r)).text()})}};G.add(th)});function eh(r){let t=U.path.extname(r),e=U.path.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)),i=e.length>0;for(let o of e)if(!o.match($E)){i=!1;break}let s=e.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}function qE(r){return YE.test(r)?r:encodeURI(r)}var XE,jE,WE,$E,YE,rh,_f=g(()=>{L();$r();Yr();qr();XE=["normal","bold","100","200","300","400","500","600","700","800","900"],jE=[".ttf",".otf",".woff",".woff2"],WE=["font/ttf","font/otf","font/woff","font/woff2"],$E=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;YE=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;rh={extension:{type:D.LoadParser,priority:Ut.Low},name:"loadWebFont",test(r){return Fe(r,WE)||Zt(r,jE)},load(r,t){return V(this,null,function*(){var i,s,o,n,a,l;let e=N.ADAPTER.getFontFaceSet();if(e){let h=[],d=(s=(i=t.data)==null?void 0:i.family)!=null?s:eh(r),f=(a=(n=(o=t.data)==null?void 0:o.weights)==null?void 0:n.filter(p=>XE.includes(p)))!=null?a:["normal"],m=(l=t.data)!=null?l:{};for(let p=0;p<f.length;p++){let v=f[p],b=new FontFace(d,`url(${qE(r)})`,Ne(gt({},m),{weight:v}));yield b.load(),e.add(b),h.push(b)}return h.length===1?h[0]:h}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>N.ADAPTER.getFontFaceSet().delete(t))}};G.add(rh)});var ev,bf,KE,ZE,QE,Tf,Af,Ef,rv=g(()=>{ev=0,KE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",ZE={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${KE}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},QE={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`},Af=class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{let e=URL.createObjectURL(new Blob([ZE.code],{type:"application/javascript"})),i=new Worker(e);i.addEventListener("message",s=>{i.terminate(),URL.revokeObjectURL(e),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}_initWorkers(){return V(this,null,function*(){this._initialized||(this._initialized=!0)})}getWorker(){bf===void 0&&(bf=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<bf&&(Tf||(Tf=URL.createObjectURL(new Blob([QE.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Tf),t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}_run(t,e){return V(this,null,function*(){yield this._initWorkers();let i=new Promise((s,o)=>{this.queue.push({id:t,arguments:e,resolve:s,reject:o})});return this.next(),i})}next(){if(!this.queue.length)return;let t=this.getWorker();if(!t)return;let e=this.queue.pop(),i=e.id;this.resolveHash[ev]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:ev++,id:i})}},Ef=new Af});function je(r,t,e){r.resource.internal=!0;let i=new tt(r),s=()=>{delete t.promiseCache[e],er.has(e)&&er.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}var Po=g(()=>{L();qn()});function ih(r){return V(this,null,function*(){let t=yield N.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);let e=yield t.blob();return yield createImageBitmap(e)})}var JE,tw,Pr,Io=g(()=>{L();$r();Yr();qr();rv();Po();JE=[".jpeg",".jpg",".png",".webp",".avif"],tw=["image/jpeg","image/png","image/webp","image/avif"];Pr={name:"loadTextures",extension:{type:D.LoadParser,priority:Ut.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Fe(r,tw)||Zt(r,JE)},load(r,t,e){return V(this,null,function*(){var a,l;let i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap,s;i?this.config.preferWorkers&&(yield Ef.isImageBitmapSupported())?s=yield Ef.loadImageBitmap(r):s=yield ih(r):s=yield new Promise((h,d)=>{let f=new Image;f.crossOrigin=this.config.crossOrigin,f.src=r,f.complete?h(f):(f.onload=()=>h(f),f.onerror=m=>d(m))});let o=gt({},t.data);(a=o.resolution)!=null||(o.resolution=U.getResolutionOfUrl(r)),i&&((l=o.resourceOptions)==null?void 0:l.ownsImageBitmap)===void 0&&(o.resourceOptions=gt({},o.resourceOptions),o.resourceOptions.ownsImageBitmap=!0);let n=new ot(s,o);return n.resource.src=r,je(n,e,r)})},unload(r){r.destroy(!0)}};G.add(Pr)});var ew,rw,sh,wf=g(()=>{L();$r();Yr();qr();Io();Po();ew=".svg",rw="image/svg+xml",sh={extension:{type:D.LoadParser,priority:Ut.High},name:"loadSVG",test(r){return Fe(r,rw)||Zt(r,ew)},testParse(r){return V(this,null,function*(){return as.test(r)})},parse(r,t,e){return V(this,null,function*(){var o;let i=new as(r,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);yield i.load();let s=new ot(i,gt({resolution:U.getResolutionOfUrl(r)},t==null?void 0:t.data));return s.resource.src=t.src,je(s,e,t.src)})},load(r,t){return V(this,null,function*(){return(yield N.ADAPTER.fetch(r)).text()})},unload:Pr.unload};G.add(sh)});var iw,sw,oh,Sf=g(()=>{L();$r();Yr();qr();Po();iw=[".mp4",".m4v",".webm",".ogv"],sw=["video/mp4","video/webm","video/ogg"],oh={name:"loadVideo",extension:{type:D.LoadParser,priority:Ut.High},config:{defaultAutoPlay:!0},test(r){return Fe(r,sw)||Zt(r,iw)},load(r,t,e){return V(this,null,function*(){var n;let i,s=yield(yield N.ADAPTER.fetch(r)).blob(),o=URL.createObjectURL(s);try{let a=gt({autoPlay:this.config.defaultAutoPlay},(n=t==null?void 0:t.data)==null?void 0:n.resourceOptions),l=new vo(o,a);yield l.load();let h=new ot(l,gt({alphaMode:yield U.detectVideoAlphaMode(),resolution:U.getResolutionOfUrl(r)},t==null?void 0:t.data));h.resource.src=r,i=je(h,e,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(a){throw URL.revokeObjectURL(o),a}return i})},unload(r){r.destroy(!0)}};G.add(oh)});var iv=g(()=>{Po()});var sv=g(()=>{wf();Io();Sf();iv()});var Cf=g(()=>{qr();yf();vf();_f();sv()});var nh,ov=g(()=>{L();us();Kl();Mo();nh=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){var e,i,s;if(this._bundleIdConnector=(e=t.connector)!=null?e:this._bundleIdConnector,this._createBundleAssetId=(i=t.createBundleAssetId)!=null?i:this._createBundleAssetId,this._extractAssetIdFromBundle=(s=t.extractAssetIdFromBundle)!=null?s:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{let e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){let{alias:e,name:i,src:s,srcs:o}=t;return ne(e||i||s||o,n=>{var a;return typeof n=="string"?n:Array.isArray(n)?n.map(l=>{var h,d;return(d=(h=l==null?void 0:l.src)!=null?h:l==null?void 0:l.srcs)!=null?d:l}):n!=null&&n.src||n!=null&&n.srcs?(a=n.src)!=null?a:n.srcs:n},!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){let i=[];Array.isArray(e)?e.forEach(s=>{var l,h;let o=(l=s.src)!=null?l:s.srcs,n=(h=s.alias)!=null?h:s.name,a;if(typeof n=="string"){let d=this._createBundleAssetId(t,n);i.push(d),a=[n,d]}else{let d=n.map(f=>this._createBundleAssetId(t,f));i.push(...d),a=[...n,...d]}this.add(Ne(gt({},s),{alias:a,src:o}))}):Object.keys(e).forEach(s=>{var n;let o=[s,this._createBundleAssetId(t,s)];if(typeof e[s]=="string")this.add({alias:o,src:e[s]});else if(Array.isArray(e[s]))this.add({alias:o,src:e[s]});else{let a=e[s],l=(n=a.src)!=null?n:a.srcs;this.add(Ne(gt({},a),{alias:o,src:Array.isArray(l)?l:[l]}))}i.push(...o)}),this._bundles[t]=i}add(t,e,i,s,o){let n=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(U.deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),n.push({alias:t,src:e,data:i,format:s,loadParser:o})):Array.isArray(t)?n.push(...t):n.push(t);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},ne(n).forEach(l=>{let{src:h,srcs:d}=l,{data:f,format:m,loadParser:p}=l,v=ne(h||d).map(S=>typeof S=="string"?Yn(S):Array.isArray(S)?S:[S]),b=this.getAlias(l);Array.isArray(b)?b.forEach(a):a(b);let E=[];v.forEach(S=>{S.forEach(C=>{var A,P,X;let w={};if(typeof C!="object"){w.src=C;for(let F=0;F<this._parsers.length;F++){let I=this._parsers[F];if(I.test(C)){w=I.parse(C);break}}}else f=(A=C.data)!=null?A:f,m=(P=C.format)!=null?P:m,p=(X=C.loadParser)!=null?X:p,w=gt(gt({},w),C);if(!b)throw new Error(`[Resolver] alias is undefined for this asset: ${w.src}`);w=this.buildResolvedAsset(w,{aliases:b,data:f,format:m,loadParser:p}),E.push(w)})}),b.forEach(S=>{this._assetMap[S]=E})})}resolveBundle(t){let e=Mr(t);t=ne(t);let i={};return t.forEach(s=>{let o=this._bundles[s];if(o){let n=this.resolve(o),a={};for(let l in n){let h=n[l];a[this._extractAssetIdFromBundle(s,l)]=h}i[s]=a}}),e?i[t[0]]:i}resolveUrl(t){let e=this.resolve(t);if(typeof t!="string"){let i={};for(let s in e)i[s]=e[s].src;return i}return e.src}resolve(t){let e=Mr(t);t=ne(t);let i={};return t.forEach(s=>{var o;if(!this._resolverHash[s])if(this._assetMap[s]){let n=this._assetMap[s],a=n[0],l=this._getPreferredOrder(n);l==null||l.priority.forEach(h=>{l.params[h].forEach(d=>{let f=n.filter(m=>m[h]?m[h]===d:!1);f.length&&(n=f)})}),this._resolverHash[s]=(o=n[0])!=null?o:a}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){let i=t[0],s=this._preferredOrder.find(o=>o.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;let e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){var a;let{aliases:i,data:s,loadParser:o,format:n}=e;return(this._basePath||this._rootPath)&&(t.src=U.path.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=(a=i!=null?i:t.alias)!=null?a:[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data=gt(gt({},s||{}),t.data),t.loadParser=o!=null?o:t.loadParser,t.format=n!=null?n:U.path.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}});var Kn,Ro,nv=g(()=>{L();Qy();qn();tv();Cf();ov();us();Mo();Io();Kn=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new nh,this.loader=new Ql,this.cache=er,this._backgroundLoader=new ql(this.loader),this._backgroundLoader.active=!0,this.reset()}init(){return V(this,arguments,function*(t={}){var o,n,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=yield this.load(l)),this.resolver.addManifest(l)}let e=(n=(o=t.texturePreference)==null?void 0:o.resolution)!=null?n:1,i=typeof e=="number"?[e]:e,s=yield this._detectFormats({preferredFormats:(a=t.texturePreference)==null?void 0:a.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)})}add(t,e,i,s,o){this.resolver.add(t,e,i,s,o)}load(t,e){return V(this,null,function*(){this._initialized||(yield this.init());let i=Mr(t),s=ne(t).map(a=>{if(typeof a!="string"){let l=this.resolver.getAlias(a);return l.some(h=>!this.resolver.hasKey(h))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),o=this.resolver.resolve(s),n=yield this._mapLoadToResolve(o,e);return i?n[s[0]]:n})}addBundle(t,e){this.resolver.addBundle(t,e)}loadBundle(t,e){return V(this,null,function*(){this._initialized||(yield this.init());let i=!1;typeof t=="string"&&(i=!0,t=[t]);let s=this.resolver.resolveBundle(t),o={},n=Object.keys(s),a=0,l=0,h=()=>{e==null||e(++a/l)},d=n.map(f=>{let m=s[f];return l+=Object.keys(m).length,this._mapLoadToResolve(m,h).then(p=>{o[f]=p})});return yield Promise.all(d),i?o[t[0]]:o})}backgroundLoad(t){return V(this,null,function*(){this._initialized||(yield this.init()),typeof t=="string"&&(t=[t]);let e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))})}backgroundLoadBundle(t){return V(this,null,function*(){this._initialized||(yield this.init()),typeof t=="string"&&(t=[t]);let e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return er.get(t);let e={};for(let i=0;i<t.length;i++)e[i]=er.get(t[i]);return e}_mapLoadToResolve(t,e){return V(this,null,function*(){let i=Object.values(t),s=Object.keys(t);this._backgroundLoader.active=!1;let o=yield this.loader.load(i,e);this._backgroundLoader.active=!0;let n={};return i.forEach((a,l)=>{let h=o[a.src],d=[a.src];a.alias&&d.push(...a.alias),n[s[l]]=h,er.set(d,h)}),n})}unload(t){return V(this,null,function*(){this._initialized||(yield this.init());let e=ne(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(e);yield this._unloadFromResolved(i)})}unloadBundle(t){return V(this,null,function*(){this._initialized||(yield this.init()),t=ne(t);let e=this.resolver.resolveBundle(t),i=Object.keys(e).map(s=>this._unloadFromResolved(e[s]));yield Promise.all(i)})}_unloadFromResolved(t){return V(this,null,function*(){let e=Object.values(t);e.forEach(i=>{er.remove(i.src)}),yield this.loader.unload(e)})}_detectFormats(t){return V(this,null,function*(){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(let i of t.detections)t.skipDetections||(yield i.test())?e=yield i.add(e):t.skipDetections||(e=yield i.remove(e));return e=e.filter((i,s)=>e.indexOf(i)===s),e})}get detections(){return this._detections}get preferWorkers(){return Pr.config.preferWorkers}set preferWorkers(t){U.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}},Ro=new Kn;G.handleByList(D.LoadParser,Ro.loader.parsers).handleByList(D.ResolveParser,Ro.resolver.parsers).handleByList(D.CacheParser,Ro.cache.parsers).handleByList(D.DetectionParser,Ro.detections)});var ah,Mf=g(()=>{L();ah={extension:D.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof tt),getCacheableAssets:(r,t)=>{let e={};return r.forEach(i=>{t.forEach((s,o)=>{e[i+(o===0?"":o+1)]=s})}),e}};G.add(ah)});var av=g(()=>{Mf()});var lv=g(()=>{qn();av()});function lh(r){return V(this,null,function*(){if("Image"in globalThis)return new Promise(t=>{let e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let t=yield(yield fetch(r)).blob();yield createImageBitmap(t)}catch(t){return!1}return!0}return!1})}var Pf=g(()=>{});var hh,If=g(()=>{L();Pf();hh={extension:{type:D.DetectionParser,priority:1},test:()=>V(void 0,null,function*(){return lh("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),add:r=>V(void 0,null,function*(){return[...r,"avif"]}),remove:r=>V(void 0,null,function*(){return r.filter(t=>t!=="avif")})};G.add(hh)});var uh,Rf=g(()=>{L();Pf();uh={extension:{type:D.DetectionParser,priority:0},test:()=>V(void 0,null,function*(){return lh("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")}),add:r=>V(void 0,null,function*(){return[...r,"webp"]}),remove:r=>V(void 0,null,function*(){return r.filter(t=>t!=="webp")})};G.add(uh)});var hv,ch,Ff=g(()=>{L();hv=["png","jpg","jpeg"],ch={extension:{type:D.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:r=>V(void 0,null,function*(){return[...r,...hv]}),remove:r=>V(void 0,null,function*(){return r.filter(t=>!hv.includes(t))})};G.add(ch)});function Fo(r){return ow?!1:document.createElement("video").canPlayType(r)!==""}var ow,dh=g(()=>{ow="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope});var fh,Df=g(()=>{L();dh();fh={extension:{type:D.DetectionParser,priority:0},test:()=>V(void 0,null,function*(){return Fo("video/webm")}),add:r=>V(void 0,null,function*(){return[...r,"webm"]}),remove:r=>V(void 0,null,function*(){return r.filter(t=>t!=="webm")})};G.add(fh)});var mh,Nf=g(()=>{L();dh();mh={extension:{type:D.DetectionParser,priority:0},test:()=>V(void 0,null,function*(){return Fo("video/mp4")}),add:r=>V(void 0,null,function*(){return[...r,"mp4","m4v"]}),remove:r=>V(void 0,null,function*(){return r.filter(t=>t!=="mp4"&&t!=="m4v")})};G.add(mh)});var ph,Bf=g(()=>{L();dh();ph={extension:{type:D.DetectionParser,priority:0},test:()=>V(void 0,null,function*(){return Fo("video/ogg")}),add:r=>V(void 0,null,function*(){return[...r,"ogv"]}),remove:r=>V(void 0,null,function*(){return r.filter(t=>t!=="ogv")})};G.add(ph)});var uv=g(()=>{If();Rf();Ff();Df();Nf();Bf()});var cv=g(()=>{uv()});var Of=g(()=>{Cf()});var gh,Lf=g(()=>{L();Of();Io();gh={extension:D.ResolveParser,test:Pr.test,parse:r=>{var t,e;return{resolution:parseFloat((e=(t=N.RETINA_PREFIX.exec(r))==null?void 0:t[1])!=null?e:"1"),format:U.path.extname(r).slice(1),src:r}}};G.add(gh)});var dv=g(()=>{Lf()});var fv=g(()=>{dv()});var Do=g(()=>{Zy();nv();lv();cv();Of();fv();Zl();qn();Mf();If();Rf();Ff();Df();Nf();Bf();qr();yf();vf();_f();wf();Io();Sf();Po();Lf();$r();Yr();us();gf();Kl();Mo()});var Ae,Kr,Zn=g(()=>{Ae=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r))(Ae||{}),Kr={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1}});function mv(){No={s3tc:Zr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Zr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Zr.getExtension("WEBGL_compressed_texture_etc"),etc1:Zr.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Zr.getExtension("WEBGL_compressed_texture_pvrtc")||Zr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Zr.getExtension("WEBGL_compressed_texture_atc"),astc:Zr.getExtension("WEBGL_compressed_texture_astc")}}var Zr,No,xh,kf=g(()=>{L();xh={extension:{type:D.DetectionParser,priority:2},test:()=>V(void 0,null,function*(){let r=N.ADAPTER.createCanvas().getContext("webgl");return r?(Zr=r,!0):(console.warn("WebGL not available for compressed textures."),!1)}),add:r=>V(void 0,null,function*(){No||mv();let t=[];for(let e in No)No[e]&&t.push(e);return[...t,...r]}),remove:r=>V(void 0,null,function*(){return No||mv(),r.filter(t=>!(t in No))})};G.add(xh)});var cs,yh=g(()=>{L();cs=class extends Ze{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,s;typeof t=="string"?(i=t,s=new Uint8Array):(i=null,s=t),super(s,e),this.origin=i,this.buffer=s?new kr(s):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new kr(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}});var Ir,Qn=g(()=>{Zn();yh();Ir=class r extends cs{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=r._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||r._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){let s=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let o=0,n=this.levels;o<n;o++){let{levelID:a,levelWidth:l,levelHeight:h,levelBuffer:d}=this._levelBuffers[o];s.compressedTexImage2D(s.TEXTURE_2D,a,this.format,l,h,0,d)}return!0}onBlobLoaded(){this._levelBuffers=r._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,i,s,o,n,a){let l=new Array(i),h=t.byteOffset,d=n,f=a,m=d+s-1&~(s-1),p=f+o-1&~(o-1),v=m*p*Kr[e];for(let b=0;b<i;b++)l[b]={levelID:b,levelWidth:i>1?d:m,levelHeight:i>1?f:p,levelBuffer:new Uint8Array(t.buffer,h,v)},h+=v,d=d>>1||1,f=f>>1||1,m=d+s-1&~(s-1),p=f+o-1&~(o-1),v=m*p*Kr[e];return l}}});var vh=g(()=>{yh();Qn()});function Jn(r){let t=new Uint32Array(r);if(t[0]!==aw)throw new Error("Invalid DDS file magic word");let e=new Uint32Array(r,0,_h/Uint32Array.BYTES_PER_ELEMENT),i=e[bh.HEIGHT],s=e[bh.WIDTH],o=e[bh.MIPMAP_COUNT],n=new Uint32Array(r,bh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,nw/Uint32Array.BYTES_PER_ELEMENT),a=n[hw];if(a&cw){let l=n[lw.FOURCC];if(l!==yw){let C=_w[l],w=Uf+_h,A=new Uint8Array(r,w);return[new Ir(A,{format:C,width:s,height:i,levels:o})]}let h=Uf+_h,d=new Uint32Array(t.buffer,h,pv/Uint32Array.BYTES_PER_ELEMENT),f=d[Th.DXGI_FORMAT],m=d[Th.RESOURCE_DIMENSION],p=d[Th.MISC_FLAG],v=d[Th.ARRAY_SIZE],b=bw[f];if(b===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(p===vw)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");let E=new Array,S=Uf+_h+pv;if(v===1)E.push(new Uint8Array(r,S));else{let C=Kr[b],w=0,A=s,P=i;for(let F=0;F<o;F++){let I=Math.max(1,A+3&-4),q=Math.max(1,P+3&-4),et=I*q*C;w+=et,A=A>>>1,P=P>>>1}let X=S;for(let F=0;F<v;F++)E.push(new Uint8Array(r,X,w)),X+=w}return E.map(C=>new Ir(C,{format:b,width:s,height:i,levels:o}))}throw a&dw?new Error("DDSParser does not support uncompressed texture data."):a&fw?new Error("DDSParser does not supported YUV uncompressed texture data."):a&mw?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&uw?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Uf,_h,nw,pv,aw,bh,lw,Th,hw,uw,cw,dw,fw,mw,pw,gw,xw,yw,vw,_w,bw,Ah=g(()=>{Zn();vh();Qn();Uf=4,_h=124,nw=32,pv=20,aw=542327876,bh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},lw={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Th={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},hw=1,uw=2,cw=4,dw=64,fw=512,mw=131072,pw=827611204,gw=861165636,xw=894720068,yw=808540228,vw=4,_w={[pw]:Ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,[gw]:Ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,[xw]:Ae.COMPRESSED_RGBA_S3TC_DXT5_EXT},bw={70:Ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}});function ea(r,t,e=!1){let i=new DataView(t);if(!Aw(r,i))return null;let s=i.getUint32(dr.ENDIANNESS,!0)===Tw,o=i.getUint32(dr.GL_TYPE,s),n=i.getUint32(dr.GL_FORMAT,s),a=i.getUint32(dr.GL_INTERNAL_FORMAT,s),l=i.getUint32(dr.PIXEL_WIDTH,s),h=i.getUint32(dr.PIXEL_HEIGHT,s)||1,d=i.getUint32(dr.PIXEL_DEPTH,s)||1,f=i.getUint32(dr.NUMBER_OF_ARRAY_ELEMENTS,s)||1,m=i.getUint32(dr.NUMBER_OF_FACES,s),p=i.getUint32(dr.NUMBER_OF_MIPMAP_LEVELS,s),v=i.getUint32(dr.BYTES_OF_KEY_VALUE_DATA,s);if(h===0||d!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");let b=4,E=4,S=l+3&-4,C=h+3&-4,w=new Array(f),A=l*h;o===0&&(A=S*C);let P;if(o!==0?ta[o]?P=ta[o]*Eh[n]:P=wh[o]:P=Kr[a],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");let X=e?ww(i,v,s):null,F=A*P,I=l,q=h,et=S,mt=C,Y=Gf+v;for(let R=0;R<p;R++){let z=i.getUint32(Y,s),Q=Y+4;for(let ft=0;ft<f;ft++){let O=w[ft];O||(O=w[ft]=new Array(p)),O[R]={levelID:R,levelWidth:p>1||o!==0?I:et,levelHeight:p>1||o!==0?q:mt,levelBuffer:new Uint8Array(t,Q,F)},Q+=F}Y+=z+4,Y=Y%4!==0?Y+4-Y%4:Y,I=I>>1||1,q=q>>1||1,et=I+b-1&~(b-1),mt=q+E-1&~(E-1),F=et*mt*P}return o!==0?{uncompressed:w.map(R=>{let z=R[0].levelBuffer,Q=!1;return o===J.FLOAT?z=new Float32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4):o===J.UNSIGNED_INT?(Q=!0,z=new Uint32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)):o===J.INT&&(Q=!0,z=new Int32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)),{resource:new Ze(z,{width:R[0].levelWidth,height:R[0].levelHeight}),type:o,format:Q?Ew(n):n}}),kvData:X}:{compressed:w.map(R=>new Ir(null,{format:a,width:l,height:h,levels:p,levelBuffers:R})),kvData:X}}function Aw(r,t){for(let e=0;e<gv.length;e++)if(t.getUint8(e)!==gv[e])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function Ew(r){switch(r){case H.RGBA:return H.RGBA_INTEGER;case H.RGB:return H.RGB_INTEGER;case H.RG:return H.RG_INTEGER;case H.RED:return H.RED_INTEGER;default:return r}}function ww(r,t,e){let i=new Map,s=0;for(;s<t;){let o=r.getUint32(Gf+s,e),n=Gf+s+4,a=3-(o+3)%4;if(o===0||o>t-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<o&&r.getUint8(n+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}let h=new TextDecoder().decode(new Uint8Array(r.buffer,n,l)),d=new DataView(r.buffer,n+l+1,o-l-1);i.set(h,d),s+=4+o+a}return i}var gv,Tw,dr,Gf,ta,Eh,wh,Sh=g(()=>{L();Zn();vh();Qn();gv=[171,75,84,88,32,49,49,187,13,10,26,10],Tw=67305985,dr={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Gf=64,ta={[J.UNSIGNED_BYTE]:1,[J.UNSIGNED_SHORT]:2,[J.INT]:4,[J.UNSIGNED_INT]:4,[J.FLOAT]:4,[J.HALF_FLOAT]:8},Eh={[H.RGBA]:4,[H.RGB]:3,[H.RG]:2,[H.RED]:1,[H.LUMINANCE]:1,[H.LUMINANCE_ALPHA]:2,[H.ALPHA]:1},wh={[J.UNSIGNED_SHORT_4_4_4_4]:2,[J.UNSIGNED_SHORT_5_5_5_1]:2,[J.UNSIGNED_SHORT_5_6_5]:2}});var Ch=g(()=>{Ah();Sh()});var Mh,zf=g(()=>{Do();L();Ch();Ah();Mh={extension:{type:D.LoadParser,priority:Ut.High},name:"loadDDS",test(r){return Zt(r,".dds")},load(r,t,e){return V(this,null,function*(){let i=yield(yield N.ADAPTER.fetch(r)).arrayBuffer(),s=Jn(i).map(o=>{let n=new ot(o,gt({mipmap:qt.OFF,alphaMode:kt.NO_PREMULTIPLIED_ALPHA,resolution:U.getResolutionOfUrl(r)},t.data));return je(n,e,r)});return s.length===1?s[0]:s})},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};G.add(Mh)});var Ph,Vf=g(()=>{Do();L();Ch();Sh();Ph={extension:{type:D.LoadParser,priority:Ut.High},name:"loadKTX",test(r){return Zt(r,".ktx")},load(r,t,e){return V(this,null,function*(){let i=yield(yield N.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:n}=ea(r,i),a=s!=null?s:o,l=gt({mipmap:qt.OFF,alphaMode:kt.NO_PREMULTIPLIED_ALPHA,resolution:U.getResolutionOfUrl(r)},t.data),h=a.map(d=>{var p;a===o&&Object.assign(l,{type:d.type,format:d.format});let f=(p=d.resource)!=null?p:d,m=new ot(f,l);return m.ktxKeyValueData=n,je(m,e,r)});return h.length===1?h[0]:h})},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};G.add(Ph)});var Ih,Hf=g(()=>{L();Ih={extension:D.ResolveParser,test:r=>{let t=U.path.extname(r).slice(1);return["basis","ktx","dds"].includes(t)},parse:r=>{var e,i,s,o;let t=U.path.extname(r).slice(1);if(t==="ktx"){let n=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(n.some(a=>r.endsWith(a)))return{resolution:parseFloat((i=(e=N.RETINA_PREFIX.exec(r))==null?void 0:e[1])!=null?i:"1"),format:n.find(a=>r.endsWith(a)),src:r}}return{resolution:parseFloat((o=(s=N.RETINA_PREFIX.exec(r))==null?void 0:s[1])!=null?o:"1"),format:t,src:r}}};G.add(Ih)});var xv=g(()=>{kf();zf();Vf();Hf()});var yv=g(()=>{Zn();xv();Ch();vh();kf();zf();Vf();Hf();Ah();Sh();yh();Qn()});var Rh,Sw,vv,Xf,_v=g(()=>{L();Rh=new st,Sw=4,vv=class ra{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;let t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}image(t,e,i,s){return V(this,null,function*(){let o=new Image;return o.src=yield this.base64(t,e,i,s),o})}base64(t,e,i,s){return V(this,null,function*(){let o=this.canvas(t,s);if(o.toBlob!==void 0)return new Promise((n,a)=>{o.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}let h=new FileReader;h.onload=()=>n(h.result),h.onerror=a,h.readAsDataURL(l)},e,i)});if(o.toDataURL!==void 0)return o.toDataURL(e,i);if(o.convertToBlob!==void 0){let n=yield o.convertToBlob({type:e,quality:i});return new Promise((a,l)=>{let h=new FileReader;h.onload=()=>a(h.result),h.onerror=l,h.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})}canvas(t,e){let{pixels:i,width:s,height:o,flipY:n,premultipliedAlpha:a}=this._rawPixels(t,e);n&&ra._flipY(i,s,o),a&&ra._unpremultiplyAlpha(i);let l=new U.CanvasRenderTarget(s,o,1),h=new ImageData(new Uint8ClampedArray(i.buffer),s,o);return l.context.putImageData(h,0,0),l.canvas}pixels(t,e){let{pixels:i,width:s,height:o,flipY:n,premultipliedAlpha:a}=this._rawPixels(t,e);return n&&ra._flipY(i,s,o),a&&ra._unpremultiplyAlpha(i),i}_rawPixels(t,e){let i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,o=!1,n=!1,a,l=!1;t&&(t instanceof He?a=t:(a=i.generateTexture(t,{region:e,resolution:i.resolution,multisample:i.multisample}),l=!0,e&&(Rh.width=e.width,Rh.height=e.height,e=Rh)));let h=i.gl;if(a){if(s=a.baseTexture.resolution,e=e!=null?e:a.frame,o=!1,n=a.baseTexture.alphaMode>0&&a.baseTexture.format===H.RGBA,!l){i.renderTexture.bind(a);let p=a.framebuffer.glFramebuffers[i.CONTEXT_UID];p.blitFramebuffer&&i.framebuffer.bind(p.blitFramebuffer)}}else s=i.resolution,e||(e=Rh,e.width=i.width/s,e.height=i.height/s),o=!0,n=this._rendererPremultipliedAlpha,i.renderTexture.bind();let d=Math.max(Math.round(e.width*s),1),f=Math.max(Math.round(e.height*s),1),m=new Uint8Array(Sw*d*f);return h.readPixels(Math.round(e.x*s),Math.round(e.y*s),d,f,h.RGBA,h.UNSIGNED_BYTE,m),l&&(a==null||a.destroy(!0)),{pixels:m,width:d,height:f,flipY:o,premultipliedAlpha:n}}destroy(){this.renderer=null}static _flipY(t,e,i){let s=e<<2,o=i>>1,n=new Uint8Array(s);for(let a=0;a<o;a++){let l=a*s,h=(i-a-1)*s;n.set(t.subarray(l,l+s)),t.copyWithin(l,h,h+s),t.set(n,h)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));let e=t.length;for(let i=0;i<e;i+=4){let s=t[i+3];if(s!==0){let o=255.001/s;t[i]=t[i]*o+.5,t[i+1]=t[i+1]*o+.5,t[i+2]=t[i+2]*o+.5}}}};vv.extension={name:"extract",type:D.RendererSystem};Xf=vv;G.add(Xf)});var bv=g(()=>{_v()});var vi,Fh=g(()=>{L();vi={build(r){let t=r.points,e,i,s,o,n,a;if(r.type===It.CIRC){let v=r.shape;e=v.x,i=v.y,n=a=v.radius,s=o=0}else if(r.type===It.ELIP){let v=r.shape;e=v.x,i=v.y,n=v.width,a=v.height,s=o=0}else{let v=r.shape,b=v.width/2,E=v.height/2;e=v.x+b,i=v.y+E,n=a=Math.max(0,Math.min(v.radius,Math.min(b,E))),s=b-n,o=E-a}if(!(n>=0&&a>=0&&s>=0&&o>=0)){t.length=0;return}let l=Math.ceil(2.3*Math.sqrt(n+a)),h=l*8+(s?4:0)+(o?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=e+s,t[1]=t[3]=i+o,t[2]=t[4]=e-s,t[5]=t[7]=i-o;return}let d=0,f=l*4+(s?2:0)+2,m=f,p=h;{let v=s+n,b=o,E=e+v,S=e-v,C=i+b;if(t[d++]=E,t[d++]=C,t[--f]=C,t[--f]=S,o){let w=i-b;t[m++]=S,t[m++]=w,t[--p]=w,t[--p]=E}}for(let v=1;v<l;v++){let b=Math.PI/2*(v/l),E=s+Math.cos(b)*n,S=o+Math.sin(b)*a,C=e+E,w=e-E,A=i+S,P=i-S;t[d++]=C,t[d++]=A,t[--f]=A,t[--f]=w,t[m++]=w,t[m++]=P,t[--p]=P,t[--p]=C}{let v=s,b=o+a,E=e+v,S=e-v,C=i+b,w=i-b;t[d++]=E,t[d++]=C,t[--p]=w,t[--p]=E,s&&(t[d++]=S,t[d++]=C,t[--p]=w,t[--p]=S)}},triangulate(r,t){let e=r.points,i=t.points,s=t.indices;if(e.length===0)return;let o=i.length/2,n=o,a,l;if(r.type!==It.RREC){let d=r.shape;a=d.x,l=d.y}else{let d=r.shape;a=d.x+d.width/2,l=d.y+d.height/2}let h=r.matrix;i.push(r.matrix?h.a*a+h.c*l+h.tx:a,r.matrix?h.b*a+h.d*l+h.ty:l),o++,i.push(e[0],e[1]);for(let d=2;d<e.length;d+=2)i.push(e[d],e[d+1]),s.push(o++,n,o);s.push(n+1,n,o)}}});function Tv(r,t=!1){let e=r.length;if(e<6)return;let i=0;for(let s=0,o=r[e-2],n=r[e-1];s<e;s+=2){let a=r[s],l=r[s+1];i+=(a-o)*(l+n),o=a,n=l}if(!t&&i>0||t&&i<=0){let s=e/2;for(let o=s+s%2;o<e;o+=2){let n=e-o-2,a=e-o-1,l=o,h=o+1;[r[n],r[l]]=[r[l],r[n]],[r[a],r[h]]=[r[h],r[a]]}}}var Bo,Dh=g(()=>{L();Bo={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points,i=r.holes,s=t.points,o=t.indices;if(e.length>=6){Tv(e,!1);let n=[];for(let h=0;h<i.length;h++){let d=i[h];Tv(d.points,!0),n.push(e.length/2),e=e.concat(d.points)}let a=U.earcut(e,n,2);if(!a)return;let l=s.length/2;for(let h=0;h<a.length;h+=3)o.push(a[h]+l),o.push(a[h+1]+l),o.push(a[h+2]+l);for(let h=0;h<e.length;h++)s.push(e[h])}}}});var Nh,jf=g(()=>{Nh={build(r){let t=r.shape,e=t.x,i=t.y,s=t.width,o=t.height,n=r.points;n.length=0,s>=0&&o>=0&&n.push(e,i,e+s,i,e+s,i+o,e,i+o)},triangulate(r,t){let e=r.points,i=t.points;if(e.length===0)return;let s=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(s,s+1,s+2,s+1,s+2,s+3)}}});var Bh,Wf=g(()=>{Fh();Bh={build(r){vi.build(r)},triangulate(r,t){vi.triangulate(r,t)}}});var fe,We,Ue,Av,_i=g(()=>{fe=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(fe||{}),We=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(We||{}),Ue={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},Av=Ue});var bi,Oh=g(()=>{L();_i();bi=class{static curveTo(t,e,i,s,o,n){let a=n[n.length-2],l=n[n.length-1]-e,h=a-t,d=s-e,f=i-t,m=Math.abs(l*f-h*d);if(m<1e-8||o===0)return(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e),null;let p=l*l+h*h,v=d*d+f*f,b=l*d+h*f,E=o*Math.sqrt(p)/m,S=o*Math.sqrt(v)/m,C=E*b/p,w=S*b/v,A=E*f+S*h,P=E*d+S*l,X=h*(S+C),F=l*(S+C),I=f*(E+w),q=d*(E+w),et=Math.atan2(F-P,X-A),mt=Math.atan2(q-P,I-A);return{cx:A+t,cy:P+e,radius:o,startAngle:et,endAngle:mt,anticlockwise:h*d>f*l}}static arc(t,e,i,s,o,n,a,l,h){let d=a-n,f=Ue._segmentsCount(Math.abs(d)*o,Math.ceil(Math.abs(d)/Vr)*40),m=d/(f*2),p=m*2,v=Math.cos(m),b=Math.sin(m),E=f-1,S=E%1/E;for(let C=0;C<=E;++C){let w=C+S*C,A=m+n+p*w,P=Math.cos(A),X=-Math.sin(A);h.push((v*P+b*X)*o+i,(v*-X+b*P)*o+s)}}}});var ds,Lh=g(()=>{ds=class{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}});var fs,kh=g(()=>{_i();fs=class r{static curveLength(t,e,i,s,o,n,a,l){let h=0,d=0,f=0,m=0,p=0,v=0,b=0,E=0,S=0,C=0,w=0,A=t,P=e;for(let X=1;X<=10;++X)d=X/10,f=d*d,m=f*d,p=1-d,v=p*p,b=v*p,E=b*t+3*v*d*i+3*p*f*o+m*a,S=b*e+3*v*d*s+3*p*f*n+m*l,C=A-E,w=P-S,A=E,P=S,h+=Math.sqrt(C*C+w*w);return h}static curveTo(t,e,i,s,o,n,a){let l=a[a.length-2],h=a[a.length-1];a.length-=2;let d=Ue._segmentsCount(r.curveLength(l,h,t,e,i,s,o,n)),f=0,m=0,p=0,v=0,b=0;a.push(l,h);for(let E=1,S=0;E<=d;++E)S=E/d,f=1-S,m=f*f,p=m*f,v=S*S,b=v*S,a.push(p*l+3*m*S*t+3*f*v*i+b*o,p*h+3*m*S*e+3*f*v*s+b*n)}}});function Ev(r,t,e,i,s,o,n,a){let l=r-e*s,h=t-i*s,d=r+e*o,f=t+i*o,m,p;n?(m=i,p=-e):(m=-i,p=e);let v=l+m,b=h+p,E=d+m,S=f+p;return a.push(v,b,E,S),2}function ms(r,t,e,i,s,o,n,a){let l=e-r,h=i-t,d=Math.atan2(l,h),f=Math.atan2(s-r,o-t);a&&d<f?d+=Math.PI*2:!a&&d>f&&(f+=Math.PI*2);let m=d,p=f-d,v=Math.abs(p),b=Math.sqrt(l*l+h*h),E=(15*v*Math.sqrt(b)/Math.PI>>0)+1,S=p/E;if(m+=S,a){n.push(r,t,e,i);for(let C=1,w=m;C<E;C++,w+=S)n.push(r,t,r+Math.sin(w)*b,t+Math.cos(w)*b);n.push(r,t,s,o)}else{n.push(e,i,r,t);for(let C=1,w=m;C<E;C++,w+=S)n.push(r+Math.sin(w)*b,t+Math.cos(w)*b,r,t);n.push(s,o,r,t)}return E*2}function Cw(r,t){let e=r.shape,i=r.points||e.points.slice(),s=t.closePointEps;if(i.length===0)return;let o=r.lineStyle,n=new it(i[0],i[1]),a=new it(i[i.length-2],i[i.length-1]),l=e.type!==It.POLY||e.closeStroke,h=Math.abs(n.x-a.x)<s&&Math.abs(n.y-a.y)<s;if(l){i=i.slice(),h&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));let O=(n.x+a.x)*.5,B=(a.y+n.y)*.5;i.unshift(O,B),i.push(O,B)}let d=t.points,f=i.length/2,m=i.length,p=d.length/2,v=o.width/2,b=v*v,E=o.miterLimit*o.miterLimit,S=i[0],C=i[1],w=i[2],A=i[3],P=0,X=0,F=-(C-A),I=S-w,q=0,et=0,mt=Math.sqrt(F*F+I*I);F/=mt,I/=mt,F*=v,I*=v;let Y=o.alignment,R=(1-Y)*2,z=Y*2;l||(o.cap===We.ROUND?m+=ms(S-F*(R-z)*.5,C-I*(R-z)*.5,S-F*R,C-I*R,S+F*z,C+I*z,d,!0)+2:o.cap===We.SQUARE&&(m+=Ev(S,C,F,I,R,z,!0,d))),d.push(S-F*R,C-I*R,S+F*z,C+I*z);for(let O=1;O<f-1;++O){S=i[(O-1)*2],C=i[(O-1)*2+1],w=i[O*2],A=i[O*2+1],P=i[(O+1)*2],X=i[(O+1)*2+1],F=-(C-A),I=S-w,mt=Math.sqrt(F*F+I*I),F/=mt,I/=mt,F*=v,I*=v,q=-(A-X),et=w-P,mt=Math.sqrt(q*q+et*et),q/=mt,et/=mt,q*=v,et*=v;let B=w-S,W=C-A,nt=w-P,at=X-A,Ft=B*nt+W*at,jt=W*nt-at*B,Rt=jt<0;if(Math.abs(jt)<.001*Math.abs(Ft)){d.push(w-F*R,A-I*R,w+F*z,A+I*z),Ft>=0&&(o.join===fe.ROUND?m+=ms(w,A,w-F*R,A-I*R,w-q*R,A-et*R,d,!1)+4:m+=2,d.push(w-q*z,A-et*z,w+q*R,A+et*R));continue}let Qt=(-F+S)*(-I+A)-(-F+w)*(-I+C),me=(-q+P)*(-et+A)-(-q+w)*(-et+X),Yt=(B*me-nt*Qt)/jt,ae=(at*Qt-W*me)/jt,yt=(Yt-w)*(Yt-w)+(ae-A)*(ae-A),Ot=w+(Yt-w)*R,Gt=A+(ae-A)*R,Jt=w-(Yt-w)*z,le=A-(ae-A)*z,Pi=Math.min(B*B+W*W,nt*nt+at*at),Jo=Rt?R:z,wu=Pi+Jo*Jo*b,Su=yt<=wu,Cs=o.join;if(Cs===fe.MITER&&yt/b>E&&(Cs=fe.BEVEL),Su)switch(Cs){case fe.MITER:{d.push(Ot,Gt,Jt,le);break}case fe.BEVEL:{Rt?d.push(Ot,Gt,w+F*z,A+I*z,Ot,Gt,w+q*z,A+et*z):d.push(w-F*R,A-I*R,Jt,le,w-q*R,A-et*R,Jt,le),m+=2;break}case fe.ROUND:{Rt?(d.push(Ot,Gt,w+F*z,A+I*z),m+=ms(w,A,w+F*z,A+I*z,w+q*z,A+et*z,d,!0)+4,d.push(Ot,Gt,w+q*z,A+et*z)):(d.push(w-F*R,A-I*R,Jt,le),m+=ms(w,A,w-F*R,A-I*R,w-q*R,A-et*R,d,!1)+4,d.push(w-q*R,A-et*R,Jt,le));break}}else{switch(d.push(w-F*R,A-I*R,w+F*z,A+I*z),Cs){case fe.MITER:{Rt?d.push(Jt,le,Jt,le):d.push(Ot,Gt,Ot,Gt),m+=2;break}case fe.ROUND:{Rt?m+=ms(w,A,w+F*z,A+I*z,w+q*z,A+et*z,d,!0)+2:m+=ms(w,A,w-F*R,A-I*R,w-q*R,A-et*R,d,!1)+2;break}}d.push(w-q*R,A-et*R,w+q*z,A+et*z),m+=2}}S=i[(f-2)*2],C=i[(f-2)*2+1],w=i[(f-1)*2],A=i[(f-1)*2+1],F=-(C-A),I=S-w,mt=Math.sqrt(F*F+I*I),F/=mt,I/=mt,F*=v,I*=v,d.push(w-F*R,A-I*R,w+F*z,A+I*z),l||(o.cap===We.ROUND?m+=ms(w-F*(R-z)*.5,A-I*(R-z)*.5,w-F*R,A-I*R,w+F*z,A+I*z,d,!1)+2:o.cap===We.SQUARE&&(m+=Ev(w,A,F,I,R,z,!1,d)));let Q=t.indices,ft=Ue.epsilon*Ue.epsilon;for(let O=p;O<m+p-2;++O)S=d[O*2],C=d[O*2+1],w=d[(O+1)*2],A=d[(O+1)*2+1],P=d[(O+2)*2],X=d[(O+2)*2+1],!(Math.abs(S*(A-X)+w*(X-C)+P*(C-A))<ft)&&Q.push(O,O+1,O+2)}function Mw(r,t){let e=0,i=r.shape,s=r.points||i.points,o=i.type!==It.POLY||i.closeStroke;if(s.length===0)return;let n=t.points,a=t.indices,l=s.length/2,h=n.length/2,d=h;for(n.push(s[0],s[1]),e=1;e<l;e++)n.push(s[e*2],s[e*2+1]),a.push(d,d+1),d++;o&&a.push(d,h)}function Oo(r,t){r.lineStyle.native?Mw(r,t):Cw(r,t)}var Uh=g(()=>{L();_i()});var ps,Gh=g(()=>{_i();ps=class r{static curveLength(t,e,i,s,o,n){let a=t-2*i+o,l=e-2*s+n,h=2*i-2*t,d=2*s-2*e,f=4*(a*a+l*l),m=4*(a*h+l*d),p=h*h+d*d,v=2*Math.sqrt(f+m+p),b=Math.sqrt(f),E=2*f*b,S=2*Math.sqrt(p),C=m/b;return(E*v+b*m*(v-S)+(4*p*f-m*m)*Math.log((2*b+C+v)/(C+S)))/(4*E)}static curveTo(t,e,i,s,o){let n=o[o.length-2],a=o[o.length-1],l=Ue._segmentsCount(r.curveLength(n,a,t,e,i,s)),h=0,d=0;for(let f=1;f<=l;++f){let m=f/l;h=n+(t-n)*m,d=a+(e-a)*m,o.push(h+(t+(i-t)*m-h)*m,d+(e+(s-e)*m-d)*m)}}}});var Lo,ia,gs,zh=g(()=>{L();Fh();Dh();jf();Wf();Oh();Lh();kh();Uh();Gh();Lo={[It.POLY]:Bo,[It.CIRC]:vi,[It.ELIP]:vi,[It.RECT]:Nh,[It.RREC]:Bh},ia=[],gs=[]});var xs,$f=g(()=>{xs=class r{constructor(t,e=null,i=null,s=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=s,this.type=t.type}clone(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}});var ko,wv,Vh,Yf=g(()=>{L();Ie();$f();zh();Lh();Dh();Uh();ko=new it,wv=class Sv extends hi{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ur,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),gs.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){let e=this.batches[t];e.reset(),ia.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,s=null){let o=new xs(t,e,i,s);return this.graphicsData.push(o),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;let i=new xs(t,null,null,e),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){let e=this.graphicsData;for(let i=0;i<e.length;++i){let s=e[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,ko):ko.copyFrom(t),s.shape.contains(ko.x,ko.y))){let o=!1;if(s.holes){for(let n=0;n<s.holes.length;n++)if(s.holes[n].shape.contains(ko.x,ko.y)){o=!0;break}}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;let t=this.uvs,e=this.graphicsData,i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let l=this.shapeIndex;l<e.length;l++){this.shapeIndex++;let h=e[l],d=h.fillStyle,f=h.lineStyle;Lo[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(d.visible||f.visible)&&this.processHoles(h.holes);for(let m=0;m<2;m++){let p=m===0?d:f;if(!p.visible)continue;let v=p.texture.baseTexture,b=this.indices.length,E=this.points.length/2;v.wrapMode=we.REPEAT,m===0?this.processFill(h):this.processLine(h);let S=this.points.length/2-E;S!==0&&(i&&!this._compareStyles(s,p)&&(i.end(b,E),i=null),i||(i=ia.pop()||new ds,i.begin(p,b,E),this.batches.push(i),s=p),this.addUvs(this.points,t,p.texture,E,S,p.matrix))}}let o=this.indices.length,n=this.points.length/2;if(i&&i.end(o,n),this.batches.length===0){this.batchable=!0;return}let a=n>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){let i=this.graphicsData[t],s=i.fillStyle,o=i.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);let t=this.batches;for(let e=0,i=t.length;e<i;e++){let s=t[e];for(let o=0;o<s.size;o++){let n=s.start+o;this.indicesUint16[n]=this.indicesUint16[n]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;let t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Sv.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++ot._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),gs.push(this.drawCalls[f]);this.drawCalls.length=0;let e=this.colors,i=this.textureIds,s=gs.pop();s||(s=new zr,s.texArray=new Xr),s.texArray.count=0,s.start=0,s.size=0,s.type=Ee.TRIANGLES;let o=0,n=null,a=0,l=!1,h=Ee.TRIANGLES,d=0;this.drawCalls.push(s);for(let f=0;f<this.batches.length;f++){let m=this.batches[f],p=8,v=m.style,b=v.texture.baseTexture;l!==!!v.native&&(l=!!v.native,h=l?Ee.LINES:Ee.TRIANGLES,n=null,o=p,t++),n!==b&&(n=b,b._batchEnabled!==t&&(o===p&&(t++,o=0,s.size>0&&(s=gs.pop(),s||(s=new zr,s.texArray=new Xr),this.drawCalls.push(s)),s.start=d,s.size=0,s.texArray.count=0,s.type=h),b.touched=1,b._batchEnabled=t,b._batchLocation=o,b.wrapMode=we.REPEAT,s.texArray.elements[s.texArray.count++]=b,o++)),s.size+=m.size,d+=m.size,a=b._batchLocation,this.addColors(e,v.color,v.alpha,m.attribSize,m.attribStart),this.addTextureIds(i,a,m.attribSize,m.attribStart)}ot._globalBatch=t,this.packAttributes()}packAttributes(){let t=this.points,e=this.uvs,i=this.colors,s=this.textureIds,o=new ArrayBuffer(t.length*3*4),n=new Float32Array(o),a=new Uint32Array(o),l=0;for(let h=0;h<t.length/2;h++)n[l++]=t[h*2],n[l++]=t[h*2+1],n[l++]=e[h*2],n[l++]=e[h*2+1],a[l++]=i[h],n[l++]=s[h];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Bo.triangulate(t,this):Lo[t.type].triangulate(t,this)}processLine(t){Oo(t,this);for(let e=0;e<t.holes.length;e++)Oo(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){let i=t[e];Lo[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){let t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){let s=t[i*2],o=t[i*2+1];t[i*2]=e.a*s+e.c*o+e.tx,t[i*2+1]=e.b*s+e.d*o+e.ty}}addColors(t,e,i,s,o=0){let n=dt.shared.setValue(e).toLittleEndianNumber(),a=dt.shared.setValue(n).toPremultiplied(i);t.length=Math.max(t.length,o+s);for(let l=0;l<s;l++)t[o+l]=a}addTextureIds(t,e,i,s=0){t.length=Math.max(t.length,s+i);for(let o=0;o<i;o++)t[s+o]=e}addUvs(t,e,i,s,o,n=null){let a=0,l=e.length,h=i.frame;for(;a<o;){let f=t[(s+a)*2],m=t[(s+a)*2+1];if(n){let p=n.a*f+n.c*m+n.tx;m=n.b*f+n.d*m+n.ty,f=p}a++,e.push(f/h.width,m/h.height)}let d=i.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,i,l,o)}adjustUvs(t,e,i,s){let o=e.baseTexture,n=1e-6,a=i+s*2,l=e.frame,h=l.width/o.width,d=l.height/o.height,f=l.x/l.width,m=l.y/l.height,p=Math.floor(t[i]+n),v=Math.floor(t[i+1]+n);for(let b=i+2;b<a;b+=2)p=Math.min(p,Math.floor(t[b]+n)),v=Math.min(v,Math.floor(t[b+1]+n));f-=p,m-=v;for(let b=i;b<a;b+=2)t[b]=(t[b]+f)*h,t[b+1]=(t[b+1]+m)*d}};wv.BATCHABLE_SIZE=100;Vh=wv});var Ti,Hh=g(()=>{L();Ti=class r{constructor(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){let t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}});var Uo,qf=g(()=>{_i();Hh();Uo=class r extends Ti{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=We.BUTT,this.join=fe.MITER,this.miterLimit=10}clone(){let t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=We.BUTT,this.join=fe.MITER,this.miterLimit=10}}});var Kf,Zf,ys,Cv=g(()=>{L();Ie();_i();Yf();Hh();qf();zh();Gh();kh();Oh();Kf={},Zf=class Xh extends Xt{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ti,this._lineStyle=new Uo,this._matrix=null,this._holeMode=!1,this.state=Kt.for2d(),this._geometry=t||new Vh,this._geometry.refCount++,this._transformID=-1,this._tintColor=new dt(16777215),this.blendMode=ht.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Xh(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,s=.5,o=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:s,native:o}),this.lineTextureStyle(t)}lineTextureStyle(t){let e={width:0,texture:tt.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:We.BUTT,join:fe.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();let i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){let t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new nr,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new nr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);let i=this.currentPath.points,s=i[i.length-2],o=i[i.length-1];return(s!==t||o!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,s){this._initCurve();let o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),ps.curveTo(t,e,i,s,o),this}bezierCurveTo(t,e,i,s,o,n){return this._initCurve(),fs.curveTo(t,e,i,s,o,n,this.currentPath.points),this}arcTo(t,e,i,s,o){this._initCurve(t,e);let n=this.currentPath.points,a=bi.curveTo(t,e,i,s,o,n);if(a){let{cx:l,cy:h,radius:d,startAngle:f,endAngle:m,anticlockwise:p}=a;this.arc(l,h,d,f,m,p)}return this}arc(t,e,i,s,o,n=!1){if(s===o)return this;if(!n&&o<=s?o+=Vr:n&&s<=o&&(s+=Vr),o-s===0)return this;let a=t+Math.cos(s)*i,l=e+Math.sin(s)*i,h=this._geometry.closePointEps,d=this.currentPath?this.currentPath.points:null;if(d){let f=Math.abs(d[d.length-2]-a),m=Math.abs(d[d.length-1]-l);f<h&&m<h||d.push(a,l)}else this.moveTo(a,l),d=this.currentPath.points;return bi.arc(a,l,t,e,i,s,o,n,d),this}beginFill(t=0,e){return this.beginTextureFill({texture:tt.WHITE,color:t,alpha:e})}normalizeColor(t){var i,s;let e=dt.shared.setValue((i=t.color)!=null?i:0);t.color=e.toNumber(),(s=t.alpha)!=null||(t.alpha=e.alpha)}beginTextureFill(t){let e={texture:tt.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();let i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,s){return this.drawShape(new st(t,e,i,s))}drawRoundedRect(t,e,i,s,o){return this.drawShape(new Gi(t,e,i,s,o))}drawCircle(t,e,i){return this.drawShape(new ki(t,e,i))}drawEllipse(t,e,i,s){return this.drawShape(new Ui(t,e,i,s))}drawPolygon(...t){let e,i=!0,s=t[0];s.points?(i=s.closeStroke,e=s.points):Array.isArray(t[0])?e=t[0]:e=t;let o=new nr(e);return o.closeStroke=i,this.drawShape(o),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){let t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===It.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();let e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){let t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let s=0;s<i;s++){let o=t.batches[s],n=o.style.color,a=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),h=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),d={vertexData:a,blendMode:e,indices:h,uvs:l,_batchRGB:dt.shared.setValue(n).toRgbArray(),_tintRGB:n,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=d}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){let s=this.batches[e];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}}_renderDirect(t){let e=this._resolveDirectShader(t),i=this._geometry,s=this.worldAlpha,o=e.uniforms,n=i.drawCalls;o.translationMatrix=this.transform.worldTransform,dt.shared.setValue(this._tintColor).premultiply(s).toArray(o.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let a=0,l=n.length;a<l;a++)this._renderDrawCallDirect(t,i.drawCalls[a])}_renderDrawCallDirect(t,e){let{texArray:i,type:s,size:o,start:n}=e,a=i.count;for(let l=0;l<a;l++)t.texture.bind(i.elements[l],l);t.geometry.draw(s,o,n)}_resolveDirectShader(t){let e=this.shader,i=this.pluginName;if(!e){if(!Kf[i]){let{maxTextures:s}=t.plugins[i],o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=l;let n={tint:new Float32Array([1,1,1,1]),translationMatrix:new xt,default:Te.from({uSamplers:o},!0)},a=t.plugins[i]._shader.program;Kf[i]=new se(a,n)}e=Kf[i]}return e}_calculateBounds(){this.finishPoly();let t=this._geometry;if(!t.graphicsData.length)return;let{minX:e,minY:i,maxX:s,maxY:o}=t.bounds;this._bounds.addFrame(this.transform,e,i,s,o)}containsPoint(t){return this.worldTransform.applyInverse(t,Xh._TEMP_POINT),this._geometry.containsPoint(Xh._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){let e=this.batches[t];e._tintRGB=dt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){let t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;let e=this.transform.worldTransform,i=e.a,s=e.b,o=e.c,n=e.d,a=e.tx,l=e.ty,h=this._geometry.points,d=this.vertexData,f=0;for(let m=0;m<h.length;m+=2){let p=h[m],v=h[m+1];d[f++]=i*p+o*v+a,d[f++]=n*v+s*p+l}}closePath(){let t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Zf.curves=Ue,Zf._TEMP_POINT=new it;ys=Zf});var Pw,Qf=g(()=>{zh();_i();Cv();$f();Yf();Hh();qf();Dh();Fh();jf();Wf();Uh();Oh();kh();Gh();Lh();Pw={buildPoly:Bo,buildCircle:vi,buildRectangle:Nh,buildRoundedRectangle:Bh,buildLine:Oo,ArcUtils:bi,BezierUtils:fs,QuadraticUtils:ps,BatchPart:ds,FILL_COMMANDS:Lo,BATCH_POOL:ia,DRAW_CALL_POOL:gs}});var Go,Jf=g(()=>{Go=class{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;let e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}});var tm,Mv,Pv,fr,Rv=g(()=>{L();Ie();Jf();tm=new it,Mv=new nr,Pv=class Iv extends Xt{constructor(t,e,i,s=Ee.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||Kt.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=N.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){let e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Ee.TRIANGLES&&e.length<Iv.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){let e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){let e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;let s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}calculateVertices(){let t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));let s=this.transform.worldTransform,o=s.a,n=s.b,a=s.c,l=s.d,h=s.tx,d=s.ty,f=this.vertexData;for(let m=0;m<f.length/2;m++){let p=e[m*2],v=e[m*2+1];f[m*2]=o*p+a*v+h,f[m*2+1]=n*p+l*v+d}if(this._roundPixels){let m=N.RESOLUTION;for(let p=0;p<f.length;++p)f[p]=Math.round(f[p]*m)/m}this.vertexDirty=i}calculateUvs(){let t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Go(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,tm);let e=this.geometry.getBuffer("aVertexPosition").data,i=Mv.points,s=this.geometry.getIndex().data,o=s.length,n=this.drawMode===4?3:1;for(let a=0;a+2<o;a+=n){let l=s[a]*2,h=s[a+1]*2,d=s[a+2]*2;if(i[0]=e[l],i[1]=e[l+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[d],i[5]=e[d+1],Mv.contains(tm.x,tm.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Pv.BATCHABLE_SIZE=100;fr=Pv});var rr,Fv=g(()=>{L();rr=class extends ke{constructor(t,e,i){super();let s=new Ct(t),o=new Ct(e,!0),n=new Ct(i,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,J.FLOAT).addAttribute("aTextureCoord",o,2,!1,J.FLOAT).addIndex(n),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}});var Dv,Nv=g(()=>{Dv=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`});var Bv,Ov=g(()=>{Bv=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`});var $e,Lv=g(()=>{L();Nv();Ov();$e=class extends se{constructor(t,e){let i={uSampler:t,alpha:1,uTextureMatrix:xt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||ce.from(Bv,Dv),i),this._colorDirty=!1,this.uvMatrix=new Tr(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new dt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;let t=this.texture.baseTexture.alphaMode;dt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}});var Ai=g(()=>{Rv();Jf();Fv();Lv()});var zo,em=g(()=>{Ai();zo=class extends rr{constructor(t=100,e=100,i=10,s=10){super(),this.segWidth=i,this.segHeight=s,this.width=t,this.height=e,this.build()}build(){let t=this.segWidth*this.segHeight,e=[],i=[],s=[],o=this.segWidth-1,n=this.segHeight-1,a=this.width/o,l=this.height/n;for(let d=0;d<t;d++){let f=d%this.segWidth,m=d/this.segWidth|0;e.push(f*a,m*l),i.push(f/o,m/n)}let h=o*n;for(let d=0;d<h;d++){let f=d%o,m=d/o|0,p=m*this.segWidth+f,v=m*this.segWidth+f+1,b=(m+1)*this.segWidth+f,E=(m+1)*this.segWidth+f+1;s.push(p,v,b,v,E,b)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}});var Vo,rm=g(()=>{Ai();Vo=class extends rr{constructor(t=200,e,i=0){super(new Float32Array(e.length*4),new Float32Array(e.length*4),new Uint16Array((e.length-1)*6)),this.points=e,this._width=t,this.textureScale=i,this.build()}get width(){return this._width}build(){let t=this.points;if(!t)return;let e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),s=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));let o=i.data,n=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;let a=0,l=t[0],h=this._width*this.textureScale,d=t.length;for(let m=0;m<d;m++){let p=m*4;if(this.textureScale>0){let v=l.x-t[m].x,b=l.y-t[m].y,E=Math.sqrt(v*v+b*b);l=t[m],a+=E/h}else a=m/(d-1);o[p]=a,o[p+1]=0,o[p+2]=a,o[p+3]=1}let f=0;for(let m=0;m<d-1;m++){let p=m*2;n[f++]=p,n[f++]=p+1,n[f++]=p+2,n[f++]=p+2,n[f++]=p+1,n[f++]=p+3}i.update(),s.update(),this.updateVertices()}updateVertices(){let t=this.points;if(t.length<1)return;let e=t[0],i,s=0,o=0,n=this.buffers[0].data,a=t.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<a;h++){let d=t[h],f=h*4;h<t.length-1?i=t[h+1]:i=d,o=-(i.x-e.x),s=i.y-e.y;let m=(1-h/(a-1))*10;m>1&&(m=1);let p=Math.sqrt(s*s+o*o);p<1e-6?(s=0,o=0):(s/=p,o/=p,s*=l,o*=l),n[f]=d.x+s,n[f+1]=d.y+o,n[f+2]=d.x-s,n[f+3]=d.y-o,e=d}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}});var Ho,im=g(()=>{L();Ai();em();Ho=class extends fr{constructor(t,e,i){let s=new zo(t.width,t.height,e,i),o=new $e(tt.WHITE);super(s,o),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;let t=this.geometry,{width:e,height:i}=this.shader.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}});var jh,Wh,kv=g(()=>{L();im();jh=10,Wh=class extends Ho{constructor(t,e,i,s,o){var n,a,l,h,d,f,m,p;super(tt.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=(a=e!=null?e:(n=t.defaultBorders)==null?void 0:n.left)!=null?a:jh,this._rightWidth=(h=s!=null?s:(l=t.defaultBorders)==null?void 0:l.right)!=null?h:jh,this._topHeight=(f=i!=null?i:(d=t.defaultBorders)==null?void 0:d.top)!=null?f:jh,this._bottomHeight=(p=o!=null?o:(m=t.defaultBorders)==null?void 0:m.bottom)!=null?p:jh,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){let t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){let t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){let t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,s=this._height>i?1:this._height/i;return Math.min(e,s)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){let t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;let i=1/this._origWidth,s=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=s*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}});var $h,Uv=g(()=>{L();Ai();$h=class extends fr{constructor(t=tt.EMPTY,e,i,s,o){let n=new rr(e,i,s);n.getBuffer("aVertexPosition").static=!1;let a=new $e(t);super(n,a,null,o),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}});var Yh,Gv=g(()=>{L();Ai();rm();Yh=class extends fr{constructor(t,e,i=0){let s=new Vo(t.height,e,i),o=new $e(t);i>0&&(t.baseTexture.wrapMode=we.REPEAT),super(s,o),this.autoUpdate=!0}_render(t){let e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}});var zv=g(()=>{em();rm();kv();Uv();im();Gv()});var qh,Vv=g(()=>{L();Ie();qh=class extends Xt{constructor(t=1500,e,i=16384,s=!1){super();let o=16384;i>o&&(i=o),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=ht.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tintColor=new dt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){let e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}});var sa,Hv=g(()=>{L();sa=class{constructor(t,e,i){this.geometry=new ke,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<t.length;++s){let o=t[s];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||J.FLOAT,offset:o.offset},e[s]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){let t=this.geometry,e=0;this.indexBuffer=new Ct(U.createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let n=0;n<this.dynamicProperties.length;++n){let a=this.dynamicProperties[n];a.offset=e,e+=a.size,this.dynamicStride+=a.size}let i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Ct(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let n=0;n<this.staticProperties.length;++n){let a=this.staticProperties[n];a.offset=s,s+=a.size,this.staticStride+=a.size}let o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Ct(this.staticData,!0,!1);for(let n=0;n<this.dynamicProperties.length;++n){let a=this.dynamicProperties[n];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===J.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let n=0;n<this.staticProperties.length;++n){let a=this.staticProperties[n];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===J.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let s=0;s<this.dynamicProperties.length;s++){let o=this.dynamicProperties[s];o.uploadFunction(t,e,i,o.type===J.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let s=0;s<this.staticProperties.length;s++){let o=this.staticProperties[s];o.uploadFunction(t,e,i,o.type===J.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}});var Xv,jv=g(()=>{Xv=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`});var Wv,$v=g(()=>{Wv=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`});var Xo,Yv=g(()=>{L();Hv();jv();$v();Xo=class extends Je{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new xt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:J.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=se.from(Wv,Xv,{}),this.state=Kt.for2d()}render(t){let e=t.children,i=t._maxSize,s=t._batchSize,o=this.renderer,n=e.length;if(n===0)return;n>i&&!t.autoResize&&(n=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));let l=e[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=U.correctBlendMode(t.blendMode,h),o.state.set(this.state);let d=o.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=dt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let m=!1;for(let p=0,v=0;p<n;p+=s,v+=1){let b=n-p;b>s&&(b=s),v>=a.length&&a.push(this._generateOneMoreBuffer(t));let E=a[v];E.uploadDynamic(e,p,b);let S=t._bufferUpdateIDs[v]||0;m=m||E._updateID<S,m&&(E._updateID=t._updateID,E.uploadStatic(e,p,b)),o.geometry.bind(E.geometry),d.drawElements(d.TRIANGLES,b*6,d.UNSIGNED_SHORT,0)}}generateBuffers(t){let e=[],i=t._maxSize,s=t._batchSize,o=t._properties;for(let n=0;n<i;n+=s)e.push(new sa(this.properties,o,s));return e}_generateOneMoreBuffer(t){let e=t._batchSize,i=t._properties;return new sa(this.properties,i,e)}uploadVertices(t,e,i,s,o,n){let a=0,l=0,h=0,d=0;for(let f=0;f<i;++f){let m=t[e+f],p=m._texture,v=m.scale.x,b=m.scale.y,E=p.trim,S=p.orig;E?(l=E.x-m.anchor.x*S.width,a=l+E.width,d=E.y-m.anchor.y*S.height,h=d+E.height):(a=S.width*(1-m.anchor.x),l=S.width*-m.anchor.x,h=S.height*(1-m.anchor.y),d=S.height*-m.anchor.y),s[n]=l*v,s[n+1]=d*b,s[n+o]=a*v,s[n+o+1]=d*b,s[n+o*2]=a*v,s[n+o*2+1]=h*b,s[n+o*3]=l*v,s[n+o*3+1]=h*b,n+=o*4}}uploadPosition(t,e,i,s,o,n){for(let a=0;a<i;a++){let l=t[e+a].position;s[n]=l.x,s[n+1]=l.y,s[n+o]=l.x,s[n+o+1]=l.y,s[n+o*2]=l.x,s[n+o*2+1]=l.y,s[n+o*3]=l.x,s[n+o*3+1]=l.y,n+=o*4}}uploadRotation(t,e,i,s,o,n){for(let a=0;a<i;a++){let l=t[e+a].rotation;s[n]=l,s[n+o]=l,s[n+o*2]=l,s[n+o*3]=l,n+=o*4}}uploadUvs(t,e,i,s,o,n){for(let a=0;a<i;++a){let l=t[e+a]._texture._uvs;l?(s[n]=l.x0,s[n+1]=l.y0,s[n+o]=l.x1,s[n+o+1]=l.y1,s[n+o*2]=l.x2,s[n+o*2+1]=l.y2,s[n+o*3]=l.x3,s[n+o*3+1]=l.y3,n+=o*4):(s[n]=0,s[n+1]=0,s[n+o]=0,s[n+o+1]=0,s[n+o*2]=0,s[n+o*2+1]=0,s[n+o*3]=0,s[n+o*3+1]=0,n+=o*4)}}uploadTint(t,e,i,s,o,n){for(let a=0;a<i;++a){let l=t[e+a],h=dt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);s[n]=h,s[n+o]=h,s[n+o*2]=h,s[n+o*3]=h,n+=o*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}};Xo.extension={name:"particle",type:D.RendererPlugin};G.add(Xo)});var qv=g(()=>{Vv();Yv()});var Qr,Kh=g(()=>{Qr=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Qr||{})});var Zh,Rr,Ye,sm=g(()=>{L();Zh={willReadFrequently:!0},Rr=class ut{static get experimentalLetterSpacingSupported(){let t=ut._experimentalLetterSpacingSupported;if(t!==void 0){let e=N.ADAPTER.getCanvasRenderingContext2D().prototype;t=ut._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,o,n,a,l,h){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=o,this.lineWidths=n,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=h}static measureText(t,e,i,s=ut._canvas){i=i!=null?i:e.wordWrap;let o=e.toFontString(),n=ut.measureFont(o);n.fontSize===0&&(n.fontSize=e.fontSize,n.ascent=e.fontSize);let a=s.getContext("2d",Zh);a.font=o;let l=(i?ut.wordWrap(t,e,s):t).split(/(?:\r\n|\r|\n)/),h=new Array(l.length),d=0;for(let v=0;v<l.length;v++){let b=ut._measureText(l[v],e.letterSpacing,a);h[v]=b,d=Math.max(d,b)}let f=d+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);let m=e.lineHeight||n.fontSize+e.strokeThickness,p=Math.max(m,n.fontSize+e.strokeThickness*2)+e.leading+(l.length-1)*(m+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new ut(t,e,f,p,l,h,m+e.leading,d,n)}static _measureText(t,e,i){let s=!1;ut.experimentalLetterSpacingSupported&&(ut.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let o=i.measureText(t).width;return o>0&&(s?o-=e:o+=(ut.graphemeSegmenter(t).length-1)*e),o}static wordWrap(t,e,i=ut._canvas){let s=i.getContext("2d",Zh),o=0,n="",a="",l=Object.create(null),{letterSpacing:h,whiteSpace:d}=e,f=ut.collapseSpaces(d),m=ut.collapseNewlines(d),p=!f,v=e.wordWrapWidth+h,b=ut.tokenize(t);for(let E=0;E<b.length;E++){let S=b[E];if(ut.isNewline(S)){if(!m){a+=ut.addLine(n),p=!f,n="",o=0;continue}S=" "}if(f){let w=ut.isBreakingSpace(S),A=ut.isBreakingSpace(n[n.length-1]);if(w&&A)continue}let C=ut.getFromCache(S,h,l,s);if(C>v)if(n!==""&&(a+=ut.addLine(n),n="",o=0),ut.canBreakWords(S,e.breakWords)){let w=ut.wordWrapSplit(S);for(let A=0;A<w.length;A++){let P=w[A],X=P,F=1;for(;w[A+F];){let q=w[A+F];if(!ut.canBreakChars(X,q,S,A,e.breakWords))P+=q;else break;X=q,F++}A+=F-1;let I=ut.getFromCache(P,h,l,s);I+o>v&&(a+=ut.addLine(n),p=!1,n="",o=0),n+=P,o+=I}}else{n.length>0&&(a+=ut.addLine(n),n="",o=0);let w=E===b.length-1;a+=ut.addLine(S,!w),p=!1,n="",o=0}else C+o>v&&(p=!1,a+=ut.addLine(n),n="",o=0),(n.length>0||!ut.isBreakingSpace(S)||p)&&(n+=S,o+=C)}return a+=ut.addLine(n,!1),a}static addLine(t,e=!0){return t=ut.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,s){let o=i[t];return typeof o!="number"&&(o=ut._measureText(t,e,s)+e,i[t]=o),o}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){let i=t[e];if(!ut.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:ut._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:ut._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){let e=[],i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){let o=t[s],n=t[s+1];if(ut.isBreakingSpace(o,n)||ut.isNewline(o)){i!==""&&(e.push(i),i=""),e.push(o);continue}i+=o}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,o){return!0}static wordWrapSplit(t){return ut.graphemeSegmenter(t)}static measureFont(t){if(ut._fonts[t])return ut._fonts[t];let e={ascent:0,descent:0,fontSize:0},i=ut._canvas,s=ut._context;s.font=t;let o=ut.METRICS_STRING+ut.BASELINE_SYMBOL,n=Math.ceil(s.measureText(o).width),a=Math.ceil(s.measureText(ut.BASELINE_SYMBOL).width),l=Math.ceil(ut.HEIGHT_MULTIPLIER*a);if(a=a*ut.BASELINE_MULTIPLIER|0,n===0||l===0)return ut._fonts[t]=e,e;i.width=n,i.height=l,s.fillStyle="#f00",s.fillRect(0,0,n,l),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,a);let h=s.getImageData(0,0,n,l).data,d=h.length,f=n*4,m=0,p=0,v=!1;for(m=0;m<a;++m){for(let b=0;b<f;b+=4)if(h[p+b]!==255){v=!0;break}if(!v)p+=f;else break}for(e.ascent=a-m,p=d-f,v=!1,m=l;m>a;--m){for(let b=0;b<f;b+=4)if(h[p+b]!==255){v=!0;break}if(!v)p-=f;else break}return e.descent=m-a,e.fontSize=e.ascent+e.descent,ut._fonts[t]=e,e}static clearMetrics(t=""){t?delete ut._fonts[t]:ut._fonts={}}static get _canvas(){var t;if(!ut.__canvas){let e;try{let i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",Zh))!=null&&t.measureText)return ut.__canvas=i,i;e=N.ADAPTER.createCanvas()}catch(i){e=N.ADAPTER.createCanvas()}e.width=e.height=10,ut.__canvas=e}return ut.__canvas}static get _context(){return ut.__context||(ut.__context=ut._canvas.getContext("2d",Zh)),ut.__context}};Rr.METRICS_STRING="|\xC9q\xC5",Rr.BASELINE_SYMBOL="M",Rr.BASELINE_MULTIPLIER=1.4,Rr.HEIGHT_MULTIPLIER=2,Rr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){let r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})(),Rr.experimentalLetterSpacing=!1,Rr._fonts={},Rr._newlines=[10,13],Rr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Ye=Rr});function om(r){let t=dt.shared,e=i=>{let s=t.setValue(i);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(r)?r.map(e):e(r)}function Rw(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function nm(r,t,e){for(let i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}var Iw,Kv,De,am=g(()=>{Kh();L();Iw=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Kv=class oa{constructor(t){this.styleID=0,this.reset(),nm(this,t,t)}clone(){let t={};return nm(t,this,oa.defaultStyle),new oa(t)}reset(){nm(this,oa.defaultStyle,oa.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){let e=om(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){let e=om(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){Rw(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){let e=om(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){let t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!Iw.includes(s)&&(s=`"${s}"`),e[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};Kv.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Qr.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};De=Kv});var Fw,Zv,na,Qv=g(()=>{L();ls();Kh();sm();am();Fw={texture:!0,children:!1,baseTexture:!0},Zv=class lm extends Re{constructor(t,e,i){var n;let s=!1;i||(i=N.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;let o=tt.from(i);o.orig=new st,o.trim=new st,super(o),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=(n=lm.defaultResolution)!=null?n:N.RESOLUTION,this._autoResolution=lm.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Ye.experimentalLetterSpacing}static set experimentalLetterSpacing(t){U.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Ye.experimentalLetterSpacing=t}updateText(t){let e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();let i=this.context,s=Ye.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,n=s.height,a=s.lines,l=s.lineHeight,h=s.lineWidths,d=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,n)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let m,p,v=e.dropShadow?2:1;for(let b=0;b<v;++b){let E=e.dropShadow&&b===0,S=E?Math.ceil(Math.max(1,n)+e.padding*2):0,C=S*this._resolution;if(E){i.fillStyle="black",i.strokeStyle="black";let A=e.dropShadowColor,P=e.dropShadowBlur*this._resolution,X=e.dropShadowDistance*this._resolution;i.shadowColor=dt.shared.setValue(A).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=P,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*X,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*X+C}else i.fillStyle=this._generateFillStyle(e,a,s),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let w=(l-f.fontSize)/2;l-f.fontSize<0&&(w=0);for(let A=0;A<a.length;A++)m=e.strokeThickness/2,p=e.strokeThickness/2+A*l+f.ascent+w,e.align==="right"?m+=d-h[A]:e.align==="center"&&(m+=(d-h[A])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[A],m+e.padding,p+e.padding-S,!0),e.fill&&this.drawLetterSpacing(a[A],m+e.padding,p+e.padding-S)}this.updateTexture()}drawLetterSpacing(t,e,i,s=!1){let o=this._style.letterSpacing,n=!1;if(Ye.experimentalLetterSpacingSupported&&(Ye.experimentalLetterSpacing?(this.context.letterSpacing=`${o}px`,this.context.textLetterSpacing=`${o}px`,n=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),o===0||n){s?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let a=e,l=Ye.graphemeSegmenter(t),h=this.context.measureText(t).width,d=0;for(let f=0;f<l.length;++f){let m=l[f];s?this.context.strokeText(m,a,i):this.context.fillText(m,a,i);let p="";for(let v=f+1;v<l.length;++v)p+=l[v];d=this.context.measureText(p).width,a+=h-d+o,h=d}}updateTexture(){let t=this.canvas;if(this._style.trim){let n=U.trimCanvas(t);n.data&&(t.width=n.width,t.height=n.height,this.context.putImageData(n.data,0,0))}let e=this._texture,i=this._style,s=i.trim?0:i.padding,o=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){let s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let o,n=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,l=this.canvas.width/this._resolution-n-a*2,h=this.canvas.height/this._resolution-n-a*2,d=s.slice(),f=t.fillGradientStops.slice();if(!f.length){let m=d.length+1;for(let p=1;p<m;++p)f.push(p/m)}if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),t.fillGradientType===Qr.LINEAR_VERTICAL){o=this.context.createLinearGradient(l/2,a,l/2,h+a);let m=i.fontProperties.fontSize+t.strokeThickness;for(let p=0;p<e.length;p++){let v=i.lineHeight*(p-1)+m,b=i.lineHeight*p,E=b;p>0&&v>b&&(E=(b+v)/2);let S=b+m,C=i.lineHeight*(p+1),w=S;p+1<e.length&&C<S&&(w=(S+C)/2);let A=(w-E)/h;for(let P=0;P<d.length;P++){let X=0;typeof f[P]=="number"?X=f[P]:X=P/d.length;let F=Math.min(1,Math.max(0,E/h+X*A));F=Number(F.toFixed(5)),o.addColorStop(F,d[P])}}}else{o=this.context.createLinearGradient(a,h/2,l+a,h/2);let m=d.length+1,p=1;for(let v=0;v<d.length;v++){let b;typeof f[v]=="number"?b=f[v]:b=p/m,o.addColorStop(b,d[v]),p++}}return o}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Fw,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);let e=U.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);let e=U.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof De?this._style=t:this._style=new De(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t!=null?t:""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};Zv.defaultAutoResolution=!0;na=Zv});var vs=g(()=>{Kh();Qv();sm();am()});var jo,hm=g(()=>{jo=class{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}});function Dw(r,t){var i;let e=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let s=0;s<r._textures.length;s++)if(r._textures[s]instanceof tt){let o=r._textures[s].baseTexture;t.includes(o)||(t.push(o),e=!0)}}return e}function Nw(r,t){if(r.baseTexture instanceof ot){let e=r.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function Bw(r,t){if(r._texture&&r._texture instanceof tt){let e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function Ow(r,t){return t instanceof na?(t.updateText(!0),!0):!1}function Lw(r,t){if(t instanceof De){let e=t.toFontString();return Ye.measureFont(e),!0}return!1}function kw(r,t){if(r instanceof na){t.includes(r.style)||t.push(r.style),t.includes(r)||t.push(r);let e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function Uw(r,t){return r instanceof De?(t.includes(r)||t.push(r),!0):!1}var Jv,_s,Qh=g(()=>{L();Ie();vs();hm();Jv=class t1{constructor(t){this.limiter=new jo(t1.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(kw),this.registerFindHook(Uw),this.registerFindHook(Dw),this.registerFindHook(Nw),this.registerFindHook(Bw),this.registerUploadHook(Ow),this.registerUploadHook(Lw)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Nt.system.addOnce(this.tick,this,Pe.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){let t=this.queue[0],e=!1;if(t&&!t._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Nt.system.addOnce(this.tick,this,Pe.UTILITY);else{this.ticking=!1;let t=this.completes.slice(0);this.completes.length=0;for(let e=0,i=t.length;e<i;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Xt)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Nt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Jv.uploadsPerFrame=4;_s=Jv});var e1=g(()=>{L();L();Qh();Object.defineProperties(N,{UPLOADS_PER_FRAME:{get(){return _s.uploadsPerFrame},set(r){U.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),_s.uploadsPerFrame=r}}})});function r1(r,t){return t instanceof ot?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function Gw(r,t){if(!(t instanceof ys))return!1;let{geometry:e}=t;t.finishPoly(),e.updateBatches();let{batches:i}=e;for(let s=0;s<i.length;s++){let{texture:o}=i[s].style;o&&r1(r,o.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function zw(r,t){return r instanceof ys?(t.push(r),!0):!1}var Wo,i1=g(()=>{L();Qf();Qh();Wo=class extends _s{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(zw),this.registerUploadHook(r1),this.registerUploadHook(Gw)}};Wo.extension={name:"prepare",type:D.RendererSystem};G.add(Wo)});var Jh,s1=g(()=>{Jh=class{constructor(t){this.maxMilliseconds=t,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}});var o1=g(()=>{e1();Qh();hm();i1();s1()});var tu,n1=g(()=>{L();ls();tu=class r extends Re{constructor(t,e=!0){super(t[0]instanceof tt?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Nt.shared.add(this.update,this,Pe.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;let e=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=e/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];let o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}updateTexture(){let t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){let e=[];for(let i=0;i<t.length;++i)e.push(tt.from(t[i]));return new r(e)}static fromImages(t){let e=[];for(let i=0;i<t.length;++i)e.push(tt.from(t[i]));return new r(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof tt)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Nt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}});var a1=g(()=>{n1()});var aa,eu,l1=g(()=>{L();ls();aa=new it,eu=class r extends Re{constructor(t,e=100,i=100){super(t),this.tileTransform=new Hr,this._width=e,this._height=i,this.uvMatrix=this.texture.uvMatrix||new Tr(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){let e=this._texture;!e||!e.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){let t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,s)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new st),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,aa);let e=this._width,i=this._height,s=-e*this.anchor._x;if(aa.x>=s&&aa.x<s+e){let o=-i*this.anchor._y;if(aa.y>=o&&aa.y<o+i)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){let i=t instanceof tt?t:tt.from(t,e);return new r(i,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}});var h1,u1=g(()=>{h1=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`});var c1,d1=g(()=>{c1=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`});var f1,m1=g(()=>{f1=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`});var um,p1=g(()=>{um=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`});var g1,x1=g(()=>{g1=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`});var ru,$o,y1=g(()=>{L();u1();d1();m1();p1();x1();ru=new xt,$o=class extends Je{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new pi,this.state=Kt.for2d()}contextChange(){let t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=se.from(um,g1,e),this.shader=t.context.webGLVersion>1?se.from(c1,h1,e):se.from(um,f1,e)}render(t){let e=this.renderer,i=this.quad,s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);let o=t.uvRespectAnchor?t.anchor.x:0,n=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-o,s[1]=s[3]=-n,s[2]=s[4]=1-o,s[5]=s[7]=1-n,i.invalidate();let a=t._texture,l=a.baseTexture,h=l.alphaMode>0,d=t.tileTransform.localTransform,f=t.uvMatrix,m=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;m&&(l._glTextures[e.CONTEXT_UID]?m=l.wrapMode!==we.CLAMP:l.wrapMode===we.CLAMP&&(l.wrapMode=we.REPEAT));let p=m?this.simpleShader:this.shader,v=a.width,b=a.height,E=t._width,S=t._height;ru.set(d.a*v/E,d.b*v/S,d.c*b/E,d.d*b/S,d.tx/E,d.ty/S),ru.invert(),m?ru.prepend(f.mapCoord):(p.uniforms.uMapCoord=f.mapCoord.toArray(!0),p.uniforms.uClampFrame=f.uClampFrame,p.uniforms.uClampOffset=f.uClampOffset),p.uniforms.uTransform=ru.toArray(!0),p.uniforms.uColor=dt.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(p.uniforms.uColor),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=a,e.shader.bind(p),e.geometry.bind(i),this.state.blendMode=U.correctBlendMode(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}};$o.extension={name:"tilingSprite",type:D.RendererPlugin};G.add($o)});var v1=g(()=>{l1();y1()});var _1,ha,cm=g(()=>{L();_1=class la{constructor(t,e,i=null){this.linkedSheets=[],this._texture=t instanceof tt?t:null,this.baseTexture=t instanceof ot?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;let s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){let{scale:e}=this.data.meta,i=U.getResolutionOfUrl(t,null);return i===null&&(i=parseFloat(e!=null?e:"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=la.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t,i=la.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){let s=this._frameKeys[e],o=this._frames[s],n=o.frame;if(n){let a=null,l=null,h=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,d=new st(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);o.rotated?a=new st(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):a=new st(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new st(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[s]=new tt(this.baseTexture,a,d,l,o.rotated?2:0,o.anchor,o.borders),tt.addToCache(this.textures[s],s.toString())}e++}}_processAnimations(){let t=this.data.animations||{};for(let e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){let s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){let t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*la.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*la.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(let i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_1.BATCH_SIZE=1e3;ha=_1});function b1(r,t,e){let i={};if(r.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[s]=t.textures[s]}),!e){let s=U.path.dirname(r[0]);t.linkedSheets.forEach((o,n)=>{let a=b1([`${s}/${t.data.meta.related_multi_packs[n]}`],o,!0);Object.assign(i,a)})}return i}var Vw,dm,T1=g(()=>{Do();L();cm();Vw=["jpg","png","jpeg","avif","webp"];dm={extension:D.Asset,cache:{test:r=>r instanceof ha,getCacheableAssets:(r,t)=>b1(r,t,!1)},resolver:{test:r=>{let t=r.split("?")[0].split("."),e=t.pop(),i=t.pop();return e==="json"&&Vw.includes(i)},parse:r=>{var e,i;let t=r.split(".");return{resolution:parseFloat((i=(e=N.RETINA_PREFIX.exec(r))==null?void 0:e[1])!=null?i:"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:D.LoadParser,priority:Ut.Normal},testParse(r,t){return V(this,null,function*(){return U.path.extname(t.src).toLowerCase()===".json"&&!!r.frames})},parse(r,t,e){return V(this,null,function*(){var l,h;let i=U.path.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let s=i+r.meta.image;s=yi(s,t.src);let o=(yield e.load([s]))[s],n=new ha(o.baseTexture,r,t.src);yield n.parse();let a=(l=r==null?void 0:r.meta)==null?void 0:l.related_multi_packs;if(Array.isArray(a)){let d=[];for(let m of a){if(typeof m!="string")continue;let p=i+m;(h=t.data)!=null&&h.ignoreMultiPack||(p=yi(p,t.src),d.push(e.load({src:p,data:{ignoreMultiPack:!0}})))}let f=yield Promise.all(d);n.linkedSheets=f,f.forEach(m=>{m.linkedSheets=[n].concat(n.linkedSheets.filter(p=>p!==m))})}return n})},unload(r){r.destroy(!0)}}};G.add(dm)});var A1=g(()=>{cm();T1()});var mr,ua=g(()=>{mr=class{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}});var Fr,iu=g(()=>{ua();Fr=class{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){let e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let o in e){let n=e[o].match(/^[a-z]+/gm)[0],a=e[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(let h in a){let d=a[h].split("="),f=d[0],m=d[1].replace(/"/gm,""),p=parseFloat(m),v=isNaN(p)?m:p;l[f]=v}i[n].push(l)}let s=new mr;return i.info.forEach(o=>s.info.push({face:o.face,size:parseInt(o.size,10)})),i.common.forEach(o=>s.common.push({lineHeight:parseInt(o.lineHeight,10)})),i.page.forEach(o=>s.page.push({id:parseInt(o.id,10),file:o.file})),i.char.forEach(o=>s.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)})),i.kerning.forEach(o=>s.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)})),i.distanceField.forEach(o=>s.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType})),s}}});var Jr,su=g(()=>{ua();Jr=class{static test(t){let e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){let e=new mr,i=t.getElementsByTagName("info"),s=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),n=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(let h=0;h<s.length;h++)e.common.push({lineHeight:parseInt(s[h].getAttribute("lineHeight"),10)});for(let h=0;h<o.length;h++)e.page.push({id:parseInt(o[h].getAttribute("id"),10)||0,file:o[h].getAttribute("file")});for(let h=0;h<n.length;h++){let d=n[h];e.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)e.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)e.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return e}}});var ti,ou=g(()=>{L();su();ti=class{static test(t){return typeof t=="string"&&t.includes("<font>")?Jr.test(N.ADAPTER.parseXML(t)):!1}static parse(t){return Jr.parse(N.ADAPTER.parseXML(t))}}});function nu(r){for(let t=0;t<fm.length;t++)if(fm[t].test(r))return fm[t];return null}var fm,au=g(()=>{iu();su();ou();fm=[Fr,Jr,ti]});function mm(r,t,e,i,s,o){let n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let a,l=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,d=r.width/i-l-h*2,f=r.height/i-l-h*2,m=n.slice(),p=e.fillGradientStops.slice();if(!p.length){let v=m.length+1;for(let b=1;b<v;++b)p.push(b/v)}if(m.unshift(n[0]),p.unshift(0),m.push(n[n.length-1]),p.push(1),e.fillGradientType===Qr.LINEAR_VERTICAL){a=t.createLinearGradient(d/2,h,d/2,f+h);let v=0,b=(o.fontProperties.fontSize+e.strokeThickness)/f;for(let E=0;E<s.length;E++){let S=o.lineHeight*E;for(let C=0;C<m.length;C++){let w=0;typeof p[C]=="number"?w=p[C]:w=C/m.length;let A=S/f+w*b,P=Math.max(v,A);P=Math.min(P,1),a.addColorStop(P,m[C]),v=P}}}else{a=t.createLinearGradient(h,f/2,d+h,f/2);let v=m.length+1,b=1;for(let E=0;E<m.length;E++){let S;typeof p[E]=="number"?S=p[E]:S=b/v,a.addColorStop(S,m[E]),b++}}return a}var pm=g(()=>{vs()});function gm(r,t,e,i,s,o,n){let a=e.text,l=e.fontProperties;t.translate(i,s),t.scale(o,o);let h=n.strokeThickness/2,d=-(n.strokeThickness/2);if(t.font=n.toFontString(),t.lineWidth=n.strokeThickness,t.textBaseline=n.textBaseline,t.lineJoin=n.lineJoin,t.miterLimit=n.miterLimit,t.fillStyle=mm(r,t,n,o,[a],e),t.strokeStyle=n.stroke,n.dropShadow){let f=n.dropShadowColor,m=n.dropShadowBlur*o,p=n.dropShadowDistance*o;t.shadowColor=dt.shared.setValue(f).setAlpha(n.dropShadowAlpha).toRgbaString(),t.shadowBlur=m,t.shadowOffsetX=Math.cos(n.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(n.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;n.stroke&&n.strokeThickness&&t.strokeText(a,h,d+e.lineHeight-l.descent),n.fill&&t.fillText(a,h,d+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}var xm=g(()=>{L();pm()});function bs(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}var lu=g(()=>{});function ca(r){return Array.from?Array.from(r):r.split("")}var hu=g(()=>{});function ym(r){typeof r=="string"&&(r=[r]);let t=[];for(let e=0,i=r.length;e<i;e++){let s=r[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);let o=s[0].charCodeAt(0),n=s[1].charCodeAt(0);if(n<o)throw new Error("[BitmapFont]: Invalid character range.");for(let a=o,l=n;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...ca(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var vm=g(()=>{hu()});var _m=g(()=>{xm();lu();pm();vm();hu()});var Ei,ir,uu=g(()=>{L();vs();ua();au();_m();vm();xm();lu();Ei=class Dr{constructor(t,e,i){var d,f;let[s]=t.info,[o]=t.common,[n]=t.page,[a]=t.distanceField,l=U.getResolutionOfUrl(n.file),h={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=o.lineHeight/l,this.chars={},this.pageTextures=h;for(let m=0;m<t.page.length;m++){let{id:p,file:v}=t.page[m];h[p]=e instanceof Array?e[m]:e[v],a!=null&&a.fieldType&&a.fieldType!=="none"&&(h[p].baseTexture.alphaMode=kt.NO_PREMULTIPLIED_ALPHA,h[p].baseTexture.mipmap=qt.OFF)}for(let m=0;m<t.char.length;m++){let{id:p,page:v}=t.char[m],{x:b,y:E,width:S,height:C,xoffset:w,yoffset:A,xadvance:P}=t.char[m];b/=l,E/=l,S/=l,C/=l,w/=l,A/=l,P/=l;let X=new st(b+h[v].frame.x/l,E+h[v].frame.y/l,S,C);this.chars[p]={xOffset:w,yOffset:A,xAdvance:P,kerning:{},texture:new tt(h[v].baseTexture,X),page:v}}for(let m=0;m<t.kerning.length;m++){let{first:p,second:v,amount:b}=t.kerning[m];p/=l,v/=l,b/=l,this.chars[v]&&(this.chars[v].kerning[p]=b)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=(f=(d=a==null?void 0:a.fieldType)==null?void 0:d.toLowerCase())!=null?f:"none"}destroy(){for(let t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(let t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let s;if(t instanceof mr)s=t;else{let n=nu(t);if(!n)throw new Error("Unrecognized data format for font.");s=n.parse(t)}e instanceof tt&&(e=[e]);let o=new Dr(s,e,i);return Dr.available[o.font]=o,o}static uninstall(t){let e=Dr.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete Dr.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");let F=Object.assign({},Dr.defaultOptions,i),{chars:s,padding:o,resolution:n,textureWidth:a,textureHeight:l}=F,h=pa(F,["chars","padding","resolution","textureWidth","textureHeight"]),d=ym(s),f=e instanceof De?e:new De(e),m=a,p=new mr;p.info[0]={face:f.fontFamily,size:f.fontSize},p.common[0]={lineHeight:f.fontSize};let v=0,b=0,E,S,C,w=0,A=[],P=[];for(let I=0;I<d.length;I++){E||(E=N.ADAPTER.createCanvas(),E.width=a,E.height=l,S=E.getContext("2d"),C=new ot(E,gt({resolution:n},h)),A.push(C),P.push(new tt(C)),p.page.push({id:P.length-1,file:""}));let q=d[I],et=Ye.measureText(q,f,!1,E),mt=et.width,Y=Math.ceil(et.height),R=Math.ceil((f.fontStyle==="italic"?2:1)*mt);if(b>=l-Y*n){if(b===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${q}')`);--I,E=null,S=null,C=null,b=0,v=0,w=0;continue}if(w=Math.max(Y+et.fontProperties.descent,w),R*n+v>=m){if(v===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${q}')`);--I,b+=w*n,b=Math.ceil(b),v=0,w=0;continue}gm(E,S,et,v,b,n,f);let z=bs(et.text);p.char.push({id:z,page:P.length-1,x:v/n,y:b/n,width:R,height:Y,xoffset:0,yoffset:0,xadvance:mt-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),v+=(R+2*o)*n,v=Math.ceil(v)}if(!(i!=null&&i.skipKerning))for(let I=0,q=d.length;I<q;I++){let et=d[I];for(let mt=0;mt<q;mt++){let Y=d[mt],R=S.measureText(et).width,z=S.measureText(Y).width,Q=S.measureText(et+Y).width-(R+z);Q&&p.kerning.push({first:bs(et),second:bs(Y),amount:Q})}}let X=new Dr(p,P,!0);return Dr.available[t]!==void 0&&Dr.uninstall(t),Dr.available[t]=X,X}};Ei.ALPHA=[["a","z"],["A","Z"]," "],Ei.NUMERIC=[["0","9"]],Ei.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Ei.ASCII=[[" ","~"]],Ei.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ei.ALPHANUMERIC},Ei.available={};ir=Ei});var E1,w1=g(()=>{E1=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`});var S1,C1=g(()=>{S1=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`});var M1,P1,I1,R1,D1,N1=g(()=>{L();Ie();Ai();uu();w1();C1();_m();hu();lu();M1=[],P1=[],I1=[],R1=class F1 extends Xt{constructor(t,e={}){super();let{align:i,tint:s,maxWidth:o,letterSpacing:n,fontName:a,fontSize:l}=Object.assign({},F1.styleDefaults,e);if(!ir.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new dt(s),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=n,this._anchor=new ue(()=>{this.dirty=!0},this,0,0),this._roundPixels=N.ROUND_PIXELS,this.dirty=!0,this._resolution=N.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var mt;let t=ir.available[this._fontName],e=this.fontSize,i=e/t.size,s=new it,o=[],n=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=ca(l),d=this._maxWidth*t.size/e,f=t.distanceFieldType==="none"?M1:P1,m=null,p=0,v=0,b=0,E=-1,S=0,C=0,w=0,A=0;for(let Y=0;Y<h.length;Y++){let R=h[Y],z=bs(R);if(/(?:\s)/.test(R)&&(E=Y,S=p,A++),R==="\r"||R===`
`){n.push(p),a.push(-1),v=Math.max(v,p),++b,++C,s.x=0,s.y+=t.lineHeight,m=null,A=0;continue}let Q=t.chars[z];if(!Q)continue;m&&Q.kerning[m]&&(s.x+=Q.kerning[m]);let ft=I1.pop()||{texture:tt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new it};ft.texture=Q.texture,ft.line=b,ft.charCode=z,ft.position.x=Math.round(s.x+Q.xOffset+this._letterSpacing/2),ft.position.y=Math.round(s.y+Q.yOffset),ft.prevSpaces=A,o.push(ft),p=ft.position.x+Math.max(Q.xAdvance-Q.xOffset,Q.texture.orig.width),s.x+=Q.xAdvance+this._letterSpacing,w=Math.max(w,Q.yOffset+Q.texture.height),m=z,E!==-1&&d>0&&s.x>d&&(++C,U.removeItems(o,1+E-C,1+Y-E),Y=E,E=-1,n.push(S),a.push(o.length>0?o[o.length-1].prevSpaces:0),v=Math.max(v,S),b++,s.x=0,s.y+=t.lineHeight,m=null,A=0)}let P=h[h.length-1];P!=="\r"&&P!==`
`&&(/(?:\s)/.test(P)&&(p=S),n.push(p),v=Math.max(v,p),a.push(-1));let X=[];for(let Y=0;Y<=b;Y++){let R=0;this._align==="right"?R=v-n[Y]:this._align==="center"?R=(v-n[Y])/2:this._align==="justify"&&(R=a[Y]<0?0:(v-n[Y])/a[Y]),X.push(R)}let F=o.length,I={},q=[],et=this._activePagesMeshData;f.push(...et);for(let Y=0;Y<F;Y++){let R=o[Y].texture,z=R.baseTexture.uid;if(!I[z]){let Q=f.pop();if(!Q){let O=new rr,B,W;t.distanceFieldType==="none"?(B=new $e(tt.EMPTY),W=ht.NORMAL):(B=new $e(tt.EMPTY,{program:ce.from(S1,E1),uniforms:{uFWidth:0}}),W=ht.NORMAL_NPM);let nt=new fr(O,B);nt.blendMode=W,Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:nt,vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;let{_textureCache:ft}=this;ft[z]=ft[z]||new tt(R.baseTexture),Q.mesh.texture=ft[z],Q.mesh.tint=this._tintColor.value,q.push(Q),I[z]=Q}I[z].total++}for(let Y=0;Y<et.length;Y++)q.includes(et[Y])||this.removeChild(et[Y].mesh);for(let Y=0;Y<q.length;Y++)q[Y].mesh.parent!==this&&this.addChild(q[Y].mesh);this._activePagesMeshData=q;for(let Y in I){let R=I[Y],z=R.total;if(!(((mt=R.indices)==null?void 0:mt.length)>6*z)||R.vertices.length<fr.BATCHABLE_SIZE*2)R.vertices=new Float32Array(4*2*z),R.uvs=new Float32Array(4*2*z),R.indices=new Uint16Array(6*z);else{let Q=R.total,ft=R.vertices;for(let O=Q*4*2;O<ft.length;O++)ft[O]=0}R.mesh.size=6*z}for(let Y=0;Y<F;Y++){let R=o[Y],z=R.position.x+X[R.line]*(this._align==="justify"?R.prevSpaces:1);this._roundPixels&&(z=Math.round(z));let Q=z*i,ft=R.position.y*i,O=R.texture,B=I[O.baseTexture.uid],W=O.frame,nt=O._uvs,at=B.index++;B.indices[at*6+0]=0+at*4,B.indices[at*6+1]=1+at*4,B.indices[at*6+2]=2+at*4,B.indices[at*6+3]=0+at*4,B.indices[at*6+4]=2+at*4,B.indices[at*6+5]=3+at*4,B.vertices[at*8+0]=Q,B.vertices[at*8+1]=ft,B.vertices[at*8+2]=Q+W.width*i,B.vertices[at*8+3]=ft,B.vertices[at*8+4]=Q+W.width*i,B.vertices[at*8+5]=ft+W.height*i,B.vertices[at*8+6]=Q,B.vertices[at*8+7]=ft+W.height*i,B.uvs[at*8+0]=nt.x0,B.uvs[at*8+1]=nt.y0,B.uvs[at*8+2]=nt.x1,B.uvs[at*8+3]=nt.y1,B.uvs[at*8+4]=nt.x2,B.uvs[at*8+5]=nt.y2,B.uvs[at*8+6]=nt.x3,B.uvs[at*8+7]=nt.y3}this._textWidth=v*i,this._textHeight=(s.y+t.lineHeight)*i;for(let Y in I){let R=I[Y];if(this.anchor.x!==0||this.anchor.y!==0){let O=0,B=this._textWidth*this.anchor.x,W=this._textHeight*this.anchor.y;for(let nt=0;nt<R.total;nt++)R.vertices[O++]-=B,R.vertices[O++]-=W,R.vertices[O++]-=B,R.vertices[O++]-=W,R.vertices[O++]-=B,R.vertices[O++]-=W,R.vertices[O++]-=B,R.vertices[O++]-=W}this._maxLineHeight=w*i;let z=R.mesh.geometry.getBuffer("aVertexPosition"),Q=R.mesh.geometry.getBuffer("aTextureCoord"),ft=R.mesh.geometry.getIndex();z.data=R.vertices,Q.data=R.uvs,ft.data=R.indices,z.update(),Q.update(),ft.update()}for(let Y=0;Y<o.length;Y++)I1.push(o[Y]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);let{distanceFieldRange:e,distanceFieldType:i,size:s}=ir.available[this._fontName];if(i!=="none"){let{a:o,b:n,c:a,d:l}=this.worldTransform,h=Math.sqrt(o*o+n*n),d=Math.sqrt(a*a+l*l),f=(Math.abs(h)+Math.abs(d))/2,m=this.fontSize/s,p=t._view.resolution;for(let v of this._activePagesMeshData)v.mesh.shader.uniforms.uFWidth=f*e*m*p}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){let t=ir.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!ir.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){var t;return(t=this._fontSize)!=null?t:ir.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t!=null?t:""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){let{_textureCache:e}=this,i=ir.available[this._fontName].distanceFieldType==="none"?M1:P1;i.push(...this._activePagesMeshData);for(let s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],i.filter(s=>e[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=tt.EMPTY});for(let s in e)e[s].destroy(),delete e[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};R1.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};D1=R1});var Hw,bm,B1=g(()=>{Do();L();uu();au();iu();ou();Hw=[".xml",".fnt"],bm={extension:{type:D.LoadParser,priority:Ut.Normal},name:"loadBitmapFont",test(r){return Hw.includes(U.path.extname(r).toLowerCase())},testParse(r){return V(this,null,function*(){return Fr.test(r)||ti.test(r)})},parse(r,t,e){return V(this,null,function*(){let i=Fr.test(r)?Fr.parse(r):ti.parse(r),{src:s}=t,{page:o}=i,n=[];for(let h=0;h<o.length;++h){let d=o[h].file,f=U.path.join(U.path.dirname(s),d);f=yi(f,s),n.push(f)}let a=yield e.load(n),l=n.map(h=>a[h]);return ir.install(i,l,!0)})},load(r,t){return V(this,null,function*(){return(yield N.ADAPTER.fetch(r)).text()})},unload(r){r.destroy()}};G.add(bm)});var O1=g(()=>{uu();ua();N1();au();B1();iu();su();ou()});var Tm,qo,Am=g(()=>{L();vs();Tm=class Yo extends De{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Yo(Object.keys(Yo.defaultOptions).reduce((e,i)=>Ne(gt({},e),{[i]:t[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Yo.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){let{availableFonts:i}=Yo;if(i[t]){let s=i[t];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return N.ADAPTER.fetch(t).then(s=>s.blob()).then(s=>V(this,null,function*(){return new Promise((o,n)=>{let a=URL.createObjectURL(s),l=new FileReader;l.onload=()=>o([a,l.result]),l.onerror=n,l.readAsDataURL(s)})})).then(n=>V(this,[n],function*([s,o]){let a=Object.assign({family:U.path.basename(t,U.path.extname(t)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:o,refs:1,originalUrl:t,fontFace:null},e);i[t]=a,this._fonts.push(a),this.styleID++;let l=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style,display:a.display});a.fontFace=l,yield l.load(),document.fonts.add(l),yield document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...t){let e=t.filter(i=>!this._overrides.includes(i));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){let e=t.filter(i=>this._overrides.includes(i));e.length>0&&(this._overrides=this._overrides.filter(i=>!e.includes(i)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=U.rgb2hex(t)),typeof t=="number"?U.hex2string(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor),e=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));let o=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${o} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${o} ${t}`}reset(){Object.assign(this,Yo.defaultOptions)}onBeforeDraw(){let{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){let{userAgent:t}=N.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Tm.availableFonts={},Tm.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};qo=Tm});var da,L1,k1=g(()=>{L();ls();vs();Am();da=class Ko extends Re{constructor(t="",e={}){var f;super(tt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;let i=new Image,s=tt.from(i,{scaleMode:N.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new st,s.trim=new st,this.texture=s;let o="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml",a=document.createElementNS(o,"svg"),l=document.createElementNS(o,"foreignObject"),h=document.createElementNS(n,"div"),d=document.createElementNS(n,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Ko.defaultMaxWidth,this.maxHeight=Ko.defaultMaxHeight,this._domElement=h,this._styleElement=d,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(d),this._foreignObject.appendChild(h),this._image=i,this._loadImage=new Image,this._autoResolution=Ko.defaultAutoResolution,this._resolution=(f=Ko.defaultResolution)!=null?f:N.RESOLUTION,this.text=t,this.style=e}measureText(t){var d,f;let{text:e,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);let o=this._domElement.getBoundingClientRect();this._svgRoot.remove();let{width:n,height:a}=o;(n>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");let l=Math.min(this.maxWidth,Math.ceil(n)),h=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",h.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(d=this._style)==null?void 0:d.toCSS(s)}),this._styleElement.textContent=(f=this._style)==null?void 0:f.toGlobalCSS()),{width:l+i.padding*2,height:h+i.padding*2}}updateText(t=!0){return V(this,null,function*(){let{style:e,_image:i,_loadImage:s}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;let{width:o,height:n}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,o)),i.height=s.height=Math.ceil(Math.max(1,n)),this._updateID++;let a=this._updateID;yield new Promise(l=>{s.onload=()=>V(this,null,function*(){if(a<this._updateID){l();return}yield e.onBeforeDraw(),i.src=s.src,s.onload=null,s.src="",this.updateTexture(),l()});let h=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(h)}`})})}get source(){return this._image}updateTexture(){let{style:t,texture:e,_image:i,resolution:s}=this,{padding:o}=t,{baseTexture:n}=e;e.trim.width=e._frame.width=i.width/s,e.trim.height=e._frame.height=i.height/s,e.trim.x=-o,e.trim.y=-o,e.orig.width=e._frame.width-o*2,e.orig.height=e._frame.height-o*2,this._onTextureUpdate(),n.setRealSize(i.width,i.height,s),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var i,s,o,n,a;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Ko.defaultDestroyOptions,t),super.destroy(t);let e=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=e,(s=this._svgRoot)==null||s.remove(),this._svgRoot=e,(o=this._domElement)==null||o.remove(),this._domElement=e,(n=this._foreignObject)==null||n.remove(),this._foreignObject=e,(a=this._styleElement)==null||a.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);let e=U.sign(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);let e=U.sign(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof qo?(this.ownsStyle=!1,this._style=t):t instanceof De?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=qo.from(t)):(this.ownsStyle=!0,this._style=new qo(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};da.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},da.defaultMaxWidth=2024,da.defaultMaxHeight=2024,da.defaultAutoResolution=!0;L1=da});var U1=g(()=>{k1();Am()});var cu={};Mu(cu,{ALPHA_MODES:()=>kt,AbstractMultiResource:()=>Wr,AccessibilityManager:()=>So,AlphaFilter:()=>hs,AnimatedSprite:()=>tu,Application:()=>$n,ArrayResource:()=>go,Assets:()=>Ro,AssetsClass:()=>Kn,Attribute:()=>Li,BLEND_MODES:()=>ht,BUFFER_BITS:()=>en,BUFFER_TYPE:()=>Se,BackgroundSystem:()=>_r,BaseImageResource:()=>oe,BasePrepare:()=>_s,BaseRenderTexture:()=>ci,BaseTexture:()=>ot,BatchDrawCall:()=>zr,BatchGeometry:()=>hi,BatchRenderer:()=>vr,BatchShaderGenerator:()=>eo,BatchSystem:()=>ji,BatchTextureArray:()=>Xr,BitmapFont:()=>ir,BitmapFontData:()=>mr,BitmapText:()=>D1,BlobResource:()=>cs,BlurFilter:()=>_o,BlurFilterPass:()=>wr,Bounds:()=>ur,BrowserAdapter:()=>xa,Buffer:()=>Ct,BufferResource:()=>Ze,BufferSystem:()=>mo,CLEAR_MODES:()=>Oe,COLOR_MASK_BITS:()=>Hm,Cache:()=>er,CanvasResource:()=>xo,Circle:()=>ki,Color:()=>dt,ColorMatrixFilter:()=>xi,CompressedTextureResource:()=>Ir,Container:()=>Xt,ContextSystem:()=>br,CountLimiter:()=>jo,CubeResource:()=>kl,DEG_TO_RAD:()=>Qe,DRAW_MODES:()=>Ee,DisplacementFilter:()=>bo,DisplayObject:()=>At,ENV:()=>Be,Ellipse:()=>Ui,EventBoundary:()=>Eo,EventSystem:()=>wo,ExtensionType:()=>D,Extract:()=>Xf,FORMATS:()=>H,FORMATS_TO_COMPONENTS:()=>Eh,FXAAFilter:()=>To,FederatedDisplayObject:()=>df,FederatedEvent:()=>Cr,FederatedMouseEvent:()=>cr,FederatedPointerEvent:()=>de,FederatedWheelEvent:()=>tr,FillStyle:()=>Ti,Filter:()=>$,FilterState:()=>io,FilterSystem:()=>$i,Framebuffer:()=>jr,FramebufferSystem:()=>Yi,GC_MODES:()=>rn,GLFramebuffer:()=>so,GLProgram:()=>lo,GLTexture:()=>gi,GRAPHICS_CURVES:()=>Av,GenerateTextureSystem:()=>ts,Geometry:()=>ke,GeometrySystem:()=>qi,Graphics:()=>ys,GraphicsData:()=>xs,GraphicsGeometry:()=>Vh,HTMLText:()=>L1,HTMLTextStyle:()=>qo,IGLUniformData:()=>Tl,INSTALLED:()=>$s,INTERNAL_FORMATS:()=>Ae,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>Kr,ImageBitmapResource:()=>yo,ImageResource:()=>fi,LINE_CAP:()=>We,LINE_JOIN:()=>fe,LineStyle:()=>Uo,LoaderParserPriority:()=>Ut,MASK_TYPES:()=>zt,MIPMAP_MODES:()=>qt,MSAA_QUALITY:()=>Et,MaskData:()=>no,MaskSystem:()=>Ki,Matrix:()=>xt,Mesh:()=>fr,MeshBatchUvs:()=>Go,MeshGeometry:()=>rr,MeshMaterial:()=>$e,MultisampleSystem:()=>fo,NineSlicePlane:()=>Wh,NoiseFilter:()=>Ao,ObjectRenderer:()=>Je,ObjectRendererSystem:()=>po,ObservablePoint:()=>ue,PI_2:()=>Vr,PRECISION:()=>xe,ParticleContainer:()=>qh,ParticleRenderer:()=>Xo,PlaneGeometry:()=>zo,PluginSystem:()=>Qi,Point:()=>it,Polygon:()=>nr,Prepare:()=>Wo,Program:()=>ce,ProjectionSystem:()=>Ji,Quad:()=>ro,QuadUv:()=>pi,RAD_TO_DEG:()=>$a,RENDERER_TYPE:()=>ga,Rectangle:()=>st,RenderTexture:()=>He,RenderTexturePool:()=>Wi,RenderTextureSystem:()=>rs,Renderer:()=>zn,ResizePlugin:()=>Co,Resource:()=>Le,RopeGeometry:()=>Vo,RoundedRectangle:()=>Gi,Runner:()=>Ht,SAMPLER_TYPES:()=>Z,SCALE_MODES:()=>ge,SHAPES:()=>It,SVGResource:()=>as,ScissorSystem:()=>bl,Shader:()=>se,ShaderSystem:()=>is,SimpleMesh:()=>$h,SimplePlane:()=>Ho,SimpleRope:()=>Yh,Sprite:()=>Re,SpriteMaskFilter:()=>oo,Spritesheet:()=>ha,StartupSystem:()=>Ar,State:()=>Kt,StateSystem:()=>Cl,StencilSystem:()=>Zi,SystemManager:()=>ss,TARGETS:()=>pr,TEXT_GRADIENT:()=>Qr,TYPES:()=>J,TYPES_TO_BYTES_PER_COMPONENT:()=>ta,TYPES_TO_BYTES_PER_PIXEL:()=>wh,TemporaryDisplayObject:()=>Xn,Text:()=>na,TextFormat:()=>Fr,TextMetrics:()=>Ye,TextStyle:()=>De,Texture:()=>tt,TextureGCSystem:()=>hr,TextureMatrix:()=>Tr,TextureSystem:()=>os,TextureUvs:()=>mi,Ticker:()=>Nt,TickerPlugin:()=>uo,TilingSprite:()=>eu,TilingSpriteRenderer:()=>$o,TimeLimiter:()=>Jh,Transform:()=>Hr,TransformFeedback:()=>Gl,TransformFeedbackSystem:()=>ns,UPDATE_PRIORITY:()=>Pe,UniformGroup:()=>Te,VERSION:()=>AE,VideoResource:()=>vo,ViewSystem:()=>Er,ViewableBuffer:()=>kr,WRAP_MODES:()=>we,XMLFormat:()=>Jr,XMLStringFormat:()=>ti,accessibleTarget:()=>$l,autoDetectFormat:()=>nu,autoDetectRenderer:()=>Nl,autoDetectResource:()=>Bi,cacheTextureArray:()=>ah,checkDataUrl:()=>Fe,checkExtension:()=>Zt,checkMaxIfStatementsInShader:()=>Sn,convertToList:()=>ne,copySearchParams:()=>yi,createStringVariations:()=>Yn,createTexture:()=>je,createUBOElements:()=>Cd,curves:()=>Ue,defaultFilterVertex:()=>co,defaultVertex:()=>Bl,detectAvif:()=>hh,detectCompressedTextures:()=>xh,detectDefaults:()=>ch,detectMp4:()=>mh,detectOgv:()=>ph,detectWebm:()=>fh,detectWebp:()=>uh,extensions:()=>G,filters:()=>Hl,generateProgram:()=>Al,generateUniformBufferSync:()=>El,getFontFamilyName:()=>eh,getTestContext:()=>Rn,getUBOData:()=>Md,graphicsUtils:()=>Pw,groupD8:()=>Dt,isMobile:()=>Ve,isSingleItem:()=>Mr,loadBitmapFont:()=>bm,loadDDS:()=>Mh,loadImageBitmap:()=>ih,loadJson:()=>Jl,loadKTX:()=>Ph,loadSVG:()=>sh,loadTextures:()=>Pr,loadTxt:()=>th,loadVideo:()=>oh,loadWebFont:()=>rh,parseDDS:()=>Jn,parseKTX:()=>ea,resolveCompressedTextureUrl:()=>Ih,resolveTextureUrl:()=>gh,settings:()=>N,spritesheetAsset:()=>dm,uniformParsers:()=>ar,unsafeEvalSupported:()=>Bn,utils:()=>U});var du=g(()=>{dy();fy();my();Uy();jy();qy();Do();yv();L();Ie();ff();bv();zl();Vl();tf();ef();rf();sf();Qf();Ai();zv();qv();o1();ls();a1();v1();A1();vs();O1();U1()});var fu,mu,Em=g(()=>{"use strict";du();fu={app:new $n({background:0,resizeTo:window})};fu.app.stage.eventMode="static";document.body.appendChild(fu.app.view);console.log("PIXI Setup complete.");window.addEventListener("resize",()=>{let r=window.innerWidth,t=window.innerHeight;fu.app.renderer.resize(r,t)});mu=fu});var Ge,G1,z1,V1=g(()=>{"use strict";Em();Ge={keysPressed:[],binds:[],isPressing(r){for(let t=0;t<Ge.binds.length;t++){let e=Ge.binds[t];if(e.name===r)return Ge.keysPressed.includes(e.key)}return!1},addKey(r,t,e){for(let i=0;i<Ge.binds.length;i++){let s=Ge.binds[i];if(s.name===r){s.key=t;return}}Ge.binds.push({name:r,key:t,fn:e}),typeof e=="function"&&mu.app.ticker.add(i=>{Ge.isPressing(r)&&e(i)})},addKeys(r){for(let t of r)this.addKey(t.name,t.key,t.fn)}},G1=function(r,t){let e=r.key;t&&!Ge.keysPressed.includes(e)?Ge.keysPressed.push(e):!t&&Ge.keysPressed.includes(e)&&Ge.keysPressed.splice(Ge.keysPressed.indexOf(e),1)};document.addEventListener("keydown",r=>G1(r,!0));document.addEventListener("keyup",r=>G1(r,!1));Ge.addKey("Debug - Reload","`",()=>window.location.reload());z1=Ge});var Ts=g(()=>{"use strict";(()=>{var x;var r=class{constructor(_){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=_}get size(){return this.map.size}get(_){let u=this.map.get(_);if(u!==void 0)return u!==this.first&&(u===this.last?(this.last=u.prev,this.last.next=void 0):(u.prev.next=u.next,u.next.prev=u.prev),u.next=this.first,this.first.prev=u,this.first=u),u.value}set(_,u){if(this.maxSize<1)return;if(this.map.has(_))throw new Error("Cannot update existing keys in the cache");let c=new t(_,u);for(this.first===void 0?(this.first=c,this.last=c):(c.next=this.first,this.first.prev=c,this.first=c),this.map.set(_,c);this.map.size>this.maxSize;){let y=this.last;this.map.delete(y.key),this.last=y.prev,this.last.next=void 0}}},t=class{constructor(_,u){this.next=void 0,this.prev=void 0,this.key=_,this.value=u}},e=17,i=9e15,s=Math.log10(9e15),o=1/9e15,n=308,a=-324,l=5,h=1024-1,d=!0,f=!1,m=function(){let _=[];for(let c=a+1;c<=n;c++)_.push(+("1e"+c));let u=323;return function(c){return _[c+u]}}(),p=[2,Math.E,3,4,5,6,7,8,9,10],v=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],b=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],E=function(u,c){let y=c+1,T=Math.ceil(Math.log10(Math.abs(u))),M=Math.round(u*Math.pow(10,y-T))*Math.pow(10,T-y);return parseFloat(M.toFixed(Math.max(y-T,0)))},S=function(_){return Math.sign(_)*Math.log10(Math.abs(_))},C=function(_){if(!isFinite(_))return _;if(_<-50)return _===Math.trunc(_)?Number.NEGATIVE_INFINITY:0;let u=1;for(;_<10;)u=u*_,++_;_-=1;let c=.9189385332046727;c=c+(_+.5)*Math.log(_),c=c-_;let y=_*_,T=_;return c=c+1/(12*T),T=T*y,c=c+1/(360*T),T=T*y,c=c+1/(1260*T),T=T*y,c=c+1/(1680*T),T=T*y,c=c+1/(1188*T),T=T*y,c=c+691/(360360*T),T=T*y,c=c+7/(1092*T),T=T*y,c=c+3617/(122400*T),Math.exp(c)/u},w=6.283185307179586,A=.36787944117144233,P=.5671432904097838,X=function(_,u=1e-10){let c,y;if(!Number.isFinite(_)||_===0)return _;if(_===1)return P;_<10?c=0:c=Math.log(_)-Math.log(Math.log(_));for(let T=0;T<100;++T){if(y=(_*Math.exp(-c)+c*c)/(c+1),Math.abs(y-c)<u*Math.abs(y))return y;c=y}throw Error(`Iteration failed to converge: ${_.toString()}`)};function F(_,u=1e-10){let c,y,T,M;if(!Number.isFinite(_.mag)||_.eq(I.dZero))return _;if(_.eq(I.dOne))return I.fromNumber(P);c=I.ln(_);for(let k=0;k<100;++k){if(y=c.neg().exp(),T=c.sub(_.mul(y)),M=c.sub(T.div(c.add(1).sub(c.add(2).mul(T).div(I.mul(2,c).add(2))))),I.abs(M.sub(c)).lt(I.abs(M).mul(u)))return M;c=M}throw Error(`Iteration failed to converge: ${_.toString()}`)}var I=(x=class{constructor(u){this.sign=0,this.mag=0,this.layer=0,u instanceof x?this.fromDecimal(u):typeof u=="number"?this.fromNumber(u):typeof u=="string"&&this.fromString(u)}get m(){if(this.sign===0)return 0;if(this.layer===0){let u=Math.floor(Math.log10(this.mag)),c;return this.mag===5e-324?c=5:c=this.mag/m(u),this.sign*c}else if(this.layer===1){let u=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,u)}else return this.sign}set m(u){this.layer<=2?this.fromMantissaExponent(u,this.e):(this.sign=Math.sign(u),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(u){this.fromMantissaExponent(this.m,u)}get s(){return this.sign}set s(u){u===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=u}get mantissa(){return this.m}set mantissa(u){this.m=u}get exponent(){return this.e}set exponent(u){this.e=u}static fromComponents(u,c,y){return new x().fromComponents(u,c,y)}static fromComponents_noNormalize(u,c,y){return new x().fromComponents_noNormalize(u,c,y)}static fromMantissaExponent(u,c){return new x().fromMantissaExponent(u,c)}static fromMantissaExponent_noNormalize(u,c){return new x().fromMantissaExponent_noNormalize(u,c)}static fromDecimal(u){return new x().fromDecimal(u)}static fromNumber(u){return new x().fromNumber(u)}static fromString(u){return new x().fromString(u)}static fromValue(u){return new x().fromValue(u)}static fromValue_noAlloc(u){if(u instanceof x)return u;if(typeof u=="string"){let c=x.fromStringCache.get(u);return c!==void 0?c:x.fromString(u)}else return typeof u=="number"?x.fromNumber(u):x.dZero}static abs(u){return x.fromValue_noAlloc(u).abs()}static neg(u){return x.fromValue_noAlloc(u).neg()}static negate(u){return x.fromValue_noAlloc(u).neg()}static negated(u){return x.fromValue_noAlloc(u).neg()}static sign(u){return x.fromValue_noAlloc(u).sign}static sgn(u){return x.fromValue_noAlloc(u).sign}static round(u){return x.fromValue_noAlloc(u).round()}static floor(u){return x.fromValue_noAlloc(u).floor()}static ceil(u){return x.fromValue_noAlloc(u).ceil()}static trunc(u){return x.fromValue_noAlloc(u).trunc()}static add(u,c){return x.fromValue_noAlloc(u).add(c)}static plus(u,c){return x.fromValue_noAlloc(u).add(c)}static sub(u,c){return x.fromValue_noAlloc(u).sub(c)}static subtract(u,c){return x.fromValue_noAlloc(u).sub(c)}static minus(u,c){return x.fromValue_noAlloc(u).sub(c)}static mul(u,c){return x.fromValue_noAlloc(u).mul(c)}static multiply(u,c){return x.fromValue_noAlloc(u).mul(c)}static times(u,c){return x.fromValue_noAlloc(u).mul(c)}static div(u,c){return x.fromValue_noAlloc(u).div(c)}static divide(u,c){return x.fromValue_noAlloc(u).div(c)}static recip(u){return x.fromValue_noAlloc(u).recip()}static reciprocal(u){return x.fromValue_noAlloc(u).recip()}static reciprocate(u){return x.fromValue_noAlloc(u).reciprocate()}static cmp(u,c){return x.fromValue_noAlloc(u).cmp(c)}static cmpabs(u,c){return x.fromValue_noAlloc(u).cmpabs(c)}static compare(u,c){return x.fromValue_noAlloc(u).cmp(c)}static isNaN(u){return u=x.fromValue_noAlloc(u),isNaN(u.sign)||isNaN(u.layer)||isNaN(u.mag)}static isFinite(u){return u=x.fromValue_noAlloc(u),isFinite(u.sign)&&isFinite(u.layer)&&isFinite(u.mag)}static eq(u,c){return x.fromValue_noAlloc(u).eq(c)}static equals(u,c){return x.fromValue_noAlloc(u).eq(c)}static neq(u,c){return x.fromValue_noAlloc(u).neq(c)}static notEquals(u,c){return x.fromValue_noAlloc(u).notEquals(c)}static lt(u,c){return x.fromValue_noAlloc(u).lt(c)}static lte(u,c){return x.fromValue_noAlloc(u).lte(c)}static gt(u,c){return x.fromValue_noAlloc(u).gt(c)}static gte(u,c){return x.fromValue_noAlloc(u).gte(c)}static max(u,c){return x.fromValue_noAlloc(u).max(c)}static min(u,c){return x.fromValue_noAlloc(u).min(c)}static minabs(u,c){return x.fromValue_noAlloc(u).minabs(c)}static maxabs(u,c){return x.fromValue_noAlloc(u).maxabs(c)}static clamp(u,c,y){return x.fromValue_noAlloc(u).clamp(c,y)}static clampMin(u,c){return x.fromValue_noAlloc(u).clampMin(c)}static clampMax(u,c){return x.fromValue_noAlloc(u).clampMax(c)}static cmp_tolerance(u,c,y){return x.fromValue_noAlloc(u).cmp_tolerance(c,y)}static compare_tolerance(u,c,y){return x.fromValue_noAlloc(u).cmp_tolerance(c,y)}static eq_tolerance(u,c,y){return x.fromValue_noAlloc(u).eq_tolerance(c,y)}static equals_tolerance(u,c,y){return x.fromValue_noAlloc(u).eq_tolerance(c,y)}static neq_tolerance(u,c,y){return x.fromValue_noAlloc(u).neq_tolerance(c,y)}static notEquals_tolerance(u,c,y){return x.fromValue_noAlloc(u).notEquals_tolerance(c,y)}static lt_tolerance(u,c,y){return x.fromValue_noAlloc(u).lt_tolerance(c,y)}static lte_tolerance(u,c,y){return x.fromValue_noAlloc(u).lte_tolerance(c,y)}static gt_tolerance(u,c,y){return x.fromValue_noAlloc(u).gt_tolerance(c,y)}static gte_tolerance(u,c,y){return x.fromValue_noAlloc(u).gte_tolerance(c,y)}static pLog10(u){return x.fromValue_noAlloc(u).pLog10()}static absLog10(u){return x.fromValue_noAlloc(u).absLog10()}static log10(u){return x.fromValue_noAlloc(u).log10()}static log(u,c){return x.fromValue_noAlloc(u).log(c)}static log2(u){return x.fromValue_noAlloc(u).log2()}static ln(u){return x.fromValue_noAlloc(u).ln()}static logarithm(u,c){return x.fromValue_noAlloc(u).logarithm(c)}static pow(u,c){return x.fromValue_noAlloc(u).pow(c)}static pow10(u){return x.fromValue_noAlloc(u).pow10()}static root(u,c){return x.fromValue_noAlloc(u).root(c)}static factorial(u,c){return x.fromValue_noAlloc(u).factorial()}static gamma(u,c){return x.fromValue_noAlloc(u).gamma()}static lngamma(u,c){return x.fromValue_noAlloc(u).lngamma()}static exp(u){return x.fromValue_noAlloc(u).exp()}static sqr(u){return x.fromValue_noAlloc(u).sqr()}static sqrt(u){return x.fromValue_noAlloc(u).sqrt()}static cube(u){return x.fromValue_noAlloc(u).cube()}static cbrt(u){return x.fromValue_noAlloc(u).cbrt()}static tetrate(u,c=2,y=x.fromComponents_noNormalize(1,0,1)){return x.fromValue_noAlloc(u).tetrate(c,y)}static iteratedexp(u,c=2,y=x.fromComponents_noNormalize(1,0,1)){return x.fromValue_noAlloc(u).iteratedexp(c,y)}static iteratedlog(u,c=10,y=1){return x.fromValue_noAlloc(u).iteratedlog(c,y)}static layeradd10(u,c){return x.fromValue_noAlloc(u).layeradd10(c)}static layeradd(u,c,y=10){return x.fromValue_noAlloc(u).layeradd(c,y)}static slog(u,c=10){return x.fromValue_noAlloc(u).slog(c)}static lambertw(u){return x.fromValue_noAlloc(u).lambertw()}static ssqrt(u){return x.fromValue_noAlloc(u).ssqrt()}static pentate(u,c=2,y=x.fromComponents_noNormalize(1,0,1)){return x.fromValue_noAlloc(u).pentate(c,y)}static affordGeometricSeries(u,c,y,T){return this.affordGeometricSeries_core(x.fromValue_noAlloc(u),x.fromValue_noAlloc(c),x.fromValue_noAlloc(y),T)}static sumGeometricSeries(u,c,y,T){return this.sumGeometricSeries_core(u,x.fromValue_noAlloc(c),x.fromValue_noAlloc(y),T)}static affordArithmeticSeries(u,c,y,T){return this.affordArithmeticSeries_core(x.fromValue_noAlloc(u),x.fromValue_noAlloc(c),x.fromValue_noAlloc(y),x.fromValue_noAlloc(T))}static sumArithmeticSeries(u,c,y,T){return this.sumArithmeticSeries_core(x.fromValue_noAlloc(u),x.fromValue_noAlloc(c),x.fromValue_noAlloc(y),x.fromValue_noAlloc(T))}static efficiencyOfPurchase(u,c,y){return this.efficiencyOfPurchase_core(x.fromValue_noAlloc(u),x.fromValue_noAlloc(c),x.fromValue_noAlloc(y))}static randomDecimalForTesting(u){if(Math.random()*20<1)return x.fromComponents_noNormalize(0,0,0);let c=Math.random()>.5?1:-1;if(Math.random()*20<1)return x.fromComponents_noNormalize(c,0,1);let y=Math.floor(Math.random()*(u+1)),T=y===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(T=Math.trunc(T));let M=Math.pow(10,T);return Math.random()>.9&&(M=Math.trunc(M)),x.fromComponents(c,y,M)}static affordGeometricSeries_core(u,c,y,T){let M=c.mul(y.pow(T));return x.floor(u.div(M).mul(y.sub(1)).add(1).log10().div(y.log10()))}static sumGeometricSeries_core(u,c,y,T){return c.mul(y.pow(T)).mul(x.sub(1,y.pow(u))).div(x.sub(1,y))}static affordArithmeticSeries_core(u,c,y,T){let k=c.add(T.mul(y)).sub(y.div(2)),K=k.pow(2);return k.neg().add(K.add(y.mul(u).mul(2)).sqrt()).div(y).floor()}static sumArithmeticSeries_core(u,c,y,T){let M=c.add(T.mul(y));return u.div(2).mul(M.mul(2).plus(u.sub(1).mul(y)))}static efficiencyOfPurchase_core(u,c,y){return u.div(c).add(u.div(y))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<o)return this.layer+=1,this.mag=Math.log10(this.mag),this;let u=Math.abs(this.mag),c=Math.sign(this.mag);if(u>=i)return this.layer+=1,this.mag=c*Math.log10(u),this;for(;u<s&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=c*Math.pow(10,u),u=Math.abs(this.mag),c=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(u,c,y){return this.sign=u,this.layer=c,this.mag=y,this.normalize(),this}fromComponents_noNormalize(u,c,y){return this.sign=u,this.layer=c,this.mag=y,this}fromMantissaExponent(u,c){return this.layer=1,this.sign=Math.sign(u),u=Math.abs(u),this.mag=c+Math.log10(u),this.normalize(),this}fromMantissaExponent_noNormalize(u,c){return this.fromMantissaExponent(u,c),this}fromDecimal(u){return this.sign=u.sign,this.layer=u.layer,this.mag=u.mag,this}fromNumber(u){return this.mag=Math.abs(u),this.sign=Math.sign(u),this.layer=0,this.normalize(),this}fromString(u){let c=u,y=x.fromStringCache.get(c);if(y!==void 0)return this.fromDecimal(y);d?u=u.replace(",",""):f&&(u=u.replace(",","."));let T=u.split("^^^");if(T.length===2){let _t=parseFloat(T[0]),Wt=parseFloat(T[1]),ze=T[1].split(";"),Nr=1;if(ze.length===2&&(Nr=parseFloat(ze[1]),isFinite(Nr)||(Nr=1)),isFinite(_t)&&isFinite(Wt)){let Ii=x.pentate(_t,Wt,Nr);return this.sign=Ii.sign,this.layer=Ii.layer,this.mag=Ii.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}}let M=u.split("^^");if(M.length===2){let _t=parseFloat(M[0]),Wt=parseFloat(M[1]),ze=M[1].split(";"),Nr=1;if(ze.length===2&&(Nr=parseFloat(ze[1]),isFinite(Nr)||(Nr=1)),isFinite(_t)&&isFinite(Wt)){let Ii=x.tetrate(_t,Wt,Nr);return this.sign=Ii.sign,this.layer=Ii.layer,this.mag=Ii.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}}let k=u.split("^");if(k.length===2){let _t=parseFloat(k[0]),Wt=parseFloat(k[1]);if(isFinite(_t)&&isFinite(Wt)){let ze=x.pow(_t,Wt);return this.sign=ze.sign,this.layer=ze.layer,this.mag=ze.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}}u=u.trim().toLowerCase();let K,rt,lt=u.split("pt");if(lt.length===2){K=10,rt=parseFloat(lt[0]),lt[1]=lt[1].replace("(",""),lt[1]=lt[1].replace(")","");let _t=parseFloat(lt[1]);if(isFinite(_t)||(_t=1),isFinite(K)&&isFinite(rt)){let Wt=x.tetrate(K,rt,_t);return this.sign=Wt.sign,this.layer=Wt.layer,this.mag=Wt.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}}if(lt=u.split("p"),lt.length===2){K=10,rt=parseFloat(lt[0]),lt[1]=lt[1].replace("(",""),lt[1]=lt[1].replace(")","");let _t=parseFloat(lt[1]);if(isFinite(_t)||(_t=1),isFinite(K)&&isFinite(rt)){let Wt=x.tetrate(K,rt,_t);return this.sign=Wt.sign,this.layer=Wt.layer,this.mag=Wt.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}}let Tt=u.split("e"),wt=Tt.length-1;if(wt===0){let _t=parseFloat(u);if(isFinite(_t))return this.fromNumber(_t),x.fromStringCache.size>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}else if(wt===1){let _t=parseFloat(u);if(isFinite(_t)&&_t!==0)return this.fromNumber(_t),x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}let Lt=u.split("e^");if(Lt.length===2){this.sign=1,Lt[0].charAt(0)=="-"&&(this.sign=-1);let _t="";for(let Wt=0;Wt<Lt[1].length;++Wt){let ze=Lt[1].charCodeAt(Wt);if(ze>=43&&ze<=57||ze===101)_t+=Lt[1].charAt(Wt);else return this.layer=parseFloat(_t),this.mag=parseFloat(Lt[1].substr(Wt+1)),this.normalize(),x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}}if(wt<1)return this.sign=0,this.layer=0,this.mag=0,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this;let pe=parseFloat(Tt[0]);if(pe===0)return this.sign=0,this.layer=0,this.mag=0,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this;let Ms=parseFloat(Tt[Tt.length-1]);if(wt>=2){let _t=parseFloat(Tt[Tt.length-2]);isFinite(_t)&&(Ms*=Math.sign(_t),Ms+=S(_t))}if(!isFinite(pe))this.sign=Tt[0]==="-"?-1:1,this.layer=wt,this.mag=Ms;else if(wt===1)this.sign=Math.sign(pe),this.layer=1,this.mag=Ms+Math.log10(Math.abs(pe));else if(this.sign=Math.sign(pe),this.layer=wt,wt===2){let _t=x.mul(x.fromComponents(1,2,Ms),x.fromValue_noAlloc(pe));return this.sign=_t.sign,this.layer=_t.layer,this.mag=_t.mag,x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}else this.mag=Ms;return this.normalize(),x.fromStringCache.maxSize>=1&&x.fromStringCache.set(c,x.fromDecimal(this)),this}fromValue(u){return u instanceof x?this.fromDecimal(u):typeof u=="number"?this.fromNumber(u):typeof u=="string"?this.fromString(u):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(u){return isNaN(this.m)?Number.NaN:this.m===0?0:E(this.m,u)}magnitudeWithDecimalPlaces(u){return isNaN(this.mag)?Number.NaN:this.mag===0?0:E(this.mag,u)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=l?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(u){return this.layer===0?(this.sign*this.mag).toExponential(u):this.toStringWithDecimalPlaces(u)}toFixed(u){return this.layer===0?(this.sign*this.mag).toFixed(u):this.toStringWithDecimalPlaces(u)}toPrecision(u){return this.e<=-7?this.toExponential(u-1):u>this.e?this.toFixed(u-this.exponent-1):this.toExponential(u-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(u){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(u):E(this.m,u)+"e"+E(this.e,u):this.layer===1?E(this.m,u)+"e"+E(this.e,u):this.layer<=l?(this.sign===-1?"-":"")+"e".repeat(this.layer)+E(this.mag,u):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+E(this.mag,u)}abs(){return x.fromComponents_noNormalize(this.sign===0?0:1,this.layer,this.mag)}neg(){return x.fromComponents_noNormalize(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?x.dZero:this.layer===0?x.fromComponents(this.sign,0,Math.trunc(this.mag)):this}add(u){let c=x.fromValue_noAlloc(u);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(c.layer)||this.sign===0)return c;if(c.sign===0)return this;if(this.sign===-c.sign&&this.layer===c.layer&&this.mag===c.mag)return x.fromComponents_noNormalize(0,0,0);let y,T;if(this.layer>=2||c.layer>=2)return this.maxabs(c);if(x.cmpabs(this,c)>0?(y=this,T=c):(y=c,T=this),y.layer===0&&T.layer===0)return x.fromNumber(y.sign*y.mag+T.sign*T.mag);let M=y.layer*Math.sign(y.mag),k=T.layer*Math.sign(T.mag);if(M-k>=2)return y;if(M===0&&k===-1){if(Math.abs(T.mag-Math.log10(y.mag))>e)return y;{let K=Math.pow(10,Math.log10(y.mag)-T.mag),rt=T.sign+y.sign*K;return x.fromComponents(Math.sign(rt),1,T.mag+Math.log10(Math.abs(rt)))}}if(M===1&&k===0){if(Math.abs(y.mag-Math.log10(T.mag))>e)return y;{let K=Math.pow(10,y.mag-Math.log10(T.mag)),rt=T.sign+y.sign*K;return x.fromComponents(Math.sign(rt),1,Math.log10(T.mag)+Math.log10(Math.abs(rt)))}}if(Math.abs(y.mag-T.mag)>e)return y;{let K=Math.pow(10,y.mag-T.mag),rt=T.sign+y.sign*K;return x.fromComponents(Math.sign(rt),1,T.mag+Math.log10(Math.abs(rt)))}throw Error("Bad arguments to add: "+this+", "+u)}plus(u){return this.add(u)}sub(u){return this.add(x.fromValue_noAlloc(u).neg())}subtract(u){return this.sub(u)}minus(u){return this.sub(u)}mul(u){let c=x.fromValue_noAlloc(u);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(c.layer))return c;if(this.sign===0||c.sign===0)return x.fromComponents_noNormalize(0,0,0);if(this.layer===c.layer&&this.mag===-c.mag)return x.fromComponents_noNormalize(this.sign*c.sign,0,1);let y,T;if(this.layer>c.layer||this.layer==c.layer&&Math.abs(this.mag)>Math.abs(c.mag)?(y=this,T=c):(y=c,T=this),y.layer===0&&T.layer===0)return x.fromNumber(y.sign*T.sign*y.mag*T.mag);if(y.layer>=3||y.layer-T.layer>=2)return x.fromComponents(y.sign*T.sign,y.layer,y.mag);if(y.layer===1&&T.layer===0)return x.fromComponents(y.sign*T.sign,1,y.mag+Math.log10(T.mag));if(y.layer===1&&T.layer===1)return x.fromComponents(y.sign*T.sign,1,y.mag+T.mag);if(y.layer===2&&T.layer===1){let M=x.fromComponents(Math.sign(y.mag),y.layer-1,Math.abs(y.mag)).add(x.fromComponents(Math.sign(T.mag),T.layer-1,Math.abs(T.mag)));return x.fromComponents(y.sign*T.sign,M.layer+1,M.sign*M.mag)}if(y.layer===2&&T.layer===2){let M=x.fromComponents(Math.sign(y.mag),y.layer-1,Math.abs(y.mag)).add(x.fromComponents(Math.sign(T.mag),T.layer-1,Math.abs(T.mag)));return x.fromComponents(y.sign*T.sign,M.layer+1,M.sign*M.mag)}throw Error("Bad arguments to mul: "+this+", "+u)}multiply(u){return this.mul(u)}times(u){return this.mul(u)}div(u){let c=x.fromValue_noAlloc(u);return this.mul(c.recip())}divide(u){return this.div(u)}divideBy(u){return this.div(u)}dividedBy(u){return this.div(u)}recip(){return this.mag===0?x.dNaN:this.layer===0?x.fromComponents(this.sign,0,1/this.mag):x.fromComponents(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(u){let c=x.fromValue_noAlloc(u);return this.sign>c.sign?1:this.sign<c.sign?-1:this.sign*this.cmpabs(u)}cmpabs(u){let c=x.fromValue_noAlloc(u),y=this.mag>0?this.layer:-this.layer,T=c.mag>0?c.layer:-c.layer;return y>T?1:y<T?-1:this.mag>c.mag?1:this.mag<c.mag?-1:0}compare(u){return this.cmp(u)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(u){let c=x.fromValue_noAlloc(u);return this.sign===c.sign&&this.layer===c.layer&&this.mag===c.mag}equals(u){return this.eq(u)}neq(u){return!this.eq(u)}notEquals(u){return this.neq(u)}lt(u){return this.cmp(u)===-1}lte(u){return!this.gt(u)}gt(u){return this.cmp(u)===1}gte(u){return!this.lt(u)}max(u){let c=x.fromValue_noAlloc(u);return this.lt(c)?c:this}min(u){let c=x.fromValue_noAlloc(u);return this.gt(c)?c:this}maxabs(u){let c=x.fromValue_noAlloc(u);return this.cmpabs(c)<0?c:this}minabs(u){let c=x.fromValue_noAlloc(u);return this.cmpabs(c)>0?c:this}clamp(u,c){return this.max(u).min(c)}clampMin(u){return this.max(u)}clampMax(u){return this.min(u)}cmp_tolerance(u,c){let y=x.fromValue_noAlloc(u);return this.eq_tolerance(y,c)?0:this.cmp(y)}compare_tolerance(u,c){return this.cmp_tolerance(u,c)}eq_tolerance(u,c){let y=x.fromValue_noAlloc(u);if(c==null&&(c=1e-7),this.sign!==y.sign||Math.abs(this.layer-y.layer)>1)return!1;let T=this.mag,M=y.mag;return this.layer>y.layer&&(M=S(M)),this.layer<y.layer&&(T=S(T)),Math.abs(T-M)<=c*Math.max(Math.abs(T),Math.abs(M))}equals_tolerance(u,c){return this.eq_tolerance(u,c)}neq_tolerance(u,c){return!this.eq_tolerance(u,c)}notEquals_tolerance(u,c){return this.neq_tolerance(u,c)}lt_tolerance(u,c){let y=x.fromValue_noAlloc(u);return!this.eq_tolerance(y,c)&&this.lt(y)}lte_tolerance(u,c){let y=x.fromValue_noAlloc(u);return this.eq_tolerance(y,c)||this.lt(y)}gt_tolerance(u,c){let y=x.fromValue_noAlloc(u);return!this.eq_tolerance(y,c)&&this.gt(y)}gte_tolerance(u,c){let y=x.fromValue_noAlloc(u);return this.eq_tolerance(y,c)||this.gt(y)}pLog10(){return this.lt(x.dZero)?x.dZero:this.log10()}absLog10(){return this.sign===0?x.dNaN:this.layer>0?x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):x.fromComponents(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?x.dNaN:this.layer>0?x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):x.fromComponents(this.sign,0,Math.log10(this.mag))}log(u){return u=x.fromValue_noAlloc(u),this.sign<=0||u.sign<=0||u.sign===1&&u.layer===0&&u.mag===1?x.dNaN:this.layer===0&&u.layer===0?x.fromComponents(this.sign,0,Math.log(this.mag)/Math.log(u.mag)):x.div(this.log10(),u.log10())}log2(){return this.sign<=0?x.dNaN:this.layer===0?x.fromComponents(this.sign,0,Math.log2(this.mag)):this.layer===1?x.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?x.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?x.dNaN:this.layer===0?x.fromComponents(this.sign,0,Math.log(this.mag)):this.layer===1?x.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?x.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):x.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(u){return this.log(u)}pow(u){let c=x.fromValue_noAlloc(u),y=this,T=c;if(y.sign===0)return T.eq(0)?x.fromComponents_noNormalize(1,0,1):y;if(y.sign===1&&y.layer===0&&y.mag===1)return y;if(T.sign===0)return x.fromComponents_noNormalize(1,0,1);if(T.sign===1&&T.layer===0&&T.mag===1)return y;let M=y.absLog10().mul(T).pow10();return this.sign===-1?Math.abs(T.toNumber()%2)%2===1?M.neg():Math.abs(T.toNumber()%2)%2===0?M:x.dNaN:M}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return x.dNaN;let u=this;if(u.layer===0){let c=Math.pow(10,u.sign*u.mag);if(Number.isFinite(c)&&Math.abs(c)>=.1)return x.fromComponents(1,0,c);if(u.sign===0)return x.dOne;u=x.fromComponents_noNormalize(u.sign,u.layer+1,Math.log10(u.mag))}return u.sign>0&&u.mag>=0?x.fromComponents(u.sign,u.layer+1,u.mag):u.sign<0&&u.mag>=0?x.fromComponents(-u.sign,u.layer+1,-u.mag):x.dOne}pow_base(u){return x.fromValue_noAlloc(u).pow(this)}root(u){let c=x.fromValue_noAlloc(u);return this.pow(c.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?x.exp(x.mul(this,x.ln(this).sub(1))):x.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(x.fromComponents_noNormalize(1,0,24)))return x.fromNumber(C(this.sign*this.mag));let u=this.mag-1,c=.9189385332046727;c=c+(u+.5)*Math.log(u),c=c-u;let y=u*u,T=u,M=12*T,k=1/M,K=c+k;if(K===c||(c=K,T=T*y,M=360*T,k=1/M,K=c-k,K===c))return x.exp(c);c=K,T=T*y,M=1260*T;let rt=1/M;return c=c+rt,T=T*y,M=1680*T,rt=1/M,c=c-rt,x.exp(c)}else return this.layer===1?x.exp(x.mul(this,x.ln(this).sub(1))):x.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?x.dOne:this.layer===0&&this.mag<=709.7?x.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?x.fromComponents(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?x.fromComponents(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):x.fromComponents(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return x.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return x.fromComponents(1,2,Math.log10(this.mag)-.3010299956639812);{let u=x.div(x.fromComponents_noNormalize(this.sign,this.layer-1,this.mag),x.fromComponents_noNormalize(1,0,2));return u.layer+=1,u.normalize(),u}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(u=2,c=x.fromComponents_noNormalize(1,0,1)){if(u===1)return x.pow(this,c);if(u===0)return new x(c);if(this.eq(x.dOne))return x.dOne;if(this.eq(-1))return x.pow(this,c);if(u===Number.POSITIVE_INFINITY){let M=this.toNumber();if(M<=1.444667861009766&&M>=.06598803584531254){if(M>1.444667861009099)return x.fromNumber(Math.E);let k=x.ln(this).neg();return k.lambertw().div(k)}else return M>1.444667861009766?x.fromNumber(Number.POSITIVE_INFINITY):x.dNaN}if(this.eq(x.dZero)){let M=Math.abs((u+1)%2);return M>1&&(M=2-M),x.fromNumber(M)}if(u<0)return x.iteratedlog(c,this,-u);c=x.fromValue_noAlloc(c);let y=u;u=Math.trunc(u);let T=y-u;if(this.gt(x.dZero)&&this.lte(1.444667861009766)){u=Math.min(1e4,u);for(let M=0;M<u;++M){let k=c;if(c=this.pow(c),k.eq(c))return c}if(T!=0){let M=this.pow(c);return c.mul(1-T).add(M.mul(T))}return c}T!==0&&(c.eq(x.dOne)?this.gt(10)?c=this.pow(T):(c=x.fromNumber(x.tetrate_critical(this.toNumber(),T)),this.lt(2)&&(c=c.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?c=c.layeradd10(T):c=c.layeradd(T,this));for(let M=0;M<u;++M){if(c=this.pow(c),!isFinite(c.layer)||!isFinite(c.mag))return c.normalize();if(c.layer-this.layer>3)return x.fromComponents_noNormalize(c.sign,c.layer+(u-M-1),c.mag);if(M>1e4)return c}return c}iteratedexp(u=2,c=x.fromComponents_noNormalize(1,0,1)){return this.tetrate(u,c)}iteratedlog(u=10,c=1){if(c<0)return x.tetrate(u,-c,this);u=x.fromValue_noAlloc(u);let y=x.fromDecimal(this),T=c;c=Math.trunc(c);let M=T-c;if(y.layer-u.layer>3){let k=Math.min(c,y.layer-u.layer-3);c-=k,y.layer-=k}for(let k=0;k<c;++k){if(y=y.log(u),!isFinite(y.layer)||!isFinite(y.mag))return y.normalize();if(k>1e4)return y}return M>0&&M<1&&(u.eq(10)?y=y.layeradd10(-M):y=y.layeradd(-M,u)),y}slog(u=10,c=100){let y=.001,T=!1,M=!1,k=this.slog_internal(u).toNumber();for(let K=1;K<c;++K){let lt=new x(u).tetrate(k).gt(this);if(K>1&&M!=lt&&(T=!0),M=lt,T?y/=2:y*=2,y=Math.abs(y)*(lt?-1:1),k+=y,y===0)break}return x.fromNumber(k)}slog_internal(u=10){if(u=x.fromValue_noAlloc(u),u.lte(x.dZero)||u.eq(x.dOne))return x.dNaN;if(u.lt(x.dOne))return this.eq(x.dOne)?x.dZero:this.eq(x.dZero)?x.dNegOne:x.dNaN;if(this.mag<0||this.eq(x.dZero))return x.dNegOne;let c=0,y=x.fromDecimal(this);if(y.layer-u.layer>3){let T=y.layer-u.layer-3;c+=T,y.layer-=T}for(let T=0;T<100;++T)if(y.lt(x.dZero))y=x.pow(u,y),c-=1;else{if(y.lte(x.dOne))return x.fromNumber(c+x.slog_critical(u.toNumber(),y.toNumber()));c+=1,y=x.log(y,u)}return x.fromNumber(c)}static slog_critical(u,c){return u>10?c-1:x.critical_section(u,c,b)}static tetrate_critical(u,c){return x.critical_section(u,c,v)}static critical_section(u,c,y){c*=10,c<0&&(c=0),c>10&&(c=10),u<2&&(u=2),u>10&&(u=10);let T=0,M=0;for(let K=0;K<p.length;++K)if(p[K]==u){T=y[K][Math.floor(c)],M=y[K][Math.ceil(c)];break}else if(p[K]<u&&p[K+1]>u){let rt=(u-p[K])/(p[K+1]-p[K]);T=y[K][Math.floor(c)]*(1-rt)+y[K+1][Math.floor(c)]*rt,M=y[K][Math.ceil(c)]*(1-rt)+y[K+1][Math.ceil(c)]*rt;break}let k=c-Math.floor(c);return T<=0||M<=0?T*(1-k)+M*k:Math.pow(u,Math.log(T)/Math.log(u)*(1-k)+Math.log(M)/Math.log(u)*k)}layeradd10(u){u=x.fromValue_noAlloc(u).toNumber();let c=x.fromDecimal(this);if(u>=1){c.mag<0&&c.layer>0?(c.sign=0,c.mag=0,c.layer=0):c.sign===-1&&c.layer==0&&(c.sign=1,c.mag=-c.mag);let y=Math.trunc(u);u-=y,c.layer+=y}if(u<=-1){let y=Math.trunc(u);if(u-=y,c.layer+=y,c.layer<0)for(let T=0;T<100;++T){if(c.layer++,c.mag=Math.log10(c.mag),!isFinite(c.mag))return c.sign===0&&(c.sign=1),c.layer<0&&(c.layer=0),c.normalize();if(c.layer>=0)break}}for(;c.layer<0;)c.layer++,c.mag=Math.log10(c.mag);return c.sign===0&&(c.sign=1,c.mag===0&&c.layer>=1&&(c.layer-=1,c.mag=1)),c.normalize(),u!==0?c.layeradd(u,10):c}layeradd(u,c){let T=this.slog(c).toNumber()+u;return T>=0?x.tetrate(c,T):Number.isFinite(T)?T>=-1?x.log(x.tetrate(c,T+1),c):x.log(x.log(x.tetrate(c,T+2),c),c):x.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return x.fromNumber(X(this.toNumber()));if(this.layer===0)return x.fromNumber(X(this.sign*this.mag));if(this.layer===1)return F(this);if(this.layer===2)return F(this);if(this.layer>=3)return x.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return x.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);let u=this.ln();return u.div(u.lambertw())}pentate(u=2,c=x.fromComponents_noNormalize(1,0,1)){c=x.fromValue_noAlloc(c);let y=u;u=Math.trunc(u);let T=y-u;T!==0&&(c.eq(x.dOne)?(++u,c=x.fromNumber(T)):this.eq(10)?c=c.layeradd10(T):c=c.layeradd(T,this));for(let M=0;M<u;++M){if(c=this.tetrate(c.toNumber()),!isFinite(c.layer)||!isFinite(c.mag))return c.normalize();if(M>10)return c}return c}sin(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.sin(this.sign*this.mag)):x.fromComponents_noNormalize(0,0,0)}cos(){return this.mag<0?x.dOne:this.layer===0?x.fromNumber(Math.cos(this.sign*this.mag)):x.fromComponents_noNormalize(0,0,0)}tan(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.tan(this.sign*this.mag)):x.fromComponents_noNormalize(0,0,0)}asin(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.asin(this.sign*this.mag)):x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?x.fromNumber(Math.acos(this.toNumber())):this.layer===0?x.fromNumber(Math.acos(this.sign*this.mag)):x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?x.fromNumber(Math.atan(this.sign*this.mag)):x.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return x.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return x.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN):x.ln(this.add(1).div(x.fromNumber(1).sub(this))).div(2)}ascensionPenalty(u){return u===0?this:this.root(x.pow(10,u))}egg(){return this.add(9)}lessThanOrEqualTo(u){return this.cmp(u)<1}lessThan(u){return this.cmp(u)<0}greaterThanOrEqualTo(u){return this.cmp(u)>-1}greaterThan(u){return this.cmp(u)>0}static smoothDamp(u,c,y,T){return new x(u).add(new x(c).minus(new x(u)).times(new x(y)).times(new x(T)))}static format(u,c=2,y=9){return O(new x(u),c,y)}clone(){return this}mod(u){let c=new x(u);return c.eq(0)?new x(0):this.sign*c.sign==-1?this.abs().mod(c.abs()).neg():this.sign==-1?this.abs().mod(c.abs()):this.sub(this.div(c).floor().mul(c))}softcap(u,c,y){let T=this.clone();return T.gte(u)&&([0,"pow"].includes(y)&&(T=T.div(u).pow(c).mul(u)),[1,"mul"].includes(y)&&(T=T.sub(u).div(c).add(u))),T}scale(u,c,y,T=!1){u=new x(u),c=new x(c);let M=this.clone();return M.gte(u)&&([0,"pow"].includes(y)&&(M=T?M.mul(u.pow(c.sub(1))).root(c):M.pow(c).div(u.pow(c.sub(1)))),[1,"exp"].includes(y)&&(M=T?M.div(u).max(1).log(c).add(u):x.pow(c,M.sub(u)).mul(u))),M}format(u=2,c=9){return O(this.clone(),u,c)}formatST(u=2,c=9,y="st"){return O(this.clone(),u,c,y)}formatGain(u){return B(this.clone(),u)}toRoman(u){u=u?new x(u):5e3;let c=this.clone();if(c.gte(u))return c;let y=c.toNumber(),T=String(+y).split(""),M=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],k="",K=3;if(typeof T.pop()!="undefined"){for(;K--;)k=(M[+T.pop()+K*10]||"")+k;return Array(+T.join("")+1).join("M")+k}else return""}},x.dZero=x.fromComponents_noNormalize(0,0,0),x.dOne=x.fromComponents_noNormalize(1,0,1),x.dNegOne=x.fromComponents_noNormalize(-1,0,1),x.dTwo=x.fromComponents_noNormalize(1,0,2),x.dTen=x.fromComponents_noNormalize(1,0,10),x.dNaN=x.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN),x.dInf=x.fromComponents_noNormalize(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),x.dNegInf=x.fromComponents_noNormalize(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),x.dNumberMax=x.fromComponents(1,0,Number.MAX_VALUE),x.dNumberMin=x.fromComponents(1,0,Number.MIN_VALUE),x.fromStringCache=new r(h),x),q=[[["","U","D","T","Qa","Qt","Sx","Sp","Oc","No"],["","Dc","Vg","Tg","Qag","Qtg","Sxg","Spg","Ocg","Nog"],["","Ce","De","Te","Qae","Qte","Sxe","Spe","Oce","Noe"]],[["","Mi","Mc","Na","Pc","Fm","At","Zp","Yc","Xn"],["","Me","Du","Tr","Te","Pe","He","Hp","Ot","En"],["","c","Ic","TCn","TeC","PCn","HCn","HpC","OCn","ECn"],["","Hc","DHe","THt","TeH","PHc","HHe","HpH","OHt","EHc"]]],et={omega:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(_){let u=I.floor(_.div(1e3)),c=I.floor(u.div(this.config.greek.length)),y=this.config.greek[u.toNumber()%this.config.greek.length]+z(_.toNumber()%1e3);(this.config.greek[u.toNumber()%this.config.greek.length]===void 0||u.toNumber()>Number.MAX_SAFE_INTEGER)&&(y="\u03C9");let M=I.log(_,8e3).toNumber();if(c.equals(0))return y;if(c.gt(0)&&c.lte(3)){let rt=[];for(let lt=0;lt<c.toNumber();lt++)rt.push("\u03C9");return`${rt.join("^")}^${y}`}else{if(c.gt(3)&&c.lt(10))return`\u03C9(${c.toFixed(0)})^${y}`;if(M<3)return`\u03C9(${this.format(c)})^${y}`;if(M<6)return`\u03C9(${this.format(c)})`}let k=I.pow(8e3,M%1);return`\u03C9[${M<100?Math.floor(M).toFixed(0):this.format(I.floor(M))}](${this.format(k)})`}},omega_short:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(_){let u=I.floor(_.div(1e3)),c=I.floor(u.div(this.config.greek.length)),y=this.config.greek[u.toNumber()%this.config.greek.length]+z(_.toNumber()%1e3);(this.config.greek[u.toNumber()%this.config.greek.length]===void 0||u.toNumber()>Number.MAX_SAFE_INTEGER)&&(y="\u03C9");let M=I.log(_,8e3).toNumber();if(c.equals(0))return y;if(c.gt(0)&&c.lte(2)){let rt=[];for(let lt=0;lt<c.toNumber();lt++)rt.push("\u03C9");return`${rt.join("^")}^${y}`}else if(c.gt(2)&&c.lt(10))return`\u03C9(${c.toFixed(0)})^${y}`;let k=I.pow(8e3,M%1);return`\u03C9[${M<100?Math.floor(M).toFixed(0):this.format(I.floor(M))}](${this.format(k)})`}},elemental:{config:{element_lists:[["H"],["He","Li","Be","B","C","N","O","F"],["Ne","Na","Mg","Al","Si","P","S","Cl"],["Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br"],["Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I"],["Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At"],["Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts"],["Og"]]},getOffset(_){if(_==1)return 1;let u=Math.floor(_/2),c=2*u*(u+1)*(2*u+1)/3-2;return _%2==1&&(c+=2*Math.pow(u+1,2)),c},getAbbreviation(_,u){let c=this.abbreviationLength(_),y=Math.floor(c*u),T=y+this.getOffset(_);return T>118?this.beyondOg(T):this.config.element_lists[_-1][y]},beyondOg(_){let u=Math.floor(Math.log10(_)),c=["n","u","b","t","q","p","h","s","o","e"],y="";for(let T=u;T>=0;T--){let M=Math.floor(_/Math.pow(10,T))%10;y==""?y=c[M].toUpperCase():y+=c[M]}return y},abbreviationLength(_){return _==1?1:Math.pow(Math.floor(_/2)+1,2)*2},getAbbreviationAndValue(_){let u=_.log(118).toNumber(),c=Math.floor(u)+1,y=this.abbreviationLength(c),T=u-c+1,M=Math.floor(T*y),k=this.getAbbreviation(c,T),K=new I(118).pow(c+M/y-1);return[k,K]},formatElementalPart(_,u){return u.eq(1)?_:`${u} ${_}`},format(_,u){if(_.gt(new I(118).pow(new I(118).pow(new I(118).pow(4)))))return"e"+this.format(_.log10(),u);let c=_.log(118),T=c.log(118).log(118).toNumber(),M=Math.max(4-T*2,1),k=[];for(;c.gte(1)&&k.length<M;){let[rt,lt]=this.getAbbreviationAndValue(c),Tt=c.div(lt).floor();c=c.sub(Tt.mul(lt)),k.unshift([rt,Tt])}if(k.length>=M)return k.map(rt=>this.formatElementalPart(rt[0],rt[1])).join(" + ");let K=new I(118).pow(c).toFixed(k.length===1?3:u);return k.length===0?K:k.length===1?`${K} \xD7 ${this.formatElementalPart(k[0][0],k[0][1])}`:`${K} \xD7 (${k.map(rt=>this.formatElementalPart(rt[0],rt[1])).join(" + ")})`}},old_sc:{format(_,u){_=new I(_);let c=_.log10().floor();if(c.lt(9))return c.lt(3)?_.toFixed(u):_.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(_.gte("eeee10")){let T=_.slog();return(T.gte(1e9)?"":new I(10).pow(T.sub(T.floor())).toFixed(4))+"F"+this.format(T.floor(),0)}let y=_.div(new I(10).pow(c));return(c.log10().gte(9)?"":y.toFixed(4))+"e"+this.format(c,0)}}},eng:{format(_,u){_=new I(_);let c=_.log10().floor();if(c.lt(9))return c.lt(3)?_.toFixed(u):_.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(_.gte("eeee10")){let T=_.slog();return(T.gte(1e9)?"":new I(10).pow(T.sub(T.floor())).toFixed(4))+"F"+this.format(T.floor(),0)}let y=_.div(new I(1e3).pow(c.div(3).floor()));return(c.log10().gte(9)?"":y.toFixed(new I(4).sub(c.sub(c.div(3).floor().mul(3)))))+"e"+this.format(c.div(3).floor().mul(3),0)}}},mixed_sc:{format(_,u,c){_=new I(_);let y=_.log10().floor();return y.lt(303)&&y.gte(c)?O(_,u,c,"st"):O(_,u,c,"sc")}},layer:{layers:["infinity","eternity","reality","equality","affinity","celerity","identity","vitality","immunity","atrocity"],format(_,u,c){_=new I(_);let y=_.max(1).log10().max(1).log(mt.log10()).floor();if(y.lte(0))return O(_,u,c,"sc");_=new I(10).pow(_.max(1).log10().div(mt.log10().pow(y)).sub(y.gte(1)?1:0));let T=y.div(10).floor(),M=y.toNumber()%10-1;return O(_,Math.max(4,u),c,"sc")+" "+(T.gte(1)?"meta"+(T.gte(2)?"^"+O(T,0,c,"sc"):"")+"-":"")+(isNaN(M)?"nanity":this.layers[M])}},standard:{tier1(_){return q[0][0][_%10]+q[0][1][Math.floor(_/10)%10]+q[0][2][Math.floor(_/100)]},tier2(_){let u=_%10,c=Math.floor(_/10)%10,y=Math.floor(_/100)%10,T="";return _<10?q[1][0][_]:(c==1&&u==0?T+="Vec":T+=q[1][1][u]+q[1][2][c],T+=q[1][3][y],T)}},inf:{format(_,u,c){_=new I(_);let y=0,T=new I(Number.MAX_VALUE),M=["","\u221E","\u03A9","\u03A8","\u028A"],k=["","","m","mm","mmm"];for(;_.gte(T);)_=_.log(T),y++;return y==0?O(_,u,c,"sc"):_.gte(3)?k[y]+M[y]+"\u03C9^"+O(_.sub(1),u,c,"sc"):_.gte(2)?k[y]+"\u03C9"+M[y]+"-"+O(T.pow(_.sub(2)),u,c,"sc"):k[y]+M[y]+"-"+O(T.pow(_.sub(1)),u,c,"sc")}}},mt=new I(2).pow(1024),Y="\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089",R="\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";function z(_){return _.toFixed(0).split("").map(u=>u==="-"?"\u208B":Y[parseInt(u,10)]).join("")}function Q(_){return _.toFixed(0).split("").map(u=>u==="-"?"\u208B":R[parseInt(u,10)]).join("")}function ft(_,u=2,c=9,y="st"){return O(_,u,c,y)}function O(_,u=2,c=9,y="mixed_sc"){_=new I(_);let T=_.lt(0)?"-":"";if(_.mag==1/0)return T+"Infinity";if(Number.isNaN(_.mag))return T+"NaN";if(_.lt(0)&&(_=_.mul(-1)),_.eq(0))return _.toFixed(u);let M=_.log10().floor();switch(y){case"sc":if(_.log10().lt(Math.min(-u,0))&&u>1){let k=_.log10().ceil(),K=_.div(k.eq(-1)?new I(.1):new I(10).pow(k)),rt=k.mul(-1).max(1).log10().gte(9);return T+(rt?"":K.toFixed(2))+"e"+O(k,0,c,"mixed_sc")}else if(M.lt(c)){let k=Math.max(Math.min(u-M.toNumber(),u),0);return T+(k>0?_.toFixed(k):_.toFixed(k).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}else{if(_.gte("eeee10")){let rt=_.slog();return(rt.gte(1e9)?"":new I(10).pow(rt.sub(rt.floor())).toFixed(2))+"F"+O(rt.floor(),0)}let k=_.div(new I(10).pow(M)),K=M.log10().gte(9);return T+(K?"":k.toFixed(2))+"e"+O(M,0,c,"mixed_sc")}case"st":{let k=_.log(1e3).floor();if(k.lt(1))return T+_.toFixed(Math.max(Math.min(u-M.toNumber(),u),0));{let K=k.mul(3),rt=k.log10().floor();if(rt.gte(3e3))return"e"+O(M,u,c,"st");let lt="";if(k.lt(4))lt=["","K","M","B"][Math.round(k.toNumber())];else{let wt=Math.floor(k.log(1e3).toNumber());for(wt<100&&(wt=Math.max(wt-1,0)),k=k.sub(1).div(new I(10).pow(wt*3));k.gt(0);){let Lt=k.div(1e3).floor(),pe=k.sub(Lt.mul(1e3)).floor().toNumber();pe>0&&(pe==1&&!wt&&(lt="U"),wt&&(lt=et.standard.tier2(wt)+(lt?"-"+lt:"")),pe>1&&(lt=et.standard.tier1(pe)+lt)),k=Lt,wt++}}let Tt=_.div(new I(10).pow(K));return T+(rt.gte(10)?"":Tt.toFixed(new I(2).sub(M.sub(K)).add(1).toNumber())+" ")+lt}}default:return T+et[y].format(_,u,c)}}function B(_,u){_=new I(_),u=new I(u);let c=_.add(u),y,T=c.div(_);return T.gte(10)&&_.gte(1e100)?(T=T.log10().mul(20),y="(+"+O(T)+" OoMs/sec)"):y="(+"+O(u)+"/sec)",y}function W(_,u=2,c="s"){return _=new I(_),_.gte(86400)?O(_.div(86400).floor(),0,12,"sc")+":"+W(_.mod(86400),u,"d"):_.gte(3600)||c=="d"?(_.div(3600).gte(10)||c!="d"?"":"0")+O(_.div(3600).floor(),0,12,"sc")+":"+W(_.mod(3600),u,"h"):_.gte(60)||c=="h"?(_.div(60).gte(10)||c!="h"?"":"0")+O(_.div(60).floor(),0,12,"sc")+":"+W(_.mod(60),u,"m"):(_.gte(10)||c!="m"?"":"0")+O(_,u,12,"sc")}function nt(_){return _=new I(_),O(new I(1).sub(_).mul(100))+"%"}function at(_){return _=new I(_),O(_.mul(100))+"%"}function Ft(_,u=2){return _=new I(_),_.gte(1)?"\xD7"+_.format(u):"/"+_.pow(-1).format(u)}function jt(_,u,c=10){return I.gte(_,10)?I.pow(c,I.log(_,c).pow(u)):new I(_)}function Rt(_,u){_=new I(_);let c=[{name:"K",altName:"Kilo",value:new I("1000")},{name:"M",altName:"Mega",value:new I("1e6")},{name:"G",altName:"Giga",value:new I("1e9")},{name:"T",altName:"Tera",value:new I("1e12")},{name:"P",altName:"Peta",value:new I("1e15")},{name:"E",altName:"Exa",value:new I("1e18")},{name:"Z",altName:"Zetta",value:new I("1e21")},{name:"Y",altName:"Yotta",value:new I("1e24")},{name:"R",altName:"Ronna",value:new I("1e27")},{name:"Q",altName:"Quetta",value:new I("1e30")}],y;for(let T=0;T<c.length;T++)if(_.greaterThanOrEqualTo(c[T].value)){if(T==c.length-1)switch(u){case 1:y=c[T].name;break;case 2:y=`${_.divide(c[T].value).format()}`;break;case 3:y=c[T].altName;break;case 0:default:y=`${_.divide(c[T].value).format()} ${c[T].name}`;break}continue}else if(T==0)switch(u){case 1:y="";break;case 2:case 0:default:y=_.format();break}else switch(u){case 1:y=c[T-1].name;break;case 2:y=`${_.divide(c[T-1].value).format()}`;break;case 3:y=c[T-1].altName;break;case 0:default:y=`${_.divide(c[T-1].value).format()} ${c[T-1].name}`;break}return y}function Qt(_,u=!1){return`${Rt(_,2)} ${Rt(_,1)}eV${u?"/c^2":""}`}var me=Ne(gt({},et),{toSubscript:z,toSuperscript:Q,formatST:ft,format:O,formatGain:B,formatTime:W,formatReduction:nt,formatPercent:at,formatMult:Ft,expMult:jt,metric:Rt,ev:Qt});I.formats=me;var Yt=I,ae=class extends String{constructor(_){super(_),this.forEach=function(u){for(let c=0;c<this.length;c++)u(this[c])},this.forEachAdvanced=function(u,c,y){for(let T=c<0?0:c;T<(y>this.length?this.length:y<c?this.length:y);T++)u({value:this[T],index:T})},this.toNumber=function(){let u="";for(let c=0;c<this.length;c++)u+=this.charCodeAt(c).toString();return parseInt(u)},this.toArray=function(){let u=[];for(let c=0;c<this.length;c++)u.push(this[c]);return u},this.before=function(u){let c="";return this.forEachAdvanced(function(y){c+=y.value},0,u),c},this.after=function(u){let c="";return this.forEachAdvanced(function(y){c+=y.value},u,-1),c},this.customSplit=function(u){let c=[];return c.push(this.before(u)),c.push(this.after(u)),c},this.random=function(u){let c=(T,M,k)=>k!=null&&!k?Math.random()*(M>T?M-T:T-M)+(M>T?T:M):Math.round(Math.random()*(M>T?M-T:T-M)+(M>T?T:M)),y="";if(u>0)for(let T=0;T<u;T++)y+=this.charAt(c(0,this.length));else y=this.charAt(c(0,this.length));return y}}},yt=_=>new Yt(_);Object.getOwnPropertyNames(Yt).filter(_=>!Object.getOwnPropertyNames(class{}).includes(_)).forEach(_=>{yt[_]=Yt[_]});var Ot={getFast:function(_,u){_=JSON.stringify(_);let c=u.toString().replace(/\\/g,"").length,y=_.search(u),T="",M=c+2,k=0,K=0,rt=0,lt=0,Tt=0;function wt(){let Lt=_[y+M];if(_[y+M-1]!="\\")switch(Lt){case'"':k==0?k=1:k=0;break;case"'":K==0?K=1:K=0;break;case"`":rt==0?rt=1:rt=0;break;case"[":lt++;break;case"]":lt--;break;case"{":Tt++;break;case"}":Tt--;break}T+=Lt,M++}for(wt();k+K+rt+lt+Tt!=0;)wt();return JSON.parse(T)},get:function(_,u){try{for(let c=0;c<Object.keys(_).length&&Object.keys(_)[c]!="sign";c++){if(Object.keys(_)[c]==u)return _[Object.keys(_)[c]];if(typeof _[Object.keys(_)[c]]=="object"){let y=this.get(_[Object.keys(_)[c]],u);if(y!=null)return y}else continue}return null}catch(c){return null}},randomNumber:(_,u,c)=>c!=null&&!c?Math.random()*(u>_?u-_:_-u)+(u>_?_:u):Math.round(Math.random()*(u>_?u-_:_-u)+(u>_?_:u)),randomString64:(_,u)=>{let c=(Math.random()*1232311).toString();for(let y=0;y<_;y++)c=btoa(c)+btoa(btoa(Math.random().toString()));return u?c.length:c},randomString:_=>new ae("!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~").random(_).toString()},Gt=class Zo{static normalizeBoost(u,c){return u.order||(u.order=99),u.index||(u.index=c||0),u}static normalizeBoostArray(u){let c=[];return u.forEach((y,T)=>{c.push(this.normalizeBoost(y,T))}),c}constructor(u,c){u=u?yt(u):1,this.baseEffect=yt(u),c?this.boostArray=Zo.normalizeBoostArray(c):this.boostArray=[]}bGet(u){let c=null;for(let y=0;y<this.boostArray.length&&y!==this.boostArray.length;y++)u===this.boostArray[y].id&&(c=this.boostArray[y],c.index=y);return c}bRemove(u){let c=this.bGet(u);c&&delete this.boostArray[c.index]}bSet(u,c,y,T,M){let k=this.bGet(u);k?this.boostArray[k.index]=Zo.normalizeBoost({id:u,name:c,desc:y,value:T,order:M,index:this.boostArray.length}):this.boostArray.push(Zo.normalizeBoost({id:u,name:c,desc:y,value:T,order:M,index:this.boostArray.length}))}bSetAdvanced(...u){for(let c=0;c<u.length;c++){let y=this.bGet(u[c].id);y?(console.log(c),this.boostArray[y.index]=Zo.normalizeBoost(u[c])):this.boostArray=this.boostArray.concat(Zo.normalizeBoost(u[c]))}}calculate(u=this.baseEffect){let c=yt(u),y=this.boostArray;y.sort((T,M)=>T.order-M.order);for(let T=0;T<y.length;T++)c=y[T].value(c);return c}},Jt=class{constructor(){this.value=yt(0),this.upgrades=[]}},le=class{constructor(_){this.upgrades=[],this.pointer=_,this.boost=new Gt(1)}gain(_=1e3){return this.pointer().value=this.pointer().value.add(this.boost.calculate().mul(yt(_).div(1e3))),this.pointer().value}addUpgrade(_,u=!0){let c=T=>{let M=T.level?{level:T.level}:{level:yt(1)};return this.pointer().upgrades.push(M),T},y=[];for(let T=0;T<_.length;T++){let M=c(_[T]);M.getLevel=()=>{var k;return(k=this.pointer().upgrades[T].level)!=null?k:yt(0)},M.setLevel=k=>{var K,rt;return this.pointer().upgrades[T].level=(rt=(K=this.pointer().upgrades[T].level)==null?void 0:K.add(k))!=null?rt:k},u&&M.effect(M.level),y.push(M)}this.upgrades=this.upgrades.concat(y)}calculateUpgrade(_,u,c=!1){u=yt(u);function y(k,K){let rt=yt();for(let lt=yt(0);lt.lte(K);lt=lt.add(1))rt=rt.add(k(lt));return rt}function T(k,K,rt=c){if(rt){let lt=yt(0),Tt=u,wt=yt(-1);for(;lt.lessThanOrEqualTo(Tt);){let Lt=lt.plus(Tt).dividedBy(2).floor();k(Lt).lte(K)?(wt=Lt,lt=Lt.plus(1)):Tt=Lt.minus(1)}return wt}else{let lt=yt(0),Tt=yt(1),wt=yt(0);for(;y(k,Tt).lt(K);)wt=Tt,Tt=Tt.mul(2);for(;lt.lt(Tt);){let Lt=yt.floor(lt.add(Tt).div(2));y(k,Lt).lt(K)?lt=Lt.add(1):Tt=Lt}return[lt,y(k,lt.sub(1))]}}let M;if(typeof _=="number")M=this.upgrades[_];else if(typeof _=="string")for(let k=0;k<this.upgrades.length;k++)if(this.upgrades[k].id==_){M=this.upgrades[k];break}else continue;else return!1;return T(k=>M.costScaling(M.getLevel().add(k)),this.pointer().value)}buyUpgrade(_,u){let c=(()=>{let T;if(typeof _=="number")T=this.upgrades[_];else if(typeof _=="string"){for(let M=0;M<this.upgrades.length;M++)if(this.upgrades[M].id===_){T=this.upgrades[M];break}}else T=!1;return T})();if(typeof c=="boolean")return!1;let y=this.calculateUpgrade(_,u);if(!Array.isArray(y)||y.length!==2||y[0].lte(0))return!1;{u=c.getLevel().add(u).lte(c.maxLevel)?u:c.maxLevel.sub(c.getLevel());let T=y[0].lte(u);return this.pointer().value=this.pointer().value.sub(y[1]),c.setLevel(c.getLevel().add(y[0])),typeof c.effect=="function"&&c.effect(c.getLevel(),c),!0}}},Pi=class{constructor(_){this.initial=yt(_),this.value=yt(_),this.boost=new Gt(1)}update(_){return _&&_(),this.value=this.boost.calculate(this.initial),this.value}},Jo=class{constructor(_,u,c){this.x=_,this.y=u,this.properties=c||{}}setValue(_,u){return this.properties[_]=u,u}getValue(_){return this.properties[_]}getDistance(_,u){return Math.abs(Math.sqrt(Math.pow(_-this.x,2)+Math.pow(u-this.y,2)))}},wu=class{constructor(_,u,c){this.x_size=_,this.y_size=u;for(let y=0;y<u;y++){this[y]=[];for(let T=0;T<_;T++)this[y][T]=new Jo(T,y,c)}}all(){let _=[];for(let u=0;u<this.y_size;u++)for(let c=0;c<this.x_size;c++)_.push(this[u][c]);return _}allX(_){let u=[];for(let c=0;c<this.y_size;c++)u.push(this[c][_]);return u}allY(_){let u=[];for(let c=0;this.x_size;c++)u.push(this[_][c]);return u}getCell(_,u){return this[u][_]}getAdjacent(_,u){let c=[];return c[0]=this.getCell(_,u+1),c[1]=this.getCell(_+1,u),c[2]=this.getCell(_,u-1),c[3]=this.getCell(_-1,u+1),c}getDiagonal(_,u){let c=[];return c[0]=this.getCell(_-1,u+1),c[1]=this.getCell(_+1,u+1),c[2]=this.getCell(_+1,u-1),c[3]=this.getCell(_-1,u-1),c}getEncircling(_,u){return this.getAdjacent(_,u).concat(this.getDiagonal(_,u))}static getDistance(_,u,c,y){return Math.abs(Math.sqrt(Math.pow(c-_,2)+Math.pow(y-u,2)))}},Su=class{constructor(_,u){for(let c of _){if(!c.name||!c.value)break;if(this[c.name]=c.value,u!=null)for(let y of u){if(!y.name||!y.value)break;this[c.name][y.name]||(this[c.name][y.name]=y.value)}delete this[c.name].name,delete this[c.name].value}}},Cs=class extends Array{constructor(_){super(_)}random(_){let u="";if(_>0)for(let c=0;c<_;c++)u+=this[Ot.randomNumber(0,this.length)];else u=this[Ot.randomNumber(0,this.length)];return u}},lb=class pu extends Object{constructor(u){super(u)}static getFast(u,c){u=JSON.stringify(u);let y=c.toString().replace(/\\/g,"").length,T=u.search(c),M="",k=y+2,K=0,rt=0,lt=0,Tt=0,wt=0;function Lt(){let pe=u[T+k];if(u[T+k-1]!="\\")switch(pe){case'"':K==0?K=1:K=0;break;case"'":rt==0?rt=1:rt=0;break;case"`":lt==0?lt=1:lt=0;break;case"[":Tt++;break;case"]":Tt--;break;case"{":wt++;break;case"}":wt--;break}M+=pe,k++}for(Lt();K+rt+lt+Tt+wt!=0;)Lt();return JSON.parse(M)}getFast(u){return pu.getFast(this,u)}static get(u,c){try{for(let y=0;y<Object.keys(u).length&&Object.keys(u)[y]!="sign";y++){if(Object.keys(u)[y]==c)return u[Object.keys(u)[y]];if(typeof u[Object.keys(u)[y]]=="object"){let T=pu.get(u[Object.keys(u)[y]],c);if(T!=null)return T}else continue}return null}catch(y){return null}}get(u){return pu.get(this,u)}},Gm=Ne(gt({},Ot),{E:yt,classes:{boost:Gt,currency:Jt,currencyStatic:le,attribute:Pi,grid:wu,gridCell:Jo,EString:ae,EArray:Cs,EObject:lb,obb:Su}});typeof process!="object"&&typeof window!="undefined"&&(window.eMath=Gm);var TC=Gm})()});var H1={};Mu(H1,{default:()=>j});var Bt,j,wi=g(()=>{"use strict";V1();Em();Ts();console.log("test: ",void 0,void 0);Bt={keys:z1,PIXI:mu,camera:{x:0,y:0,smoothDamp:.15},player:{sprite:null,acceleration:.2,velocity:{x:0,y:0},restoringForce:.005,friction:.95,position:{x:0,y:0,_x:0,_y:0},state:["idle"]},version:{saveAPI:1,phase:"alpha",dev:!0},data:{playtime:{tActive:new(void 0),tPassive:new(void 0),timewarp:(void 0)(),active:new(void 0),passive:new(void 0),points:new(void 0),timeLastPlayed:(void 0)()},quarks:{currency:new(void 0),regenRate:(void 0)(2),absorbRate:(void 0)(2),maxParticles:(void 0)(10)},chronos:{currency:new(void 0),lastReward:(void 0)(0)}},static:{massParticles:[],playtime:{tActive:new(void 0)(()=>Bt.data.playtime.tActive),tPassive:new(void 0)(()=>Bt.data.playtime.tPassive),active:new(void 0)(()=>Bt.data.playtime.active),passive:new(void 0)(()=>Bt.data.playtime.passive),points:new(void 0)(()=>Bt.data.playtime.points)},quarks:{currency:new(void 0)(()=>Bt.data.quarks.currency),regenRate:new(void 0)(2),absorbRate:new(void 0)(2),maxParticles:new(void 0)(10)},chronos:{currency:new(void 0)(()=>Bt.data.chronos.currency)}},functions:{start:{},startF:()=>Object.values(Bt.functions.start).forEach(r=>r()),loop:{},loopF:r=>Object.values(Bt.functions.loop).forEach(t=>t(r)),timewarp:r=>Bt.data.playtime.timewarp=(void 0)(r),claimDailyReward:function(r=!1){return r||Bt.data.chronos.lastReward.sub(Date.now()).mul(-1).gte((void 0)(432e5))?(Bt.data.chronos.lastReward=(void 0)(Date.now()),Bt.static.chronos.currency.gain(),!0):!1},updateCamera:function(r){Bt.camera.x=(void 0).smoothDamp(Bt.camera.x,Bt.player.position.x,Bt.camera.smoothDamp,r).toNumber(),Bt.camera.y=(void 0).smoothDamp(Bt.camera.y,Bt.player.position.y,Bt.camera.smoothDamp,r).toNumber()}},settings:{framerate:30,c2:!1,clickToMove:!1},features:{}};console.log(Bt);Bt.version.dev&&(window.Game=Bt);j=Bt});var As,wm=g(()=>{"use strict";Ts();wi();As={events:[],addEvent:function(r,t,e,i){this.events.push((()=>{switch(t){case"interval":return{name:r,type:t,delay:(void 0)(e),callbackFn:i,timeCreated:(void 0)(Date.now()),intervalLast:(void 0)(Date.now())};case"timeout":default:return{name:r,type:t,delay:(void 0)(e),callbackFn:i,timeCreated:(void 0)(Date.now())}}})())}};j.PIXI.app.ticker.add(function(){let r=(void 0)(Date.now());for(let t=0;t<As.events.length;t++){let e=As.events[t];e.type==="interval"?r.sub(e.intervalLast).gte(e.delay)&&(e.callbackFn(),e.intervalLast=r):e.type==="timeout"&&r.sub(e.timeCreated).gte(e.delay)&&(e.callbackFn(),As.events.splice(t,1),t--)}});j.PIXI.app.ticker.add(function(r){j.data.playtime.timewarp=(void 0)(),j.static.playtime.tActive.gain(r),j.static.playtime.tPassive.gain(r),j.static.playtime.active.gain(r),j.static.playtime.passive.gain(r),j.static.playtime.points.gain(r)})});var Xw={};var j1=g(()=>{"use strict";Ts();wi();wm();console.log(j.static.quarks.currency);j.keys.addKey("Collect Quarks"," ",function(){if(j.player.state[0]==="idle")for(let r=0;r<j.static.massParticles.length;r++){let t=j.static.massParticles[r];if(j.player.sprite.collides(t)){j.player.state=["lockedToMass",t],As.addEvent("massCollect","timeout",(void 0)(1e3).div(j.data.quarks.absorbRate),function(){j.player.state=["lockedToMassExit"],console.log("gainMass");let e=j.static.massParticles.indexOf(t);j.static.massParticles[e].remove(),j.static.massParticles.splice(e,1),j.static.quarks.currency.gain(),console.log(j.data.quarks.currency.value.toString())});break}}})});var W1=g(()=>{L();});var jw,Ww,$w,Ci,gu=g(()=>{L();jw=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ww=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,$w=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,Ci=class extends ${constructor(t=4,e=3,i=!1){super(jw,i?$w:Ww),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new it,this.pixelSize=1,this._clamp=i,Array.isArray(t)?this.kernels=t:(this._blur=t,this.quality=e)}apply(t,e,i,s){let o=this._pixelSize.x/e._frame.width,n=this._pixelSize.y/e._frame.height,a;if(this._quality===1||this._blur===0)a=this._kernels[0]+.5,this.uniforms.uOffset[0]=a*o,this.uniforms.uOffset[1]=a*n,t.applyFilter(this,e,i,s);else{let l=t.getFilterTexture(),h=e,d=l,f,m=this._quality-1;for(let p=0;p<m;p++)a=this._kernels[p]+.5,this.uniforms.uOffset[0]=a*o,this.uniforms.uOffset[1]=a*n,t.applyFilter(this,h,d,1),f=h,h=d,d=f;a=this._kernels[m]+.5,this.uniforms.uOffset[0]=a*o,this.uniforms.uOffset[1]=a*n,t.applyFilter(this,h,i,s),t.returnFilterTexture(l)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((t,e)=>t+e+.5,0))}_generateKernels(){let t=this._blur,e=this._quality,i=[t];if(t>0){let s=t,o=t/e;for(let n=1;n<e;n++)s-=o,i.push(s)}this._kernels=i,this._updatePadding()}get kernels(){return this._kernels}set kernels(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max(...t)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(t){typeof t=="number"?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof it?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}get blur(){return this._blur}set blur(t){this._blur=t,this._generateKernels()}}});var $1,Yw,Sm,qw,Y1,Kw,q1=g(()=>{L();gu();$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Yw=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,Sm=class extends ${constructor(t=.5){super($1,Yw),this.threshold=t}get threshold(){return this.uniforms.threshold}set threshold(t){this.uniforms.threshold=t}},qw=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`,Y1=class extends ${constructor(r){super($1,qw),this.bloomScale=1,this.brightness=1,this._resolution=N.FILTER_RESOLUTION,typeof r=="number"&&(r={threshold:r});let t=Object.assign(Y1.defaults,r);this.bloomScale=t.bloomScale,this.brightness=t.brightness;let{kernels:e,blur:i,quality:s,pixelSize:o,resolution:n}=t;this._extractFilter=new Sm(t.threshold),this._extractFilter.resolution=n,this._blurFilter=e?new Ci(e):new Ci(i,s),this.pixelSize=o,this.resolution=n}apply(r,t,e,i,s){let o=r.getFilterTexture();this._extractFilter.apply(r,t,o,1,s);let n=r.getFilterTexture();this._blurFilter.apply(r,o,n,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=n,r.applyFilter(this,t,e,i),r.returnFilterTexture(n),r.returnFilterTexture(o)}get resolution(){return this._resolution}set resolution(r){this._resolution=r,this._extractFilter&&(this._extractFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)}get threshold(){return this._extractFilter.threshold}set threshold(r){this._extractFilter.threshold=r}get kernels(){return this._blurFilter.kernels}set kernels(r){this._blurFilter.kernels=r}get blur(){return this._blurFilter.blur}set blur(r){this._blurFilter.blur=r}get quality(){return this._blurFilter.quality}set quality(r){this._blurFilter.quality=r}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(r){this._blurFilter.pixelSize=r}},Kw=Y1;Kw.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:N.FILTER_RESOLUTION}});var K1=g(()=>{L();});var Z1=g(()=>{L();});var Q1=g(()=>{L();zl();Vl();});var Zw,Qw,J1,Jw,t_=g(()=>{L();Zw=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Qw=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`,J1=class extends ${constructor(r){super(Zw,Qw),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,J1.defaults,r)}apply(r,t,e,i){let{width:s,height:o}=t.filterFrame;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=o,r.applyFilter(this,t,e,i)}get radius(){return this.uniforms.radius}set radius(r){this.uniforms.radius=r}get strength(){return this.uniforms.strength}set strength(r){this.uniforms.strength=r}get center(){return this.uniforms.center}set center(r){this.uniforms.center=r}},Jw=J1;Jw.defaults={center:[.5,.5],radius:100,strength:1}});function iS(r){var t,e=[],i=1,s;if(typeof r=="string")if(e_[r])e=e_[r].slice(),s="rgb";else if(r==="transparent")i=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var o=r.slice(1),n=o.length,a=n<=4;i=1,a?(e=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],n===4&&(i=parseInt(o[3]+o[3],16)/255)):(e=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],n===8&&(i=parseInt(o[6]+o[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var l=t[1],h=l==="rgb",o=l.replace(/a$/,"");s=o;var n=o==="cmyk"?4:o==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(m,p){if(/%$/.test(m))return p===n?parseFloat(m)/100:o==="rgb"?parseFloat(m)*255/100:parseFloat(m);if(o[p]==="h"){if(/deg$/.test(m))return parseFloat(m);if(r_[m]!==void 0)return r_[m]}return parseFloat(m)}),l===o&&e.push(1),i=h||e[n]===void 0?1:e[n],e=e.slice(0,n)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(e=r.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),s=r.match(/([a-z])/ig).join("").toLowerCase());else isNaN(r)?Array.isArray(r)||r.length?(e=[r[0],r[1],r[2]],s="rgb",i=r.length===4?r[3]:1):r instanceof Object&&(r.r!=null||r.red!=null||r.R!=null?(s="rgb",e=[r.r||r.red||r.R||0,r.g||r.green||r.G||0,r.b||r.blue||r.B||0]):(s="hsl",e=[r.h||r.hue||r.H||0,r.s||r.saturation||r.S||0,r.l||r.lightness||r.L||r.b||r.brightness]),i=r.a||r.alpha||r.opacity||1,r.opacity!=null&&(i/=100)):(s="rgb",e=[r>>>16,(r&65280)>>>8,r&255]);return{space:s,values:e,alpha:i}}function sS(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments));var t,e=iS(r);if(!e.space)return[];let i=e.space[0]==="h"?Cm.min:Pm.min,s=e.space[0]==="h"?Cm.max:Pm.max;return t=Array(3),t[0]=Math.min(Math.max(e.values[0],i[0]),s[0]),t[1]=Math.min(Math.max(e.values[1],i[1]),s[1]),t[2]=Math.min(Math.max(e.values[2],i[2]),s[2]),e.space[0]==="h"&&(t=Cm.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t}function n_(r){switch(typeof r){case"string":return oS(r);case"number":return U.hex2rgb(r);default:return r}}function oS(r){let t=sS(r);if(!t)throw new Error(`Unable to parse color "${r}" as RGBA.`);return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function nS(r){let t=rS(pS(r));if(t.length===0)throw new Error("Invalid CSS gradient.");if(t.length!==1)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");let e=t[0],i=aS(e.type),s=lS(e.colorStops),o=fS(e.orientation);return{type:i,stops:s,angle:o}}function aS(r){let t={"linear-gradient":0,"radial-gradient":1};if(!(r in t))throw new Error(`Unsupported gradient type "${r}"`);return t[r]}function lS(r){let t=cS(r),e=[];for(let i=0;i<r.length;i++){let s=hS(r[i]);e.push({offset:t[i],color:s.slice(0,3),alpha:s[3]})}return e}function hS(r){return n_(uS(r))}function uS(r){switch(r.type){case"hex":return`#${r.value}`;case"literal":return r.value;default:return`${r.type}(${r.value.join(",")})`}}function cS(r){let t=[];for(let s=0;s<r.length;s++){let o=r[s],n=-1;o.type==="literal"&&o.length&&"type"in o.length&&o.length.type==="%"&&"value"in o.length&&(n=parseFloat(o.length.value)/100),t.push(n)}let e=s=>{for(let o=s;o<t.length;o++)if(t[o]!==-1)return{indexDelta:o-s,offset:t[o]};return{indexDelta:t.length-1-s,offset:1}},i=0;for(let s=0;s<t.length;s++){let o=t[s];if(o!==-1)i=o;else if(s===0)t[s]=0;else if(s+1===t.length)t[s]=1;else{let n=e(s),a=(n.offset-i)/(1+n.indexDelta);for(let l=0;l<=n.indexDelta;l++)t[s+l]=i+(l+1)*a;s+=n.indexDelta,i=t[s]}}return t.map(dS)}function dS(r){return r.toString().length>6?parseFloat(r.toString().substring(0,6)):r}function fS(r){if(typeof r=="undefined")return 0;if("type"in r&&"value"in r)switch(r.type){case"angular":return parseFloat(r.value);case"directional":return mS(r.value)}return 0}function mS(r){let t={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(r in t))throw new Error(`Unsupported directional value "${r}"`);return t[r]}function pS(r){let t=r.replace(/\s{2,}/gu," ");return t=t.replace(/;/g,""),t=t.replace(/ ,/g,","),t=t.replace(/\( /g,"("),t=t.replace(/ \)/g,")"),t.trim()}function TS(r){return[...r].sort((t,e)=>t.offset-e.offset)}var tS,eS,Es,Es,rS,e_,r_,Pm,Cm,gS,xS,yS,i_,vS,_S,s_,Mm,bS,o_,Im,xu,a_=g(()=>{L();tS=`const float PI = 3.1415926538;
const float PI_2 = PI*2.;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;
uniform sampler2D uSampler;

const int TYPE_LINEAR = 0;
const int TYPE_RADIAL = 1;
const int TYPE_CONIC = 2;
const int MAX_STOPS = 32;

uniform int uNumStops;
uniform float uAlphas[3*MAX_STOPS];
uniform vec3 uColors[MAX_STOPS];
uniform float uOffsets[MAX_STOPS];
uniform int uType;
uniform float uAngle;
uniform float uAlpha;
uniform int uMaxColors;

struct ColorStop {
    float offset;
    vec3 color;
    float alpha;
};

mat2 rotate2d(float angle){
    return mat2(cos(angle), -sin(angle),
    sin(angle), cos(angle));
}

float projectLinearPosition(vec2 pos, float angle){
    vec2 center = vec2(0.5);
    vec2 result = pos - center;
    result = rotate2d(angle) * result;
    result = result + center;
    return clamp(result.x, 0., 1.);
}

float projectRadialPosition(vec2 pos) {
    float r = distance(vFilterCoord, vec2(0.5));
    return clamp(2.*r, 0., 1.);
}

float projectAnglePosition(vec2 pos, float angle) {
    vec2 center = pos - vec2(0.5);
    float polarAngle=atan(-center.y, center.x);
    return mod(polarAngle + angle, PI_2) / PI_2;
}

float projectPosition(vec2 pos, int type, float angle) {
    if (type == TYPE_LINEAR) {
        return projectLinearPosition(pos, angle);
    } else if (type == TYPE_RADIAL) {
        return projectRadialPosition(pos);
    } else if (type == TYPE_CONIC) {
        return projectAnglePosition(pos, angle);
    }

    return pos.y;
}

void main(void) {
    // current/original color
    vec4 currentColor = texture2D(uSampler, vTextureCoord);

    // skip calculations if gradient alpha is 0
    if (0.0 == uAlpha) {
        gl_FragColor = currentColor;
        return;
    }

    // project position
    float y = projectPosition(vFilterCoord, uType, radians(uAngle));

    // check gradient bounds
    float offsetMin = uOffsets[0];
    float offsetMax = 0.0;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (i == uNumStops-1){ // last index
            offsetMax = uOffsets[i];
        }
    }

    if (y  < offsetMin || y > offsetMax) {
        gl_FragColor = currentColor;
        return;
    }

    // limit colors
    if (uMaxColors > 0) {
        float stepSize = 1./float(uMaxColors);
        float stepNumber = float(floor(y/stepSize));
        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment
    }

    // find color stops
    ColorStop from;
    ColorStop to;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (y >= uOffsets[i]) {
            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);
            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);
        }

        if (i == uNumStops-1){ // last index
            break;
        }
    }

    // mix colors from stops
    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);
    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);

    float segmentHeight = to.offset - from.offset;
    float relativePos = y - from.offset;// position from 0 to [segmentHeight]
    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].

    float gradientAlpha = uAlpha * currentColor.a;
    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;

    // mix resulting color with current color
    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);
}
`,eS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform vec4 inputSize;
uniform vec4 outputFrame;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;
}
`,Es=Es||{};Es.stringify=function(){var r={"visit_linear-gradient":function(t){return r.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return r.visit_gradient(t)},"visit_radial-gradient":function(t){return r.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return r.visit_gradient(t)},visit_gradient:function(t){var e=r.visit(t.orientation);return e&&(e+=", "),t.type+"("+e+r.visit(t.colorStops)+")"},visit_shape:function(t){var e=t.value,i=r.visit(t.at),s=r.visit(t.style);return s&&(e+=" "+s),i&&(e+=" at "+i),e},"visit_default-radial":function(t){var e="",i=r.visit(t.at);return i&&(e+=i),e},"visit_extent-keyword":function(t){var e=t.value,i=r.visit(t.at);return i&&(e+=" at "+i),e},"visit_position-keyword":function(t){return t.value},visit_position:function(t){return r.visit(t.value.x)+" "+r.visit(t.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_literal:function(t){return r.visit_color(t.value,t)},visit_hex:function(t){return r.visit_color("#"+t.value,t)},visit_rgb:function(t){return r.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return r.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,e){var i=t,s=r.visit(e.length);return s&&(i+=" "+s),i},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(t){var e="",i=t.length;return t.forEach(function(s,o){e+=r.visit(s),o<i-1&&(e+=", ")}),e},visit:function(t){if(!t)return"";var e="";if(t instanceof Array)return r.visit_array(t,e);if(t.type){var i=r["visit_"+t.type];if(i)return i(t);throw Error("Missing visitor visit_"+t.type)}else throw Error("Invalid node.")}};return function(t){return r.visit(t)}}();Es=Es||{};Es.parse=function(){var r={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function e(O){var B=new Error(t+": "+O);throw B.source=t,B}function i(){var O=s();return t.length>0&&e("Invalid input not EOF"),O}function s(){return w(o)}function o(){return n("linear-gradient",r.linearGradient,l)||n("repeating-linear-gradient",r.repeatingLinearGradient,l)||n("radial-gradient",r.radialGradient,f)||n("repeating-radial-gradient",r.repeatingRadialGradient,f)}function n(O,B,W){return a(B,function(nt){var at=W();return at&&(Q(r.comma)||e("Missing comma before color stops")),{type:O,orientation:at,colorStops:w(A)}})}function a(O,B){var W=Q(O);if(W){Q(r.startCall)||e("Missing (");var nt=B(W);return Q(r.endCall)||e("Missing )"),nt}}function l(){return h()||d()}function h(){return z("directional",r.sideOrCorner,1)}function d(){return z("angular",r.angleValue,1)}function f(){var O,B=m(),W;return B&&(O=[],O.push(B),W=t,Q(r.comma)&&(B=m(),B?O.push(B):t=W)),O}function m(){var O=p()||v();if(O)O.at=E();else{var B=b();if(B){O=B;var W=E();W&&(O.at=W)}else{var nt=S();nt&&(O={type:"default-radial",at:nt})}}return O}function p(){var O=z("shape",/^(circle)/i,0);return O&&(O.style=R()||b()),O}function v(){var O=z("shape",/^(ellipse)/i,0);return O&&(O.style=mt()||b()),O}function b(){return z("extent-keyword",r.extentKeywords,1)}function E(){if(z("position",/^at/,0)){var O=S();return O||e("Missing positioning value"),O}}function S(){var O=C();if(O.x||O.y)return{type:"position",value:O}}function C(){return{x:mt(),y:mt()}}function w(O){var B=O(),W=[];if(B)for(W.push(B);Q(r.comma);)B=O(),B?W.push(B):e("One extra comma");return W}function A(){var O=P();return O||e("Expected color definition"),O.length=mt(),O}function P(){return F()||q()||I()||X()}function X(){return z("literal",r.literalColor,0)}function F(){return z("hex",r.hexColor,1)}function I(){return a(r.rgbColor,function(){return{type:"rgb",value:w(et)}})}function q(){return a(r.rgbaColor,function(){return{type:"rgba",value:w(et)}})}function et(){return Q(r.number)[1]}function mt(){return z("%",r.percentageValue,1)||Y()||R()}function Y(){return z("position-keyword",r.positionKeywords,1)}function R(){return z("px",r.pixelValue,1)||z("em",r.emValue,1)}function z(O,B,W){var nt=Q(B);if(nt)return{type:O,value:nt[W]}}function Q(O){var B,W;return W=/^[\n\r\t\s]+/.exec(t),W&&ft(W[0].length),B=O.exec(t),B&&ft(B[0].length),B}function ft(O){t=t.substr(O)}return function(O){return t=O.toString(),i()}}();rS=Es.parse;Es.stringify;e_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},r_={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};Pm={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Cm={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var t=r[0]/360,e=r[1]/100,i=r[2]/100,s,o,n,a,l;if(e===0)return l=i*255,[l,l,l];i<.5?o=i*(1+e):o=i+e-i*e,s=2*i-o,a=[0,0,0];for(var h=0;h<3;h++)n=t+1/3*-(h-1),n<0?n++:n>1&&n--,6*n<1?l=s+(o-s)*6*n:2*n<1?l=o:3*n<2?l=s+(o-s)*(2/3-n)*6:l=s,a[h]=l*255;return a}};Pm.hsl=function(r){var t=r[0]/255,e=r[1]/255,i=r[2]/255,s=Math.min(t,e,i),o=Math.max(t,e,i),n=o-s,a,l,h;return o===s?a=0:t===o?a=(e-i)/n:e===o?a=2+(i-t)/n:i===o&&(a=4+(t-e)/n),a=Math.min(a*60,360),a<0&&(a+=360),h=(s+o)/2,o===s?l=0:h<=.5?l=n/(o+s):l=n/(2-o-s),[a,l*100,h*100]};gS=Object.defineProperty,xS=Object.defineProperties,yS=Object.getOwnPropertyDescriptors,i_=Object.getOwnPropertySymbols,vS=Object.prototype.hasOwnProperty,_S=Object.prototype.propertyIsEnumerable,s_=(r,t,e)=>t in r?gS(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Mm=(r,t)=>{for(var e in t||(t={}))vS.call(t,e)&&s_(r,e,t[e]);if(i_)for(var e of i_(t))_S.call(t,e)&&s_(r,e,t[e]);return r},bS=(r,t)=>xS(r,yS(t)),o_=90;Im=class extends ${constructor(r){r&&"css"in r&&(r=bS(Mm({},nS(r.css||"")),{alpha:r.alpha,maxColors:r.maxColors}));let t=Mm(Mm({},Im.defaults),r);if(!t.stops||t.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");super(eS,tS),this._stops=[],this.autoFit=!1,Object.assign(this,t)}get stops(){return this._stops}set stops(r){let t=TS(r),e=new Float32Array(t.length*3),i=0,s=1,o=2;for(let n=0;n<t.length;n++){let a=n_(t[n].color),l=n*3;e[l+i]=a[i],e[l+s]=a[s],e[l+o]=a[o]}this.uniforms.uColors=e,this.uniforms.uOffsets=t.map(n=>n.offset),this.uniforms.uAlphas=t.map(n=>n.alpha),this.uniforms.uNumStops=t.length,this._stops=t}set type(r){this.uniforms.uType=r}get type(){return this.uniforms.uType}set angle(r){this.uniforms.uAngle=r-o_}get angle(){return this.uniforms.uAngle+o_}set alpha(r){this.uniforms.uAlpha=r}get alpha(){return this.uniforms.uAlpha}set maxColors(r){this.uniforms.uMaxColors=r}get maxColors(){return this.uniforms.uMaxColors}},xu=Im;xu.LINEAR=0,xu.RADIAL=1,xu.CONIC=2,xu.defaults={type:Im.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0}});var l_=g(()=>{L();});var h_=g(()=>{L();});var u_=g(()=>{L();});var c_=g(()=>{L();});var d_=g(()=>{L();});var AS,ES,f_,wS,m_=g(()=>{L();AS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ES=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`,f_=class extends ${constructor(r){super(AS,ES),this.time=0,this.seed=0,this.uniforms.dimensions=new Float32Array(2),Object.assign(this,f_.defaults,r)}apply(r,t,e,i){let{width:s,height:o}=t.filterFrame;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=o,this.uniforms.seed=this.seed,this.uniforms.time=this.time,r.applyFilter(this,t,e,i)}set curvature(r){this.uniforms.curvature=r}get curvature(){return this.uniforms.curvature}set lineWidth(r){this.uniforms.lineWidth=r}get lineWidth(){return this.uniforms.lineWidth}set lineContrast(r){this.uniforms.lineContrast=r}get lineContrast(){return this.uniforms.lineContrast}set verticalLine(r){this.uniforms.verticalLine=r}get verticalLine(){return this.uniforms.verticalLine}set noise(r){this.uniforms.noise=r}get noise(){return this.uniforms.noise}set noiseSize(r){this.uniforms.noiseSize=r}get noiseSize(){return this.uniforms.noiseSize}set vignetting(r){this.uniforms.vignetting=r}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(r){this.uniforms.vignettingAlpha=r}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(r){this.uniforms.vignettingBlur=r}get vignettingBlur(){return this.uniforms.vignettingBlur}},wS=f_;wS.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0}});var p_=g(()=>{L();});var SS,CS,MS,g_,PS,IS,x_,y_,Rm,RS,v_=g(()=>{gu();L();SS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,CS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`,MS=Object.defineProperty,g_=Object.getOwnPropertySymbols,PS=Object.prototype.hasOwnProperty,IS=Object.prototype.propertyIsEnumerable,x_=(r,t,e)=>t in r?MS(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,y_=(r,t)=>{for(var e in t||(t={}))PS.call(t,e)&&x_(r,e,t[e]);if(g_)for(var e of g_(t))IS.call(t,e)&&x_(r,e,t[e]);return r},Rm=class extends ${constructor(r){super(),this.angle=45,this._distance=5,this._resolution=N.FILTER_RESOLUTION;let t=r?y_(y_({},Rm.defaults),r):Rm.defaults,{kernels:e,blur:i,quality:s,pixelSize:o,resolution:n}=t;this._offset=new ue(this._updatePadding,this),this._tintFilter=new $(SS,CS),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=this._offset,this._tintFilter.resolution=n,this._blurFilter=e?new Ci(e):new Ci(i,s),this.pixelSize=o,this.resolution=n;let{shadowOnly:a,rotation:l,distance:h,offset:d,alpha:f,color:m}=t;this.shadowOnly=a,l!==void 0&&h!==void 0?(this.rotation=l,this.distance=h):this.offset=d,this.alpha=f,this.color=m}apply(r,t,e,i){let s=r.getFilterTexture();this._tintFilter.apply(r,t,s,1),this._blurFilter.apply(r,s,e,i),this.shadowOnly!==!0&&r.applyFilter(this,t,e,0),r.returnFilterTexture(s)}_updatePadding(){let r=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=r+this.blur*2}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}set offset(r){this._offset.copyFrom(r),this._updatePadding()}get offset(){return this._offset}get resolution(){return this._resolution}set resolution(r){this._resolution=r,this._tintFilter&&(this._tintFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)}get distance(){return this._distance}set distance(r){U.deprecation("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=r,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/Qe}set rotation(r){U.deprecation("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=r*Qe,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(r){this._tintFilter.uniforms.alpha=r}get color(){return U.rgb2hex(this._tintFilter.uniforms.color)}set color(r){U.hex2rgb(r,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(r){this._blurFilter.kernels=r}get blur(){return this._blurFilter.blur}set blur(r){this._blurFilter.blur=r,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(r){this._blurFilter.quality=r}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(r){this._blurFilter.pixelSize=r}},RS=Rm;RS.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:N.FILTER_RESOLUTION}});var __=g(()=>{L();});var FS,DS,Fm,Qo,b_=g(()=>{L();FS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,DS=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`,Fm=class extends ${constructor(r){super(FS,DS),this.offset=100,this.fillMode=Fm.TRANSPARENT,this.average=!1,this.seed=0,this.minSize=8,this.sampleSize=512,this._slices=0,this._offsets=new Float32Array(1),this._sizes=new Float32Array(1),this._direction=-1,this.uniforms.dimensions=new Float32Array(2),this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=tt.from(this._canvas,{scaleMode:ge.NEAREST}),Object.assign(this,Fm.defaults,r)}apply(r,t,e,i){let{width:s,height:o}=t.filterFrame;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/s,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,r.applyFilter(this,t,e,i)}_randomizeSizes(){let r=this._sizes,t=this._slices-1,e=this.sampleSize,i=Math.min(this.minSize/e,.9/this._slices);if(this.average){let s=this._slices,o=1;for(let n=0;n<t;n++){let a=o/(s-n),l=Math.max(a*(1-Math.random()*.6),i);r[n]=l,o-=l}r[t]=o}else{let s=1,o=Math.sqrt(1/this._slices);for(let n=0;n<t;n++){let a=Math.max(o*s*Math.random(),i);r[n]=a,s-=a}r[t]=s}this.shuffle()}shuffle(){let r=this._sizes,t=this._slices-1;for(let e=t;e>0;e--){let i=Math.random()*e>>0,s=r[e];r[e]=r[i],r[i]=s}}_randomizeOffsets(){for(let r=0;r<this._slices;r++)this._offsets[r]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){let r=this.sampleSize,t=this.texture,e=this._canvas.getContext("2d");e.clearRect(0,0,8,r);let i,s=0;for(let o=0;o<this._slices;o++){i=Math.floor(this._offsets[o]*256);let n=this._sizes[o]*r,a=i>0?i:0,l=i<0?-i:0;e.fillStyle=`rgba(${a}, ${l}, 0, 1)`,e.fillRect(0,s>>0,r,n+1>>0),s+=n}t.baseTexture.update(),this.uniforms.displacementMap=t}set sizes(r){let t=Math.min(this._slices,r.length);for(let e=0;e<t;e++)this._sizes[e]=r[e]}get sizes(){return this._sizes}set offsets(r){let t=Math.min(this._slices,r.length);for(let e=0;e<t;e++)this._offsets[e]=r[e]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(r){this._slices!==r&&(this._slices=r,this.uniforms.slices=r,this._sizes=this.uniforms.slicesWidth=new Float32Array(r),this._offsets=this.uniforms.slicesOffset=new Float32Array(r),this.refresh())}get direction(){return this._direction}set direction(r){if(this._direction===r)return;this._direction=r;let t=r*Qe;this.uniforms.sinDir=Math.sin(t),this.uniforms.cosDir=Math.cos(t)}get red(){return this.uniforms.red}set red(r){this.uniforms.red=r}get green(){return this.uniforms.green}set green(r){this.uniforms.green=r}get blue(){return this.uniforms.blue}set blue(r){this.uniforms.blue=r}destroy(){var r;(r=this.texture)==null||r.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}},Qo=Fm;Qo.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},Qo.TRANSPARENT=0,Qo.ORIGINAL=1,Qo.LOOP=2,Qo.CLAMP=3,Qo.MIRROR=4});var NS,BS,T_,Dm,A_=g(()=>{L();NS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,BS=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;
uniform float alpha;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    if (knockout) {
      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`,T_=class extends ${constructor(r){let t=Object.assign({},T_.defaults,r),{outerStrength:e,innerStrength:i,color:s,knockout:o,quality:n,alpha:a}=t,l=Math.round(t.distance);super(NS,BS.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/n/l).toFixed(7)}`).replace(/__DIST__/gi,`${l.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:s,outerStrength:e,innerStrength:i,padding:l,knockout:o,alpha:a})}get color(){return U.rgb2hex(this.uniforms.glowColor)}set color(r){U.hex2rgb(r,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(r){this.uniforms.outerStrength=r}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(r){this.uniforms.innerStrength=r}get knockout(){return this.uniforms.knockout}set knockout(r){this.uniforms.knockout=r}get alpha(){return this.uniforms.alpha}set alpha(r){this.uniforms.alpha=r}},Dm=T_;Dm.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1}});var OS,LS,kS,E_,US,w_=g(()=>{L();OS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,LS=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,kS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`,E_=class extends ${constructor(r){super(OS,kS.replace("${perlin}",LS)),this.parallel=!0,this.time=0,this._angle=0,this.uniforms.dimensions=new Float32Array(2);let t=Object.assign(E_.defaults,r);this._angleLight=new it,this.angle=t.angle,this.gain=t.gain,this.lacunarity=t.lacunarity,this.alpha=t.alpha,this.parallel=t.parallel,this.center=t.center,this.time=t.time}apply(r,t,e,i){let{width:s,height:o}=t.filterFrame;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/s,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,r.applyFilter(this,t,e,i)}get angle(){return this._angle}set angle(r){this._angle=r;let t=r*Qe;this._angleLight.x=Math.cos(t),this._angleLight.y=Math.sin(t)}get gain(){return this.uniforms.gain}set gain(r){this.uniforms.gain=r}get lacunarity(){return this.uniforms.lacunarity}set lacunarity(r){this.uniforms.lacunarity=r}get alpha(){return this.uniforms.alpha}set alpha(r){this.uniforms.alpha=r}},US=E_;US.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1}});var S_=g(()=>{L();});var GS,zS,C_,VS,M_=g(()=>{L();GS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zS=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float uHue;
uniform float uAlpha;
uniform bool uColorize;
uniform float uSaturation;
uniform float uLightness;

// https://en.wikipedia.org/wiki/Luma_(video)
const vec3 weight = vec3(0.299, 0.587, 0.114);

float getWeightedAverage(vec3 rgb) {
    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;
}

// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243
const vec3 k = vec3(0.57735, 0.57735, 0.57735);

vec3 hueShift(vec3 color, float angle) {
    float cosAngle = cos(angle);
    return vec3(
    color * cosAngle +
    cross(k, color) * sin(angle) +
    k * dot(k, color) * (1.0 - cosAngle)
    );
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    vec4 result = color;

    // colorize
    if (uColorize) {
        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);
    }

    // hue
    result.rgb = hueShift(result.rgb, uHue);

    // saturation
    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js
    float average = (result.r + result.g + result.b) / 3.0;

    if (uSaturation > 0.) {
        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));
    } else {
        result.rgb -= (average - result.rgb) * uSaturation;
    }

    // lightness
    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));

    // alpha
    gl_FragColor = mix(color, result, uAlpha);
}
`,C_=class extends ${constructor(r){super(GS,zS),this._hue=0;let t=Object.assign({},C_.defaults,r);Object.assign(this,t)}get hue(){return this._hue}set hue(r){this._hue=r,this.uniforms.uHue=this._hue*(Math.PI/180)}get alpha(){return this.uniforms.uAlpha}set alpha(r){this.uniforms.uAlpha=r}get colorize(){return this.uniforms.uColorize}set colorize(r){this.uniforms.uColorize=r}get lightness(){return this.uniforms.uLightness}set lightness(r){this.uniforms.uLightness=r}get saturation(){return this.uniforms.uSaturation}set saturation(r){this.uniforms.uSaturation=r}},VS=C_;VS.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1}});var P_=g(()=>{L();});var I_=g(()=>{L();});var HS,XS,R_,jS,F_=g(()=>{L();HS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,XS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`,R_=class extends ${constructor(r,t=0){super(HS,XS),this.seed=0,this.uniforms.dimensions=new Float32Array(2),typeof r=="number"?(this.seed=r,r=void 0):this.seed=t,Object.assign(this,R_.defaults,r)}apply(r,t,e,i){var s,o;this.uniforms.dimensions[0]=(s=t.filterFrame)==null?void 0:s.width,this.uniforms.dimensions[1]=(o=t.filterFrame)==null?void 0:o.height,this.uniforms.seed=this.seed,r.applyFilter(this,t,e,i)}set sepia(r){this.uniforms.sepia=r}get sepia(){return this.uniforms.sepia}set noise(r){this.uniforms.noise=r}get noise(){return this.uniforms.noise}set noiseSize(r){this.uniforms.noiseSize=r}get noiseSize(){return this.uniforms.noiseSize}set scratch(r){this.uniforms.scratch=r}get scratch(){return this.uniforms.scratch}set scratchDensity(r){this.uniforms.scratchDensity=r}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(r){this.uniforms.scratchWidth=r}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(r){this.uniforms.vignetting=r}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(r){this.uniforms.vignettingAlpha=r}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(r){this.uniforms.vignettingBlur=r}get vignettingBlur(){return this.uniforms.vignettingBlur}},jS=R_;jS.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3}});var WS,$S,yu,D_,N_=g(()=>{L();WS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$S=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterClamp;

uniform float uAlpha;
uniform vec2 uThickness;
uniform vec4 uColor;
uniform bool uKnockout;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${angleStep};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture2D(uSampler, vTextureCoord);
    vec4 contentColor = sourceColor * float(!uKnockout);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    gl_FragColor = contentColor + outlineColor;
}
`,yu=class extends ${constructor(r=1,t=0,e=.1,i=1,s=!1){super(WS,$S.replace(/\$\{angleStep\}/,yu.getAngleStep(e))),this._thickness=1,this._alpha=1,this._knockout=!1,this.uniforms.uThickness=new Float32Array([0,0]),this.uniforms.uColor=new Float32Array([0,0,0,1]),this.uniforms.uAlpha=i,this.uniforms.uKnockout=s,Object.assign(this,{thickness:r,color:t,quality:e,alpha:i,knockout:s})}static getAngleStep(r){let t=Math.max(r*yu.MAX_SAMPLES,yu.MIN_SAMPLES);return(Math.PI*2/t).toFixed(7)}apply(r,t,e,i){this.uniforms.uThickness[0]=this._thickness/t._frame.width,this.uniforms.uThickness[1]=this._thickness/t._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,r.applyFilter(this,t,e,i)}get alpha(){return this._alpha}set alpha(r){this._alpha=r}get color(){return U.rgb2hex(this.uniforms.uColor)}set color(r){U.hex2rgb(r,this.uniforms.uColor)}get knockout(){return this._knockout}set knockout(r){this._knockout=r}get thickness(){return this._thickness}set thickness(r){this._thickness=r,this.padding=r}},D_=yu;D_.MIN_SAMPLES=1,D_.MAX_SAMPLES=100});var B_=g(()=>{L();});var O_=g(()=>{L();});var YS,qS,L_,KS,k_=g(()=>{L();YS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,qS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`,L_=class extends ${constructor(r){super(YS,qS),this.time=0,this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,L_.defaults,r)}apply(r,t,e,i){var s,o;this.uniforms.dimensions[0]=(s=t.filterFrame)==null?void 0:s.width,this.uniforms.dimensions[1]=(o=t.filterFrame)==null?void 0:o.height,this.uniforms.time=this.time,r.applyFilter(this,t,e,i)}set mirror(r){this.uniforms.mirror=r}get mirror(){return this.uniforms.mirror}set boundary(r){this.uniforms.boundary=r}get boundary(){return this.uniforms.boundary}set amplitude(r){this.uniforms.amplitude[0]=r[0],this.uniforms.amplitude[1]=r[1]}get amplitude(){return this.uniforms.amplitude}set waveLength(r){this.uniforms.waveLength[0]=r[0],this.uniforms.waveLength[1]=r[1]}get waveLength(){return this.uniforms.waveLength}set alpha(r){this.uniforms.alpha[0]=r[0],this.uniforms.alpha[1]=r[1]}get alpha(){return this.uniforms.alpha}},KS=L_;KS.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0}});var U_=g(()=>{L();});var ZS,QS,G_,JS,z_=g(()=>{L();ZS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,QS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`,G_=class extends ${constructor(r=[0,0],t,e=0){super(ZS,QS),this.center=r,Object.assign(this,G_.defaults,t),this.time=e}apply(r,t,e,i){this.uniforms.time=this.time,r.applyFilter(this,t,e,i)}get center(){return this.uniforms.center}set center(r){this.uniforms.center=r}get amplitude(){return this.uniforms.amplitude}set amplitude(r){this.uniforms.amplitude=r}get wavelength(){return this.uniforms.wavelength}set wavelength(r){this.uniforms.wavelength=r}get brightness(){return this.uniforms.brightness}set brightness(r){this.uniforms.brightness=r}get speed(){return this.uniforms.speed}set speed(r){this.uniforms.speed=r}get radius(){return this.uniforms.radius}set radius(r){this.uniforms.radius=r}},JS=G_;JS.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1}});var V_=g(()=>{L();});var tC,eC,vu,Nm,Bm,H_,rC,X_=g(()=>{L();tC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,eC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,vu=class extends ${constructor(t){var e,i;super(tC,eC),this.uniforms.blur=t.blur,this.uniforms.gradientBlur=t.gradientBlur,this.uniforms.start=(e=t.start)!=null?e:new it(0,window.innerHeight/2),this.uniforms.end=(i=t.end)!=null?i:new it(600,window.innerHeight/2),this.uniforms.delta=new it(30,30),this.uniforms.texSize=new it(window.innerWidth,window.innerHeight),this.updateDelta()}updateDelta(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}get blur(){return this.uniforms.blur}set blur(t){this.uniforms.blur=t}get gradientBlur(){return this.uniforms.gradientBlur}set gradientBlur(t){this.uniforms.gradientBlur=t}get start(){return this.uniforms.start}set start(t){this.uniforms.start=t,this.updateDelta()}get end(){return this.uniforms.end}set end(t){this.uniforms.end=t,this.updateDelta()}},Nm=class extends vu{updateDelta(){let t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.x=t/i,this.uniforms.delta.y=e/i}},Bm=class extends vu{updateDelta(){let t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.x=-e/i,this.uniforms.delta.y=t/i}},H_=class extends ${constructor(r,t,e,i){super(),typeof r=="number"&&(U.deprecation("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),r={blur:r,gradientBlur:t,start:e,end:i}),r=Object.assign({},H_.defaults,r),this.tiltShiftXFilter=new Nm(r),this.tiltShiftYFilter=new Bm(r)}apply(r,t,e,i){let s=r.getFilterTexture();this.tiltShiftXFilter.apply(r,t,s,1),this.tiltShiftYFilter.apply(r,s,e,i),r.returnFilterTexture(s)}get blur(){return this.tiltShiftXFilter.blur}set blur(r){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=r}get gradientBlur(){return this.tiltShiftXFilter.gradientBlur}set gradientBlur(r){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=r}get start(){return this.tiltShiftXFilter.start}set start(r){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=r}get end(){return this.tiltShiftXFilter.end}set end(r){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=r}},rC=H_;rC.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0}});var iC,sC,j_,oC,W_=g(()=>{L();iC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,sC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`,j_=class extends ${constructor(r){super(iC,sC),Object.assign(this,j_.defaults,r)}get offset(){return this.uniforms.offset}set offset(r){this.uniforms.offset=r}get radius(){return this.uniforms.radius}set radius(r){this.uniforms.radius=r}get angle(){return this.uniforms.angle}set angle(r){this.uniforms.angle=r}},oC=j_;oC.defaults={radius:200,angle:4,padding:20,offset:new it}});var nC,aC,$_,lC,hC,uC,Y_,cC,q_=g(()=>{L();nC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,aC=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,$_=Object.getOwnPropertySymbols,lC=Object.prototype.hasOwnProperty,hC=Object.prototype.propertyIsEnumerable,uC=(r,t)=>{var e={};for(var i in r)lC.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&$_)for(var i of $_(r))t.indexOf(i)<0&&hC.call(r,i)&&(e[i]=r[i]);return e},Y_=class extends ${constructor(r){let t=Object.assign(Y_.defaults,r),{maxKernelSize:e}=t,i=uC(t,["maxKernelSize"]);super(nC,aC.replace("${maxKernelSize}",e.toFixed(1))),Object.assign(this,i)}get center(){return this.uniforms.uCenter}set center(r){this.uniforms.uCenter=r}get strength(){return this.uniforms.uStrength}set strength(r){this.uniforms.uStrength=r}get innerRadius(){return this.uniforms.uInnerRadius}set innerRadius(r){this.uniforms.uInnerRadius=r}get radius(){return this.uniforms.uRadius}set radius(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r}},cC=Y_;cC.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32}});var K_=g(()=>{W1();q1();K1();Z1();Q1();t_();a_();l_();h_();u_();c_();d_();m_();p_();v_();__();b_();A_();w_();S_();M_();gu();P_();I_();F_();N_();B_();O_();k_();U_();z_();V_();X_();W_();q_();});var dC,Z_,Q_=g(()=>{"use strict";dC=function(){class r{constructor(o){this.article=o}update(){}AABBs(o){let n=this.AABB;return!(o[2]<n[0]||n[2]<o[0]||o[3]<n[1]||n[3]<o[1])}collidesPoint(o){let n=this.vertices,a=n.length,l=!1;for(let h=0,d=a-2;h<a;h+=2)n[h+1]>o.y!=n[d+1]>o.y&&o.x<(n[d]-n[h])*(o.y-n[h+1])/(n[d+1]-n[h+1])+n[h]&&(l=!l),d=h;return l}collidesCircle(){}collidesRectangle(){}collidesPolygon(o,n){let a=this.vertices,l=n?o:o.vertices,h=[a,l],d,f,m,p,v;for(let b=0;b<h.length;b++){let E=h[b];for(let S=0;S<E.length;S+=2){let C=(S+2)%E.length,w={x:E[C+1]-E[S+1],y:E[S]-E[C]};d=f=null;for(let A=0;A<a.length;A+=2)m=w.x*a[A]+w.y*a[A+1],(d===null||m<d)&&(d=m),(f===null||m>f)&&(f=m);p=v=null;for(let A=0;A<l.length;A+=2)m=w.x*l[A]+w.y*l[A+1],(p===null||m<p)&&(p=m),(v===null||m>v)&&(v=m);if(f<p||v<d)return!1}}return!0}collidesLine(o,n){let a=this.vertices,l=a.length;if(this.collidesPoint(o))return!0;for(let h=0;h<l;h+=2){let d=(h+2)%l;if(r.lineLine(o,n,{x:a[h],y:a[h+1]},{x:a[d],y:a[d+1]}))return!0}return!1}collides(o){return this["collides"+o.SHAPE](o)}static lineLine(o,n,a,l){let h=o.x,d=o.y,f=n.x,m=n.y,p=a.x,v=a.y,b=l.x,E=l.y,S=f-h,C=m-d,w=b-p,A=E-v,P=(-C*(h-p)+S*(d-v))/(-w*C+S*A),X=(w*(d-v)-A*(h-p))/(-w*C+S*A);return P>=0&&P<=1&&X>=0&&X<=1}}class t extends r{constructor(o,n){super(o),this.SHAPE="Rectangle",n=n||{},this._vertices=[],this.AABB=[0,0,0,0],this.set(n)}set(o){this.center=o.center||this.article,this.rotation=o.rotation?o.rotation:o.center?o.center:this.article,typeof o.square!="undefined"?this._width=this._height=o.square:(this._width=o.width||this.article.width,this._height=o.height||this.article.height),this.noRotate=o.noRotate,this.hw=this._width/2,this.hh=this._height/2,this.update()}get width(){return this._width}set width(o){this._width=o,this.hw=o/2}get height(){return this._height}set height(o){this._height=o,this.hh=o/2}update(){let o=this.AABB,n=this.center;if(this.noRotate){let a=this.hw,l=this.hh;o[0]=n.x-a,o[1]=n.y-l,o[2]=n.x+a,o[3]=n.y+l}else{let a=Math.abs(Math.sin(this.rotation.rotation)/2),l=Math.abs(Math.cos(this.rotation.rotation)/2),h=this._width,d=this._height,f=d*a+h*l,m=d*l+h*a;o[0]=n.x-f,o[1]=n.y-m,o[2]=n.x+f,o[3]=n.y+m}this.verticesDirty=!0}updateVertices(){let o=this._vertices,n=this.center,a=this.hw,l=this.hh;if(this.noRotate){let h=this.AABB;o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[1],o[4]=h[2],o[5]=h[3],o[6]=h[0],o[7]=h[3]}else{let h=this.rotation.rotation,d=Math.sin(h),f=Math.cos(h);o[0]=n.x-a*f+l*d,o[1]=n.y-a*d-l*f,o[2]=n.x+a*f+l*d,o[3]=n.y+a*d-l*f,o[4]=n.x+a*f-l*d,o[5]=n.y+a*d+l*f,o[6]=n.x-a*f-l*d,o[7]=n.y-a*d+l*f}this.verticesDirty=!1}get vertices(){return this.verticesDirty&&this.updateVertices(),this._vertices}collidesRectangle(o){return this.noRotate&&o.noRotate?this.AABBs(o.AABB):this.collidesPolygon(o)}collidesCircle(o){return o.collidesRectangle(this)}static fromRectangle(o,n,a,l){let h={x:o+a/2,y:n+l/2};return new t(h,{width:a,height:l,noRotate:!0})}}class e extends r{constructor(o,n,a){super(o),this.SHAPE="Polygon",a=a||{},this.points=n,this.vertices=[],this.AABB=[],this.set(a)}set(o){o.point&&(this.points=o.points),this.center=o.center||this.article,this.rotation=o.rotation?o.rotation:o.center?o.center:this.article,this.update()}update(){let o=this.rotation.rotation,n=Math.sin(o),a=Math.cos(o),l=1/0,h=0,d=1/0,f=0,m=this.points,p=m.length,v=this.vertices,b=this.center;for(let E=0;E<p;E+=2){let S=m[E],C=m[E+1],w=v[E]=b.x+S*a-C*n,A=v[E+1]=b.y+S*n+C*a;l=w<l?w:l,h=w>h?w:h,d=A<d?A:d,f=A>f?A:f}this.AABB[0]=l,this.AABB[1]=d,this.AABB[2]=h,this.AABB[3]=f,this.width=h-l,this.height=f-d,this.hw=(h-l)/2,this.hh=(f-d)/2}collidesRectangle(o){return this.collidesPolygon(o)}collidesCircle(o){return o.collidesPolygon(this)}}class i extends r{constructor(o,n){super(o),this.SHAPE="Circle",this.AABB=[],n=n||{},this.set(n)}set(o){this.radius=o.radius||this.article.width/2,this.radiusSquared=this.radius*this.radius,this.center=o.positionObject?o.positionObject:this.article,this.update()}update(){let o=this.AABB,n=this.radius,a=this.center;o[0]=a.x-n,o[1]=a.y-n,o[2]=a.x+n,o[3]=a.y+n}collidesCircle(o){let n=this.center,a=o.center,l=a.x-n.x,h=a.y-n.y,d=o.radius+this.radius;return l*l+h*h<=d*d}collidesPoint(o){let n=o.x-this.center.x,a=o.y-this.center.y;return n*n+a*a<=this.radiusSquared}collidesLine(o,n){function a(E,S){return E[0]*S[0]+E[1]*S[1]}let l=this.center,h=[l.x-o.x,l.y-o.y],d=[n.x-o.x,n.y-o.y],f=a(d,d),p=a(h,d)/f;p=p<0?0:p,p=p>1?1:p;let v=[d[0]*p+o.x-l.x,d[1]*p+o.y-l.y];return a(v,v)<=this.radiusSquared}collidesRectangle(o){if(o.noRotate){let n=o.AABB,a=(n[2]-n[0])/2,l=(n[3]-n[1])/2,h=this.center,d=this.radius,f=Math.abs(h.x-n[0]),m=Math.abs(h.y-n[1]);if(f>a+d||m>l+d)return!1;if(f<=a||m<=l)return!0;let p=f-a,v=m-l;return p*p+v*v<=this.radiusSquared}else{let n=this.center;if(o.collidesPoint(n))return!0;let a=o.vertices;return this.collidesLine({x:a[0],y:a[1]},{x:a[2],y:a[3]})||this.collidesLine({x:a[2],y:a[3]},{x:a[4],y:a[5]})||this.collidesLine({x:a[4],y:a[5]},{x:a[6],y:a[7]})||this.collidesLine({x:a[6],y:a[7]},{x:a[0],y:a[1]})}}collidesPolygon(o){let n=this.center;if(o.collidesPoint(n))return!0;let a=o.vertices,l=a.length;for(let h=0;h<l-2;h+=2)if(this.collidesLine({x:a[h],y:a[h+1]},{x:a[h+2],y:a[h+3]}))return!0;return this.collidesLine({x:a[0],y:a[1]},{x:a[l-2],y:a[l-1]})}}return{Shape:r,Rectangle:t,Polygon:e,Circle:i}}(),Z_=dC});var ws,J_=g(()=>{"use strict";Q_();wi();ws=class{constructor(t,e="Rectangle"){this.sprite=j.PIXI.app.stage.addChild(t),this.x=this.sprite.x,this.y=this.sprite.y,this.collisionShape=e,this.intersects=new Z_[this.collisionShape](this.sprite),j.PIXI.app.ticker.add(this.tickerFn,this)}tickerFn(){this.sprite.x=this.x-j.camera.x,this.sprite.y=this.y-j.camera.y}collides(t){return this.intersects[`collides${t.collisionShape}`](t.intersects)}remove(t){if(this.x=this.y=1/0,this.sprite.parent.removeChild(this.sprite),Array.isArray(t)){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}else typeof t=="object"&&delete this}}});var Om=g(()=>{"use strict";J_()});var fC={};var Ss,_u,tb=g(()=>{"use strict";du();K_();Ts();wi();Om();({app:Ss}=j.PIXI);j.player={sprite:function(){let r=new ys;return r.lineStyle(2,16777215),r.drawCircle(0,0,50),r.x=Ss.screen.width/2,r.y=Ss.screen.height/2,r.filters=[new Dm({quality:.1})],new ws(r,"Circle")}(),acceleration:.2,velocity:{x:0,y:0},restoringForce:.005,friction:.95,position:{x:0,y:0,_x:0,_y:0},state:["idle"]};_u=()=>!j.settings.clickToMove&&j.player.state[0]==="idle";j.keys.addKeys([{name:"Move Up",key:"w",fn:()=>j.player.velocity.y-=_u()?j.player.acceleration:0},{name:"Move Left",key:"a",fn:()=>j.player.velocity.x-=_u()?j.player.acceleration:0},{name:"Move Down",key:"s",fn:()=>j.player.velocity.y+=_u()?j.player.acceleration:0},{name:"Move Right",key:"d",fn:()=>j.player.velocity.x+=_u()?j.player.acceleration:0}]);j.functions.updateCamera=function(r){j.camera.x=(void 0).smoothDamp((void 0)(j.camera.x),(void 0)(j.player.position.x),(void 0)(j.camera.smoothDamp),(void 0)(r)).toNumber(),j.camera.y=(void 0).smoothDamp((void 0)(j.camera.y),(void 0)(j.player.position.y),(void 0)(j.camera.smoothDamp),(void 0)(r)).toNumber()};Ss.ticker.add(r=>{switch(j.player.position.x+=j.player.velocity.x,j.player.position.y+=j.player.velocity.y,j.player.sprite.x+=j.player.velocity.x,j.player.sprite.y+=j.player.velocity.y,j.player.velocity.x*=j.player.friction,j.player.velocity.y*=j.player.friction,j.player.state[0]){case"lockedToMass":let t=j.player.state[1];j.player.position.x=j.player.sprite.x=(void 0).smoothDamp((void 0)(j.player.sprite.x),(void 0)(t.x),(void 0)(.15),(void 0)(r)).toNumber(),j.player.position.y=j.player.sprite.y=(void 0).smoothDamp((void 0)(j.player.sprite.y),(void 0)(t.y),(void 0)(.15),(void 0)(r)).toNumber(),j.camera.x=j.player.sprite.x-Ss.screen.width/2,j.camera.y=j.player.sprite.y-Ss.screen.height/2;break;case"lockedToMassExit":j.player.position.x-=Ss.screen.width/2,j.player.position.y-=Ss.screen.height/2,j.functions.updateCamera(r),j.player.state=["idle"];break;case"idle":default:j.functions.updateCamera(r);break}})});var xC={};function pC(r,t){let e=new mC;return e.beginFill(16777215),e.drawCircle(0,0,45),e.endFill(),e.x=r,e.y=t,new ws(e,"Circle")}function gC(){let e=bu.screen.width/2-300,i=bu.screen.width/2+600/2,s=bu.screen.height/2-400/2,o=bu.screen.height/2+400/2,n=Math.random()*(i-e)+e,a=Math.random()*(o-s)+s;return pC(n,a)}var mC,bu,rb=g(()=>{"use strict";wi();Om();du();wm();Ts();({Graphics:mC}=cu),{app:bu}=j.PIXI;As.addEvent("Mass Spawn","interval",(void 0)(1e3).div(j.data.quarks.regenRate),()=>{j.data.quarks.maxParticles.gt(j.static.massParticles.length)&&j.static.massParticles.push(gC())})});var ib=Mt((O$,Tu)=>{var Lm=function(){var r=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function s(n,a){if(!i[n]){i[n]={};for(var l=0;l<n.length;l++)i[n][n.charAt(l)]=l}return i[n][a]}var o={compressToBase64:function(n){if(n==null)return"";var a=o._compress(n,6,function(l){return t.charAt(l)});switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(n){return n==null?"":n==""?null:o._decompress(n.length,32,function(a){return s(t,n.charAt(a))})},compressToUTF16:function(n){return n==null?"":o._compress(n,15,function(a){return r(a+32)})+" "},decompressFromUTF16:function(n){return n==null?"":n==""?null:o._decompress(n.length,16384,function(a){return n.charCodeAt(a)-32})},compressToUint8Array:function(n){for(var a=o.compress(n),l=new Uint8Array(a.length*2),h=0,d=a.length;h<d;h++){var f=a.charCodeAt(h);l[h*2]=f>>>8,l[h*2+1]=f%256}return l},decompressFromUint8Array:function(n){if(n==null)return o.decompress(n);for(var a=new Array(n.length/2),l=0,h=a.length;l<h;l++)a[l]=n[l*2]*256+n[l*2+1];var d=[];return a.forEach(function(f){d.push(r(f))}),o.decompress(d.join(""))},compressToEncodedURIComponent:function(n){return n==null?"":o._compress(n,6,function(a){return e.charAt(a)})},decompressFromEncodedURIComponent:function(n){return n==null?"":n==""?null:(n=n.replace(/ /g,"+"),o._decompress(n.length,32,function(a){return s(e,n.charAt(a))}))},compress:function(n){return o._compress(n,16,function(a){return r(a)})},_compress:function(n,a,l){if(n==null)return"";var h,d,f={},m={},p="",v="",b="",E=2,S=3,C=2,w=[],A=0,P=0,X;for(X=0;X<n.length;X+=1)if(p=n.charAt(X),Object.prototype.hasOwnProperty.call(f,p)||(f[p]=S++,m[p]=!0),v=b+p,Object.prototype.hasOwnProperty.call(f,v))b=v;else{if(Object.prototype.hasOwnProperty.call(m,b)){if(b.charCodeAt(0)<256){for(h=0;h<C;h++)A=A<<1,P==a-1?(P=0,w.push(l(A)),A=0):P++;for(d=b.charCodeAt(0),h=0;h<8;h++)A=A<<1|d&1,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=d>>1}else{for(d=1,h=0;h<C;h++)A=A<<1|d,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=0;for(d=b.charCodeAt(0),h=0;h<16;h++)A=A<<1|d&1,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=d>>1}E--,E==0&&(E=Math.pow(2,C),C++),delete m[b]}else for(d=f[b],h=0;h<C;h++)A=A<<1|d&1,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=d>>1;E--,E==0&&(E=Math.pow(2,C),C++),f[v]=S++,b=String(p)}if(b!==""){if(Object.prototype.hasOwnProperty.call(m,b)){if(b.charCodeAt(0)<256){for(h=0;h<C;h++)A=A<<1,P==a-1?(P=0,w.push(l(A)),A=0):P++;for(d=b.charCodeAt(0),h=0;h<8;h++)A=A<<1|d&1,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=d>>1}else{for(d=1,h=0;h<C;h++)A=A<<1|d,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=0;for(d=b.charCodeAt(0),h=0;h<16;h++)A=A<<1|d&1,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=d>>1}E--,E==0&&(E=Math.pow(2,C),C++),delete m[b]}else for(d=f[b],h=0;h<C;h++)A=A<<1|d&1,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=d>>1;E--,E==0&&(E=Math.pow(2,C),C++)}for(d=2,h=0;h<C;h++)A=A<<1|d&1,P==a-1?(P=0,w.push(l(A)),A=0):P++,d=d>>1;for(;;)if(A=A<<1,P==a-1){w.push(l(A));break}else P++;return w.join("")},decompress:function(n){return n==null?"":n==""?null:o._decompress(n.length,32768,function(a){return n.charCodeAt(a)})},_decompress:function(n,a,l){var h=[],d,f=4,m=4,p=3,v="",b=[],E,S,C,w,A,P,X,F={val:l(0),position:a,index:1};for(E=0;E<3;E+=1)h[E]=E;for(C=0,A=Math.pow(2,2),P=1;P!=A;)w=F.val&F.position,F.position>>=1,F.position==0&&(F.position=a,F.val=l(F.index++)),C|=(w>0?1:0)*P,P<<=1;switch(d=C){case 0:for(C=0,A=Math.pow(2,8),P=1;P!=A;)w=F.val&F.position,F.position>>=1,F.position==0&&(F.position=a,F.val=l(F.index++)),C|=(w>0?1:0)*P,P<<=1;X=r(C);break;case 1:for(C=0,A=Math.pow(2,16),P=1;P!=A;)w=F.val&F.position,F.position>>=1,F.position==0&&(F.position=a,F.val=l(F.index++)),C|=(w>0?1:0)*P,P<<=1;X=r(C);break;case 2:return""}for(h[3]=X,S=X,b.push(X);;){if(F.index>n)return"";for(C=0,A=Math.pow(2,p),P=1;P!=A;)w=F.val&F.position,F.position>>=1,F.position==0&&(F.position=a,F.val=l(F.index++)),C|=(w>0?1:0)*P,P<<=1;switch(X=C){case 0:for(C=0,A=Math.pow(2,8),P=1;P!=A;)w=F.val&F.position,F.position>>=1,F.position==0&&(F.position=a,F.val=l(F.index++)),C|=(w>0?1:0)*P,P<<=1;h[m++]=r(C),X=m-1,f--;break;case 1:for(C=0,A=Math.pow(2,16),P=1;P!=A;)w=F.val&F.position,F.position>>=1,F.position==0&&(F.position=a,F.val=l(F.index++)),C|=(w>0?1:0)*P,P<<=1;h[m++]=r(C),X=m-1,f--;break;case 2:return b.join("")}if(f==0&&(f=Math.pow(2,p),p++),h[X])v=h[X];else if(X===m)v=S+S.charAt(0);else return null;b.push(v),h[m++]=S+v.charAt(0),f--,S=v,f==0&&(f=Math.pow(2,p),p++)}}};return o}();typeof define=="function"&&define.amd?define(function(){return Lm}):typeof Tu!="undefined"&&Tu!=null?Tu.exports=Lm:typeof angular!="undefined"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return Lm})});var yC={};var km,sb=g(()=>{"use strict";km=tn(ib());Ts();wi();j.dataManagement=function(){let r=j.data,t=(a=j.data)=>km.default.compressToBase64(JSON.stringify(a)),e=(a=localStorage.getItem("data"))=>a?JSON.parse(km.default.decompressFromBase64(a)):null,i=(a=!1)=>{j.data=r,s(),a&&window.location.reload()},s=()=>{j.data&&(j.data.playtime.timeLastPlayed=(void 0)(Date.now()),localStorage.setItem("data",t()),console.log("Game Saved"))};return{resetData:i,compileData:t,decompileData:e,saveData:s,exportData:()=>{let a=t();if(console.log(a),prompt("Download save data?:",a)!=null){let l=new Blob([a],{type:"text/plain"}),h=document.createElement("a");h.href=URL.createObjectURL(l),h.download="stellar-odyssey-data.txt",h.textContent="Download .txt file",document.body.appendChild(h),h.click(),document.body.removeChild(h)}},loadData:()=>{if(!j.data)return;function a(d){for(let f in d)if(typeof d[f]=="string")try{let m=(void 0)(d[f]);d[f]=m}catch(m){console.error(`Error processing value: ${d[f]}`)}else typeof d[f]=="object"&&d[f]!==null&&a(d[f]);return d}let l=e();console.log(l),console.log(l=a(l));function h(d,f){for(let m in d)d.hasOwnProperty(m)&&(f.hasOwnProperty(m)?typeof d[m]=="object"&&typeof f[m]=="object"&&h(d[m],f[m]):f[m]=d[m])}console.log(h(r,l))}}}()});var ob=Mt((k$,vC)=>{vC.exports={}});var bC=Mt(Mi=>{var Au=[()=>V(Mi,null,function*(){return Promise.resolve().then(()=>(wi(),H1))}),()=>V(Mi,null,function*(){return Promise.resolve().then(()=>(j1(),Xw))}),()=>V(Mi,null,function*(){return Promise.resolve().then(()=>(tb(),fC))}),()=>V(Mi,null,function*(){return Promise.resolve().then(()=>(rb(),xC))}),()=>V(Mi,null,function*(){return Promise.resolve().then(()=>(sb(),yC))})],Eu=[()=>V(Mi,null,function*(){return Promise.resolve().then(()=>tn(ob()))})],nb=0,ab=0,_C=()=>V(Mi,null,function*(){var s,o;let r=document.getElementsByClassName("loading-progress")[0],t=document.getElementsByClassName("loading-text")[0],e=Date.now();console.group("Loading..."),console.time("Loading Ended"),console.log(`${e} | Loading Started`);for(let n=0;n<Au.length;n++){let a=(s=Au[n].toString().match(/("|'|`).*?("|'|`)/))==null?void 0:s[0].replace(/("|'|`)/g,"").replace(/_/g,"/");a&&(r.innerHTML=`${nb}/${Au.length}`,t.innerHTML=`Loading: ${a}`,console.time(a),console.group(`${a}`),yield Au[n]().then(()=>{console.log(`${Date.now()} | Script ${a} has run`),nb++}).catch(l=>{console.error(`${Date.now()} | Failed to run script ${a}:`,l)}),console.timeEnd(a),console.groupEnd())}for(let n=0;n<Eu.length;n++){let a=(o=Eu[n].toString().match(/("|'|`).*?("|'|`)/))==null?void 0:o[0].replace(/("|'|`)/g,"").replace(/_/g,"/");a&&(r.innerHTML=`${ab}/${Eu.length}`,t.innerHTML=`Loading: ${a}`,console.time(a),console.group(`${a}`),yield Eu[n]().then(()=>{console.log(`${Date.now()} | Stylesheet ${a} has run`),ab++}).catch(l=>{console.error(`${Date.now()} | Failed to run Stylesheet ${a}:`,l)}),console.timeEnd(a),console.groupEnd())}console.timeEnd("Loading Ended"),console.groupEnd();let i=document.querySelector(".loading-screen");i&&document.body.removeChild(i)});_C()});bC();})();
/*! Bundled license information:

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)

@pixi/filter-adjustment/dist/filter-adjustment.mjs:
  (*!
   * @pixi/filter-adjustment - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-adjustment is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-kawase-blur/dist/filter-kawase-blur.mjs:
  (*!
   * @pixi/filter-kawase-blur - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-kawase-blur is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-advanced-bloom/dist/filter-advanced-bloom.mjs:
  (*!
   * @pixi/filter-advanced-bloom - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-advanced-bloom is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-ascii/dist/filter-ascii.mjs:
  (*!
   * @pixi/filter-ascii - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-ascii is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-bevel/dist/filter-bevel.mjs:
  (*!
   * @pixi/filter-bevel - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-bevel is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-bloom/dist/filter-bloom.mjs:
  (*!
   * @pixi/filter-bloom - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-bloom is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-bulge-pinch/dist/filter-bulge-pinch.mjs:
  (*!
   * @pixi/filter-bulge-pinch - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-bulge-pinch is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-color-gradient/dist/filter-color-gradient.mjs:
  (*!
   * @pixi/filter-color-gradient - v5.2.0
   * Compiled Tue, 28 Feb 2023 14:24:35 UTC
   *
   * @pixi/filter-color-gradient is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-color-map/dist/filter-color-map.mjs:
  (*!
   * @pixi/filter-color-map - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-color-map is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-color-overlay/dist/filter-color-overlay.mjs:
  (*!
   * @pixi/filter-color-overlay - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-color-overlay is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-color-replace/dist/filter-color-replace.mjs:
  (*!
   * @pixi/filter-color-replace - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-color-replace is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-convolution/dist/filter-convolution.mjs:
  (*!
   * @pixi/filter-convolution - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-convolution is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-cross-hatch/dist/filter-cross-hatch.mjs:
  (*!
   * @pixi/filter-cross-hatch - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-cross-hatch is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-crt/dist/filter-crt.mjs:
  (*!
   * @pixi/filter-crt - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-crt is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-dot/dist/filter-dot.mjs:
  (*!
   * @pixi/filter-dot - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-dot is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-drop-shadow/dist/filter-drop-shadow.mjs:
  (*!
   * @pixi/filter-drop-shadow - v5.2.0
   * Compiled Tue, 28 Feb 2023 14:24:35 UTC
   *
   * @pixi/filter-drop-shadow is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-emboss/dist/filter-emboss.mjs:
  (*!
   * @pixi/filter-emboss - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-emboss is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-glitch/dist/filter-glitch.mjs:
  (*!
   * @pixi/filter-glitch - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-glitch is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-glow/dist/filter-glow.mjs:
  (*!
   * @pixi/filter-glow - v5.2.1
   * Compiled Fri, 24 Mar 2023 22:12:11 UTC
   *
   * @pixi/filter-glow is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-godray/dist/filter-godray.mjs:
  (*!
   * @pixi/filter-godray - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-godray is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-grayscale/dist/filter-grayscale.mjs:
  (*!
   * @pixi/filter-grayscale - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-grayscale is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-hsl-adjustment/dist/filter-hsl-adjustment.mjs:
  (*!
   * @pixi/filter-hsl-adjustment - v5.2.0
   * Compiled Tue, 28 Feb 2023 14:24:35 UTC
   *
   * @pixi/filter-hsl-adjustment is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-motion-blur/dist/filter-motion-blur.mjs:
  (*!
   * @pixi/filter-motion-blur - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-motion-blur is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-multi-color-replace/dist/filter-multi-color-replace.mjs:
  (*!
   * @pixi/filter-multi-color-replace - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-multi-color-replace is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-old-film/dist/filter-old-film.mjs:
  (*!
   * @pixi/filter-old-film - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-old-film is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-outline/dist/filter-outline.mjs:
  (*!
   * @pixi/filter-outline - v5.2.0
   * Compiled Tue, 28 Feb 2023 14:24:35 UTC
   *
   * @pixi/filter-outline is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-pixelate/dist/filter-pixelate.mjs:
  (*!
   * @pixi/filter-pixelate - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-pixelate is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-radial-blur/dist/filter-radial-blur.mjs:
  (*!
   * @pixi/filter-radial-blur - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-radial-blur is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-reflection/dist/filter-reflection.mjs:
  (*!
   * @pixi/filter-reflection - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-reflection is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-rgb-split/dist/filter-rgb-split.mjs:
  (*!
   * @pixi/filter-rgb-split - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-rgb-split is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-shockwave/dist/filter-shockwave.mjs:
  (*!
   * @pixi/filter-shockwave - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-shockwave is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-simple-lightmap/dist/filter-simple-lightmap.mjs:
  (*!
   * @pixi/filter-simple-lightmap - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-simple-lightmap is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-tilt-shift/dist/filter-tilt-shift.mjs:
  (*!
   * @pixi/filter-tilt-shift - v5.2.0
   * Compiled Tue, 28 Feb 2023 14:24:35 UTC
   *
   * @pixi/filter-tilt-shift is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-twist/dist/filter-twist.mjs:
  (*!
   * @pixi/filter-twist - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-twist is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

@pixi/filter-zoom-blur/dist/filter-zoom-blur.mjs:
  (*!
   * @pixi/filter-zoom-blur - v5.1.1
   * Compiled Wed, 11 Jan 2023 23:10:33 UTC
   *
   * @pixi/filter-zoom-blur is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)

pixi-filters/dist/esm/pixi-filters.mjs:
  (*!
   * pixi-filters - v5.2.1
   * Compiled Fri, 24 Mar 2023 22:12:11 UTC
   *
   * pixi-filters is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   *)
*/
